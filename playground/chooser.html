<!DOCTYPE html>
<html>
<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="../artifacts/css/dx.light.css"/>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
    <!-- <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script> -->

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
</head>
<body>
    <div class="demo-container">
        <div class="long-title"><h3>Country Area, Population, and GDP Structure</h3></div>
        <div id="gridContainer"></div>
      </div>

    <script>
        $(() => {
  const $grid = $('#gridContainer').dxDataGrid({
    dataSource: countries,
    keyExpr: 'ID',
    columnAutoWidth: true,
    // allowColumnReordering: true,
    showBorders: true,
    editing: {
      // allowUpdating: true,
    },
    groupPanel: {
      visible: true,
    },
    // rtlEnabled: true,
    columnChooser: {
      enabled: true,
      mode: 'select',
      selection: {
        selectByClick: true,
        allowSelectAll: true,
        // recursive: tru
      },
      // allowSearch: false,
      search: {
        // enabled: true,
        editorOptions: {
          placeholder: 'aboba'
        }
      }
    },
    export: {
      enabled: true,
      allowExportSelectedData: true,
    },
    onExporting(e) {
      const workbook = new ExcelJS.Workbook();
      const worksheet = workbook.addWorksheet('Employees');

      DevExpress.excelExporter.exportDataGrid({
        component: e.component,
        worksheet,
        autoFilterEnabled: true,
      }).then(() => {
        workbook.xlsx.writeBuffer().then((buffer) => {
          saveAs(new Blob([buffer], { type: 'application/octet-stream' }), 'Employees.xlsx');
        });
      });
      e.cancel = true;
    },


    columns: [
      // { dataField: 'field1', visible: false },
      // { dataField: 'field2', visible: false },

        // {
        //   dataField: 'Country',
        // },
        // {
        //   dataField: 'Area',
        // },
        // {
        //   caption: 'Services',
        //   dataField: 'GDP_Services',
        //   width: 85,
        //   format: {
        //     type: 'percent',
        //     precision: 1,
        //   },
        // },
        // {
        //   caption: 'Urban',
        //   dataField: 'Population_Urban',
        //   // groupIndex: 0
        // }

    {
      caption: 'Population',
      columns: [{
        caption: 'Total',
        dataField: 'Population_Total',
        format: 'fixedPoint',
        allowHiding: false
      }, {
        caption: 'Urban',
        dataField: 'Population_Urban',
        format: 'percent',
      }],
    }, 
    {
      caption: 'Nominal GDP',
      // allowHiding: false,
      columns: [{
        caption: 'Total, mln $',
        dataField: 'GDP_Total',
        format: 'fixedPoint',
        sortOrder: 'desc',
      }, {
        caption: 'By Sector',
        // allowHiding: false,
        columns: [{
        allowHiding: false,
          caption: 'Agriculture',
          dataField: 'GDP_Agriculture',
          width: 95,
          format: {
            type: 'percent',
            precision: 1,
          },
        }, {
          caption: 'Industry',
          dataField: 'GDP_Industry',
          width: 80,
          format: {
            type: 'percent',
            precision: 1,
          },
        }, {
          caption: 'Services',
          dataField: 'GDP_Services',
          width: 85,
          format: {
            type: 'percent',
            precision: 1,
          },
        }],
      }],
    }
    ],
  });
window.grid = $grid.dxDataGrid('instance')
});


const countries = [{
  ID: 1,
  Country: 'Brazil',
  Area: 8515767,
  Population_Urban: 0.85,
  Population_Rural: 0.15,
  Population_Total: 205809000,
  GDP_Agriculture: 0.054,
  GDP_Industry: 0.274,
  GDP_Services: 0.672,
  GDP_Total: 2353025,
}, {
  ID: 2,
  Country: 'China',
  Area: 9388211,
  Population_Urban: 0.54,
  Population_Rural: 0.46,
  Population_Total: 1375530000,
  GDP_Agriculture: 0.091,
  GDP_Industry: 0.426,
  GDP_Services: 0.483,
  GDP_Total: 10380380,
}, {
  ID: 3,
  Country: 'France',
  Area: 675417,
  Population_Urban: 0.79,
  Population_Rural: 0.21,
  Population_Total: 64529000,
  GDP_Agriculture: 0.019,
  GDP_Industry: 0.183,
  GDP_Services: 0.798,
  GDP_Total: 2846889,
}, {
  ID: 4,
  Country: 'Germany',
  Area: 357021,
  Population_Urban: 0.75,
  Population_Rural: 0.25,
  Population_Total: 81459000,
  GDP_Agriculture: 0.008,
  GDP_Industry: 0.281,
  GDP_Services: 0.711,
  GDP_Total: 3859547,
}, {
  ID: 5,
  Country: 'India',
  Area: 3287590,
  Population_Urban: 0.32,
  Population_Rural: 0.68,
  Population_Total: 1286260000,
  GDP_Agriculture: 0.174,
  GDP_Industry: 0.258,
  GDP_Services: 0.569,
  GDP_Total: 2047811,
}, {
  ID: 6,
  Country: 'Italy',
  Area: 301230,
  Population_Urban: 0.69,
  Population_Rural: 0.31,
  Population_Total: 60676361,
  GDP_Agriculture: 0.02,
  GDP_Industry: 0.242,
  GDP_Services: 0.738,
  GDP_Total: 2147952,
}, {
  ID: 7,
  Country: 'Japan',
  Area: 377835,
  Population_Urban: 0.93,
  Population_Rural: 0.07,
  Population_Total: 126920000,
  GDP_Agriculture: 0.012,
  GDP_Industry: 0.275,
  GDP_Services: 0.714,
  GDP_Total: 4616335,
}, {
  ID: 8,
  Country: 'Russia',
  Area: 17098242,
  Population_Urban: 0.74,
  Population_Rural: 0.26,
  Population_Total: 146544710,
  GDP_Agriculture: 0.039,
  GDP_Industry: 0.36,
  GDP_Services: 0.601,
  GDP_Total: 1857461,
}, {
  ID: 9,
  Country: 'United States',
  Area: 9147420,
  Population_Urban: 0.81,
  Population_Rural: 0.19,
  Population_Total: 323097000,
  GDP_Agriculture: 0.0112,
  GDP_Industry: 0.191,
  GDP_Services: 0.797,
  GDP_Total: 17418925,
}, {
  ID: 10,
  Country: 'United Kingdom',
  Area: 244820,
  Population_Urban: 0.82,
  Population_Rural: 0.18,
  Population_Total: 65097000,
  GDP_Agriculture: 0.007,
  GDP_Industry: 0.21,
  GDP_Services: 0.783,
  GDP_Total: 2945146,
}];

    </script>
</body>
</html>
	
