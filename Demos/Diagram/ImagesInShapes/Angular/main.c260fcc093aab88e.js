(self.webpackChunkdiagram_imagesinshapes=self.webpackChunkdiagram_imagesinshapes||[]).push([[179],{642:(Gl,Kl,Io)=>{"use strict";var bi={};function J(e){return"function"==typeof e}function _(e){const t=e(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Io.r(bi),Io.d(bi,{animation:()=>Ny,inputType:()=>K6,nativeScrolling:()=>Cu,pointerEvents:()=>iM,styleProp:()=>gl,stylePropPrefix:()=>j3,supportProp:()=>Fy,touch:()=>Sl,touchEvents:()=>nM,transition:()=>Ly,transitionEndEventName:()=>oM});const x=_(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,o)=>`${o+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function m(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class b{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const r of t)r.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(J(i))try{i()}catch(r){n=r instanceof x?r.errors:[r]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const r of o)try{p(r)}catch(c){n=n??[],c instanceof x?n=[...n,...c.errors]:n.push(c)}}if(n)throw new x(n)}}add(n){var t;if(n&&n!==this)if(this.closed)p(n);else{if(n instanceof b){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&m(t,n)}remove(n){const{_finalizers:t}=this;t&&m(t,n),n instanceof b&&n._removeParent(this)}}b.EMPTY=(()=>{const e=new b;return e.closed=!0,e})();const E=b.EMPTY;function y(e){return e instanceof b||e&&"closed"in e&&J(e.remove)&&J(e.add)&&J(e.unsubscribe)}function p(e){J(e)?e():e.unsubscribe()}const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},s={setTimeout(e,n,...t){const{delegate:i}=s;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=s;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function a(e){s.setTimeout(()=>{const{onUnhandledError:n}=d;if(!n)throw e;n(e)})}function l(){}const u=g("C",void 0,void 0);function g(e,n,t){return{kind:e,value:n,error:t}}let O=null;function I(e){if(d.useDeprecatedSynchronousErrorHandling){const n=!O;if(n&&(O={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:i}=O;if(O=null,t)throw i}}else e()}class C extends b{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,y(n)&&n.add(this)):this.destination=H}static create(n,t,i){return new A(n,t,i)}next(n){this.isStopped?L(function f(e){return g("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?L(function h(e){return g("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?L(u,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const w=Function.prototype.bind;function P(e,n){return w.call(e,n)}class k{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){R(i)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){R(i)}else R(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){R(t)}}}class A extends C{constructor(n,t,i){let o;if(super(),J(n)||!n)o={next:n??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&d.useDeprecatedNextContext?(r=Object.create(n),r.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&P(n.next,r),error:n.error&&P(n.error,r),complete:n.complete&&P(n.complete,r)}):o=n}this.destination=new k(o)}}function R(e){d.useDeprecatedSynchronousErrorHandling?function D(e){d.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=e)}(e):a(e)}function L(e,n){const{onStoppedNotification:t}=d;t&&s.setTimeout(()=>t(e,n))}const H={closed:!0,next:l,error:function M(e){throw e},complete:l},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function U(e){return e}let Y=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,o){const r=function Z(e){return e&&e instanceof C||function z(e){return e&&J(e.next)&&J(e.error)&&J(e.complete)}(e)&&y(e)}(t)?t:new A(t,i,o);return I(()=>{const{operator:c,source:v}=this;r.add(c?c.call(r,v):v?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=W(i))((o,r)=>{const c=new A({next:v=>{try{t(v)}catch(S){r(S),c.unsubscribe()}},error:r,complete:o});this.subscribe(c)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[j](){return this}pipe(...t){return function q(e){return 0===e.length?U:1===e.length?e[0]:function(t){return e.reduce((i,o)=>o(i),t)}}(t)(this)}toPromise(t){return new(t=W(t))((i,o)=>{let r;this.subscribe(c=>r=c,c=>o(c),()=>i(r))})}}return e.create=n=>new e(n),e})();function W(e){var n;return null!==(n=e??d.Promise)&&void 0!==n?n:Promise}const se=_(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let re=(()=>{class e extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Q(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new se}next(t){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){I(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:o,observers:r}=this;return i||o?E:(this.currentObservers=null,r.push(t),new b(()=>{this.currentObservers=null,m(r,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:o,isStopped:r}=this;i?t.error(o):r&&t.complete()}asObservable(){const t=new Y;return t.source=this,t}}return e.create=(n,t)=>new Q(n,t),e})();class Q extends re{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,n)}error(n){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==i?i:E}}function ie(e){return n=>{if(function G(e){return J(e?.lift)}(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(e,n,t,i,o){return new me(e,n,t,i,o)}class me extends C{constructor(n,t,i,o,r,c){super(n),this.onFinalize=r,this.shouldUnsubscribe=c,this._next=t?function(v){try{t(v)}catch(S){n.error(S)}}:super._next,this._error=o?function(v){try{o(v)}catch(S){n.error(S)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(v){n.error(v)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function be(e,n){return ie((t,i)=>{let o=0;t.subscribe(ae(i,r=>{i.next(e.call(n,r,o++))}))})}function ui(e){return this instanceof ui?(this.v=e,this):new ui(e)}function xn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Gt(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(c){return new Promise(function(v,S){!function o(r,c,v,S){Promise.resolve(S).then(function(T){r({value:T,done:v})},c)}(v,S,(c=e[r](c)).done,c.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const pO=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function fO(e){return J(e?.then)}function gO(e){return J(e[j])}function mO(e){return Symbol.asyncIterator&&J(e?.[Symbol.asyncIterator])}function _O(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const vO=function sN(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yO(e){return J(e?.[vO])}function CO(e){return function ge(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=t.apply(e,n||[]),r=[];return o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o;function c(B){i[B]&&(o[B]=function(X){return new Promise(function(ne,le){r.push([B,X,ne,le])>1||v(B,X)})})}function v(B,X){try{!function S(B){B.value instanceof ui?Promise.resolve(B.value.v).then(T,F):N(r[0][2],B)}(i[B](X))}catch(ne){N(r[0][3],ne)}}function T(B){v("next",B)}function F(B){v("throw",B)}function N(B,X){B(X),r.shift(),r.length&&v(r[0][0],r[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:i,done:o}=yield ui(t.read());if(o)return yield ui(void 0);yield yield ui(i)}}finally{t.releaseLock()}})}function xO(e){return J(e?.getReader)}function er(e){if(e instanceof Y)return e;if(null!=e){if(gO(e))return function aN(e){return new Y(n=>{const t=e[j]();if(J(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(pO(e))return function lN(e){return new Y(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(fO(e))return function cN(e){return new Y(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,a)})}(e);if(mO(e))return OO(e);if(yO(e))return function uN(e){return new Y(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(xO(e))return function dN(e){return OO(CO(e))}(e)}throw _O(e)}function OO(e){return new Y(n=>{(function hN(e,n){var t,i,o,r;return function Fe(e,n,t,i){return new(t||(t=Promise))(function(r,c){function v(F){try{T(i.next(F))}catch(N){c(N)}}function S(F){try{T(i.throw(F))}catch(N){c(N)}}function T(F){F.done?r(F.value):function o(r){return r instanceof t?r:new t(function(c){c(r)})}(F.value).then(v,S)}T((i=i.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=xn(e);!(i=yield t.next()).done;)if(n.next(i.value),n.closed)return}catch(c){o={error:c}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function Vr(e,n,t,i=0,o=!1){const r=n.schedule(function(){t(),o?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!o)return r}function xd(e,n,t=1/0){return J(n)?xd((i,o)=>be((r,c)=>n(i,r,o,c))(er(e(i,o))),t):("number"==typeof n&&(t=n),ie((i,o)=>function pN(e,n,t,i,o,r,c,v){const S=[];let T=0,F=0,N=!1;const B=()=>{N&&!S.length&&!T&&n.complete()},X=le=>T<i?ne(le):S.push(le),ne=le=>{r&&n.next(le),T++;let he=!1;er(t(le,F++)).subscribe(ae(n,Oe=>{o?.(Oe),r?X(Oe):n.next(Oe)},()=>{he=!0},void 0,()=>{if(he)try{for(T--;S.length&&T<i;){const Oe=S.shift();c?Vr(n,c,()=>ne(Oe)):ne(Oe)}B()}catch(Oe){n.error(Oe)}}))};return e.subscribe(ae(n,X,()=>{N=!0,B()})),()=>{v?.()}}(i,o,e,t)))}const bO=new Y(e=>e.complete());function ag(e){return e[e.length-1]}function SO(e){return function mN(e){return e&&J(e.schedule)}(ag(e))?e.pop():void 0}function DO(e,n=0){return ie((t,i)=>{t.subscribe(ae(i,o=>Vr(i,e,()=>i.next(o),n),()=>Vr(i,e,()=>i.complete(),n),o=>Vr(i,e,()=>i.error(o),n)))})}function IO(e,n=0){return ie((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function EO(e,n){if(!e)throw new Error("Iterable cannot be null");return new Y(t=>{Vr(t,n,()=>{const i=e[Symbol.asyncIterator]();Vr(t,n,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function lg(e,n){return n?function bN(e,n){if(null!=e){if(gO(e))return function vN(e,n){return er(e).pipe(IO(n),DO(n))}(e,n);if(pO(e))return function CN(e,n){return new Y(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}(e,n);if(fO(e))return function yN(e,n){return er(e).pipe(IO(n),DO(n))}(e,n);if(mO(e))return EO(e,n);if(yO(e))return function xN(e,n){return new Y(t=>{let i;return Vr(t,n,()=>{i=e[vO](),Vr(t,n,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(c){return void t.error(c)}r?t.complete():t.next(o)},0,!0)}),()=>J(i?.return)&&i.return()})}(e,n);if(xO(e))return function ON(e,n){return EO(CO(e),n)}(e,n)}throw _O(e)}(e,n):er(e)}class DN extends re{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}}function cg(...e){return lg(e,SO(e))}function wO(e={}){const{connector:n=(()=>new re),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=e;return r=>{let c,v,S,T=0,F=!1,N=!1;const B=()=>{v?.unsubscribe(),v=void 0},X=()=>{B(),c=S=void 0,F=N=!1},ne=()=>{const le=c;X(),le?.unsubscribe()};return ie((le,he)=>{T++,!N&&!F&&B();const Oe=S=S??n();he.add(()=>{T--,0===T&&!N&&!F&&(v=ug(ne,o))}),Oe.subscribe(he),!c&&T>0&&(c=new A({next:_e=>Oe.next(_e),error:_e=>{N=!0,B(),v=ug(X,t,_e),Oe.error(_e)},complete:()=>{F=!0,B(),v=ug(X,i),Oe.complete()}}),er(le).subscribe(c))})(r)}}function ug(e,n,...t){if(!0===n)return void e();if(!1===n)return;const i=new A({next:()=>{i.unsubscribe(),e()}});return er(n(...t)).subscribe(i)}function PO(e,n){return ie((t,i)=>{let o=null,r=0,c=!1;const v=()=>c&&!o&&i.complete();t.subscribe(ae(i,S=>{o?.unsubscribe();let T=0;const F=r++;er(e(S,F)).subscribe(o=ae(i,N=>i.next(n?n(S,N,F,T++):N),()=>{o=null,v()}))},()=>{c=!0,v()}))})}function EN(e,n){return e===n}function kt(e){for(let n in e)if(e[n]===kt)return n;throw Error("Could not find renamed property on target object.")}function Od(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function On(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(On).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function dg(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const wN=kt({__forward_ref__:kt});function hg(e){return e.__forward_ref__=hg,e.toString=function(){return On(this())},e}function Je(e){return pg(e)?e():e}function pg(e){return"function"==typeof e&&e.hasOwnProperty(wN)&&e.__forward_ref__===hg}function fg(e){return e&&!!e.\u0275providers}class Ue extends Error{constructor(n,t){super(function bd(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function Mt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function tt(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function gg(e,n){throw new Ue(-201,!1)}function Bi(e,n){null==e&&function Ye(e,n,t,i){throw new Error(`ASSERTION ERROR: ${e}`+(null==i?"":` [Expected=> ${t} ${i} ${n} <=Actual]`))}(n,e,null,"!=")}function gt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function St(e){return{providers:e.providers||[],imports:e.imports||[]}}function Sd(e){return MO(e,Id)||MO(e,AO)}function MO(e,n){return e.hasOwnProperty(n)?e[n]:null}function Dd(e){return e&&(e.hasOwnProperty(mg)||e.hasOwnProperty(FN))?e[mg]:null}const Id=kt({\u0275prov:kt}),mg=kt({\u0275inj:kt}),AO=kt({ngInjectableDef:kt}),FN=kt({ngInjectorDef:kt});var mt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(mt||{});let _g;function di(e){const n=_g;return _g=e,n}function kO(e,n,t){const i=Sd(e);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&mt.Optional?null:void 0!==n?n:void gg(On(e))}const Vt=globalThis;class qe{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=gt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Zl={},Og="__NG_DI_FLAG__",Ed="ngTempTokenPath",HN=/\n/gm,LO="__source";let aa;function zr(e){const n=aa;return aa=e,n}function zN(e,n=mt.Default){if(void 0===aa)throw new Ue(-203,!1);return null===aa?kO(e,void 0,n):aa.get(e,n&mt.Optional?null:void 0,n)}function nt(e,n=mt.Default){return(function RO(){return _g}()||zN)(Je(e),n)}function Dt(e,n=mt.Default){return nt(e,wd(n))}function wd(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function bg(e){const n=[];for(let t=0;t<e.length;t++){const i=Je(e[t]);if(Array.isArray(i)){if(0===i.length)throw new Ue(900,!1);let o,r=mt.Default;for(let c=0;c<i.length;c++){const v=i[c],S=jN(v);"number"==typeof S?-1===S?o=v.token:r|=S:o=v}n.push(nt(o,r))}else n.push(nt(i))}return n}function Xl(e,n){return e[Og]=n,e.prototype[Og]=n,e}function jN(e){return e[Og]}function tr(e){return{toString:e}.toString()}var Pd=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Pd||{}),so=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(so||{});const Eo={},It=[],Td=kt({\u0275cmp:kt}),Sg=kt({\u0275dir:kt}),Dg=kt({\u0275pipe:kt}),HO=kt({\u0275mod:kt}),nr=kt({\u0275fac:kt}),Yl=kt({__NG_ELEMENT_ID__:kt}),BO=kt({__NG_ENV_ID__:kt});function VO(e,n,t){let i=e.length;for(;;){const o=e.indexOf(n,t);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const r=n.length;if(o+r===i||e.charCodeAt(o+r)<=32)return o}t=o+1}}function Ig(e,n,t){let i=0;for(;i<t.length;){const o=t[i];if("number"==typeof o){if(0!==o)break;i++;const r=t[i++],c=t[i++],v=t[i++];e.setAttribute(n,c,v,r)}else{const r=o,c=t[++i];jO(r)?e.setProperty(n,r,c):e.setAttribute(n,r,c),i++}}return i}function zO(e){return 3===e||4===e||6===e}function jO(e){return 64===e.charCodeAt(0)}function Ql(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){const o=n[i];"number"==typeof o?t=o:0===t||UO(e,t,o,null,-1===t||2===t?n[++i]:null)}}return e}function UO(e,n,t,i,o){let r=0,c=e.length;if(-1===n)c=-1;else for(;r<e.length;){const v=e[r++];if("number"==typeof v){if(v===n){c=-1;break}if(v>n){c=r-1;break}}}for(;r<e.length;){const v=e[r];if("number"==typeof v)break;if(v===t){if(null===i)return void(null!==o&&(e[r+1]=o));if(i===e[r+1])return void(e[r+2]=o)}r++,null!==i&&r++,null!==o&&r++}-1!==c&&(e.splice(c,0,n),r=c+1),e.splice(r++,0,t),null!==i&&e.splice(r++,0,i),null!==o&&e.splice(r++,0,o)}const $O="ng-template";function WN(e,n,t){let i=0,o=!0;for(;i<e.length;){let r=e[i++];if("string"==typeof r&&o){const c=e[i++];if(t&&"class"===r&&-1!==VO(c.toLowerCase(),n,0))return!0}else{if(1===r){for(;i<e.length&&"string"==typeof(r=e[i++]);)if(r.toLowerCase()===n)return!0;return!1}"number"==typeof r&&(o=!1)}}return!1}function WO(e){return 4===e.type&&e.value!==$O}function GN(e,n,t){return n===(4!==e.type||t?e.value:$O)}function KN(e,n,t){let i=4;const o=e.attrs||[],r=function XN(e){for(let n=0;n<e.length;n++)if(zO(e[n]))return n;return e.length}(o);let c=!1;for(let v=0;v<n.length;v++){const S=n[v];if("number"!=typeof S){if(!c)if(4&i){if(i=2|1&i,""!==S&&!GN(e,S,t)||""===S&&1===n.length){if(ao(i))return!1;c=!0}}else{const T=8&i?S:n[++v];if(8&i&&null!==e.attrs){if(!WN(e.attrs,T,t)){if(ao(i))return!1;c=!0}continue}const N=qN(8&i?"class":S,o,WO(e),t);if(-1===N){if(ao(i))return!1;c=!0;continue}if(""!==T){let B;B=N>r?"":o[N+1].toLowerCase();const X=8&i?B:null;if(X&&-1!==VO(X,T,0)||2&i&&T!==B){if(ao(i))return!1;c=!0}}}}else{if(!c&&!ao(i)&&!ao(S))return!1;if(c&&ao(S))continue;c=!1,i=S|1&i}}return ao(i)||c}function ao(e){return 0==(1&e)}function qN(e,n,t,i){if(null===n)return-1;let o=0;if(i||!t){let r=!1;for(;o<n.length;){const c=n[o];if(c===e)return o;if(3===c||6===c)r=!0;else{if(1===c||2===c){let v=n[++o];for(;"string"==typeof v;)v=n[++o];continue}if(4===c)break;if(0===c){o+=4;continue}}o+=r?1:2}return-1}return function YN(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const i=e[t];if("number"==typeof i)return-1;if(i===n)return t;t++}return-1}(n,e)}function GO(e,n,t=!1){for(let i=0;i<n.length;i++)if(KN(e,n[i],t))return!0;return!1}function QN(e,n){e:for(let t=0;t<n.length;t++){const i=n[t];if(e.length===i.length){for(let o=0;o<e.length;o++)if(e[o]!==i[o])continue e;return!0}}return!1}function KO(e,n){return e?":not("+n.trim()+")":n}function JN(e){let n=e[0],t=1,i=2,o="",r=!1;for(;t<e.length;){let c=e[t];if("string"==typeof c)if(2&i){const v=e[++t];o+="["+c+(v.length>0?'="'+v+'"':"")+"]"}else 8&i?o+="."+c:4&i&&(o+=" "+c);else""!==o&&!ao(c)&&(n+=KO(r,o),o=""),i=c,r=r||!ao(i);t++}return""!==o&&(n+=KO(r,o)),n}function tn(e){return tr(()=>{const n=function ZO(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Eo,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||It,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qO(e.inputs,n),outputs:qO(e.outputs)}}(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Pd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||so.Emulated,styles:e.styles||It,_:null,schemas:e.schemas||null,tView:null,id:""};!function XO(e){e.features?.forEach(n=>n(e))}(t);const i=e.dependencies;return t.directiveDefs=Md(i,!1),t.pipeDefs=Md(i,!0),t.id=function aH(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of t)n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function iH(e){return yt(e)||Rn(e)}function oH(e){return null!==e}function Et(e){return tr(()=>({type:e.type,bootstrap:e.bootstrap||It,declarations:e.declarations||It,imports:e.imports||It,exports:e.exports||It,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function qO(e,n){if(null==e)return Eo;const t={};for(const i in e)if(e.hasOwnProperty(i)){let o=e[i],r=o;Array.isArray(o)&&(r=o[1],o=o[0]),t[o]=i,n&&(n[o]=r)}return t}function yt(e){return e[Td]||null}function Rn(e){return e[Sg]||null}function Kn(e){return e[Dg]||null}function Md(e,n){if(!e)return null;const t=n?Kn:iH;return()=>("function"==typeof e?e():e).map(i=>t(i)).filter(oH)}const nn=0,ze=1,ct=2,Zt=3,lo=4,ec=5,zn=6,la=7,un=8,jr=9,ca=10,it=11,tc=12,YO=13,ua=14,dn=15,nc=16,da=17,wo=18,ic=19,QO=20,Ur=21,ir=22,oc=23,rc=24,pt=25,Eg=1,JO=2,Po=7,ha=9,kn=11;function pi(e){return Array.isArray(e)&&"object"==typeof e[Eg]}function qn(e){return Array.isArray(e)&&!0===e[Eg]}function wg(e){return 0!=(4&e.flags)}function Cs(e){return e.componentOffset>-1}function co(e){return!!e.template}function Pg(e){return 0!=(512&e[ct])}function xs(e,n){return e.hasOwnProperty(nr)?e[nr]:null}let Fn=null,kd=!1;function zi(e){const n=Fn;return Fn=e,n}const nb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ob(e){if(!ac(e)||e.dirty){if(!e.producerMustRecompute(e)&&!ab(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function sb(e){e.dirty=!0,function rb(e){if(void 0===e.liveConsumerNode)return;const n=kd;kd=!0;try{for(const t of e.liveConsumerNode)t.dirty||sb(t)}finally{kd=n}}(e),e.consumerMarkedDirty?.(e)}function Mg(e){return e&&(e.nextProducerIndex=0),zi(e)}function Ag(e,n){if(zi(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(ac(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)Fd(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ab(e){pa(e);for(let n=0;n<e.producerNode.length;n++){const t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(ob(t),i!==t.version))return!0}return!1}function lb(e){if(pa(e),ac(e))for(let n=0;n<e.producerNode.length;n++)Fd(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Fd(e,n){if(function ub(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),pa(e),1===e.liveConsumerNode.length)for(let i=0;i<e.producerNode.length;i++)Fd(e.producerNode[i],e.producerIndexOfThis[i]);const t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const i=e.liveConsumerIndexOfThis[n],o=e.liveConsumerNode[n];pa(o),o.producerIndexOfThis[i]=n}}function ac(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function pa(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let db=null;const gb=()=>{},CH=(()=>({...nb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:gb}))();class xH{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function fa(){return mb}function mb(e){return e.type.prototype.ngOnChanges&&(e.setInput=bH),OH}function OH(){const e=vb(this),n=e?.current;if(n){const t=e.previous;if(t===Eo)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function bH(e,n,t,i){const o=this.declaredInputs[t],r=vb(e)||function SH(e,n){return e[_b]=n}(e,{previous:Eo,current:null}),c=r.current||(r.current={}),v=r.previous,S=v[o];c[o]=new xH(S&&S.currentValue,n,v===Eo),e[i]=n}fa.ngInherit=!0;const _b="__ngSimpleChanges__";function vb(e){return e[_b]||null}const To=function(e,n,t){};function zt(e){for(;Array.isArray(e);)e=e[nn];return e}function fi(e,n){return zt(n[e.index])}function xb(e,n){return e.data[n]}function Ii(e,n){const t=n[e];return pi(t)?t:t[nn]}function Wr(e,n){return null==n?null:e[n]}function Ob(e){e[da]=0}function TH(e){1024&e[ct]||(e[ct]|=1024,Sb(e,1))}function bb(e){1024&e[ct]&&(e[ct]&=-1025,Sb(e,-1))}function Sb(e,n){let t=e[Zt];if(null===t)return;t[ec]+=n;let i=t;for(t=t[Zt];null!==t&&(1===n&&1===i[ec]||-1===n&&0===i[ec]);)t[ec]+=n,i=t,t=t[Zt]}const Qe={lFrame:Fb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Eb(){return Qe.bindingsEnabled}function ma(){return null!==Qe.skipHydrationRootTNode}function Me(){return Qe.lFrame.lView}function Ct(){return Qe.lFrame.tView}function Ln(){let e=wb();for(;null!==e&&64===e.type;)e=e.parent;return e}function wb(){return Qe.lFrame.currentTNode}function Mo(e,n){const t=Qe.lFrame;t.currentTNode=e,t.isParent=n}function Ng(){return Qe.lFrame.isParent}function Hg(){Qe.lFrame.isParent=!1}function $H(e,n){const t=Qe.lFrame;t.bindingIndex=t.bindingRootIndex=e,Bg(n)}function Bg(e){Qe.lFrame.currentDirectiveIndex=e}function Ab(){return Qe.lFrame.currentQueryIndex}function zg(e){Qe.lFrame.currentQueryIndex=e}function GH(e){const n=e[ze];return 2===n.type?n.declTNode:1===n.type?e[zn]:null}function Rb(e,n,t){if(t&mt.SkipSelf){let o=n,r=e;for(;!(o=o.parent,null!==o||t&mt.Host||(o=GH(r),null===o||(r=r[ua],10&o.type))););if(null===o)return!1;n=o,e=r}const i=Qe.lFrame=kb();return i.currentTNode=n,i.lView=e,!0}function jg(e){const n=kb(),t=e[ze];Qe.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function kb(){const e=Qe.lFrame,n=null===e?null:e.child;return null===n?Fb(e):n}function Fb(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Lb(){const e=Qe.lFrame;return Qe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Nb=Lb;function Ug(){const e=Lb();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Xn(){return Qe.lFrame.selectedIndex}function Os(e){Qe.lFrame.selectedIndex=e}let Bb=!0;function Nd(){return Bb}function Gr(e){Bb=e}function Hd(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){const r=e.data[t].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:v,ngAfterViewInit:S,ngAfterViewChecked:T,ngOnDestroy:F}=r;c&&(e.contentHooks??=[]).push(-t,c),v&&((e.contentHooks??=[]).push(t,v),(e.contentCheckHooks??=[]).push(t,v)),S&&(e.viewHooks??=[]).push(-t,S),T&&((e.viewHooks??=[]).push(t,T),(e.viewCheckHooks??=[]).push(t,T)),null!=F&&(e.destroyHooks??=[]).push(t,F)}}function Bd(e,n,t){Vb(e,n,3,t)}function Vd(e,n,t,i){(3&e[ct])===t&&Vb(e,n,t,i)}function $g(e,n){let t=e[ct];(3&t)===n&&(t&=8191,t+=1,e[ct]=t)}function Vb(e,n,t,i){const r=i??-1,c=n.length-1;let v=0;for(let S=void 0!==i?65535&e[da]:0;S<c;S++)if("number"==typeof n[S+1]){if(v=n[S],null!=i&&v>=i)break}else n[S]<0&&(e[da]+=65536),(v<r||-1==r)&&(eB(e,t,n,S),e[da]=(4294901760&e[da])+S+2),S++}function zb(e,n){To(4,e,n);const t=zi(null);try{n.call(e)}finally{zi(t),To(5,e,n)}}function eB(e,n,t,i){const o=t[i]<0,r=t[i+1],v=e[o?-t[i]:t[i]];o?e[ct]>>13<e[da]>>16&&(3&e[ct])===n&&(e[ct]+=8192,zb(v,r)):zb(v,r)}const va=-1;class cc{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Gg(e){return e!==va}function uc(e){return 32767&e}function dc(e,n){let t=function oB(e){return e>>16}(e),i=n;for(;t>0;)i=i[ua],t--;return i}let Kg=!0;function zd(e){const n=Kg;return Kg=e,n}const jb=255,Ub=5;let rB=0;const Ao={};function jd(e,n){const t=$b(e,n);if(-1!==t)return t;const i=n[ze];i.firstCreatePass&&(e.injectorIndex=n.length,qg(i.data,e),qg(n,null),qg(i.blueprint,null));const o=Ud(e,n),r=e.injectorIndex;if(Gg(o)){const c=uc(o),v=dc(o,n),S=v[ze].data;for(let T=0;T<8;T++)n[r+T]=v[c+T]|S[c+T]}return n[r+8]=o,r}function qg(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $b(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Ud(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,i=null,o=n;for(;null!==o;){if(i=Yb(o),null===i)return va;if(t++,o=o[ua],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return va}function Zg(e,n,t){!function sB(e,n,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Yl)&&(i=t[Yl]),null==i&&(i=t[Yl]=rB++);const o=i&jb;n.data[e+(o>>Ub)]|=1<<o}(e,n,t)}function Wb(e,n,t){if(t&mt.Optional||void 0!==e)return e;gg()}function Gb(e,n,t,i){if(t&mt.Optional&&void 0===i&&(i=null),!(t&(mt.Self|mt.Host))){const o=e[jr],r=di(void 0);try{return o?o.get(n,i,t&mt.Optional):kO(n,i,t&mt.Optional)}finally{di(r)}}return Wb(i,0,t)}function Kb(e,n,t,i=mt.Default,o){if(null!==e){if(2048&n[ct]&&!(i&mt.Self)){const c=function hB(e,n,t,i,o){let r=e,c=n;for(;null!==r&&null!==c&&2048&c[ct]&&!(512&c[ct]);){const v=qb(r,c,t,i|mt.Self,Ao);if(v!==Ao)return v;let S=r.parent;if(!S){const T=c[QO];if(T){const F=T.get(t,Ao,i);if(F!==Ao)return F}S=Yb(c),c=c[ua]}r=S}return o}(e,n,t,i,Ao);if(c!==Ao)return c}const r=qb(e,n,t,i,Ao);if(r!==Ao)return r}return Gb(n,t,i,o)}function qb(e,n,t,i,o){const r=function cB(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Yl)?e[Yl]:void 0;return"number"==typeof n?n>=0?n&jb:dB:n}(t);if("function"==typeof r){if(!Rb(n,e,i))return i&mt.Host?Wb(o,0,i):Gb(n,t,i,o);try{let c;if(c=r(i),null!=c||i&mt.Optional)return c;gg()}finally{Nb()}}else if("number"==typeof r){let c=null,v=$b(e,n),S=va,T=i&mt.Host?n[dn][zn]:null;for((-1===v||i&mt.SkipSelf)&&(S=-1===v?Ud(e,n):n[v+8],S!==va&&Xb(i,!1)?(c=n[ze],v=uc(S),n=dc(S,n)):v=-1);-1!==v;){const F=n[ze];if(Zb(r,v,F.data)){const N=lB(v,n,t,c,i,T);if(N!==Ao)return N}S=n[v+8],S!==va&&Xb(i,n[ze].data[v+8]===T)&&Zb(r,v,n)?(c=F,v=uc(S),n=dc(S,n)):v=-1}}return o}function lB(e,n,t,i,o,r){const c=n[ze],v=c.data[e+8],F=$d(v,c,t,null==i?Cs(v)&&Kg:i!=c&&0!=(3&v.type),o&mt.Host&&r===v);return null!==F?bs(n,c,F,v):Ao}function $d(e,n,t,i,o){const r=e.providerIndexes,c=n.data,v=1048575&r,S=e.directiveStart,F=r>>20,B=o?v+F:e.directiveEnd;for(let X=i?v:v+F;X<B;X++){const ne=c[X];if(X<S&&t===ne||X>=S&&ne.type===t)return X}if(o){const X=c[S];if(X&&co(X)&&X.type===t)return S}return null}function bs(e,n,t,i){let o=e[t];const r=n.data;if(function tB(e){return e instanceof cc}(o)){const c=o;c.resolving&&function PN(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${e}${t}`)}(Mt(r[t]));const v=zd(c.canSeeViewProviders);c.resolving=!0;const T=c.injectImpl?di(c.injectImpl):null;Rb(e,i,mt.Default);try{o=e[t]=c.factory(void 0,r,e,i),n.firstCreatePass&&t>=i.directiveStart&&function JH(e,n,t){const{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=n.type.prototype;if(i){const c=mb(n);(t.preOrderHooks??=[]).push(e,c),(t.preOrderCheckHooks??=[]).push(e,c)}o&&(t.preOrderHooks??=[]).push(0-e,o),r&&((t.preOrderHooks??=[]).push(e,r),(t.preOrderCheckHooks??=[]).push(e,r))}(t,r[t],n)}finally{null!==T&&di(T),zd(v),c.resolving=!1,Nb()}}return o}function Zb(e,n,t){return!!(t[n+(e>>Ub)]&1<<e)}function Xb(e,n){return!(e&mt.Self||e&mt.Host&&n)}class Yn{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return Kb(this._tNode,this._lView,n,wd(i),t)}}function dB(){return new Yn(Ln(),Me())}function ya(e){return tr(()=>{const n=e.prototype.constructor,t=n[nr]||Xg(n),i=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==i;){const r=o[nr]||Xg(o);if(r&&r!==t)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function Xg(e){return pg(e)?()=>{const n=Xg(Je(e));return n&&n()}:xs(e)}function Yb(e){const n=e[ze],t=n.type;return 2===t?n.declTNode:1===t?e[zn]:null}const xa="__parameters__";function ba(e,n,t){return tr(()=>{const i=function Qg(e){return function(...t){if(e){const i=e(...t);for(const o in i)this[o]=i[o]}}}(n);function o(...r){if(this instanceof o)return i.apply(this,r),this;const c=new o(...r);return v.annotation=c,v;function v(S,T,F){const N=S.hasOwnProperty(xa)?S[xa]:Object.defineProperty(S,xa,{value:[]})[xa];for(;N.length<=F;)N.push(null);return(N[F]=N[F]||[]).push(c),S}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function Da(e,n){e.forEach(t=>Array.isArray(t)?Da(t,n):n(t))}function Jb(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Wd(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function fc(e,n){const t=[];for(let i=0;i<e;i++)t.push(n);return t}const tm=Xl(ba("Optional"),8),nm=Xl(ba("SkipSelf"),4);function Yd(e){return 128==(128&e.flags)}var Kr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Kr||{});const sm=new Map;let UB=0;const lm="__ngContext__";function jn(e,n){pi(n)?(e[lm]=n[ic],function WB(e){sm.set(e[ic],e)}(n)):e[lm]=n}let cm;function um(e,n){return cm(e,n)}function _c(e){const n=e[Zt];return qn(n)?n[Zt]:n}function CS(e){return OS(e[tc])}function xS(e){return OS(e[lo])}function OS(e){for(;null!==e&&!qn(e);)e=e[lo];return e}function Pa(e,n,t,i,o){if(null!=i){let r,c=!1;qn(i)?r=i:pi(i)&&(c=!0,i=i[nn]);const v=zt(i);0===e&&null!==t?null==o?IS(n,t,v):Ss(n,t,v,o||null,!0):1===e&&null!==t?Ss(n,t,v,o||null,!0):2===e?function oh(e,n,t){const i=nh(e,n);i&&function uV(e,n,t,i){e.removeChild(n,t,i)}(e,i,n,t)}(n,v,c):3===e&&n.destroyNode(v),null!=r&&function pV(e,n,t,i,o){const r=t[Po];r!==zt(t)&&Pa(n,e,i,r,o);for(let v=kn;v<t.length;v++){const S=t[v];yc(S[ze],S,e,n,i,r)}}(n,e,r,t,o)}}function eh(e,n,t){return e.createElement(n,t)}function SS(e,n){const t=e[ha],i=t.indexOf(n);bb(n),t.splice(i,1)}function th(e,n){if(e.length<=kn)return;const t=kn+n,i=e[t];if(i){const o=i[nc];null!==o&&o!==e&&SS(o,i),n>0&&(e[t-1][lo]=i[lo]);const r=Wd(e,kn+n);!function nV(e,n){yc(e,n,n[it],2,null,null),n[nn]=null,n[zn]=null}(i[ze],i);const c=r[wo];null!==c&&c.detachView(r[ze]),i[Zt]=null,i[lo]=null,i[ct]&=-129}return i}function hm(e,n){if(!(256&n[ct])){const t=n[it];n[oc]&&lb(n[oc]),n[rc]&&lb(n[rc]),t.destroyNode&&yc(e,n,t,3,null,null),function rV(e){let n=e[tc];if(!n)return pm(e[ze],e);for(;n;){let t=null;if(pi(n))t=n[tc];else{const i=n[kn];i&&(t=i)}if(!t){for(;n&&!n[lo]&&n!==e;)pi(n)&&pm(n[ze],n),n=n[Zt];null===n&&(n=e),pi(n)&&pm(n[ze],n),t=n&&n[lo]}n=t}}(n)}}function pm(e,n){if(!(256&n[ct])){n[ct]&=-129,n[ct]|=256,function cV(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let i=0;i<t.length;i+=2){const o=n[t[i]];if(!(o instanceof cc)){const r=t[i+1];if(Array.isArray(r))for(let c=0;c<r.length;c+=2){const v=o[r[c]],S=r[c+1];To(4,v,S);try{S.call(v)}finally{To(5,v,S)}}else{To(4,o,r);try{r.call(o)}finally{To(5,o,r)}}}}}(e,n),function lV(e,n){const t=e.cleanup,i=n[la];if(null!==t)for(let r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){const c=t[r+3];c>=0?i[c]():i[-c].unsubscribe(),r+=2}else t[r].call(i[t[r+1]]);null!==i&&(n[la]=null);const o=n[Ur];if(null!==o){n[Ur]=null;for(let r=0;r<o.length;r++)(0,o[r])()}}(e,n),1===n[ze].type&&n[it].destroy();const t=n[nc];if(null!==t&&qn(n[Zt])){t!==n[Zt]&&SS(t,n);const i=n[wo];null!==i&&i.detachView(e)}!function GB(e){sm.delete(e[ic])}(n)}}function fm(e,n,t){return function DS(e,n,t){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return t[nn];{const{componentOffset:o}=i;if(o>-1){const{encapsulation:r}=e.data[i.directiveStart+o];if(r===so.None||r===so.Emulated)return null}return fi(i,t)}}(e,n.parent,t)}function Ss(e,n,t,i,o){e.insertBefore(n,t,i,o)}function IS(e,n,t){e.appendChild(n,t)}function ES(e,n,t,i,o){null!==i?Ss(e,n,t,i,o):IS(e,n,t)}function nh(e,n){return e.parentNode(n)}function wS(e,n,t){return TS(e,n,t)}let gm,ym,TS=function PS(e,n,t){return 40&e.type?fi(e,t):null};function ih(e,n,t,i){const o=fm(e,i,n),r=n[it],v=wS(i.parent||n[zn],i,n);if(null!=o)if(Array.isArray(t))for(let S=0;S<t.length;S++)ES(r,o,t[S],v,!1);else ES(r,o,t,v,!1);void 0!==gm&&gm(r,i,n,t,o)}function vc(e,n){if(null!==n){const t=n.type;if(3&t)return fi(n,e);if(4&t)return mm(-1,e[n.index]);if(8&t){const i=n.child;if(null!==i)return vc(e,i);{const o=e[n.index];return qn(o)?mm(-1,o):zt(o)}}if(32&t)return um(n,e)()||zt(e[n.index]);{const i=AS(e,n);return null!==i?Array.isArray(i)?i[0]:vc(_c(e[dn]),i):vc(e,n.next)}}return null}function AS(e,n){return null!==n?e[dn][zn].projection[n.projection]:null}function mm(e,n){const t=kn+e+1;if(t<n.length){const i=n[t],o=i[ze].firstChild;if(null!==o)return vc(i,o)}return n[Po]}function _m(e,n,t,i,o,r,c){for(;null!=t;){const v=i[t.index],S=t.type;if(c&&0===n&&(v&&jn(zt(v),i),t.flags|=2),32!=(32&t.flags))if(8&S)_m(e,n,t.child,i,o,r,!1),Pa(n,e,o,v,r);else if(32&S){const T=um(t,i);let F;for(;F=T();)Pa(n,e,o,F,r);Pa(n,e,o,v,r)}else 16&S?kS(e,n,i,t,o,r):Pa(n,e,o,v,r);t=c?t.projectionNext:t.next}}function yc(e,n,t,i,o,r){_m(t,i,e.firstChild,n,o,r,!1)}function kS(e,n,t,i,o,r){const c=t[dn],S=c[zn].projection[i.projection];if(Array.isArray(S))for(let T=0;T<S.length;T++)Pa(n,e,o,S[T],r);else{let T=S;const F=c[Zt];Yd(i)&&(T.flags|=128),_m(e,n,T,F,o,r,!0)}}function FS(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function LS(e,n,t){const{mergedAttrs:i,classes:o,styles:r}=t;null!==i&&Ig(e,n,i),null!==o&&FS(e,n,o),null!==r&&function gV(e,n,t){e.setAttribute(n,"style",t)}(e,n,r)}function Ma(){if(void 0!==ym)return ym;if(typeof document<"u")return document;throw new Ue(210,!1)}const lh=new qe("ENVIRONMENT_INITIALIZER"),ZS=new qe("INJECTOR",-1),XS=new qe("INJECTOR_DEF_TYPES");class Dm{get(n,t=Zl){if(t===Zl){const i=new Error(`NullInjectorError: No provider for ${On(n)}!`);throw i.name="NullInjectorError",i}return t}}function UV(...e){return{\u0275providers:YS(0,e),\u0275fromNgModule:!0}}function YS(e,...n){const t=[],i=new Set;let o;const r=c=>{t.push(c)};return Da(n,c=>{const v=c;ch(v,r,[],i)&&(o||=[],o.push(v))}),void 0!==o&&QS(o,r),t}function QS(e,n){for(let t=0;t<e.length;t++){const{ngModule:i,providers:o}=e[t];Em(o,r=>{n(r,i)})}}function ch(e,n,t,i){if(!(e=Je(e)))return!1;let o=null,r=Dd(e);const c=!r&&yt(e);if(r||c){if(c&&!c.standalone)return!1;o=e}else{const S=e.ngModule;if(r=Dd(S),!r)return!1;o=S}const v=i.has(o);if(c){if(v)return!1;if(i.add(o),c.dependencies){const S="function"==typeof c.dependencies?c.dependencies():c.dependencies;for(const T of S)ch(T,n,t,i)}}else{if(!r)return!1;{if(null!=r.imports&&!v){let T;i.add(o);try{Da(r.imports,F=>{ch(F,n,t,i)&&(T||=[],T.push(F))})}finally{}void 0!==T&&QS(T,n)}if(!v){const T=xs(o)||(()=>new o);n({provide:o,useFactory:T,deps:It},o),n({provide:XS,useValue:o,multi:!0},o),n({provide:lh,useValue:()=>nt(o),multi:!0},o)}const S=r.providers;if(null!=S&&!v){const T=e;Em(S,F=>{n(F,T)})}}}return o!==e&&void 0!==e.providers}function Em(e,n){for(let t of e)fg(t)&&(t=t.\u0275providers),Array.isArray(t)?Em(t,n):n(t)}const $V=kt({provide:String,useValue:kt});function wm(e){return null!==e&&"object"==typeof e&&$V in e}function Ds(e){return"function"==typeof e}const Pm=new qe("Set Injector scope."),uh={},GV={};let Tm;function dh(){return void 0===Tm&&(Tm=new Dm),Tm}class Ro{}class Ra extends Ro{get destroyed(){return this._destroyed}constructor(n,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Am(n,c=>this.processProvider(c)),this.records.set(ZS,ka(void 0,this)),o.has("environment")&&this.records.set(Ro,ka(void 0,this));const r=this.records.get(Pm);null!=r&&"string"==typeof r.value&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(XS.multi,It,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=zr(this),i=di(void 0);try{return n()}finally{zr(t),di(i)}}get(n,t=Zl,i=mt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(BO))return n[BO](this);i=wd(i);const r=zr(this),c=di(void 0);try{if(!(i&mt.SkipSelf)){let S=this.records.get(n);if(void 0===S){const T=function YV(e){return"function"==typeof e||"object"==typeof e&&e instanceof qe}(n)&&Sd(n);S=T&&this.injectableDefInScope(T)?ka(Mm(n),uh):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(i&mt.Self?dh():this.parent).get(n,t=i&mt.Optional&&t===Zl?null:t)}catch(v){if("NullInjectorError"===v.name){if((v[Ed]=v[Ed]||[]).unshift(On(n)),r)throw v;return function UN(e,n,t,i){const o=e[Ed];throw n[LO]&&o.unshift(n[LO]),e.message=function $N(e,n,t,i=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=On(n);if(Array.isArray(n))o=n.map(On).join(" -> ");else if("object"==typeof n){let r=[];for(let c in n)if(n.hasOwnProperty(c)){let v=n[c];r.push(c+":"+("string"==typeof v?JSON.stringify(v):On(v)))}o=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${e.replace(HN,"\n  ")}`}("\n"+e.message,o,t,i),e.ngTokenPath=o,e[Ed]=null,e}(v,n,"R3InjectorError",this.source)}throw v}finally{di(c),zr(r)}}resolveInjectorInitializers(){const n=zr(this),t=di(void 0);try{const o=this.get(lh.multi,It,mt.Self);for(const r of o)r()}finally{zr(n),di(t)}}toString(){const n=[],t=this.records;for(const i of t.keys())n.push(On(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(n){let t=Ds(n=Je(n))?n:Je(n&&n.provide);const i=function qV(e){return wm(e)?ka(void 0,e.useValue):ka(t0(e),uh)}(n);if(Ds(n)||!0!==n.multi)this.records.get(t);else{let o=this.records.get(t);o||(o=ka(void 0,uh,!0),o.factory=()=>bg(o.multi),this.records.set(t,o)),t=n,o.multi.push(n)}this.records.set(t,i)}hydrate(n,t){return t.value===uh&&(t.value=GV,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XV(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Je(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Mm(e){const n=Sd(e),t=null!==n?n.factory:xs(e);if(null!==t)return t;if(e instanceof qe)throw new Ue(204,!1);if(e instanceof Function)return function KV(e){const n=e.length;if(n>0)throw fc(n,"?"),new Ue(204,!1);const t=function kN(e){return e&&(e[Id]||e[AO])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Ue(204,!1)}function t0(e,n,t){let i;if(Ds(e)){const o=Je(e);return xs(o)||Mm(o)}if(wm(e))i=()=>Je(e.useValue);else if(function e0(e){return!(!e||!e.useFactory)}(e))i=()=>e.useFactory(...bg(e.deps||[]));else if(function JS(e){return!(!e||!e.useExisting)}(e))i=()=>nt(Je(e.useExisting));else{const o=Je(e&&(e.useClass||e.provide));if(!function ZV(e){return!!e.deps}(e))return xs(o)||Mm(o);i=()=>new o(...bg(e.deps))}return i}function ka(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function Am(e,n){for(const t of e)Array.isArray(t)?Am(t,n):t&&fg(t)?Am(t.\u0275providers,n):n(t)}const hh=new qe("AppId",{providedIn:"root",factory:()=>QV}),QV="ng",n0=new qe("Platform Initializer"),ar=new qe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),o0=new qe("CSP nonce",{providedIn:"root",factory:()=>Ma().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function ez(){const e=new Fa;return"browser"===Dt(ar)&&(e.store=function tz(e,n){const t=e.getElementById(n+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+n,i)}return{}}(Ma(),Dt(hh))),e}let Fa=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:ez});get(t,i){return void 0!==this.store[t]?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(const t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})(),r0=(e,n,t)=>null;function Vm(e,n,t=!1){return r0(e,n,t)}class cz{}class l0{}class dz{resolveComponentFactory(n){throw function uz(e){const n=Error(`No component factory found for ${On(e)}.`);return n.ngComponent=e,n}(n)}}let _h=(()=>{class e{static#e=this.NULL=new dz}return e})();function hz(){return Ha(Ln(),Me())}function Ha(e,n){return new uo(fi(e,n))}let uo=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=hz}return e})();function pz(e){return e instanceof uo?e.nativeElement:e}class u0{}let Dc=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function fz(){const e=Me(),t=Ii(Ln().index,e);return(pi(t)?t:e)[it]}()}return e})(),gz=(()=>{class e{static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>null})}return e})();class Um{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const d0=new Um("16.2.12"),$m={};function g0(e,n=null,t=null,i){const o=m0(e,n,t,i);return o.resolveInjectorInitializers(),o}function m0(e,n=null,t=null,i,o=new Set){const r=[t||It,UV(e)];return i=i||("object"==typeof e?void 0:On(e)),new Ra(r,n||dh(),i||null,o)}let ko=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Zl;static#t=this.NULL=new Dm;static create(t,i){if(Array.isArray(t))return g0({name:""},i,t,"");{const o=t.name??"";return g0({name:o},t.parent,t.providers,o)}}static#n=this.\u0275prov=gt({token:e,providedIn:"any",factory:()=>nt(ZS)});static#i=this.__NG_ELEMENT_ID__=-1}return e})();function Gm(e){return e.ngOriginalError}class lr{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Gm(n);for(;t&&Gm(t);)t=Gm(t);return t||null}}function qm(e){return n=>{setTimeout(e,void 0,n)}}const wi=class Oz extends re{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,i){let o=n,r=t||(()=>null),c=i;if(n&&"object"==typeof n){const S=n;o=S.next?.bind(S),r=S.error?.bind(S),c=S.complete?.bind(S)}this.__isAsync&&(r=qm(r),o&&(o=qm(o)),c&&(c=qm(c)));const v=super.subscribe({next:o,error:r,complete:c});return n instanceof b&&n.add(v),v}};function v0(...e){}class Kt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wi(!1),this.onMicrotaskEmpty=new wi(!1),this.onStable=new wi(!1),this.onError=new wi(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&t,o.shouldCoalesceRunChangeDetection=i,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function bz(){const e="function"==typeof Vt.requestAnimationFrame;let n=Vt[e?"requestAnimationFrame":"setTimeout"],t=Vt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&t){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Iz(e){const n=()=>{!function Dz(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Vt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xm(e),e.isCheckStableRunning=!0,Zm(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xm(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,o,r,c,v)=>{if(function wz(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(v))return t.invokeTask(o,r,c,v);try{return y0(e),t.invokeTask(o,r,c,v)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||e.shouldCoalesceRunChangeDetection)&&n(),C0(e)}},onInvoke:(t,i,o,r,c,v,S)=>{try{return y0(e),t.invoke(o,r,c,v,S)}finally{e.shouldCoalesceRunChangeDetection&&n(),C0(e)}},onHasTask:(t,i,o,r)=>{t.hasTask(o,r),i===o&&("microTask"==r.change?(e._hasPendingMicrotasks=r.microTask,Xm(e),Zm(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,i,o,r)=>(t.handleError(o,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kt.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(Kt.isInAngularZone())throw new Ue(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,o){const r=this._inner,c=r.scheduleEventTask("NgZoneEvent: "+o,n,Sz,v0,v0);try{return r.runTask(c,t,i)}finally{r.cancelTask(c)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}}const Sz={};function Zm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xm(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function y0(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function C0(e){e._nesting--,Zm(e)}class Ez{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wi,this.onMicrotaskEmpty=new wi,this.onStable=new wi,this.onError=new wi}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,o){return n.apply(t,i)}}const x0=new qe("",{providedIn:"root",factory:O0});function O0(){const e=Dt(Kt);let n=!0;return function SN(...e){const n=SO(e),t=function _N(e,n){return"number"==typeof ag(e)?e.pop():n}(e,1/0),i=e;return i.length?1===i.length?er(i[0]):function fN(e=1/0){return xd(U,e)}(t)(lg(i,n)):bO}(new Y(o=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{o.next(n),o.complete()})}),new Y(o=>{let r;e.runOutsideAngular(()=>{r=e.onStable.subscribe(()=>{Kt.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,o.next(!0))})})});const c=e.onUnstable.subscribe(()=>{Kt.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{o.next(!1)}))});return()=>{r.unsubscribe(),c.unsubscribe()}}).pipe(wO()))}let Ym=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>new e})}return e})();function Ic(e){for(;e;){e[ct]|=64;const n=_c(e);if(Pg(e)&&!n)return e;e=n}return null}const E0=new qe("",{providedIn:"root",factory:()=>!1});let yh=null;function M0(e,n){return e[n]??k0()}function A0(e,n){const t=k0();t.producerNode?.length&&(e[n]=yh,t.lView=e,yh=R0())}const Hz={...nb,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ic(e.lView)},lView:null};function R0(){return Object.create(Hz)}function k0(){return yh??=R0(),yh}const at={};function Ch(e){F0(Ct(),Me(),Xn()+e,!1)}function F0(e,n,t,i){if(!i)if(3==(3&n[ct])){const r=e.preOrderCheckHooks;null!==r&&Bd(n,r,t)}else{const r=e.preOrderHooks;null!==r&&Vd(n,r,0,t)}Os(t)}function Le(e,n=mt.Default){const t=Me();return null===t?nt(e,n):Kb(Ln(),t,Je(e),n)}function xh(e,n,t,i,o,r,c,v,S,T,F){const N=n.blueprint.slice();return N[nn]=o,N[ct]=140|i,(null!==T||e&&2048&e[ct])&&(N[ct]|=2048),Ob(N),N[Zt]=N[ua]=e,N[un]=t,N[ca]=c||e&&e[ca],N[it]=v||e&&e[it],N[jr]=S||e&&e[jr]||null,N[zn]=r,N[ic]=function $B(){return UB++}(),N[ir]=F,N[QO]=T,N[dn]=2==n.type?e[dn]:N,N}function za(e,n,t,i,o){let r=e.data[n];if(null===r)r=function Qm(e,n,t,i,o){const r=wb(),c=Ng(),S=e.data[n]=function Kz(e,n,t,i,o,r){let c=n?n.injectorIndex:-1,v=0;return ma()&&(v|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?r:r&&r.parent,t,n,i,o);return null===e.firstChild&&(e.firstChild=S),null!==r&&(c?null==r.child&&null!==S.parent&&(r.child=S):null===r.next&&(r.next=S,S.prev=r)),S}(e,n,t,i,o),function UH(){return Qe.lFrame.inI18n}()&&(r.flags|=32);else if(64&r.type){r.type=t,r.value=i,r.attrs=o;const c=function lc(){const e=Qe.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();r.injectorIndex=null===c?-1:c.injectorIndex}return Mo(r,!0),r}function Ec(e,n,t,i){if(0===t)return-1;const o=n.length;for(let r=0;r<t;r++)n.push(i),e.blueprint.push(i),e.data.push(null);return o}function L0(e,n,t,i,o){const r=M0(n,oc),c=Xn(),v=2&i;try{Os(-1),v&&n.length>pt&&F0(e,n,pt,!1),To(v?2:0,o);const T=v?r:null,F=Mg(T);try{null!==T&&(T.dirty=!1),t(i,o)}finally{Ag(T,F)}}finally{v&&null===n[oc]&&A0(n,oc),Os(c),To(v?3:1,o)}}function Jm(e,n,t){if(wg(n)){const i=zi(null);try{const r=n.directiveEnd;for(let c=n.directiveStart;c<r;c++){const v=e.data[c];v.contentQueries&&v.contentQueries(1,t[c],c)}}finally{zi(i)}}}function N0(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=n_(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function n_(e,n,t,i,o,r,c,v,S,T,F){const N=pt+i,B=N+o,X=function zz(e,n){const t=[];for(let i=0;i<n;i++)t.push(i<e?null:at);return t}(N,B),ne="function"==typeof T?T():T;return X[ze]={type:e,blueprint:X,template:t,queries:null,viewQuery:v,declTNode:n,data:X.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof r?r():r,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:S,consts:ne,incompleteFirstPass:!1,ssrId:F}}let H0=e=>null;function B0(e,n,t,i){for(let o in e)if(e.hasOwnProperty(o)){t=null===t?{}:t;const r=e[o];null===i?V0(t,n,o,r):i.hasOwnProperty(o)&&V0(t,n,i[o],r)}return t}function V0(e,n,t,i){e.hasOwnProperty(t)?e[t].push(n,i):e[t]=[n,i]}function z0(e,n,t,i,o,r){for(let T=0;T<i.length;T++)Zg(jd(t,n),e,i[T].type);!function rj(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,i.length);for(let T=0;T<i.length;T++){const F=i[T];F.providersResolver&&F.providersResolver(F)}let c=!1,v=!1,S=Ec(e,n,i.length,null);for(let T=0;T<i.length;T++){const F=i[T];t.mergedAttrs=Ql(t.mergedAttrs,F.hostAttrs),sj(e,t,n,S,F),oj(S,F,o),null!==F.contentQueries&&(t.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(t.flags|=64);const N=F.type.prototype;!c&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),c=!0),!v&&(N.ngOnChanges||N.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),v=!0),S++}!function qz(e,n,t){const o=n.directiveEnd,r=e.data,c=n.attrs,v=[];let S=null,T=null;for(let F=n.directiveStart;F<o;F++){const N=r[F],B=t?t.get(N):null,ne=B?B.outputs:null;S=B0(N.inputs,F,S,B?B.inputs:null),T=B0(N.outputs,F,T,ne);const le=null===S||null===c||WO(n)?null:cj(S,F,c);v.push(le)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=v,n.inputs=S,n.outputs=T}(e,t,r)}function j0(e,n,t){const i=t.directiveStart,o=t.directiveEnd,r=t.index,c=function WH(){return Qe.lFrame.currentDirectiveIndex}();try{Os(r);for(let v=i;v<o;v++){const S=e.data[v],T=n[v];Bg(v),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&tj(S,T)}}finally{Os(-1),Bg(c)}}function tj(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function o_(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function oj(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;co(n)&&(t[""]=e)}}function sj(e,n,t,i,o){e.data[i]=o;const r=o.factory||(o.factory=xs(o.type)),c=new cc(r,co(o),Le);e.blueprint[i]=c,t[i]=c,function Qz(e,n,t,i,o){const r=o.hostBindings;if(r){let c=e.hostBindingOpCodes;null===c&&(c=e.hostBindingOpCodes=[]);const v=~n.index;(function Jz(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(c)!=v&&c.push(v),c.push(t,i,r)}}(e,n,i,Ec(e,t,o.hostVars,at),o)}function lj(e,n,t,i,o,r){const c=r[n];if(null!==c)for(let v=0;v<c.length;)U0(i,t,c[v++],c[v++],c[v++])}function U0(e,n,t,i,o){const r=zi(null);try{const c=e.inputTransforms;null!==c&&c.hasOwnProperty(i)&&(o=c[i].call(n,o)),null!==e.setInput?e.setInput(n,o,t,i):n[i]=o}finally{zi(r)}}function cj(e,n,t){let i=null,o=0;for(;o<t.length;){const r=t[o];if(0!==r)if(5!==r){if("number"==typeof r)break;if(e.hasOwnProperty(r)){null===i&&(i=[]);const c=e[r];for(let v=0;v<c.length;v+=2)if(c[v]===n){i.push(r,c[v+1],t[o+1]);break}}o+=2}else o+=2;else o+=4}return i}function W0(e,n){const t=e.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i+1];if(-1!==r){const c=e.data[r];zg(t[i]),c.contentQueries(2,n[r],r)}}}function Oh(e,n){return e[tc]?e[YO][lo]=n:e[tc]=n,e[YO]=n,n}function s_(e,n,t){zg(0);const i=zi(null);try{n(e,t)}finally{zi(i)}}function a_(e,n,t,i,o){for(let r=0;r<t.length;){const c=t[r++],v=t[r++];U0(e.data[c],n[c],i,v,o)}}function uj(e,n){const t=Ii(n,e),i=t[ze];!function dj(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(i,t);const o=t[nn];null!==o&&null===t[ir]&&(t[ir]=Vm(o,t[jr])),l_(i,t,t[un])}function l_(e,n,t){jg(n);try{const i=e.viewQuery;null!==i&&s_(1,i,t);const o=e.template;null!==o&&L0(e,n,o,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&W0(e,n),e.staticViewQueries&&s_(2,e.viewQuery,t);const r=e.components;null!==r&&function hj(e,n){for(let t=0;t<n.length;t++)uj(e,n[t])}(n,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[ct]&=-5,Ug()}}let X0=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,i,o){const r=typeof Zone>"u"?null:Zone.current,c=function yH(e,n,t){const i=Object.create(CH);t&&(i.consumerAllowSignalWrites=!0),i.fn=e,i.schedule=n;const o=c=>{i.cleanupFn=c};return i.ref={notify:()=>sb(i),run:()=>{if(i.dirty=!1,i.hasRun&&!ab(i))return;i.hasRun=!0;const c=Mg(i);try{i.cleanupFn(),i.cleanupFn=gb,i.fn(o)}finally{Ag(i,c)}},cleanup:()=>i.cleanupFn()},i.ref}(t,T=>{this.all.has(T)&&this.queue.set(T,r)},o);let v;this.all.add(c),c.notify();const S=()=>{c.cleanup(),v?.(),this.all.delete(c),this.queue.delete(c)};return v=i?.onDestroy(S),{destroy:S}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:()=>new e})}return e})();function bh(e,n,t){let i=t?e.styles:null,o=t?e.classes:null,r=0;if(null!==n)for(let c=0;c<n.length;c++){const v=n[c];"number"==typeof v?r=v:1==r?o=dg(o,v):2==r&&(i=dg(i,v+": "+n[++c]+";"))}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=o:e.classesWithoutHost=o}function wc(e,n,t,i,o=!1){for(;null!==t;){const r=n[t.index];null!==r&&i.push(zt(r)),qn(r)&&Y0(r,i);const c=t.type;if(8&c)wc(e,n,t.child,i);else if(32&c){const v=um(t,n);let S;for(;S=v();)i.push(S)}else if(16&c){const v=AS(n,t);if(Array.isArray(v))i.push(...v);else{const S=_c(n[dn]);wc(S[ze],S,v,i,!0)}}t=o?t.projectionNext:t.next}return i}function Y0(e,n){for(let t=kn;t<e.length;t++){const i=e[t],o=i[ze].firstChild;null!==o&&wc(i[ze],i,o,n)}e[Po]!==e[nn]&&n.push(e[Po])}function Sh(e,n,t,i=!0){const o=n[ca],r=o.rendererFactory,c=o.afterRenderEventManager;r.begin?.(),c?.begin();try{Q0(e,n,e.template,t)}catch(S){throw i&&function Z0(e,n){const t=e[jr],i=t?t.get(lr,null):null;i&&i.handleError(n)}(n,S),S}finally{r.end?.(),o.effectManager?.flush(),c?.end()}}function Q0(e,n,t,i){const o=n[ct];if(256!=(256&o)){n[ca].effectManager?.flush(),jg(n);try{Ob(n),function Tb(e){return Qe.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&L0(e,n,t,2,i);const c=3==(3&o);if(c){const T=e.preOrderCheckHooks;null!==T&&Bd(n,T,null)}else{const T=e.preOrderHooks;null!==T&&Vd(n,T,0,null),$g(n,0)}if(function gj(e){for(let n=CS(e);null!==n;n=xS(n)){if(!n[JO])continue;const t=n[ha];for(let i=0;i<t.length;i++){TH(t[i])}}}(n),J0(n,2),null!==e.contentQueries&&W0(e,n),c){const T=e.contentCheckHooks;null!==T&&Bd(n,T)}else{const T=e.contentHooks;null!==T&&Vd(n,T,1),$g(n,1)}!function Vz(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const i=M0(n,rc);try{for(let o=0;o<t.length;o++){const r=t[o];if(r<0)Os(~r);else{const c=r,v=t[++o],S=t[++o];$H(v,c),i.dirty=!1;const T=Mg(i);try{S(2,n[c])}finally{Ag(i,T)}}}}finally{null===n[rc]&&A0(n,rc),Os(-1)}}(e,n);const v=e.components;null!==v&&tD(n,v,0);const S=e.viewQuery;if(null!==S&&s_(2,S,i),c){const T=e.viewCheckHooks;null!==T&&Bd(n,T)}else{const T=e.viewHooks;null!==T&&Vd(n,T,2),$g(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[ct]&=-73,bb(n)}finally{Ug()}}}function J0(e,n){for(let t=CS(e);null!==t;t=xS(t))for(let i=kn;i<t.length;i++)eD(t[i],n)}function mj(e,n,t){eD(Ii(n,e),t)}function eD(e,n){if(!function wH(e){return 128==(128&e[ct])}(e))return;const t=e[ze],i=e[ct];if(80&i&&0===n||1024&i||2===n)Q0(t,e,t.template,e[un]);else if(e[ec]>0){J0(e,1);const o=t.components;null!==o&&tD(e,o,1)}}function tD(e,n,t){for(let i=0;i<n.length;i++)mj(e,n[i],t)}class Pc{get rootNodes(){const n=this._lView,t=n[ze];return wc(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(n){this._lView[un]=n}get destroyed(){return 256==(256&this._lView[ct])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Zt];if(qn(n)){const t=n[8],i=t?t.indexOf(this):-1;i>-1&&(th(n,i),Wd(t,i))}this._attachedToViewContainer=!1}hm(this._lView[ze],this._lView)}onDestroy(n){!function Db(e,n){if(256==(256&e[ct]))throw new Ue(911,!1);null===e[Ur]&&(e[Ur]=[]),e[Ur].push(n)}(this._lView,n)}markForCheck(){Ic(this._cdRefInjectingView||this._lView)}detach(){this._lView[ct]&=-129}reattach(){this._lView[ct]|=128}detectChanges(){Sh(this._lView[ze],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oV(e,n){yc(e,n,n[it],2,null,null)}(this._lView[ze],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=n}}class _j extends Pc{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Sh(n[ze],n,n[un],!1)}checkNoChanges(){}get context(){return null}}class nD extends _h{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=yt(n);return new Tc(t,this.ngModule)}}function iD(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class yj{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=wd(i);const o=this.injector.get(n,$m,i);return o!==$m||t===$m?o:this.parentInjector.get(n,t,i)}}class Tc extends l0{get inputs(){const n=this.componentDef,t=n.inputTransforms,i=iD(n.inputs);if(null!==t)for(const o of i)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return i}get outputs(){return iD(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function eH(e){return e.map(JN).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,o){let r=(o=o||this.ngModule)instanceof Ro?o:o?.injector;r&&null!==this.componentDef.getStandaloneInjector&&(r=this.componentDef.getStandaloneInjector(r)||r);const c=r?new yj(n,r):n,v=c.get(u0,null);if(null===v)throw new Ue(407,!1);const N={rendererFactory:v,sanitizer:c.get(gz,null),effectManager:c.get(X0,null),afterRenderEventManager:c.get(Ym,null)},B=v.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",ne=i?function jz(e,n,t,i){const r=i.get(E0,!1)||t===so.ShadowDom,c=e.selectRootElement(n,r);return function Uz(e){H0(e)}(c),c}(B,i,this.componentDef.encapsulation,c):eh(B,X,function vj(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(X)),Oe=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _e=null;null!==ne&&(_e=Vm(ne,c,!0));const ke=n_(0,null,null,1,0,null,null,null,null,null,null),Ne=xh(null,ke,null,Oe,null,null,N,B,c,null,_e);let We,Ot;jg(Ne);try{const Cn=this.componentDef;let At,Gn=null;Cn.findHostDirectiveDefs?(At=[],Gn=new Map,Cn.findHostDirectiveDefs(Cn,At,Gn),At.push(Cn)):At=[Cn];const Oi=function xj(e,n){const t=e[ze],i=pt;return e[i]=n,za(t,i,2,"#host",null)}(Ne,ne),ro=function Oj(e,n,t,i,o,r,c){const v=o[ze];!function bj(e,n,t,i){for(const o of e)n.mergedAttrs=Ql(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(bh(n,n.mergedAttrs,!0),null!==t&&LS(i,t,n))}(i,e,n,c);let S=null;null!==n&&(S=Vm(n,o[jr]));const T=r.rendererFactory.createRenderer(n,t);let F=16;t.signals?F=4096:t.onPush&&(F=64);const N=xh(o,N0(t),null,F,o[e.index],e,r,T,null,null,S);return v.firstCreatePass&&o_(v,e,i.length-1),Oh(o,N),o[e.index]=N}(Oi,ne,Cn,At,Ne,N,B);Ot=xb(ke,pt),ne&&function Dj(e,n,t,i){if(i)Ig(e,t,["ng-version",d0.full]);else{const{attrs:o,classes:r}=function tH(e){const n=[],t=[];let i=1,o=2;for(;i<e.length;){let r=e[i];if("string"==typeof r)2===o?""!==r&&n.push(r,e[++i]):8===o&&t.push(r);else{if(!ao(o))break;o=r}i++}return{attrs:n,classes:t}}(n.selectors[0]);o&&Ig(e,t,o),r&&r.length>0&&FS(e,t,r.join(" "))}}(B,Cn,ne,i),void 0!==t&&function Ij(e,n,t){const i=e.projection=[];for(let o=0;o<n.length;o++){const r=t[o];i.push(null!=r?Array.from(r):null)}}(Ot,this.ngContentSelectors,t),We=function Sj(e,n,t,i,o,r){const c=Ln(),v=o[ze],S=fi(c,o);z0(v,o,c,t,null,i);for(let F=0;F<t.length;F++)jn(bs(o,v,c.directiveStart+F,c),o);j0(v,o,c),S&&jn(S,o);const T=bs(o,v,c.directiveStart+c.componentOffset,c);if(e[un]=o[un]=T,null!==r)for(const F of r)F(T,n);return Jm(v,c,e),T}(ro,Cn,At,Gn,Ne,[Ej]),l_(ke,Ne,null)}finally{Ug()}return new Cj(this.componentType,We,Ha(Ot,Ne),Ne,Ot)}}class Cj extends cz{constructor(n,t,i,o,r){super(),this.location=i,this._rootLView=o,this._tNode=r,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new _j(o),this.componentType=n}setInput(n,t){const i=this._tNode.inputs;let o;if(null!==i&&(o=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const r=this._rootLView;a_(r[ze],r,o,n,t),this.previousInputValues.set(n,t),Ic(Ii(this._tNode.index,r))}}get injector(){return new Yn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Ej(){const e=Ln();Hd(Me()[ze],e)}function fn(e){let n=function oD(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const i=[e];for(;n;){let o;if(co(e))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ue(903,!1);o=n.\u0275dir}if(o){if(t){i.push(o);const c=e;c.inputs=Dh(e.inputs),c.inputTransforms=Dh(e.inputTransforms),c.declaredInputs=Dh(e.declaredInputs),c.outputs=Dh(e.outputs);const v=o.hostBindings;v&&Mj(e,v);const S=o.viewQuery,T=o.contentQueries;if(S&&Pj(e,S),T&&Tj(e,T),Od(e.inputs,o.inputs),Od(e.declaredInputs,o.declaredInputs),Od(e.outputs,o.outputs),null!==o.inputTransforms&&(null===c.inputTransforms&&(c.inputTransforms={}),Od(c.inputTransforms,o.inputTransforms)),co(o)&&o.data.animation){const F=e.data;F.animation=(F.animation||[]).concat(o.data.animation)}}const r=o.features;if(r)for(let c=0;c<r.length;c++){const v=r[c];v&&v.ngInherit&&v(e),v===fn&&(t=!1)}}n=Object.getPrototypeOf(n)}!function wj(e){let n=0,t=null;for(let i=e.length-1;i>=0;i--){const o=e[i];o.hostVars=n+=o.hostVars,o.hostAttrs=Ql(o.hostAttrs,t=Ql(t,o.hostAttrs))}}(i)}function Dh(e){return e===Eo?{}:e===It?[]:e}function Pj(e,n){const t=e.viewQuery;e.viewQuery=t?(i,o)=>{n(i,o),t(i,o)}:n}function Tj(e,n){const t=e.contentQueries;e.contentQueries=t?(i,o,r)=>{n(i,o,r),t(i,o,r)}:n}function Mj(e,n){const t=e.hostBindings;e.hostBindings=t?(i,o)=>{n(i,o),t(i,o)}:n}function Ih(e){return!!function c_(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Fc(e,n,t){const i=Me();return function Un(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}(i,function _a(){return Qe.lFrame.bindingIndex++}(),n)&&function Pi(e,n,t,i,o,r,c,v){const S=fi(n,t);let F,T=n.inputs;!v&&null!=T&&(F=T[i])?(a_(e,t,F,i,o),Cs(n)&&function Xz(e,n){const t=Ii(n,e);16&t[ct]||(t[ct]|=64)}(t,n.index)):3&n.type&&(i=function Zz(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(i),o=null!=c?c(o,n.value||"",i):o,r.setProperty(S,i,o))}(Ct(),function Qt(){const e=Qe.lFrame;return xb(e.tView,e.selectedIndex)}(),i,e,n,i[it],t,!1),Fc}function g_(e,n,t,i,o){const c=o?"class":"style";a_(e,t,n.inputs[c],c,i)}function Ya(e,n,t,i){const o=Me(),r=Ct(),c=pt+e,v=o[it],S=r.firstCreatePass?function cU(e,n,t,i,o,r){const c=n.consts,S=za(n,e,2,i,Wr(c,o));return function i_(e,n,t,i){if(Eb()){const o=null===i?null:{"":-1},r=function nj(e,n){const t=e.directiveRegistry;let i=null,o=null;if(t)for(let r=0;r<t.length;r++){const c=t[r];if(GO(n,c.selectors,!1))if(i||(i=[]),co(c))if(null!==c.findHostDirectiveDefs){const v=[];o=o||new Map,c.findHostDirectiveDefs(c,v,o),i.unshift(...v,c),o_(e,n,v.length)}else i.unshift(c),o_(e,n,0);else o=o||new Map,c.findHostDirectiveDefs?.(c,i,o),i.push(c)}return null===i?null:[i,o]}(e,t);let c,v;null===r?c=v=null:[c,v]=r,null!==c&&z0(e,n,t,c,o,v),o&&function ij(e,n,t){if(n){const i=e.localNames=[];for(let o=0;o<n.length;o+=2){const r=t[n[o+1]];if(null==r)throw new Ue(-301,!1);i.push(n[o],r)}}}(t,i,o)}t.mergedAttrs=Ql(t.mergedAttrs,t.attrs)}(n,t,S,Wr(c,r)),null!==S.attrs&&bh(S,S.attrs,!1),null!==S.mergedAttrs&&bh(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(c,r,o,n,t,i):r.data[c],T=bD(r,o,S,v,n,e);o[c]=T;const F=function Rd(e){return 1==(1&e.flags)}(S);return Mo(S,!0),LS(v,T,S),32!=(32&S.flags)&&Nd()&&ih(r,o,T,S),0===function AH(){return Qe.lFrame.elementDepthCount}()&&jn(T,o),function RH(){Qe.lFrame.elementDepthCount++}(),F&&(function e_(e,n,t){Eb()&&(function ej(e,n,t,i){const o=t.directiveStart,r=t.directiveEnd;Cs(t)&&function aj(e,n,t){const i=fi(n,e),o=N0(t);let c=16;t.signals?c=4096:t.onPush&&(c=64);const v=Oh(e,xh(e,o,null,c,i,n,null,e[ca].rendererFactory.createRenderer(i,t),null,null,null));e[n.index]=v}(n,t,e.data[o+t.componentOffset]),e.firstCreatePass||jd(t,n),jn(i,n);const c=t.initialInputs;for(let v=o;v<r;v++){const S=e.data[v],T=bs(n,e,v,t);jn(T,n),null!==c&&lj(0,v-o,T,S,0,c),co(S)&&(Ii(t.index,n)[un]=bs(n,e,v,t))}}(e,n,t,fi(t,n)),64==(64&t.flags)&&j0(e,n,t))}(r,o,S),Jm(r,S,o)),null!==i&&function t_(e,n,t=fi){const i=n.localNames;if(null!==i){let o=n.index+1;for(let r=0;r<i.length;r+=2){const c=i[r+1],v=-1===c?t(n,e):e[c];e[o++]=v}}}(o,S),Ya}function Qa(){let e=Ln();Ng()?Hg():(e=e.parent,Mo(e,!1));const n=e;(function FH(e){return Qe.skipHydrationRootTNode===e})(n)&&function BH(){Qe.skipHydrationRootTNode=null}(),function kH(){Qe.lFrame.elementDepthCount--}();const t=Ct();return t.firstCreatePass&&(Hd(t,e),wg(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function nB(e){return 0!=(8&e.flags)}(n)&&g_(t,n,Me(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function iB(e){return 0!=(16&e.flags)}(n)&&g_(t,n,Me(),n.stylesWithoutHost,!1),Qa}function Ja(e,n,t,i){return Ya(e,n,t,i),Qa(),Ja}let bD=(e,n,t,i,o,r)=>(Gr(!0),eh(i,o,function Hb(){return Qe.lFrame.currentNamespace}()));function v_(e){return!!e&&"function"==typeof e.then}function ID(e){return!!e&&"function"==typeof e.subscribe}function vU(e,n){let t=null;const i=function ZN(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let o=0;o<n.length;o++){const r=n[o];if("*"!==r){if(null===i?GO(e,r,!0):QN(i,r))return o}else t=o}return t}function Mh(e){const n=Me()[dn][zn];if(!n.projection){const i=n.projection=fc(e?e.length:1,null),o=i.slice();let r=n.child;for(;null!==r;){const c=e?vU(r,e):0;null!==c&&(o[c]?o[c].projectionNext=r:i[c]=r,o[c]=r),r=r.next}}}function Ah(e,n=0,t){const i=Me(),o=Ct(),r=za(o,pt+e,16,null,t||null);null===r.projection&&(r.projection=n),Hg(),(!i[ir]||ma())&&32!=(32&r.flags)&&function hV(e,n,t){kS(n[it],0,n,t,fm(e,t,n),wS(t.parent||n[zn],t,n))}(o,i,r)}function fo(e,n=""){const t=Me(),i=Ct(),o=e+pt,r=i.firstCreatePass?za(i,o,1,n,null):i.data[o],c=nI(i,t,r,n,e);t[o]=c,Nd()&&ih(i,t,c,r),Mo(r,!1)}let nI=(e,n,t,i,o)=>(Gr(!0),function Jd(e,n){return e.createText(n)}(n[it],i));const nl="en-US";let DI=nl;function E_(e,n,t,i,o){if(e=Je(e),Array.isArray(e))for(let r=0;r<e.length;r++)E_(e[r],n,t,i,o);else{const r=Ct(),c=Me(),v=Ln();let S=Ds(e)?e:Je(e.provide);const T=t0(e),F=1048575&v.providerIndexes,N=v.directiveStart,B=v.providerIndexes>>20;if(Ds(e)||!e.multi){const X=new cc(T,o,Le),ne=P_(S,n,o?F:F+B,N);-1===ne?(Zg(jd(v,c),r,S),w_(r,e,n.length),n.push(S),v.directiveStart++,v.directiveEnd++,o&&(v.providerIndexes+=1048576),t.push(X),c.push(X)):(t[ne]=X,c[ne]=X)}else{const X=P_(S,n,F+B,N),ne=P_(S,n,F,F+B),he=ne>=0&&t[ne];if(o&&!he||!o&&!(X>=0&&t[X])){Zg(jd(v,c),r,S);const Oe=function a$(e,n,t,i,o){const r=new cc(e,t,Le);return r.multi=[],r.index=n,r.componentProviders=0,XI(r,o,i&&!t),r}(o?s$:r$,t.length,o,i,T);!o&&he&&(t[ne].providerFactory=Oe),w_(r,e,n.length,0),n.push(S),v.directiveStart++,v.directiveEnd++,o&&(v.providerIndexes+=1048576),t.push(Oe),c.push(Oe)}else w_(r,e,X>-1?X:ne,XI(t[o?ne:X],T,!o&&i));!o&&i&&he&&t[ne].componentProviders++}}}function w_(e,n,t,i){const o=Ds(n),r=function WV(e){return!!e.useClass}(n);if(o||r){const S=(r?Je(n.useClass):n).prototype.ngOnDestroy;if(S){const T=e.destroyHooks||(e.destroyHooks=[]);if(!o&&n.multi){const F=T.indexOf(t);-1===F?T.push(t,[i,S]):T[F+1].push(i,S)}else T.push(t,S)}}}function XI(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function P_(e,n,t,i){for(let o=t;o<i;o++)if(n[o]===e)return o;return-1}function r$(e,n,t,i){return T_(this.multi,[])}function s$(e,n,t,i){const o=this.multi;let r;if(this.providerFactory){const c=this.providerFactory.componentProviders,v=bs(t,t[ze],this.providerFactory.index,i);r=v.slice(0,c),T_(o,r);for(let S=c;S<v.length;S++)r.push(v[S])}else r=[],T_(o,r);return r}function T_(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Jn(e,n=[]){return t=>{t.providersResolver=(i,o)=>function o$(e,n,t){const i=Ct();if(i.firstCreatePass){const o=co(e);E_(t,i.data,i.blueprint,o,!0),E_(n,i.data,i.blueprint,o,!1)}}(i,o?o(e):e,n)}}class Ps{}class l${}class M_ extends Ps{constructor(n,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nD(this);const o=function Di(e,n){const t=e[HO]||null;if(!t&&!0===n)throw new Error(`Type ${On(e)} does not have '\u0275mod' property.`);return t}(n);this._bootstrapComponents=function cr(e){return e instanceof Function?e():e}(o.bootstrap),this._r3Injector=m0(n,t,[{provide:Ps,useValue:this},{provide:_h,useValue:this.componentFactoryResolver},...i],On(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class A_ extends l${constructor(n){super(),this.moduleType=n}create(n){return new M_(this.moduleType,n,[])}}function B$(){return this._results[Symbol.iterator]()}class k_{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new wi)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=k_.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=B$)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const i=this;i.dirty=!1;const o=function ji(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function _B(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],r=n[i];if(t&&(o=t(o),r=t(r)),r!==o)return!1}return!0}(i._results,o,t))&&(i._results=o,i.length=o.length,i.last=o[this.length-1],i.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function z$(e,n,t,i=!0){const o=n[ze];if(function sV(e,n,t,i){const o=kn+i,r=t.length;i>0&&(t[o-1][lo]=n),i<r-kn?(n[lo]=t[o],Jb(t,kn+i,n)):(t.push(n),n[lo]=null),n[Zt]=t;const c=n[nc];null!==c&&t!==c&&function aV(e,n){const t=e[ha];n[dn]!==n[Zt][Zt][dn]&&(e[JO]=!0),null===t?e[ha]=[n]:t.push(n)}(c,n);const v=n[wo];null!==v&&v.insertView(e),n[ct]|=128}(o,n,e,t),i){const r=mm(t,e),c=n[it],v=nh(c,e[Po]);null!==v&&function iV(e,n,t,i,o,r){i[nn]=o,i[zn]=n,yc(e,i,t,1,o,r)}(o,e[zn],c,n,v,r)}}let dr=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=$$}return e})();const j$=dr,U$=class extends j${constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){const o=function V$(e,n,t,i){const o=n.tView,v=xh(e,o,t,4096&e[ct]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);v[nc]=e[n.index];const T=e[wo];return null!==T&&(v[wo]=T.createEmbeddedView(o)),l_(o,v,t),v}(this._declarationLView,this._declarationTContainer,n,{injector:t,hydrationInfo:i});return new Pc(o)}};function $$(){return Bh(Ln(),Me())}function Bh(e,n){return 4&e.type?new U$(n,e,Ha(e,n)):null}let Bo=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=X$}return e})();function X$(){return gE(Ln(),Me())}const Y$=Bo,pE=class extends Y${constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Ha(this._hostTNode,this._hostLView)}get injector(){return new Yn(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ud(this._hostTNode,this._hostLView);if(Gg(n)){const t=dc(n,this._hostLView),i=uc(n);return new Yn(t[ze].data[i+8],t)}return new Yn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=fE(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(n,t,i){let o,r;"number"==typeof i?o=i:null!=i&&(o=i.index,r=i.injector);const v=n.createEmbeddedViewImpl(t||{},r,null);return this.insertImpl(v,o,false),v}createComponent(n,t,i,o,r){const c=n&&!function pc(e){return"function"==typeof e}(n);let v;if(c)v=t;else{const le=t||{};v=le.index,i=le.injector,o=le.projectableNodes,r=le.environmentInjector||le.ngModuleRef}const S=c?n:new Tc(yt(n)),T=i||this.parentInjector;if(!r&&null==S.ngModule){const he=(c?T:this.parentInjector).get(Ro,null);he&&(r=he)}yt(S.componentType??{});const X=S.create(T,o,null,r);return this.insertImpl(X.hostView,v,false),X}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,i){const o=n._lView;if(function PH(e){return qn(e[Zt])}(o)){const S=this.indexOf(n);if(-1!==S)this.detach(S);else{const T=o[Zt],F=new pE(T,T[zn],T[Zt]);F.detach(F.indexOf(n))}}const c=this._adjustIndex(t),v=this._lContainer;return z$(v,o,c,!i),n.attachToViewContainerRef(),Jb(F_(v),c,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=fE(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),i=th(this._lContainer,t);i&&(Wd(F_(this._lContainer),t),hm(i[ze],i))}detach(n){const t=this._adjustIndex(n,-1),i=th(this._lContainer,t);return i&&null!=Wd(F_(this._lContainer),t)?new Pc(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function fE(e){return e[8]}function F_(e){return e[8]||(e[8]=[])}function gE(e,n){let t;const i=n[e.index];return qn(i)?t=i:(t=function $0(e,n,t,i){return[e,!0,!1,n,null,0,i,t,null,null,null]}(i,n,null,e),n[e.index]=t,Oh(n,t)),mE(t,n,e,i),new pE(t,e,n)}let mE=function _E(e,n,t,i){if(e[Po])return;let o;o=8&t.type?zt(i):function Q$(e,n){const t=e[it],i=t.createComment(""),o=fi(n,e);return Ss(t,nh(t,o),i,function dV(e,n){return e.nextSibling(n)}(t,o),!1),i}(n,t),e[Po]=o};class L_{constructor(n){this.queryList=n,this.matches=null}clone(){return new L_(this.queryList)}setDirty(){this.queryList.setDirty()}}class N_{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const i=null!==n.contentQueries?n.contentQueries[0]:t.length,o=[];for(let r=0;r<i;r++){const c=t.getByIndex(r);o.push(this.queries[c.indexInDeclarationView].clone())}return new N_(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==OE(n,t).matches&&this.queries[t].setDirty()}}class vE{constructor(n,t,i=null){this.predicate=n,this.flags=t,this.read=i}}class H_{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){const o=null!==t?t.length:0,r=this.getByIndex(i).embeddedTView(n,o);r&&(r.indexInDeclarationView=i,null!==t?t.push(r):t=[r])}return null!==t?new H_(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class B_{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new B_(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){const r=i[o];this.matchTNodeWithReadOption(n,t,t4(t,r)),this.matchTNodeWithReadOption(n,t,$d(t,n,r,!1,!1))}else i===dr?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,$d(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(null!==i){const o=this.metadata.read;if(null!==o)if(o===uo||o===Bo||o===dr&&4&t.type)this.addMatch(t.index,-2);else{const r=$d(t,n,o,!1,!1);null!==r&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function t4(e,n){const t=e.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1];return null}function i4(e,n,t,i){return-1===t?function n4(e,n){return 11&e.type?Ha(e,n):4&e.type?Bh(e,n):null}(n,e):-2===t?function o4(e,n,t){return t===uo?Ha(n,e):t===dr?Bh(n,e):t===Bo?gE(n,e):void 0}(e,n,i):bs(e,e[ze],t,n)}function yE(e,n,t,i){const o=n[wo].queries[i];if(null===o.matches){const r=e.data,c=t.matches,v=[];for(let S=0;S<c.length;S+=2){const T=c[S];v.push(T<0?null:i4(n,r[T],c[S+1],t.metadata.read))}o.matches=v}return o.matches}function V_(e,n,t,i){const o=e.queries.getByIndex(t),r=o.matches;if(null!==r){const c=yE(e,n,o,t);for(let v=0;v<r.length;v+=2){const S=r[v];if(S>0)i.push(c[v/2]);else{const T=r[v+1],F=n[-S];for(let N=kn;N<F.length;N++){const B=F[N];B[nc]===B[Zt]&&V_(B[ze],B,T,i)}if(null!==F[ha]){const N=F[ha];for(let B=0;B<N.length;B++){const X=N[B];V_(X[ze],X,T,i)}}}}}return i}function Ti(e){const n=Me(),t=Ct(),i=Ab();zg(i+1);const o=OE(t,i);if(e.dirty&&function EH(e){return 4==(4&e[ct])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)e.reset([]);else{const r=o.crossesNgTemplate?V_(t,n,i,[]):yE(t,n,o,i);e.reset(r,pz),e.notifyOnChanges()}return!0}return!1}function Mi(e,n,t,i){const o=Ct();if(o.firstCreatePass){const r=Ln();(function xE(e,n,t){null===e.queries&&(e.queries=new H_),e.queries.track(new B_(n,t))})(o,new vE(n,t,i),r.index),function a4(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(o,e),2==(2&t)&&(o.staticContentQueries=!0)}!function CE(e,n,t){const i=new k_(4==(4&t));(function Gz(e,n,t,i){const o=function G0(e){return e[la]||(e[la]=[])}(n);o.push(t),e.firstCreatePass&&function K0(e){return e.cleanup||(e.cleanup=[])}(e).push(i,o.length-1)})(e,n,i,i.destroy),null===n[wo]&&(n[wo]=new N_),n[wo].queries.push(new L_(i))}(o,Me(),t)}function Ai(){return function s4(e,n){return e[wo].queries[n].queryList}(Me(),Ab())}function OE(e,n){return e.queries.getByIndex(n)}const P4=new qe("Application Initializer");let W_=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Dt(P4,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const o of this.appInits){const r=o();if(v_(r))t.push(r);else if(ID(r)){const c=new Promise((v,S)=>{r.subscribe({complete:v,error:S})});t.push(c)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const hr=new qe("LocaleId",{providedIn:"root",factory:()=>Dt(hr,mt.Optional|mt.SkipSelf)||function M4(){return typeof $localize<"u"&&$localize.locale||nl}()});let G_=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new DN(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const UE=new qe(""),Uh=new qe("");let Y_,Z_=(()=>{class e{constructor(t,i,o){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Y_||(function nW(e){Y_=e}(o),o.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Kt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,o){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(c=>c.timeoutId!==r),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:o})}whenStable(t,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,o){return[]}static#e=this.\u0275fac=function(i){return new(i||e)(nt(Kt),nt(X_),nt(Uh))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})(),X_=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Y_?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Xr=null;const $E=new qe("AllowMultipleToken"),Q_=new qe("PlatformDestroyListeners"),WE=new qe("appBootstrapListener");function qE(e,n,t=[]){const i=`Platform: ${n}`,o=new qe(i);return(r=[])=>{let c=J_();if(!c||c.injector.get($E,!1)){const v=[...t,...r,{provide:o,useValue:!0}];e?e(v):function rW(e){if(Xr&&!Xr.get($E,!1))throw new Ue(400,!1);(function GE(){!function fH(e){db=e}(()=>{throw new Ue(600,!1)})})(),Xr=e;const n=e.get(XE);(function KE(e){e.get(n0,null)?.forEach(t=>t())})(e)}(function ZE(e=[],n){return ko.create({name:n,providers:[{provide:Pm,useValue:"platform"},{provide:Q_,useValue:new Set([()=>Xr=null])},...e]})}(v,i))}return function aW(e){const n=J_();if(!n)throw new Ue(401,!1);return n}()}}function J_(){return Xr?.get(XE)??null}let XE=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const o=function lW(e="zone.js",n){return"noop"===e?new Ez:"zone.js"===e?new Kt(n):e}(i?.ngZone,function YE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{const r=function u$(e,n,t){return new M_(e,n,t)}(t.moduleType,this.injector,function nw(e){return[{provide:Kt,useFactory:e},{provide:lh,multi:!0,useFactory:()=>{const n=Dt(uW,{optional:!0});return()=>n.initialize()}},{provide:tw,useFactory:cW},{provide:x0,useFactory:O0}]}(()=>o)),c=r.injector.get(lr,null);return o.runOutsideAngular(()=>{const v=o.onError.subscribe({next:S=>{c.handleError(S)}});r.onDestroy(()=>{$h(this._modules,r),v.unsubscribe()})}),function QE(e,n,t){try{const i=t();return v_(i)?i.catch(o=>{throw n.runOutsideAngular(()=>e.handleError(o)),o}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}(c,o,()=>{const v=r.injector.get(W_);return v.runInitializers(),v.donePromise.then(()=>(function II(e){Bi(e,"Expected localeId to be defined"),"string"==typeof e&&(DI=e.toLowerCase().replace(/_/g,"-"))}(r.injector.get(hr,nl)||nl),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,i=[]){const o=JE({},i);return function iW(e,n,t){const i=new A_(t);return Promise.resolve(i)}(0,0,t).then(r=>this.bootstrapModuleFactory(r,o))}_moduleDoBootstrap(t){const i=t.injector.get(Gc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(o=>i.bootstrap(o));else{if(!t.instance.ngDoBootstrap)throw new Ue(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Q_,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||e)(nt(ko))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function JE(e,n){return Array.isArray(n)?n.reduce(JE,e):{...e,...n}}let Gc=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Dt(tw),this.zoneIsStable=Dt(x0),this.componentTypes=[],this.components=[],this.isStable=Dt(G_).hasPendingTasks.pipe(PO(t=>t?cg(!1):this.zoneIsStable),function IN(e,n=U){return e=e??EN,ie((t,i)=>{let o,r=!0;t.subscribe(ae(i,c=>{const v=n(c);(r||!e(o,v))&&(r=!1,o=v,i.next(c))}))})}(),wO()),this._injector=Dt(Ro)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const o=t instanceof l0;if(!this._injector.get(W_).done)throw!o&&function Jl(e){const n=yt(e)||Rn(e)||Kn(e);return null!==n&&n.standalone}(t),new Ue(405,!1);let c;c=o?t:this._injector.get(_h).resolveComponentFactory(t),this.componentTypes.push(c.componentType);const v=function oW(e){return e.isBoundToModule}(c)?void 0:this._injector.get(Ps),T=c.create(ko.NULL,[],i||c.selector,v),F=T.location.nativeElement,N=T.injector.get(UE,null);return N?.registerApplication(F),T.onDestroy(()=>{this.detachView(T.hostView),$h(this.components,T),N?.unregisterApplication(F)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Ue(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;$h(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(WE,[]);i.push(...this._bootstrapListeners),i.forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>$h(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ue(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $h(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const tw=new qe("",{providedIn:"root",factory:()=>Dt(lr).handleError.bind(void 0)});function cW(){const e=Dt(Kt),n=Dt(lr);return t=>e.runOutsideAngular(()=>n.handleError(t))}let uW=(()=>{class e{constructor(){this.zone=Dt(Kt),this.applicationRef=Dt(Gc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class sw{constructor(){}supports(n){return Ih(n)}create(n){return new CW(n)}}const yW=(e,n)=>n;class CW{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||yW}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,o=0,r=null;for(;t||i;){const c=!i||t&&t.currentIndex<lw(i,o,r)?t:i,v=lw(c,o,r),S=c.currentIndex;if(c===i)o--,i=i._nextRemoved;else if(t=t._next,null==c.previousIndex)o++;else{r||(r=[]);const T=v-o,F=S-o;if(T!=F){for(let B=0;B<T;B++){const X=B<r.length?r[B]:r[B]=0,ne=X+B;F<=ne&&ne<T&&(r[B]=X+1)}r[c.previousIndex]=F-T}}v!==S&&n(c,v,S)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Ih(n))throw new Ue(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,r,c,t=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let v=0;v<this.length;v++)r=n[v],c=this._trackByFn(v,r),null!==t&&Object.is(t.trackById,c)?(i&&(t=this._verifyReinsertion(t,r,c,v)),Object.is(t.item,r)||this._addIdentityChange(t,r)):(t=this._mismatch(t,r,c,v),i=!0),t=t._next}else o=0,function Bj(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let i;for(;!(i=t.next()).done;)n(i.value)}}(n,v=>{c=this._trackByFn(o,v),null!==t&&Object.is(t.trackById,c)?(i&&(t=this._verifyReinsertion(t,v,c,o)),Object.is(t.item,v)||this._addIdentityChange(t,v)):(t=this._mismatch(t,v,c,o),i=!0),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,o){let r;return null===n?r=this._itTail:(r=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,r,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,o))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,r,o)):n=this._addAfter(new xW(t,i),r,o),n}_verifyReinsertion(n,t,i,o){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==r?n=this._reinsertAfter(r,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,r=n._nextRemoved;return null===o?this._removalsHead=r:o._nextRemoved=r,null===r?this._removalsTail=o:r._prevRemoved=o,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){const o=null===t?this._itHead:t._next;return n._next=o,n._prev=t,null===o?this._itTail=n:o._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new aw),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,i=n._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class xW{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OW{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const t=n._prevDup,i=n._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class aw{constructor(){this.map=new Map}put(n){const t=n.trackById;let i=this.map.get(t);i||(i=new OW,this.map.set(t,i)),i.add(n)}get(n,t){const o=this.map.get(n);return o?o.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lw(e,n,t){const i=e.previousIndex;if(null===i)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+n+o}function uw(){return new Kc([new sw])}let Kc=(()=>{class e{static#e=this.\u0275prov=gt({token:e,providedIn:"root",factory:uw});constructor(t){this.factories=t}static create(t,i){if(null!=i){const o=i.factories.slice();t=t.concat(o)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||uw()),deps:[[e,new nm,new tm]]}}find(t){const i=this.factories.find(o=>o.supports(t));if(null!=i)return i;throw new Ue(901,!1)}}return e})();const EW=qE(null,"core",[]);let wW=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||e)(nt(Gc))};static#t=this.\u0275mod=Et({type:e});static#n=this.\u0275inj=St({})}return e})(),rv=null;function sv(){return rv}class zW{}const $i=new qe("DocumentToken");function ww(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const i=t.indexOf("="),[o,r]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===n)return decodeURIComponent(r)}return null}let iK=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Et({type:e});static#n=this.\u0275inj=St({})}return e})();function xv(e){return"server"===e}class Ov{}class TK extends zW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Dv extends TK{static makeCurrent(){!function VW(e){rv||(rv=e)}(new Dv)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function MK(){return Qc=Qc||document.querySelector("base"),Qc?Qc.getAttribute("href"):null}();return null==t?null:function AK(e){sp=sp||document.createElement("a"),sp.setAttribute("href",e);const n=sp.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){Qc=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return ww(document.cookie,n)}}let sp,Qc=null,kK=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const Iv=new qe("EventManagerPlugins");let Vw=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new Ue(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||e)(nt(Iv),nt(Kt))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();class zw{constructor(n){this._doc=n}}const Ev="ng-app-id";let jw=(()=>{class e{constructor(t,i,o,r={}){this.doc=t,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xv(r),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(o=>o.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ev}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(o=>{null!=o.textContent&&i.set(o.textContent,o)}),i}return null}changeUsageCount(t,i){const o=this.styleRef;if(o.has(t)){const r=o.get(t);return r.usage+=i,r.usage}return o.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===t)return o.delete(i),r.removeAttribute(Ev),r;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Ev,this.appId),c}}addStyleToHost(t,i){const o=this.getStyleElement(t,i);t.appendChild(o);const r=this.styleRef,c=r.get(i)?.elements;c?c.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||e)(nt($i),nt(hh),nt(o0,8),nt(ar))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const wv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pv=/%COMP%/g,HK=new qe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function $w(e,n){return n.map(t=>t.replace(Pv,e))}let Ww=(()=>{class e{constructor(t,i,o,r,c,v,S,T=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=c,this.platformId=v,this.ngZone=S,this.nonce=T,this.rendererByCompId=new Map,this.platformIsServer=xv(v),this.defaultRenderer=new Tv(t,c,S,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===so.ShadowDom&&(i={...i,encapsulation:so.Emulated});const o=this.getOrCreateRenderer(t,i);return o instanceof Kw?o.applyToHost(t):o instanceof Mv&&o.applyStyles(),o}getOrCreateRenderer(t,i){const o=this.rendererByCompId;let r=o.get(i.id);if(!r){const c=this.doc,v=this.ngZone,S=this.eventManager,T=this.sharedStylesHost,F=this.removeStylesOnCompDestroy,N=this.platformIsServer;switch(i.encapsulation){case so.Emulated:r=new Kw(S,T,i,this.appId,F,c,v,N);break;case so.ShadowDom:return new jK(S,T,t,i,c,v,this.nonce,N);default:r=new Mv(S,T,i,F,c,v,N)}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||e)(nt(Vw),nt(jw),nt(hh),nt(HK),nt($i),nt(ar),nt(Kt),nt(o0))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();class Tv{constructor(n,t,i,o){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(wv[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(Gw(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(Gw(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new Ue(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,o){if(o){t=o+":"+t;const r=wv[o];r?n.setAttributeNS(r,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){const o=wv[i];o?n.removeAttributeNS(o,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,o){o&(Kr.DashCase|Kr.Important)?n.style.setProperty(t,i,o&Kr.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&Kr.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n[t]=i}setValue(n,t){n.nodeValue=t}listen(n,t,i){if("string"==typeof n&&!(n=sv().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function Gw(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class jK extends Tv{constructor(n,t,i,o,r,c,v,S){super(n,r,c,S),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const T=$w(o.id,o.styles);for(const F of T){const N=document.createElement("style");v&&N.setAttribute("nonce",v),N.textContent=F,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Mv extends Tv{constructor(n,t,i,o,r,c,v,S){super(n,r,c,v),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=S?$w(S,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Kw extends Mv{constructor(n,t,i,o,r,c,v,S){const T=o+"-"+i.id;super(n,t,i,r,c,v,S,T),this.contentAttr=function BK(e){return"_ngcontent-%COMP%".replace(Pv,e)}(T),this.hostAttr=function VK(e){return"_nghost-%COMP%".replace(Pv,e)}(T)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}}let UK=(()=>{class e extends zw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}static#e=this.\u0275fac=function(i){return new(i||e)(nt($i))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const qw=["alt","control","meta","shift"],$K={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WK={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let GK=(()=>{class e extends zw{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,i,o){const r=e.parseEventName(i),c=e.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sv().onAndCancel(t,r.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),o=i.shift();if(0===i.length||"keydown"!==o&&"keyup"!==o)return null;const r=e._normalizeKey(i.pop());let c="",v=i.indexOf("code");if(v>-1&&(i.splice(v,1),c="code."),qw.forEach(T=>{const F=i.indexOf(T);F>-1&&(i.splice(F,1),c+=T+".")}),c+=r,0!=i.length||0===r.length)return null;const S={};return S.domEventName=o,S.fullKey=c,S}static matchEventFullKeyCode(t,i){let o=$K[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(o=t.code,r="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qw.forEach(c=>{c!==o&&(0,WK[c])(t)&&(r+=c+".")}),r+=o,r===i)}static eventCallback(t,i,o){return r=>{e.matchEventFullKeyCode(r,t)&&o.runGuarded(()=>i(r))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||e)(nt($i))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const Xw=[{provide:ar,useValue:"browser"},{provide:n0,useValue:function KK(){Dv.makeCurrent()},multi:!0},{provide:$i,useFactory:function ZK(){return function yV(e){ym=e}(document),document},deps:[]}],XK=qE(EW,"browser",Xw),YK=new qe(""),Yw=[{provide:Uh,useClass:class RK{addToWindow(n){Vt.getAngularTestability=(i,o=!0)=>{const r=n.findTestabilityInTree(i,o);if(null==r)throw new Ue(5103,!1);return r},Vt.getAllAngularTestabilities=()=>n.getAllTestabilities(),Vt.getAllAngularRootElements=()=>n.getAllRootElements(),Vt.frameworkStabilizers||(Vt.frameworkStabilizers=[]),Vt.frameworkStabilizers.push(i=>{const o=Vt.getAllAngularTestabilities();let r=o.length,c=!1;const v=function(S){c=c||S,r--,0==r&&i(c)};o.forEach(S=>{S.whenStable(v)})})}findTestabilityInTree(n,t,i){return null==t?null:n.getTestability(t)??(i?sv().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:UE,useClass:Z_,deps:[Kt,X_,Uh]},{provide:Z_,useClass:Z_,deps:[Kt,X_,Uh]}],Qw=[{provide:Pm,useValue:"root"},{provide:lr,useFactory:function qK(){return new lr},deps:[]},{provide:Iv,useClass:UK,multi:!0,deps:[$i,Kt,ar]},{provide:Iv,useClass:GK,multi:!0,deps:[$i]},Ww,jw,Vw,{provide:u0,useExisting:Ww},{provide:Ov,useClass:kK,deps:[]},[]];let QK=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:hh,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||e)(nt(YK,12))};static#t=this.\u0275mod=Et({type:e});static#n=this.\u0275inj=St({providers:[...Qw,...Yw],imports:[iK,wW]})}return e})();function nP(e){return ie((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}typeof window<"u"&&window;class ap{}class lp{}class Vo{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const o=t.slice(0,i),r=o.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(o,r),this.headers.has(r)?this.headers.get(r).push(c):this.headers.set(r,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof Vo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new Vo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,t);const o=("a"===n.op?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":const r=n.value;if(r){let c=this.headers.get(t);if(!c)return;c=c.filter(v=>-1===r.indexOf(v)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(n,t){const i=(Array.isArray(t)?t:[t]).map(r=>r.toString()),o=n.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(n,o)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class a5{encodeKey(n){return iP(n)}encodeValue(n){return iP(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const c5=/%(\d[a-f0-9])/gi,u5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function iP(e){return encodeURIComponent(e).replace(c5,(n,t)=>u5[t]??n)}function cp(e){return`${e}`}class Qr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new a5,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function l5(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{const r=o.indexOf("="),[c,v]=-1==r?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,r)),n.decodeValue(o.slice(r+1))],S=t.get(c)||[];S.push(v),t.set(c,S)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const i=n.fromObject[t],o=Array.isArray(i)?i.map(cp):[cp(i)];this.map.set(t,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(i=>{const o=n[i];Array.isArray(o)?o.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Qr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(cp(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const o=i.indexOf(cp(n.value));-1!==o&&i.splice(o,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class d5{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function oP(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function rP(e){return typeof Blob<"u"&&e instanceof Blob}function sP(e){return typeof FormData<"u"&&e instanceof FormData}class Jc{constructor(n,t,i,o){let r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function h5(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==i?i:null,r=o):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Vo),this.context||(this.context=new d5),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const v=t.indexOf("?");this.urlWithParams=t+(-1===v?"?":v<t.length-1?"&":"")+c}}else this.params=new Qr,this.urlWithParams=t}serializeBody(){return null===this.body?null:oP(this.body)||rP(this.body)||sP(this.body)||function p5(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||sP(this.body)?null:rP(this.body)?this.body.type||null:oP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,r=void 0!==n.body?n.body:this.body,c=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,v=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let S=n.headers||this.headers,T=n.params||this.params;const F=n.context??this.context;return void 0!==n.setHeaders&&(S=Object.keys(n.setHeaders).reduce((N,B)=>N.set(B,n.setHeaders[B]),S)),n.setParams&&(T=Object.keys(n.setParams).reduce((N,B)=>N.set(B,n.setParams[B]),T)),new Jc(t,i,r,{params:T,headers:S,context:F,reportProgress:v,responseType:o,withCredentials:c})}}var sl=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(sl||{});class Rv{constructor(n,t=200,i="OK"){this.headers=n.headers||new Vo,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class kv extends Rv{constructor(n={}){super(n),this.type=sl.ResponseHeader}clone(n={}){return new kv({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class al extends Rv{constructor(n={}){super(n),this.type=sl.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new al({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class aP extends Rv{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Fv(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let f5=(()=>{class e{constructor(t){this.handler=t}request(t,i,o={}){let r;if(t instanceof Jc)r=t;else{let S,T;S=o.headers instanceof Vo?o.headers:new Vo(o.headers),o.params&&(T=o.params instanceof Qr?o.params:new Qr({fromObject:o.params})),r=new Jc(t,i,void 0!==o.body?o.body:null,{headers:S,context:o.context,params:T,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const c=cg(r).pipe(function r5(e,n){return J(n)?xd(e,n,1):xd(e,1)}(S=>this.handler.handle(S)));if(t instanceof Jc||"events"===o.observe)return c;const v=c.pipe(function s5(e,n){return ie((t,i)=>{let o=0;t.subscribe(ae(i,r=>e.call(n,r,o++)&&i.next(r)))})}(S=>S instanceof al));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return v.pipe(be(S=>{if(null!==S.body&&!(S.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return S.body}));case"blob":return v.pipe(be(S=>{if(null!==S.body&&!(S.body instanceof Blob))throw new Error("Response is not a Blob.");return S.body}));case"text":return v.pipe(be(S=>{if(null!==S.body&&"string"!=typeof S.body)throw new Error("Response is not a string.");return S.body}));default:return v.pipe(be(S=>S.body))}case"response":return v;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Qr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,Fv(o,i))}post(t,i,o={}){return this.request("POST",t,Fv(o,i))}put(t,i,o={}){return this.request("PUT",t,Fv(o,i))}static#e=this.\u0275fac=function(i){return new(i||e)(nt(ap))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();function uP(e,n){return n(e)}function m5(e,n){return(t,i)=>n.intercept(t,{handle:o=>e(o,i)})}const v5=new qe(""),eu=new qe(""),dP=new qe("");function y5(){let e=null;return(n,t)=>{null===e&&(e=(Dt(v5,{optional:!0})??[]).reduceRight(m5,uP));const i=Dt(G_),o=i.add();return e(n,t).pipe(nP(()=>i.remove(o)))}}let hP=(()=>{class e extends ap{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Dt(G_)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(eu),...this.injector.get(dP,[])]));this.chain=o.reduceRight((r,c)=>function _5(e,n,t){return(i,o)=>t.runInContext(()=>n(i,r=>e(r,o)))}(r,c,this.injector),uP)}const i=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(nP(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||e)(nt(lp),nt(Ro))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const b5=/^\)\]\}',?\n/;let fP=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Ue(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?lg(i.\u0275loadImpl()):cg(null)).pipe(PO(()=>new Y(r=>{const c=i.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((le,he)=>c.setRequestHeader(le,he.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const le=t.detectContentTypeHeader();null!==le&&c.setRequestHeader("Content-Type",le)}if(t.responseType){const le=t.responseType.toLowerCase();c.responseType="json"!==le?le:"text"}const v=t.serializeBody();let S=null;const T=()=>{if(null!==S)return S;const le=c.statusText||"OK",he=new Vo(c.getAllResponseHeaders()),Oe=function S5(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(c)||t.url;return S=new kv({headers:he,status:c.status,statusText:le,url:Oe}),S},F=()=>{let{headers:le,status:he,statusText:Oe,url:_e}=T(),ke=null;204!==he&&(ke=typeof c.response>"u"?c.responseText:c.response),0===he&&(he=ke?200:0);let Ne=he>=200&&he<300;if("json"===t.responseType&&"string"==typeof ke){const We=ke;ke=ke.replace(b5,"");try{ke=""!==ke?JSON.parse(ke):null}catch(Ot){ke=We,Ne&&(Ne=!1,ke={error:Ot,text:ke})}}Ne?(r.next(new al({body:ke,headers:le,status:he,statusText:Oe,url:_e||void 0})),r.complete()):r.error(new aP({error:ke,headers:le,status:he,statusText:Oe,url:_e||void 0}))},N=le=>{const{url:he}=T(),Oe=new aP({error:le,status:c.status||0,statusText:c.statusText||"Unknown Error",url:he||void 0});r.error(Oe)};let B=!1;const X=le=>{B||(r.next(T()),B=!0);let he={type:sl.DownloadProgress,loaded:le.loaded};le.lengthComputable&&(he.total=le.total),"text"===t.responseType&&c.responseText&&(he.partialText=c.responseText),r.next(he)},ne=le=>{let he={type:sl.UploadProgress,loaded:le.loaded};le.lengthComputable&&(he.total=le.total),r.next(he)};return c.addEventListener("load",F),c.addEventListener("error",N),c.addEventListener("timeout",N),c.addEventListener("abort",N),t.reportProgress&&(c.addEventListener("progress",X),null!==v&&c.upload&&c.upload.addEventListener("progress",ne)),c.send(v),r.next({type:sl.Sent}),()=>{c.removeEventListener("error",N),c.removeEventListener("abort",N),c.removeEventListener("load",F),c.removeEventListener("timeout",N),t.reportProgress&&(c.removeEventListener("progress",X),null!==v&&c.upload&&c.upload.removeEventListener("progress",ne)),c.readyState!==c.DONE&&c.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||e)(nt(Ov))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const Lv=new qe("XSRF_ENABLED"),gP=new qe("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),mP=new qe("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class _P{}let E5=(()=>{class e{constructor(t,i,o){this.doc=t,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ww(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||e)(nt($i),nt(ar),nt(gP))};static#t=this.\u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();function w5(e,n){const t=e.url.toLowerCase();if(!Dt(Lv)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const i=Dt(_P).getToken(),o=Dt(mP);return null!=i&&!e.headers.has(o)&&(e=e.clone({headers:e.headers.set(o,i)})),n(e)}var Jr=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e[e.Fetch=6]="Fetch",e}(Jr||{});function P5(...e){const n=[f5,fP,hP,{provide:ap,useExisting:hP},{provide:lp,useExisting:fP},{provide:eu,useValue:w5,multi:!0},{provide:Lv,useValue:!0},{provide:_P,useClass:E5}];for(const t of e)n.push(...t.\u0275providers);return function Im(e){return{\u0275providers:e}}(n)}const vP=new qe("LEGACY_INTERCEPTOR_FN");function T5(){return function Ms(e,n){return{\u0275kind:e,\u0275providers:n}}(Jr.LegacyInterceptors,[{provide:vP,useFactory:y5},{provide:eu,useExisting:vP,multi:!0}])}let M5=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=Et({type:e});static#n=this.\u0275inj=St({providers:[P5(T5())]})}return e})();const N5={"[object Array]":"array","[object Date]":"date","[object Object]":"object","[object String]":"string"},Ki=function(e){if(null===e)return"null";const n=Object.prototype.toString.call(e);return"object"==typeof e?N5[n]||"object":typeof e},Nv=function(e){return"boolean"==typeof e},yP=function(e){return rn(e)&&-1!==e.toString().indexOf("e")},tu=function(e){return"date"===Ki(e)},Ie=function(e){return null!=e},Be=function(e){return"function"==typeof e},_t=function(e){return"string"==typeof e},rn=function(e){return"number"==typeof e&&isFinite(e)||!isNaN(e-parseFloat(e))},dt=function(e){return"object"===Ki(e)},dp=function(e){let n;for(n in e)return!1;return!0},lt=function(e){if(!e||"object"!==Ki(e))return!1;const n=Object.getPrototypeOf(e);if(!n)return!0;const t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return"function"==typeof t&&Object.toString.call(t)===Object.toString.call(Object)},hp=function(e){return-1===["object","array","function"].indexOf(Ki(e))},$t=function(e){return null!=e&&e===e.window},qi=function(e){return!(!e||!e.jquery&&!e.dxRenderer)},ll=function(e){return!!e&&Be(e.then)},Hv=function(e){return!!e&&Be(e.done)&&Be(e.fail)},pe=function(e){let n=1,t=!1;for("boolean"==typeof(e=e||{})&&(t=e,e=arguments[1]||{},n++);n<arguments.length;n++){const i=arguments[n];if(null!=i)for(const o in i){const r=e[o],c=i[o];let S,v=!1;"__proto__"===o||"constructor"===o||e===c||(t&&c&&(lt(c)||(v=Array.isArray(c)))?(S=v?r&&Array.isArray(r)?r:[]:r&&lt(r)?r:{},e[o]=pe(t,S,c)):void 0!==c&&(e[o]=c))}}return e},ni=(e,n)=>{if(Array.isArray(e))return e.map(n);const t=[];for(const i in e)t.push(n(e[i],i));return t},Ee=(e,n)=>{if(e){if("length"in e)for(let t=0;t<e.length&&!1!==n.call(e[t],t,e[t]);t++);else for(const t in e)if(!1===n.call(e[t],t,e[t]))break;return e}},V5=function(){},pp=function(e){return typeof console>"u"||!Be(console[e])?V5:console[e].bind(console)},fp={log:pp("log"),info:pp("info"),warn:pp("warn"),error:pp("error")},z5=function(){const e=[new RegExp("&","g"),new RegExp('"',"g"),new RegExp("'","g"),new RegExp("<","g"),new RegExp(">","g")];return function(n){return String(n).replace(e[0],"&amp;").replace(e[1],"&quot;").replace(e[2],"&#39;").replace(e[3],"&lt;").replace(e[4],"&gt;")}}();function Bv(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];return Be(e)?e(...t):(t.forEach((o,r)=>{_t(o)&&(o=o.replace(/\$/g,"$$$$"));const c=new RegExp("\\{"+r+"\\}","gm");e=e.replace(c,o)}),e)}const Vv=function(){const e=/\s/g;return function(n){return!n||!n.replace(e,"")}}(),W5="https://js.devexpress.com/error/"+"24.1.4".split(".").slice(0,2).join("_")+"/";function zv(e,n){const t={ERROR_MESSAGES:pe(n,e),Error:function(){return function(c){const v=c[0],S=i(v,c=c.slice(1)),T=r(v),F=o(v,S);return pe(new Error(F),{__id:v,__details:S,url:T})}([].slice.call(arguments))},log:function(c){let v="log";/^E\d+$/.test(c)?v="error":/^W\d+$/.test(c)&&(v="warn"),fp[v]("log"===v?c:function(S){const T=S[0];return o(T,i(T,S=S.slice(1)))}([].slice.call(arguments)))}};function i(c,v){return v=[t.ERROR_MESSAGES[c]].concat(v),Bv.apply(this,v).replace(/\.*\s*?$/,"")}function o(c,v){const S=null!=c&&c.startsWith("W")?"warning":"error";return Bv.apply(this,["{0} - {1}.\n\nFor additional information on this {2} message, see: {3}",c,v,S,r(c)])}function r(c){return W5+c}return t}const vt=zv({E0001:"Method is not implemented",E0002:"Member name collision: {0}",E0003:"A class must be instantiated using the 'new' keyword",E0004:"The NAME property of the component is not specified",E0005:"Unknown device",E0006:"Unknown endpoint key is requested",E0007:"'Invalidate' method is called outside the update transaction",E0008:"Type of the option name is not appropriate to create an action",E0009:"Component '{0}' has not been initialized for an element",E0010:"Animation configuration with the '{0}' type requires '{1}' configuration as {2}",E0011:"Unknown animation type '{0}'",E0012:"jQuery version is too old. Please upgrade jQuery to 1.10.0 or later",E0013:"KnockoutJS version is too old. Please upgrade KnockoutJS to 2.3.0 or later",E0014:"The 'release' method shouldn't be called for an unlocked Lock object",E0015:"Queued task returned an unexpected result",E0017:"Event namespace is not defined",E0018:"DevExpress.ui.DevExpressPopup widget is required",E0020:"Template engine '{0}' is not supported",E0021:"Unknown theme is set: {0}",E0022:"LINK[rel=DevExpress-theme] tags must go before DevExpress included scripts",E0023:"Template name is not specified",E0024:"DevExtreme bundle already included",E0025:"Unexpected argument type",E0100:"Unknown validation type is detected",E0101:"Misconfigured range validation rule is detected",E0102:"Misconfigured comparison validation rule is detected",E0103:"validationCallback of an asynchronous rule should return a jQuery or a native promise",E0110:"Unknown validation group is detected",E0120:"Adapter for a DevExpressValidator component cannot be configured",E0121:"The 'customItem' parameter of the 'onCustomItemCreating' function is empty or contains invalid data. Assign a custom object or a Promise that is resolved after the item is created.",W0000:"'{0}' is deprecated in {1}. {2}",W0001:"{0} - '{1}' option is deprecated in {2}. {3}",W0002:"{0} - '{1}' method is deprecated in {2}. {3}",W0003:"{0} - '{1}' property is deprecated in {2}. {3}",W0004:"Timeout for theme loading is over: {0}",W0005:"'{0}' event is deprecated in {1}. {2}",W0006:"Invalid recurrence rule: '{0}'",W0007:"'{0}' Globalize culture is not defined",W0008:"Invalid view name: '{0}'",W0009:"Invalid time zone name: '{0}'",W0010:"{0} is deprecated in {1}. {2}",W0011:"Number parsing is invoked while the parser is not defined",W0012:"Date parsing is invoked while the parser is not defined",W0013:"'{0}' file is deprecated in {1}. {2}",W0014:"{0} - '{1}' type is deprecated in {2}. {3}",W0015:"Instead of returning a value from the '{0}' function, write it into the '{1}' field of the function's parameter.",W0016:'The "{0}" option does not accept the "{1}" value since v{2}. {3}.',W0017:'Setting the "{0}" property with a function is deprecated since v21.2',W0018:'Setting the "position" property with a function is deprecated since v21.2',W0019:"DevExtreme: Unable to Locate a Valid License Key.\n\nIf you are using a 30-day trial version of DevExtreme, you must uninstall all copies of DevExtreme once your 30-day trial period expires. For terms and conditions that govern use of DevExtreme UI components/libraries, please refer to the DevExtreme End User License Agreement: https://js.devexpress.com/EULAs/DevExtremeComplete.\n\nTo use DevExtreme in a commercial project, you must purchase a license. For pricing/licensing options, please visit: https://js.devexpress.com/Buy.\n\nIf you have licensing-related questions or need help with a purchase, please email clientservices@devexpress.com.\n\n",W0020:"DevExtreme: License Key Has Expired.\n\nA mismatch exists between the license key used and the DevExtreme version referenced in this project.\n\nTo proceed, you can:\n\u2022 use a version of DevExtreme linked to your license key: https://www.devexpress.com/ClientCenter/DownloadManager\n\u2022 renew your DevExpress Subscription: https://www.devexpress.com/buy/renew (once you renew your subscription, you will be entitled to product updates and support service as defined in the DevExtreme End User License Agreement)\n\nIf you have licensing-related questions or need help with a renewal, please email clientservices@devexpress.com.\n\n",W0021:"DevExtreme: License Key Verification Has Failed.\n\nTo verify your DevExtreme license, make certain to specify a correct key in the GlobalConfig. If you continue to encounter this error, please visit https://www.devexpress.com/ClientCenter/DownloadManager to obtain a valid license key.\n\nIf you have a valid license and this problem persists, please submit a support ticket via the DevExpress Support Center. We will be happy to follow-up: https://supportcenter.devexpress.com/ticket/create.\n\n",W0022:"DevExtreme: Pre-release software. Not suitable for commercial use.\n\nPre-release software may contain deficiencies and as such, should not be considered for use or integrated in any mission critical application.\n\n",W0023:"DevExtreme: the following 'devextreme' package version does not match versions of other DevExpress products used in this application:\n\n{0}\n\nInteroperability between different versions of the products listed herein cannot be guaranteed.\n\n"}),G5=function(e,n,t){return function(){const i=this.callBase;this.callBase=e[n];try{return t.apply(this,arguments)}finally{this.callBase=i}}},q5=function(e){const n=this;let t,i,o;if(!e)return n;for(i in e)o=e[i],t="function"==typeof n.prototype[i]&&"function"==typeof o,n.prototype[i]=t?G5(n.parent.prototype,i,o):o;return n},Z5=function(){const e=this;let n,t,i;const o=Object.prototype.hasOwnProperty.bind(e);for(!o("_includedCtors")&&!o("_includedPostCtors")&&(e._includedCtors=e._includedCtors.slice(0),e._includedPostCtors=e._includedPostCtors.slice(0)),i=0;i<arguments.length;i++)for(t in n=arguments[i],n.ctor&&e._includedCtors.push(n.ctor),n.postCtor&&e._includedPostCtors.push(n.postCtor),n)"ctor"===t||"postCtor"===t||"default"===t||(e.prototype[t]=n[t]);return e},X5=function(e){if(!Object.prototype.hasOwnProperty.bind(this)("parent")&&this.parent){const i=Object.getPrototypeOf(this);return i===e||i.subclassOf(e)}return this.parent===e||!(!this.parent||!this.parent.subclassOf)&&this.parent.subclassOf(e)},CP=function(){throw vt.Error("E0001")},Y5=function(){const e=Object.prototype.hasOwnProperty;return function(n,t){for(const i in n){if(!e.call(n,i))return;t[i]=n[i]}}}(),jv=function(){};jv.inherit=function(e){const n=function(){if(!this||$t(this)||"function"!=typeof this.constructor)throw vt.Error("E0003");const t=this,i=t.ctor,o=t.constructor._includedCtors,r=t.constructor._includedPostCtors;let c;for(c=0;c<o.length;c++)o[c].call(t);for(i&&i.apply(t,arguments),c=0;c<r.length;c++)r[c].call(t)};return n.prototype=function(e){const n=function(){};return n.prototype=e.prototype,new n}(this),Y5(this,n),n.inherit=this.inherit,n.abstract=CP,n.redefine=q5,n.include=Z5,n.subclassOf=X5,n.parent=this,n._includedCtors=this._includedCtors?this._includedCtors.slice(0):[],n._includedPostCtors=this._includedPostCtors?this._includedPostCtors.slice(0):[],n.prototype.constructor=n,n.redefine(e),n},jv.abstract=CP;const Tt=jv;function Zi(e){const n=Tt.inherit(e);let t=n,i=new t(e);const o={},r=function(c,v){Ee(c,function(S){Be(i[S])?(v||!e[S])&&(e[S]=function(){return i[S].apply(e,arguments)}):(v&&(o[S]=e[S]),e[S]=i[S])})};return r(e,!0),e.inject=function(c){t=t.inherit(c),i=new t,r(c)},e.resetInjection=function(){pe(e,o),t=n,i=new n},e}function He(){return He=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},He.apply(this,arguments)}const xP={rtlEnabled:!1,defaultCurrency:"USD",defaultUseCurrencyAccountingStyle:!0,oDataFilterToLower:!0,serverDecimalSeparator:".",decimalSeparator:".",thousandsSeparator:",",forceIsoDateParsing:!0,wrapActionsBeforeExecute:!0,useLegacyStoreResult:!1,useJQuery:void 0,editorStylingMode:void 0,useLegacyVisibleIndex:!1,floatingActionButtonConfig:{icon:"add",closeIcon:"close",label:"",position:{at:"right bottom",my:"right bottom",offset:{x:-16,y:-16}},maxSpeedDialActionCount:5,shading:!1,direction:"auto"},optionsParser:e=>{"{"!==e.trim().charAt(0)&&(e="{"+e+"}");try{return JSON.parse(e)}catch(n){try{return JSON.parse(Q5(e))}catch{throw vt.Error("E3018",n,e)}}}},Q5=e=>e.replace(/'/g,'"').replace(/,\s*([\]}])/g,"$1").replace(/([{,])\s*([^":\s]+)\s*:/g,'$1"$2":'),J5=["decimalSeparator","thousandsSeparator"],OP=function(){if(!arguments.length)return xP;const e=arguments.length<=0?void 0:arguments[0];J5.forEach(n=>{e[n]&&vt.log("W0003","config",n,"19.2",`Now, the ${n} is selected based on the specified locale.`)}),pe(xP,e)};typeof DevExpress<"u"&&DevExpress.config&&OP(DevExpress.config);const Ht=OP,Pn=Tt.inherit({ctor:function(e){e&&(e=String(e)),this._value=this._normalize(e||this._generate())},_normalize:function(e){for(e=e.replace(/[^a-f0-9]/gi,"").toLowerCase();e.length<32;)e+="0";return[e.substr(0,8),e.substr(8,4),e.substr(12,4),e.substr(16,4),e.substr(20,12)].join("-")},_generate:function(){let e="";for(let n=0;n<32;n++)e+=Math.round(15*Math.random()).toString(16);return e},toString:function(){return this._value},valueOf:function(){return this._value},toJSON:function(){return this._value}}),gr=function(e){this._options=e||{},this._list=[],this._queue=[],this._firing=!1,this._fired=!1,this._firingIndexes=[]};gr.prototype._fireCore=function(e,n){const t=this._firingIndexes,i=this._list,o=this._options.stopOnFalse,r=t.length;for(t[r]=0;t[r]<i.length&&(!1!==i[t[r]].apply(e,n)||!o);t[r]++);t.pop()},gr.prototype.add=function(e){return"function"==typeof e&&(!this._options.unique||!this.has(e))&&this._list.push(e),this},gr.prototype.remove=function(e){const n=this._list,t=this._firingIndexes,i=n.indexOf(e);if(i>-1&&(n.splice(i,1),this._firing&&t.length))for(let o=0;o<t.length;o++)i<=t[o]&&t[o]--;return this},gr.prototype.has=function(e){const n=this._list;return e?n.indexOf(e)>-1:!!n.length},gr.prototype.empty=function(e){return this._list=[],this},gr.prototype.fireWith=function(e,n){const t=this._queue;if(n=(n=n||[]).slice?n.slice():n,this._options.syncStrategy)this._firing=!0,this._fireCore(e,n);else{if(t.push([e,n]),this._firing)return;for(this._firing=!0;t.length;){const i=t.shift();this._fireCore(i[0],i[1])}}return this._firing=!1,this._fired=!0,this},gr.prototype.fire=function(){this.fireWith(this,arguments)},gr.prototype.fired=function(){return this._fired};const bt=function(e){return new gr(e)},bP=[{method:"resolve",handler:"done",state:"resolved"},{method:"reject",handler:"fail",state:"rejected"},{method:"notify",handler:"progress"}];let As=function(){const e=this;this._state="pending",this._promise={},bP.forEach(function(n){const t=n.method;this[t+"Callbacks"]=bt(),this[t]=function(){return this[t+"With"](this._promise,arguments)}.bind(this),this._promise[n.handler]=function(i){if(!i)return this;const o=e[t+"Callbacks"];return o.fired()?i.apply(e[t+"Context"],e[t+"Args"]):o.add(function(r,c){i.apply(r,c)}.bind(this)),this}}.bind(this)),this._promise.always=function(n){return this.done(n).fail(n)},this._promise.catch=function(n){return this.then(null,n)},this._promise.then=function(n,t){const i=new As;return["done","fail"].forEach(function(o){const r="done"===o?n:t;this[o](function(){if(!r)return void i["done"===o?"resolve":"reject"].apply(this,arguments);const c=r&&r.apply(this,arguments);Hv(c)?c.done(i.resolve).fail(i.reject):ll(c)?c.then(i.resolve,i.reject):i.resolve.apply(this,Ie(c)?[c]:arguments)})}.bind(this)),i.promise()},this._promise.state=function(){return e._state},this._promise.promise=function(n){return n?pe(n,e._promise):e._promise},this._promise.promise(this)};function ii(e,n){if(Hv(e))return e;if(ll(e)){const t=new As;return e.then(function(){t.resolveWith.apply(t,[n].concat([[].slice.call(arguments)]))},function(){t.rejectWith.apply(t,[n].concat([[].slice.call(arguments)]))}),t}return(new As).resolveWith(n,[e])}bP.forEach(function(e){const n=e.method,t=e.state;As.prototype[n+"With"]=function(i,o){const r=this[n+"Callbacks"];return"pending"===this.state()&&(this[n+"Args"]=o,this[n+"Context"]=i,t&&(this._state=t),r.fire(i,o),"pending"!==t&&(this.resolveCallbacks.empty(),this.rejectCallbacks.empty())),this}});let SP=function(){if(1===arguments.length)return ii(arguments[0]);const e=[].slice.call(arguments),n=[];let t=0;const i=new As,o=function(r){return function(c){n[r]=this,e[r]=arguments.length>1?[].slice.call(arguments):c,t++,t===e.length&&i.resolveWith(n,e)}};for(let r=0;r<e.length;r++)Hv(e[r])?e[r].promise().done(o(r)).fail(i.reject):t++;return t===e.length&&i.resolveWith(n,e),i.promise()};function Ae(){return new As}function Ft(){return SP.apply(this,arguments)}const Rs=Zi({isWrapped:function(){return!1},isWritableWrapped:function(){return!1},wrap:function(e){return e},unwrap:function(e){return e},assign:function(){fp.error("Method 'assign' should not be used for not wrapped variables. Use 'isWrapped' method for ensuring.")}}),e3=function(e,n,t,i){!i&&Rs.isWrapped(e[n])?Rs.assign(e[n],t):e[n]=t},nu=function(e,n,t,i){let o,r;for(const c in n)if(o=e[c],r=n[c],"__proto__"!==c&&"constructor"!==c&&e!==r){if(lt(r)){const v=t?dt(o):lt(o);r=nu(v?o:{},r,t,i)}void 0!==r&&o!==r&&e3(e,c,r,i)}return e},t3=Rs.unwrap,DP=Rs.isWrapped,n3=Rs.assign,cl=function(e){return function(e){return e.replace(/\[/g,".").replace(/\]/g,"")}(e).split(".")},IP=function(e,n,t,i){if("this"===n)throw new vt.Error("E4016");const o=e[n];i.unwrapObservables&&DP(o)?n3(o,t):e[n]=t},EP=function(e){return(e=e||{}).unwrapObservables=void 0===e.unwrapObservables||e.unwrapObservables,e};function iu(e,n){return n.unwrapObservables?t3(e):e}const sn=function(e){if(arguments.length>1&&(e=[].slice.call(arguments)),!e||"this"===e)return function(n){return n};if("string"==typeof e){const n=cl(e);return function(t,i){const o=(i=EP(i)).functionsAsIs,r="defaultValue"in i;let c=iu(t,i);for(let v=0;v<n.length;v++){if(!c){if(null==c&&r)return i.defaultValue;break}const S=n[v];if(r&&dt(c)&&!(S in c))return i.defaultValue;let T=iu(c[S],i);!o&&Be(T)&&(T=T.call(c)),c=T}return c}}return Array.isArray(e)?function r3(e){const n={};for(let t=0,i=e.length;t<i;t++){const o=e[t];n[o]=sn(o)}return function(t,i){let o;return Ee(n,function(r){const c=this(t,i);if(void 0===c)return;let v=o||(o={});const S=r.split("."),T=S.length-1;for(let F=0;F<T;F++){const N=S[F];N in v||(v[N]={}),v=v[N]}v[S[T]]=c}),o}}(e):Be(e)?e:void 0},wP=function(e,n,t,i){if(Ie(t))return t;const o={};return IP(e,n,o,i),o},Uv=function(e){const n=(e=cl(e||"this")).length-1;return function(t,i,o){let r=iu(t,o=EP(o));e.forEach(function(c,v){let S=function(e,n,t){return iu("this"===n?e:e[n],t=t||{})}(r,c,o);const T=!o.functionsAsIs&&Be(S)&&!DP(S);v===n?o.merge&&lt(i)&&(!Ie(S)||lt(S))?(S=wP(r,c,S,o),nu(S,i,!1,!0)):T?r[c](i):IP(r,c,i,o):(S=wP(r,c,S,o),T&&(S=S.call(r)),r=S)})}},mr=function(e,n){var t;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Date)return e.getTime();if(e&&e instanceof Tt&&e.valueOf)return e.valueOf();if("case"!==(null==i||null===(t=i.collatorOptions)||void 0===t?void 0:t.sensitivity)&&!n&&"string"==typeof e){var r;if("base"===(null==i||null===(r=i.collatorOptions)||void 0===r?void 0:r.sensitivity)){const c=/[\u0300-\u036f]/g;e=e.normalize("NFD").replace(c,"")}return null!=i&&i.locale?e.toLocaleLowerCase(i.locale):e.toLowerCase()}return e},mn=function(e,n){return Ie(e)?e:n},PP=function(e,n){const t=new Ae,i=n||this,o={promise:t.promise(),abort:function(){clearTimeout(r),t.rejectWith(i)}},r=(arguments[2]||setTimeout)(function(){const c=e.call(i);c&&c.done&&Be(c.done)?c.done(function(){t.resolveWith(i)}):t.resolveWith(i)},"number"==typeof n?n:0);return o},$v=[],TP=[],ou=[];let ul;const gp=function(e,n,t){if(ul&&ul!==e)return $v.push(n),TP.push(e),t=t||new Ae,ou.push(t),t;{const i=ul,o=ou.length;ul=e;let r=n();return r||(ou.length>o?r=Ft.apply(this,ou.slice(o)):t&&t.resolve()),ul=i,t&&r&&r.done&&r.done(t.resolve).fail(t.reject),!ul&&$v.length&&("render"===TP.shift()?_r:Wv)($v.shift(),ou.shift()),r||Ft()}},_r=function(e,n){return gp("render",e,n)},Wv=function(e,n){return gp("update",e,n)},dl=function(e){return function(){const n=this;return gp("render",function(){return e.call(n)})}},MP=function(e){return function(){const n=this;return gp("update",function(){return e.call(n)})}},AP=function(e,n,t){const i=[];let o=0;return Ee(n,(r,c)=>{let v=0;const S=t?t(c):c;Ee(e,(T,F)=>{const N=S[T];if(void 0!==N)return s3(N,F)?void v++:(v=-1,!1)}),!(v<o)&&(v>o&&(i.length=0,o=v),i.push(c))}),i},s3=function(e,n){if(Array.isArray(e)&&Array.isArray(n)){let t=!1;return Ee(e,(i,o)=>{if(o!==n[i])return t=!0,!1}),!t}return e===n},ru=function(e){switch(Ki(e)){case"string":return e.split(/\s+/,2);case"object":return[e.x??e.h,e.y??e.v];case"number":return[e];case"array":return e;default:return null}},Gv=function(e,n){const t=ru(e);let i=n?parseFloat(t&&t[0]):parseInt(t&&t[0],10),o=n?parseFloat(t&&t[1]):parseInt(t&&t[1],10);return isFinite(i)||(i=0),isFinite(o)||(o=i),{h:i,v:o}},su=function(e){if(e instanceof Pn)return e.toString();if(dt(e)||Array.isArray(e))try{const n=JSON.stringify(e);return"{}"===n?e:n}catch{return e}return e},es=function(e){return e.replace(/[[\]{}\-()*+?.\\^$|\s]/g,"\\$&")},De=function(){},vr=function(e,n,t){const i=[];let o;const r=!t;for(let c=0;c<e.length;c++)o=!!n(e[c],c),o===r&&i.push(e[c]);return i},RP={maxDepth:3,strict:!0},Kv=(e,n,t,i)=>{const{strict:o,maxDepth:r}=i,c=mr(e,!0),v=mr(n,!0);switch(!0){case o?c===v:c==v:case t>=r:return!0;case dt(c)&&dt(v):return((e,n,t,i)=>{const o=Object.keys(e),r=Object.keys(n);if(o.length!==r.length)return!1;const c=new Set(r);return!o.some(v=>!c.has(v)||!Kv(e[v],n[v],t+1,i))})(c,v,t,i);case Array.isArray(c)&&Array.isArray(v):return((e,n,t,i)=>e.length===n.length&&!e.some((o,r)=>!Kv(o,n[r],t+1,He({},i,{strict:!0}))))(c,v,t,i);default:return!1}},ks=function(e,n){const i=He({},RP,arguments.length>2&&void 0!==arguments[2]?arguments[2]:RP);return Kv(e,n,0,i)},qv="dx-";let mp=null;function kP(e){try{return new CSSStyleSheet}catch{const t=e.ownerDocument.createElement("style");return e.appendChild(t),t.sheet}}function FP(e,n,t){for(let i=0;i<n.length;i++){const o=n[i];try{for(let r=0;r<o.cssRules.length;r++)d3(e,o.cssRules[r],t)}catch{}}}function d3(e,n,t){var i,o,r,c;(t||(null===(i=n.selectorText)||void 0===i?void 0:i.includes(qv))||(null===(o=n.cssRules)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.selectorText)||void 0===o?void 0:o.includes(qv))||(null===(r=n.name)||void 0===r?void 0:r.startsWith(qv))||"DXIcons"===(null===(c=n.style)||void 0===c?void 0:c.fontFamily))&&e.insertRule(n.cssText,e.cssRules.length)}function p3(e,n,t){const i=e.getBoundingClientRect();return i&&n>=i.left&&n<i.right&&t>=i.top&&t<i.bottom}const Pe=Zi({querySelectorAll:(e,n)=>e.querySelectorAll(n),elementMatches(e,n){return(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||(i=>{const o=e.document||e.ownerDocument;if(!o)return!1;const r=this.querySelectorAll(o,i);for(let c=0;c<r.length;c++)if(r[c]===e)return!0})).call(e,n)},createElement(e,n){return(n=n||this._document).createElement(e)},createElementNS(e,n,t){return(t=t||this._document).createElementNS(e,n)},createTextNode(e,n){return(n=n||this._document).createTextNode(e)},createAttribute(e,n){return(n=n||this._document).createAttribute(e)},isNode:e=>e&&"object"==typeof e&&"nodeType"in e&&"nodeName"in e,isElementNode:e=>e&&1===e.nodeType,isTextNode:e=>e&&3===e.nodeType,isDocument:e=>e&&9===e.nodeType,isDocumentFragment:e=>e&&11===e.nodeType,removeElement(e){const n=e&&e.parentNode;n&&n.removeChild(e)},insertElement(e,n,t){e&&n&&e!==n&&(t?e.insertBefore(n,t):e.appendChild(n))},getAttribute:(e,n)=>e.getAttribute(n),setAttribute(e,n,t){"style"===n?e.style.cssText=t:e.setAttribute(n,t)},removeAttribute(e,n){e.removeAttribute(n)},setProperty(e,n,t){e[n]=t},setText(e,n){e&&(e.textContent=n)},setClass(e,n,t){1===e.nodeType&&n&&(t?e.classList.add(n):e.classList.remove(n))},setStyle(e,n,t){e.style[n]=t||""},_document:typeof document>"u"?void 0:document,getDocument(){return this._document},getActiveElement(e){return this.getRootNode(e).activeElement},getRootNode(e){var n;return(null==e||null===(n=e.getRootNode)||void 0===n?void 0:n.call(e))??this._document},getBody(){return this._document.body},createDocumentFragment(){return this._document.createDocumentFragment()},getDocumentElement(){return this._document.documentElement},getLocation(){return this._document.location},getSelection(){return this._document.selection},getReadyState(){return this._document.readyState},getHead(){return this._document.head},hasDocumentProperty(e){return e in this._document},listen:(e,n,t,i)=>e&&"addEventListener"in e?(e.addEventListener(n,t,i),()=>{e.removeEventListener(n,t)}):De,elementsFromPoint(e,n,t){const i=this.getRootNode(t);return i.host?function g3(e,n,t){const i=function f3(){let e=0;const n=[];return{push(t){return n.push(t),this},shift:()=>(e++,n[e-1]),get length(){return n.length-e},get items(){return n}}}().push(t);for(;i.length;){const r=i.shift();for(let c=0;c<r.childNodes.length;c++){const v=r.childNodes[c];v.nodeType===Node.ELEMENT_NODE&&p3(v,e,n)&&"none"!==getComputedStyle(v).pointerEvents&&i.push(v)}}const o=i.items.reverse();return o.pop(),o}(e,n,i):i.elementsFromPoint(e,n)}});let Zv=typeof window<"u";const Ke=()=>Zv;let ts=Ke()?window:void 0;ts||(ts={},ts.window=ts);const ot=()=>ts,LP=e=>Ke()&&e in ts,hl=()=>Ke()?ts.navigator:{userAgent:""},_p=ot(),_3=["auto","none","inherit","initial"],Xv=function(e,n){let t=0;return n.forEach(function(i){t+=parseFloat(e[i])||0}),t},NP=function(e,n){const t="width"===e?"Left":"Top",i="width"===e?"Right":"Bottom";return{padding:Xv(n,["padding"+t,"padding"+i]),border:Xv(n,["border"+t+"Width","border"+i+"Width"]),margin:Xv(n,["margin"+t,"margin"+i])}},HP=function(e){var n;const t=(null==e||null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||_p;return t.getComputedStyle&&t.getComputedStyle(e)},Yv=function(e,n,t,i){var o;return n?.[t]||(null===(o=e.style)||void 0===o?void 0:o[t])||i},pl={content:0,padding:1,border:2,margin:3,"content-box":0,"border-box":2},BP={width:["left","right"],height:["top","bottom"]};function au(e,n,t,i){const o=(c,v,S)=>parseFloat(Yv(c,v,S,"0"))||0,r="border"===t?"-width":"";return o(e,i,`${t}-${BP[n][0]}${r}`)+o(e,i,`${t}-${BP[n][1]}${r}`)}const VP=function(e,n,t){return e?_3.indexOf(e)>-1?n?null:e:(_t(e)&&(e=function(e,n,t){return e.indexOf("px")>0?e=parseInt(e.replace("px","")):e.indexOf("%")>0?e=parseInt(e.replace("%",""))*function(e){return $t(e)?e.innerHeight:e.offsetHeight}(n)/100:isNaN(e)?e.indexOf("vh")>0?e=_p.innerHeight/100*parseInt(e.replace("vh","")):t&&e.indexOf("em")>0&&(e=parseFloat(e.replace("em",""))*parseFloat(_p.getComputedStyle(t).fontSize)):e=parseInt(e),e}(e,t)),rn(e)?Math.max(0,e+n):"calc("+e+(n<0?" - ":" ")+Math.abs(n)+"px)"):null},O3=function(e,n,t){const i=VP(e,n,t);return null!==i?i:0},Qv=function(e,n){if(!e)return 0;const t=NP("height",_p.getComputedStyle(e));return t.padding+t.border+(n?t.margin:0)},zP=function(e){if(e){const n=e.getBoundingClientRect();if(n.height)return n.height}return 0};function Yi(e,n,t){return 2===arguments.length?ey(n,e):ey(n,e,t)}const Xe=e=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("width",...n)}(e),Jv=(e,n)=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("width",...n)}(e,n),ut=e=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("height",...n)}(e),lu=(e,n)=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("height",...n)}(e,n),qt=(e,n)=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("outerWidth",...n)}(e,n||!1),et=(e,n)=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("outerHeight",...n)}(e,n||!1),jP=e=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("innerWidth",...n)}(e),UP=e=>function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Yi("innerHeight",...n)}(e),ey=function(e,n,t){const i=n.toLowerCase().indexOf("width")>=0?"Width":"Height",o=i.toLowerCase(),r=0===n.indexOf("outer"),c=0===n.indexOf("inner"),v=2===arguments.length||"boolean"==typeof t;if(qi(e)){if(e.length>1&&!v){for(let S=0;S<e.length;S++)ey(e[S],n,t);return}e=e[0]}if(e){if($t(e))return r?e["inner"+i]:Pe.getDocumentElement()["client"+i];if(Pe.isDocument(e)){const S=Pe.getDocumentElement(),T=Pe.getBody();return Math.max(T["scroll"+i],T["offset"+i],S["scroll"+i],S["offset"+i],S["client"+i])}if(v){let S="content";return r&&(S=t?"margin":"border"),c&&(S="padding"),function(e,n,t){const i="width"===n?"offsetWidth":"offsetHeight",o=HP(e);let r=Yv(e,o,n);(""===r||"auto"===r)&&(r=e[i]),r=parseFloat(r)||0;const c=Yv(e,o,"boxSizing","content-box");let S=pl[t||c],T=pl[c];if(void 0===S||void 0===T)throw new Error;if(T===S)return r;const F=Math.sign(S-T);let N=!1,B=!1,X=!1,ne=!1;1===F&&(S+=1,T+=1);for(let le=T;le!==S;le+=F)switch(le){case pl.content:break;case pl.padding:N=F*au(e,n,"padding",o);break;case pl.border:B=F*au(e,n,"border",o);break;case pl.margin:X=F*au(e,n,"margin",o)}if(N||B){const le=(!1===N?F*au(e,n,"padding",o):N)+(!1===B?F*au(e,n,"border",o):B);ne=F*Math.max(0,Math.floor(e[i]-r-F*le))||0}return r+X+N+B+ne}(e,o,S)}if(rn(t)){const S=HP(e),T=NP(o,S),F="border-box"===S.boxSizing;t=Number(t),r?t-=F?0:T.border+T.padding:c?t+=F?T.border:-T.padding:F&&(t+=T.border+T.padding)}return t+=rn(t)?"px":"",Pe.setStyle(e,o,t),null}},$P=e=>$t(e)?e:e.defaultView,cu=e=>{if(!e.getClientRects().length)return{top:0,left:0};const n=e.getBoundingClientRect(),t=$P(e.ownerDocument),i=e.ownerDocument.documentElement;return{top:n.top+t.pageYOffset-i.clientTop,left:n.left+t.pageXOffset-i.clientLeft}};class ty{constructor(){this.memory=[],this.callbacks=bt()}add(n){Ee(this.memory,(t,i)=>n.apply(n,i)),this.callbacks.add(n)}remove(n){this.callbacks.remove(n)}fire(){for(var n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];this.memory.push(t),this.callbacks.fire.apply(this.callbacks,t)}}const ny=new ty,iy=e=>{var n,t;const i=e.originalEvent;if(!i)return e.target;if(null===(n=i.target)||void 0===n||!n.shadowRoot)return i.target;const r=i.path??(null===(t=i.composedPath)||void 0===t?void 0:t.call(i));return r?.[0]??e.target},b3=["pageX","pageY","screenX","screenY","clientX","clientY"],zo=function(e){let n,t=function(){return n=e.apply(this,arguments),t=function(){return n},n};return function(){return t.apply(this,arguments)}},oy=ot(),vp="dxEmptyEventType",WP={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},I3={focusin:"focus",focusout:"blur"},E3=["blur","focus","load"],GP=["touchmove","wheel","mousewheel","touchstart"];function P3(e,n){return!$t(e)&&"#document"!==e.nodeName&&Pe.elementMatches(e,n)}const ry=new WeakMap;let yp,KP=0;const ns=function(){const e={};return ny.add(function(n,t){e[n]=t}),{getField:function(n,t){return e[n]&&e[n][t]},callMethod:function(n,t,i,o){return e[n]&&e[n][t]&&e[n][t].apply(i,o)}}}(),Xt=Zi({on:uu(ay(QP(function(e,n,t,i,o){fl(e,n).addHandler(o,t,i)}))),one:uu(ay(function(e,n,t,i,o){const r=function(){Xt.off(e,n,t,r),o.apply(this,arguments)};Xt.on(e,n,t,i,r)})),off:uu(function A3(e){return function(n,t,i,o){"function"==typeof i&&(o=i,i=void 0),e(n,t,i,o)}}(QP(function(e,n,t,i){fl(e,n).removeHandler(i,t)}))),trigger:uu(YP(function(e,n,t){const i=n.type,o=fl(e,n.type);if(ns.callMethod(i,"trigger",e,[n,t]),o.callHandlers(n,t),!ns.getField(i,"noBubble")&&!n.isPropagationStopped()&&-1===E3.indexOf(i)){const c=[],v=function(T){const F=T.parentNode??(dt(T.host)?T.host:null);F&&(c.push(F),v(F))};v(e),c.push(oy);let S=0;for(;c[S]&&!n.isPropagationStopped();)fl(c[S],n.type).callHandlers(pe(n,{currentTarget:c[S]}),t),S++}(e.nodeType||$t(e))&&(ns.callMethod(i,"_default",e,[n,t]),function k3(e,n){const t=I3[e]||e;(function(i,o){return"click"===i&&"a"===o.localName})(e,n)||Be(n[t])&&(yp=e,n[t](),yp=void 0)}(i,e))})),triggerHandler:uu(YP(function(e,n,t){fl(e,n.type).callHandlers(n,t)}))});function sy(e,n){const t=e[0];if(t)if(Pe.isNode(t)||$t(t))n.apply(Xt,e);else{if(_t(t)||!("length"in t))throw vt.Error("E0025");{const i=Array.prototype.slice.call(e,0);Array.prototype.forEach.call(t,function(o){i[0]=o,sy(i,n)})}}}function uu(e){return function(){sy(arguments,e)}}const qP=zo(function T3(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){return e=!0,!0}});oy.addEventListener("test",null,n)}catch{}return e}),ZP=(e,n)=>$t(e)?ZP(e.document,n):e.contains?e.contains(n):!!(n.compareDocumentPosition(e)&n.DOCUMENT_POSITION_CONTAINS);function fl(e,n){let t=ry.get(e);const i=(n=n||"").split("."),o=i.slice(1),r=!!i[0];n=i[0]||vp,t||(t={},ry.set(e,t)),t[n]||(t[n]={handleObjects:[],nativeHandler:null});const c=t[n];return{addHandler:function(v,S,T){const F=function(le,he){const Oe=[le],_e=le.currentTarget,ke=le.relatedTarget;let Ne,We;n in WP&&(Ne=ke&&_e&&(ke===_e||ZP(_e,ke))),void 0!==he&&Oe.push(he),ns.callMethod(n,"handle",e,[le,T]),Ne||(We=v.apply(_e,Oe)),!1===We&&(le.preventDefault(),le.stopPropagation())},N={handler:v,wrappedHandler:function(le,he){if(!yp||le.type!==yp)if(le.data=T,le.delegateTarget=e,S){let _e=le.target;for(;_e&&_e!==e;)P3(_e,S)&&(le.currentTarget=_e,F(le,he)),_e=_e.parentNode}else{var Oe;if(le.currentTarget=le.delegateTarget||le.target,null!==(Oe=le.target)&&void 0!==Oe&&Oe.shadowRoot){const ke=iy(le);le.target=ke}F(le,he)}},selector:S,type:n,data:T,namespace:o.join("."),namespaces:o,guid:++KP};c.handleObjects.push(N);let ne,X=1===c.handleObjects.length&&r;X&&(X=!ns.callMethod(n,"setup",e,[T,o,v])),X&&(c.nativeHandler=function M3(e){return function(n,t){const i=fl(this,e);n=Xt.Event(n),i.callHandlers(n,t)}}(n),qP()&&GP.indexOf(n)>-1&&(ne={passive:!1}),c.removeListener=Pe.listen(e,WP[n]||n,c.nativeHandler,ne)),ns.callMethod(n,"add",e,[N])},removeHandler:function(v,S){const T=function(N){const B=t[N];if(!B.handleObjects.length)return void delete t[N];let X;B.handleObjects=B.handleObjects.filter(function(he){const Oe=o.length&&!XP(he.namespaces,o)||v&&he.handler!==v||S&&he.selector!==S;return Oe||(X=he.handler,ns.callMethod(N,"remove",e,[he])),Oe}),!B.handleObjects.length&&N!==vp&&(ns.callMethod(N,"teardown",e,[o,X]),B.nativeHandler&&B.removeListener(),delete t[N])};if(r)T(n);else for(const N in t)T(N);0===Object.keys(t).length&&ry.delete(e)},callHandlers:function(v,S){let T=!1;const F=function(N){T||(!o.length||XP(N.namespaces,o))&&(N.wrappedHandler(v,S),T=v.isImmediatePropagationStopped())};c.handleObjects.forEach(F),o.length&&t[vp]&&t[vp].handleObjects.forEach(F)}}}function XP(e,n){for(let t=0;t<n.length;t++)if(e.indexOf(n[t])<0)return!1;return!0}function ay(e){return function(n,t,i,o,r){r||(r=o,o=void 0),"string"!=typeof i&&(o=i,i=void 0),!r&&"string"==typeof t&&(r=o||i,i=void 0,o=void 0),e(n,t,i,o,r)}}function YP(e){return function(n,t,i){"string"==typeof t&&(t={type:t}),t.target||(t.target=n),t.currentTarget=n,t.delegateTarget||(t.delegateTarget=n),!t.type&&t.originalEvent&&(t.type=t.originalEvent.type),e(n,t instanceof Xt.Event?t:Xt.Event(t),i)}}function QP(e){const n=function(t,i){if(i&&i.indexOf(" ")>-1){const o=Array.prototype.slice.call(arguments,0);i.split(" ").forEach(function(r){o[1]=r,e.apply(this,o)})}else e.apply(this,arguments)};return function(t,i){if("object"==typeof i){const o=Array.prototype.slice.call(arguments,0);for(const r in i)o[1]=r,o[o.length-1]=i[r],n.apply(this,o)}else n.apply(this,arguments)}}function F3(e){return null==(n=e).which&&0===n.type.indexOf("key")?null!=e.charCode?e.charCode:e.keyCode:function(n){return!n.which&&void 0!==n.button&&/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(n.type)}(e)?{1:1,2:3,3:1,4:2}[e.button]:e.which;var n}function JP(e){e&&(Xt.Event=e,Xt.Event.prototype=e.prototype)}function ly(e,n,t){Object.defineProperty(t||Xt.Event.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent&&n(this.originalEvent)},set:function(i){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:i})}})}JP(function R3(e){return Xt.Event=function(n,t){if(!(this instanceof Xt.Event))return new Xt.Event(n,t);n||(n={}),"string"==typeof n&&(n={type:n}),t||(t={}),e.call(this,n,t)},Object.assign(Xt.Event.prototype,{_propagationStopped:!1,_immediatePropagationStopped:!1,_defaultPrevented:!1,isPropagationStopped:function(){return!!(this._propagationStopped||this.originalEvent&&this.originalEvent.propagationStopped)},stopPropagation:function(){this._propagationStopped=!0,this.originalEvent&&this.originalEvent.stopPropagation()},isImmediatePropagationStopped:function(){return this._immediatePropagationStopped},stopImmediatePropagation:function(){this.stopPropagation(),this._immediatePropagationStopped=!0,this.originalEvent&&this.originalEvent.stopImmediatePropagation()},isDefaultPrevented:function(){return!!(this._defaultPrevented||this.originalEvent&&this.originalEvent.defaultPrevented)},preventDefault:function(){this._defaultPrevented=!0,this.originalEvent&&this.originalEvent.preventDefault()}}),Xt.Event}(function(e,n){var t;e instanceof Xt.Event||Ke()&&e instanceof oy.Event||(null===(t=e.view)||void 0===t?void 0:t.Event)&&e instanceof e.view.Event?(this.originalEvent=e,this.type=e.type,this.currentTarget=void 0,Object.prototype.hasOwnProperty.call(e,"isTrusted")&&(this.isTrusted=e.isTrusted),this.timeStamp=e.timeStamp||Date.now()):Object.assign(this,e),ly("which",F3,this),0===e.type.indexOf("touch")&&(delete n.pageX,delete n.pageY),Object.assign(this,n),this.guid=++KP})),["target","relatedTarget","delegateTarget","altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","offsetX","offsetY","pointerId","pointerType","targetTouches","toElement","touches"].forEach(e=>ly(e,n=>n[e])),function D3(e){b3.forEach(function(n){e(n,function(t){return function(e,n){if(n[e]&&!n.touches||!n.touches)return n[e];const t=n.touches.length?n.touches:n.changedTouches;return t.length?t[0][e]:void 0}(n,t)})},this)}(ly);const eT=bt(),tT=bt();Xt.set=function(e){eT.fire(),Xt.inject(e),JP(e.Event),tT.fire()},Xt.subscribeGlobal=function(){sy(arguments,ay(function(){const e=arguments;Xt.on.apply(this,e),eT.add(function(){const n=Array.prototype.slice.call(e,0);n.splice(3,1),Xt.off.apply(this,n)}),tT.add(function(){Xt.on.apply(this,e)})}))},Xt.forcePassiveFalseEventNames=GP,Xt.passiveEventHandlersSupported=qP;const ue=Xt,du=new WeakMap;let yr;const L3=new ty;let nT=function(){};function Yt(){return yr.data.apply(this,arguments)}function Cp(e,n){return yr.removeData.call(this,e,n)}function hu(e,n){if(!Pe.isElementNode(e))return;const t=e.getElementsByTagName("*");yr.cleanData(t),n&&yr.cleanData([e])}!function(e){L3.fire(e),yr=e;const n=yr.cleanData;yr.cleanData=function(t){nT(t);return n.call(this,t)}}({data:function(){const e=arguments[0],n=arguments[1],t=arguments[2];if(!e)return;let i=du.get(e);return i||(i={},du.set(e,i)),void 0===n?i:2===arguments.length?i[n]:(i[n]=t,t)},removeData:function(e,n){if(e)if(void 0===n)du.delete(e);else{const t=du.get(e);t&&delete t[n]}},cleanData:function(e){for(let n=0;n<e.length;n++)ue.off(e[n]),du.delete(e[n])}});const oT=function(e){return null==e?"":String(e)},cy=function(e){return oT(e).charAt(0).toUpperCase()+e.substr(1)},uy=function(e){return oT(e).replace(/([a-z\d])([A-Z])/g,"$1 $2").split(/[\s_-]+/)},dy=function(e){return ni(uy(e),function(n){return n.toLowerCase()}).join("-")},pu=function(e,n){return ni(uy(e),function(t,i){return t=t.toLowerCase(),(n||i>0)&&(t=cy(t)),t}).join("")},fu=function(e){return ni(uy(e),function(n){return cy(n.toLowerCase())}).join(" ")},xp=["","Webkit","Moz","O","Ms"],V3={"":"",Webkit:"-webkit-",Moz:"-moz-",O:"-o-",ms:"-ms-"},hy=zo(function(){return Pe.createElement("dx").style}),gl=function(e){if(e in hy())return e;const n=e;e=e.charAt(0).toUpperCase()+e.substr(1);for(let t=1;t<xp.length;t++){const i=xp[t].toLowerCase()+e;if(i in hy())return i}return n},j3=function(e){return function(e,n){let t;e=pu(e,!0);for(let i=0,o=xp.length;i<o;i++){const r=xp[i],c=r+e;if(t=n(pu(c),r),void 0===t&&(t=n(c,r)),void 0!==t)break}return t||""}(e,function(n,t){if(n in hy())return V3[t]})},U3=["fillOpacity","columnCount","flexGrow","flexShrink","fontWeight","lineHeight","opacity","zIndex","zoom"],Op=function(e,n){return rn(n)&&-1===U3.indexOf(e)&&(n+="px"),n},sT=/<([a-z][^/\0>\x20\t\r\n\f]+)/i,jo={default:{tagsCount:0,startTags:"",endTags:""},thead:{tagsCount:1,startTags:"<table>",endTags:"</table>"},td:{tagsCount:3,startTags:"<table><tbody><tr>",endTags:"</tr></tbody></table>"},col:{tagsCount:2,startTags:"<table><colgroup>",endTags:"</colgroup></table>"},tr:{tagsCount:2,startTags:"<table><tbody>",endTags:"</tbody></table>"}};jo.tbody=jo.colgroup=jo.caption=jo.tfoot=jo.thead,jo.th=jo.td;const py=function(e){if("string"!=typeof e)return null;let t=Pe.createDocumentFragment().appendChild(Pe.createElement("div"));const i=sT.exec(e),o=i&&i[1].toLowerCase(),r=jo[o]||jo.default;t.innerHTML=r.startTags+e+r.endTags;for(let c=0;c<r.tagsCount;c++)t=t.lastChild;return[...t.childNodes]},G3=ot();let rt;const $e=function(e,n){return e?"string"==typeof e?"body"===e?(this[0]=n?n.body:Pe.getBody(),this.length=1,this):(n=n||Pe.getDocument(),"<"===e[0]?(this[0]=Pe.createElement(e.slice(1,-1),n),this.length=1,this):([].push.apply(this,Pe.querySelectorAll(n,e)),this)):Pe.isNode(e)||$t(e)?(this[0]=e,this.length=1,this):Array.isArray(e)?([].push.apply(this,e),this):rt(e.toArray?e.toArray():[e]):(this.length=0,this)};rt=function(e,n){return new $e(e,n)},rt.fn={dxRenderer:!0};const ml=function(e,n){for(let t=0;t<this.length;t++){const i=rt(this[t]);i[e].apply(i,n)}return this},fy=function(e,n,t){null!=t&&!1!==t?Pe.setAttribute(e,n,t):Pe.removeAttribute(e,n)};($e.prototype=rt.fn).show=function(){return this.toggle(!0)},$e.prototype.hide=function(){return this.toggle(!1)},$e.prototype.toggle=function(e){return this[0]&&this.toggleClass("dx-state-invisible",!e),this},$e.prototype.attr=function(e,n){if(this.length>1&&arguments.length>1)return ml.call(this,"attr",arguments);if(!this[0])return dt(e)||void 0!==n?this:void 0;if(!this[0].getAttribute)return this.prop(e,n);if("string"==typeof e&&1===arguments.length)return this[0].getAttribute(e)??void 0;if(lt(e))for(const t in e)this.attr(t,e[t]);else fy(this[0],e,n);return this},$e.prototype.removeAttr=function(e){return this[0]&&Pe.removeAttribute(this[0],e),this},$e.prototype.prop=function(e,n){if(!this[0])return this;if("string"==typeof e&&1===arguments.length)return this[0][e];if(lt(e))for(const t in e)this.prop(t,e[t]);else Pe.setProperty(this[0],e,n);return this},$e.prototype.addClass=function(e){return this.toggleClass(e,!0)},$e.prototype.removeClass=function(e){return this.toggleClass(e,!1)},$e.prototype.hasClass=function(e){if(!this[0]||void 0===this[0].className)return!1;const n=e.split(" ");for(let t=0;t<n.length;t++)if(this[0].classList){if(this[0].classList.contains(n[t]))return!0}else if(((_t(this[0].className)?this[0].className:Pe.getAttribute(this[0],"class"))||"").split(" ").indexOf(n[t])>=0)return!0;return!1},$e.prototype.toggleClass=function(e,n){if(this.length>1)return ml.call(this,"toggleClass",arguments);if(!this[0]||!e)return this;n=void 0===n?!this.hasClass(e):n;const t=e.split(" ");for(let i=0;i<t.length;i++)Pe.setClass(this[0],t[i],n);return this},$e.prototype.html=function(e){return arguments.length?(this.empty(),"string"==typeof e&&!function(e){const n=sT.exec(e);return n&&n[1]in jo}(e)||"number"==typeof e?(this[0].innerHTML=e,this):this.append(py(e))):this[0].innerHTML};const aT=function(e,n){if(this[0]&&e){"string"==typeof e?e=py(e):e.nodeType?e=[e]:rn(e)&&(e=[Pe.createTextNode(e)]);for(let t=0;t<e.length;t++){const i=e[t];let o=this[0];"TABLE"===o.tagName&&"TR"===i.tagName&&o.tBodies&&o.tBodies.length&&(o=o.tBodies[0]),Pe.insertElement(o,i.nodeType?i:i[0],n)}}},lT=function(e,n){if(this[0]&&this[0].style&&!(null===n||"number"==typeof n&&isNaN(n))){e=gl(e);for(let t=0;t<this.length;t++)this[t].style[e]=Op(e,n)}};$e.prototype.css=function(e,n){if(_t(e)){if(2!==arguments.length){if(!this[0])return;e=gl(e);const t=G3.getComputedStyle(this[0])[e]||this[0].style[e];return rn(t)?t.toString():t}lT.call(this,e,n)}else if(lt(e))for(const t in e)lT.call(this,t,e[t]);return this},$e.prototype.prepend=function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.prepend(arguments[n]);return this}return aT.apply(this,[e,this[0].firstChild]),this},$e.prototype.append=function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.append(arguments[n]);return this}return aT.apply(this,[e]),this},$e.prototype.prependTo=function(e){if(this.length>1){for(let n=this.length-1;n>=0;n--)rt(this[n]).prependTo(e);return this}return(e=rt(e))[0]&&Pe.insertElement(e[0],this[0],e[0].firstChild),this},$e.prototype.appendTo=function(e){return this.length>1?ml.call(this,"appendTo",arguments):(Pe.insertElement(rt(e)[0],this[0]),this)},$e.prototype.insertBefore=function(e){return e&&e[0]&&Pe.insertElement(e[0].parentNode,this[0],e[0]),this},$e.prototype.insertAfter=function(e){return e&&e[0]&&Pe.insertElement(e[0].parentNode,this[0],e[0].nextSibling),this},$e.prototype.before=function(e){return this[0]&&Pe.insertElement(this[0].parentNode,e[0],this[0]),this},$e.prototype.after=function(e){return this[0]&&Pe.insertElement(this[0].parentNode,e[0],this[0].nextSibling),this},$e.prototype.wrap=function(e){if(this[0]){const n=rt(e);n.insertBefore(this),n.append(this)}return this},$e.prototype.wrapInner=function(e){const n=this.contents();return n.length?n.wrap(e):this.append(e),this},$e.prototype.replaceWith=function(e){if(e&&e[0])return e.is(this)?this:(e.insertBefore(this),this.remove(),e)},$e.prototype.remove=function(){return this.length>1?ml.call(this,"remove",arguments):(hu(this[0],!0),Pe.removeElement(this[0]),this)},$e.prototype.detach=function(){return this.length>1?ml.call(this,"detach",arguments):(Pe.removeElement(this[0]),this)},$e.prototype.empty=function(){return this.length>1?ml.call(this,"empty",arguments):(hu(this[0]),Pe.setText(this[0],""),this)},$e.prototype.clone=function(){const e=[];for(let n=0;n<this.length;n++)e.push(this[n].cloneNode(!0));return rt(e)},$e.prototype.text=function(e){if(!arguments.length){let t="";for(let i=0;i<this.length;i++)t+=this[i]&&this[i].textContent||"";return t}const n=Be(e)?e():e;return hu(this[0],!1),Pe.setText(this[0],Ie(n)?n:""),this},$e.prototype.val=function(e){return 1===arguments.length?this.prop("value",Ie(e)?e:""):this.prop("value")},$e.prototype.contents=function(){if(!this[0])return rt();const e=[];return e.push.apply(e,this[0].childNodes),rt(e)},$e.prototype.find=function(e){const n=rt();if(!e)return n;const t=[];let i;if("string"==typeof e)for(e=e.trim(),i=0;i<this.length;i++){const o=this[i];if(Pe.isElementNode(o)){const r=o.getAttribute("id");let c=r||"dx-query-children";r||fy(o,"id",c),c="[id='"+c+"'] ";const v=c+e.replace(/([^\\])(,)/g,"$1, "+c);t.push.apply(t,Pe.querySelectorAll(o,v)),fy(o,"id",r)}else(Pe.isDocument(o)||Pe.isDocumentFragment(o))&&t.push.apply(t,Pe.querySelectorAll(o,e))}else for(i=0;i<this.length;i++)e=Pe.isNode(e)?e:e[0],this[i]!==e&&this[i].contains(e)&&t.push(e);return n.add(t)};const cT=function(e,n){return!(n=n.host??n).nodeType||!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)};$e.prototype.filter=function(e){if(!e)return rt();if(":visible"===e)return this.filter(cT);if(":hidden"===e)return this.filter(function(t,i){return!cT(0,i)});const n=[];for(let t=0;t<this.length;t++){const i=this[t];if(Pe.isElementNode(i)&&"string"===Ki(e))Pe.elementMatches(i,e)&&n.push(i);else if(Pe.isNode(e)||$t(e))e===i&&n.push(i);else if(Be(e))e.call(i,t,i)&&n.push(i);else for(let o=0;o<e.length;o++)e[o]===i&&n.push(i)}return rt(n)},$e.prototype.not=function(e){const n=[],t=this.filter(e).toArray();for(let i=0;i<this.length;i++)-1===t.indexOf(this[i])&&n.push(this[i]);return rt(n)},$e.prototype.is=function(e){return!!this.filter(e).length},$e.prototype.children=function(e){let n=[];for(let t=0;t<this.length;t++){const i=this[t]?this[t].childNodes:[];for(let o=0;o<i.length;o++)Pe.isElementNode(i[o])&&n.push(i[o])}return n=rt(n),e?n.filter(e):n},$e.prototype.siblings=function(){const e=this[0];if(!e||!e.parentNode)return rt();const n=[],t=e.parentNode.childNodes||[];for(let i=0;i<t.length;i++){const o=t[i];Pe.isElementNode(o)&&o!==e&&n.push(o)}return rt(n)},$e.prototype.each=function(e){for(let n=0;n<this.length&&!1!==e.call(this[n],n,this[n]);n++);},$e.prototype.index=function(e){return e?(e=rt(e),this.toArray().indexOf(e[0])):this.parent().children().index(this)},$e.prototype.get=function(e){return this[e<0?this.length+e:e]},$e.prototype.eq=function(e){return rt(this[e=e<0?this.length+e:e])},$e.prototype.first=function(){return this.eq(0)},$e.prototype.last=function(){return this.eq(-1)},$e.prototype.select=function(){for(let e=0;e<this.length;e+=1)this[e].select&&this[e].select();return this},$e.prototype.parent=function(e){if(!this[0])return rt();const n=rt(this[0].parentNode);return!e||n.is(e)?n:rt()},$e.prototype.parents=function(e){const n=[];let t=this.parent();for(;t&&t[0]&&!Pe.isDocument(t[0]);)Pe.isElementNode(t[0])&&(!e||t.is(e))&&n.push(t.get(0)),t=t.parent();return rt(n)},$e.prototype.closest=function(e){if(this.is(e))return this;let n=this.parent();for(;n&&n.length;){if(n.is(e))return n;n=n.parent()}return rt()},$e.prototype.next=function(e){if(!this[0])return rt();let n=rt(this[0].nextSibling);if(!arguments.length)return n;for(;n&&n.length;){if(n.is(e))return n;n=n.next()}return rt()},$e.prototype.prev=function(){return this[0]?rt(this[0].previousSibling):rt()},$e.prototype.add=function(e){const n=rt(e),t=this.toArray();for(let i=0;i<n.length;i++){const o=n[i];-1===t.indexOf(o)&&t.push(o)}return rt(t)};const gy=[];$e.prototype.splice=function(){return rt(gy.splice.apply(this,arguments))},$e.prototype.slice=function(){return rt(gy.slice.apply(this,arguments))},$e.prototype.toArray=function(){return gy.slice.call(this)},$e.prototype.offset=function(){if(this[0])return cu(this[0])},$e.prototype.offsetParent=function(){if(!this[0])return rt();let e=rt(this[0].offsetParent);for(;e[0]&&"static"===e.css("position");)e=rt(e[0].offsetParent);return e=e[0]?e:rt(Pe.getDocumentElement()),e},$e.prototype.position=function(){if(!this[0])return;let e;const n=parseFloat(this.css("marginTop")),t=parseFloat(this.css("marginLeft"));if("fixed"===this.css("position"))return e=this[0].getBoundingClientRect(),{top:e.top-n,left:e.left-t};e=this.offset();const i=this.offsetParent();let o={top:0,left:0};return"HTML"!==i[0].nodeName&&(o=i.offset()),o={top:o.top+parseFloat(i.css("borderTopWidth")),left:o.left+parseFloat(i.css("borderLeftWidth"))},{top:e.top-o.top-n,left:e.left-o.left-t}},[{name:"scrollLeft",offsetProp:"pageXOffset",scrollWindow:function(e,n){e.scrollTo(n,e.pageYOffset)}},{name:"scrollTop",offsetProp:"pageYOffset",scrollWindow:function(e,n){e.scrollTo(e.pageXOffset,n)}}].forEach(function(e){const n=e.name;$e.prototype[n]=function(t){if(!this[0])return;const i=$P(this[0]);return void 0===t?i?i[e.offsetProp]:this[0][n]:(i?e.scrollWindow(i,t):this[0][n]=t,this)}}),$e.prototype.data=function(e,n){if(this[0])return arguments.length<2?Yt.call(rt,this[0],e):(Yt.call(rt,this[0],e,n),this)},$e.prototype.removeData=function(e){return this[0]&&Cp(this[0],e),this};const uT=function(){return rt.apply(this,arguments)};Object.defineProperty(uT,"fn",{enumerable:!0,configurable:!0,get:function(){return rt.fn},set:function(e){rt.fn=e}});const V=uT;let _l=(()=>{class e{constructor(t,i){i=i||{},this._action=t,this._context=i.context||ot(),this._beforeExecute=i.beforeExecute,this._afterExecute=i.afterExecute,this._component=i.component,this._validatingTargetName=i.validatingTargetName;const o=this._excludeValidators={};if(i.excludeValidators)for(let r=0;r<i.excludeValidators.length;r++)o[i.excludeValidators[r]]=!0}execute(){const t={action:this._action,args:Array.prototype.slice.call(arguments),context:this._context,component:this._component,validatingTargetName:this._validatingTargetName,cancel:!1,handled:!1},i=this._beforeExecute,o=this._afterExecute,r=t.args[0]||{};if(!this._validateAction(t)||(i?.call(this._context,t),t.cancel))return;const c=this._executeAction(t);return r.cancel?void 0:(o?.call(this._context,t),c)}_validateAction(t){const i=this._excludeValidators,{executors:o}=e;for(const c in o)if(!i[c]){var r;const v=o[c];if(null===(r=v.validate)||void 0===r||r.call(v,t),t.cancel)return!1}return!0}_executeAction(t){let i;const{executors:o}=e;for(const c in o){var r;const v=o[c];if(null===(r=v.execute)||void 0===r||r.call(v,t),t.handled){i=t.result;break}}return i}static registerExecutor(t,i){lt(t)?Ee(t,e.registerExecutor):e.executors[t]=i}static unregisterExecutor(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];Ee(i,function(){delete e.executors[this]})}}return e.executors={},e})();const dT=e=>n=>{if(!n.args.length)return;const t=n.args[0],i=t[n.validatingTargetName]||t.element;i&&e(V(i))&&(n.cancel=!0)};_l.registerExecutor({disabled:{validate:dT(e=>e.is(".dx-state-disabled, .dx-state-disabled *"))},readOnly:{validate:dT(e=>e.is(".dx-state-readonly, .dx-state-readonly *:not(.dx-state-independent)"))},undefined:{execute:e=>{e.action||(e.result=void 0,e.handled=!0)}},func:{execute:e=>{Be(e.action)&&(e.result=e.action.call(e.context,e.args[0]),e.handled=!0)}}});let my=[];const K3=zo(()=>{const e=Pe.listen(Pe.getDocument(),"DOMContentLoaded",()=>{hT.fire(),e()})}),hT={add:e=>{const n=Ke();n&&"loading"!==Pe.getReadyState()?e():(my.push(e),n&&K3())},fire:()=>{my.forEach(e=>e()),my=[]}},Qi=Zi(hT),gu=function(){let e;const n=bt(),t=n.add,i=n.remove;if(!Ke())return n;const o=function(){const S=ot();return{width:S.innerWidth,height:S.innerHeight}},r=function(){const S=o();if(S.width===e.width&&S.height===e.height)return;let T;S.width===e.width&&(T="height"),S.height===e.height&&(T="width"),e=S,n.fire(T)},c=zo(function(){e=o()});let v;return n.add=function(){const S=t.apply(n,arguments);return c(),Qi.add(function(){!v&&n.has()&&(v=Pe.listen(ot(),"resize",r))}),S},n.remove=function(){const S=i.apply(n,arguments);return!n.has()&&v&&(v(),v=void 0),S},n}();class Fs{constructor(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._events={},this._owner=n,this._options=t}static create(n,t){return t?Be(t)?t(n):t:new Fs(n)}hasEvent(n){const t=this._events[n];return!!t&&t.has()}fireEvent(n,t){const i=this._events[n];return i&&i.fireWith(this._owner,t),this._owner}on(n,t){if(lt(n))Ee(n,(i,o)=>{this.on(i,o)});else{let i=this._events[n];i||(i=bt({syncStrategy:this._options.syncStrategy}),this._events[n]=i),(i.originalAdd||i.add).call(i,t)}}off(n,t){const i=this._events[n];i&&(Be(t)?i.remove(t):i.empty())}dispose(){Ee(this._events,(n,t)=>{t.empty()})}}const X3=ot(),Q3=Qi.add,bp=bt();let pT=V();const Ls=function(){let e;return function(n){if(!arguments.length)return e;const t=V(n);pT=t;const i=!!t.length,o=Ls();e=i?t:V("body"),bp.fire(i?Ls():V(),o)}}();function fT(){return pT}Q3(function(){Ls(".dx-viewport")});const gT=ot(),J3={iPhone:"iPhone",iPhone5:"iPhone",iPhone6:"iPhone",iPhone6plus:"iPhone",iPad:"iPad",iPadMini:"iPad Mini",androidPhone:"Android Mobile",androidTablet:"Android",msSurface:"Windows ARM Tablet PC",desktop:"desktop"},mT={deviceType:"desktop",platform:"generic",version:[],phone:!1,tablet:!1,android:!1,ios:!1,generic:!0,grade:"A",mac:!1},_y={generic(e){const n=/windows phone/i.test(e)||e.match(/WPDesktop/),t=!n&&/Windows(.*)arm(.*)Tablet PC/i.test(e),i=!n&&!t&&/msapphost/i.test(e),o=/((intel|ppc) mac os x)/.test(e.toLowerCase());return n||t||i||o?{deviceType:n?"phone":t?"tablet":"desktop",platform:"generic",version:[],grade:"A",mac:o}:null},appleTouchDevice(e){const n=hl(),t=/Macintosh/i.test(e)&&n?.maxTouchPoints>2;if(!/ip(hone|od|ad)/i.test(e)&&!t)return null;const o=/ip(hone|od)/i.test(e),r=e.match(/os\s{0,}X? (\d+)_(\d+)_?(\d+)?/i);return{deviceType:o?"phone":"tablet",platform:"ios",version:r?[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||0,10)]:[],grade:480===gT.screen.height?"B":"A"}},android(e){const n=/android|htc_|silk/i.test(e),t=/windows phone/i.test(e);if(!n||t)return null;const i=/mobile/i.test(e),o=e.match(/android (\d+)\.?(\d+)?\.?(\d+)?/i),r=o?[parseInt(o[1],10),parseInt(o[2]||0,10),parseInt(o[3]||0,10)]:[];return{deviceType:i?"phone":"tablet",platform:"android",version:r,grade:r.length>1&&(r[0]<4||4===r[0]&&r[1]<4)?"B":"A"}}},_T=[_y.appleTouchDevice,_y.android,_y.generic],Sp=new class e6{constructor(n){this._window=n?.window||gT,this._realDevice=this._getDevice(),this._currentDevice=void 0,this._currentOrientation=void 0,this._eventsStrategy=new Fs(this),this.changed=bt(),Ke()&&(Qi.add(this._recalculateOrientation.bind(this)),gu.add(this._recalculateOrientation.bind(this)))}current(n){if(n)return this._currentDevice=this._getDevice(n),this._forced=!0,void this.changed.fire();if(!this._currentDevice){n=void 0;try{n=this._getDeviceOrNameFromWindowScope()}catch{n=this._getDeviceNameFromSessionStorage()}finally{n||(n=this._getDeviceNameFromSessionStorage()),n&&(this._forced=!0)}this._currentDevice=this._getDevice(n)}return this._currentDevice}real(n){return pe({},this._realDevice)}orientation(){return this._currentOrientation}isForced(){return this._forced}isRippleEmulator(){return!!this._window.tinyHippos}_getCssClasses(n){const t=[],i=this._realDevice;return(n=n||this.current()).deviceType&&(t.push(`dx-device-${n.deviceType}`),"desktop"!==n.deviceType&&t.push("dx-device-mobile")),t.push(`dx-device-${i.platform}`),i.version&&i.version.length&&t.push(`dx-device-${i.platform}-${i.version[0]}`),this.isSimulator()&&t.push("dx-simulator"),Ht().rtlEnabled&&t.push("dx-rtl"),t}attachCssClasses(n,t){this._deviceClasses=this._getCssClasses(t).join(" "),V(n).addClass(this._deviceClasses)}detachCssClasses(n){V(n).removeClass(this._deviceClasses)}isSimulator(){try{return this._isSimulator||Ke()&&this._window.top!==this._window.self&&this._window.top["dx-force-device"]||this.isRippleEmulator()}catch{return!1}}forceSimulator(){this._isSimulator=!0}_getDevice(n){if("genericPhone"===n&&(n={deviceType:"phone",platform:"generic",generic:!0}),lt(n))return this._fromConfig(n);{let t;if(n){if(t=J3[n],!t)throw vt.Error("E0005")}else t=hl().userAgent;return this._fromUA(t)}}_getDeviceOrNameFromWindowScope(){let n;return Ke()&&(this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"])&&(n=this._window.top["dx-force-device-object"]||this._window.top["dx-force-device"]),n}_getDeviceNameFromSessionStorage(){const n=function(){let e;try{e=X3.sessionStorage}catch{}return e}();if(!n)return;const t=n.getItem("dx-force-device");try{return JSON.parse(t)}catch{return t}}_fromConfig(n){const t=pe({},mT,this._currentDevice,n);return pe(t,{phone:"phone"===t.deviceType,tablet:"tablet"===t.deviceType,android:"android"===t.platform,ios:"ios"===t.platform,generic:"generic"===t.platform})}_fromUA(n){for(let t=0;t<_T.length;t+=1){const o=(0,_T[t])(n);if(o)return this._fromConfig(o)}return mT}_changeOrientation(){const n=V(this._window),t=ut(n)>Xe(n)?"portrait":"landscape";this._currentOrientation!==t&&(this._currentOrientation=t,this._eventsStrategy.fireEvent("orientationChanged",[{orientation:t}]))}_recalculateOrientation(){const n=Xe(this._window);this._currentWidth!==n&&(this._currentWidth=n,this._changeOrientation())}on(n,t){return this._eventsStrategy.on(n,t),this}off(n,t){return this._eventsStrategy.off(n,t),this}},vT=Ls();vT&&Sp.attachCssClasses(vT),bp.add((e,n)=>{Sp.detachCssClasses(n),Sp.attachCssClasses(e)});const je=Sp,vy={},vl=e=>{const n=je.current();return e.reduce((t,i)=>{let{device:o,options:r}=i;const c=o||{};return(Be(c)?c(n):n6(n,c))&&pe(!0,t,r),t},{})},n6=(e,n)=>dp(n)||AP(e,[n]).length>0,yT=e=>e.substr(e.lastIndexOf(".")+1),CT=e=>e.substr(0,e.lastIndexOf(".")),yy={},Cy={};class r6{constructor(n,t){this._options=n,this._optionsByReference=t}_setByReference(n,t){pe(!0,n,t);for(const i in this._optionsByReference)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}_setPreparedValue(n,t,i,o){const r=this.get(this._options,n,!1);if(!function(e,n){return e=mr(e,!0),n=mr(n,!0),e&&n&&qi(e)&&qi(n)?n.is(e):e!=e&&n!=n||(0===e&&0===n?function(e,n){return 1/e==1/n}(e,n):!(null!==e&&"object"==typeof e&&!Pe.isElementNode(e))&&e===n)}(r,t)){const c=cl(n);!o&&this._changingCallback(n,r,t),Cy[n]=Cy[n]||Uv(n),Cy[n](this._options,t,{functionsAsIs:!0,merge:Ie(i)?i:!this._optionsByReference[n],unwrapObservables:c.length>1&&!!this._optionsByReference[c[0]]}),!o&&this._changedCallback(n,t,r)}}_prepareRelevantNames(n,t,i,o){if(lt(i))for(const r in i)this._prepareRelevantNames(n,`${t}.${r}`,i[r]);this._namePreparedCallbacks(n,t,i,o)}get(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._options,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return yy[t]=yy[t]||sn(t),yy[t](n,{functionsAsIs:!0,unwrapObservables:i})}set(n,t,i,o){n=((e,n)=>"string"!=typeof e?e:{[e]:n})(n,t);for(const r in n)this._prepareRelevantNames(n,r,n[r],o);for(const r in n)this._setPreparedValue(r,n[r],i,o)}onRelevantNamesPrepared(n){this._namePreparedCallbacks=n}onChanging(n){this._changingCallback=n}onChanged(n){this._changedCallback=n}dispose(){this._changingCallback=De,this._changedCallback=De}}class s6{constructor(n,t,i,o){this._default=t,this._deprecated=o,this._deprecatedNames=[],this._initDeprecatedNames(),this._optionManager=new r6(n,i),this._optionManager.onRelevantNamesPrepared((r,c,v,S)=>this._setRelevantNames(r,c,v,S)),this._cachedOptions={},this._rules=[]}set _initial(n){this._initialOptions=n}get _initial(){if(!this._initialOptions){const n=this._getByRules(this.silent("defaultOptionsRules"));this._initialOptions=this._default,this._optionManager._setByReference(this._initialOptions,n)}return this._initialOptions}_initDeprecatedNames(){for(const n in this._deprecated)this._deprecatedNames.push(n)}_getByRules(n){return n=Array.isArray(n)?this._rules.concat(n):this._rules,vl(n)}_notifyDeprecated(n){const t=this._deprecated[n];t&&this._deprecatedCallback(n,t)}_setRelevantNames(n,t,i,o){if(t){const r=this._normalizeName(t,o);r&&r!==t&&(this._setField(n,r,i),this._clearField(n,t))}}_setField(n,t,i){let o="",r=null;do{o=o?`.${o}`:"",o=yT(t)+o,r=(t=CT(t))?this._optionManager.get(n,t,!1):n}while(!r);r[o]=i}_clearField(n,t){delete n[t];const i=CT(t),o=i?this._optionManager.get(n,i,!1):n;o&&delete o[yT(t)]}_normalizeName(n,t){if(this._deprecatedNames.length&&n)for(let i=0;i<this._deprecatedNames.length;i++)if(this._deprecatedNames[i]===n){const o=this._deprecated[n];if(o)return!t&&this._notifyDeprecated(n),o.alias||n}return n}addRules(n){this._rules=n.concat(this._rules)}applyRules(n){const t=this._getByRules(n);this.silent(t)}dispose(){this._deprecatedCallback=De,this._startChangeCallback=De,this._endChangeCallback=De,this._optionManager.dispose()}onChanging(n){this._optionManager.onChanging(n)}onChanged(n){this._optionManager.onChanged(n)}onDeprecated(n){this._deprecatedCallback=n}onStartChange(n){this._startChangeCallback=n}onEndChange(n){this._endChangeCallback=n}isInitial(n){const t=this.silent(n),i=this.initial(n);return Be(t)&&Be(i)?t.toString()===i.toString():ks(t,i)}initial(n){return function(e,n){return vy[n]=vy[n]||sn(n),vy[n](e,{functionsAsIs:!0})}(this._initial,n)}option(n,t){if(arguments.length<2&&"object"!==Ki(n))return this._optionManager.get(void 0,this._normalizeName(n));this._startChangeCallback();try{this._optionManager.set(n,t)}finally{this._endChangeCallback()}}silent(n,t){if(arguments.length<2&&"object"!==Ki(n))return this._optionManager.get(void 0,n,void 0,!0);this._optionManager.set(n,t,void 0,!0)}reset(n){if(n){const i=cl(n).reduce((r,c)=>r?r[c]:this.initial(c),null),o=dt(i)?He({},i):i;this._optionManager.set(n,o,!1)}}getAliasesByName(n){return Object.keys(this._deprecated).filter(t=>n===this._deprecated[t].alias)}isDeprecated(n){return Object.prototype.hasOwnProperty.call(this._deprecated,n)}cache(n,t){if(arguments.length<2)return this._cachedOptions[n];this._cachedOptions[n]=pe(this._cachedOptions[n],t)}}const xT=function(e,n){const t={};"noBubble"in n&&(t.noBubble=n.noBubble),"bindType"in n&&(t.bindType=n.bindType),"delegateType"in n&&(t.delegateType=n.delegateType),Ee(["setup","teardown","add","remove","trigger","handle","_default","dispose"],function(i,o){n[o]&&(t[o]=function(){const r=[].slice.call(arguments);return r.unshift(this),n[o].apply(n,r)})}),ny.fire(e,t)};xT.callbacks=ny;const _o=xT,yl="dxremove",xy="dxRemoveEvent";(function N3(e){nT=e})(function(e){e=[].slice.call(e);for(let n=0;n<e.length;n++){const t=V(e[n]);t.prop(xy)&&(t[0][xy]=null,ue.triggerHandler(t,"dxremove"))}}),_o("dxremove",{noBubble:!0,setup:function(e){V(e).prop(xy,!0)}});const Dp=new WeakMap;let a6=0;const mu=function(e,n){if(!Ie(n)){if(!Dp.has(e)){const t="dxPrivateComponent"+a6++;return Dp.set(e,t),t}return Dp.get(e)}Dp.set(e,n)};function OT(e,n,t){const i=Yt(e.get(0)),o=mu(n.constructor);i[o]=n,t&&ue.one(e,yl,function(){t.call(n)}),i.dxComponents||(i.dxComponents=[]),i.dxComponents.push(o)}function bT(e,n){const t=mu(n);return Yt(e.get(0),t)}class l6{constructor(){this._postponedOperations={}}add(n,t,i){if(n in this._postponedOperations)i&&this._postponedOperations[n].promises.push(i);else{const o=new Ae;this._postponedOperations[n]={fn:t,completePromise:o,promises:i?[i]:[]}}return this._postponedOperations[n].completePromise.promise()}callPostponedOperations(){for(const n in this._postponedOperations){const t=this._postponedOperations[n];Ie(t)&&(t.promises&&t.promises.length?Ft(...t.promises).done(t.fn).then(t.completePromise.resolve):t.fn().done(t.completePromise.resolve))}this._postponedOperations={}}}const ST=e=>e.charAt(2).toLowerCase()+e.substr(3),c6=e=>0===e.indexOf("_",0),Oy=Tt.inherit({_setDeprecatedOptions(){this._deprecatedOptions={}},_getDeprecatedOptions(){return this._deprecatedOptions},_getDefaultOptions:()=>({onInitialized:null,onOptionChanged:null,onDisposing:null,defaultOptionsRules:null}),_defaultOptionsRules:()=>[],_setOptionsByDevice(e){this._options.applyRules(e)},_convertRulesToOptions:e=>vl(e),_isInitialOptionValue(e){return this._options.isInitial(e)},_setOptionsByReference(){this._optionsByReference={}},_getOptionsByReference(){return this._optionsByReference},ctor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_optionChangedCallbacks:n,_disposingCallbacks:t}=e;this.NAME=mu(this.constructor),this._eventsStrategy=Fs.create(this,e.eventsStrategy),this._updateLockCount=0,this._optionChangedCallbacks=n||bt(),this._disposingCallbacks=t||bt(),this.postponedOperations=new l6,this._createOptions(e)},_createOptions(e){this.beginUpdate();try{this._setOptionsByReference(),this._setDeprecatedOptions(),this._options=new s6(this._getDefaultOptions(),this._getDefaultOptions(),this._getOptionsByReference(),this._getDeprecatedOptions()),this._options.onChanging((n,t,i)=>this._initialized&&this._optionChanging(n,t,i)),this._options.onDeprecated((n,t)=>this._logDeprecatedOptionWarning(n,t)),this._options.onChanged((n,t,i)=>this._notifyOptionChanged(n,t,i)),this._options.onStartChange(()=>this.beginUpdate()),this._options.onEndChange(()=>this.endUpdate()),this._options.addRules(this._defaultOptionsRules()),e&&e.onInitializing&&e.onInitializing.apply(this,[e]),this._setOptionsByDevice(e.defaultOptionsRules),this._initOptions(e)}finally{this.endUpdate()}},_initOptions(e){this.option(e)},_init(){this._createOptionChangedAction(),this.on("disposing",e=>{this._disposingCallbacks.fireWith(this,[e])})},_logDeprecatedOptionWarning(e,n){vt.log("W0001",this.NAME,e,n.since,n.message||`Use the '${n.alias}' option instead`)},_logDeprecatedComponentWarning(e,n){vt.log("W0000",this.NAME,e,`Use the '${n}' widget instead`)},_createOptionChangedAction(){this._optionChangedAction=this._createActionByOption("onOptionChanged",{excludeValidators:["disabled","readOnly"]})},_createDisposingAction(){this._disposingAction=this._createActionByOption("onDisposing",{excludeValidators:["disabled","readOnly"]})},_optionChanged(e){switch(e.name){case"onDisposing":case"onInitialized":case"defaultOptionsRules":break;case"onOptionChanged":this._createOptionChangedAction()}},_dispose(){this._optionChangedCallbacks.empty(),this._createDisposingAction(),this._disposingAction(),this._eventsStrategy.dispose(),this._options.dispose(),this._disposed=!0},_lockUpdate(){this._updateLockCount++},_unlockUpdate(){this._updateLockCount=Math.max(this._updateLockCount-1,0)},_isUpdateAllowed(){return 0===this._updateLockCount},_isInitializingRequired(){return!this._initializing&&!this._initialized},isInitialized(){return this._initialized},_commitUpdate(){this.postponedOperations.callPostponedOperations(),this._isInitializingRequired()&&this._initializeComponent()},_initializeComponent(){this._initializing=!0;try{this._init()}finally{this._initializing=!1,this._lockUpdate(),this._createActionByOption("onInitialized",{excludeValidators:["disabled","readOnly"]})(),this._unlockUpdate(),this._initialized=!0}},instance(){return this},beginUpdate:function(){this._lockUpdate()},endUpdate:function(){this._unlockUpdate(),this._isUpdateAllowed()&&this._commitUpdate()},_optionChanging:De,_notifyOptionChanged(e,n,t){if(this._initialized){const i=[e].concat(this._options.getAliasesByName(e));for(let o=0;o<i.length;o++){const r=i[o],c={name:cl(r)[0],fullName:r,value:n,previousValue:t};c6(r)||(this._optionChangedCallbacks.fireWith(this,[pe(this._defaultActionArgs(),c)]),this._optionChangedAction(pe({},c))),!this._disposed&&this._cancelOptionChange!==r&&this._optionChanged(c)}}},initialOption(e){return this._options.initial(e)},_defaultActionConfig(){return{context:this,component:this}},_defaultActionArgs(){return{component:this}},_createAction(e,n){let t;return i=>(Ie(i)||(i={}),lt(i)||(i={actionValue:i}),t=t||new _l(e,pe({},n,this._defaultActionConfig())),t.execute.call(t,pe(i,this._defaultActionArgs())))},_createActionByOption(e,n){var t=this;let i,o,r;n=pe({},n);const c=function(){if(!o){if(n=n||{},"string"!=typeof e)throw vt.Error("E0008");0===e.indexOf("on")&&(o=ST(e)),r=t.option(e)}if(i||r||n.beforeExecute||n.afterExecute||t._eventsStrategy.hasEvent(o)){if(!i){const N=n.beforeExecute;n.beforeExecute=function(){for(var B=arguments.length,X=new Array(B),ne=0;ne<B;ne++)X[ne]=arguments[ne];N&&N.apply(t,X),t._eventsStrategy.fireEvent(o,X[0].args)},i=t._createAction(r,n)}for(var S=arguments.length,T=new Array(S),F=0;F<S;F++)T[F]=arguments[F];return Ht().wrapActionsBeforeExecute?((t.option("beforeActionExecute")||De)(t,i,n)||i).apply(t,T):i.apply(t,T)}};return Ht().wrapActionsBeforeExecute?c:(this.option("onActionCreated")||De)(this,c,n)||c},on(e,n){return this._eventsStrategy.on(e,n),this},off(e,n){return this._eventsStrategy.off(e,n),this},hasActionSubscription:function(e){return!!this._options.silent(e)||this._eventsStrategy.hasEvent(ST(e))},isOptionDeprecated(e){return this._options.isDeprecated(e)},_setOptionWithoutOptionChange(e,n){this._cancelOptionChange=e,this.option(e,n),this._cancelOptionChange=!1},_getOptionValue(e,n){const t=this.option(e);return Be(t)?t.bind(n)():t},option(){return this._options.option(...arguments)},resetOption(e){this.beginUpdate(),this._options.reset(e),this.endUpdate()}}),by=ot(),Ip=()=>{const e=Pe.getActiveElement();var n;e&&e!==Pe.getBody()&&(null===(n=e.blur)||void 0===n||n.call(e))},h6=(e,n)=>{const t=V(e),i=V(n);if(t[0]===i[0])return t[0];const o=t.parents(),r=i.parents();for(let v=-Math.min(o.length,r.length);v<0;v++)if(o.get(v)===r.get(v))return o.get(v)},Ep=e=>{let n=Ie(e)&&(e.nodeType||qi(e))?V(e):V("<div>").html(e).contents();return 1===n.length&&(n.is("script")?n=Ep(n.html().trim()):n.is("table")&&(n=n.children("tbody").contents())),n},DT=(e,n)=>{const t=e.originalEvent&&e.originalEvent.clipboardData||by.clipboardData;if(!n)return t&&t.getData("Text");t&&t.setData("Text",n)},Uo=(e,n)=>!!n&&($t(e)?Uo(e.document,n):e.contains(n)||Uo(e,(e=>{if(!e.getRootNode)return;const n=e.getRootNode().host;return _t(n)?void 0:n})(n))),Sy=function(e){return function(n){const t=V(n||"body"),i=t.filter(".dx-visibility-change-handler").add(t.find(".dx-visibility-change-handler"));for(let o=0;o<i.length;o++)ue.triggerHandler(i[o],e)}},IT=Sy("dxshown"),g6=Sy("dxhiding"),Cr=Sy("dxresize"),m6=bt({syncStrategy:!0});class Ns{render(n){const t=(n=n||{}).onRendered;let i;return delete n.onRendered,i=n.renovated&&n.transclude&&this._element?V("<div>").append(this._element).contents():this._renderCore(n),this._ensureResultInContainer(i,n.container),m6.fire(i,n.container),t&&t(),i}_ensureResultInContainer(n,t){if(!t)return;const i=V(t),o=Uo(i.get(0),n.get(0));i.append(n),!o&&Uo(Pe.getBody(),i.get(0))&&IT(n)}_renderCore(){throw vt.Error("E0001")}}class wp extends Ns{constructor(n){super(),this._render=n}_renderCore(n){return Ep(this._render(n))}}class Hs extends Ns{_renderCore(){return V()}}let ET=function _6(e){return e&&e.get?e.get(0):e};function st(e){return ET(e)}class Dy extends Ns{constructor(n){super(),this.name=n}}const wT={};let Pp;function PT(){return Pp}(function v6(e,n){wT[e]=n})("default",{compile:e=>Ep(e),render:(e,n,t)=>e.clone()}),function y6(e){if(_t(e)){if(Pp=wT[e],!Pp)throw vt.Error("E0020",e)}else Pp=e}("default");class C6 extends Ns{constructor(n){super(),this._element=n}_renderCore(n){const t=n.transclude;return!t&&!this._compiledTemplate&&(this._compiledTemplate=PT().compile(this._element)),V("<div>").append(t?this._element:PT().render(this._compiledTemplate,n.model,n.index)).contents()}source(){return V(this._element).clone()}}const MT=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=function TT(e){return e.reduce((n,t)=>{const i=(n.get(t)??0)+1;return n.set(t,i),n},new Map)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]);return e.filter(i=>{const o=t.get(i);return o&&t.set(i,o-1),!o})},AT=(e,n)=>{const t=V(e).contents().filter(`[data-options*="${n}"]`);return[].slice.call(t).map(i=>{const o=V(i).attr("data-options")||"";return{element:i,options:Ht().optionsParser(o)[n]}}).filter(i=>!!i.options)},RT=e=>{const n=e.render.bind(e);return pe({},e,{render(t){const i=n(t);return t&&t.onRendered&&t.onRendered(),i}})},kT=e=>qi(e)&&e[0]||e,w6=e=>new C6(e),FT=(e,n,t,i,o,r)=>null==e?new Hs:e instanceof Dy?r[e.name]:e instanceof Ns?e:Be(e.render)&&!qi(e)?i?e:RT(e):e.nodeType||qi(e)?n(V(e)):((e,n,t,i)=>{let o=null;return(!i||-1===i.indexOf(e))&&(o=n[e],o&&!(o instanceof Ns)&&(Be(o.render)&&(o=(e=>{const n=e.render.bind(e);return pe({},e,{render(t){const i=V(t.container);return n(He({},t,{container:st(i)}))}})})(o)),t||(o=RT(o)))),o})(e,t,i,o)||r[e]||n(e),T6=new wp(e=>{let{model:n,parent:t}=e;const i=n.widget;if(!i)return V();const o=V("<div>"),r=n.options||{};return t?t._createComponent(o,i,r):o[i](r),o});class LT{constructor(n,t){this._tempTemplates=[],this._defaultTemplates={},this._anonymousTemplateName=t||"template",this._createElement=n||w6,this._createTemplateIfNeeded=this._createTemplateIfNeeded.bind(this)}static createDefaultOptions(){return{integrationOptions:{watchMethod:function(n,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipImmediate||t(n()),De},templates:{"dx-polymorph-widget":T6},useDeferUpdateForTemplates:!0}}}get anonymousTemplateName(){return this._anonymousTemplateName}addDefaultTemplates(n){this._defaultTemplates=pe({},this._defaultTemplates,n)}dispose(){this._tempTemplates.forEach(n=>{n.template.dispose&&n.template.dispose()}),this._tempTemplates=[]}extractTemplates(n){return{templates:this._extractTemplates(n),anonymousTemplateMeta:this._extractAnonymousTemplate(n)}}_extractTemplates(n){const t=AT(n,"dxTemplate"),i=(e=>{const n=((e,n)=>e.reduce((t,i)=>{const o=(i=>i.options.name)(i);return t[o]=t[o]??[],t[o].push(i),t},{}))(e);if(n[void 0])throw vt.Error("E0023");const t={};return Object.keys(n).forEach(i=>{var o;const r=null===(o=AP(je.current(),n[i],c=>c.options)[0])||void 0===o?void 0:o.element;r&&(t[i]=r)}),t})(t);return t.forEach(o=>{let{element:r,options:{name:c}}=o;r===i[c]?V(r).addClass("dx-template-wrapper").detach():V(r).remove()}),Object.keys(i).map(o=>({name:o,template:this._createTemplate(i[o])}))}_extractAnonymousTemplate(n){const t=n.contents().detach();return t.filter((o,r)=>{const c=3===r.nodeType,v=V(r).text().trim().length<1;return!(c&&v)}).length>0?{template:this._createTemplate(t),name:this._anonymousTemplateName}:{}}_createTemplateIfNeeded(n){const t=this._tempTemplates.filter(o=>o.source===kT(n))[0];if(t)return t.template;const i=this._createTemplate(n);return this._tempTemplates.push({template:i,source:kT(n)}),i}_createTemplate(n){return this._createElement("string"==typeof(e=n)?Ep(e):e);var e}getTemplate(n,t,i,o){let{isAsyncTemplate:r,skipTemplates:c}=i;return Be(n)?new wp(v=>{const S=n.apply(o,(e=>{const n=[];return"model"in e&&n.push(e.model),"index"in e&&n.push(e.index),n.push(e.container),n})(v));if(!Ie(S))return new Hs;let T=!1;const F=FT(S,B=>B.nodeType||qi(B)&&!V(B).is("script")?new wp(()=>B):(T=!0,this._createTemplate(B)),t,r,c,this._defaultTemplates),N=F.render(v);return T&&F.dispose&&F.dispose(),N}):FT(n,this._createTemplateIfNeeded,t,r,c,this._defaultTemplates)}}const Iy=(e,n)=>{if(!n)throw vt.Error("E0017");return Array.isArray(e)?e.map(t=>Iy(t,n)).join(" "):-1!==e.indexOf(" ")?Iy(e.split(/\s+/g),n):`${e}.${n}`},NT=function(e,n){if(!function A6(e){const n=V(e);return n.is(":visible")&&"hidden"!==n.css("visibility")&&"hidden"!==n.parents().css("visibility")}(e))return!1;const t=e.nodeName.toLowerCase(),i=!isNaN(n),o=e.disabled;let v;return v=/^(input|select|textarea|button|object|iframe)$/.test(t)||e.isContentEditable?!o:"a"===t&&e.href||i,v},Ey=function(e,n){return NT(n,V(n).attr("tabIndex"))},HT=function(e,n){const t=V(n).attr("tabIndex");return(isNaN(t)||t>=0)&&NT(n,t)},Cl=function(e){const n=V(e).get(0);return Pe.getActiveElement(n)===n},R6={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space",f:"F",a:"A","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift"},k6={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",70:"F",65:"A",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},F6={dx:/^dx/i,mouse:/(mouse|wheel)/i,touch:/^touch/i,keyboard:/^key/i,pointer:/^(ms)?pointer/i};const wy=e=>"dx"===xl(e),VT=e=>"touch"===xl(e),xl=e=>{let{type:n}=e,t="other";return Ee(F6,function(i){if(this.test(n))return t=i,!1}),t},zT=e=>"pointer"===xl(e),Bs=e=>(e=>"mouse"===xl(e))(e)||(zT(e)||wy(e))&&"mouse"===e.pointerType,oi=e=>e&&"dxmousewheel"===e.type,Ol=e=>VT(e)||(zT(e)||wy(e))&&"touch"===e.pointerType,an=e=>{let{pageX:n,pageY:t,timeStamp:i}=e;return{x:n,y:t,time:i}},Vs=(e,n)=>({x:n.x-e.x,y:n.y-e.y,time:n.time-e.time||1});const jT=e=>{const{target:n}=e,t=V(n),i=n?.isContentEditable||n?.hasAttribute("contenteditable"),o=t.is("input, textarea, select")||i;return oi(e)?!(t.is("textarea")&&t.hasClass("dx-texteditor-input")||i)&&t.is("input[type='number'], textarea, select")&&t.is(":focus"):Bs(e)?o||e.which>1:Ol(e)?o&&Cl(t):void 0},Ty=(e,n)=>{const t=(e=>ue.Event(e,e))(e);return n&&pe(t,n),t},is=e=>{const{originalEvent:n,delegateTarget:t}=e,i=Ty(n,e);return ue.trigger(t||i.target,i),i},$n=e=>{let{key:n,which:t}=e;const i=R6[n?.toLowerCase()]||n,o=k6[t];return o&&i===n?o:!i&&t?String.fromCharCode(t):i},My=e=>{let{key:n,which:t}=e;return n||String.fromCharCode(t)},Te=Iy,ri=e=>{let{ctrlKey:n,metaKey:t}=e;return n||t},Ay="KeyboardProcessor",UT=e=>({keyName:$n(e),key:e.key,code:e.code,ctrl:e.ctrlKey,location:e.location,metaKey:e.metaKey,shift:e.shiftKey,alt:e.altKey,which:e.which,originalEvent:e}),$T=Tt.inherit({_keydown:Te("keydown",Ay),_compositionStart:Te("compositionstart",Ay),_compositionEnd:Te("compositionend",Ay),ctor:function(e){(e=e||{}).element&&(this._element=V(e.element)),e.focusTarget&&(this._focusTarget=e.focusTarget),this._handler=e.handler,this._element&&(this._processFunction=n=>{const t=V(this._focusTarget).toArray(),i=this._focusTarget&&this._focusTarget!==n.target&&!t.includes(n.target),o=this._isComposingJustFinished&&229===n.which||this._isComposing||i;this._isComposingJustFinished=!1,o||this.process(n)},this._toggleProcessingWithContext=this.toggleProcessing.bind(this),ue.on(this._element,this._keydown,this._processFunction),ue.on(this._element,this._compositionStart,this._toggleProcessingWithContext),ue.on(this._element,this._compositionEnd,this._toggleProcessingWithContext))},dispose:function(){this._element&&(ue.off(this._element,this._keydown,this._processFunction),ue.off(this._element,this._compositionStart,this._toggleProcessingWithContext),ue.off(this._element,this._compositionEnd,this._toggleProcessingWithContext)),this._element=void 0,this._handler=void 0},process:function(e){this._handler(UT(e))},toggleProcessing:function(e){let{type:n}=e;this._isComposing="compositionstart"===n,this._isComposingJustFinished=!this._isComposing}});$T.createKeyDownOptions=UT;const WT=$T;function ln(e,n){return n?Te(e,n):e}function Ry(e,n){return"function"==typeof e?e(n):e.execute(n)}const Tp_on=function(e,n){let{namespace:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.on(e,ln("dxresize",t),n)},Tp_off=function(e){let{namespace:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.off(e,ln("dxresize",n))},Mp_on=(e,n,t,i)=>{let{namespace:o}=i;ue.on(e,ln("dxhiding",o),t),ue.on(e,ln("dxshown",o),n)},Mp_off=(e,n)=>{let{namespace:t}=n;ue.off(e,ln("dxhiding",t)),ue.off(e,ln("dxshown",t))},Ap_trigger=e=>ue.trigger(e,"focus");let B6=0;const _u={},vu_on=(e,n,t)=>{const i="keyboardProcessorId"+B6++;return _u[i]=new WT({element:e,focusTarget:n,handler:t}),i},vu_off=e=>{e&&_u[e]&&(_u[e].dispose(),delete _u[e])},j6_validateLicense=function z6(e,n){},{abstract:Rp}=Oy,ky=Oy.inherit({_getDefaultOptions(){return pe(this.callBase(),{width:void 0,height:void 0,rtlEnabled:Ht().rtlEnabled,elementAttr:{},disabled:!1,integrationOptions:{}},this._useTemplates()?LT.createDefaultOptions():{})},ctor(e,n){this._customClass=null,this._createElement(e),OT(this._$element,this,this._dispose),this.callBase(n),j6_validateLicense(Ht().licenseKey)},_createElement(e){this._$element=V(e)},_getSynchronizableOptionsForCreateComponent:()=>["rtlEnabled","disabled","templatesRenderAsynchronously"],_checkFunctionValueDeprecation:function(e){this.option("_ignoreFunctionValueDeprecation")||e.forEach(n=>{Be(this.option(n))&&vt.log("W0017",n)})},_visibilityChanged:Rp,_dimensionChanged:Rp,_init(){this.callBase(),this._checkFunctionValueDeprecation(["width","height","maxHeight","maxWidth","minHeight","minWidth","popupHeight","popupWidth"]),this._attachWindowResizeCallback(),this._initTemplateManager()},_setOptionsByDevice(e){this.callBase([].concat(this.constructor._classCustomRules||[],e||[]))},_isInitialOptionValue(e){return!(this.constructor._classCustomRules&&Object.prototype.hasOwnProperty.call(this._convertRulesToOptions(this.constructor._classCustomRules),e))&&this.callBase(e)},_attachWindowResizeCallback(){if(this._isDimensionChangeSupported()){const e=this._windowResizeCallBack=this._dimensionChanged.bind(this);gu.add(e)}},_isDimensionChangeSupported(){return this._dimensionChanged!==Rp},_renderComponent(){(function h3(e){var n;const t=e.get(0),i=null===(n=t.getRootNode)||void 0===n?void 0:n.call(t);if(null==i||!i.host)return;mp||(mp=kP(i),FP(mp,t.ownerDocument.styleSheets,!1));const o=kP(i);FP(o,i.styleSheets,!0),i.adoptedStyleSheets=[mp,o]})(this.$element()),this._initMarkup(),Ke()&&this._render()},_initMarkup(){const{rtlEnabled:e}=this.option()||{};this._renderElementAttributes(),this._toggleRTLDirection(e),this._renderVisibilityChange(),this._renderDimensions()},_render(){this._attachVisibilityChangeHandlers()},_renderElementAttributes(){const{elementAttr:e}=this.option()||{},n=pe({},e),t=n.class;delete n.class,this.$element().attr(n).removeClass(this._customClass).addClass(t),this._customClass=t},_renderVisibilityChange(){this._isDimensionChangeSupported()&&this._attachDimensionChangeHandlers(),this._isVisibilityChangeSupported()&&this.$element().addClass("dx-visibility-change-handler")},_renderDimensions(){const e=this.$element(),n=e.get(0),t=this._getOptionValue("width",n),i=this._getOptionValue("height",n);this._isCssUpdateRequired(n,i,t)&&e.css({width:null===t?"":t,height:null===i?"":i})},_isCssUpdateRequired:(e,n,t)=>!!(Ie(t)||Ie(n)||e.style.width||e.style.height),_attachDimensionChangeHandlers(){const e=this.$element(),n=`${this.NAME}VisibilityChange`;Tp_off(e,{namespace:n}),Tp_on(e,()=>this._dimensionChanged(),{namespace:n})},_attachVisibilityChangeHandlers(){if(this._isVisibilityChangeSupported()){const e=this.$element(),n=`${this.NAME}VisibilityChange`;this._isHidden=!this._isVisible(),Mp_off(e,{namespace:n}),Mp_on(e,()=>this._checkVisibilityChanged("shown"),()=>this._checkVisibilityChanged("hiding"),{namespace:n})}},_isVisible(){return this.$element().is(":visible")},_checkVisibilityChanged(e){this._isVisible()&&("hiding"!==e||this._isHidden?"shown"===e&&this._isHidden&&(this._isHidden=!1,this._visibilityChanged(!0)):(this._visibilityChanged(!1),this._isHidden=!0))},_isVisibilityChangeSupported(){return this._visibilityChanged!==Rp&&Ke()},_clean:De,_modelByElement(){const{modelByElement:e}=this.option(),n=this.$element();return e?e(n):void 0},_invalidate(){if(this._isUpdateAllowed())throw vt.Error("E0007");this._requireRefresh=!0},_refresh(){this._clean(),this._renderComponent()},_dispose(){this._templateManager&&this._templateManager.dispose(),this.callBase(),this._clean(),this._detachWindowResizeCallback()},_detachWindowResizeCallback(){this._isDimensionChangeSupported()&&gu.remove(this._windowResizeCallBack)},_toggleRTLDirection(e){this.$element().toggleClass("dx-rtl",e)},_createComponent(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=vr(this._getSynchronizableOptionsForCreateComponent(),S=>!(S in t)),{integrationOptions:o}=this.option();let{nestedComponentOptions:r}=this.option();r=r||De;const c=pe({integrationOptions:o},r(this));let v;if(i.forEach(S=>c[S]=this.option(S)),this._extendConfig(t,c),_t(n)?v=V(e)[n](t)[n]("instance"):e&&(v=n.getInstance(e),v?v.option(t):v=new n(e,t)),v){const S=T=>{let{name:F,value:N}=T;i.includes(F)&&v.option(F,N)};this.on("optionChanged",S),v.on("disposing",()=>this.off("optionChanged",S))}return v},_extendConfig(e,n){Ee(n,(t,i)=>{!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=i)})},_defaultActionConfig(){const e=this.$element(),n=this._modelByElement(e);return pe(this.callBase(),{context:n})},_defaultActionArgs(){const e=this.$element(),n=this._modelByElement(e),t=this.element();return pe(this.callBase(),{element:t,model:n})},_optionChanged(e){switch(e.name){case"width":case"height":this._renderDimensions();break;case"rtlEnabled":this._invalidate();break;case"elementAttr":this._renderElementAttributes();break;case"disabled":case"integrationOptions":break;default:this.callBase(e)}},_removeAttributes(e){const n=e.attributes;for(let t=n.length-1;t>=0;t--){const i=n[t];if(i){const{name:o}=i;(!o.indexOf("aria-")||-1!==o.indexOf("dx-")||"role"===o||"style"===o||"tabindex"===o)&&e.removeAttribute(o)}}},_removeClasses(e){e.className=e.className.split(" ").filter(n=>0!==n.lastIndexOf("dx-",0)).join(" ")},_updateDOMComponent(e){e?this._renderComponent():this._requireRefresh&&(this._requireRefresh=!1,this._refresh())},endUpdate(){const e=this._isInitializingRequired();this.callBase(),this._isUpdateAllowed()&&this._updateDOMComponent(e)},$element(){return this._$element},element(){return st(this.$element())},dispose(){const e=this.$element().get(0);hu(e,!0),e.textContent="",this._removeAttributes(e),this._removeClasses(e)},resetOption(e){if(this.callBase(e),"width"===e||"height"===e){const n=this.initialOption(e);!Ie(n)&&this.$element().css(e,"")}},_getAnonymousTemplateName(){},_initTemplateManager(){if(this._templateManager||!this._useTemplates())return;const{integrationOptions:e={}}=this.option(),{createTemplate:n}=e;this._templateManager=new LT(n,this._getAnonymousTemplateName()),this._initTemplates()},_initTemplates(){const{templates:e,anonymousTemplateMeta:n}=this._templateManager.extractTemplates(this.$element()),t=this.option(`integrationOptions.templates.${n.name}`);e.forEach(i=>{let{name:o,template:r}=i;this._options.silent(`integrationOptions.templates.${o}`,r)}),n.name&&!t&&(this._options.silent(`integrationOptions.templates.${n.name}`,n.template),this._options.silent("_hasAnonymousTemplateContent",!0))},_getTemplateByOption(e){return this._getTemplate(this.option(e))},_getTemplate(e){const n=this.option("integrationOptions.templates"),t=this.option("templatesRenderAsynchronously"),i=this.option("integrationOptions.skipTemplates");return this._templateManager.getTemplate(e,n,{isAsyncTemplate:t,skipTemplates:i},this)},_saveTemplate(e,n){this._setOptionWithoutOptionChange("integrationOptions.templates."+e,this._templateManager._createTemplate(n))},_useTemplates:()=>!0});ky.getInstance=function(e){return bT(V(e),this)},ky.defaultOptions=function(e){this._classCustomRules=this._classCustomRules||[],this._classCustomRules.push(e)};const bl=ky;function XT(e,n,t){function i(r){return"string"==typeof r?r.split("."):"number"==typeof r?[r]:r}e=i(e),n=i(n);let o=Math.max(e.length,n.length);isFinite(t)&&(o=Math.min(o,t));for(let r=0;r<o;r++){const c=parseInt(e[r]||0,10),v=parseInt(n[r]||0,10);if(c<v)return-1;if(c>v)return 1}return 0}const Ji=Ke()?ot():{};let YT=function(e){return setTimeout(e,16.666666666666668)},QT=function(e){clearTimeout(e)};const JT=zo(function(){const e=Ji.requestAnimationFrame||Ji.webkitRequestAnimationFrame||Ji.mozRequestAnimationFrame||Ji.oRequestAnimationFrame||Ji.msRequestAnimationFrame,n=Ji.cancelAnimationFrame||Ji.webkitCancelAnimationFrame||Ji.mozCancelAnimationFrame||Ji.oCancelAnimationFrame||Ji.msCancelAnimationFrame;e&&n&&(YT=e,QT=n)});function yu(){return JT(),YT.apply(Ji,arguments)}function $o(){JT(),QT.apply(Ji,arguments)}function eM(e){return e&&[e.target,e.delegateTarget,e.relatedTarget,e.currentTarget].filter(n=>!!n)}const{maxTouchPoints:tM}=hl(),W6={webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},Fy=function(e){return!!gl(e)},K6=function(e){if("text"===e)return!0;const n=Pe.createElement("input");try{return n.setAttribute("type",e),n.value="wrongValue",!n.value}catch{return!1}},nM=(n=tM,((e=LP)("ontouchstart")||!!n)&&!e("callPhantom")),iM=function(e){return e("PointerEvent")}(LP),Sl=nM||iM&&!!tM,Ly=zo(function(){return Fy("transition")}),oM=zo(function(){return W6[gl("transition")]}),Ny=zo(function(){return Fy("animation")}),Cu=function(){const{platform:e,mac:n}=je.real();return"ios"===e||"android"===e||n}(),X6=hl(),Y6=/(webkit)[ /]([\w.]+)/,Q6=/(mozilla)(?:.*? rv:([\w.]+))/,rM=e=>{e=e.toLowerCase();const n={},t=Y6.exec(e)||e.indexOf("compatible")<0&&Q6.exec(e)||[];let i=t[1],o=t[2];return"webkit"===i&&(n.webkit=!0,e.indexOf("chrome")>=0||e.indexOf("crios")>=0?(i="chrome",o=/(?:chrome|crios)\/(\d+\.\d+)/.exec(e),o=o&&o[1]):e.indexOf("fxios")>=0?(i="mozilla",o=/fxios\/(\d+\.\d+)/.exec(e),o=o&&o[1]):e.indexOf("safari")>=0&&/version|phantomjs/.test(e)?(i="safari",o=/(?:version|phantomjs)\/([0-9.]+)/.exec(e),o=o&&o[1]):(i="unknown",o=/applewebkit\/([0-9.]+)/.exec(e),o=o&&o[1])),i&&(n[i]=!0,n.version=o),n},Wo=pe({_fromUA:rM},rM(X6.userAgent)),Hy=Tt.inherit({ctor:function(e,n){this._eventName=e,this._originalEvents=Te(n,"dxPointerEvents"),this._handlerCount=0,this.noBubble=this._isNoBubble()},_isNoBubble:function(){const e=this._eventName;return"dxpointerenter"===e||"dxpointerleave"===e},_handler:function(e){const n=this._getDelegateTarget(e),t={type:this._eventName,pointerType:e.pointerType||xl(e),originalEvent:e,delegateTarget:n,timeStamp:Wo.mozilla?(new Date).getTime():e.timeStamp},i=iy(e);return t.target=i,this._fireEvent(t)},_getDelegateTarget:function(e){let n;return this.noBubble&&(n=e.delegateTarget),n},_fireEvent:function(e){return is(e)},_setSelector:function(e){this._selector=this.noBubble&&e?e.selector:null},_getSelector:function(){return this._selector},setup:function(){return!0},add:function(e,n){if(this._handlerCount<=0||this.noBubble){e=this.noBubble?e:Pe.getDocument(),this._setSelector(n);const t=this;ue.on(e,this._originalEvents,this._getSelector(),function(i){t._handler(i)})}this.noBubble||this._handlerCount++},remove:function(e){this._setSelector(e),this.noBubble||this._handlerCount--},teardown:function(e){this._handlerCount&&!this.noBubble||(e=this.noBubble?e:Pe.getDocument(),".dxPointerEvents"!==this._originalEvents&&ue.off(e,this._originalEvents,this._getSelector()))},dispose:function(e){e=this.noBubble?e:Pe.getDocument(),ue.off(e,this._originalEvents)}}),sM=function(e){const n=[];return Ee(e.touches,function(t,i){n.push(pe({pointerId:i.identifier},i))}),{pointers:n,pointerId:e.changedTouches[0].identifier}},By=Hy.inherit({ctor:function(){this.callBase.apply(this,arguments),this._pointerId=0},_handler:function(e){if(function(e){return"ios"===je.real().platform&&("dxpointerdown"===e||"dxpointerup"===e)}(this._eventName)){const n=e.changedTouches[0];if(this._pointerId===n.identifier&&0!==this._pointerId)return;this._pointerId=n.identifier}return this.callBase.apply(this,arguments)},_fireEvent:function(e){return this.callBase(pe(sM(e.originalEvent),e))}});var e,n;By.map={dxpointerdown:"touchstart",dxpointermove:"touchmove",dxpointerup:"touchend",dxpointercancel:"touchcancel",dxpointerover:"",dxpointerout:"",dxpointerenter:"",dxpointerleave:""},By.normalize=sM;const Vy=By,kp=function(e,n){Qi.add(function(){e.split(" ").forEach(function(t){Pe.listen(Pe.getDocument(),t,n,!0)})})},t8=function(e,n,t){t=t||function(){};let i=[];const o=function(c){let v=-1;return Ee(i,function(S,T){return!n(c,T)||(v=S,!1)}),v},r=function(c){const v=o(c);v>-1&&i.splice(v,1)};kp(e.dxpointerdown,function(c){-1===o(c)&&(t(c),i.push(c))}),kp(e.dxpointermove,function(c){i[o(c)]=c}),kp(e.dxpointerup,r),kp(e.dxpointercancel,r),this.pointers=function(){return i},this.reset=function(){i=[]}},aM={dxpointerdown:"mousedown",dxpointermove:"mousemove",dxpointerup:"mouseup",dxpointercancel:"",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"},lM=function(e){return e.pointerId=1,{pointers:zy.pointers(),pointerId:1}};let zy,cM=!1;const uM=function(){cM||(zy=new t8(aM,function(){return!0}),cM=!0)},xu=Hy.inherit({ctor:function(){this.callBase.apply(this,arguments),uM()},_fireEvent:function(e){return this.callBase(pe(lM(e.originalEvent),e))}});xu.map=aM,xu.normalize=lM,xu.activate=uM,xu.resetObserver=function(){zy.reset()};const Ou=xu;let dM=!1;const jy=Hy.inherit({EVENT_LOCK_TIMEOUT:100,ctor:function(){this.callBase.apply(this,arguments),dM||(Ou.activate(),dM=!0)},_handler:function(e){const n=Bs(e);if(n||(this._skipNextEvents=!0),!n||!this._mouseLocked){if(n&&this._skipNextEvents){this._skipNextEvents=!1,this._mouseLocked=!0,clearTimeout(this._unlockMouseTimer);const t=this;return void(this._unlockMouseTimer=setTimeout(function(){t._mouseLocked=!1},this.EVENT_LOCK_TIMEOUT))}return this.callBase(e)}},_fireEvent:function(e){const n=Bs(e.originalEvent)?Ou.normalize:Vy.normalize;return this.callBase(pe(n(e.originalEvent),e))},dispose:function(){this.callBase(),this._skipNextEvents=!1,this._mouseLocked=!1,clearTimeout(this._unlockMouseTimer)}});jy.map={dxpointerdown:"touchstart mousedown",dxpointermove:"touchmove mousemove",dxpointerup:"touchend mouseup",dxpointercancel:"touchcancel",dxpointerover:"mouseover",dxpointerout:"mouseout",dxpointerenter:"mouseenter",dxpointerleave:"mouseleave"},jy.resetObserver=Ou.resetObserver;const hM=jy,pM=((e,n)=>{let{tablet:t,phone:i}=n;const o=function r8(){const e=Ht().pointerEventStrategy;return{"mouse-and-touch":hM,touch:Vy,mouse:Ou}[e]}();return o||(!e.touch||t||i?e.touch?Vy:Ou:hM)})(bi,je.real());Ee(pM.map,(e,n)=>{_o(e,new pM(e,n))});const Wt={down:"dxpointerdown",up:"dxpointerup",move:"dxpointermove",cancel:"dxpointercancel",enter:"dxpointerenter",leave:"dxpointerleave",over:"dxpointerover",out:"dxpointerout"},Fp=Tt.inherit({ctor:function(e){this._$element=V(e),this._cancelCallback=bt(),this._acceptCallback=bt()},getElement:function(){return this._$element},validate:function(e){return!oi(e)},validatePointers:function(e){return 1===(e=>{const{originalEvent:n,pointers:t}=e;return VT(e)?(n.touches||[]).length:wy(e)?(t||[]).length:0})(e)},allowInterruptionByMouseWheel:function(){return!0},configure:function(e){pe(this,e)},addCancelCallback:function(e){this._cancelCallback.add(e)},removeCancelCallback:function(){this._cancelCallback.empty()},_cancel:function(e){this._cancelCallback.fire(this,e)},addAcceptCallback:function(e){this._acceptCallback.add(e)},removeAcceptCallback:function(){this._acceptCallback.empty()},_accept:function(e){this._acceptCallback.fire(this,e)},_requestAccept:function(e){this._acceptRequestEvent=e},_forgetAccept:function(){this._accept(this._acceptRequestEvent),this._acceptRequestEvent=null},start:De,move:De,end:De,cancel:De,reset:function(){this._acceptRequestEvent&&this._accept(this._acceptRequestEvent)},_fireEvent:function(e,n,t){const i=pe({type:e,originalEvent:n,target:this._getEmitterTarget(n),delegateTarget:this.getElement().get(0)},t);return(n=is(i)).cancel&&this._cancel(n),n},_getEmitterTarget:function(e){return(this.delegateSelector?V(e.target).closest(this.delegateSelector):this.getElement()).get(0)},dispose:De}),Lp="dxmousewheel",Uy={setup:function(e){const n=V(e);ue.on(n,Te("wheel","dxWheel"),Uy._wheelHandler.bind(Uy))},teardown:function(e){ue.off(e,".dxWheel")},_wheelHandler:function(e){const{deltaMode:n,deltaY:t,deltaX:i,deltaZ:o}=e.originalEvent;is({type:Lp,originalEvent:e,delta:this._normalizeDelta(t,n),deltaX:i,deltaY:t,deltaZ:o,deltaMode:n,pointerType:"mouse"}),e.stopPropagation()},_normalizeDelta(e){return 0===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)?-e:-30*e}};_o(Lp,Uy);const Np="dxEventManager",s8=Tt.inherit({ctor:function(){this._attachHandlers(),this.reset(),this._proxiedCancelHandler=this._cancelHandler.bind(this),this._proxiedAcceptHandler=this._acceptHandler.bind(this)},_attachHandlers:function(){Qi.add(function(){const e=Pe.getDocument();ue.subscribeGlobal(e,Te(Wt.down,Np),this._pointerDownHandler.bind(this)),ue.subscribeGlobal(e,Te(Wt.move,Np),this._pointerMoveHandler.bind(this)),ue.subscribeGlobal(e,Te([Wt.up,Wt.cancel].join(" "),Np),this._pointerUpHandler.bind(this)),ue.subscribeGlobal(e,Te(Lp,Np),this._mouseWheelHandler.bind(this))}.bind(this))},_eachEmitter:function(e){const n=this._activeEmitters||[];let t=0;for(;n.length>t;){const i=n[t];if(!1===e(i))break;n[t]===i&&t++}},_applyToEmitters:function(e,n){this._eachEmitter(function(t){t[e].call(t,n)})},reset:function(){this._eachEmitter(this._proxiedCancelHandler),this._activeEmitters=[]},resetEmitter:function(e){this._proxiedCancelHandler(e)},_pointerDownHandler:function(e){Bs(e)&&e.which>1||this._updateEmitters(e)},_updateEmitters:function(e){this._isSetChanged(e)&&(this._cleanEmitters(e),this._fetchEmitters(e))},_isSetChanged:function(e){const n=this._closestEmitter(e),t=this._emittersSet||[];let i=n.length!==t.length;return Ee(n,function(o,r){return i=i||t[o]!==r,!i}),this._emittersSet=n,i},_closestEmitter:function(e){const n=this,t=[];let i=V(e.target);function o(r,c){c&&c.validatePointers(e)&&c.validate(e)&&(c.addCancelCallback(n._proxiedCancelHandler),c.addAcceptCallback(n._proxiedAcceptHandler),t.push(c))}for(;i.length;){const r=Yt(i.get(0),"dxEmitter")||[];Ee(r,o),i=i.parent()}return t},_acceptHandler:function(e,n){const t=this;this._eachEmitter(function(i){i!==e&&t._cancelEmitter(i,n)})},_cancelHandler:function(e,n){this._cancelEmitter(e,n)},_cancelEmitter:function(e,n){const t=this._activeEmitters;n?e.cancel(n):e.reset(),e.removeCancelCallback(),e.removeAcceptCallback();const i=t.indexOf(e);i>-1&&t.splice(i,1)},_cleanEmitters:function(e){this._applyToEmitters("end",e),this.reset(e)},_fetchEmitters:function(e){this._activeEmitters=this._emittersSet.slice(),this._applyToEmitters("start",e)},_pointerMoveHandler:function(e){this._applyToEmitters("move",e)},_pointerUpHandler:function(e){this._updateEmitters(e)},_mouseWheelHandler:function(e){this._allowInterruptionByMouseWheel()&&(e.pointers=[null],this._pointerDownHandler(e),this._adjustWheelEvent(e),this._pointerMoveHandler(e),e.pointers=[],this._pointerUpHandler(e))},_allowInterruptionByMouseWheel:function(){let e=!0;return this._eachEmitter(function(n){return e=n.allowInterruptionByMouseWheel()&&e,e}),e},_adjustWheelEvent:function(e){let n=null;if(this._eachEmitter(function(r){if(!r.gesture)return;const c=r.getDirection(e);return"horizontal"!==c&&!e.shiftKey||"vertical"!==c&&e.shiftKey?(n=r,!1):void 0}),!n)return;const t=n.getDirection(e);e["both"===t&&!e.shiftKey||"vertical"===t?"pageY":"pageX"]+=e.delta},isActive:function(e){let n=!1;return this._eachEmitter(function(t){n=n||t.getElement().is(e)}),n}}),fM=new s8,Dl=function(e){const n=e.emitter,t=e.events[0],i=e.events;Ee(i,function(o,r){_o(r,{noBubble:!e.bubble,setup:function(c){const v=Yt(c,"dxEmitterSubscription")||{},S=Yt(c,"dxEmitter")||{},T=S[t]||new n(c);v[r]=!0,S[t]=T,Yt(c,"dxEmitter",S),Yt(c,"dxEmitterSubscription",v)},add:function(c,v){Yt(c,"dxEmitter")[t].configure(pe({delegateSelector:v.selector},v.data),v.type)},teardown:function(c){const v=Yt(c,"dxEmitterSubscription"),S=Yt(c,"dxEmitter"),T=S[t];delete v[r];let F=!0;Ee(i,function(N,B){return F=F&&!v[B],F}),F&&(fM.isActive(c)&&fM.resetEmitter(T),T&&T.dispose(),delete S[t])}})})},si="dxclick";let $y=null,bu=null;const gM=()=>{bu=null},mM=function(e){const n=e.originalEvent;(!e.which||1===e.which)&&!$y&&!(bu===n||n&&n.DXCLICK_FIRED)&&(n&&(n.DXCLICK_FIRED=!0),((e,n)=>{ue.off(eM(e),yl,n)})(bu,gM),bu=n,((e,n)=>{ue.one(eM(e),yl,n)})(bu,gM),is({type:"dxclick",originalEvent:e}))},a8=Fp.inherit({ctor:function(e){this.callBase(e),ue.on(this.getElement(),"click",mM)},start:function(e){$y=null},cancel:function(){$y=!0},dispose:function(){ue.off(this.getElement(),"click",mM)}});(function(){if(!je.real().generic){let n=null,t=!1;const i=function(T){return V(T).is("input, textarea, select, button ,:focus, :focus *")},o=function(T){n=T.target,t=T.isDefaultPrevented()},r=function(T){const F=iy(T);return V(F)},c=function(T){const F=r(T);!t&&n&&!F.is(n)&&!V(n).is("label")&&i(F)&&Ip(),n=null,t=!1},v="NATIVE_CLICK_FIXER",S=Pe.getDocument();ue.subscribeGlobal(S,Te(Wt.down,v),o),ue.subscribeGlobal(S,Te("click",v),c)}})(),Dl({emitter:a8,bubble:!0,events:["dxclick"]});const Hp=Tt.inherit({ctor:function(e,n){this._timeout=e,this._fire=n},start:function(){const e=this;this._schedule(function(){e.force()})},_schedule:function(e){this.stop(),this._timer=setTimeout(e,this._timeout)},stop:function(){clearTimeout(this._timer)},force:function(){this._fired||(this.stop(),this._fire(),this._fired=!0)},fired:function(){return this._fired}});let vo;const Wy=Fp.inherit({ctor:function(){this.callBase.apply(this,arguments),this._active=new Hp(0,De),this._inactive=new Hp(0,De)},configure:function(e,n){switch(n){case"dxactive":e.activeTimeout=e.timeout;break;case"dxinactive":e.inactiveTimeout=e.timeout}this.callBase(e)},start:function(e){if(vo){const n=Uo(this.getElement().get(0),vo.getElement().get(0)),t=!vo._active.fired();if(n&&t)return void this._cancel();vo._inactive.force()}vo=this,this._initEvents(e),this._active.start()},_initEvents:function(e){const n=this,t=this._getEmitterTarget(e),i=Bs(e),r=je.isSimulator()||!i,c=mn(this.activeTimeout,30),v=mn(this.inactiveTimeout,400);this._active=new Hp(r?c:0,function(){n._fireEvent("dxactive",e,{target:t})}),this._inactive=new Hp(r?v:0,function(){n._fireEvent("dxinactive",e,{target:t}),vo=null})},cancel:function(e){this.end(e)},end:function(e){const n=e.type!==Wt.up;n?this._active.stop():this._active.force(),this._inactive.start(),n&&this._inactive.force()},dispose:function(){this._active.stop(),this._inactive.stop(),vo===this&&(vo=null),this.callBase()},lockInactive:function(){return this._active.force(),this._inactive.stop(),vo=null,this._cancel(),this._inactive.force.bind(this._inactive)}});Wy.lock=function(e){const n=vo?vo.lockInactive():De;e.done(n)},Dl({emitter:Wy,events:["dxactive","dxinactive"]});const c8=Wy.lock,Bp="dxhoverstart",u8=Te(Wt.enter,"dxHoverStart"),Gy="dxhoverend",d8=Te(Wt.leave,"dxHoverEnd"),_M=Tt.inherit({noBubble:!0,ctor:function(){this._handlerArrayKeyPath=this._eventNamespace+"_HandlerStore"},setup:function(e){Yt(e,this._handlerArrayKeyPath,{})},add:function(e,n){const t=this,i=function(o){t._handler(o)};ue.on(e,this._originalEventName,n.selector,i),Yt(e,this._handlerArrayKeyPath)[n.guid]=i},_handler:function(e){Ol(e)||je.isSimulator()||is({type:this._eventName,originalEvent:e,delegateTarget:e.delegateTarget})},remove:function(e,n){const t=Yt(e,this._handlerArrayKeyPath)[n.guid];ue.off(e,this._originalEventName,n.selector,t)},teardown:function(e){Cp(e,this._handlerArrayKeyPath)}}),h8=_M.inherit({ctor:function(){this._eventNamespace="dxHoverStart",this._eventName=Bp,this._originalEventName=u8,this.callBase()},_handler:function(e){(e.pointers||[]).length||this.callBase(e)}}),p8=_M.inherit({ctor:function(){this._eventNamespace="dxHoverEnd",this._eventName=Gy,this._originalEventName=d8,this.callBase()}});function vM(e,n,t){e="role"===e||"id"===e?e:`aria-${e}`,n=Ie(n)?n.toString():null,t.attr(e,n)}_o(Bp,new h8),_o(Gy,new p8);const Ky=bl.inherit({_feedbackHideTimeout:400,_feedbackShowTimeout:30,_supportedKeys:()=>({}),_getDefaultOptions(){return pe(this.callBase(),{hoveredElement:null,isActive:!1,disabled:!1,visible:!0,hint:void 0,activeStateEnabled:!1,onContentReady:null,hoverStateEnabled:!1,focusStateEnabled:!1,tabIndex:0,accessKey:void 0,onFocusIn:null,onFocusOut:null,onKeyboardHandled:null,ignoreParentReadOnly:!1,useResizeObserver:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){const e=je.real();return"ios"===e.platform&&XT(e.version,"13.3")<=0},options:{useResizeObserver:!1}}])},_init(){this.callBase(),this._initContentReadyAction()},_innerWidgetOptionChanged:function(e,n){const t=Ky.getOptionsFromContainer(n);e&&e.option(t),this._options.cache(n.name,t)},_bindInnerWidgetOptions(e,n){const t=()=>this._options.silent(n,pe({},e.option()));t(),e.on("optionChanged",t)},_getAriaTarget(){return this._focusTarget()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){const{disabled:e,visible:n}=this.option();this.$element().addClass("dx-widget"),this._toggleDisabledState(e),this._toggleVisibility(n),this._renderHint(),this._isFocusable()&&this._renderFocusTarget(),this.callBase()},_render(){this.callBase(),this._renderContent(),this._renderFocusState(),this._attachFeedbackEvents(),this._attachHoverEvents(),this._toggleIndependentState()},_renderHint(){const{hint:e}=this.option();this.$element().attr("title",e||null)},_renderContent(){_r(()=>this._disposed?void 0:this._renderContentImpl()).done(()=>this._disposed?void 0:this._fireContentReadyAction())},_renderContentImpl:De,_fireContentReadyAction:dl(function(){return this._contentReadyAction()}),_dispose(){this._contentReadyAction=null,this._detachKeyboardEvents(),this.callBase()},_resetActiveState(){this._toggleActiveState(this._eventBindingTarget(),!1)},_clean(){this._cleanFocusState(),this._resetActiveState(),this.callBase(),this.$element().empty()},_toggleVisibility(e){this.$element().toggleClass("dx-state-invisible",!e)},_renderFocusState(){this._attachKeyboardEvents(),this._isFocusable()&&(this._renderFocusTarget(),this._attachFocusEvents(),this._renderAccessKey())},_renderAccessKey(){const e=this._focusTarget(),{accessKey:n}=this.option();e.attr("accesskey",n)},_isFocusable(){const{focusStateEnabled:e,disabled:n}=this.option();return e&&!n},_eventBindingTarget(){return this.$element()},_focusTarget(){return this._getActiveElement()},_isFocusTarget:function(e){return V(this._focusTarget()).toArray().includes(e)},_findActiveTarget(e){return e.find(this._activeStateUnit).not(".dx-state-disabled")},_getActiveElement(){const e=this._eventBindingTarget();return this._activeStateUnit?this._findActiveTarget(e):e},_renderFocusTarget(){const{tabIndex:e}=this.option();this._focusTarget().attr("tabIndex",e)},_keyboardEventBindingTarget(){return this._eventBindingTarget()},_refreshFocusEvent(){this._detachFocusEvents(),this._attachFocusEvents()},_focusEventTarget(){return this._focusTarget()},_focusInHandler(e){e.isDefaultPrevented()||this._createActionByOption("onFocusIn",{beforeExecute:()=>this._updateFocusState(e,!0),excludeValidators:["readOnly"]})({event:e})},_focusOutHandler(e){e.isDefaultPrevented()||this._createActionByOption("onFocusOut",{beforeExecute:()=>this._updateFocusState(e,!1),excludeValidators:["readOnly","disabled"]})({event:e})},_updateFocusState(e,n){let{target:t}=e;this._isFocusTarget(t)&&this._toggleFocusClass(n,V(t))},_toggleFocusClass(e,n){(n&&n.length?n:this._focusTarget()).toggleClass("dx-state-focused",e)},_hasFocusClass(e){return V(e||this._focusTarget()).hasClass("dx-state-focused")},_isFocused(){return this._hasFocusClass()},_getKeyboardListeners:()=>[],_attachKeyboardEvents(){this._detachKeyboardEvents();const{focusStateEnabled:e,onKeyboardHandled:n}=this.option(),t=this._getKeyboardListeners().length;(e||t||n)&&(this._keyboardListenerId=vu_on(this._keyboardEventBindingTarget(),this._focusTarget(),r=>this._keyboardHandler(r)))},_keyboardHandler(e,n){if(!n){const{originalEvent:o,keyName:r,which:c}=e,v=this._supportedKeys(o),S=v[r]||v[c];if(void 0!==S&&!S.bind(this)(o,e))return!1}const t=this._getKeyboardListeners(),{onKeyboardHandled:i}=this.option();return t.forEach(o=>o&&o._keyboardHandler(e)),i&&i(e),!0},_refreshFocusState(){this._cleanFocusState(),this._renderFocusState()},_cleanFocusState(){this._focusTarget().removeAttr("tabIndex"),this._toggleFocusClass(!1),this._detachFocusEvents(),this._detachKeyboardEvents()},_detachKeyboardEvents(){vu_off(this._keyboardListenerId),this._keyboardListenerId=null},_attachHoverEvents(){const{hoverStateEnabled:e}=this.option(),n=this._activeStateUnit,t=this._eventBindingTarget();((e,n)=>{let{selector:t,namespace:i}=n;ue.off(e,ln("dxhoverstart",i),t),ue.off(e,ln("dxhoverend",i),t)})(t,{selector:n,namespace:"UIFeedback"}),e&&((e,n,t,i)=>{let{selector:o,namespace:r}=i;ue.on(e,ln("dxhoverend",r),o,c=>t(c)),ue.on(e,ln("dxhoverstart",r),o,c=>Ry(n,{element:c.target,event:c}))})(t,new _l(i=>{let{event:o,element:r}=i;this._hoverStartHandler(o),this.option("hoveredElement",V(r))},{excludeValidators:["readOnly"]}),i=>{this.option("hoveredElement",null),this._hoverEndHandler(i)},{selector:n,namespace:"UIFeedback"})},_attachFeedbackEvents(){const{activeStateEnabled:e}=this.option(),n=this._activeStateUnit,t=this._eventBindingTarget();((e,n)=>{let{namespace:t,selector:i}=n;ue.off(e,ln("dxactive",t),i),ue.off(e,ln("dxinactive",t),i)})(t,{namespace:"UIFeedback",selector:n}),e&&((e,n,t,i)=>{const{selector:o,showTimeout:r,hideTimeout:c,namespace:v}=i;ue.on(e,ln("dxactive",v),o,{timeout:r},S=>Ry(n,{event:S,element:S.currentTarget})),ue.on(e,ln("dxinactive",v),o,{timeout:c},S=>Ry(t,{event:S,element:S.currentTarget}))})(t,new _l(i=>{let{event:o,element:r}=i;return this._toggleActiveState(V(r),!0,o)}),new _l(i=>{let{event:o,element:r}=i;return this._toggleActiveState(V(r),!1,o)},{excludeValidators:["disabled","readOnly"]}),{showTimeout:this._feedbackShowTimeout,hideTimeout:this._feedbackHideTimeout,selector:n,namespace:"UIFeedback"})},_detachFocusEvents(){((e,n)=>{let{namespace:t}=n;ue.off(e,ln("focusin",t)),ue.off(e,ln("focusout",t))})(this._focusEventTarget(),{namespace:`${this.NAME}Focus`})},_attachFocusEvents(){((e,n,t,i)=>{let{namespace:o}=i;ue.on(e,ln("focusin",o),n),ue.on(e,ln("focusout",o),t)})(this._focusEventTarget(),n=>this._focusInHandler(n),n=>this._focusOutHandler(n),{namespace:`${this.NAME}Focus`,isFocusable:(n,t)=>V(t).is(Ey)})},_hoverStartHandler:De,_hoverEndHandler:De,_toggleActiveState(e,n){this.option("isActive",n),e.toggleClass("dx-state-active",n)},_updatedHover(){const e=this._options.silent("hoveredElement");this._hover(e,e)},_findHoverTarget(e){return e&&e.closest(this._activeStateUnit||this._eventBindingTarget())},_hover(e,n){const{hoverStateEnabled:t,disabled:i,isActive:o}=this.option();if((n=this._findHoverTarget(n))&&n.toggleClass("dx-state-hover",!1),e&&t&&!i&&!o){const r=this._findHoverTarget(e);r&&r.toggleClass("dx-state-hover",!0)}},_toggleDisabledState(e){this.$element().toggleClass("dx-state-disabled",!!e),this.setAria("disabled",e||void 0)},_toggleIndependentState(){this.$element().toggleClass("dx-state-independent",this.option("ignoreParentReadOnly"))},_setWidgetOption(e,n){if(!this[e])return;if(lt(n[0]))return void Ee(n[0],(r,c)=>this._setWidgetOption(e,[r,c]));const t=n[0];let i=n[1];1===n.length&&(i=this.option(t));const o=this[`${e}OptionMap`];this[e].option(o?o(t):t,i)},_optionChanged(e){const{name:n,value:t,previousValue:i}=e;switch(n){case"disabled":this._toggleDisabledState(t),this._updatedHover(),this._refreshFocusState();break;case"hint":this._renderHint();break;case"ignoreParentReadOnly":this._toggleIndependentState();break;case"activeStateEnabled":this._attachFeedbackEvents();break;case"hoverStateEnabled":this._attachHoverEvents(),this._updatedHover();break;case"tabIndex":case"focusStateEnabled":this._refreshFocusState();break;case"onFocusIn":case"onFocusOut":case"useResizeObserver":break;case"accessKey":this._renderAccessKey();break;case"hoveredElement":this._hover(t,i);break;case"isActive":this._updatedHover();break;case"visible":this._toggleVisibility(t),this._isVisibilityChangeSupported()&&this._checkVisibilityChanged(t?"shown":"hiding");break;case"onKeyboardHandled":this._attachKeyboardEvents();break;case"onContentReady":this._initContentReadyAction();break;default:this.callBase(e)}},_isVisible(){const{visible:e}=this.option();return this.callBase()&&e},beginUpdate(){this._ready(!1),this.callBase()},endUpdate(){this.callBase(),this._initialized&&this._ready(!0)},_ready(e){if(0===arguments.length)return this._isReady;this._isReady=e},setAria(){if(lt(arguments.length<=0?void 0:arguments[0])){const e=(arguments.length<=1?void 0:arguments[1])||this._getAriaTarget();Ee(arguments.length<=0?void 0:arguments[0],(n,t)=>vM(n,t,e))}else vM(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],(arguments.length<=2?void 0:arguments[2])||this._getAriaTarget())},isReady(){return this._ready()},repaint(){this._refresh()},focus(){Ap_trigger(this._focusTarget())},registerKeyHandler(e,n){const t=this._supportedKeys();this._supportedKeys=()=>pe(t,{[e]:n})}});Ky.getOptionsFromContainer=e=>{let{name:n,fullName:t,value:i}=e,o={};return n===t?o=i:o[t.split(".").pop()]=i,o};const vi=Ky,yM=new ty;yM.add(function(e,n){V.fn[e]=function(t){let o;if("string"==typeof t){const r=t,c=[].slice.call(arguments).slice(1);this.each(function(){const v=n.getInstance(this);if(!v)throw vt.Error("E0009",e);const T=v[r].apply(v,c);void 0===o&&(o=T)})}else this.each(function(){const r=n.getInstance(this);r?r.option(t):new n(this,t)}),o=this;return o}});const xt=function(e,n,t){t?n[e]=t:t=n,mu(t,e),yM.fire(e,t)},m8={"en-150":"en-001","en-AG":"en-001","en-AI":"en-001","en-AU":"en-001","en-BB":"en-001","en-BM":"en-001","en-BS":"en-001","en-BW":"en-001","en-BZ":"en-001","en-CC":"en-001","en-CK":"en-001","en-CM":"en-001","en-CX":"en-001","en-CY":"en-001","en-DG":"en-001","en-DM":"en-001","en-ER":"en-001","en-FJ":"en-001","en-FK":"en-001","en-FM":"en-001","en-GB":"en-001","en-GD":"en-001","en-GG":"en-001","en-GH":"en-001","en-GI":"en-001","en-GM":"en-001","en-GY":"en-001","en-HK":"en-001","en-IE":"en-001","en-IL":"en-001","en-IM":"en-001","en-IN":"en-001","en-IO":"en-001","en-JE":"en-001","en-JM":"en-001","en-KE":"en-001","en-KI":"en-001","en-KN":"en-001","en-KY":"en-001","en-LC":"en-001","en-LR":"en-001","en-LS":"en-001","en-MG":"en-001","en-MO":"en-001","en-MS":"en-001","en-MT":"en-001","en-MU":"en-001","en-MV":"en-001","en-MW":"en-001","en-MY":"en-001","en-NA":"en-001","en-NF":"en-001","en-NG":"en-001","en-NR":"en-001","en-NU":"en-001","en-NZ":"en-001","en-PG":"en-001","en-PK":"en-001","en-PN":"en-001","en-PW":"en-001","en-RW":"en-001","en-SB":"en-001","en-SC":"en-001","en-SD":"en-001","en-SG":"en-001","en-SH":"en-001","en-SL":"en-001","en-SS":"en-001","en-SX":"en-001","en-SZ":"en-001","en-TC":"en-001","en-TK":"en-001","en-TO":"en-001","en-TT":"en-001","en-TV":"en-001","en-TZ":"en-001","en-UG":"en-001","en-VC":"en-001","en-VG":"en-001","en-VU":"en-001","en-WS":"en-001","en-ZA":"en-001","en-ZM":"en-001","en-ZW":"en-001","en-AT":"en-150","en-BE":"en-150","en-CH":"en-150","en-DE":"en-150","en-DK":"en-150","en-FI":"en-150","en-NL":"en-150","en-SE":"en-150","en-SI":"en-150","hi-Latn":"en-IN","es-AR":"es-419","es-BO":"es-419","es-BR":"es-419","es-BZ":"es-419","es-CL":"es-419","es-CO":"es-419","es-CR":"es-419","es-CU":"es-419","es-DO":"es-419","es-EC":"es-419","es-GT":"es-419","es-HN":"es-419","es-MX":"es-419","es-NI":"es-419","es-PA":"es-419","es-PE":"es-419","es-PR":"es-419","es-PY":"es-419","es-SV":"es-419","es-US":"es-419","es-UY":"es-419","es-VE":"es-419",nb:"no",nn:"no","pt-AO":"pt-PT","pt-CH":"pt-PT","pt-CV":"pt-PT","pt-FR":"pt-PT","pt-GQ":"pt-PT","pt-GW":"pt-PT","pt-LU":"pt-PT","pt-MO":"pt-PT","pt-MZ":"pt-PT","pt-ST":"pt-PT","pt-TL":"pt-PT","az-Arab":"und","az-Cyrl":"und","bal-Latn":"und","blt-Latn":"und","bm-Nkoo":"und","bs-Cyrl":"und","byn-Latn":"und","cu-Glag":"und","dje-Arab":"und","dyo-Arab":"und","en-Dsrt":"und","en-Shaw":"und","ff-Adlm":"und","ff-Arab":"und","ha-Arab":"und","iu-Latn":"und","kk-Arab":"und","ks-Deva":"und","ku-Arab":"und","ky-Arab":"und","ky-Latn":"und","ml-Arab":"und","mn-Mong":"und","mni-Mtei":"und","ms-Arab":"und","pa-Arab":"und","sat-Deva":"und","sd-Deva":"und","sd-Khoj":"und","sd-Sind":"und","shi-Latn":"und","so-Arab":"und","sr-Latn":"und","sw-Arab":"und","tg-Arab":"und","ug-Cyrl":"und","uz-Arab":"und","uz-Cyrl":"und","vai-Latn":"und","wo-Arab":"und","yo-Arab":"und","yue-Hans":"und","zh-Hant":"und","zh-Hant-MO":"zh-Hant-HK"},_8=(e,n)=>{const t=e[n];return t?"root"!==t&&t:n.substr(0,n.lastIndexOf("-"))},eo=Zi({locale:(()=>{let e="en";return n=>{if(!n)return e;e=n}})(),getValueByClosestLocale:function(e){let i,n=this.locale(),t=e(n);for(;!t&&!i;)n=_8(m8,n),n?t=e(n):i=!0;return void 0===t&&"en"!==n?e("en"):t}}),v8=pe(!0,{},{en:{Yes:"Yes",No:"No",Cancel:"Cancel",Close:"Close",Clear:"Clear",Done:"Done",Loading:"Loading...",Select:"Select...",Search:"Search",Back:"Back",OK:"OK","dxCollectionWidget-noDataText":"No data to display","dxDropDownEditor-selectLabel":"Select","validation-required":"Required","validation-required-formatted":"{0} is required","validation-numeric":"Value must be a number","validation-numeric-formatted":"{0} must be a number","validation-range":"Value is out of range","validation-range-formatted":"{0} is out of range","validation-stringLength":"The length of the value is not correct","validation-stringLength-formatted":"The length of {0} is not correct","validation-custom":"Value is invalid","validation-custom-formatted":"{0} is invalid","validation-async":"Value is invalid","validation-async-formatted":"{0} is invalid","validation-compare":"Values do not match","validation-compare-formatted":"{0} does not match","validation-pattern":"Value does not match pattern","validation-pattern-formatted":"{0} does not match pattern","validation-email":"Email is invalid","validation-email-formatted":"{0} is invalid","validation-mask":"Value is invalid","dxLookup-searchPlaceholder":"Minimum character number: {0}","dxList-pullingDownText":"Pull down to refresh...","dxList-pulledDownText":"Release to refresh...","dxList-refreshingText":"Refreshing...","dxList-pageLoadingText":"Loading...","dxList-nextButtonText":"More","dxList-selectAll":"Select All","dxList-listAriaLabel":"Items","dxList-listAriaLabel-deletable":"Deletable items","dxListEditDecorator-delete":"Delete","dxListEditDecorator-more":"More","dxScrollView-pullingDownText":"Pull down to refresh...","dxScrollView-pulledDownText":"Release to refresh...","dxScrollView-refreshingText":"Refreshing...","dxScrollView-reachBottomText":"Loading...","dxDateBox-simulatedDataPickerTitleTime":"Select time","dxDateBox-simulatedDataPickerTitleDate":"Select date","dxDateBox-simulatedDataPickerTitleDateTime":"Select date and time","dxDateBox-validation-datetime":"Value must be a date or time","dxDateRangeBox-invalidStartDateMessage":"Start value must be a date","dxDateRangeBox-invalidEndDateMessage":"End value must be a date","dxDateRangeBox-startDateOutOfRangeMessage":"Start date is out of range","dxDateRangeBox-endDateOutOfRangeMessage":"End date is out of range","dxDateRangeBox-startDateLabel":"Start Date","dxDateRangeBox-endDateLabel":"End Date","dxFileUploader-selectFile":"Select a file","dxFileUploader-dropFile":"or Drop a file here","dxFileUploader-bytes":"bytes","dxFileUploader-kb":"KB","dxFileUploader-Mb":"MB","dxFileUploader-Gb":"GB","dxFileUploader-upload":"Upload","dxFileUploader-uploaded":"Uploaded","dxFileUploader-readyToUpload":"Ready to upload","dxFileUploader-uploadAbortedMessage":"Upload cancelled","dxFileUploader-uploadFailedMessage":"Upload failed","dxFileUploader-invalidFileExtension":"File type is not allowed","dxFileUploader-invalidMaxFileSize":"File is too large","dxFileUploader-invalidMinFileSize":"File is too small","dxRangeSlider-ariaFrom":"From","dxRangeSlider-ariaTill":"Till","dxSwitch-switchedOnText":"ON","dxSwitch-switchedOffText":"OFF","dxForm-optionalMark":"optional","dxForm-requiredMessage":"{0} is required","dxNumberBox-invalidValueMessage":"Value must be a number","dxNumberBox-noDataText":"No data","dxDataGrid-emptyHeaderWithColumnChooserText":"Use {0} to display columns","dxDataGrid-emptyHeaderWithGroupPanelText":"Drag a column from the group panel here","dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText":"Use {0} or drag a column from the group panel","dxDataGrid-emptyHeaderColumnChooserText":"column chooser","dxDataGrid-columnChooserTitle":"Column Chooser","dxDataGrid-columnChooserEmptyText":"Drag a column here to hide it","dxDataGrid-groupContinuesMessage":"Continues on the next page","dxDataGrid-groupContinuedMessage":"Continued from the previous page","dxDataGrid-groupHeaderText":"Group by This Column","dxDataGrid-ungroupHeaderText":"Ungroup","dxDataGrid-ungroupAllText":"Ungroup All","dxDataGrid-editingEditRow":"Edit","dxDataGrid-editingSaveRowChanges":"Save","dxDataGrid-editingCancelRowChanges":"Cancel","dxDataGrid-editingDeleteRow":"Delete","dxDataGrid-editingUndeleteRow":"Undelete","dxDataGrid-editingConfirmDeleteMessage":"Are you sure you want to delete this record?","dxDataGrid-validationCancelChanges":"Cancel changes","dxDataGrid-groupPanelEmptyText":"Drag a column header here to group by that column","dxDataGrid-noDataText":"No data","dxDataGrid-searchPanelPlaceholder":"Search...","dxDataGrid-filterRowShowAllText":"(All)","dxDataGrid-filterRowResetOperationText":"Reset","dxDataGrid-filterRowOperationEquals":"Equals","dxDataGrid-filterRowOperationNotEquals":"Does not equal","dxDataGrid-filterRowOperationLess":"Less than","dxDataGrid-filterRowOperationLessOrEquals":"Less than or equal to","dxDataGrid-filterRowOperationGreater":"Greater than","dxDataGrid-filterRowOperationGreaterOrEquals":"Greater than or equal to","dxDataGrid-filterRowOperationStartsWith":"Starts with","dxDataGrid-filterRowOperationContains":"Contains","dxDataGrid-filterRowOperationNotContains":"Does not contain","dxDataGrid-filterRowOperationEndsWith":"Ends with","dxDataGrid-filterRowOperationBetween":"Between","dxDataGrid-filterRowOperationBetweenStartText":"Start","dxDataGrid-filterRowOperationBetweenEndText":"End","dxDataGrid-ariaSearchBox":"Search box","dxDataGrid-applyFilterText":"Apply filter","dxDataGrid-trueText":"true","dxDataGrid-falseText":"false","dxDataGrid-sortingAscendingText":"Sort Ascending","dxDataGrid-sortingDescendingText":"Sort Descending","dxDataGrid-sortingClearText":"Clear Sorting","dxDataGrid-ariaNotSortedColumn":"Not sorted column","dxDataGrid-ariaSortedAscendingColumn":"Column sorted in ascending order","dxDataGrid-ariaSortedDescendingColumn":"Column sorted in descending order","dxDataGrid-ariaSortIndex":"Sort index {0}","dxDataGrid-editingSaveAllChanges":"Save changes","dxDataGrid-editingCancelAllChanges":"Discard changes","dxDataGrid-editingAddRow":"Add a row","dxDataGrid-summaryMin":"Min: {0}","dxDataGrid-summaryMinOtherColumn":"Min of {1} is {0}","dxDataGrid-summaryMax":"Max: {0}","dxDataGrid-summaryMaxOtherColumn":"Max of {1} is {0}","dxDataGrid-summaryAvg":"Avg: {0}","dxDataGrid-summaryAvgOtherColumn":"Avg of {1} is {0}","dxDataGrid-summarySum":"Sum: {0}","dxDataGrid-summarySumOtherColumn":"Sum of {1} is {0}","dxDataGrid-summaryCount":"Count: {0}","dxDataGrid-columnFixingFix":"Fix","dxDataGrid-columnFixingUnfix":"Unfix","dxDataGrid-columnFixingLeftPosition":"To the left","dxDataGrid-columnFixingRightPosition":"To the right","dxDataGrid-exportTo":"Export","dxDataGrid-exportToExcel":"Export to Excel file","dxDataGrid-exporting":"Exporting...","dxDataGrid-excelFormat":"Excel file","dxDataGrid-selectedRows":"Selected rows","dxDataGrid-exportSelectedRows":"Export selected rows to {0}","dxDataGrid-exportAll":"Export all data to {0}","dxDataGrid-headerFilterLabel":"Filter options","dxDataGrid-headerFilterIndicatorLabel":"Show filter options for column '{0}'","dxDataGrid-headerFilterEmptyValue":"(Blanks)","dxDataGrid-headerFilterOK":"OK","dxDataGrid-headerFilterCancel":"Cancel","dxDataGrid-ariaAdaptiveCollapse":"Hide additional data","dxDataGrid-ariaAdaptiveExpand":"Display additional data","dxDataGrid-ariaColumn":"Column","dxDataGrid-ariaColumnHeader":"Column header","dxDataGrid-ariaValue":"Value","dxDataGrid-ariaError":"Error","dxDataGrid-ariaRevertButton":"Press Escape to discard the changes","dxDataGrid-ariaFilterCell":"Filter cell","dxDataGrid-ariaCollapse":"Collapse","dxDataGrid-ariaModifiedCell":"Modified","dxDataGrid-ariaDeletedCell":"Deleted","dxDataGrid-ariaEditableCell":"Editable","dxDataGrid-ariaExpand":"Expand","dxDataGrid-ariaCollapsedRow":"Collapsed row","dxDataGrid-ariaExpandedRow":"Expanded row","dxDataGrid-ariaDataGrid":"Data grid with {0} rows and {1} columns","dxDataGrid-ariaSearchInGrid":"Search in the data grid","dxDataGrid-ariaSelectAll":"Select all","dxDataGrid-ariaSelectRow":"Select row","dxDataGrid-ariaToolbar":"Data grid toolbar","dxDataGrid-ariaEditForm":"Edit form","dxDataGrid-filterBuilderPopupTitle":"Filter Builder","dxDataGrid-filterPanelCreateFilter":"Create Filter","dxDataGrid-filterPanelClearFilter":"Clear","dxDataGrid-filterPanelFilterEnabledHint":"Enable the filter","dxDataGrid-masterDetail":"Cell with details","dxTreeList-ariaTreeList":"Tree list with {0} rows and {1} columns","dxTreeList-ariaSearchInGrid":"Search in the tree list","dxTreeList-ariaToolbar":"Tree list toolbar","dxTreeList-editingAddRowToNode":"Add","dxPager-infoText":"Page {0} of {1} ({2} items)","dxPager-pagesCountText":"of","dxPager-pageSize":"Items per page: {0}","dxPager-pageSizesAllText":"All","dxPager-page":"Page {0}","dxPager-prevPage":"Previous Page","dxPager-nextPage":"Next Page","dxPager-ariaLabel":"Page Navigation","dxPager-ariaPageSize":"Page size","dxPager-ariaPageNumber":"Page number","dxPivotGrid-grandTotal":"Grand Total","dxPivotGrid-total":"{0} Total","dxPivotGrid-fieldChooserTitle":"Field Chooser","dxPivotGrid-showFieldChooser":"Show Field Chooser","dxPivotGrid-expandAll":"Expand All","dxPivotGrid-collapseAll":"Collapse All","dxPivotGrid-sortColumnBySummary":'Sort "{0}" by This Column',"dxPivotGrid-sortRowBySummary":'Sort "{0}" by This Row',"dxPivotGrid-removeAllSorting":"Remove All Sorting","dxPivotGrid-dataNotAvailable":"N/A","dxPivotGrid-rowFields":"Row Fields","dxPivotGrid-columnFields":"Column Fields","dxPivotGrid-dataFields":"Data Fields","dxPivotGrid-filterFields":"Filter Fields","dxPivotGrid-allFields":"All Fields","dxPivotGrid-columnFieldArea":"Drop Column Fields Here","dxPivotGrid-dataFieldArea":"Drop Data Fields Here","dxPivotGrid-rowFieldArea":"Drop Row Fields Here","dxPivotGrid-filterFieldArea":"Drop Filter Fields Here","dxScheduler-editorLabelTitle":"Subject","dxScheduler-editorLabelStartDate":"Start Date","dxScheduler-editorLabelEndDate":"End Date","dxScheduler-editorLabelDescription":"Description","dxScheduler-editorLabelRecurrence":"Repeat","dxScheduler-openAppointment":"Open appointment","dxScheduler-recurrenceNever":"Never","dxScheduler-recurrenceMinutely":"Every minute","dxScheduler-recurrenceHourly":"Hourly","dxScheduler-recurrenceDaily":"Daily","dxScheduler-recurrenceWeekly":"Weekly","dxScheduler-recurrenceMonthly":"Monthly","dxScheduler-recurrenceYearly":"Yearly","dxScheduler-recurrenceRepeatEvery":"Repeat Every","dxScheduler-recurrenceRepeatOn":"Repeat On","dxScheduler-recurrenceEnd":"End repeat","dxScheduler-recurrenceAfter":"After","dxScheduler-recurrenceOn":"On","dxScheduler-recurrenceRepeatMinutely":"minute(s)","dxScheduler-recurrenceRepeatHourly":"hour(s)","dxScheduler-recurrenceRepeatDaily":"day(s)","dxScheduler-recurrenceRepeatWeekly":"week(s)","dxScheduler-recurrenceRepeatMonthly":"month(s)","dxScheduler-recurrenceRepeatYearly":"year(s)","dxScheduler-switcherDay":"Day","dxScheduler-switcherWeek":"Week","dxScheduler-switcherWorkWeek":"Work Week","dxScheduler-switcherMonth":"Month","dxScheduler-switcherAgenda":"Agenda","dxScheduler-switcherTimelineDay":"Timeline Day","dxScheduler-switcherTimelineWeek":"Timeline Week","dxScheduler-switcherTimelineWorkWeek":"Timeline Work Week","dxScheduler-switcherTimelineMonth":"Timeline Month","dxScheduler-recurrenceRepeatOnDate":"on date","dxScheduler-recurrenceRepeatCount":"occurrence(s)","dxScheduler-allDay":"All day","dxScheduler-confirmRecurrenceEditTitle":"Edit Recurring Appointment","dxScheduler-confirmRecurrenceDeleteTitle":"Delete Recurring Appointment","dxScheduler-confirmRecurrenceEditMessage":"Do you want to edit only this appointment or the whole series?","dxScheduler-confirmRecurrenceDeleteMessage":"Do you want to delete only this appointment or the whole series?","dxScheduler-confirmRecurrenceEditSeries":"Edit series","dxScheduler-confirmRecurrenceDeleteSeries":"Delete series","dxScheduler-confirmRecurrenceEditOccurrence":"Edit appointment","dxScheduler-confirmRecurrenceDeleteOccurrence":"Delete appointment","dxScheduler-noTimezoneTitle":"No timezone","dxScheduler-moreAppointments":"{0} more","dxCalendar-currentDay":"Today","dxCalendar-currentMonth":"Current month","dxCalendar-currentYear":"Current year","dxCalendar-currentYearRange":"Current year range","dxCalendar-todayButtonText":"Today","dxCalendar-ariaWidgetName":"Calendar","dxCalendar-previousMonthButtonLabel":"Previous month","dxCalendar-previousYearButtonLabel":"Previous year","dxCalendar-previousDecadeButtonLabel":"Previous decade","dxCalendar-previousCenturyButtonLabel":"Previous century","dxCalendar-nextMonthButtonLabel":"Next month","dxCalendar-nextYearButtonLabel":"Next year","dxCalendar-nextDecadeButtonLabel":"Next decade","dxCalendar-nextCenturyButtonLabel":"Next century","dxCalendar-captionMonthLabel":"Month selection","dxCalendar-captionYearLabel":"Year selection","dxCalendar-captionDecadeLabel":"Decade selection","dxCalendar-captionCenturyLabel":"Century selection","dxCalendar-selectedDate":"The selected date is {0}","dxCalendar-selectedDateRange":"The selected date range is from {0} to {1}","dxColorView-ariaRed":"Red","dxColorView-ariaGreen":"Green","dxColorView-ariaBlue":"Blue","dxColorView-ariaAlpha":"Transparency","dxColorView-ariaHex":"Color code","dxTagBox-selected":"{0} selected","dxTagBox-allSelected":"All selected ({0})","dxTagBox-moreSelected":"{0} more","dxTagBox-tagRoleDescription":"Tag. Press the delete button to remove this tag","vizExport-printingButtonText":"Print","vizExport-titleMenuText":"Exporting/Printing","vizExport-exportButtonText":"{0} file","dxFilterBuilder-and":"And","dxFilterBuilder-or":"Or","dxFilterBuilder-notAnd":"Not And","dxFilterBuilder-notOr":"Not Or","dxFilterBuilder-addCondition":"Add Condition","dxFilterBuilder-addGroup":"Add Group","dxFilterBuilder-enterValueText":"<enter a value>","dxFilterBuilder-filterOperationEquals":"Equals","dxFilterBuilder-filterOperationNotEquals":"Does not equal","dxFilterBuilder-filterOperationLess":"Is less than","dxFilterBuilder-filterOperationLessOrEquals":"Is less than or equal to","dxFilterBuilder-filterOperationGreater":"Is greater than","dxFilterBuilder-filterOperationGreaterOrEquals":"Is greater than or equal to","dxFilterBuilder-filterOperationStartsWith":"Starts with","dxFilterBuilder-filterOperationContains":"Contains","dxFilterBuilder-filterOperationNotContains":"Does not contain","dxFilterBuilder-filterOperationEndsWith":"Ends with","dxFilterBuilder-filterOperationIsBlank":"Is blank","dxFilterBuilder-filterOperationIsNotBlank":"Is not blank","dxFilterBuilder-filterOperationBetween":"Is between","dxFilterBuilder-filterOperationAnyOf":"Is any of","dxFilterBuilder-filterOperationNoneOf":"Is none of","dxHtmlEditor-dialogColorCaption":"Change Font Color","dxHtmlEditor-dialogBackgroundCaption":"Change Background Color","dxHtmlEditor-dialogLinkCaption":"Add Link","dxHtmlEditor-dialogLinkUrlField":"URL","dxHtmlEditor-dialogLinkTextField":"Text","dxHtmlEditor-dialogLinkTargetField":"Open link in new window","dxHtmlEditor-dialogImageCaption":"Add Image","dxHtmlEditor-dialogImageUrlField":"URL","dxHtmlEditor-dialogImageAltField":"Alternate text","dxHtmlEditor-dialogImageWidthField":"Width (px)","dxHtmlEditor-dialogImageHeightField":"Height (px)","dxHtmlEditor-dialogInsertTableRowsField":"Rows","dxHtmlEditor-dialogInsertTableColumnsField":"Columns","dxHtmlEditor-dialogInsertTableCaption":"Insert Table","dxHtmlEditor-dialogUpdateImageCaption":"Update Image","dxHtmlEditor-dialogImageUpdateButton":"Update","dxHtmlEditor-dialogImageAddButton":"Add","dxHtmlEditor-dialogImageSpecifyUrl":"From the Web","dxHtmlEditor-dialogImageSelectFile":"From This Device","dxHtmlEditor-dialogImageKeepAspectRatio":"Keep Aspect Ratio","dxHtmlEditor-dialogImageEncodeToBase64":"Encode to Base64","dxHtmlEditor-heading":"Heading","dxHtmlEditor-normalText":"Normal text","dxHtmlEditor-background":"Background Color","dxHtmlEditor-bold":"Bold","dxHtmlEditor-color":"Font Color","dxHtmlEditor-font":"Font","dxHtmlEditor-italic":"Italic","dxHtmlEditor-link":"Add Link","dxHtmlEditor-image":"Add Image","dxHtmlEditor-size":"Size","dxHtmlEditor-strike":"Strikethrough","dxHtmlEditor-subscript":"Subscript","dxHtmlEditor-superscript":"Superscript","dxHtmlEditor-underline":"Underline","dxHtmlEditor-blockquote":"Blockquote","dxHtmlEditor-header":"Header","dxHtmlEditor-increaseIndent":"Increase Indent","dxHtmlEditor-decreaseIndent":"Decrease Indent","dxHtmlEditor-orderedList":"Ordered List","dxHtmlEditor-bulletList":"Bullet List","dxHtmlEditor-alignLeft":"Align Left","dxHtmlEditor-alignCenter":"Align Center","dxHtmlEditor-alignRight":"Align Right","dxHtmlEditor-alignJustify":"Align Justify","dxHtmlEditor-codeBlock":"Code Block","dxHtmlEditor-variable":"Add Variable","dxHtmlEditor-undo":"Undo","dxHtmlEditor-redo":"Redo","dxHtmlEditor-clear":"Clear Formatting","dxHtmlEditor-insertTable":"Insert Table","dxHtmlEditor-insertHeaderRow":"Insert Header Row","dxHtmlEditor-insertRowAbove":"Insert Row Above","dxHtmlEditor-insertRowBelow":"Insert Row Below","dxHtmlEditor-insertColumnLeft":"Insert Column Left","dxHtmlEditor-insertColumnRight":"Insert Column Right","dxHtmlEditor-deleteColumn":"Delete Column","dxHtmlEditor-deleteRow":"Delete Row","dxHtmlEditor-deleteTable":"Delete Table","dxHtmlEditor-cellProperties":"Cell Properties","dxHtmlEditor-tableProperties":"Table Properties","dxHtmlEditor-insert":"Insert","dxHtmlEditor-delete":"Delete","dxHtmlEditor-border":"Border","dxHtmlEditor-style":"Style","dxHtmlEditor-width":"Width","dxHtmlEditor-height":"Height","dxHtmlEditor-borderColor":"Color","dxHtmlEditor-tableBackground":"Background","dxHtmlEditor-dimensions":"Dimensions","dxHtmlEditor-alignment":"Alignment","dxHtmlEditor-horizontal":"Horizontal","dxHtmlEditor-vertical":"Vertical","dxHtmlEditor-paddingVertical":"Vertical Padding","dxHtmlEditor-paddingHorizontal":"Horizontal Padding","dxHtmlEditor-pixels":"Pixels","dxHtmlEditor-list":"List","dxHtmlEditor-ordered":"Ordered","dxHtmlEditor-bullet":"Bullet","dxHtmlEditor-align":"Align","dxHtmlEditor-center":"Center","dxHtmlEditor-left":"Left","dxHtmlEditor-right":"Right","dxHtmlEditor-indent":"Indent","dxHtmlEditor-justify":"Justify","dxHtmlEditor-borderStyleNone":"none","dxHtmlEditor-borderStyleHidden":"hidden","dxHtmlEditor-borderStyleDotted":"dotted","dxHtmlEditor-borderStyleDashed":"dashed","dxHtmlEditor-borderStyleSolid":"solid","dxHtmlEditor-borderStyleDouble":"double","dxHtmlEditor-borderStyleGroove":"groove","dxHtmlEditor-borderStyleRidge":"ridge","dxHtmlEditor-borderStyleInset":"inset","dxHtmlEditor-borderStyleOutset":"outset","dxFileManager-newDirectoryName":"Untitled directory","dxFileManager-rootDirectoryName":"Files","dxFileManager-errorNoAccess":"Access Denied. Operation could not be completed.","dxFileManager-errorDirectoryExistsFormat":"Directory '{0}' already exists.","dxFileManager-errorFileExistsFormat":"File '{0}' already exists.","dxFileManager-errorFileNotFoundFormat":"File '{0}' not found.","dxFileManager-errorDirectoryNotFoundFormat":"Directory '{0}' not found.","dxFileManager-errorWrongFileExtension":"File extension is not allowed.","dxFileManager-errorMaxFileSizeExceeded":"File size exceeds the maximum allowed size.","dxFileManager-errorInvalidSymbols":"This name contains invalid characters.","dxFileManager-errorDefault":"Unspecified error.","dxFileManager-errorDirectoryOpenFailed":"The directory cannot be opened","dxFileManager-commandCreate":"New directory","dxFileManager-commandRename":"Rename","dxFileManager-commandMove":"Move to","dxFileManager-commandCopy":"Copy to","dxFileManager-commandDelete":"Delete","dxFileManager-commandDownload":"Download","dxFileManager-commandUpload":"Upload files","dxFileManager-commandRefresh":"Refresh","dxFileManager-commandThumbnails":"Thumbnails View","dxFileManager-commandDetails":"Details View","dxFileManager-commandClearSelection":"Clear selection","dxFileManager-commandShowNavPane":"Toggle navigation pane","dxFileManager-dialogDirectoryChooserMoveTitle":"Move to","dxFileManager-dialogDirectoryChooserMoveButtonText":"Move","dxFileManager-dialogDirectoryChooserCopyTitle":"Copy to","dxFileManager-dialogDirectoryChooserCopyButtonText":"Copy","dxFileManager-dialogRenameItemTitle":"Rename","dxFileManager-dialogRenameItemButtonText":"Save","dxFileManager-dialogCreateDirectoryTitle":"New directory","dxFileManager-dialogCreateDirectoryButtonText":"Create","dxFileManager-dialogDeleteItemTitle":"Delete","dxFileManager-dialogDeleteItemButtonText":"Delete","dxFileManager-dialogDeleteItemSingleItemConfirmation":"Are you sure you want to delete {0}?","dxFileManager-dialogDeleteItemMultipleItemsConfirmation":"Are you sure you want to delete {0} items?","dxFileManager-dialogButtonCancel":"Cancel","dxFileManager-editingCreateSingleItemProcessingMessage":"Creating a directory inside {0}","dxFileManager-editingCreateSingleItemSuccessMessage":"Created a directory inside {0}","dxFileManager-editingCreateSingleItemErrorMessage":"Directory was not created","dxFileManager-editingCreateCommonErrorMessage":"Directory was not created","dxFileManager-editingRenameSingleItemProcessingMessage":"Renaming an item inside {0}","dxFileManager-editingRenameSingleItemSuccessMessage":"Renamed an item inside {0}","dxFileManager-editingRenameSingleItemErrorMessage":"Item was not renamed","dxFileManager-editingRenameCommonErrorMessage":"Item was not renamed","dxFileManager-editingDeleteSingleItemProcessingMessage":"Deleting an item from {0}","dxFileManager-editingDeleteMultipleItemsProcessingMessage":"Deleting {0} items from {1}","dxFileManager-editingDeleteSingleItemSuccessMessage":"Deleted an item from {0}","dxFileManager-editingDeleteMultipleItemsSuccessMessage":"Deleted {0} items from {1}","dxFileManager-editingDeleteSingleItemErrorMessage":"Item was not deleted","dxFileManager-editingDeleteMultipleItemsErrorMessage":"{0} items were not deleted","dxFileManager-editingDeleteCommonErrorMessage":"Some items were not deleted","dxFileManager-editingMoveSingleItemProcessingMessage":"Moving an item to {0}","dxFileManager-editingMoveMultipleItemsProcessingMessage":"Moving {0} items to {1}","dxFileManager-editingMoveSingleItemSuccessMessage":"Moved an item to {0}","dxFileManager-editingMoveMultipleItemsSuccessMessage":"Moved {0} items to {1}","dxFileManager-editingMoveSingleItemErrorMessage":"Item was not moved","dxFileManager-editingMoveMultipleItemsErrorMessage":"{0} items were not moved","dxFileManager-editingMoveCommonErrorMessage":"Some items were not moved","dxFileManager-editingCopySingleItemProcessingMessage":"Copying an item to {0}","dxFileManager-editingCopyMultipleItemsProcessingMessage":"Copying {0} items to {1}","dxFileManager-editingCopySingleItemSuccessMessage":"Copied an item to {0}","dxFileManager-editingCopyMultipleItemsSuccessMessage":"Copied {0} items to {1}","dxFileManager-editingCopySingleItemErrorMessage":"Item was not copied","dxFileManager-editingCopyMultipleItemsErrorMessage":"{0} items were not copied","dxFileManager-editingCopyCommonErrorMessage":"Some items were not copied","dxFileManager-editingUploadSingleItemProcessingMessage":"Uploading an item to {0}","dxFileManager-editingUploadMultipleItemsProcessingMessage":"Uploading {0} items to {1}","dxFileManager-editingUploadSingleItemSuccessMessage":"Uploaded an item to {0}","dxFileManager-editingUploadMultipleItemsSuccessMessage":"Uploaded {0} items to {1}","dxFileManager-editingUploadSingleItemErrorMessage":"Item was not uploaded","dxFileManager-editingUploadMultipleItemsErrorMessage":"{0} items were not uploaded","dxFileManager-editingUploadCanceledMessage":"Canceled","dxFileManager-editingDownloadSingleItemErrorMessage":"Item was not downloaded","dxFileManager-editingDownloadMultipleItemsErrorMessage":"{0} items were not downloaded","dxFileManager-listDetailsColumnCaptionName":"Name","dxFileManager-listDetailsColumnCaptionDateModified":"Date Modified","dxFileManager-listDetailsColumnCaptionFileSize":"File Size","dxFileManager-listThumbnailsTooltipTextSize":"Size","dxFileManager-listThumbnailsTooltipTextDateModified":"Date Modified","dxFileManager-notificationProgressPanelTitle":"Progress","dxFileManager-notificationProgressPanelEmptyListText":"No operations","dxFileManager-notificationProgressPanelOperationCanceled":"Canceled","dxDiagram-categoryGeneral":"General","dxDiagram-categoryFlowchart":"Flowchart","dxDiagram-categoryOrgChart":"Org Chart","dxDiagram-categoryContainers":"Containers","dxDiagram-categoryCustom":"Custom","dxDiagram-commandExportToSvg":"Export to SVG","dxDiagram-commandExportToPng":"Export to PNG","dxDiagram-commandExportToJpg":"Export to JPEG","dxDiagram-commandUndo":"Undo","dxDiagram-commandRedo":"Redo","dxDiagram-commandFontName":"Font Name","dxDiagram-commandFontSize":"Font Size","dxDiagram-commandBold":"Bold","dxDiagram-commandItalic":"Italic","dxDiagram-commandUnderline":"Underline","dxDiagram-commandTextColor":"Font Color","dxDiagram-commandLineColor":"Line Color","dxDiagram-commandLineWidth":"Line Width","dxDiagram-commandLineStyle":"Line Style","dxDiagram-commandLineStyleSolid":"Solid","dxDiagram-commandLineStyleDotted":"Dotted","dxDiagram-commandLineStyleDashed":"Dashed","dxDiagram-commandFillColor":"Fill Color","dxDiagram-commandAlignLeft":"Align Left","dxDiagram-commandAlignCenter":"Align Center","dxDiagram-commandAlignRight":"Align Right","dxDiagram-commandConnectorLineType":"Connector Line Type","dxDiagram-commandConnectorLineStraight":"Straight","dxDiagram-commandConnectorLineOrthogonal":"Orthogonal","dxDiagram-commandConnectorLineStart":"Connector Line Start","dxDiagram-commandConnectorLineEnd":"Connector Line End","dxDiagram-commandConnectorLineNone":"None","dxDiagram-commandConnectorLineArrow":"Arrow","dxDiagram-commandFullscreen":"Full Screen","dxDiagram-commandUnits":"Units","dxDiagram-commandPageSize":"Page Size","dxDiagram-commandPageOrientation":"Page Orientation","dxDiagram-commandPageOrientationLandscape":"Landscape","dxDiagram-commandPageOrientationPortrait":"Portrait","dxDiagram-commandPageColor":"Page Color","dxDiagram-commandShowGrid":"Show Grid","dxDiagram-commandSnapToGrid":"Snap to Grid","dxDiagram-commandGridSize":"Grid Size","dxDiagram-commandZoomLevel":"Zoom Level","dxDiagram-commandAutoZoom":"Auto Zoom","dxDiagram-commandFitToContent":"Fit to Content","dxDiagram-commandFitToWidth":"Fit to Width","dxDiagram-commandAutoZoomByContent":"Auto Zoom by Content","dxDiagram-commandAutoZoomByWidth":"Auto Zoom by Width","dxDiagram-commandSimpleView":"Simple View","dxDiagram-commandCut":"Cut","dxDiagram-commandCopy":"Copy","dxDiagram-commandPaste":"Paste","dxDiagram-commandSelectAll":"Select All","dxDiagram-commandDelete":"Delete","dxDiagram-commandBringToFront":"Bring to Front","dxDiagram-commandSendToBack":"Send to Back","dxDiagram-commandLock":"Lock","dxDiagram-commandUnlock":"Unlock","dxDiagram-commandInsertShapeImage":"Insert Image...","dxDiagram-commandEditShapeImage":"Change Image...","dxDiagram-commandDeleteShapeImage":"Delete Image","dxDiagram-commandLayoutLeftToRight":"Left-to-right","dxDiagram-commandLayoutRightToLeft":"Right-to-left","dxDiagram-commandLayoutTopToBottom":"Top-to-bottom","dxDiagram-commandLayoutBottomToTop":"Bottom-to-top","dxDiagram-unitIn":"in","dxDiagram-unitCm":"cm","dxDiagram-unitPx":"px","dxDiagram-dialogButtonOK":"OK","dxDiagram-dialogButtonCancel":"Cancel","dxDiagram-dialogInsertShapeImageTitle":"Insert Image","dxDiagram-dialogEditShapeImageTitle":"Change Image","dxDiagram-dialogEditShapeImageSelectButton":"Select image","dxDiagram-dialogEditShapeImageLabelText":"or drop a file here","dxDiagram-uiExport":"Export","dxDiagram-uiProperties":"Properties","dxDiagram-uiSettings":"Settings","dxDiagram-uiShowToolbox":"Show Toolbox","dxDiagram-uiSearch":"Search","dxDiagram-uiStyle":"Style","dxDiagram-uiLayout":"Layout","dxDiagram-uiLayoutTree":"Tree","dxDiagram-uiLayoutLayered":"Layered","dxDiagram-uiDiagram":"Diagram","dxDiagram-uiText":"Text","dxDiagram-uiObject":"Object","dxDiagram-uiConnector":"Connector","dxDiagram-uiPage":"Page","dxDiagram-shapeText":"Text","dxDiagram-shapeRectangle":"Rectangle","dxDiagram-shapeEllipse":"Ellipse","dxDiagram-shapeCross":"Cross","dxDiagram-shapeTriangle":"Triangle","dxDiagram-shapeDiamond":"Diamond","dxDiagram-shapeHeart":"Heart","dxDiagram-shapePentagon":"Pentagon","dxDiagram-shapeHexagon":"Hexagon","dxDiagram-shapeOctagon":"Octagon","dxDiagram-shapeStar":"Star","dxDiagram-shapeArrowLeft":"Left Arrow","dxDiagram-shapeArrowUp":"Up Arrow","dxDiagram-shapeArrowRight":"Right Arrow","dxDiagram-shapeArrowDown":"Down Arrow","dxDiagram-shapeArrowUpDown":"Up Down Arrow","dxDiagram-shapeArrowLeftRight":"Left Right Arrow","dxDiagram-shapeProcess":"Process","dxDiagram-shapeDecision":"Decision","dxDiagram-shapeTerminator":"Terminator","dxDiagram-shapePredefinedProcess":"Predefined Process","dxDiagram-shapeDocument":"Document","dxDiagram-shapeMultipleDocuments":"Multiple Documents","dxDiagram-shapeManualInput":"Manual Input","dxDiagram-shapePreparation":"Preparation","dxDiagram-shapeData":"Data","dxDiagram-shapeDatabase":"Database","dxDiagram-shapeHardDisk":"Hard Disk","dxDiagram-shapeInternalStorage":"Internal Storage","dxDiagram-shapePaperTape":"Paper Tape","dxDiagram-shapeManualOperation":"Manual Operation","dxDiagram-shapeDelay":"Delay","dxDiagram-shapeStoredData":"Stored Data","dxDiagram-shapeDisplay":"Display","dxDiagram-shapeMerge":"Merge","dxDiagram-shapeConnector":"Connector","dxDiagram-shapeOr":"Or","dxDiagram-shapeSummingJunction":"Summing Junction","dxDiagram-shapeContainerDefaultText":"Container","dxDiagram-shapeVerticalContainer":"Vertical Container","dxDiagram-shapeHorizontalContainer":"Horizontal Container","dxDiagram-shapeCardDefaultText":"Person's Name","dxDiagram-shapeCardWithImageOnLeft":"Card with Image on the Left","dxDiagram-shapeCardWithImageOnTop":"Card with Image on the Top","dxDiagram-shapeCardWithImageOnRight":"Card with Image on the Right","dxGantt-dialogTitle":"Title","dxGantt-dialogStartTitle":"Start","dxGantt-dialogEndTitle":"End","dxGantt-dialogProgressTitle":"Progress","dxGantt-dialogResourcesTitle":"Resources","dxGantt-dialogResourceManagerTitle":"Resource Manager","dxGantt-dialogTaskDetailsTitle":"Task Details","dxGantt-dialogEditResourceListHint":"Edit Resource List","dxGantt-dialogEditNoResources":"No resources","dxGantt-dialogButtonAdd":"Add","dxGantt-contextMenuNewTask":"New Task","dxGantt-contextMenuNewSubtask":"New Subtask","dxGantt-contextMenuDeleteTask":"Delete Task","dxGantt-contextMenuDeleteDependency":"Delete Dependency","dxGantt-dialogTaskDeleteConfirmation":"Deleting a task also deletes all its dependencies and subtasks. Are you sure you want to delete this task?","dxGantt-dialogDependencyDeleteConfirmation":"Are you sure you want to delete the dependency from the task?","dxGantt-dialogResourcesDeleteConfirmation":"Deleting a resource also deletes it from tasks to which this resource is assigned. Are you sure you want to delete these resources? Resources: {0}","dxGantt-dialogConstraintCriticalViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationMessage":"The task you are attempting to move is linked to a second task by a dependency relation. How would you like to proceed?","dxGantt-dialogCancelOperationMessage":"Cancel the operation","dxGantt-dialogDeleteDependencyMessage":"Delete the dependency","dxGantt-dialogMoveTaskAndKeepDependencyMessage":"Move the task and keep the dependency","dxGantt-dialogConstraintCriticalViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. This change would conflict with dependency rules. How would you like to proceed?","dxGantt-dialogConstraintViolationSeveralTasksMessage":"The task you are attempting to move is linked to another tasks by dependency relations. How would you like to proceed?","dxGantt-dialogDeleteDependenciesMessage":"Delete the dependency relations","dxGantt-dialogMoveTaskAndKeepDependenciesMessage":"Move the task and keep the dependencies","dxGantt-undo":"Undo","dxGantt-redo":"Redo","dxGantt-expandAll":"Expand All","dxGantt-collapseAll":"Collapse All","dxGantt-addNewTask":"Add New Task","dxGantt-deleteSelectedTask":"Delete Selected Task","dxGantt-zoomIn":"Zoom In","dxGantt-zoomOut":"Zoom Out","dxGantt-fullScreen":"Full Screen","dxGantt-quarter":"Q{0}","dxGantt-sortingAscendingText":"Sort Ascending","dxGantt-sortingDescendingText":"Sort Descending","dxGantt-sortingClearText":"Clear Sorting","dxGantt-showResources":"Show Resources","dxGantt-showDependencies":"Show Dependencies","dxGantt-dialogStartDateValidation":"Start date must be after {0}","dxGantt-dialogEndDateValidation":"End date must be after {0}","dxGallery-itemName":"Gallery item","dxMultiView-elementAriaRoleDescription":"MultiView","dxMultiView-elementAriaLabel":"Use the arrow keys or swipe to navigate between views","dxMultiView-itemAriaRoleDescription":"View","dxMultiView-itemAriaLabel":"{0} of {1}","dxSplitter-resizeHandleAriaLabel":"Split bar"}}),qy={},de=Zi({engine:function(){return"base"},_dictionary:v8,load:function(e){pe(!0,this._dictionary,e)},_localizablePrefix:"@",setup:function(e){this._localizablePrefix=e},localizeString:function(e){const n=this,t=new RegExp("(^|[^a-zA-Z_0-9"+n._localizablePrefix+"-]+)("+n._localizablePrefix+"{1,2})([a-zA-Z_0-9-]+)","g"),i=n._localizablePrefix+n._localizablePrefix;return e.replace(t,(o,r,c,v)=>{const S=n._localizablePrefix+v;let T;return c!==i&&(T=n.format(v)),T||(qy[v]=function(e){return cy(dy(e).replace(/-/g," "))}(v)),r+(T||S)})},getMessagesByLocales:function(){return this._dictionary},getDictionary:function(e){return e?qy:pe({},qy,this.getMessagesByLocales()[eo.locale()])},getFormatter:function(e){return this._getFormatterBase(e)||this._getFormatterBase(e,"en")},_getFormatterBase:function(e,n){const t=eo.getValueByClosestLocale(i=>((e,n)=>{var t;return e[n]||n?.toLowerCase&&(null===(t=Object.entries(e).find(i=>{let[o]=i;return o.toLowerCase()===n.toLowerCase()}))||void 0===t?void 0:t[1])||{}})(this._dictionary,i)[e]);if(t)return function(){const i=1===arguments.length&&Array.isArray(arguments[0])?arguments[0].slice(0):Array.prototype.slice.call(arguments,0);return i.unshift(t),Bv.apply(this,i)}},format:function(e){const n=this.getFormatter(e),t=Array.prototype.slice.call(arguments,1);return n&&n.apply(this,t)||""}}),zs=bt(),Jt=zv(vt.ERROR_MESSAGES,{E1001:"Module '{0}'. Controller '{1}' is already registered",E1002:"Module '{0}'. Controller '{1}' does not inherit from DevExpress.ui.dxDataGrid.Controller",E1003:"Module '{0}'. View '{1}' is already registered",E1004:"Module '{0}'. View '{1}' does not inherit from DevExpress.ui.dxDataGrid.View",E1005:"Public method '{0}' is already registered",E1006:"Public method '{0}.{1}' does not exist",E1007:"State storing cannot be provided due to the restrictions of the browser",E1010:"The template does not contain the TextBox widget",E1011:'Items cannot be deleted from the List. Implement the "remove" function in the data store',E1012:"Editing type '{0}' with the name '{1}' is unsupported",E1016:"Unexpected type of data source is provided for a lookup column",E1018:"The 'collapseAll' method cannot be called if you use a remote data source",E1019:"Search mode '{0}' is unavailable",E1020:"The type cannot be changed after initialization",E1021:"{0} '{1}' you are trying to remove does not exist",E1022:'The "markers" option is given an invalid value. Assign an array instead',E1023:'The "routes" option is given an invalid value. Assign an array instead',E1025:"This layout is too complex to render",E1026:'The "calculateCustomSummary" function is missing from a field whose "summaryType" option is set to "custom"',E1031:"Unknown subscription in the Scheduler widget: '{0}'",E1032:"Unknown start date in an appointment: '{0}'",E1033:"Unknown step in the date navigator: '{0}'",E1034:"The browser does not implement an API for saving files",E1035:"The editor cannot be created: {0}",E1037:"Invalid structure of grouped data",E1038:"The browser does not support local storages for local web pages",E1039:"A cell's position cannot be calculated",E1040:"The '{0}' key value is not unique within the data array",E1041:"The '{0}' script is referenced after the DevExtreme scripts or not referenced at all",E1042:"{0} requires the key field to be specified",E1043:"Changes cannot be processed due to the incorrectly set key",E1044:"The key field specified by the keyExpr option does not match the key field specified in the data store",E1045:"Editing requires the key field to be specified in the data store",E1046:"The '{0}' key field is not found in data objects",E1047:'The "{0}" field is not found in the fields array',E1048:'The "{0}" operation is not found in the filterOperations array',E1049:"Column '{0}': filtering is allowed but the 'dataField' or 'name' option is not specified",E1050:"The validationRules option does not apply to third-party editors defined in the editCellTemplate",E1051:'HtmlEditor\'s valueType is "{0}", but the {0} converter was not imported.',E1052:'{0} should have the "dataSource" option specified',E1053:'The "buttons" option accepts an array that contains only objects or string values',E1054:"All text editor buttons must have names",E1055:'One or several text editor buttons have invalid or non-unique "name" values',E1056:'The {0} widget does not support buttons of the "{1}" type',E1058:'The "startDayHour" and "endDayHour" options must be integers in the [0, 24] range, with "endDayHour" being greater than "startDayHour".',E1059:"The following column names are not unique: {0}",E1060:"All editable columns must have names",E1061:'The "offset" option must be an integer in the [-1440, 1440] range, divisible by 5 without a remainder.',E1062:'The "cellDuration" must be a positive integer, evenly dividing the ("endDayHour" - "startDayHour") interval into minutes.',W1001:'The "key" option cannot be modified after initialization',W1002:"An item with the key '{0}' does not exist",W1003:"A group with the key '{0}' in which you are trying to select items does not exist",W1004:"The item '{0}' you are trying to select in the group '{1}' does not exist",W1005:"Due to column data types being unspecified, data has been loaded twice in order to apply initial filter settings. To resolve this issue, specify data types for all grid columns.",W1006:"The map service returned the following error: '{0}'",W1007:"No item with key {0} was found in the data source, but this key was used as the parent key for item {1}",W1008:"Cannot scroll to the '{0}' date because it does not exist on the current view",W1009:"Searching works only if data is specified using the dataSource option",W1010:"The capability to select all items works with source data of plain structure only",W1011:'The "keyExpr" option is not applied when dataSource is not an array',W1012:"The '{0}' key field is not found in data objects",W1013:'The "message" field in the dialog component was renamed to "messageHtml". Change your code correspondingly. In addition, if you used HTML code in the message, make sure that it is secure',W1014:"The Floating Action Button exceeds the recommended speed dial action count. If you need to display more speed dial actions, increase the maxSpeedDialActionCount option value in the global config.",W1016:"The '{0}' field in the HTML Editor toolbar item configuration was renamed to '{1}'. Please make a corresponding change in your code.",W1017:"The 'key' property is not specified for a lookup data source. Please specify it to prevent requests for the entire dataset when users filter data.",W1018:"Infinite scrolling may not work properly with multiple selection. To use these features together, set 'selection.deferred' to true or set 'selection.selectAllMode' to 'page'.",W1019:"Filter query string exceeds maximum length limit of {0} characters.",W1020:"hideEvent is ignored when the shading property is true",W1021:"The '{0}' is not rendered because none of the DOM elements match the value of the \"container\" property.",W1022:"{0} JSON parsing error: '{1}'",W1023:"Appointments require unique keys. Otherwise, the agenda view may not work correctly.",W1024:"The client-side export is enabled. Implement the 'onExporting' function.",W1025:"'scrolling.mode' is set to 'virtual' or 'infinite'. Specify the height of the component."}),CM=ot(),C8=Qi.add,x8=Ls,O8=bp;let js=new Ae;const xM="link[rel=dx-theme]",b8="data-theme",S8="data-active",OM="dx-hairlines",bM="any";let xr,Su,Or,yi,br,Zy=15e3;const Xy="dx.";function Yy(){if(!Ke())return null;const e=V("<div>",xr).addClass("dx-theme-marker").appendTo(xr.documentElement);let n;try{return n=CM.getComputedStyle(e.get(0)).fontFamily,n&&(n=n.replace(/["']/g,""),n.substr(0,Xy.length)===Xy)?n.substr(Xy.length):null}finally{e.remove()}}function Qy(e){let n,t,i=!0;function o(){br=null,clearInterval(t),i=!0,zs.fire(),zs.empty(),js.resolve()}if(br=e,Jy()||!Zy)o();else{if(!i)return void(br&&(br=e));n=Date.now(),i=!1,t=setInterval(function(){const r=Jy(),c=!r&&Date.now()-n>Zy;c&&Jt.log("W0004",br),(r||c)&&o()},10)}}function Jy(){if(!br)return!0;const e=br===bM;if("resolved"===js.state()&&e)return!0;const n=Yy();return!(!n||!e)||n===br}function SM(e){(function E8(e){try{e!==xr&&(Or=null)}catch{Or=null}xr=e})((e=e||{}).context||Pe.getDocument()),xr&&(function D8(){const e=V(xM,xr);e.length&&(Or={},Su=V(py("<link rel=stylesheet>"),xr),e.each(function(){const n=V(this,xr),t=n.attr(b8),i=n.attr("href"),o="true"===n.attr(S8);Or[t]={url:i,isActive:o}}),e.last().after(Su),e.remove())}(),yi=void 0,yo(e))}function yo(e){if(!arguments.length)return yi=yi||Yy(),yi;tC(x8()),"string"==typeof(e=e||{})&&(e={theme:e});const n=e._autoInit,t=e.loadCallback;let i;if(yi=function I8(e){const n=e?e.split("."):[];let t=null;if(Or){if(e in Or)return e;Ee(Or,function(i,o){const r=i.split(".");if((!n[0]||r[0]===n[0])&&(!n[1]||n[1]===r[1])&&(!n[2]||n[2]===r[2])&&((!t||o.isActive)&&(t=i),o.isActive))return!1})}return t}(e.theme||yi),yi&&(i=Or[yi]),t&&zs.add(t),i)Su.attr("href",Or[yi].url),(zs.has()||"resolved"!==js.state()||e._forceTimeout)&&Qy(yi);else{if(!n)throw Jt.Error("E0021",yi);Ke()&&Qy(bM),zs.fire(),zs.empty()}js.done(()=>eC(fT(),yi))}let Vp;function eC(e,n){Vp=function w8(e){const n=[],t=(e=e||yo())&&e.split(".");return t&&(n.push("dx-theme-"+t[0],"dx-theme-"+t[0]+"-typography"),t.length>1&&n.push("dx-color-scheme-"+t[1]+(ki(e)?"-"+t[2]:""))),n}(n).join(" "),V(e).addClass(Vp),function(){const t=Ke()&&CM.devicePixelRatio;if(!t||t<2)return;const i=V("<div>");i.css("border",".5px solid transparent"),V("body").append(i),1===et(i)&&(V(e).addClass(OM),Vp+=" "+OM),i.remove()}()}function tC(e){V(e).removeClass(Vp)}function Du(e,n){return n||(n=yi||Yy()),new RegExp(e).test(n)}function ki(e){return Fi(e)||Go(e)}function Fi(e){return Du("material",e)}function Go(e){return Du("fluent",e)}function EM(e,n){return new Promise(t=>{const i=()=>{clearInterval(o),clearTimeout(r),t()},o=setInterval(()=>{(function IM(e,n){const t=Pe.getDocument(),i=t.createElement("span");i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",i.style.visibility="hidden",i.style.fontFamily="Arial",i.style.fontSize="250px",i.style.fontWeight=n,i.innerHTML=e,t.body.appendChild(i);const o=i.offsetWidth;i.style.fontFamily="Roboto, RobotoFallback, Arial";const r=i.offsetWidth;return i.parentNode.removeChild(i),o!==r})(e,n)&&i()},15),r=setTimeout(i,2e3)})}function wM(){if(SM({_autoInit:!0,_forceTimeout:!0}),V(xM,xr).length)throw Jt.Error("E0022")}Ke()?wM():C8(wM),O8.add(function(e,n){js.done(function(){tC(n),eC(e)})}),je.changed.add(function(){SM({_autoInit:!0})});const F8=hl(),PM=vi.inherit({_getDefaultOptions(){return pe(this.callBase(),{indicatorSrc:"",activeStateEnabled:!1,hoverStateEnabled:!1,_animatingSegmentCount:1,_animatingSegmentInner:!1})},_defaultOptionsRules(){const e=yo();return this.callBase().concat([{device:()=>"android"===je.real().platform&&!/chrome/i.test(F8.userAgent),options:{viaImage:!0}},{device:()=>ki(e),options:{_animatingSegmentCount:2,_animatingSegmentInner:!0}},{device:()=>function DM(e){return Du("generic",e)}(e),options:{_animatingSegmentCount:7}}])},_useTemplates:()=>!1,_init(){this.callBase(),this.$element().addClass("dx-loadindicator");const n={role:"alert",label:de.format("Loading")};this.setAria(n)},_initMarkup(){this.callBase(),this._renderWrapper(),this._renderIndicatorContent(),this._renderMarkup()},_renderWrapper(){this._$wrapper=V("<div>").addClass("dx-loadindicator-wrapper"),this.$element().append(this._$wrapper)},_renderIndicatorContent(){this._$content=V("<div>").addClass("dx-loadindicator-content"),this._$wrapper.append(this._$content)},_renderMarkup(){const{viaImage:e,indicatorSrc:n}=this.option();!Ny()||e||n?this._renderMarkupForImage():this._renderMarkupForAnimation()},_renderMarkupForAnimation(){const e=this.option("_animatingSegmentInner");this._$indicator=V("<div>").addClass("dx-loadindicator-icon"),this._$content.append(this._$indicator);for(let n=this.option("_animatingSegmentCount");n>=0;--n){const t=V("<div>").addClass("dx-loadindicator-segment").addClass("dx-loadindicator-segment"+n);e&&t.append(V("<div>").addClass("dx-loadindicator-segment-inner")),this._$indicator.append(t)}},_renderMarkupForImage(){const{indicatorSrc:e}=this.option();e?(this._$wrapper.addClass("dx-loadindicator-image"),this._$wrapper.css("backgroundImage",`url(${e})`)):Ny()&&this._renderMarkupForAnimation()},_renderDimensions(){this.callBase(),this._updateContentSizeForAnimation()},_updateContentSizeForAnimation(){if(!this._$indicator)return;let e=this.option("width"),n=this.option("height");if(e||n){e=Xe(this.$element()),n=ut(this.$element());const t=Math.min(n,e);this._$wrapper.css({height:t,width:t,fontSize:t})}},_clean(){this.callBase(),this._removeMarkupForAnimation(),this._removeMarkupForImage()},_removeMarkupForAnimation(){this._$indicator&&(this._$indicator.remove(),delete this._$indicator)},_removeMarkupForImage(){this._$wrapper.css("backgroundImage","none")},_optionChanged(e){switch(e.name){case"_animatingSegmentCount":case"_animatingSegmentInner":case"indicatorSrc":this._invalidate();break;default:this.callBase(e)}}});xt("dxLoadIndicator",PM);const Us=PM,TM=e=>e??Ht().rtlEnabled?"right":"left",Li=e=>$t(e)?{width:e.outerWidth,height:e.outerHeight}:e.getBoundingClientRect(),L8=/matrix(3d)?\((.+?)\)/,N8=/translate(?:3d)?\((.+?)\)/,Nn=function(e){e=V(e);const n=jp(e);return{left:n.x,top:n.y}};function zp(e){return"string"===Ki(e)&&"%"===e[e.length-1]}function MM(e,n){e.length&&Yt(e.get(0),"dxTranslator",n)}const nC=function(e){e.length&&Cp(e.get(0),"dxTranslator")},Iu=function(e){return e.x=e.x||0,e.y=e.y||0,"translate("+(zp(e.x)?e.x:e.x+"px")+", "+(zp(e.y)?e.y:e.y+"px")+")"},jp=function(e){let n=e.length?Yt(e.get(0),"dxTranslator"):null;if(!n){let i=(e.css("transform")||Iu({x:0,y:0})).match(L8);const o=i&&i[1];i?(i=i[2].split(","),"3d"===o?i=i.slice(12,15):(i.push(0),i=i.slice(4,7))):i=[0,0,0],n={x:parseFloat(i[0]),y:parseFloat(i[1]),z:parseFloat(i[2])},MM(e,n)}return n},Tn=function(e,n){e=V(e);const t=n.left,i=n.top;let o;void 0===t?(o=jp(e),o.y=i||0):void 0===i?(o=jp(e),o.x=t||0):(o={x:t||0,y:i||0,z:0},MM(e,o)),e.css({transform:Iu(o)}),(zp(t)||zp(i))&&nC(e)},iC=function(e,n){let t;e=V(e);const i={left:0,top:0,transform:"none"};n&&(t=e.css("transition"),i.transition="none"),e.css(i),nC(e),n&&(e.get(0),e.css("transition",t))},AM=ot(),B8=/left|right/,V8=/top|bottom/,RM=/fit|flip|none/,z8=/scale\(.+?\)/,j8=Wo.safari,oC=function(e){const n={h:"center",v:"center"},t=ru(e);return t&&Ee(t,function(){const i=String(this).toLowerCase();B8.test(i)?n.h=i:V8.test(i)&&(n.v=i)}),n},kM=function(e,n){return Gv(e,n)},FM=function(e){switch(e){case"center":return.5;case"right":case"bottom":return 1;default:return 0}},rC=function(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return e}},sC=function(e,n){let t=0;return e.myLocation<n.min&&(t+=n.min-e.myLocation),e.myLocation>n.max&&(t+=e.myLocation-n.max),t},LM=function(e,n,t){return n.myLocation<t.min?"h"===e?"left":"top":n.myLocation>t.max?"h"===e?"right":"bottom":"none"},aC=function(e){e.myLocation=e.atLocation+FM(e.atAlign)*e.atSize-FM(e.myAlign)*e.mySize+e.offset},Up={fit:function(e,n){let t=!1;e.myLocation>n.max&&(e.myLocation=n.max,t=!0),e.myLocation<n.min&&(e.myLocation=n.min,t=!0),e.fit=t},flip:function(e,n){if(e.flip=!1,("center"!==e.myAlign||"center"!==e.atAlign)&&(e.myLocation<n.min||e.myLocation>n.max)){const t=pe({},e,{myAlign:rC(e.myAlign),atAlign:rC(e.atAlign),offset:-e.offset});aC(t),t.oversize=sC(t,n),(t.myLocation>=n.min&&t.myLocation<=n.max||e.oversize>t.oversize)&&(e.myLocation=t.myLocation,e.oversize=t.oversize,e.flip=!0)}},flipfit:function(e,n){this.flip(e,n),this.fit(e,n)},none:function(e){e.oversize=0}};let NM;const HM=function(){const e=V("<div>").css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999}).appendTo(V("body")),n=e.get(0).offsetWidth-e.get(0).clientWidth;e.remove(),NM=n},$8={h:{location:0,flip:!1,fit:!1,oversize:0},v:{location:0,flip:!1,fit:!1,oversize:0}},BM=function(e,n){const t=V(e),i=t.offset(),o=pe(!0,{},$8,{h:{location:i.left},v:{location:i.top}});if(!n)return o;const r=oC(n.my),c=oC(n.at);let v=V(n.of).length&&n.of||AM;const S=kM(n.offset,n.precise),T=function(e){const n=ru(e);let t=String(n&&n[0]).toLowerCase(),i=String(n&&n[1]).toLowerCase();return RM.test(t)||(t="none"),RM.test(i)||(i=t),{h:t,v:i}}(n.collision),F=n.boundary,N=kM(n.boundaryOffset,n.precise),B={mySize:qt(t),myAlign:r.h,atAlign:c.h,offset:S.h,collision:T.h,boundaryOffset:N.h},X={mySize:et(t),myAlign:r.v,atAlign:c.v,offset:S.v,collision:T.v,boundaryOffset:N.v};if(v.preventDefault)B.atLocation=v.pageX,X.atLocation=v.pageY,B.atSize=0,X.atSize=0;else if(v=V(v),$t(v[0]))B.atLocation=v.scrollLeft(),X.atLocation=v.scrollTop(),"phone"===je.real().deviceType&&v[0].visualViewport?(B.atLocation=Math.max(B.atLocation,v[0].visualViewport.offsetLeft),X.atLocation=Math.max(X.atLocation,v[0].visualViewport.offsetTop),B.atSize=v[0].visualViewport.width,X.atSize=v[0].visualViewport.height):(B.atSize=v[0].innerWidth>v[0].outerWidth?v[0].innerWidth:Xe(v),X.atSize=v[0].innerHeight>v[0].outerHeight||j8?v[0].innerHeight:ut(v));else if(9===v[0].nodeType)B.atLocation=0,X.atLocation=0,B.atSize=Xe(v),X.atSize=ut(v);else{const he=Li(v.get(0)),Oe=$p(v);B.atLocation=Oe.left,X.atLocation=Oe.top,B.atSize=Math.max(he.width,qt(v)),X.atSize=Math.max(he.height,et(v))}aC(B),aC(X);const ne=function(){const he=V(AM),Oe=Xe(he),_e=ut(he);let ke=he.scrollLeft(),Ne=he.scrollTop();const We=Pe.getDocumentElement(),Ot=Sl?We.clientWidth/Oe:1,Cn=Sl?We.clientHeight/_e:1;void 0===NM&&HM();let At=Oe,Gn=_e;if(F&&!$t(F)){const Oi=V(F),ro=Oi.offset();ke=ro.left,Ne=ro.top,At=Xe(Oi),Gn=ut(Oi)}return{h:{min:ke+B.boundaryOffset,max:ke+At/Ot-B.mySize-B.boundaryOffset},v:{min:Ne+X.boundaryOffset,max:Ne+Gn/Cn-X.mySize-X.boundaryOffset}}}();B.oversize=sC(B,ne.h),X.oversize=sC(X,ne.v),B.collisionSide=LM("h",B,ne.h),X.collisionSide=LM("v",X,ne.v),Up[B.collision]&&Up[B.collision](B,ne.h),Up[X.collision]&&Up[X.collision](X,ne.v);const le=function(he){return n.precise?he:Math.round(he)};return pe(!0,o,{h:{location:le(B.myLocation),oversize:le(B.oversize),fit:B.fit,flip:B.flip,collisionSide:B.collisionSide},v:{location:le(X.myLocation),oversize:le(X.oversize),fit:X.fit,flip:X.flip,collisionSide:X.collisionSide},precise:n.precise}),o},VM=function(e,n,t,i){const o=Ie(e.style)&&!Pe.isNode(e.style),r=i?t.replace(n,""):t;if(o)!function(e,n){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&[].slice.call(e.style).forEach(o=>{e.style.removeProperty(o)}),n.split(";").forEach(i=>{const o=i.split(":").map(r=>r.trim());if(2===o.length){const[r,c]=o;e.style[r]=c}})}(e,r,!1);else{const c=Pe.createAttribute("style");c.value=r,e.setAttributeNode(c)}},$p=function(e){var n,t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const o=i.get(0);if(!o)return e.offset();const r=(null===(n=o.getAttribute)||void 0===n?void 0:n.call(o,"style"))||"",c=null===(t=r.match(z8))||void 0===t?void 0:t[0];let v;return c?(VM(o,c,r,!0),v=$p(e,i.parent()),VM(o,c,r,!1)):v=$p(e,i.parent()),v},Eu=function(e,n){const t=V(e);if(!n)return t.offset();iC(t,!0);const i=$p(t),o=n.h&&n.v?n:BM(t,n),r=function(c){return n.precise?c:Math.round(c)};return Tn(t,{left:o.h.location-r(i.left),top:o.v.location-r(i.top)}),o};Eu.inverseAlign||(Eu.inverseAlign=rC),Eu.normalizeAlign||(Eu.normalizeAlign=oC);const Dn={calculateScrollbarWidth:HM,calculate:BM,setup:Eu,offset:function(e){return e=V(e).get(0),$t(e)?null:e&&"pageY"in e&&"pageX"in e?{top:e.pageY,left:e.pageX}:V(e).offset()}};var zM=Io(878),G8=Io.n(zM);function Ze(){if(!G8())throw Jt.Error("E1041","devexpress-diagram");return zM}const wu=function(e){return 0===e?0:e/Math.abs(e)},Ci=function(e,n,t){const i=!n&&0!==n,o=!t&&0!==t;return i&&(n=o?e:Math.min(e,t)),o&&(t=i?e:Math.max(e,n)),Math.min(Math.max(e,n),t)},Pu=function(e,n,t){return e>=n&&e<=t};function jM(e){return Math.abs(parseInt(e.toExponential().split("e")[1]))}function UM(e,n){const t=function K8(e){const n=e.toExponential().split("e"),t=parseFloat(n[0]);return{exponent:parseInt(n[1]),mantissa:t}}(e);return parseFloat(`${t.mantissa}e${t.exponent+n}`)}function $M(e,n){let t=function Z8(e){const n=e.toString();if(n.indexOf(".")<0)return 0;const t=n.split("."),i=t[1].indexOf("e");return i>=0?i:t[1].length}(n||0)+2;const i=e.toString().split("."),o=e,r=Math.abs(e);let c;const v=yP(e),S=r>1?10:0;return 1===i.length?e:(v||(yP(n)&&(t=i[0].length+jM(n)),e=(e=r)-Math.floor(e)+S),t=function q8(){return"0.000300"!==3e-4.toPrecision(3)}()&&jM(e)>6||t>7?15:7,v||(c=parseFloat(e.toPrecision(t)).toString().split("."),c[0]!==S.toString())?parseFloat(o.toPrecision(t)):parseFloat(i[0]+"."+c[1]))}const Y8=10;function GM(e,n){const t=n||0;return(t>0?function J8(e,n){const t=Math.pow(Y8,n);return function Q8(e){return wu(e)*Math.round(Math.abs(e))}(UM(e,n))/t}(...arguments):e).toFixed(t)}const e9={thousandsSeparator:",",decimalSeparator:"."};function lC(e){return e.toString().split("").reverse().join("")}function qM(e){return e.replace(/'.+'/g,"")}function ZM(e){if(!e)return 0;const n=qM(e);return n.length-n.replace(/[#]/g,"").length}function XM(e){if(!e)return 0;const n=qM(e);return n.length-n.replace(/[0]/g,"").length}function YM(e,n,t){if(!e)return"";for(e.length>t&&(e=e.substr(0,t));e.length>n&&"0"===e.slice(-1);)e=e.substr(0,e.length-1);for(;e.length<n;)e+="0";return e}function QM(e,n){return e.split("'").map(function(t,i){const o=i%2;return!t&&o?"'":o?t:t.replace(/[,#0]+/,n)}).join("")}function Tu(e,n,t){const i=(n?.01:1)*parseFloat(e)||0;return t?-i:i}function JM(e,n,t,i){let r,c,v,o=e;do{v&&(r=c.length===v.length?"0":"1",e=i?r+e:e+r),c=v||n(Tu(o,t)),o=i?"1"+o:o+"1",v=n(Tu(o,t))}while(c!==v&&(i?c.length===v.length:c.length<=v.length));if(i&&v.length>c.length){const S=-1===n(12345).indexOf("12345");do{e="1"+e}while(S&&Tu(e,t)<1e5)}return e}function eA(e,n,t,i){let o=n(Tu(e,t,i));const r=e.split("."),S=n(Tu(r[0]+".3"+r[1].slice(1),t,i)).indexOf("3")-1;return o=o.replace(/(\d)\D(\d)/g,"$1,$2"),S>=0&&(o=o.slice(0,S)+"."+o.slice(S+1)),o=o.replace(/1+/,"1").replace(/1/g,"#"),t||(o=o.replace(/%/g,"'%'")),o}const l9={_formatNumberCore:function(e,n,t){if("currency"===n){t.precision=t.precision||0;let i=this.format(e,pe({},t,{type:"fixedpoint"}));const o=this.getCurrencySymbol().symbol.replace(/\$/g,"$$$$");return i=i.replace(/^(\D*)(\d.*)/,"$1"+o+"$2"),i}return this.callBase.apply(this,arguments)},getCurrencySymbol:function(){return{symbol:"$"}},getOpenXmlCurrencyFormat:function(){return"$#,##0{0}_);\\($#,##0{0}\\)"}},u9={af:"\xa4#,##0.00;(\xa4#,##0.00)","af-NA":"\xa4#,##0.00;(\xa4#,##0.00)",agq:"#,##0.00\xa4",ak:"\xa4#,##0.00",am:"\xa4#,##0.00;(\xa4#,##0.00)",ar:"\xa4#,##0.00;(\xa4#,##0.00)","ar-AE":"\xa4#,##0.00;(\xa4#,##0.00)","ar-BH":"\xa4#,##0.00;(\xa4#,##0.00)","ar-DJ":"\xa4#,##0.00;(\xa4#,##0.00)","ar-DZ":"\xa4#,##0.00;(\xa4#,##0.00)","ar-EG":"\xa4#,##0.00;(\xa4#,##0.00)","ar-EH":"\xa4#,##0.00;(\xa4#,##0.00)","ar-ER":"\xa4#,##0.00;(\xa4#,##0.00)","ar-IL":"\xa4#,##0.00;(\xa4#,##0.00)","ar-IQ":"\xa4#,##0.00;(\xa4#,##0.00)","ar-JO":"\xa4#,##0.00;(\xa4#,##0.00)","ar-KM":"\xa4#,##0.00;(\xa4#,##0.00)","ar-KW":"\xa4#,##0.00;(\xa4#,##0.00)","ar-LB":"\xa4#,##0.00;(\xa4#,##0.00)","ar-LY":"\xa4#,##0.00;(\xa4#,##0.00)","ar-MA":"\xa4#,##0.00;(\xa4#,##0.00)","ar-MR":"\xa4#,##0.00;(\xa4#,##0.00)","ar-OM":"\xa4#,##0.00;(\xa4#,##0.00)","ar-PS":"\xa4#,##0.00;(\xa4#,##0.00)","ar-QA":"\xa4#,##0.00;(\xa4#,##0.00)","ar-SA":"\xa4#,##0.00;(\xa4#,##0.00)","ar-SD":"\xa4#,##0.00;(\xa4#,##0.00)","ar-SO":"\xa4#,##0.00;(\xa4#,##0.00)","ar-SS":"\xa4#,##0.00;(\xa4#,##0.00)","ar-SY":"\xa4#,##0.00;(\xa4#,##0.00)","ar-TD":"\xa4#,##0.00;(\xa4#,##0.00)","ar-TN":"\xa4#,##0.00;(\xa4#,##0.00)","ar-YE":"\xa4#,##0.00;(\xa4#,##0.00)",as:"\xa4\xa0#,##,##0.00",asa:"#,##0.00\xa0\xa4",ast:"#,##0.00\xa0\xa4",az:"#,##0.00\xa0\xa4","az-Cyrl":"#,##0.00\xa0\xa4","az-Latn":"#,##0.00\xa0\xa4",bas:"#,##0.00\xa0\xa4",be:"#,##0.00\xa0\xa4","be-tarask":"#,##0.00\xa0\xa4",bem:"\xa4#,##0.00;(\xa4#,##0.00)",bez:"#,##0.00\xa4",bg:"0.00\xa0\xa4;(0.00\xa0\xa4)",bm:"\xa4#,##0.00;(\xa4#,##0.00)",bn:"#,##,##0.00\xa4;(#,##,##0.00\xa4)","bn-IN":"#,##,##0.00\xa4;(#,##,##0.00\xa4)",bo:"\xa4\xa0#,##0.00","bo-IN":"\xa4\xa0#,##0.00",br:"#,##0.00\xa0\xa4",brx:"\xa4\xa0#,##,##0.00",bs:"#,##0.00\xa0\xa4","bs-Cyrl":"#,##0.00\xa0\xa4","bs-Latn":"#,##0.00\xa0\xa4",ca:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","ca-AD":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","ca-ES-valencia":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","ca-FR":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","ca-IT":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",ccp:"#,##,##0.00\xa4;(#,##,##0.00\xa4)","ccp-IN":"#,##,##0.00\xa4;(#,##,##0.00\xa4)",ce:"#,##0.00\xa0\xa4",ceb:"\xa4#,##0.00;(\xa4#,##0.00)",cgg:"\xa4#,##0.00",chr:"\xa4#,##0.00;(\xa4#,##0.00)",ckb:"\xa4\xa0#,##0.00","ckb-IR":"\xa4\xa0#,##0.00",cs:"#,##0.00\xa0\xa4",cy:"\xa4#,##0.00;(\xa4#,##0.00)",da:"#,##0.00\xa0\xa4","da-GL":"#,##0.00\xa0\xa4",dav:"\xa4#,##0.00;(\xa4#,##0.00)",de:"#,##0.00\xa0\xa4","de-AT":"#,##0.00\xa0\xa4","de-BE":"#,##0.00\xa0\xa4","de-CH":"#,##0.00\xa0\xa4","de-IT":"#,##0.00\xa0\xa4","de-LI":"#,##0.00\xa0\xa4","de-LU":"#,##0.00\xa0\xa4",dje:"#,##0.00\xa4",doi:"\xa4#,##0.00",dsb:"#,##0.00\xa0\xa4",dua:"#,##0.00\xa0\xa4",dyo:"#,##0.00\xa0\xa4",dz:"\xa4#,##,##0.00",ebu:"\xa4#,##0.00;(\xa4#,##0.00)",ee:"\xa4#,##0.00;(\xa4#,##0.00)","ee-TG":"\xa4#,##0.00;(\xa4#,##0.00)",el:"#,##0.00\xa0\xa4","el-CY":"#,##0.00\xa0\xa4",en:"\xa4#,##0.00;(\xa4#,##0.00)","en-001":"\xa4#,##0.00;(\xa4#,##0.00)","en-150":"#,##0.00\xa0\xa4","en-AE":"\xa4#,##0.00;(\xa4#,##0.00)","en-AG":"\xa4#,##0.00;(\xa4#,##0.00)","en-AI":"\xa4#,##0.00;(\xa4#,##0.00)","en-AS":"\xa4#,##0.00;(\xa4#,##0.00)","en-AT":"\xa4\xa0#,##0.00","en-AU":"\xa4#,##0.00;(\xa4#,##0.00)","en-BB":"\xa4#,##0.00;(\xa4#,##0.00)","en-BE":"#,##0.00\xa0\xa4","en-BI":"\xa4#,##0.00;(\xa4#,##0.00)","en-BM":"\xa4#,##0.00;(\xa4#,##0.00)","en-BS":"\xa4#,##0.00;(\xa4#,##0.00)","en-BW":"\xa4#,##0.00;(\xa4#,##0.00)","en-BZ":"\xa4#,##0.00;(\xa4#,##0.00)","en-CA":"\xa4#,##0.00;(\xa4#,##0.00)","en-CC":"\xa4#,##0.00;(\xa4#,##0.00)","en-CH":"\xa4\xa0#,##0.00;\xa4-#,##0.00","en-CK":"\xa4#,##0.00;(\xa4#,##0.00)","en-CM":"\xa4#,##0.00;(\xa4#,##0.00)","en-CX":"\xa4#,##0.00;(\xa4#,##0.00)","en-CY":"\xa4#,##0.00;(\xa4#,##0.00)","en-DE":"#,##0.00\xa0\xa4","en-DG":"\xa4#,##0.00;(\xa4#,##0.00)","en-DK":"#,##0.00\xa0\xa4","en-DM":"\xa4#,##0.00;(\xa4#,##0.00)","en-ER":"\xa4#,##0.00;(\xa4#,##0.00)","en-FI":"#,##0.00\xa0\xa4","en-FJ":"\xa4#,##0.00;(\xa4#,##0.00)","en-FK":"\xa4#,##0.00;(\xa4#,##0.00)","en-FM":"\xa4#,##0.00;(\xa4#,##0.00)","en-GB":"\xa4#,##0.00;(\xa4#,##0.00)","en-GD":"\xa4#,##0.00;(\xa4#,##0.00)","en-GG":"\xa4#,##0.00;(\xa4#,##0.00)","en-GH":"\xa4#,##0.00;(\xa4#,##0.00)","en-GI":"\xa4#,##0.00;(\xa4#,##0.00)","en-GM":"\xa4#,##0.00;(\xa4#,##0.00)","en-GU":"\xa4#,##0.00;(\xa4#,##0.00)","en-GY":"\xa4#,##0.00;(\xa4#,##0.00)","en-HK":"\xa4#,##0.00;(\xa4#,##0.00)","en-IE":"\xa4#,##0.00;(\xa4#,##0.00)","en-IL":"\xa4#,##0.00;(\xa4#,##0.00)","en-IM":"\xa4#,##0.00;(\xa4#,##0.00)","en-IN":"\xa4#,##0.00;(\xa4#,##0.00)","en-IO":"\xa4#,##0.00;(\xa4#,##0.00)","en-JE":"\xa4#,##0.00;(\xa4#,##0.00)","en-JM":"\xa4#,##0.00;(\xa4#,##0.00)","en-KE":"\xa4#,##0.00;(\xa4#,##0.00)","en-KI":"\xa4#,##0.00;(\xa4#,##0.00)","en-KN":"\xa4#,##0.00;(\xa4#,##0.00)","en-KY":"\xa4#,##0.00;(\xa4#,##0.00)","en-LC":"\xa4#,##0.00;(\xa4#,##0.00)","en-LR":"\xa4#,##0.00;(\xa4#,##0.00)","en-LS":"\xa4#,##0.00;(\xa4#,##0.00)","en-MG":"\xa4#,##0.00;(\xa4#,##0.00)","en-MH":"\xa4#,##0.00;(\xa4#,##0.00)","en-MO":"\xa4#,##0.00;(\xa4#,##0.00)","en-MP":"\xa4#,##0.00;(\xa4#,##0.00)","en-MS":"\xa4#,##0.00;(\xa4#,##0.00)","en-MT":"\xa4#,##0.00;(\xa4#,##0.00)","en-MU":"\xa4#,##0.00;(\xa4#,##0.00)","en-MV":"\xa4\xa0#,##0.00","en-MW":"\xa4#,##0.00;(\xa4#,##0.00)","en-MY":"\xa4#,##0.00;(\xa4#,##0.00)","en-NA":"\xa4#,##0.00;(\xa4#,##0.00)","en-NF":"\xa4#,##0.00;(\xa4#,##0.00)","en-NG":"\xa4#,##0.00;(\xa4#,##0.00)","en-NL":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","en-NR":"\xa4#,##0.00;(\xa4#,##0.00)","en-NU":"\xa4#,##0.00;(\xa4#,##0.00)","en-NZ":"\xa4#,##0.00;(\xa4#,##0.00)","en-PG":"\xa4#,##0.00;(\xa4#,##0.00)","en-PH":"\xa4#,##0.00;(\xa4#,##0.00)","en-PK":"\xa4#,##0.00;(\xa4#,##0.00)","en-PN":"\xa4#,##0.00;(\xa4#,##0.00)","en-PR":"\xa4#,##0.00;(\xa4#,##0.00)","en-PW":"\xa4#,##0.00;(\xa4#,##0.00)","en-RW":"\xa4#,##0.00;(\xa4#,##0.00)","en-SB":"\xa4#,##0.00;(\xa4#,##0.00)","en-SC":"\xa4#,##0.00;(\xa4#,##0.00)","en-SD":"\xa4#,##0.00;(\xa4#,##0.00)","en-SE":"#,##0.00\xa0\xa4","en-SG":"\xa4#,##0.00;(\xa4#,##0.00)","en-SH":"\xa4#,##0.00;(\xa4#,##0.00)","en-SI":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","en-SL":"\xa4#,##0.00;(\xa4#,##0.00)","en-SS":"\xa4#,##0.00;(\xa4#,##0.00)","en-SX":"\xa4#,##0.00;(\xa4#,##0.00)","en-SZ":"\xa4#,##0.00;(\xa4#,##0.00)","en-TC":"\xa4#,##0.00;(\xa4#,##0.00)","en-TK":"\xa4#,##0.00;(\xa4#,##0.00)","en-TO":"\xa4#,##0.00;(\xa4#,##0.00)","en-TT":"\xa4#,##0.00;(\xa4#,##0.00)","en-TV":"\xa4#,##0.00;(\xa4#,##0.00)","en-TZ":"\xa4#,##0.00;(\xa4#,##0.00)","en-UG":"\xa4#,##0.00;(\xa4#,##0.00)","en-UM":"\xa4#,##0.00;(\xa4#,##0.00)","en-VC":"\xa4#,##0.00;(\xa4#,##0.00)","en-VG":"\xa4#,##0.00;(\xa4#,##0.00)","en-VI":"\xa4#,##0.00;(\xa4#,##0.00)","en-VU":"\xa4#,##0.00;(\xa4#,##0.00)","en-WS":"\xa4#,##0.00;(\xa4#,##0.00)","en-ZA":"\xa4#,##0.00;(\xa4#,##0.00)","en-ZM":"\xa4#,##0.00;(\xa4#,##0.00)","en-ZW":"\xa4#,##0.00;(\xa4#,##0.00)",eo:"\xa4\xa0#,##0.00",es:"#,##0.00\xa0\xa4","es-419":"\xa4#,##0.00","es-AR":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","es-BO":"\xa4#,##0.00","es-BR":"\xa4#,##0.00","es-BZ":"\xa4#,##0.00","es-CL":"\xa4#,##0.00","es-CO":"\xa4#,##0.00","es-CR":"\xa4#,##0.00","es-CU":"\xa4#,##0.00","es-DO":"\xa4#,##0.00;(\xa4#,##0.00)","es-EA":"#,##0.00\xa0\xa4","es-EC":"\xa4#,##0.00","es-GQ":"#,##0.00\xa0\xa4","es-GT":"\xa4#,##0.00","es-HN":"\xa4#,##0.00","es-IC":"#,##0.00\xa0\xa4","es-MX":"\xa4#,##0.00","es-NI":"\xa4#,##0.00","es-PA":"\xa4#,##0.00","es-PE":"\xa4#,##0.00","es-PH":"#,##0.00\xa0\xa4","es-PR":"\xa4#,##0.00","es-PY":"\xa4#,##0.00","es-SV":"\xa4#,##0.00","es-US":"\xa4#,##0.00","es-UY":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","es-VE":"\xa4#,##0.00",et:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",eu:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",ewo:"#,##0.00\xa0\xa4",fa:"\u200e\xa4\xa0#,##0.00;\u200e(\xa4\xa0#,##0.00)","fa-AF":"\xa4\xa0#,##0.00;\u200e(\xa4\xa0#,##0.00)",ff:"#,##0.00\xa0\xa4","ff-Adlm":"\xa4\xa0#,##0.00","ff-Adlm-BF":"\xa4\xa0#,##0.00","ff-Adlm-CM":"\xa4\xa0#,##0.00","ff-Adlm-GH":"\xa4\xa0#,##0.00","ff-Adlm-GM":"\xa4\xa0#,##0.00","ff-Adlm-GW":"\xa4\xa0#,##0.00","ff-Adlm-LR":"\xa4\xa0#,##0.00","ff-Adlm-MR":"\xa4\xa0#,##0.00","ff-Adlm-NE":"\xa4\xa0#,##0.00","ff-Adlm-NG":"\xa4\xa0#,##0.00","ff-Adlm-SL":"\xa4\xa0#,##0.00","ff-Adlm-SN":"\xa4\xa0#,##0.00","ff-Latn":"#,##0.00\xa0\xa4","ff-Latn-BF":"#,##0.00\xa0\xa4","ff-Latn-CM":"#,##0.00\xa0\xa4","ff-Latn-GH":"#,##0.00\xa0\xa4","ff-Latn-GM":"#,##0.00\xa0\xa4","ff-Latn-GN":"#,##0.00\xa0\xa4","ff-Latn-GW":"#,##0.00\xa0\xa4","ff-Latn-LR":"#,##0.00\xa0\xa4","ff-Latn-MR":"#,##0.00\xa0\xa4","ff-Latn-NE":"#,##0.00\xa0\xa4","ff-Latn-NG":"#,##0.00\xa0\xa4","ff-Latn-SL":"#,##0.00\xa0\xa4",fi:"#,##0.00\xa0\xa4",fil:"\xa4#,##0.00;(\xa4#,##0.00)",fo:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fo-DK":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",fr:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-BE":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-BF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-BI":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-BJ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-BL":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CA":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CD":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CG":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CH":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CI":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-CM":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-DJ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-DZ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-GA":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-GF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-GN":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-GP":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-GQ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-HT":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-KM":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-LU":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MA":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MC":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MG":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-ML":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MQ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MR":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-MU":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-NC":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-NE":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-PF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-PM":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-RE":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-RW":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-SC":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-SN":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-SY":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-TD":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-TG":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-TN":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-VU":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-WF":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","fr-YT":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",fur:"\xa4\xa0#,##0.00",fy:"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)",ga:"\xa4#,##0.00;(\xa4#,##0.00)","ga-GB":"\xa4#,##0.00;(\xa4#,##0.00)",gd:"\xa4#,##0.00;(\xa4#,##0.00)",gl:"#,##0.00\xa0\xa4",gsw:"#,##0.00\xa0\xa4","gsw-FR":"#,##0.00\xa0\xa4","gsw-LI":"#,##0.00\xa0\xa4",gu:"\xa4#,##,##0.00;(\xa4#,##,##0.00)",guz:"\xa4#,##0.00;(\xa4#,##0.00)",gv:"\xa4#,##0.00",ha:"\xa4\xa0#,##0.00","ha-GH":"\xa4\xa0#,##0.00","ha-NE":"\xa4\xa0#,##0.00",haw:"\xa4#,##0.00;(\xa4#,##0.00)",he:"#,##0.00\xa0\xa4",hi:"\xa4#,##,##0.00","hi-Latn":"\xa4#,##,##0.00",hr:"#,##0.00\xa0\xa4","hr-BA":"#,##0.00\xa0\xa4",hsb:"#,##0.00\xa0\xa4",hu:"#,##0.00\xa0\xa4",hy:"#,##0.00\xa0\xa4",ia:"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)",id:"\xa4#,##0.00",ig:"\xa4#,##0.00;(\xa4#,##0.00)",ii:"\xa4\xa0#,##0.00",is:"#,##0.00\xa0\xa4",it:"#,##0.00\xa0\xa4","it-CH":"#,##0.00\xa0\xa4","it-SM":"#,##0.00\xa0\xa4","it-VA":"#,##0.00\xa0\xa4",ja:"\xa4#,##0.00;(\xa4#,##0.00)",jgo:"\xa4\xa0#,##0.00",jmc:"\xa4#,##0.00",jv:"\xa4\xa0#,##0.00",ka:"#,##0.00\xa0\xa4",kab:"#,##0.00\xa4",kam:"\xa4#,##0.00;(\xa4#,##0.00)",kde:"\xa4#,##0.00;(\xa4#,##0.00)",kea:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",kgp:"\xa4\xa0#,##0.00",khq:"#,##0.00\xa4",ki:"\xa4#,##0.00;(\xa4#,##0.00)",kk:"#,##0.00\xa0\xa4",kkj:"\xa4\xa0#,##0.00",kl:"\xa4#,##0.00;\xa4-#,##0.00",kln:"\xa4#,##0.00;(\xa4#,##0.00)",km:"#,##0.00\xa4;(#,##0.00\xa4)",kn:"\xa4#,##0.00;(\xa4#,##0.00)",ko:"\xa4#,##0.00;(\xa4#,##0.00)","ko-KP":"\xa4#,##0.00;(\xa4#,##0.00)",kok:"\xa4#,##0.00;(\xa4#,##0.00)",ks:"\xa4#,##0.00","ks-Arab":"\xa4#,##0.00","ks-Deva":"\xa4\xa0#,##0.00",ksb:"#,##0.00\xa4",ksf:"#,##0.00\xa0\xa4",ksh:"#,##0.00\xa0\xa4",ku:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",kw:"\xa4#,##0.00",ky:"#,##0.00\xa0\xa4",lag:"\xa4\xa0#,##0.00",lb:"#,##0.00\xa0\xa4",lg:"#,##0.00\xa4",lkt:"\xa4\xa0#,##0.00",ln:"#,##0.00\xa0\xa4","ln-AO":"#,##0.00\xa0\xa4","ln-CF":"#,##0.00\xa0\xa4","ln-CG":"#,##0.00\xa0\xa4",lo:"\xa4#,##0.00;\xa4-#,##0.00",lrc:"\xa4\xa0#,##0.00","lrc-IQ":"\xa4\xa0#,##0.00",lt:"#,##0.00\xa0\xa4",lu:"#,##0.00\xa4",luo:"#,##0.00\xa4",luy:"\xa4#,##0.00;\xa4-\xa0#,##0.00",lv:"#,##0.00\xa0\xa4",mai:"\xa4\xa0#,##0.00",mas:"\xa4#,##0.00;(\xa4#,##0.00)","mas-TZ":"\xa4#,##0.00;(\xa4#,##0.00)",mer:"\xa4#,##0.00;(\xa4#,##0.00)",mfe:"\xa4\xa0#,##0.00",mg:"\xa4#,##0.00",mgh:"\xa4\xa0#,##0.00",mgo:"\xa4\xa0#,##0.00",mi:"\xa4\xa0#,##0.00",mk:"#,##0.00\xa0\xa4",ml:"\xa4#,##0.00;(\xa4#,##0.00)",mn:"\xa4\xa0#,##0.00",mni:"\xa4\xa0#,##0.00","mni-Beng":"\xa4\xa0#,##0.00",mr:"\xa4#,##0.00;(\xa4#,##0.00)",ms:"\xa4#,##0.00;(\xa4#,##0.00)","ms-BN":"\xa4#,##0.00;(\xa4#,##0.00)","ms-ID":"\xa4#,##0.00","ms-SG":"\xa4#,##0.00;(\xa4#,##0.00)",mt:"\xa4#,##0.00",mua:"\xa4#,##0.00;(\xa4#,##0.00)",my:"\xa4\xa0#,##0.00",mzn:"\xa4\xa0#,##0.00",naq:"\xa4#,##0.00",nb:"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nb-SJ":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)",nd:"\xa4#,##0.00;(\xa4#,##0.00)",nds:"\xa4\xa0#,##0.00","nds-NL":"\xa4\xa0#,##0.00",ne:"\xa4\xa0#,##,##0.00","ne-IN":"\xa4\xa0#,##,##0.00",nl:"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-AW":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-BE":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-BQ":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-CW":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-SR":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)","nl-SX":"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)",nmg:"#,##0.00\xa0\xa4",nn:"#,##0.00\xa0\xa4",nnh:"\xa4\xa0#,##0.00",no:"\xa4\xa0#,##0.00;(\xa4\xa0#,##0.00)",nus:"\xa4#,##0.00;(\xa4#,##0.00)",nyn:"\xa4#,##0.00",om:"\xa4#,##0.00","om-KE":"\xa4#,##0.00",or:"\xa4#,##0.00;(\xa4#,##0.00)",os:"\xa4\xa0#,##0.00","os-RU":"\xa4\xa0#,##0.00",pa:"\xa4\xa0#,##0.00","pa-Arab":"\xa4\xa0#,##0.00","pa-Guru":"\xa4\xa0#,##0.00",pcm:"\xa4#,##0.00",pl:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",ps:"\xa4#,##0.00;(\xa4#,##0.00)","ps-PK":"\xa4#,##0.00;(\xa4#,##0.00)",pt:"\xa4\xa0#,##0.00","pt-AO":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-CH":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-CV":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-GQ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-GW":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-LU":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-MO":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-MZ":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-PT":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-ST":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","pt-TL":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",qu:"\xa4\xa0#,##0.00","qu-BO":"\xa4\xa0#,##0.00","qu-EC":"\xa4\xa0#,##0.00",rm:"#,##0.00\xa0\xa4",rn:"#,##0.00\xa4",ro:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","ro-MD":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",rof:"\xa4#,##0.00",ru:"#,##0.00\xa0\xa4","ru-BY":"#,##0.00\xa0\xa4","ru-KG":"#,##0.00\xa0\xa4","ru-KZ":"#,##0.00\xa0\xa4","ru-MD":"#,##0.00\xa0\xa4","ru-UA":"#,##0.00\xa0\xa4",rw:"\xa4\xa0#,##0.00",rwk:"#,##0.00\xa4",sa:"\xa4\xa0#,##0.00",sah:"#,##0.00\xa0\xa4",saq:"\xa4#,##0.00;(\xa4#,##0.00)",sat:"\xa4\xa0#,##0.00","sat-Olck":"\xa4\xa0#,##0.00",sbp:"#,##0.00\xa4",sc:"#,##0.00\xa0\xa4",sd:"\xa4\xa0#,##0.00","sd-Arab":"\xa4\xa0#,##0.00","sd-Deva":"\xa4\xa0#,##0.00",se:"#,##0.00\xa0\xa4","se-FI":"#,##0.00\xa0\xa4","se-SE":"#,##0.00\xa0\xa4",seh:"#,##0.00\xa4",ses:"#,##0.00\xa4",sg:"\xa4#,##0.00;\xa4-#,##0.00",shi:"#,##0.00\xa4","shi-Latn":"#,##0.00\xa4","shi-Tfng":"#,##0.00\xa4",si:"\xa4#,##0.00;(\xa4#,##0.00)",sk:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",sl:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",smn:"#,##0.00\xa0\xa4",sn:"\xa4#,##0.00;(\xa4#,##0.00)",so:"\xa4#,##0.00;(\xa4#,##0.00)","so-DJ":"\xa4#,##0.00;(\xa4#,##0.00)","so-ET":"\xa4#,##0.00;(\xa4#,##0.00)","so-KE":"\xa4#,##0.00;(\xa4#,##0.00)",sq:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sq-MK":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sq-XK":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",sr:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Cyrl":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Cyrl-BA":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Cyrl-ME":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Cyrl-XK":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Latn":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Latn-BA":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Latn-ME":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)","sr-Latn-XK":"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",su:"\xa4#,##0.00","su-Latn":"\xa4#,##0.00",sv:"#,##0.00\xa0\xa4","sv-AX":"#,##0.00\xa0\xa4","sv-FI":"#,##0.00\xa0\xa4",sw:"\xa4\xa0#,##0.00","sw-CD":"\xa4\xa0#,##0.00","sw-KE":"\xa4\xa0#,##0.00","sw-UG":"\xa4\xa0#,##0.00",ta:"\xa4#,##0.00;(\xa4#,##0.00)","ta-LK":"\xa4#,##0.00;(\xa4#,##0.00)","ta-MY":"\xa4#,##0.00;(\xa4#,##0.00)","ta-SG":"\xa4#,##0.00;(\xa4#,##0.00)",te:"\xa4#,##0.00;(\xa4#,##0.00)",teo:"\xa4#,##0.00;(\xa4#,##0.00)","teo-KE":"\xa4#,##0.00;(\xa4#,##0.00)",tg:"#,##0.00\xa0\xa4",th:"\xa4#,##0.00;(\xa4#,##0.00)",ti:"\xa4#,##0.00","ti-ER":"\xa4#,##0.00",tk:"#,##0.00\xa0\xa4",to:"\xa4\xa0#,##0.00",tr:"\xa4#,##0.00;(\xa4#,##0.00)","tr-CY":"\xa4#,##0.00;(\xa4#,##0.00)",tt:"#,##0.00\xa0\xa4",twq:"#,##0.00\xa4",tzm:"#,##0.00\xa0\xa4",ug:"\xa4#,##0.00;(\xa4#,##0.00)",uk:"#,##0.00\xa0\xa4",und:"\xa4\xa0#,##0.00",ur:"\xa4#,##0.00;(\xa4#,##0.00)","ur-IN":"\xa4#,##0.00;(\xa4#,##0.00)",uz:"#,##0.00\xa0\xa4","uz-Arab":"\xa4\xa0#,##0.00","uz-Cyrl":"#,##0.00\xa0\xa4","uz-Latn":"#,##0.00\xa0\xa4",vai:"\xa4#,##0.00;(\xa4#,##0.00)","vai-Latn":"\xa4#,##0.00;(\xa4#,##0.00)","vai-Vaii":"\xa4#,##0.00;(\xa4#,##0.00)",vi:"#,##0.00\xa0\xa4",vun:"\xa4#,##0.00",wae:"\xa4\xa0#,##0.00",wo:"\xa4\xa0#,##0.00",xh:"\xa4#,##0.00",xog:"#,##0.00\xa0\xa4",yav:"#,##0.00\xa0\xa4;(#,##0.00\xa0\xa4)",yi:"\xa4\xa0#,##0.00",yo:"\xa4#,##0.00;(\xa4#,##0.00)","yo-BJ":"\xa4#,##0.00;(\xa4#,##0.00)",yrl:"\xa4\xa0#,##0.00","yrl-CO":"\xa4\xa0#,##0.00","yrl-VE":"\xa4\xa0#,##0.00",yue:"\xa4#,##0.00;(\xa4#,##0.00)","yue-Hans":"\xa4#,##0.00;(\xa4#,##0.00)","yue-Hant":"\xa4#,##0.00;(\xa4#,##0.00)",zgh:"#,##0.00\xa4",zh:"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hans":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hans-HK":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hans-MO":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hans-SG":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hant":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hant-HK":"\xa4#,##0.00;(\xa4#,##0.00)","zh-Hant-MO":"\xa4#,##0.00;(\xa4#,##0.00)",zu:"\xa4#,##0.00;(\xa4#,##0.00)"},d9=["standard","accounting"],h9=/([^\s0]+)?(\s*)0*[.,]*0*(\s*)([^\s0]+)?/,cC={},tA=e=>{const n=eo.locale()+"/"+JSON.stringify(e);return cC[n]||(cC[n]=new Intl.NumberFormat(eo.locale(),e).format),cC[n]},f9={engine:function(){return"intl"},_formatNumberCore:function(e,n,t){return"exponential"===n?this.callBase.apply(this,arguments):tA(this._normalizeFormatConfig(n,t,e))(e)},_normalizeFormatConfig:function(e,n,t){let i;if("decimal"===e){const o=String(t).split(".")[1];i={minimumIntegerDigits:n.precision||void 0,useGrouping:!1,maximumFractionDigits:o&&o.length,round:t<0?"ceil":"floor"}}else i=this._getPrecisionConfig(n.precision);if("percent"===e)i.style="percent";else if("currency"===e){const o=n.useCurrencyAccountingStyle??Ht().defaultUseCurrencyAccountingStyle;i.style="currency",i.currency=n.currency||Ht().defaultCurrency,i.currencySign=d9[+o]}return i},_getPrecisionConfig:function(e){let n;return n=null===e?{minimumFractionDigits:0,maximumFractionDigits:20}:{minimumFractionDigits:e||0,maximumFractionDigits:e||0},n},format:function(e,n){return"number"!=typeof e?e:("default"===(n=this._normalizeFormat(n)).currency&&(n.currency=Ht().defaultCurrency),n&&("function"==typeof n||n.type||n.formatter)?this.callBase.apply(this,arguments):tA(n)(e))},_getCurrencySymbolInfo:function(e){const n=(e=>new Intl.NumberFormat(eo.locale(),{style:"currency",currency:e}))(e);return this._extractCurrencySymbolInfo(n.format(0))},_extractCurrencySymbolInfo:function(e){const n=h9.exec(e)||[];return{position:n[1]?"before":"after",symbol:n[1]||n[4]||"",delimiter:n[2]||n[3]||""}},getCurrencySymbol:function(e){return e||(e=Ht().defaultCurrency),{symbol:this._getCurrencySymbolInfo(e).symbol}},getOpenXmlCurrencyFormat:function(e){const n=e||Ht().defaultCurrency;return((e,n)=>{if(!n)return;let t=e;if("string"==typeof e){t="";for(let r=0;r<e.length;r++)"$"!==e[r]&&(t+="\\"),t+=e[r]}const i={".00":"{0}","'":"\\'","\\(":"\\(","\\)":"\\)"," ":"\\ ",'"':"&quot;","\\\xa4":t},o=n.split(";");for(let r=0;r<o.length;r++)for(const c in i)Object.prototype.hasOwnProperty.call(i,c)&&(o[r]=o[r].replace(new RegExp(c,"g"),i[c]));return 2===o.length?o[0]+"_);"+o[1]:o[0]})(this._getCurrencySymbolInfo(n).symbol,eo.getValueByClosestLocale(o=>u9[o]))}},g9=typeof Intl<"u",nA=["currency","fixedpoint","exponential","percent","decimal"],uC={1:"K",2:"M",3:"B",4:"T"},iA={largenumber:"auto",thousands:1,millions:2,billions:3,trillions:4},dC=Zi({engine:function(){return"base"},numericFormats:nA,defaultLargeNumberFormatPostfixes:uC,_parseNumberFormatString:function(e){const n={};if(!e||"string"!=typeof e)return;const t=e.toLowerCase().split(" ");return Ee(t,(i,o)=>{nA.includes(o)?n.formatType=o:o in iA&&(n.power=iA[o])}),n.power&&!n.formatType&&(n.formatType="fixedpoint"),n.formatType?n:void 0},_calculateNumberPower:function(e,n,t,i){let o=Math.abs(e),r=0;if(o>1)for(;o&&o>=n&&(void 0===i||r<i);)r++,o/=n;else if(o>0&&o<1)for(;o<1&&(void 0===t||r>t);)r--,o*=n;return r},_getNumberByPower:function(e,n,t){let i=e;for(;n>0;)i/=t,n--;for(;n<0;)i*=t,n++;return i},_formatNumber:function(e,n,t){"auto"===n.power&&(n.power=this._calculateNumberPower(e,1e3,0,4)),n.power&&(e=this._getNumberByPower(e,n.power,1e3));const i=this.defaultLargeNumberFormatPostfixes[n.power]||"";let o=this._formatNumberCore(e,n.formatType,t);return o=o.replace(/(\d|.$)(\D*)$/,"$1"+i+"$2"),o},_formatNumberExponential:function(e,n){let t=this._calculateNumberPower(e,10),i=this._getNumberByPower(e,t,10);void 0===n.precision&&(n.precision=1),i.toFixed(n.precision||0)>=10&&(t++,i/=10);const o=(t>=0?"+":"")+t.toString();return this._formatNumberCore(i,"fixedpoint",n)+"E"+o},_addZeroes:function(e,n){const t=Math.pow(10,n),i=e<0?"-":"";let o=(e=(Math.abs(e)*t>>>0)/t).toString();for(;o.length<n;)o="0"+o;return i+o},_addGroupSeparators:function(e){const n=e.toString().split(".");return n[0].replace(/\B(?=(\d{3})+(?!\d))/g,Ht().thousandsSeparator)+(n[1]?Ht().decimalSeparator+n[1]:"")},_formatNumberCore:function(e,n,t){return"exponential"===n?this._formatNumberExponential(e,t):("decimal"!==n&&null!==t.precision&&(t.precision=t.precision||0),"percent"===n&&(e*=100),void 0!==t.precision&&(e="decimal"===n?this._addZeroes(e,t.precision):null===t.precision?e.toPrecision():GM(e,t.precision)),e="decimal"!==n?this._addGroupSeparators(e):e.toString().replace(".",Ht().decimalSeparator),"percent"===n&&(e+="%"),e)},_normalizeFormat:function(e){return e?("function"==typeof e||lt(e)||(e={type:e}),e):{}},_getSeparators:function(){return{decimalSeparator:this.getDecimalSeparator(),thousandsSeparator:this.getThousandsSeparator()}},getThousandsSeparator:function(){return this.format(1e4,"fixedPoint")[2]},getDecimalSeparator:function(){return this.format(1.2,{type:"fixedPoint",precision:1})[1]},convertDigits:function(e,n){const t=this.format(90,"decimal");if("string"!=typeof e||"0"===t[1])return e;const i=n?t[1]:"0",o=n?"0":t[1],c=new RegExp("["+i+"-"+(n?t[0]:"9")+"]","g");return e.replace(c,v=>String.fromCharCode(v.charCodeAt(0)+(o.charCodeAt(0)-i.charCodeAt(0))))},getNegativeEtalonRegExp:function(e){const n=this._getSeparators(),t=new RegExp("[0-9"+es(n.decimalSeparator+n.thousandsSeparator)+"]+","g");let i=this.format(-1,e).replace(t,"1");return["\\","(",")","[","]","*","+","$","^","?","|","{","}"].forEach(o=>{i=i.replace(new RegExp(`\\${o}`,"g"),`\\${o}`)}),i=i.replace(/ /g,"\\s"),i=i.replace(/1/g,".*"),new RegExp(i,"g")},getSign:function(e,n){if(!n)return"-"===e.replace(/[^0-9-]/g,"").charAt(0)?-1:1;const t=this.getNegativeEtalonRegExp(n);return e.match(t)?-1:1},format:function(e,n){if("number"!=typeof e||"number"==typeof n)return e;if("function"==typeof(n=n&&n.formatter||n))return n(e);(n=this._normalizeFormat(n)).type||(n.type="decimal");const t=this._parseNumberFormatString(n.type);if(!t){const i=this._getSeparators();return i.unlimitedIntegerDigits=n.unlimitedIntegerDigits,this.convertDigits(function s9(e,n){return n=n||e9,function(t){if("number"!=typeof t||isNaN(t))return"";const i=function n9(e){const n=e.split(";");return 1===n.length&&n.push("-"+n[0]),n}(e),r=t>0||1/t==1/0,c=i[r?0:1],v=function r9(e){let n=!1;for(let t=0;t<e.length;t++)if("'"===e[t]&&(n=!n),"."===e[t]&&!n)return t;return e.length}(c),S=[c.substr(0,v),c.substr(v+1)],T=XM(S[1]),F=T+ZM(S[1]);(function i9(e){return-1!==e.indexOf("%")&&!e.match(/'[^']*%[^']*'/g)})(c)&&(t=UM(t,2)),r||(t=-t);const N=XM(S[0]),B=ZM(S[0])||n.unlimitedIntegerDigits?void 0:N,X=Math.floor(t).toString().length,ne=Ci(F,0,15-X),le=function t9(e){return e.split(",").slice(1).map(function(n){let t=0;return n.split("").filter(function(i,o){return t+="'"===i,!("#"!==i&&"0"!==i||t%2)}).length})}(S[0]).reverse(),he=GM(t,ne<0?0:ne).split(".");let Oe=YM(lC(he[0]),N,B);const _e=YM(he[1],T,F);Oe=function o9(e,n,t){if(!n.length)return e;const i=[];let o=0;for(;e;){const r=n[o];if(!r)break;i.push(e.slice(0,r)),e=e.slice(r),o<n.length-1&&o++}return i.join(t)}(Oe,le,n.thousandsSeparator);const ke=lC(QM(lC(S[0]),Oe)),Ne=F?QM(S[1],_e):"";return ke+(Ne.match(/\d/)?n.decimalSeparator:"")+Ne}}(n.type,i)(e))}return this._formatNumber(e,t,n)},parse:function(e,n){if(!e)return;if(n&&n.parser)return n.parser(e);e=this.convertDigits(e,!0),n&&"string"!=typeof n&&vt.log("W0011");const t=this.getDecimalSeparator(),i=new RegExp("[^0-9"+es(t)+"]","g"),o=e.replace(i,"").replace(t,".").replace(/\.$/g,"");if("."===o||""===o)return null;if(this._calcSignificantDigits(o)>15)return NaN;let r=+o*this.getSign(e,n);n=this._normalizeFormat(n);const c=this._parseNumberFormatString(n.type);let v=c?.power;if(v){if("auto"===v){const S=e.match(/\d(K|M|B|T)/);S&&(v=Object.keys(uC).find(T=>uC[T]===S[1]))}r*=Math.pow(10,3*v)}return"percent"===c?.formatType&&(r/=100),r},_calcSignificantDigits:function(e){const[n,t]=e.split("."),i=r=>{let c=-1;for(let v=0;v<r.length;v++)if("0"!==r[v]){c=v;break}return c>-1?r.length-c:0};let o=0;return n&&(o+=i(n.split(""))),t&&(o+=i(t.split("").reverse())),o}});dC.inject(l9),g9&&dC.inject(f9);const Lt=dC;let Wp=1500,Sr=[];const Gp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wp;const{length:n}=Sr,t=(n?Sr[n-1]:e)+1;return Sr.push(t),t},Mu=e=>{const n=Sr.indexOf(e);n>=0&&Sr.splice(n,1)},oA=/cubic-bezier\((\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\)/,rA={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)","ease-in":"cubic-bezier(0.42, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.58, 1)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1)"};let Kp={};const y9=function(e){let t,n=(e=rA[e]||e).match(oA);n||(t="linear",n=rA[t].match(oA)),n=n.slice(1,5);for(let o=0;o<n.length;o++)n[o]=parseFloat(n[o]);const i=t||"cubicbezier_"+n.join("_").replace(/\./g,"p");return Be(Kp[i])||(Kp[i]=function(o,r,c,v,S){return v*function(e,n,t,i){const o=3*e,r=3*(t-e)-o,c=1-o-r,v=3*n,S=3*(i-n)-v,T=1-v-S,F=function(B){return B*(o+B*(r+B*c))},N=function(B){return o+B*(2*r+3*B*c)};return function(B){return(X=function(X){let he,ne=X,le=0;for(;le<14&&(he=F(ne)-X,!(Math.abs(he)<.001));)ne-=he/N(ne),le++;return ne}(B))*(v+X*(S+X*T));var X}}(n[0],n[1],n[2],n[3])(r/S)+c}),i},sA=ot(),Au=Te(yl,"dxFX"),x9=/^([+-])=(.*)/i,Ru="dxAnimData",hC="dxAnimQueue",O9={initAnimation:function(e,n){e.css({transitionProperty:"none"}),"string"==typeof n.from?e.addClass(n.from):yC(e,n.from);const t=this,i=new Ae,o=n.cleanupWhen;n.transitionAnimation={deferred:i,finish:function(){t._finishTransition(e),o?Ft(i,o).always(function(){t._cleanup(e,n)}):t._cleanup(e,n),i.resolveWith(e,[n,e])}},this._completeAnimationCallback(e,n).done(function(){n.transitionAnimation.finish()}).fail(function(){i.rejectWith(e,[n,e])}),n.duration||n.transitionAnimation.finish(),e.css("transform")},animate:function(e,n){return this._startAnimation(e,n),n.transitionAnimation.deferred.promise()},_completeAnimationCallback:function(e,n){const t=this,i=Date.now()+n.delay,o=new Ae,r=new Ae,c=new Ae;let v;const S=oM()+".dxFX";n.transitionAnimation.cleanup=function(){clearTimeout(v),clearTimeout(T),ue.off(e,S),ue.off(e,Au)},ue.one(e,S,function(){Date.now()-i>=n.duration&&r.reject()}),ue.off(e,Au),ue.on(e,Au,function(){t.stop(e,n),o.reject()});const T=setTimeout(function(){v=setTimeout(function(){c.reject()},n.duration+n.delay+ku._simulatedTransitionEndDelay),Ft(r,c).fail(function(){o.resolve()}.bind(this))});return o.promise()},_startAnimation:function(e,n){e.css({transitionProperty:"all",transitionDelay:n.delay+"ms",transitionDuration:n.duration+"ms",transitionTimingFunction:n.easing}),"string"==typeof n.to?e[0].className+=" "+n.to:n.to&&yC(e,n.to)},_finishTransition:function(e){e.css("transition","none")},_cleanup:function(e,n){n.transitionAnimation.cleanup(),"string"==typeof n.from&&(e.removeClass(n.from),e.removeClass(n.to))},stop:function(e,n,t){n&&(t?n.transitionAnimation.finish():(lt(n.to)&&Ee(n.to,function(i){e.css(i,e.css(i))}),this._finishTransition(e),this._cleanup(e,n)))}},aA={initAnimation:function(e,n){yC(e,n.from)},animate:function(e,n){const t=new Ae,i=this;return n?(Ee(n.to,function(o){void 0===n.from[o]&&(n.from[o]=i._normalizeValue(e.css(o)))}),n.to.transform&&(n.from.transform=i._parseTransform(n.from.transform),n.to.transform=i._parseTransform(n.to.transform)),n.frameAnimation={to:n.to,from:n.from,currentValue:n.from,easing:y9(n.easing),duration:n.duration,startTime:(new Date).valueOf(),finish:function(){this.currentValue=this.to,this.draw(),$o(n.frameAnimation.animationFrameId),t.resolve()},draw:function(){if(n.draw)return void n.draw(this.currentValue);const o=pe({},this.currentValue);o.transform&&(o.transform=ni(o.transform,function(r,c){return"translate"===c?Iu(r):"scale"===c?"scale("+r+")":"rotate"===c.substr(0,c.length-1)?c+"("+r+"deg)":void 0}).join(" ")),e.css(o)}},n.delay?(n.frameAnimation.startTime+=n.delay,n.frameAnimation.delayTimeout=setTimeout(function(){i._startAnimation(e,n)},n.delay)):i._startAnimation(e,n),t.promise()):t.reject().promise()},_startAnimation:function(e,n){ue.off(e,Au),ue.on(e,Au,function(){n.frameAnimation&&$o(n.frameAnimation.animationFrameId)}),this._animationStep(e,n)},_parseTransform:function(e){const n={};return Ee(e.match(/\w+\d*\w*\([^)]*\)\s*/g),function(t,i){const o=function(e){let n=e.match(N8);if(n&&n[1])return n=n[1].split(","),n={x:parseFloat(n[0]),y:parseFloat(n[1]),z:parseFloat(n[2])},n}(i),r=i.match(/scale\((.+?)\)/),c=i.match(/(rotate.)\((.+)deg\)/);o&&(n.translate=o),r&&r[1]&&(n.scale=parseFloat(r[1])),c&&c[1]&&(n[c[1]]=parseFloat(c[2]))}),n},stop:function(e,n,t){const i=n&&n.frameAnimation;i&&($o(i.animationFrameId),clearTimeout(i.delayTimeout),t&&i.finish(),delete n.frameAnimation)},_animationStep:function(e,n){const t=n&&n.frameAnimation;if(!t)return;const i=(new Date).valueOf();if(i>=t.startTime+t.duration)return void t.finish();t.currentValue=this._calcStepValue(t,i-t.startTime),t.draw();const o=this;t.animationFrameId=yu(function(){o._animationStep(e,n)})},_calcStepValue:function(e,n){const t=function(i,o){const r=Array.isArray(o)?[]:{};return Ee(o,function(c,v){if("string"==typeof v&&!1===parseFloat(v))return!0;r[c]="object"==typeof v?t(i[c],v):function(S){const T=n/e.duration,F=n,N=1*i[S],B=o[S]-i[S],X=e.duration;return function C9(e){return Kp[e]}(e.easing)(T,F,N,B,X)}(c)}),r};return t(e.from,e.to)},_normalizeValue:function(e){const n=parseFloat(e);return!1===n?e:n}},b9={initAnimation:function(){},animate:function(){return(new Ae).resolve().promise()},stop:De,isSynchronous:!0},lA=function(e,n,t,i){Ee(["from","to"],function(){if(!t(e[this]))throw vt.Error("E0010",n,this,i)})},cA=function(e,n){return lA(e,n,function(t){return lt(t)},"a plain object")},E9={validateConfig:function(e){!function(e,n){lA(e,"css",function(t){return"string"==typeof t},"a string")}(e)},setup:function(){}},w9={top:{my:"bottom center",at:"top center"},bottom:{my:"top center",at:"bottom center"},right:{my:"left center",at:"right center"},left:{my:"right center",at:"left center"}},pC={validateConfig:function(e){cA(e,"slide")},setup:function(e,n){const t=Nn(e);if("slide"!==n.type){const i="slideIn"===n.type?n.from:n.to;i.position=pe({of:sA},w9[n.direction]),vC(e,i)}this._setUpConfig(t,n.from),this._setUpConfig(t,n.to),nC(e)},_setUpConfig:function(e,n){n.left="left"in n?n.left:"+=0",n.top="top"in n?n.top:"+=0",this._initNewPosition(e,n)},_initNewPosition:function(e,n){const t={left:n.left,top:n.top};delete n.left,delete n.top;let i=this._getRelativeValue(t.left);void 0!==i?t.left=i+e.left:n.left=0,i=this._getRelativeValue(t.top),void 0!==i?t.top=i+e.top:n.top=0,n.transform=Iu({x:t.left,y:t.top})},_getRelativeValue:function(e){let n;if("string"==typeof e&&(n=x9.exec(e)))return parseInt(n[1]+"1")*n[2]}},fC={setup:function(e,n){const t=n.from,i=n.to,o="fadeOut"===n.type?1:0,r="fadeOut"===n.type?0:1;let c=lt(t)?String(t.opacity??o):String(t),v=lt(i)?String(i.opacity??r):String(i);switch(n.skipElementInitialStyles||(c=e.css("opacity")),n.type){case"fadeIn":v=1;break;case"fadeOut":v=0}n.from={visibility:"visible",opacity:c},n.to={opacity:v}}},uA={custom:{setup:function(){}},slide:pC,slideIn:pC,slideOut:pC,fade:fC,fadeIn:fC,fadeOut:fC,pop:{validateConfig:function(e){cA(e,"pop")},setup:function(e,n){const t=n.from,i=n.to,o="opacity"in t?t.opacity:e.css("opacity"),r="opacity"in i?i.opacity:1,c="scale"in t?t.scale:0,v="scale"in i?i.scale:1;n.from={opacity:o};const S=jp(e);n.from.transform=this._getCssTransform(S,c),n.to={opacity:r},n.to.transform=this._getCssTransform(S,v)},_getCssTransform:function(e,n){return Iu(e)+"scale("+n+")"}},css:E9},T9={type:"custom",from:{},to:{},duration:400,start:De,complete:De,easing:"ease",delay:0},M9={duration:400,easing:"ease",delay:0};function A9(){const e=this.element,n=this.config;if(vC(e,n.from),vC(e,n.to),this.configurator.setup(e,n),e.data(Ru,this),ku.off&&(n.duration=0,n.delay=0),this.strategy.initAnimation(e,n),n.start){const t=st(e);n.start.apply(this,[t,n])}}const k9=function(){const e=this,n=e.element,t=e.config;return e.isStarted=!0,e.strategy.animate(n,t).done(function(){!function(e){const n=e.element,t=e.config;if(n.removeData(Ru),t.complete){const i=st(n);t.complete.apply(this,[i,t])}e.deferred.resolveWith(this,[n,t])}(e)}).fail(function(){e.deferred.rejectWith(this,[n,t])})},F9=function(e){const n=this,t=n.element,i=n.config;clearTimeout(n.startTimeout),n.isStarted||n.start(),n.strategy.stop(t,i,e)},gC=Te(yl,"dxFXStartAnimation"),dA=function(e,n){const i=pe(!0,{},"css"===n.type?M9:T9,n),o=function(e){const n=uA[e.type];if(!n)throw vt.Error("E0011",e.type);return n}(i),r=function(e){e=e||{};const n={transition:Ly()?O9:aA,frame:aA,noAnimation:b9};let t=e.strategy||"transition";return"css"===e.type&&!Ly()&&(t="noAnimation"),n[t]}(i),c={element:V(e),config:i,configurator:o,strategy:r,isSynchronous:r.isSynchronous,setup:A9,start:k9,stop:F9,deferred:new Ae};return Be(o.validateConfig)&&o.validateConfig(i),function(e){ue.off(e.element,gC),ue.on(e.element,gC,function(){ku.stop(e.element)}),e.deferred.always(function(){ue.off(e.element,gC)})}(c),c};function mC(e){return e.data(hC)||[]}const hA=function(e){e.removeData(hC)};function qp(e){return!!e.data(Ru)}function _C(e,n){if(!(n=mC(e)).length)return;const t=n.shift();0===n.length&&hA(e),function V9(e){return e.setup(),ku.off||e.isSynchronous?e.start():e.startTimeout=setTimeout(function(){e.start()}),e.deferred.promise()}(t).done(function(){qp(e)||_C(e)})}function vC(e,n){if(!n||!n.position)return;const t=V(sA);let i=0,o=0;const r=Dn.calculate(e,n.position),c=e.offset(),v=e.position();v.top>c.top&&(o=t.scrollTop()),v.left>c.left&&(i=t.scrollLeft()),pe(n,{left:r.h.location-c.left+v.left-i,top:r.v.location-c.top+v.top-o}),delete n.position}function yC(e,n){Ee(n,function(t,i){try{e.css(t,Be(i)?i():i)}catch{}})}const ku={off:!1,animationTypes:uA,animate:function(e,n){const t=V(e);if(!t.length)return(new Ae).resolve().promise();const i=dA(t,n);return function H9(e,n){const t=mC(e);(function B9(e,n){e.data(hC,n)})(e,t),t.push(n),qp(e)||_C(e,t)}(t,i),i.deferred.promise()},createAnimation:dA,isAnimating:qp,stop:function(e,n){const t=V(e),i=mC(t);Ee(i,function(r,c){c.config.delay=0,c.config.duration=0,c.isSynchronous=!0}),qp(t)||_C(t,i);const o=t.data(Ru);o&&o.stop(n),t.removeData(Ru),hA(t)},_simulatedTransitionEndDelay:100},Wn=ku,z9=Qi.add,pA=Math.abs;let Zp=10;const U9=zo(function(){const e="desktop"===je.real().deviceType;if(!gl("pointer-events")||!e)return De;const n=V("<div>").addClass("dx-gesture-cover").css("pointerEvents","none");return ue.subscribeGlobal(n,"dxmousewheel",function(t){t.preventDefault()}),z9(function(){n.appendTo("body")}),function(t,i){n.css("pointerEvents",t?"all":"none"),t&&n.css("cursor",i)}}),CC=Fp.inherit({gesture:!0,configure:function(e){this.getElement().css("msTouchAction",e.immediate?"pinch-zoom":""),this.callBase(e)},allowInterruptionByMouseWheel:function(){return 2!==this._stage},getDirection:function(){return this.direction},_cancel:function(){this.callBase.apply(this,arguments),this._toggleGestureCover(!1),this._stage=0},start:function(e){e._needSkipEvent||jT(e)?this._cancel(e):(this._startEvent=Ty(e),this._startEventData=an(e),this._stage=1,this._init(e),this._setupImmediateTimer())},_setupImmediateTimer:function(){if(clearTimeout(this._immediateTimer),this._immediateAccepted=!1,this.immediate){if(0===this.immediateTimeout)return void(this._immediateAccepted=!0);this._immediateTimer=setTimeout(function(){this._immediateAccepted=!0}.bind(this),this.immediateTimeout??180)}},move:function(e){if(1===this._stage&&this._directionConfirmed(e)){if(this._stage=2,this._resetActiveElement(),this._toggleGestureCover(!0),this._clearSelection(e),this._adjustStartEvent(e),this._start(this._startEvent),0===this._stage)return;this._requestAccept(e),this._move(e),this._forgetAccept()}else 2===this._stage&&(this._clearSelection(e),this._move(e))},_directionConfirmed:function(e){const n=this._getTouchBoundary(e),t=Vs(this._startEventData,an(e)),i=pA(t.x),o=pA(t.y),r=this._validateMove(n,i,o),c=this._validateMove(n,o,i),v=this.getDirection(e);return"both"===v&&(r||c)||"horizontal"===v&&r||"vertical"===v&&c||this._immediateAccepted},_validateMove:function(e,n,t){return n&&n>=e&&(!this.immediate||n>=t)},_getTouchBoundary:function(e){return this.immediate||oi(e)?0:Zp},_adjustStartEvent:function(e){const n=this._getTouchBoundary(e),t=Vs(this._startEventData,an(e));this._startEvent.pageX+=wu(t.x)*n,this._startEvent.pageY+=wu(t.y)*n},_resetActiveElement:function(){"ios"===je.real().platform&&this.getElement().find(":focus").length&&Ip()},_toggleGestureCover:function(e){this._toggleGestureCoverImpl(e)},_toggleGestureCoverImpl:function(e){2===this._stage&&function(e,n){U9()(e,n)}(e,this.getElement().css("cursor"))},_clearSelection:function(e){oi(e)||Ol(e)||(()=>{const e=by.getSelection();if(e&&"Caret"!==e.type)if(e.empty)e.empty();else if(e.removeAllRanges)try{e.removeAllRanges()}catch{}})()},end:function(e){this._toggleGestureCover(!1),2===this._stage?this._end(e):1===this._stage&&this._stop(e),this._stage=0},dispose:function(){clearTimeout(this._immediateTimer),this.callBase.apply(this,arguments),this._toggleGestureCover(!1)},_init:De,_start:De,_move:De,_stop:De,_end:De});CC.initialTouchBoundary=Zp,CC.touchBoundary=function(e){if(!Ie(e))return Zp;Zp=e};const xC=CC,OC="dxdragstart",Xp="dxdrag",bC="dxdragend",Yp="dxdragenter",Qp="dxdragleave",SC="dxdrop",Dr=[],Il=[],DC=[],IC={setup:function(e,n){Dr.includes(e)||(Dr.push(e),Il.push([]),DC.push(n||{}))},add:function(e,n){const t=Dr.indexOf(e);this.updateEventsCounter(e,n.type,1);const i=n.selector;Il[t].includes(i)||Il[t].push(i)},updateEventsCounter:function(e,n,t){if([Yp,Qp,SC].indexOf(n)>-1){const i=Yt(e,"dxDragEventsCount")||0;Yt(e,"dxDragEventsCount",Math.max(0,i+t))}},remove:function(e,n){this.updateEventsCounter(e,n.type,-1)},teardown:function(e){if(!Yt(e,"dxDragEventsCount")){const t=Dr.indexOf(e);Dr.splice(t,1),Il.splice(t,1),DC.splice(t,1),Cp(e,"dxDragEventsCount")}}};_o(Yp,IC),_o(Qp,IC),_o(SC,IC);const Z9=xC.inherit({ctor:function(e){this.callBase(e),this.direction="both"},_init:function(e){this._initEvent=e},_start:function(e){if(e=this._fireEvent("dxdragstart",this._initEvent),this._maxLeftOffset=e.maxLeftOffset,this._maxRightOffset=e.maxRightOffset,this._maxTopOffset=e.maxTopOffset,this._maxBottomOffset=e.maxBottomOffset,e.targetElements||null===e.targetElements){const n=function(e){return Array.isArray(e)?e:[e]}(e.targetElements||[]);this._dropTargets=ni(n,function(t){return V(t).get(0)})}else this._dropTargets=Dr},_move:function(e){const n=an(e),t=this._calculateOffset(n);e=this._fireEvent("dxdrag",e,{offset:t}),this._processDropTargets(e),e._cancelPreventDefault||e.preventDefault()},_calculateOffset:function(e){return{x:this._calculateXOffset(e),y:this._calculateYOffset(e)}},_calculateXOffset:function(e){return"vertical"!==this.direction?this._fitOffset(e.x-this._startEventData.x,this._maxLeftOffset,this._maxRightOffset):0},_calculateYOffset:function(e){return"horizontal"!==this.direction?this._fitOffset(e.y-this._startEventData.y,this._maxTopOffset,this._maxBottomOffset):0},_fitOffset:function(e,n,t){return null!=n&&(e=Math.max(e,-n)),null!=t&&(e=Math.min(e,t)),e},_processDropTargets:function(e){const n=this._findDropTarget(e);n===this._currentDropTarget||(this._fireDropTargetEvent(e,Qp),this._currentDropTarget=n,this._fireDropTargetEvent(e,Yp))},_fireDropTargetEvent:function(e,n){if(!this._currentDropTarget)return;const t={type:n,originalEvent:e,draggingElement:this._$element.get(0),target:this._currentDropTarget};is(t)},_findDropTarget:function(e){const n=this;let t;return Ee(Dr,function(i,o){if(!n._checkDropTargetActive(o))return;const r=V(o);Ee(function(e){const n=Dr.indexOf(e.get(0)),t=Il[n].filter(o=>o);let i=e.find(t.join(", "));return Il[n].includes(void 0)&&(i=i.add(e)),i}(r),function(c,v){const S=V(v);n._checkDropTarget(function(e){const n=Dr.indexOf(e.get(0));return DC[n]}(r),S,V(t),e)&&(t=v)})}),t},_checkDropTargetActive:function(e){let n=!1;return Ee(this._dropTargets,function(t,i){return n=n||i===e||Uo(i,e),!n}),n},_checkDropTarget:function(e,n,t,i){if(n.get(0)===V(i.target).get(0))return!1;const r=function(e,n){return e.itemPositionFunc?e.itemPositionFunc(n):n.offset()}(e,n);if(i.pageX<r.left||i.pageY<r.top)return!1;const c=function(e,n){return e.itemSizeFunc?e.itemSizeFunc(n):{width:n.get(0).getBoundingClientRect().width,height:n.get(0).getBoundingClientRect().height}}(e,n);return!(i.pageX>r.left+c.width||i.pageY>r.top+c.height||t.length&&t.closest(n).length||e.checkDropTarget&&!e.checkDropTarget(n,i))&&n},_end:function(e){const n=an(e);this._fireEvent("dxdragend",e,{offset:this._calculateOffset(n)}),this._fireDropTargetEvent(e,SC),delete this._currentDropTarget}});Dl({emitter:Z9,events:["dxdragstart","dxdrag","dxdragend"]});const fA=function(){let e=[];return{add:function(n){e.includes(n)||e.push(n)},remove:function(n){const t=e.indexOf(n);-1!==t&&e.splice(t,1)},fire:function(){const n=e.pop(),t=!!n;return t&&n(),t},hasCallback:function(){return e.length>0}}}(),Y9=ot(),gA={top:{my:"top center",at:"top center"},bottom:{my:"bottom center",at:"bottom center"},right:{my:"right center",at:"right center"},left:{my:"left center",at:"left center"},center:{my:"center",at:"center"},"right bottom":{my:"right bottom",at:"right bottom"},"right top":{my:"right top",at:"right top"},"left bottom":{my:"left bottom",at:"left bottom"},"left top":{my:"left top",at:"left top"}},mA={h:0,v:0};class EC{constructor(n){let{position:t,container:i,visualContainer:o,$root:r,$content:c,$wrapper:v,onPositioned:S,onVisualPositionChanged:T,restorePosition:F,_fixWrapperPosition:N,_skipContentPositioning:B}=n;this._props={position:t,container:i,visualContainer:o,restorePosition:F,onPositioned:S,onVisualPositionChanged:T,_fixWrapperPosition:N,_skipContentPositioning:B},this._$root=r,this._$content=c,this._$wrapper=v,this._$markupContainer=void 0,this._$visualContainer=void 0,this._shouldRenderContentInitialPosition=!0,this._visualPosition=void 0,this._initialPosition=void 0,this._previousVisualPosition=void 0,this.updateContainer(i),this.updatePosition(t),this.updateVisualContainer(o)}get $container(){return this.updateContainer(),this._$markupContainer}get $visualContainer(){return this._$visualContainer}get position(){return this._position}set fixWrapperPosition(n){this._props._fixWrapperPosition=n,this.styleWrapperPosition()}set restorePosition(n){this._props.restorePosition=n}restorePositionOnNextRender(n){this._shouldRenderContentInitialPosition=n||!this._visualPosition}openingHandled(){this.restorePositionOnNextRender(this._props.restorePosition)}updatePosition(n){this._props.position=n,this._position=this._normalizePosition(n),this.updateVisualContainer()}updateContainer(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._props.container;this._props.container=n,this._$markupContainer=n?V(n):(e=>{const t=V(e).closest('[class^="dx-swatch-"], [class*=" dx-swatch-"]'),i=Ls();if(!t.length)return i;const o=new RegExp("(\\s|^)(dx-swatch-.*?)(\\s|$)"),r=t[0].className.match(o)[2];let c=i.children("."+r);return c.length||(c=V("<div>").addClass(r).appendTo(i)),c})(this._$root),this.updateVisualContainer(this._props.visualContainer)}updateVisualContainer(){this._props.visualContainer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._props.visualContainer,this._$visualContainer=this._getVisualContainer()}detectVisualPositionChange(n){this._updateVisualPositionValue(),this._raisePositionedEvents(n)}positionContent(){this._shouldRenderContentInitialPosition?this._renderContentInitialPosition():(Tn(this._$content,this._visualPosition),this.detectVisualPositionChange())}positionWrapper(){this._$visualContainer&&Dn.setup(this._$wrapper,{my:"top left",at:"top left",of:this._$visualContainer})}styleWrapperPosition(){const t=$t(this.$visualContainer.get(0))||this._props._fixWrapperPosition?"fixed":"absolute";this._$wrapper.css("position",t)}_updateVisualPositionValue(){this._previousVisualPosition=this._visualPosition,this._visualPosition=Nn(this._$content)}_renderContentInitialPosition(){this._renderBoundaryOffset(),iC(this._$content);const n=this._$wrapper.css("overflow");if(this._$wrapper.css("overflow","hidden"),!this._props._skipContentPositioning){const t=Dn.setup(this._$content,this._position);this._initialPosition=t}this._$wrapper.css("overflow",n),this.detectVisualPositionChange()}_raisePositionedEvents(n){const t=this._previousVisualPosition,i=this._visualPosition;(t?.top!==i.top||t?.left!==i.left)&&this._props.onVisualPositionChanged({previousPosition:t,position:i,event:n}),this._props.onPositioned({position:this._initialPosition})}_renderBoundaryOffset(){const n=this._position??{boundaryOffset:mA};this._$content.css("margin",`${n.v}px ${n.h}px`)}_getVisualContainer(){var n,t;const i=this._props.container,o=this._props.visualContainer,r=function(e){return!(!e||!e.preventDefault)}(null===(n=this._props.position)||void 0===n?void 0:n.of)?this._props.position.of.target:null===(t=this._props.position)||void 0===t?void 0:t.of;return V(o||i||r||Y9)}_normalizePosition(n){const t={boundaryOffset:mA};return Ie(n)?pe(!0,{},t,this._positionToObject(n)):t}_positionToObject(n){return _t(n)?pe({},gA[n]):n}}const Q9=Qi.add,El=ot(),_A=bp,wC=[];Q9(()=>{ue.subscribeGlobal(Pe.getDocument(),Wt.down,e=>{for(let n=wC.length-1;n>=0;n--)if(!wC[n]._proxiedDocumentDownHandler(e))return})});const Jp=vi.inherit({_supportedKeys(){return pe(this.callBase(),{escape(){this.hide()}})},_getDefaultOptions(){return pe(this.callBase(),{activeStateEnabled:!1,visible:!1,deferRendering:!0,shading:!0,shadingColor:"",wrapperAttr:{},position:pe({},gA.center),width:"80vw",minWidth:null,maxWidth:null,height:"80vh",minHeight:null,maxHeight:null,animation:{show:{type:"pop",duration:300,from:{scale:.55}},hide:{type:"pop",duration:300,from:{opacity:1,scale:1},to:{opacity:0,scale:.55}}},closeOnOutsideClick:!1,hideOnOutsideClick:!1,_ignorePreventScrollEventsDeprecation:!1,onShowing:null,onShown:null,onHiding:null,onHidden:null,contentTemplate:"content",innerOverlay:!1,restorePosition:!0,container:void 0,visualContainer:void 0,hideTopOverlayHandler:()=>{this.hide()},hideOnParentScroll:!1,preventScrollEvents:!0,onPositioned:null,propagateOutsideClick:!1,ignoreChildEvents:!0,_checkParentVisibility:!0,_hideOnParentScrollTarget:void 0,_fixWrapperPosition:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>!Ke(),options:{width:null,height:null,animation:null,_checkParentVisibility:!1}}])},_setOptionsByReference(){this.callBase(),pe(this._optionsByReference,{animation:!0})},$wrapper(){return this._$wrapper},_eventBindingTarget(){return this._$content},_setDeprecatedOptions(){this.callBase(),pe(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.1",alias:"hideOnOutsideClick"}})},ctor(e,n){this.callBase(e,n),n&&"preventScrollEvents"in n&&!n._ignorePreventScrollEventsDeprecation&&this._logDeprecatedPreventScrollEventsInfo()},_logDeprecatedPreventScrollEventsInfo(){this._logDeprecatedOptionWarning("preventScrollEvents",{since:"23.1",message:"If you enable this option, end-users may experience scrolling issues."})},_init(){this.callBase(),this._initActions(),this._initHideOnOutsideClickHandler(),this._initTabTerminatorHandler(),this._customWrapperClass=null,this._$wrapper=V("<div>").addClass("dx-overlay-wrapper"),this._$content=V("<div>").addClass("dx-overlay-content"),this._initInnerOverlayClass(),this.$element().addClass("dx-overlay"),this._$wrapper.attr("data-bind","dxControlsDescendantBindings: true"),this._toggleViewPortSubscription(!0),this._initHideTopOverlayHandler(this.option("hideTopOverlayHandler")),this._parentsScrollSubscriptionInfo={handler:n=>{this._hideOnParentsScrollHandler(n)}},this.warnPositionAsFunction()},warnPositionAsFunction(){Be(this.option("position"))&&vt.log("W0018")},_initInnerOverlayClass(){this._$content.toggleClass("dx-inner-overlay",this.option("innerOverlay"))},_initHideTopOverlayHandler(e){this._hideTopOverlayHandler=e},_getActionsList:()=>["onShowing","onShown","onHiding","onHidden","onPositioned","onVisualPositionChanged"],_initActions(){this._actions={};const e=this._getActionsList();Ee(e,(n,t)=>{this._actions[t]=this._createActionByOption(t,{excludeValidators:["disabled","readOnly"]})||De})},_initHideOnOutsideClickHandler(){var e=this;this._proxiedDocumentDownHandler=function(){return e._documentDownHandler(...arguments)}},_initMarkup(){this.callBase(),this._renderWrapperAttributes(),this._initPositionController()},_documentDownHandler(e){this._showAnimationProcessing&&this._stopAnimation();const n=V(El.document).is(e.target)||Uo(El.document,e.target),t=V(e.target).closest(".dx-inner-overlay").length;return n&&!t&&!(this._$content.is(e.target)||Uo(this._$content.get(0),e.target))&&this._shouldHideOnOutsideClick(e)&&this._outsideClickHandler(e),this.option("propagateOutsideClick")},_shouldHideOnOutsideClick(e){const{hideOnOutsideClick:n}=this.option();return Be(n)?n(e):n},_outsideClickHandler(e){this.option("shading")&&e.preventDefault(),this.hide()},_getAnonymousTemplateName:()=>"content",_initTemplates(){this._templateManager.addDefaultTemplates({content:new Hs}),this.callBase()},_isTopOverlay(){const e=this._overlayStack();for(let n=e.length-1;n>=0;n--){const t=e[n]._findTabbableBounds();if(t.first||t.last)return e[n]===this}return!1},_overlayStack:()=>wC,_zIndexInitValue:()=>Jp.baseZIndex(),_toggleViewPortSubscription(e){var n=this;_A.remove(this._viewPortChangeHandle),e&&(this._viewPortChangeHandle=function(){n._viewPortChangeHandler(...arguments)},_A.add(this._viewPortChangeHandle))},_viewPortChangeHandler(){this._positionController.updateContainer(this.option("container")),this._refresh()},_renderWrapperAttributes(){const{wrapperAttr:e}=this.option(),n=pe({},e),t=n.class;delete n.class,this.$wrapper().attr(n).removeClass(this._customWrapperClass).addClass(t),this._customWrapperClass=t},_renderVisibilityAnimate(e){return this._stopAnimation(),e?this._show():this._hide()},_getAnimationConfig(){return this._getOptionValue("animation",this)},_toggleBodyScroll:De,_animateShowing(){var e=this;const n=this._getAnimationConfig()??{},t=this._normalizeAnimation(n.show,"to"),i=t?.start??De,o=t?.complete??De;this._animate(t,function(){if(!e._isAnimationPaused){e.option("focusStateEnabled")&&ue.trigger(e._focusTarget(),"focus");for(var r=arguments.length,c=new Array(r),v=0;v<r;v++)c[v]=arguments[v];o.call(e,...c),e._showAnimationProcessing=!1,e._isHidden=!1,e._actions.onShown(),e._toggleSafariScrolling(),e._showingDeferred.resolve()}},function(){if(!e._isAnimationPaused){for(var r=arguments.length,c=new Array(r),v=0;v<r;v++)c[v]=arguments[v];i.call(e,...c),e._showAnimationProcessing=!0}})},_processShowingHidingCancel(e,n,t){ll(e)?e.then(i=>{i?t():n()}).catch(()=>n()):e?t():n()},_show(){if(this._showingDeferred=Ae(),this._parentHidden=this._isParentHidden(),this._showingDeferred.done(()=>{delete this._parentHidden}),this._parentHidden)return this._isHidden=!0,this._showingDeferred.resolve();if(this._currentVisible)return Ae().resolve().promise();if(this._currentVisible=!0,this._isHidingActionCanceled)delete this._isHidingActionCanceled,this._showingDeferred.reject();else{const e=()=>{this._stopAnimation(),this._toggleBodyScroll(this.option("enableBodyScroll")),this._toggleVisibility(!0),this._$content.css("visibility","hidden"),this._$content.toggleClass("dx-state-invisible",!1),this._updateZIndexStackPosition(!0),this._positionController.openingHandled(),this._renderContent();const n={cancel:!1};this._actions.onShowing(n),this._processShowingHidingCancel(n.cancel,()=>{this._$content.css("visibility",""),this._renderVisibility(!0),this._animateShowing()},()=>{this._toggleVisibility(!1),this._$content.css("visibility",""),this._$content.toggleClass("dx-state-invisible",!0),this._isShowingActionCanceled=!0,this._moveFromContainer(),this._toggleBodyScroll(!0),this.option("visible",!1),this._showingDeferred.resolve()})};this.option("templatesRenderAsynchronously")?(this._stopShowTimer(),this._asyncShowTimeout=setTimeout(e)):e()}return this._showingDeferred.promise()},_normalizeAnimation(e,n){return e&&(e=pe({type:"slide",skipElementInitialStyles:!0},e),dt(e[n])&&pe(e[n],{position:this._positionController.position})),e},_animateHiding(){var e=this;const n=this._getAnimationConfig()??{},t=this._normalizeAnimation(n.hide,"from"),i=t?.start??De,o=t?.complete??De;this._animate(t,function(){var r;e._$content.css("pointerEvents",""),e._renderVisibility(!1);for(var c=arguments.length,v=new Array(c),S=0;S<c;S++)v[S]=arguments[S];o.call(e,...v),e._hideAnimationProcessing=!1,null===(r=e._actions)||void 0===r||r.onHidden(),e._hidingDeferred.resolve()},function(){e._$content.css("pointerEvents","none");for(var r=arguments.length,c=new Array(r),v=0;v<r;v++)c[v]=arguments[v];i.call(e,...c),e._hideAnimationProcessing=!0})},_hide(){if(!this._currentVisible)return Ae().resolve().promise();this._currentVisible=!1,this._hidingDeferred=Ae();const e={cancel:!1};return this._isShowingActionCanceled?(delete this._isShowingActionCanceled,this._hidingDeferred.reject()):(this._actions.onHiding(e),this._toggleSafariScrolling(),this._toggleBodyScroll(!0),this._processShowingHidingCancel(e.cancel,()=>{this._forceFocusLost(),this._toggleShading(!1),this._toggleSubscriptions(!1),this._stopShowTimer(),this._animateHiding()},()=>{this._isHidingActionCanceled=!0,this._toggleBodyScroll(this.option("enableBodyScroll")),this.option("visible",!0),this._hidingDeferred.resolve()})),this._hidingDeferred.promise()},_forceFocusLost(){const e=Pe.getActiveElement();this._$content.find(e).length&&Ip()},_animate(e,n,t){e?Wn.animate(this._$content,pe({},e,{start:t=t||e.start||De,complete:n})):n()},_stopAnimation(){Wn.stop(this._$content,!0)},_renderVisibility(e){e&&this._isParentHidden()||(this._currentVisible=e,this._stopAnimation(),e||g6(this._$content),e?(this._checkContainerExists(),this._moveToContainer(),this._renderGeometry(),IT(this._$content),Cr(this._$content)):(this._toggleVisibility(e),this._$content.toggleClass("dx-state-invisible",!e),this._updateZIndexStackPosition(e),this._moveFromContainer()),this._toggleShading(e),this._toggleSubscriptions(e))},_updateZIndexStackPosition(e){const n=this._overlayStack(),t=n.indexOf(this);e?(-1===t&&(this._zIndex=Gp(this._zIndexInitValue()),n.push(this)),this._$wrapper.css("zIndex",this._zIndex),this._$content.css("zIndex",this._zIndex)):-1!==t&&(n.splice(t,1),Mu(this._zIndex))},_toggleShading(e){this._$wrapper.toggleClass("dx-overlay-shader",e&&this.option("shading")),this._$wrapper.css("backgroundColor",this.option("shading")?this.option("shadingColor"):""),this._toggleTabTerminator(e&&this.option("shading"))},_initTabTerminatorHandler(){var e=this;this._proxiedTabTerminatorHandler=function(){e._tabKeyHandler(...arguments)}},_toggleTabTerminator(e){const n=Te("keydown",this.NAME);e?ue.on(Pe.getDocument(),n,this._proxiedTabTerminatorHandler):ue.off(Pe.getDocument(),n,this._proxiedTabTerminatorHandler)},_findTabbableBounds(){const e=this._$wrapper.find("*"),n=e.length-1,t={first:null,last:null};for(let i=0;i<=n&&(!t.first&&e.eq(i).is(HT)&&(t.first=e.eq(i)),!t.last&&e.eq(n-i).is(HT)&&(t.last=e.eq(n-i)),!t.first||!t.last);i++);return t},_tabKeyHandler(e){if("tab"!==$n(e)||!this._isTopOverlay())return;const n=this._findTabbableBounds(),t=n.first,i=n.last,o=!e.shiftKey&&e.target===i.get(0),r=e.shiftKey&&e.target===t.get(0),c=0===n.length,v=!Uo(this._$wrapper.get(0),e.target);if(o||r||c||v){e.preventDefault();const S=e.shiftKey?i:t;ue.trigger(S,"focusin"),ue.trigger(S,"focus")}},_toggleSubscriptions(e){Ke()&&(this._toggleHideTopOverlayCallback(e),this._toggleHideOnParentsScrollSubscription(e))},_toggleHideTopOverlayCallback(e){this._hideTopOverlayHandler&&(e?fA.add(this._hideTopOverlayHandler):fA.remove(this._hideTopOverlayHandler))},_toggleHideOnParentsScrollSubscription(e){const n=Te("scroll",this.NAME),{prevTargets:t,handler:i}=this._parentsScrollSubscriptionInfo??{};ue.off(t,n,i);const o=this.option("hideOnParentScroll");if(e&&o){let r=this._getHideOnParentScrollTarget().parents();"desktop"===je.real().deviceType&&(r=r.add(El)),ue.on(r,n,i),this._parentsScrollSubscriptionInfo.prevTargets=r}},_hideOnParentsScrollHandler(e){let n=!1;const t=this.option("hideOnParentScroll");Be(t)&&(n=t(e)),!n&&!this._showAnimationProcessing&&this.hide()},_getHideOnParentScrollTarget(){const e=V(this.option("_hideOnParentScrollTarget"));return e.length?e:this._$wrapper},_render(){this.callBase(),this._appendContentToElement(),this._renderVisibilityAnimate(this.option("visible"))},_appendContentToElement(){this._$content.parent().is(this.$element())||this._$content.appendTo(this.$element())},_renderContent(){const e=!this._currentVisible&&this.option("deferRendering");this.option("visible")&&this._isParentHidden()?this._isHidden=!0:this._contentAlreadyRendered||e||(this._contentAlreadyRendered=!0,this._appendContentToElement(),this.callBase())},_isParentHidden(){if(!this.option("_checkParentVisibility"))return!1;if(void 0!==this._parentHidden)return this._parentHidden;const e=this.$element().parent();if(e.is(":visible"))return!1;let n=!1;return e.add(e.parents()).each((t,i)=>{if("none"===V(i).css("display"))return n=!0,!1}),n||!Pe.getBody().contains(e.get(0))},_renderContentImpl(){const e=Ae(),n=this.option("contentTemplate"),t=this._getTemplate(n),i=this._templateManager.anonymousTemplateName===n;return t&&t.render({container:st(this.$content()),noModel:!0,transclude:i,onRendered:()=>{e.resolve(),this.option("templatesRenderAsynchronously")&&this._dimensionChanged()}}),this._toggleWrapperScrollEventsSubscription(this.option("preventScrollEvents")),e.done(()=>{this.option("visible")&&this._moveToContainer()}),e.promise()},_getPositionControllerConfig(){const{container:e,visualContainer:n,_fixWrapperPosition:t,restorePosition:i,_skipContentPositioning:o}=this.option();return{container:e,visualContainer:n,$root:this.$element(),$content:this._$content,$wrapper:this._$wrapper,onPositioned:this._actions.onPositioned,onVisualPositionChanged:this._actions.onVisualPositionChanged,restorePosition:i,_fixWrapperPosition:t,_skipContentPositioning:o}},_initPositionController(){this._positionController=new EC(this._getPositionControllerConfig())},_toggleWrapperScrollEventsSubscription(e){const n=Te(Xp,this.NAME);ue.off(this._$wrapper,n),e&&ue.on(this._$wrapper,n,{validate:()=>!0,getDirection:()=>"both",_toggleGestureCover(t){t||this._toggleGestureCoverImpl(t)},_clearSelection:De,isNative:!0},t=>{const{originalEvent:i}=t.originalEvent,{type:o}=i||{},r="wheel"===o,c="mousemove"===o,v=r&&!ri(t);t._cancelPreventDefault=!0,i&&!1!==t.cancelable&&(!c&&!r||v)&&t.preventDefault()})},_moveFromContainer(){this._$content.appendTo(this.$element()),this._$wrapper.detach()},_checkContainerExists(){const e=this._positionController.$container;void 0!==e&&(e.length>0||Jt.log("W1021",this.NAME))},_moveToContainer(){this._$wrapper.appendTo(this._positionController.$container),this._$content.appendTo(this._$wrapper)},_renderGeometry(e){const{visible:n}=this.option();n&&Ke()&&(this._stopAnimation(),this._renderGeometryImpl())},_renderGeometryImpl(){this._positionController.updatePosition(this._getOptionValue("position")),this._renderWrapper(),this._renderDimensions(),this._renderPosition()},_renderPosition(){this._positionController.positionContent()},_isAllWindowCovered(){return $t(this._positionController.$visualContainer.get(0))&&this.option("shading")},_toggleSafariScrolling(){const e=this.option("visible"),n=V(Pe.getBody()),t="ios"===je.real().platform&&Wo.safari,i=this._isAllWindowCovered(),o=n.hasClass("dx-prevent-safari-scrolling");t&&(!o||e&&i&&!this._disposed?!o&&e&&i&&(this._cachedBodyScrollTop=El.pageYOffset,n.addClass("dx-prevent-safari-scrolling")):(n.removeClass("dx-prevent-safari-scrolling"),El.scrollTo(0,this._cachedBodyScrollTop),this._cachedBodyScrollTop=void 0))},_renderWrapper(){this._positionController.styleWrapperPosition(),this._renderWrapperDimensions(),this._positionController.positionWrapper()},_renderWrapperDimensions(){const{$visualContainer:e}=this._positionController,n=Pe.getDocumentElement(),t=$t(e.get(0)),i=t?n.clientWidth:qt(e),o=t?El.innerHeight:et(e);this._$wrapper.css({width:i,height:o})},_renderDimensions(){const e=this._$content.get(0);this._$content.css({minWidth:this._getOptionValue("minWidth",e),maxWidth:this._getOptionValue("maxWidth",e),minHeight:this._getOptionValue("minHeight",e),maxHeight:this._getOptionValue("maxHeight",e),width:this._getOptionValue("width",e),height:this._getOptionValue("height",e)})},_focusTarget(){return this._$content},_attachKeyboardEvents(){this._keyboardListenerId=vu_on(this._$content,null,e=>this._keyboardHandler(e))},_keyboardHandler(e){(V(e.originalEvent.target).is(this._$content)||!this.option("ignoreChildEvents"))&&this.callBase(...arguments)},_isVisible(){return this.option("visible")},_visibilityChanged(e){e?this.option("visible")&&this._renderVisibilityAnimate(e):this._renderVisibilityAnimate(e)},_dimensionChanged(){this._renderGeometry()},_clean(){const e=this.option();!this._contentAlreadyRendered&&!e.isRenovated&&this.$content().empty(),this._renderVisibility(!1),this._stopShowTimer(),this._cleanFocusState()},_stopShowTimer(){this._asyncShowTimeout&&clearTimeout(this._asyncShowTimeout),this._asyncShowTimeout=null},_dispose(){Wn.stop(this._$content,!1),clearTimeout(this._deferShowTimer),this._toggleViewPortSubscription(!1),this._toggleSubscriptions(!1),this._updateZIndexStackPosition(!1),this._toggleTabTerminator(!1),this._actions=null,this._parentsScrollSubscriptionInfo=null,this.callBase(),this._toggleSafariScrolling(),this.option("visible")&&Mu(this._zIndex),this._$wrapper.remove(),this._$content.remove()},_toggleRTLDirection(e){this._$content.toggleClass("dx-rtl",e)},_optionChanged(e){const{value:n,name:t}=e;if(this._getActionsList().includes(t))this._initActions();else switch(t){case"animation":case"closeOnOutsideClick":case"hideOnOutsideClick":case"propagateOutsideClick":break;case"shading":this._toggleShading(this.option("visible")),this._toggleSafariScrolling();break;case"shadingColor":this._toggleShading(this.option("visible"));break;case"width":case"height":case"minWidth":case"maxWidth":case"minHeight":case"maxHeight":this._renderGeometry();break;case"position":this._positionController.updatePosition(this.option("position")),this._positionController.restorePositionOnNextRender(!0),this._renderGeometry(),this._toggleSafariScrolling();break;case"visible":this._renderVisibilityAnimate(n).done(()=>{var i;return null===(i=this._animateDeferred)||void 0===i?void 0:i.resolveWith(this)}).fail(()=>{var i;return null===(i=this._animateDeferred)||void 0===i?void 0:i.reject()});break;case"container":this._positionController.updateContainer(n),this._invalidate(),this._toggleSafariScrolling();break;case"visualContainer":this._positionController.updateVisualContainer(n),this._renderWrapper(),this._toggleSafariScrolling();break;case"innerOverlay":this._initInnerOverlayClass();break;case"deferRendering":case"contentTemplate":this._contentAlreadyRendered=!1,this._clean(),this._invalidate();break;case"hideTopOverlayHandler":this._toggleHideTopOverlayCallback(!1),this._initHideTopOverlayHandler(n),this._toggleHideTopOverlayCallback(this.option("visible"));break;case"hideOnParentScroll":case"_hideOnParentScrollTarget":this._toggleHideOnParentsScrollSubscription(this.option("visible"));break;case"rtlEnabled":this._contentAlreadyRendered=!1,this.callBase(e);break;case"_fixWrapperPosition":this._positionController.fixWrapperPosition=n;break;case"wrapperAttr":this._renderWrapperAttributes();break;case"restorePosition":this._positionController.restorePosition=n;break;case"preventScrollEvents":this._logDeprecatedPreventScrollEventsInfo(),this._toggleWrapperScrollEventsSubscription(n);break;default:this.callBase(e)}},toggle(e){e=void 0===e?!this.option("visible"):e;const n=Ae();if(e===this.option("visible"))return n.resolveWith(this,[e]).promise();const t=Ae();return this._animateDeferred=t,this.option("visible",e),t.promise().done(()=>{delete this._animateDeferred,n.resolveWith(this,[this.option("visible")])}).fail(()=>{delete this._animateDeferred,n.reject()}),n.promise()},$content(){return this._$content},show(){return this.toggle(!0)},hide(){return this.toggle(!1)},content(){return st(this._$content)},repaint(){this._contentAlreadyRendered?(this._positionController.restorePositionOnNextRender(!0),this._renderGeometry({forceStopAnimation:!0}),Cr(this._$content)):this.callBase()}});Jp.baseZIndex=e=>(e=>(Wp=mn(e,Wp),Wp))(e),xt("dxOverlay",Jp);const wl=Jp;class $s extends Ns{constructor(n,t,i,o){super(),this._render=n,this._fields=t,this._fieldsMap=o||{},this._watchMethod=i}_renderCore(n){const t=V(n.container),i=function(e,n,t,i,o){let r;const c=(v=e,n(()=>v,function(v){r&&r(),hp(v)?o(v):r=function(S,T,F,N,B){const X={},ne=F.slice(),le=F.map(function(he){const Oe=N[he];return T(Oe?()=>Oe(S):()=>S[he],function(_e){if(X[he]=_e,ne.length){const ke=ne.indexOf(he);ke>=0&&ne.splice(ke,1)}ne.length||B(X)})});return function(){le.forEach(he=>he())}}(v,n,t,i,o)}));var v;return function(){r&&r(),c&&c()}}(n.model,this._watchMethod,this._fields,this._fieldsMap,o=>{t.empty(),this._render(t,o,n.model)});return ue.on(t,yl,i),t.contents()}}const e7=Qi.add,vA="DEVEXTREME_XHR_ERROR_UNLOAD",PC=function(e){return Array.isArray(e)||(e=[e]),ni(e,function(n){const t={selector:Be(n)||"string"==typeof n?n:n.getter||n.field||n.selector,desc:!(!n.desc&&"d"!==String(n.dir).charAt(0).toLowerCase())};return n.compare&&(t.compare=n.compare),t})},n7=function(){const e={timeout:"Network connection timeout",error:"Unspecified network error",parsererror:"Unexpected server response"};let n;return e7(function(){const t=ot();Pe.listen(t,"beforeunload",function(){n=!0})}),function(t,i){return n?vA:t.status<400?e[o=i]||o:t.statusText;var o}}(),i7={count:{seed:0,step:function(e){return 1+e}},sum:{seed:0,step:function(e,n){return e+n}},min:{step:function(e,n){return n<e?n:e}},max:{step:function(e,n){return n>e?n:e}},avg:{seed:[0,0],step:function(e,n){return[e[0]+n,e[1]+1]},finalize:function(e){return e[1]?e[0]/e[1]:NaN}}},o7=function(){let n,e=0;return{obtain:function(){0===e&&(n=new Ae),e++},release:function(){e--,e<1&&n.resolve()},promise:function(){return(0===e?(new Ae).resolve():n).promise()},reset:function(){e=0,n&&n.resolve()}}}(),ef=function(e,n,t){if(Array.isArray(e)){const i=ni(n,function(r,c){return c});let o;for(let r=0;r<i.length;r++)if(o=i[r],!ks(n[o],t[o],{strict:!1}))return!1;return!0}return ks(n,t,{strict:!1})},Pl=function(){const e=new Ae;return e.resolve.apply(e,arguments).promise()},yA=function(){const e=new Ae;return e.reject.apply(e,arguments).promise()};const Mn=zv(vt.ERROR_MESSAGES,{E4000:"[DevExpress.data]: {0}",E4001:"Unknown aggregating function is detected: '{0}'",E4002:"Unsupported OData protocol version is used",E4003:"Unknown filter operation is used: {0}",E4004:"The thenby() method is called before the sortby() method",E4005:"Store requires a key expression for this operation",E4006:"ArrayStore 'data' option must be an array",E4007:"Compound keys cannot be auto-generated",E4008:"Attempt to insert an item with a duplicated key",E4009:"Data item cannot be found",E4010:"CustomStore does not support creating queries",E4011:"Custom Store method is not implemented or is not a function: {0}",E4012:"Custom Store method returns an invalid value: {0}",E4013:"Local Store requires the 'name' configuration option is specified",E4014:"Unknown data type is specified for ODataStore: {0}",E4015:"Unknown entity name or alias is used: {0}",E4016:"The compileSetter(expr) method is called with 'self' passed as a parameter",E4017:"Keys cannot be modified",E4018:"The server has returned a non-numeric value in a response to an item count request",E4019:"Mixing of group operators inside a single group of filter expression is not allowed",E4020:"Unknown store type is detected: {0}",E4021:"The server response does not provide the totalCount value",E4022:"The server response does not provide the groupCount value",E4023:"Could not parse the following XML: {0}",E4024:"String function {0} cannot be used with the data field {1} of type {2}.",W4000:"Data returned from the server has an incorrect structure",W4001:'The {0} field is listed in both "keyType" and "fieldTypes". The value of "fieldTypes" is used.',W4002:"Data loading has failed for some cells due to the following error: {0}"});const TC=function(e){var n;null===(n=null)||void 0===n||n(e)};function xA(e,n,t,i){let o,r;if(i){for(let c=0;c<n.length;c++)if(o=n[c].items||n[c].collapsedItems||[],r=xA(e,o||[],t,i-1),r)return r}else if(Ws(e,n,t)>=0)return n}function g7(e,n,t,i){return i?xA(e,n,t,i)||[]:n}function OA(e,n,t){e._dataByKeyMap&&(e._dataByKeyMap[JSON.stringify(n)]=t,e._dataByKeyMapLength+=t?1:-1)}function bA(e,n,t){t=t||new WeakMap;const i=e?Object.create(Object.getPrototypeOf(e)):{};e&&t.set(e,i);const o=He({},e);nu(i,o,!0,!0);for(const r in o){const c=o[r],v=n?.[r];dt(c)&&!lt(c)&&dt(v)&&!t.has(c)&&(i[r]=bA(c,v,t))}for(const r in i){const c=i[r];dt(c)&&t.has(c)&&(i[r]=t.get(c))}return i}function y7(e,n){const t=bA(e,n);return nu(t,n,!0,!0)}function tf(e){let{keyInfo:n,data:t,changes:i,groupCount:o,useInsertIndex:r,immutable:c,disableCache:v,logError:S,skipCopying:T}=e;const F=!0===c?[...t]:t;return i.forEach(N=>{const B="insert"===N.type?F:g7(n,F,N.key,o);switch(!v&&function m7(e,n){if(e.key()&&(!n._dataByKeyMap||n._dataByKeyMapLength!==n.length)){const t={},i=n.length;for(let o=0;o<i;o++)t[JSON.stringify(e.keyOf(n[o]))]=n[o];n._dataByKeyMap=t,n._dataByKeyMapLength=i}}(n,B),N.type){case"update":MC(n,B,N.key,N.data,!0,c,S);break;case"insert":AC(n,B,N.data,r&&Ie(N.index)?N.index:-1,!0,S,T);break;case"remove":SA(n,B,N.key,!0,S)}}),F}function nf(e,n,t){return e?n&&Mn.log(t):yA(Mn.Error(t))}function MC(e,n,t,i,o,r,c){let v;const S=e.key();if(S){if(function f7(e,n){let t;const i="string"==typeof n?n.split():n.slice();for(;i.length;)if(t=i.shift(),t in e)return!0;return!1}(i,S)&&!ef(S,t,e.keyOf(i)))return nf(o,c,"E4017");if(v=function _7(e,n){if(e._dataByKeyMap)return e._dataByKeyMap[JSON.stringify(n)]}(n,t),!v){const T=Ws(e,n,t);if(T<0)return nf(o,c,"E4009");if(v=n[T],!0===r&&Ie(v)){const F=y7(v,i);return n[T]=F,!o&&Pl(F,t)}}}else v=t;if(nu(v,i,!0),!o)return Ht().useLegacyStoreResult?Pl(t,i):Pl(v,t)}function AC(e,n,t,i,o,r,c){let v;const S=e.key(),T=lt(t)&&!c?pe({},t):t;if(S){if(v=e.keyOf(T),void 0===v||"object"==typeof v&&dp(v)){if(Array.isArray(S))throw Mn.Error("E4007");v=T[S]=String(new Pn)}else if(void 0!==n[Ws(e,n,v)])return nf(o,r,"E4008")}else v=T;if(i>=0?n.splice(i,0,T):n.push(T),OA(n,v,T),!o)return Pl(Ht().useLegacyStoreResult?t:T,v)}function SA(e,n,t,i,o){const r=Ws(e,n,t);return r>-1&&(n.splice(r,1),OA(n,t,null)),i?r<0?nf(i,o,"E4009"):void 0:Pl(t)}function Ws(e,n,t){const i=e.key();if(!function v7(e,n){return!e._dataByKeyMap||e._dataByKeyMap[JSON.stringify(n)]}(n,t))return-1;for(let o=0,r=n.length;o<r;o++)if(ef(i,e.keyOf(n[o]),t))return o;return-1}const Fu=Tt.inherit({toArray:function(){const e=[];for(this.reset();this.next();)e.push(this.current());return e},countable:function(){return!1}}),RC=Fu.inherit({ctor:function(e){this.array=e,this.index=-1},next:function(){return this.index+1<this.array.length&&(this.index++,!0)},current:function(){return this.array[this.index]},reset:function(){this.index=-1},toArray:function(){return this.array.slice(0)},countable:function(){return!0},count:function(){return this.array.length}}),rf=Fu.inherit({ctor:function(e){this.iter=e},next:function(){return this.iter.next()},current:function(){return this.iter.current()},reset:function(){return this.iter.reset()}}),kC=rf.inherit({ctor:function(e,n){this.callBase(e),this.index=-1,this.mapper=n},current:function(){return this.mapper(this.callBase(),this.index)},next:function(){const e=this.callBase();return e&&this.index++,e}}),FC=Fu.inherit({ctor:function(e,n,t,i){this.langParams=e.langParams,e instanceof kC||((e=new kC(e,this._wrap)).langParams=this.langParams),this.iter=e,this.rules=[{getter:n,desc:t,compare:i,langParams:this.langParams}]},thenBy:function(e,n,t){const i=new FC(this.sortedIter||this.iter,e,n,t);return this.sortedIter||(i.rules=this.rules.concat(i.rules)),i},next:function(){return this._ensureSorted(),this.sortedIter.next()},current:function(){return this._ensureSorted(),this.sortedIter.current()},reset:function(){delete this.sortedIter},countable:function(){return this.sortedIter||this.iter.countable()},count:function(){return this.sortedIter?this.sortedIter.count():this.iter.count()},_ensureSorted:function(){const e=this;e.sortedIter||(Ee(e.rules,function(){this.getter=sn(this.getter)}),e.sortedIter=new kC(new RC(this.iter.toArray().sort(function(n,t){return e._compare(n,t)})),e._unwrap))},_wrap:function(e,n){return{index:n,value:e}},_unwrap:function(e){return e.value},_getDefaultCompare:e=>(n,t)=>function(e,n,t){return _t(e)&&_t(n)&&(null!=t&&t.locale||null!=t&&t.collatorOptions)?new Intl.Collator(t?.locale||void 0,t?.collatorOptions||void 0).compare(e,n):(e=mr(e,!1,t),n=mr(n,!1,t),null===e&&null!==n?-1:null!==e&&null===n||void 0===e&&void 0!==n?1:void 0!==e&&void 0===n||e<n?-1:e>n?1:0)}(n,t,e),_compare:function(e,n){const t=e.index,i=n.index;if((e=e.value)===(n=n.value))return t-i;for(let o=0,r=this.rules.length;o<r;o++){const c=this.rules[o],v=c.getter(e),S=c.getter(n),F=(c.compare||this._getDefaultCompare(c.langParams))(v,S);if(F)return c.desc?-F:F}return t-i}}),LC=function(){let e={};const n=c=>mr(c,!1,e),i=function(c){var v;return Ie(c)?null!==(v=e)&&void 0!==v&&v.locale?c.toLocaleString(e.locale):c.toString():""};function o(c,v,S){return function(T){T=n(c(T));let F=r(v)?T===v:T==v;return S&&(F=!F),F}}function r(c){return""===c||0===c||!1===c}return function(c,v){return e=v||{},Be(c)?c:function(e){const n=e[0],t=e[1];return!!(Array.isArray(n)||Be(n)&&(Array.isArray(t)||Be(t)||function(e){return"and"===e||"or"===e}(t)))}(c)?function(c){if(function(e){if(e.length>2&&Array.isArray(e[0])&&"or"===e[1]&&"string"==typeof e[0][0]&&"="===e[0][1]){const[n]=e[0];return!e.find((t,i)=>i%2!=0?"or"!==t:!Array.isArray(t)||3!==t.length||t[0]!==n||"="!==t[1])}return!1}(c))return(F=>{const N=sn(F[0][0]),B=F.reduce((X,ne,le)=>(le%2==0&&X.push(n(ne[2])),X),[]);return X=>{const ne=n(N(X));return B.some(le=>r(le)?ne===le:ne==le)}})(c);const v=[];let S=!1,T=!1;return Ee(c,function(){if(Array.isArray(this)||Be(this)){if(v.length>1&&S!==T)throw new Mn.Error("E4019");v.push(LC(this,e)),S=T,T=!0}else T=function r7(e){return/^(and|&&|&)$/i.test(e)}(this)}),function(F){let N=S;for(let B=0;B<v.length;B++)if(v[B](F)!==S){N=!S;break}return N}}(c):function(e){return"!"===e[0]&&Array.isArray(e[1])}(c)?function(S){const T=S[0],F=LC(S[1],e);if("!"===T)return function(N){return!F(N)};throw Mn.Error("E4003",T)}(c):function(S){S=function(e){return[e[0],e.length<3?"=":String(e[1]).toLowerCase(),e.length<2||e[e.length-1]]}(S);const T=sn(S[0]),F=S[1];let N=S[2];N=n(N);const B=(X,ne)=>(X=n(T(X)),(null!=N&&null!=X||N===X)&&ne(X,N));switch(F.toLowerCase()){case"=":return o(T,N);case"<>":return o(T,N,!0);case">":return X=>B(X,(ne,le)=>ne>le);case"<":return X=>B(X,(ne,le)=>ne<le);case">=":return X=>B(X,(ne,le)=>ne>=le);case"<=":return X=>B(X,(ne,le)=>ne<=le);case"startswith":return function(X){return 0===n(i(T(X))).indexOf(N)};case"endswith":return function(X){const ne=n(i(T(X))),le=i(N);if(ne.length<le.length)return!1;const he=ne.lastIndexOf(N);return-1!==he&&he===ne.length-N.length};case"contains":return function(X){return n(i(T(X))).indexOf(N)>-1};case"notcontains":return function(X){return-1===n(i(T(X))).indexOf(N)}}throw Mn.Error("E4003",F)}(c)}}(),x7=rf.inherit({ctor:function(e,n){this.callBase(e),this.langParams=e.langParams,this.criteria=LC(n,this.langParams)},next:function(){for(;this.iter.next();)if(this.criteria(this.current()))return!0;return!1}}),O7=Fu.inherit({ctor:function(e,n){this.iter=e,this.getter=n},next:function(){return this._ensureGrouped(),this.groupedIter.next()},current:function(){return this._ensureGrouped(),this.groupedIter.current()},reset:function(){delete this.groupedIter},countable:function(){return!!this.groupedIter},count:function(){return this.groupedIter.count()},_ensureGrouped:function(){if(this.groupedIter)return;const e={},n=[],t=this.iter,i=sn(this.getter);for(t.reset();t.next();){const o=t.current(),r=i(o);r in e?e[r].push(o):(e[r]=[o],n.push(r))}this.groupedIter=new RC(ni(n,function(o){return{key:o,items:e[o]}}))}}),b7=rf.inherit({ctor:function(e,n){this.callBase(e),this.getter=sn(n)},current:function(){return this.getter(this.callBase())},countable:function(){return this.iter.countable()},count:function(){return this.iter.count()}}),S7=rf.inherit({ctor:function(e,n,t){this.callBase(e),this.skip=Math.max(0,n),this.take=Math.max(0,t),this.pos=0},next:function(){if(this.pos>=this.skip+this.take)return!1;for(;this.pos<this.skip&&this.iter.next();)this.pos++;return this.pos++,this.iter.next()},reset:function(){this.callBase(),this.pos=0},countable:function(){return this.iter.countable()},count:function(){return Math.min(this.iter.count()-this.skip,this.take)}}),DA=function(e,n){n=n||{},e instanceof Fu||(e=new RC(e)),n.langParams&&(e.langParams=n.langParams);const t=function(S){const T=n.errorHandler;T&&T(S),TC(S)},i=function(S){const T=(new Ae).fail(t);let F;const N=S.step,B=S.finalize;try{e.reset(),F="seed"in S?S.seed:e.next()?e.current():NaN;let X=F;for(;e.next();)X=N(X,e.current());T.resolve(B?B(X):X)}catch(X){T.reject(X)}return T.promise()},o=function(S){return i(i7[S])},r=function(S){return!Be(S)&&!Array.isArray(S)&&(S=[].slice.call(arguments)),v(new b7(e,S))},c=function(S){return r(sn(S))};function v(S){return DA(S,n)}return{toArray:function(){return e.toArray()},enumerate:function(){const S=(new Ae).fail(t);try{S.resolve(e.toArray())}catch(T){S.reject(T)}return S.promise()},setLangParams(S){e.langParams=S},sortBy:function(S,T,F){return v(new FC(e,S,T,F))},thenBy:function(S,T,F){if(e instanceof FC)return v(e.thenBy(S,T,F));throw Mn.Error("E4004")},filter:function(S){return Array.isArray(S)||(S=[].slice.call(arguments)),v(new x7(e,S))},slice:function(S,T){return void 0===T&&(T=Number.MAX_VALUE),v(new S7(e,S,T))},select:r,groupBy:function(S){return v(new O7(e,S))},aggregate:function(S,T,F){return i(arguments.length<2?{step:arguments[0]}:{seed:S,step:T,finalize:F})},count:function(){if(e.countable()){const S=(new Ae).fail(t);try{S.resolve(e.count())}catch(T){S.reject(T)}return S.promise()}return o("count")},sum:function(S){return S?c(S).sum():o("sum")},min:function(S){return S?c(S).min():o("min")},max:function(S){return S?c(S).max():o("max")},avg:function(S){return S?c(S).avg():o("avg")}}},sf=DA;function NC(e,n){return e=e.groupBy(n[0].selector),n.length>1&&(e=e.select(function(t){return pe({},t,{items:NC(sf(t.items),n.slice(1)).toArray()})})),e}function IA(e,n){const t=[];return Ee(e,function(i,o){vr(n,function(c){return o.selector===c.selector}).length<1&&t.push(o)}),t.concat(n)}const Lu_queryByOptions=function D7(e,n,t){var i;const o=(n=n||{}).filter;var r,c;if(null!==(i=n)&&void 0!==i&&i.langParams&&(null===(r=(c=e).setLangParams)||void 0===r||r.call(c,n.langParams)),o&&(e=e.filter(o)),t)return e;let v=n.sort;const S=n.select;let T=n.group;const F=n.skip,N=n.take;return T&&(T=PC(T),T.keepInitialKeyOrder=!!n.group.keepInitialKeyOrder),(v||T)&&(v=PC(v||[]),T&&!T.keepInitialKeyOrder&&(v=IA(T,v)),Ee(v,function(B){e=e[B?"thenBy":"sortBy"](this.selector,this.desc,this.compare)})),S&&(e=e.select(S)),T&&(e=NC(e,T)),(N||F)&&(e=e.slice(F||0,N)),e},Nu=Tt.abstract,EA=Lu_queryByOptions,HC={},Tl=Tt.inherit({_langParams:{},ctor:function(e){const n=this;e=e||{},this._eventsStrategy=new Fs(this),Ee(["onLoaded","onLoading","onInserted","onInserting","onUpdated","onUpdating","onPush","onRemoved","onRemoving","onModified","onModifying"],function(t,i){i in e&&n.on(i.slice(2).toLowerCase(),e[i])}),this._key=e.key,this._errorHandler=e.errorHandler,this._useDefaultSearch=!0},_clearCache:De,_customLoadOptions:function(){return null},key:function(){return this._key},keyOf:function(e){return this._keyGetter||(this._keyGetter=sn(this.key())),this._keyGetter(e)},_requireKey:function(){if(!this.key())throw Mn.Error("E4005")},load:function(e){const n=this;return this._eventsStrategy.fireEvent("loading",[e=e||{}]),this._withLock(this._loadImpl(e)).done(function(t){n._eventsStrategy.fireEvent("loaded",[t,e])})},_loadImpl:function(e){return dp(this._langParams)||((e=e||{})._langParams=He({},this._langParams,e._langParams)),EA(this.createQuery(e),e).enumerate()},_withLock:function(e){const n=new Ae;return e.done(function(){const t=this,i=arguments;o7.promise().done(function(){n.resolveWith(t,i)})}).fail(function(){n.rejectWith(this,arguments)}),n},createQuery:Nu,totalCount:function(e){return this._totalCountImpl(e)},_totalCountImpl:function(e){return EA(this.createQuery(e),e,!0).count()},byKey:function(e,n){return this._addFailHandlers(this._withLock(this._byKeyImpl(e,n)))},_byKeyImpl:Nu,insert:function(e){const n=this;return n._eventsStrategy.fireEvent("modifying"),n._eventsStrategy.fireEvent("inserting",[e]),n._addFailHandlers(n._insertImpl(e).done(function(t,i){n._eventsStrategy.fireEvent("inserted",[t,i]),n._eventsStrategy.fireEvent("modified")}))},_insertImpl:Nu,update:function(e,n){const t=this;return t._eventsStrategy.fireEvent("modifying"),t._eventsStrategy.fireEvent("updating",[e,n]),t._addFailHandlers(t._updateImpl(e,n).done(function(){t._eventsStrategy.fireEvent("updated",[e,n]),t._eventsStrategy.fireEvent("modified")}))},_updateImpl:Nu,push:function(e){const n={changes:e,waitFor:[]};this._eventsStrategy.fireEvent("beforePushAggregation",[n]),Ft(...n.waitFor).done(()=>{this._pushImpl(e),this._eventsStrategy.fireEvent("beforePush",[{changes:e}]),this._eventsStrategy.fireEvent("push",[e])})},_pushImpl:De,remove:function(e){const n=this;return n._eventsStrategy.fireEvent("modifying"),n._eventsStrategy.fireEvent("removing",[e]),n._addFailHandlers(n._removeImpl(e).done(function(t){n._eventsStrategy.fireEvent("removed",[t]),n._eventsStrategy.fireEvent("modified")}))},_removeImpl:Nu,_addFailHandlers:function(e){return e.fail(this._errorHandler).fail(TC)},on(e,n){return this._eventsStrategy.on(e,n),this},off(e,n){return this._eventsStrategy.off(e,n),this}});Tl.create=function(e,n){if(!(e in HC))throw Mn.Error("E4020",e);return new HC[e](n)},Tl.registerClass=function(e,n){return n&&(HC[n]=e),e},Tl.inherit=function(e){return function(n,t){const i=e.apply(this,[n]);return Tl.registerClass(i,t),i}}(Tl.inherit);const af=Tl,wA="totalCount",BC="load";function Ml(e){return e&&Be(e.then)}function Gs(e){return(new Ae).resolve(e).promise()}function Hu(e,n){if(!Be(n))throw Mn.Error("E4011",e)}function RA(e){throw Mn.Error("E4012",e)}function Ks(e){return function(n){let t;t=n instanceof Error?n:new Error(function(i){const o=i[0];return o&&o.getResponseHeader?n7(o,i[1]):null}(arguments)||n&&String(n)||"Unknown error"),t.message!==vA&&e.reject(t)}}function kA(e,n){const t=e._loadFunc;let i;return Hu(BC,t),i=t.apply(e,[n]),Array.isArray(i)?i=Gs(i):null==i?i=Gs([]):Ml(i)||RA(BC),ii(i)}function FA(e,n,t,i){if(n.__rawData)i(n.__rawData);else{const o=n.__rawDataPromise||kA(n,t);n._cacheRawData&&(n.__rawDataPromise=o),o.always(function(){delete n.__rawDataPromise}).done(function(r){n._cacheRawData&&(n.__rawData=r),i(r)}).fail(r=>{var c;const v=Ks(e);null===(c=n._errorHandler)||void 0===c||c.call(n,r),v(r)})}}function LA(e,n,t,i){const o={};"userData"in(t=t||{})&&(o.userData=t.userData),FA(e,n,o,function(r){const c=sf(r,{errorHandler:n._errorHandler});let v,S;const T=[];let F,N;i||(v=Lu_queryByOptions(c,t),v===c?F=r.slice(0):T.push(v.enumerate().done(function(B){F=B}))),(t.requireTotalCount||i)&&(S=Lu_queryByOptions(c,t,!0),S===c?N=r.length:T.push(S.count().done(function(B){N=B}))),Ft.apply(V,T).done(function(){i?e.resolve(N):t.requireTotalCount?e.resolve(F,{totalCount:N}):e.resolve(F)}).fail(function(B){e.reject(B)})})}const VC=af.inherit({ctor:function(e){this.callBase(e=e||{}),this._useDefaultSearch=!!e.useDefaultSearch||"raw"===e.loadMode,this._loadMode=e.loadMode,this._cacheRawData=!1!==e.cacheRawData,this._loadFunc=e[BC],this._totalCountFunc=e[wA],this._byKeyFunc=e.byKey,this._insertFunc=e.insert,this._updateFunc=e.update,this._removeFunc=e.remove},_clearCache(){delete this.__rawData},createQuery:function(){throw Mn.Error("E4010")},clearRawDataCache:function(){this._clearCache()},_totalCountImpl:function(e){let n=new Ae;return"raw"!==this._loadMode||this._totalCountFunc?(function I7(e,n){const t=e._totalCountFunc;let i;if(!Be(t))throw Mn.Error("E4021");return i=t.apply(e,[n]),Ml(i)||(i=Number(i),isFinite(i)||RA(wA),i=Gs(i)),ii(i)}(this,e).done(function(t){n.resolve(Number(t))}).fail(Ks(n)),n=this._addFailHandlers(n)):LA(n,this,e,!0),n.promise()},_pushImpl:function(e){this.__rawData&&tf({keyInfo:this,data:this.__rawData,changes:e})},_loadImpl:function(e){let n=new Ae;return"raw"===this._loadMode?LA(n,this,e,!1):(kA(this,e).done(function(t,i){n.resolve(t,i)}).fail(Ks(n)),n=this._addFailHandlers(n)),n.promise()},_byKeyImpl:function(e,n){const t=new Ae;return this._byKeyViaLoad()?(this._requireKey(),function w7(e,n,t){FA(e,n,{},function(i){const o=n.key();let r;for(let c=0,v=i.length;c<v;c++)if(r=i[c],ef(o,n.keyOf(i[c]),t))return void e.resolve(r);e.reject(Mn.Error("E4009"))})}(t,this,e)):function E7(e,n,t){const i=e._byKeyFunc;let o;return Hu("byKey",i),o=i.apply(e,[n,t]),Ml(o)||(o=Gs(o)),ii(o)}(this,e,n).done(function(i){t.resolve(i)}).fail(Ks(t)),t.promise()},_byKeyViaLoad:function(){return"raw"===this._loadMode&&!this._byKeyFunc},_insertImpl:function(e){const n=this,t=n._insertFunc;let i;const o=new Ae;return Hu("insert",t),i=t.apply(n,[e]),Ml(i)||(i=Gs(i)),ii(i).done(function(r){Ht().useLegacyStoreResult?o.resolve(e,r):o.resolve(r||e,n.keyOf(r))}).fail(Ks(o)),o.promise()},_updateImpl:function(e,n){const t=this._updateFunc;let i;const o=new Ae;return Hu("update",t),i=t.apply(this,[e,n]),Ml(i)||(i=Gs(i)),ii(i).done(function(r){Ht().useLegacyStoreResult?o.resolve(e,n):o.resolve(r||n,e)}).fail(Ks(o)),o.promise()},_removeImpl:function(e){const n=this._removeFunc;let t;const i=new Ae;return Hu("remove",n),t=n.apply(this,[e]),Ml(t)||(t=Gs()),ii(t).done(function(){i.resolve(e)}).fail(Ks(i)),i.promise()}});function NA(e){let n=[],t=!1;function i(){for(;n.length;){t=!0;const r=n.shift()();if(void 0!==r){if(r.then)return void Ft(r).always(i);throw vt.Error("E0015")}}t=!1}return{add:function(o,r){e?(n[0]&&r&&r(n[0]),n=[o]):n.push(o),t||i()},busy:function(){return t}}}function ai(e,n){if(null==e)return{};var o,r,t={},i=Object.keys(e);for(r=0;r<i.length;r++)!(n.indexOf(o=i[r])>=0)&&(t[o]=e[o]);return t}NA();const P7=ot(),HA=Zi({getXhr:function(){return new P7.XMLHttpRequest}}),BA=ot(),VA=function(e){const n=Pe.createElement("script");for(const t in e)n[t]=e[t];return n},zA=function(e){return Pe.getHead().appendChild(e)},jA=function(e){e.parentNode.removeChild(e)},UA=function(e){const n=VA({text:e});zA(n),jA(n)};function zC(e){return(e.method||"GET").toUpperCase()}const k7=function(e){const n=e.headers||{};return n["Content-Type"]=n["Content-Type"]||function(e){let n;return e.data&&!e.upload&&"GET"!==zC(e)&&(n="application/x-www-form-urlencoded;charset=utf-8"),e.contentType||n}(e),n.Accept=n.Accept||function(e){const n=e.dataType||"*",t="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",i={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",jsonp:t,script:t};return function(e,n,t){e=e||{};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}(i,e.accepts),i[n]?i[n]+("*"!==n?", */*; q=0.01":""):i["*"]}(e),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest"),n},H7=ot(),Bu="success",jC="error",lf=Zi({sendRequest:function(e){const n=HA.getXhr(),t=new Ae,i=t.promise(),o=!Ie(e.async)||e.async,r=e.dataType,c=e.timeout||0;let v;e.crossDomain=function(e){if(!Ke())return!0;let n=!1;const t=Pe.createElement("a"),i=Pe.createElement("a");t.href=BA.location.href;try{i.href=e,i.href=i.href,n=t.protocol+"//"+t.host!=i.protocol+"//"+i.host}catch{n=!0}return n}(e.url);const S="jsonp"===r||"script"===r;void 0===e.cache&&(e.cache=!S);const T=function(e){if("jsonp"===e.dataType){const n=Math.random().toString().replace(/\D/g,""),t=e.jsonpCallback||"dxCallback"+Date.now()+"_"+n,i=e.jsonp||"callback";return e.data=e.data||{},e.data[i]=t,t}}(e),F=k7(e),N=function(e,n){let t=e.data;const i="string"==typeof t;let o=e.url||BA.location.href;return!i&&!e.cache&&(t=t||{},t._=Date.now()),t&&!e.upload&&(i||(t=function(e){const n=[];for(const t in e){let i=e[t];void 0!==i&&(null===i&&(i=""),"function"==typeof i&&(i=i()),n.push(encodeURIComponent(t)+"="+encodeURIComponent(i)))}return n.join("&")}(t)),"GET"===zC(e)?(""!==t&&(o+=(o.indexOf("?")>-1?"&":"?")+t),t=null):n["Content-Type"]&&n["Content-Type"].indexOf("application/x-www-form-urlencoded")>-1&&(t=t.replace(/%20/g,"+"))),{url:o,parameters:t}}(e,F),B=N.url,X=N.parameters;if(T&&(H7[T]=function(ne){t.resolve(ne,Bu,n)}),e.crossDomain&&S){const ne=function(){t.reject(n,jC)},le=function(){"jsonp"!==r&&t.resolve(null,Bu,n)};return function(e){const n=VA({src:e});return new Promise(function(t,i){const o={load:t,error:i},r=function(c){o[c.type](),jA(n)};for(const c in o)Pe.listen(n,c,r);zA(n)})}(B).then(le,ne),i}if(e.crossDomain&&!("withCredentials"in n))return t.reject(n,jC),i;if(n.open(zC(e),B,o,e.username,e.password),o&&(n.timeout=c,v=function(e,n){return e&&setTimeout(function(){n.customStatus="timeout",n.abort()},e)}(c,n)),n.onreadystatechange=function(ne){4===n.readyState&&(clearTimeout(v),function(e){return 200<=e&&e<300}(n.status)?function(e){return 204!==e}(n.status)?function(e,n,t){const i=function(e){return e.responseType&&"text"!==e.responseType||"string"!=typeof e.responseText?e.response:e.responseText}(n);switch(t){case"jsonp":UA(i);break;case"script":UA(i),e.resolve(i,Bu,n);break;case"json":try{e.resolve(JSON.parse(i),Bu,n)}catch(o){e.reject(n,"parsererror",o)}break;default:e.resolve(i,Bu,n)}}(t,n,r):t.resolve(null,"nocontent",n):t.reject(n,n.customStatus||jC))},e.upload&&(n.upload.onprogress=e.upload.onprogress,n.upload.onloadstart=e.upload.onloadstart,n.upload.onabort=e.upload.onabort),e.xhrFields)for(const ne in e.xhrFields)n[ne]=e.xhrFields[ne];"arraybuffer"===e.responseType&&(n.responseType=e.responseType);for(const ne in F)Object.prototype.hasOwnProperty.call(F,ne)&&Ie(F[ne])&&n.setRequestHeader(ne,F[ne]);return e.beforeSend&&e.beforeSend(n),n.send(X),i.abort=function(){n.abort()},i}}),K7={},$A=function(e,n,t){t=t||[],n=n||{};const i=function(c,v){return{name:c,args:v}},o=function(c){const v=new Ae;let S,T,F,N,B;const X=function(le){const he=n.errorHandler;he&&he(le),TC(le),v.reject(le)};function ne(le){switch(le.name){case"sortBy":return B=[le.args],!0;case"thenBy":if(!B)throw Mn.Error("E4004");return B.push(le.args),!0}return!1}try{S=n.adapter,Be(S)||(S=K7[S]),T=S(n),F=[].concat(t).concat(c);const le=T.optimize;for(le&&le(F);F.length;){if(N=F[0],!ne(N)){if(B){F.unshift(i("multiSort",[B])),B=null;continue}if("enumerate"!==String(N.name)&&(!T[N.name]||!1===T[N.name].apply(T,N.args)))break}F.shift()}(function(){const he=F[0],Oe=[];he&&"multiSort"===he.name&&(F.shift(),Ee(he.args[0],function(){Oe.push(i(Oe.length?"thenBy":"sortBy",this))})),F=Oe.concat(F)})(),T.exec(e).done(function(he,Oe){if(F.length){let _e=sf(he,{errorHandler:n.errorHandler});Ee(F,function(){_e=_e[this.name].apply(_e,this.args)}),_e.done(v.resolve).fail(v.reject)}else v.resolve(he,Oe)}).fail(X)}catch(le){X(le)}return v.promise()},r={};return Ee(["sortBy","thenBy","filter","slice","select","groupBy"],function(){const c=String(this);r[c]=function(){return $A(e,n,t.concat(i(c,arguments)))}}),Ee(["count","min","max","sum","avg","aggregate","enumerate"],function(){const c=String(this);r[c]=function(){return o.call(this,i(c,arguments))}}),r},q7={array:sf,remote:$A},Ko=function(){const e=Array.isArray(arguments[0])?"array":"remote";return q7[e].apply(this,arguments)},Vu=af.inherit({ctor:function(e){e=Array.isArray(e)?{data:e}:e||{},this.callBase(e);const n=e.data;if(n&&!Array.isArray(n))throw Mn.Error("E4006");this._array=n||[]},createQuery:function(){return Ko(this._array,{errorHandler:this._errorHandler})},_byKeyImpl:function(e){const n=Ws(this,this._array,e);return-1===n?yA(Mn.Error("E4009")):Pl(this._array[n])},_insertImpl:function(e){return AC(this,this._array,e)},_pushImpl:function(e){tf({keyInfo:this,data:this._array,changes:e})},_updateImpl:function(e,n){return MC(this,this._array,e,n)},_removeImpl:function(e){return SA(this,this._array,e)},clear:function(){this._eventsStrategy.fireEvent("modifying"),this._array=[],this._eventsStrategy.fireEvent("modified")}},"array"),Z7=["items"],WA="canceled",GA=e=>"pending"===e.state(),KA=e=>{switch(e.length){case 0:return;case 1:return e[0]}return[].slice.call(e)},qA=(e,n,t)=>Array.isArray(e)?n?((e,n,t)=>ni(e,i=>He({},ai(i,Z7),{items:qA(i.items,n-1,t)})))(e,n,t):ni(e,t):e,ZA=(e,n)=>{var t;return null!==(t=e)&&void 0!==t&&t.data&&(n=e,e=e.data),Array.isArray(e)||(e=[e]),{data:e,extra:n}},Q7=e=>{const n={};return Ee(["useDefaultSearch","key","load","loadMode","cacheRawData","byKey","lookup","totalCount","insert","update","remove"],function(){n[this]=e[this],delete e[this]}),new VC(n)},eq=(e,n)=>new VC({load:()=>lf.sendRequest({url:e,dataType:"json"}),loadMode:n?.fromUrlLoadMode}),XA=(e,n)=>{let t;return"string"==typeof e&&(e={paginate:!1,store:eq(e,n)}),void 0===e&&(e=[]),void 0===(e=Array.isArray(e)||e instanceof af?{store:e}:pe({},e)).store&&(e.store=[]),t=e.store,"load"in e?t=Q7(e):Array.isArray(t)?t=new Vu(t):lt(t)&&(t=(e=>{const n=e.type;return delete e.type,af.create(n,e)})(pe({},t))),e.store=t,e};class tq{constructor(){this._counter=-1,this._deferreds={}}add(n){return this._counter++,this._deferreds[this._counter]=n,this._counter}remove(n){return delete this._deferreds[n]}cancel(n){return n in this._deferreds&&(this._deferreds[n].reject(WA),!0)}cancelAll(){for(;this._counter>-1;)this.cancel(this._counter),this._counter--}}const zu=Tt.inherit({ctor(e){if(e=XA(e),this._eventsStrategy=new Fs(this,{syncStrategy:!0}),this._store=e.store,this._changedTime=0,0!==e.pushAggregationTimeout){let i,o;const r=function p7(e,n){let t=[];const i=function h7(e,n){let t;return function(){return t||(t=setTimeout(()=>{t=void 0,e.call(this)},Be(n)?n():n)),t}}(function(){e.call(this,t),t=[]},n);return function(o){return Array.isArray(o)&&t.push(...o),i.call(this,t)}}(c=>{i.resolve(),Ft(...o).done(()=>this._onPush(c)),o=void 0,i=void 0},void 0===e.pushAggregationTimeout?()=>5*this._changedTime:e.pushAggregationTimeout);this._onPushHandler=c=>{this._aggregationTimeoutId=r(c.changes),i||(i=new Ae),o=c.waitFor,c.waitFor.push(i.promise())},this._store.on("beforePushAggregation",this._onPushHandler)}else this._onPushHandler=t=>this._onPush(t),this._store.on("push",this._onPushHandler);this._storeLoadOptions=this._extractLoadOptions(e),this._mapFunc=e.map,this._postProcessFunc=e.postProcess,this._pageIndex=void 0!==e.pageIndex?e.pageIndex:0,this._pageSize=void 0!==e.pageSize?e.pageSize:20,this._loadingCount=0,this._loadQueue=this._createLoadQueue(),this._searchValue="searchValue"in e?e.searchValue:null,this._searchOperation=e.searchOperation||"contains",this._searchExpr=e.searchExpr,this._paginate=e.paginate,this._reshapeOnPush=e.reshapeOnPush??!1,Ee(["onChanged","onLoadError","onLoadingChanged","onCustomizeLoadResult","onCustomizeStoreLoadOptions"],(t,i)=>{i in e&&this.on(i.substr(2,1).toLowerCase()+i.substr(3),e[i])}),this._operationManager=new tq,this._init()},_init(){this._items=[],this._userData={},this._totalCount=-1,this._isLoaded=!1,Ie(this._paginate)||(this._paginate=!this.group()),this._isLastPage=!this._paginate},dispose(){var e;this._store.off("beforePushAggregation",this._onPushHandler),this._store.off("push",this._onPushHandler),this._eventsStrategy.dispose(),clearTimeout(this._aggregationTimeoutId),null===(e=this._delayedLoadTask)||void 0===e||e.abort(),this._operationManager.cancelAll(),delete this._store,delete this._items,delete this._delayedLoadTask,this._disposed=!0},_extractLoadOptions(e){const n={};let t=["sort","filter","langParams","select","group","requireTotalCount"];const i=this._store._customLoadOptions();return i&&(t=t.concat(i)),Ee(t,function(){n[this]=e[this]}),n},loadOptions(){return this._storeLoadOptions},items(){return this._items},pageIndex(e){if(!rn(e))return this._pageIndex;this._pageIndex=e,this._isLastPage=!this._paginate},paginate(e){if(!Nv(e))return this._paginate;this._paginate!==e&&(this._paginate=e,this.pageIndex(0))},pageSize(e){if(!rn(e))return this._pageSize;this._pageSize=e},isLastPage(){return this._isLastPage},generateStoreLoadOptionAccessor(e){return n=>{const t=KA(n);if(void 0===t)return this._storeLoadOptions[e];this._storeLoadOptions[e]=t}},sort(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this.generateStoreLoadOptionAccessor("sort")(n)},filter(){const e=KA(arguments);if(void 0===e)return this._storeLoadOptions.filter;this._storeLoadOptions.filter=e,this.pageIndex(0)},group(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this.generateStoreLoadOptionAccessor("group")(n)},select(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return this.generateStoreLoadOptionAccessor("select")(n)},requireTotalCount(e){if(!Nv(e))return this._storeLoadOptions.requireTotalCount;this._storeLoadOptions.requireTotalCount=e},searchValue(e){if(arguments.length<1)return this._searchValue;this._searchValue=e,this.pageIndex(0)},searchOperation(e){if(!_t(e))return this._searchOperation;this._searchOperation=e,this.pageIndex(0)},searchExpr(e){const n=arguments.length;if(0===n)return this._searchExpr;n>1&&(e=[].slice.call(arguments)),this._searchExpr=e,this.pageIndex(0)},store(){return this._store},key(){var e;return null===(e=this._store)||void 0===e?void 0:e.key()},totalCount(){return this._totalCount},isLoaded(){return this._isLoaded},isLoading(){return this._loadingCount>0},beginLoading(){this._changeLoadingCount(1)},endLoading(){this._changeLoadingCount(-1)},_createLoadQueue:()=>NA(),_changeLoadingCount(e){const n=this.isLoading();this._loadingCount+=e;const t=this.isLoading();n^t&&this._eventsStrategy.fireEvent("loadingChanged",[t])},_scheduleLoadCallbacks(e){this.beginLoading(),e.always(()=>{this.endLoading()})},_scheduleFailCallbacks(e){var n=this;e.fail(function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];i[0]!==WA&&n._eventsStrategy.fireEvent("loadError",i)})},_fireChanged(e){const n=new Date;this._eventsStrategy.fireEvent("changed",e),this._changedTime=new Date-n},_scheduleChangedCallbacks(e){e.done(()=>this._fireChanged())},loadSingle(e,n){const t=new Ae,i=this.key(),o=this._store,r=this._createStoreLoadOptions();return this._scheduleFailCallbacks(t),arguments.length<2&&(n=e,e=i),delete r.skip,delete r.group,delete r.refresh,delete r.pageIndex,delete r.searchString,(e===i||o instanceof VC&&!o._byKeyViaLoad()?o.byKey(n,r):(r.take=1,r.filter=r.filter?[r.filter,[e,n]]:[e,n],o.load(r))).fail(t.reject).done(c=>{const v=Array.isArray(c)&&!c.length;!Ie(c)||v?t.reject(new Mn.Error("E4009")):(Array.isArray(c)||(c=[c]),t.resolve(this._applyMapFunction(c)[0]))}),t.promise()},load(){const e=new Ae,n=()=>{if(!this._disposed&&GA(e))return this._loadFromStore(t,e)};this._scheduleLoadCallbacks(e),this._scheduleFailCallbacks(e),this._scheduleChangedCallbacks(e);const t=this._createLoadOperation(e);return this._eventsStrategy.fireEvent("customizeStoreLoadOptions",[t]),this._loadQueue.add(()=>("number"==typeof t.delay?this._delayedLoadTask=PP(n,t.delay):n(),e.promise())),e.promise({operationId:t.operationId})},_onPush(e){if(this._reshapeOnPush)this.load();else{const n={changes:e};this._eventsStrategy.fireEvent("changing",[n]);const t=this.group(),i=this.items();let o=0,r=this.paginate()||t?e.filter(c=>"update"===c.type):e;t&&(o=Array.isArray(t)?t.length:1),this._mapFunc&&r.forEach(c=>{"insert"===c.type&&(c.data=this._mapFunc(c.data))}),n.postProcessChanges&&(r=n.postProcessChanges(r)),tf({keyInfo:this.store(),data:i,changes:r,groupCount:o,useInsertIndex:!0}),this._fireChanged([{changes:e}])}},_createLoadOperation(e){const n=this._operationManager.add(e),t=this._createStoreLoadOptions();return this._store&&!dp(t?.langParams)&&(this._store._langParams=He({},this._store._langParams,t.langParams)),e.always(()=>this._operationManager.remove(n)),{operationId:n,storeLoadOptions:t}},reload(){return this.store()._clearCache(),this._init(),this.load()},cancel(e){return this._operationManager.cancel(e)},cancelAll(){return this._operationManager.cancelAll()},_addSearchOptions(e){this._disposed||(this.store()._useDefaultSearch?this._addSearchFilter(e):(e.searchOperation=this._searchOperation,e.searchValue=this._searchValue,e.searchExpr=this._searchExpr))},_createStoreLoadOptions(){const e=pe({},this._storeLoadOptions);return this._addSearchOptions(e),this._paginate&&this._pageSize&&(e.skip=this._pageIndex*this._pageSize,e.take=this._pageSize),e.userData=this._userData,e},_addSearchFilter(e){const n=this._searchValue,t=this._searchOperation;let i=this._searchExpr;const o=[];n&&(i||(i="this"),Array.isArray(i)||(i=[i]),Ee(i,function(r,c){o.length&&o.push("or"),o.push([c,t,n])}),e.filter=e.filter?[o,e.filter]:o)},_loadFromStore(e,n){const t=(i,o)=>{if(this._disposed||!GA(n))return;const r=pe(ZA(i,o),e);this._eventsStrategy.fireEvent("customizeLoadResult",[r]),Ft(r.data).done(c=>{r.data=c,this._processStoreLoadResult(r,n)}).fail(n.reject)};return e.data?(new Ae).resolve(e.data).done(t):this.store().load(e.storeLoadOptions).done(t).fail(n.reject)},_processStoreLoadResult(e,n){let t=e.data,i=e.extra;const o=e.storeLoadOptions,r=()=>(this._isLoaded=!0,this._totalCount=isFinite(i.totalCount)?i.totalCount:-1,n.resolve(t,i));this._disposed||(t=this._applyPostProcessFunction(this._applyMapFunction(t)),dt(i)||(i={}),this._items=t,(!t.length||!this._paginate||this._pageSize&&t.length<this._pageSize)&&(this._isLastPage=!0),o.requireTotalCount&&!isFinite(i.totalCount)?(()=>{this.store().totalCount(o).done(function(v){i.totalCount=v,r()}).fail(n.reject)})():r())},_applyMapFunction(e){return this._mapFunc?((e,n,t)=>{const i=t?PC(t).length:0;return qA(e,i,n)})(e,this._mapFunc,this.group()):e},_applyPostProcessFunction(e){return this._postProcessFunc?this._postProcessFunc(e):e},on(e,n){return this._eventsStrategy.on(e,n),this},off(e,n){return this._eventsStrategy.off(e,n),this}});class YA{constructor(n){this.options=n,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(n,t){this.options[n]=t}onSelectionChanged(){const{addedItemKeys:n}=this.options,{removedItemKeys:t}=this.options,{addedItems:i}=this.options,{removedItems:o}=this.options,{selectedItems:r}=this.options,{selectedItemKeys:c}=this.options,v=this.options.onSelectionChanged||De;this._clearItemKeys(),v({selectedItems:r,selectedItemKeys:c,addedItemKeys:n,removedItemKeys:t,addedItems:i,removedItems:o})}equalKeys(n,t){return this.options.equalByReference&&dt(n)&&dt(t)?n===t:ks(n,t)}getSelectableItems(n){return n.filter(t=>!(null!=t&&t.disabled))}_clearSelection(n,t,i,o){return n=n||[],n=Array.isArray(n)?n:[n],this.validate(),this.selectedItemKeys(n,t,i,o)}_removeTemplateProperty(n){return Array.isArray(n)?n.map(t=>this._removeTemplateProperty(t)):(dt(n)&&delete n.template,n)}_loadFilteredData(n,t,i,o){const r=encodeURI(JSON.stringify(this._removeTemplateProperty(n))).length,c=this.options.maxFilterLengthInRequest&&r>this.options.maxFilterLengthInRequest,v=Ae(),S={filter:c?void 0:n,select:c?this.options.dataFields():i||this.options.dataFields()};return n&&0===n.length?v.resolve([]):this.options.load(S).done(T=>{let F=lt(T)?T.data:T;t&&!o?F=F.filter(t):c&&(F=Ko(F).filter(n).toArray()),v.resolve(F)}).fail(v.reject.bind(v)),v}updateSelectedItemKeyHash(n){for(let t=0;t<n.length;t++){const i=su(n[t]);dt(i)||(this.options.keyHashIndices[i]=this.options.keyHashIndices[i]||[],this.options.keyHashIndices[i].push(t))}}_isAnyItemSelected(n){for(let t=0;t<n.length;t++)if(this.options.isItemSelected(n[t]))return;return!1}_getFullSelectAllState(){const n=this.options.plainItems(),t=this.options.filter();let i=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter(c=>!(null!=c&&c.disabled));t&&(i=Ko(i).filter(t).toArray());const o=i.length,r=n.length-this.getSelectableItems(n).length;return o?o>=this.options.totalCount()-r||void 0:this._isAnyItemSelected(n)}_getVisibleSelectAllState(){const n=this.getSelectableItems(this.options.plainItems());let t=!1,i=!1;for(let o=0;o<n.length;o++){const r=n[o],c=this.options.getItemData(r),v=this.options.keyOf(c);this.options.isSelectableItem(r)&&(this.isItemKeySelected(v)?t=!0:i=!0)}return!!t&&(!i||void 0)}}class nq extends YA{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const n=Ae(),t=this,i=this.options.key(),o=_t(i)?[i]:i;return this._loadFilteredData(this.options.selectionFilter,null,o).done(r=>{const c=r.map(v=>t.options.keyOf(v));n.resolve(c)}).fail(n.reject),n.promise()}selectedItemKeys(n,t,i,o){if(o){const r=this.options.filter();!r||JSON.stringify(r)===JSON.stringify(this.options.selectionFilter)&&i?this._setOption("selectionFilter",i?[]:null):this._addSelectionFilter(i,r,o)}else{t||this._setOption("selectionFilter",[]);for(let r=0;r<n.length;r++)i?this.removeSelectedItem(n[r]):this.addSelectedItem(n[r],o,!t)}return this.onSelectionChanged(),Ae().resolve()}setSelectedItems(n){this._setOption("selectionFilter",null);for(let t=0;t<n.length;t++)this.addSelectedItem(n[t])}isItemDataSelected(n){return this.isItemKeySelected(n)}isItemKeySelected(n){const{selectionFilter:t}=this.options;return!t||!!Ko([n]).filter(t).toArray().length}_getKeyExpr(){const n=this.options.key();return Array.isArray(n)&&1===n.length?n[0]:n}_normalizeKey(n){const t=this.options.key();return Array.isArray(t)&&1===t.length?n[t[0]]:n}_getFilterByKey(n){const t=this._getKeyExpr();let i=[t,"=",this._normalizeKey(n)];if(Array.isArray(t)){i=[];for(let o=0;o<t.length;o++)i.push([t[o],"=",n[t[o]]]),o!==t.length-1&&i.push("and")}return i}addSelectedItem(n,t,i){const o=this._getFilterByKey(n);this._addSelectionFilter(!1,o,t,i)}removeSelectedItem(n){const t=this._getFilterByKey(n);this._addSelectionFilter(!0,t)}validate(){const{key:n}=this.options;if(n&&void 0===n())throw Jt.Error("E1042","Deferred selection")}_findSubFilter(n,t){if(!n)return-1;const i=JSON.stringify(t);for(let o=0;o<n.length;o++){const r=n[o];if(r&&JSON.stringify(r)===i)return o}return-1}_isLastSubFilter(n,t){return!(!n||!t||this._findSubFilter(n,t)!==n.length-1&&0!==this._findSubFilter([n],t))}_addFilterOperator(n,t){return n.length>1&&_t(n[1])&&n[1]!==t&&(n=[n]),n.length&&n.push(t),n}_denormalizeFilter(n){return n&&_t(n[0])&&(n=[n]),n}_isOnlyNegativeFiltersLeft(n){return n.every((t,i)=>i%2==0?Array.isArray(t)&&"!"===t[0]:"and"===t)}_addSelectionFilter(n,t,i,o){var r;const c=this,v=n?["!",t]:t,S=n?"and":"or";let T=!0,F=c.options.selectionFilter||[];if(F=c._denormalizeFilter(F),null!==(r=F)&&void 0!==r&&r.length&&!o){const N=c._removeSameFilter(F,t,n,i),B=c._removeSameFilter(F,t,!n);n&&(-1!==N||-1!==B)&&this._isOnlyNegativeFiltersLeft(F)&&(F=[]);const ne=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(F,B);T=t.length&&!ne}T&&(F=c._addFilterOperator(F,S),F.push(v)),F=c._normalizeFilter(F),c._setOption("selectionFilter",n||F.length?F:null)}_normalizeFilter(n){return n&&1===n.length&&(n=n[0]),n}_removeFilterByIndex(n,t,i){const o=n[1];n.splice(t>0?t-1:t,2),i&&"and"===o&&n.splice(0,n.length)}_isSimpleKeyFilter(n,t){return 3===n.length&&n[0]===t&&"="===n[1]}_isKeyFilter(n){if(2===n.length&&"!"===n[0])return this._isKeyFilter(n[1]);const t=this._getKeyExpr();if(Array.isArray(t)){if(n.length!==2*t.length-1)return!1;for(let i=0;i<t.length;i++)if(i>0&&"and"!==n[2*i-1]||!this._isSimpleKeyFilter(n[2*i],t[i]))return!1;return!0}return this._isSimpleKeyFilter(n,t)}_hasKeyFiltersOnlyStartingFromIndex(n,t){if(t>=0){for(let i=t;i<n.length;i++)if("string"!=typeof n[i]&&!this._isKeyFilter(n[i]))return!1;return!0}return!1}_removeSameFilter(n,t,i,o){if(t=i?["!",t]:t,JSON.stringify(t)===JSON.stringify(n))return n.splice(0,n.length),0;const r=this._findSubFilter(n,t);if(r>=0)return this._removeFilterByIndex(n,r,o),r;for(let c=0;c<n.length;c++)if(Array.isArray(n[c])&&n[c].length>2){const v=this._removeSameFilter(n[c],t,!1,o);if(v>=0)return n[c].length?1===n[c].length&&(n[c]=n[c][0]):this._removeFilterByIndex(n,c,o),v}return-1}getSelectAllState(){const n=this.options.filter();let{selectionFilter:t}=this.options;if(!t)return!0;if(!t.length)return!1;if(n&&n.length){if(t=this._denormalizeFilter(t),this._isLastSubFilter(t,n))return!0;if(this._isLastSubFilter(t,["!",n]))return!1}}loadSelectedItemsWithFilter(){const n=this.options.filter(),{selectionFilter:t}=this.options;return this._loadFilteredData(n?[n,"and",t]:t)}}const cf=function(e,n){const t=n(e);if(dt(t))try{return JSON.stringify(t)}catch{return t}return t},iq=function(e,n,t,i){return n[t[cf(e,i)]]},QA=function(e,n){let t;this.getLocalFilter=function(v,S,T,F){return r.bind(this,S=void 0===S?ks:S,v,T,F)},this.getExpr=function(v){if(!v)return;let S;return e.forEach(function(T,F){let N;S=S||[],F>0&&S.push(n?"and":"or"),N=_t(v)?c(v,T):function(B,X){const ne=[];for(let le=0,he=B.length;le<he;le++){const Oe=B[le],_e=sn(Oe),Ne=c(Oe,X&&_e(X));if(!Ne)break;le>0&&ne.push(n?"or":"and"),ne.push(Ne)}return ne}(v,T),S.push(N)}),S&&1===S.length&&(S=S[0]),S},this.getCombinedFilter=function(v,S){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const F=this.getExpr(v);let N=F;return(T||n)&&S&&(F?(N=[],N.push(F),N.push(S)):N=S),N};const i=function(v,S){if(!t){t={};const T=o(e,v,S);for(let F=0;F<T.length;F++)t[su(T[F])]=!0}return t},o=function(v,S,T){return Array.isArray(T)?v.map(F=>S(F)):v};function r(v,S,T,F,N){const B=S(N);let X,ne;if(!T&&(X=su(B),!dt(X)))return i(S,F)[X]?!n:!!n;for(ne=0;ne<e.length;ne++)if(v(e[ne],B))return!n;return!!n}function c(v,S){if(void 0!==S)return[v,n?"<>":"=",S]}};class sq extends YA{constructor(n){super(n),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(n,t){const{keyOf:i}=this.options;let o,r,c;if(!i)return;const v=t&&n.length>1&&!this.options.equalByReference;for(v&&(o={}),c=0;c<n.length;c++){const S=n[c],T=i(S);t?(r=this.removeSelectedItem(T,o,S?.disabled),o&&r>=0&&(o[r]=!0)):this.addSelectedItem(T,S)}v&&this._batchRemoveSelectedItems(o)}_batchRemoveSelectedItems(n){const t=this.options.selectedItemKeys.slice(0),i=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let o=0;o<t.length;o++)n[o]||(this.options.selectedItemKeys.push(t[o]),this.options.selectedItems.push(i[o]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(n,t,i,o){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=Ae();const v=this.options.key();if(!n.length&&!i)return c.resolve([]),c;if(i&&t&&!o)return c.resolve(this.getSelectedItems()),c;const S=new QA(n,i),T=S.getCombinedFilter(v,o,r);let F=[];if(t){const{selectedItems:X}=this.options;F=T&&n.length!==X.length?Ko(X).filter(T).toArray():X.slice(0)}let N=F.length?F:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const B=S.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,v);return N=N.filter(B),F.length||!i&&N.length===n.length?c.resolve(N):c=this._loadFilteredData(T,B,null,i),c}_replaceSelectionUpdate(n){const t=[],{keyOf:i}=this.options;if(i){for(let o=0;o<n.length;o++){const c=i(n[o]);t.push(c)}this.setSelectedItems(t,n)}}_warnOnIncorrectKeys(n){const{allowNullValue:t}=this.options;for(let i=0;i<n.length;i++){const o=n[i];(!t||null!==o)&&!this.isItemKeySelected(o)&&Jt.log("W1002",o)}}_isMultiSelectEnabled(){const{mode:n}=this.options;return"all"===n||"multiple"===n}_requestInProgress(){var n;return"pending"===(null===(n=this._lastLoadDeferred)||void 0===n?void 0:n.state())}_concatRequestsItems(n,t,i,o){let r;const c=t?n:[];return r=o||MT(n,this.options.selectedItemKeys),{addedItems:i.added.concat(r),removedItems:i.removed.concat(c),keys:n}}_collectLastRequestData(n,t,i,o){const r=t&&i,c={added:[],removed:[]},v=this._isMultiSelectEnabled();let S=v?this._lastRequestData:{};return v&&(this._shouldMergeWithLastRequest&&(r?(this._lastLoadDeferred.reject(),S={}):function(e,n){if(e.length!==n.length)return!1;for(let t=0;t<n.length;t++)if(e[t]!==n[t])return!1;return!0}(n,this.options.selectedItemKeys)||(c.added=S.addedItems,c.removed=S.removedItems,t||this._lastLoadDeferred.reject())),S=this._concatRequestsItems(n,t,c,this._shouldMergeWithLastRequest?void 0:o)),S}_updateKeysByLastRequestData(n,t,i){let o=n;var r,c;return this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!t&&!i&&(o=MT(n.concat(null===(r=this._lastRequestData)||void 0===r?void 0:r.addedItems),null===(c=this._lastRequestData)||void 0===c?void 0:c.removedItems),o=function(e){return[...new Set(e)]}(o)),o}_loadSelectedItems(n,t,i,o){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const c=this,v=Ae(),S=c.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(n,t,i,o),Ft(c._lastLoadDeferred).always(()=>{const T=c._updateKeysByLastRequestData(n,t,i);c._shouldMergeWithLastRequest=!1,c._loadSelectedItemsCore(T,t,i,S,r).done(v.resolve).fail(v.reject)}),c._lastLoadDeferred=v,v}selectedItemKeys(n,t,i,o,r){const v=this,S=v._loadSelectedItems(n,i,o,r,arguments.length>5&&void 0!==arguments[5]&&arguments[5]);return S.done(T=>{t?v._preserveSelectionUpdate(T,i):v._replaceSelectionUpdate(T),v.onSelectionChanged()}),S}addSelectedItem(n,t){if(Ie(t)&&!this.options.ignoreDisabledItems&&t.disabled)return void(-1===this.options.disabledItemKeys.indexOf(n)&&this.options.disabledItemKeys.push(n));const i=this._getKeyHash(n);-1===this._indexOfSelectedItemKey(i)&&(!dt(i)&&this.options.keyHashIndices&&(this.options.keyHashIndices[i]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(n),this.options.addedItemKeys.push(n),this.options.addedItems.push(t),this.options.selectedItems.push(t))}_getSelectedIndexByKey(n,t){const{selectedItemKeys:i}=this.options;for(let o=0;o<i.length;o++)if((!t||!t[o])&&this.equalKeys(i[o],n))return o;return-1}_getSelectedIndexByHash(n,t){let i=this.options.keyHashIndices[n];return i&&i.length>1&&t&&(i=i.filter(o=>!t[o])),i&&i[0]>=0?i[0]:-1}_indexOfSelectedItemKey(n,t){let i;return i=this.options.equalByReference?this.options.selectedItemKeys.indexOf(n):dt(n)?this._getSelectedIndexByKey(n,t):this._getSelectedIndexByHash(n,t),i}_shiftSelectedKeyIndices(n){for(let t=n;t<this.options.selectedItemKeys.length;t++){const o=su(this.options.selectedItemKeys[t]),r=this.options.keyHashIndices[o];if(r)for(let c=0;c<r.length;c++)r[c]>n&&r[c]--}}removeSelectedItem(n,t,i){if(!this.options.ignoreDisabledItems&&i)return;const o=this._getKeyHash(n),r=!!t,c=this._indexOfSelectedItemKey(o,t);if(c<0||(this.options.removedItemKeys.push(n),this.options.removedItems.push(this.options.selectedItems[c]),r)||(this.options.selectedItemKeys.splice(c,1),this.options.selectedItems.splice(c,1),dt(o)||!this.options.keyHashIndices))return c;const v=this.options.keyHashIndices[o];return v&&(v.shift(),v.length||delete this.options.keyHashIndices[o],this._shiftSelectedKeyIndices(c)),c}_updateAddedItemKeys(n,t){for(let i=0;i<n.length;i++)this.isItemKeySelected(n[i])||(this.options.addedItemKeys.push(n[i]),this.options.addedItems.push(t[i]))}_updateRemovedItemKeys(n,t,i){for(let o=0;o<t.length;o++)this.isItemKeySelected(t[o])||(this.options.removedItemKeys.push(t[o]),this.options.removedItems.push(i[o]))}_isItemSelectionInProgress(n,t){return!!(t&&this._lastRequestData&&this._requestInProgress())&&(this._lastRequestData.addedItems??[]).includes(n)}_getKeyHash(n){return this.options.equalByReference?n:su(n)}setSelectedItems(n,t){this._updateAddedItemKeys(n,t);const i=this.options.selectedItemKeys,o=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(n)),this._setOption("selectedItemKeys",n),this._setOption("selectedItems",t),this._updateRemovedItemKeys(n,i,o)}isItemDataSelected(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.options.keyOf(n);return this.isItemKeySelected(i,t)}isItemKeySelected(n){let i=this._isItemSelectionInProgress(n,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).checkPending);if(!i){const o=this._getKeyHash(n);i=-1!==this._indexOfSelectedItemKey(o)}return i}getSelectAllState(n){return n?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const n=this.options.key(),t=this.getSelectedItemKeys(),i=this.options.filter();if(!t.length)return Ae().resolve([]);const r=new QA(t).getCombinedFilter(n,i,!0);return this._loadFilteredData(r)}}class aq{constructor(n){this.options=pe(this._getDefaultOptions(),n,{selectedItemKeys:n.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new nq(this.options):new sq(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:De,key:De,keyOf:n=>n,load:()=>Ae().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:n=>n,dataFields:De,filter:De}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(n){if(void 0===n)return this.options.selectionFilter;const t=this.options.selectionFilter!==n&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(n);this.options.selectionFilter=n,t&&this.onSelectionChanged()}setSelection(n,t){return this.selectedItemKeys(n,!1,!1,!1,t)}select(n){return this.selectedItemKeys(n,!0)}deselect(n){return this.selectedItemKeys(n,!0,!0)}selectedItemKeys(n,t,i,o,r){return n=n??[],n=Array.isArray(n)?n:[n],this.validate(),this._selectionStrategy.selectedItemKeys(n,t,i,o,r)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(n,t){this._selectionStrategy.addSelectedItem(t,n)}_removeSelectedItem(n){this._selectionStrategy.removeSelectedItem(n)}_setSelectedItems(n,t){this._selectionStrategy.setSelectedItems(n,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(n,t,i){var o,r;let c;const v=this.options.plainItems(),S=v[n];let T;const{isVirtualPaging:F}=this.options,N=null===(o=(r=this.options).allowLoadByRange)||void 0===o?void 0:o.call(r),{alwaysSelectByShift:B}=this.options;let X,ne=!1,le=!1;const he=Ne=>Ne>=0&&!v.filter(We=>We.loadIndex===Ne).length;if(F&&Ie(S)&&(N&&(X=S.loadIndex-n,n=S.loadIndex),ne=he(this._focusedItemIndex),Ie(this._shiftFocusedItemIndex)&&(le=he(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(S))return!1;const Oe=this.options.getItemData(S),_e=this.options.keyOf(Oe);let ke=(t=t||{}).shift;if(!1===B&&ke&&(ke=!1!==N||!ne&&!le),ke&&"multiple"===this.options.mode&&this._focusedItemIndex>=0)N&&(ne||le)?(c=n!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,c&&(T=this.changeItemSelectionWhenShiftKeyInVirtualPaging(n))):c=this.changeItemSelectionWhenShiftKeyPressed(n,v,X);else if(t.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!i){const Ne=this._selectionStrategy.isItemDataSelected(Oe);"single"===this.options.mode&&this.clearSelectedItems(),Ne?this._removeSelectedItem(_e):this._addSelectedItem(Oe,_e)}c=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const Ne=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],_e);(1!==this.options.selectedItemKeys.length||!Ne)&&(this._setSelectedItems([_e],[Oe]),c=!0)}return c?(Ft(T).done(()=>{this._focusedItemIndex=n,!i&&this.onSelectionChanged()}),!0):void 0}isDataItem(n){return this.options.isSelectableItem(n)}isSelectable(){return"single"===this.options.mode||"multiple"===this.options.mode}isItemDataSelected(n){return this._selectionStrategy.isItemDataSelected(n,{checkPending:!0})}isItemSelected(n,t){return this._selectionStrategy.isItemKeySelected(n,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(n){const t=this.options.getLoadOptions(n,this._focusedItemIndex,this._shiftFocusedItemIndex),i=Ae(),o=t.skip;return this.options.load(t).done(r=>{this.changeItemSelectionWhenShiftKeyPressed(n,r,o),i.resolve()}),i.promise()}changeItemSelectionWhenShiftKeyPressed(n,t,i){let r,o=!1;const c=Ie(i);let v=c?this._focusedItemIndex-i:this._focusedItemIndex;const{keyOf:S}=this.options,T=t[v],F=this.options.getItemData(T),N=S(F),B=T&&this.isItemDataSelected(F);let X,ne,le,he;if(Ie(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex),this._shiftFocusedItemIndex!==this._focusedItemIndex)for(r=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,le=c?this._focusedItemIndex-i:this._focusedItemIndex,he=c?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,v=le;v!==he;v+=r)(c||this.isDataItem(t[v]))&&(ne=S(this.options.getItemData(t[v])),this._removeSelectedItem(ne),o=!0);if(n!==this._shiftFocusedItemIndex)for(r=n<this._shiftFocusedItemIndex?1:-1,le=c?n-i:n,he=c?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,v=le;v!==he;v+=r)(c||this.isDataItem(t[v]))&&(X=this.options.getItemData(t[v]),ne=S(X),this._addSelectedItem(X,ne),o=!0);return(c||this.isDataItem(T))&&!B&&(this._addSelectedItem(F,N),o=!0),o}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(n){return this._resetFocusedItemIndex(),n?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(n){return this._resetFocusedItemIndex(),n?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(n){const t=this._selectionStrategy.getSelectableItems(this.options.plainItems());for(let i=0;i<t.length;i++){const o=t[i];if(this.isDataItem(o)){const r=this.options.getItemData(o),c=this.options.keyOf(r),v=this.isItemSelected(c);!v&&!n&&this._addSelectedItem(r,c),v&&n&&this._removeSelectedItem(c)}}return this.onSelectionChanged(),Ae().resolve()}getSelectAllState(n){return this._selectionStrategy.getSelectAllState(n)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}const lq={load:()=>Ae().reject(),loadSingle:()=>Ae().reject(),loadFromStore:()=>Ae().reject(),loadNextPage:()=>Ae().reject(),loadOptions:De,userData:De,cancel:De,cancelAll:De,filter:De,addSearchFilter:De,group:De,paginate:De,pageSize:De,pageIndex:De,resetDataSourcePageIndex:De,totalCount:De,isLastPage:De,isLoading:De,isLoaded:De,searchValue:De,searchOperation:De,searchExpr:De,select:De,key:De,keyOf:De,store:De,items:De,applyMapFunction:De,getDataSource:De,reload:De,on:De,off:De},JA="_dataSourceChangedHandler",eR="_getSpecificDataSourceOption",tR="_normalizeDataSource",UC={postCtor:function(){this.on("disposing",function(){this._disposeDataSource()}.bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){let n,t,e=eR in this?this[eR]():this.option("dataSource");this._disposeDataSource(),e&&(e instanceof zu?(this._isSharedDataSource=!0,this._dataSource=e):(n="_dataSourceOptions"in this?this._dataSourceOptions():{},t=this._dataSourceType?this._dataSourceType():zu,e=XA(e,{fromUrlLoadMode:"_dataSourceFromUrlLoadMode"in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new t(pe(!0,{},n,e))),tR in this&&(this._dataSource=this[tR](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())},_initDataController:function(){var e;const n=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController");this._dataController=n||new class cq{constructor(n){if(!n)return lq;this._dataSource=n}load(){return this._dataSource.load()}loadSingle(n,t){return arguments.length<2&&(t=n,n=this.key()),this._dataSource.loadSingle(n,t)}loadFromStore(n){return this.store().load(n)}loadNextPage(){return this.pageIndex(1+this.pageIndex()),this.load()}loadOptions(){return this._dataSource.loadOptions()}userData(){return this._dataSource._userData}cancel(n){this._dataSource.cancel(n)}cancelAll(){this._dataSource.cancelAll()}filter(n){return this._dataSource.filter(n)}addSearchFilter(n){this._dataSource._addSearchFilter(n)}group(n){return this._dataSource.group(n)}paginate(){return this._dataSource.paginate()}pageSize(){return this._dataSource._pageSize}pageIndex(n){return this._dataSource.pageIndex(n)}resetDataSourcePageIndex(){this.pageIndex()&&(this.pageIndex(0),this.load())}totalCount(){return this._dataSource.totalCount()}isLastPage(){return this._dataSource.isLastPage()||!this._dataSource._pageSize}isLoading(){return this._dataSource.isLoading()}isLoaded(){return this._dataSource.isLoaded()}searchValue(n){return arguments.length?this._dataSource.searchValue(n):this._dataSource.searchValue()}searchOperation(n){return this._dataSource.searchOperation(n)}searchExpr(n){return arguments.length?this._dataSource.searchExpr(n):this._dataSource.searchExpr()}select(){return this._dataSource.select(...arguments)}key(){return this._dataSource.key()}keyOf(n){return this.store().keyOf(n)}store(){return this._dataSource.store()}items(){return this._dataSource.items()}applyMapFunction(n){return this._dataSource._applyMapFunction(n)}getDataSource(){return this._dataSource||null}reload(){return this._dataSource.reload()}on(n,t){this._dataSource.on(n,t)}off(n,t){this._dataSource.off(n,t)}}(this._dataSource)},_addDataSourceHandlers:function(){JA in this&&this._addDataSourceChangeHandler(),"_dataSourceLoadErrorHandler"in this&&this._addDataSourceLoadErrorHandler(),"_dataSourceLoadingChangedHandler"in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this.readyWatcher=function(e){this._ready&&this._ready(!e)}.bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)},_addDataSourceChangeHandler:function(){const e=this._dataSource;this._proxiedDataSourceChangedHandler=function(n){this[JA](e.items(),n)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){const e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())},_loadSingle:function(e,n){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,n)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}},nR=Math.abs,dq=Fp.inherit({start:function(e){this._startEventData=an(e),this._startTimer(e)},_startTimer:function(e){const n="timeout"in this?this.timeout:750;this._holdTimer=setTimeout(function(){this._requestAccept(e),this._fireEvent("dxhold",e,{target:e.target}),this._forgetAccept()}.bind(this),n)},move:function(e){this._touchWasMoved(e)&&this._cancel(e)},_touchWasMoved:function(e){const n=Vs(this._startEventData,an(e));return nR(n.x)>5||nR(n.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});Dl({emitter:dq,bubble:!0,events:["dxhold"]});const hq=Te("contextmenu","dxContexMenu"),pq=Te("dxhold","dxContexMenu"),fq=Tt.inherit({setup:function(e){const n=V(e);ue.on(n,hq,this._contextMenuHandler.bind(this)),(Sl||je.isSimulator())&&ue.on(n,pq,this._holdHandler.bind(this))},_holdHandler:function(e){Bs(e)&&!je.isSimulator()||this._fireContextMenu(e)},_contextMenuHandler:function(e){this._fireContextMenu(e)},_fireContextMenu:function(e){return is({type:"dxcontextmenu",originalEvent:e})},teardown:function(e){ue.off(e,".dxContexMenu")}});_o("dxcontextmenu",new fq);const iR="dxcontextmenu",oR=Tt.inherit({ctor(e,n,t){this._$element=e,this._options=n,this._rawData=t,OT(e,this,this._dispose),this._render()},_render(){const e=V("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()},_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher(e,n){const t=this._rawData,i=this._options.fieldGetter(e),o=function(e,n,t){const i=function(){let o;return function(r){o!==r&&(t(r,o),o=r)}}();return{dispose:e(n,i),force(){i(n())}}}(this._options.watchMethod(),()=>i(t),(r,c)=>{this._dirty=!0,n(r,c)});this._watchers.push(o)},setDataField(){if(this._dirty=!1,Ee(this._watchers,(e,n)=>{n.force()}),this._dirty)return!0},_renderDisabled(e,n){this._$element.toggleClass("dx-state-disabled",!!e),this._$element.attr("aria-disabled",!!e),this._updateOwnerFocus(e)},_updateOwnerFocus(e){const n=this._options.owner;n&&e&&n._resetItemFocus(this._$element)},_renderVisible(e,n){this._$element.toggleClass("dx-state-invisible",void 0!==e&&!e)},_dispose(){Ee(this._watchers,(e,n)=>{n.dispose()})}});oR.getInstance=function(e){return bT(e,this)};const ju=oR,uf="dx-item",_q=/^([^.]+\[\d+\]\.)+([\w.]+)$/,rR=vi.inherit({_activeStateUnit:`.${uf}`,_supportedKeys(){const e=function(n,t){ri(t)||(t.preventDefault(),t.stopPropagation(),this._moveFocus(n,t))};return pe(this.callBase(),{space:function(n){n.preventDefault(),this._enterKeyHandler(n)},enter:this._enterKeyHandler,leftArrow:e.bind(this,"left"),rightArrow:e.bind(this,"right"),upArrow:e.bind(this,"up"),downArrow:e.bind(this,"down"),pageUp:e.bind(this,"up"),pageDown:e.bind(this,"down"),home:e.bind(this,"first"),end:e.bind(this,"last")})},_enterKeyHandler(e){const n=V(this.option("focusedElement"));if(!n.length)return;const t=this._getItemData(n);null!=t&&t.onClick&&this._itemEventHandlerByHandler(n,t.onClick,{event:e}),this._itemClickHandler(pe({},e,{target:n.get(0),currentTarget:n.get(0)}))},_getDefaultOptions(){return pe(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:de.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:e=>e?e.disabled:void 0,visibleExpr:e=>e?e.visible:void 0})},_init(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter(){const e=this.option("displayExpr");this._displayGetter=e?sn(this.option("displayExpr")):void 0},_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:()=>"item",_initDefaultItemTemplate(){const e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new $s((n,t)=>{lt(t)?this._prepareDefaultItemTemplate(t,n):(e&&Be(e.text)&&(t=e.text(t)),n.text(String(mn(t,""))))},this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})},_getBindableFields:()=>["text","html"],_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate(e,n){Ie(e.text)&&n.text(e.text),Ie(e.html)&&n.html(e.html)},_initItemsFromMarkup(){const e=AT(this.$element(),"dxItem");if(!e.length||this.option("items").length)return;const n=e.map(t=>{let{element:i,options:o}=t;return/\S/.test(i.innerHTML)&&!o.template?o.template=this._prepareItemTemplate(i):V(i).remove(),o});this.option("items",n)},_prepareItemTemplate(e){const n="tmpl-"+new Pn,t=V(e).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(n,t),n},_dataSourceOptions:()=>({paginate:!1}),_cleanRenderedItems(){this._renderedItemsCount=0},_focusTarget(){return this.$element()},_focusInHandler(e){if(this.callBase.apply(this,arguments),!this._isFocusTarget(e.target))return;const n=V(this.option("focusedElement"));if(n.length)this._setFocusedItem(n);else{const t=this._getActiveItem();t.length&&this.option("focusedElement",st(t))}},_focusOutHandler(){this.callBase.apply(this,arguments);const e=V(this.option("focusedElement"));this._updateFocusedItemState(e,!1)},_findActiveTarget(e){return e.find(this._activeStateUnit)},_getActiveItem(e){const n=V(this.option("focusedElement"));if(n.length)return n;let t=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0;const i=this._getActiveElement();return t<0&&(t=e?i.length-1:0),i.eq(t)},_moveFocus(e){const n=this._getAvailableItems();let t;switch(e){case"pageup":case"up":t=this._prevItem(n);break;case"pagedown":case"down":t=this._nextItem(n);break;case"right":t=this.option("rtlEnabled")?this._prevItem(n):this._nextItem(n);break;case"left":t=this.option("rtlEnabled")?this._nextItem(n):this._prevItem(n);break;case"first":t=n.first();break;case"last":t=n.last();break;default:return!1}0!==t.length&&this.option("focusedElement",st(t))},_getVisibleItems(e){return(e=e||this._itemElements()).filter(":visible")},_getAvailableItems(e){return this._getVisibleItems(e)},_prevItem(e){const n=this._getActiveItem(),t=e.index(n),i=e.last();let o=V(e[t-1]);const r=this.option("loopItemFocus");return 0===o.length&&r&&(o=i),o},_nextItem(e){const n=this._getActiveItem(!0),t=e.index(n),i=e.first();let o=V(e[t+1]);const r=this.option("loopItemFocus");return 0===o.length&&r&&(o=i),o},_selectFocusedItem(e){this.selectItem(e)},_updateFocusedItemState(e,n,t){const i=V(e);i.length&&(this._refreshActiveDescendant(),this._refreshItemId(i,t),this._toggleFocusClass(n,i)),this._updateParentActiveDescendant()},_refreshActiveDescendant(e){this.setAria("activedescendant",Ie(this.option("focusedElement"))?this.getFocusedItemId():null,e)},_refreshItemId(e,n){!n&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e)},_isDisabled:e=>e&&"true"===V(e).attr("aria-disabled"),_setFocusedItem(e){if(!e||!e.length)return;this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:n}=this.option(),t=this._isDisabled(e);n&&!t&&this._selectFocusedItem(e)},_findItemElementByItem(e){let n=V();const t=this;return this.itemElements().each(function(){const i=V(this);if(i.data(t._itemDataKey())===e)return n=i,!1}),n},_getIndexByItem(e){return this.option("items").indexOf(e)},_itemOptionChanged(e,n,t,i){const o=this._findItemElementByItem(e);o.length&&(this.constructor.ItemClass.getInstance(o).setDataField(n,t)||this._refreshItem(o,e),"disabled"===n&&t&&this._resetItemFocus(o))},_resetItemFocus(e){e.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem(e){const n=this._getItemData(e),t=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+t,n,null,e)},_updateParentActiveDescendant:De,_optionChanged(e){if("items"===e.name){const n=e.fullName.match(_q);if(n&&n.length){const t=n[n.length-1],i=e.fullName.replace(`.${t}`,""),o=this.option(i);return void this._itemOptionChanged(o,t,e.value,e.previousValue)}}switch(e.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(e.previousValue,!1,!0),this._setFocusedItem(V(e.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(e)}},_invalidate(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading(){this._startIndexForAppendedItems=0},_expectLastItemLoading(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler(e){const n=this.option("items");this._initialized&&n&&this._shouldAppendItems()?(this._renderedItemsCount=n.length,(!this._isLastPage()||-1!==this._startIndexForAppendedItems)&&(this.option().items=n.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())},_refreshContent(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:()=>!1,_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer(){V(this._itemContainer()).empty()},_dispose(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer(){return this.$element()},_itemClass:()=>uf,_itemContentClass(){return this._itemClass()+"-content"},_selectedItemClass:()=>"dx-item-selected",_itemResponseWaitClass:()=>"dx-item-response-wait",_itemSelector(){return`.${this._itemClass()}`},_itemDataKey:()=>"dxItemData",_itemIndexKey:()=>"dxItemIndex",_itemElements(){return this._itemContainer().find(this._itemSelector())},_initMarkup(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:dl(function(){this._renderContentImpl()}),_renderContent(){this._fireContentReadyAction()},_render(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>Wt.down,_attachClickEvent(){const e=this._itemSelector(),n=this._getPointerEvent(),t=Te(si,this.NAME),i=Te(n,this.NAME),o=new _l(r=>{const{event:c}=r;this._itemPointerDownHandler(c)});ue.off(this._itemContainer(),t,e),ue.off(this._itemContainer(),i,e),ue.on(this._itemContainer(),t,e,r=>this._itemClickHandler(r)),ue.on(this._itemContainer(),i,e,r=>{o.execute({element:V(r.target),event:r})})},_itemClickHandler(e,n,t){this._itemDXEventHandler(e,"onItemClick",n,t)},_itemPointerDownHandler(e){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,e.isDefaultPrevented())return;const n=V(e.target),t=n.closest(this._itemElements()),i=this._closestFocusable(n);t.length&&this._isFocusTarget(i?.get(0))&&this.option("focusedElement",st(t))}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable(e){if(e.is(Ey))return e;for(e=e.parent();e.length&&!Pe.isDocument(e.get(0))&&!Pe.isDocumentFragment(e.get(0));){if(e.is(Ey))return e;e=e.parent()}},_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent(){const e=this._itemContainer(),n=this._itemSelector(),t=Te("dxhold",this.NAME);ue.off(e,t,n),ue.on(e,t,n,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0},_attachContextMenuEvent(){const e=this._itemContainer(),n=this._itemSelector(),t=Te(iR,this.NAME);ue.off(e,t,n),ue.on(e,t,n,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0},_renderContentImpl(){const e=this.option("items")||[];this._renderItems(this._renderedItemsCount?e.slice(this._renderedItemsCount):e)},_renderItems(e){e.length&&Ee(e,(n,t)=>{this._renderItem(this._renderedItemsCount+n,t)}),this._renderEmptyMessage()},_getItemsContainer(){return this._itemContainer()},_setAttributes(e){const n=He({},this.option("_itemAttributes")),{class:t}=n;if(t){const i=e.get(0).className;n.class=[i,t].join(" ")}e.attr(n)},_renderItem(e,n,t,i){const o=e?.item??e;t=t||this._getItemsContainer();const r=this._renderItemFrame(o,n,t,i);this._setElementData(r,n,o),this._setAttributes(r),this._attachItemClickEvent(n,r);const c=this._getItemContent(r),v=this._renderItemContent({index:o,itemData:n,container:st(c),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),S=this;return Ft(v).done(T=>{S._postprocessRenderItem({itemElement:r,itemContent:T,itemData:n,itemIndex:o}),S._executeItemRenderAction(e,n,st(r))}),r},_getItemContent(e){const n=e.find(".dx-item-content-placeholder");return n.removeClass("dx-item-content-placeholder"),n},_attachItemClickEvent(e,n){!e||!e.onClick||ue.on(n,si,t=>{this._itemEventHandlerByHandler(n,e.onClick,{event:t})})},_renderItemContent(e){const n=this._getItemTemplateName(e),t=this._getTemplate(n);this._addItemContentClasses(e);const i=V(this._createItemByTemplate(t,e));return i.hasClass("dx-template-wrapper")?this._renderItemContentByNode(e,i):e.container},_renderItemContentByNode(e,n){return V(e.container).replaceWith(n),e.container=st(n),this._addItemContentClasses(e),n},_addItemContentClasses(e){const n=[uf+"-content",e.contentClass];V(e.container).addClass(n.join(" "))},_appendItemToContainer(e,n,t){n.appendTo(e)},_renderItemFrame(e,n,t,i){const o=V("<div>");if(new this.constructor.ItemClass(o,this._itemOptions(),n||{}),i&&i.length?i.replaceWith(o):this._appendItemToContainer.call(this,t,o,e),this.option("useItemTextAsTitle")){const r=this._displayGetter?this._displayGetter(n):n;o.attr("title",r)}return o},_itemOptions(){const e=this;return{watchMethod:()=>e.option("integrationOptions.watchMethod"),owner:e,fieldGetter(n){const t=e.option(`${n}Expr`);return sn(t)}}},_postprocessRenderItem:De,_executeItemRenderAction(e,n,t){this._getItemRenderAction()({itemElement:t,itemIndex:e,itemData:n})},_setElementData(e,n,t){e.addClass([uf,this._itemClass()].join(" ")).data(this._itemDataKey(),n).data(this._itemIndexKey(),t)},_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName(e){const n=e.itemData,t=e.templateProperty||this.option("itemTemplateProperty");return n&&n[t]||e.defaultTemplateName},_createItemByTemplate(e,n){return e.render({model:n.itemData,container:n.container,index:n.index,onRendered:this._onItemTemplateRendered(e,n)})},_onItemTemplateRendered:()=>De,_emptyMessageContainer(){return this._itemContainer()},_renderEmptyMessage(e){e=e||this.option("items");const n=this.option("noDataText"),t=!n||e&&e.length||this._dataController.isLoading();t&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),t||(this._$noData=this._$noData||V("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(n):this._$noData.html(n)),this.$element().toggleClass("dx-empty-collection",!t)},_itemDXEventHandler(e,n,t,i){this._itemEventHandler(e.target,n,pe(t,{event:e}),i)},_itemEventHandler(e,n,t,i){const o=this._createActionByOption(n,pe({validatingTargetName:"itemElement"},i));return this._itemEventHandlerImpl(e,o,t)},_itemEventHandlerByHandler(e,n,t,i){const o=this._createAction(n,pe({validatingTargetName:"itemElement"},i));return this._itemEventHandlerImpl(e,o,t)},_itemEventHandlerImpl(e,n,t){const i=this._closestItemElement(V(e)),o=pe({},t);return n(pe(t,this._extendActionArgs(i),o))},_extendActionArgs(e){return{itemElement:st(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}},_closestItemElement(e){return V(e).closest(this._itemSelector())},_getItemData(e){return V(e).data(this._itemDataKey())},_getSummaryItemsSize(e,n,t){let i=0;return n&&Ee(n,(o,r)=>{"width"===e?i+=qt(r,t||!1):"height"===e&&(i+=et(r,t||!1))}),i},getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new Pn}`),this._focusedItemId},itemElements(){return this._itemElements()},itemsContainer(){return this._itemContainer()}}).include(UC);rR.ItemClass=ju;const vq=rR,{abstract:xi}=Tt,$C=Tt.inherit({ctor(e){this._collectionWidget=e},getIndexByItemData:xi,getItemDataByIndex:xi,getKeysByItems:xi,getItemsByKeys:xi,itemsGetter:xi,getKeyByIndex(e){const n=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(n)])[0]},_equalKeys(e,n){return this._collectionWidget._isKeySpecified()?ks(e,n):e===n},beginCache(){this._cache={}},endCache(){this._cache=null},getIndexByKey:xi,getNormalizedIndex(e){return this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._isNode(e)?this._getNormalizedItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))},getIndex(e){return this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this._isNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this.getIndexByItemData(e)},getItemElement(e){if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));if(this._isNode(e))return V(e);const n=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(n)},_isNode:e=>Pe.isNode(e&&qi(e)?e.get(0):e),deleteItemAtIndex:xi,itemPlacementFunc(e,n){return this._itemsFromSameParent(e,n)&&e<n?"after":"before"},moveItemAtIndexToIndex:xi,_isNormalizedItemIndex:e=>"number"==typeof e&&Math.round(e)===e,_isItemIndex:xi,_getNormalizedItemIndex:xi,_normalizeItemIndex:xi,_denormalizeItemIndex:xi,_getItemByNormalizedIndex:xi,_itemsFromSameParent:xi}).inherit({_getPlainItems(){return this._collectionWidget.option("items")||[]},getIndexByItemData(e){const n=this._collectionWidget.keyOf.bind(this._collectionWidget);return n?this.getIndexByKey(n(e)):this._getPlainItems().indexOf(e)},getItemDataByIndex(e){return this._getPlainItems()[e]},deleteItemAtIndex(e){this._getPlainItems().splice(e,1)},itemsGetter(){return this._getPlainItems()},getKeysByItems(e){const n=this._collectionWidget.keyOf.bind(this._collectionWidget);let t=e;if(n){t=[];for(let i=0;i<e.length;i++)t.push(n(e[i]))}return t},getIndexByKey(e){const n=this._cache,t=n&&n.keys||this.getKeysByItems(this._getPlainItems());if(n&&!n.keys&&(n.keys=t),"object"!=typeof e)return t.indexOf(e);for(let i=0,{length:o}=t;i<o;i++)if(this._equalKeys(e,t[i]))return i;return-1},getItemsByKeys:(e,n)=>(n||e).slice(),moveItemAtIndexToIndex(e,n){const t=this._getPlainItems(),i=t[e];t.splice(e,1),t.splice(n,0,i)},_isItemIndex:e=>"number"==typeof e&&Math.round(e)===e,_getNormalizedItemIndex(e){return this._collectionWidget._itemElements().index(e)},_normalizeItemIndex:e=>e,_denormalizeItemIndex:e=>e,_getItemByNormalizedIndex(e){return e>-1?this._collectionWidget._itemElements().eq(e):null},_itemsFromSameParent:()=>!0}),Co=function(e){return-1!==e},WC=vq.inherit({_setOptionsByReference(){this.callBase(),pe(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions(){return pe(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor(e,n){this._userOptions=n||{},this.callBase(e,n)},_init(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter(){this._keyGetter=sn(this.option("keyExpr"))},_getKeysByItems(e){return this._editStrategy.getKeysByItems(e)},_getItemsByKeys(e,n){return this._editStrategy.getItemsByKeys(e,n)},_getKeyByIndex(e){return this._editStrategy.getKeyByIndex(e)},_getIndexByKey(e){return this._editStrategy.getIndexByKey(e)},_getIndexByItemData(e){return this._editStrategy.getIndexByItemData(e)},_isKeySpecified(){return!!this._dataController.key()},_getCombinedFilter(){return this._dataController.filter()},key(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf(e){let n=e;return this.option("keyExpr")?n=this._keyGetter(e):this._dataController.store()&&(n=this._dataController.keyOf(e)),n},_nullValueSelectionSupported:()=>!1,_initSelectionModule(){const e=this,{itemsGetter:n}=e._editStrategy;this._selection=new aq({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged(t){(t.addedItemKeys.length||t.removedItemKeys.length)&&(e.option("selectedItems",e._getItemsByKeys(t.selectedItemKeys,t.selectedItems)),e._updateSelectedItems(t))},filter:e._getCombinedFilter.bind(e),totalCount(){const t=e.option("items"),i=e._dataController.totalCount();return i>=0?i:e._getItemsCount(t)},key:e.key.bind(e),keyOf:e.keyOf.bind(e),load(t){var i;const o=e._dataController;return t.customQueryParams=null===(i=o.loadOptions())||void 0===i?void 0:i.customQueryParams,t.userData=o.userData(),o.store()?o.loadFromStore(t).done(r=>{if(e._disposed)return;const c=ZA(r).data;o.applyMapFunction(c)}):Ae().resolve(this.plainItems())},dataFields:()=>e._dataController.select(),plainItems:n.bind(e._editStrategy)})},_getItemsCount(e){return e.reduce((n,t)=>n+(t.items?this._getItemsCount(t.items):1),0)},_initEditStrategy(){this._editStrategy=new $C(this)},_getSelectedItemIndices(e){const n=this,t=[];return e=e||this._selection.getSelectedItemKeys(),n._editStrategy.beginCache(),Ee(e,(i,o)=>{const r=n._getIndexByKey(o);Co(r)&&t.push(r)}),n._editStrategy.endCache(),t},_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done(()=>this._normalizeSelectedItems()),this.callBase()},_render(){this.callBase(),this._rendering=!1},_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions(e){let n,t,i,o;switch(e=e||this._chooseSelectOption()){case"selectedIndex":n=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),Ie(n)?(this._setOptionWithoutOptionChange("selectedItems",[n]),this._setOptionWithoutOptionChange("selectedItem",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([n]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(o=this.option("selectedItems")||[],t=o.length?this._editStrategy.getIndexByItemData(o[0]):-1,this.option("selectionRequired")&&!Co(t))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",o[0]),this._setOptionWithoutOptionChange("selectedIndex",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(o));break;case"selectedItem":if(n=this.option("selectedItem"),t=this._editStrategy.getIndexByItemData(n),this.option("selectionRequired")&&!Co(t))return this._syncSelectionOptions("selectedIndex");Ie(n)?(this._setOptionWithoutOptionChange("selectedItems",[n]),this._setOptionWithoutOptionChange("selectedIndex",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([n]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(i=this.option("selectedItemKeys"),this.option("selectionRequired")){const r=this._getIndexByKey(i[0]);if(!Co(r))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(i)}return Ae().resolve().promise()},_chooseSelectOption(){let e="selectedIndex";const n=function(t){const i=this.option(t);return Ie(i)&&i.length||t in this._userOptions}.bind(this);return n("selectedItems")?e="selectedItems":n("selectedItem")?e="selectedItem":n("selectedItemKeys")&&(e="selectedItemKeys"),e},_compareKeys(e,n){if(e.length!==n.length)return!1;for(let t=0;t<n.length;t++)if(e[t]!==n[t])return!1;return!0},_normalizeSelectedItems(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){const e=this.option("selectedItems");if(e.length>1||!e.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){const n=this._selection.getSelectedItems();let t=void 0===e[0]?n[0]:e[0];return void 0===t&&(t=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&t&&t.items&&(t.items=[t.items[0]]),this._selection.setSelection(this._getKeysByItems([t])),this._setOptionWithoutOptionChange("selectedItems",[t]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(e))}else{const e=this._getKeysByItems(this.option("selectedItems")),n=this._selection.getSelectedItemKeys();this._compareKeys(n,e)||this._selection.setSelection(e)}return Ae().resolve().promise()},_itemClickHandler(e){let n=Ae().resolve();const{callBase:t}=this;this._createAction(i=>{n=this._itemSelectHandler(i.event)??n},{validatingTargetName:"itemElement"})({itemElement:V(e.currentTarget),event:e}),n.always(()=>{t.apply(this,arguments)})},_itemSelectHandler(e){var n;let t;if(this.option("selectByClick"))return this.isItemSelected(e.currentTarget)?this.unselectItem(e.currentTarget):t=this.selectItem(e.currentTarget),null===(n=t)||void 0===n?void 0:n.promise()},_selectedItemElement(e){return this._itemElements().eq(e)},_postprocessRenderItem(e){if("none"!==this.option("selectionMode")){const n=V(e.itemElement),t=this._editStrategy.getNormalizedIndex(n),i=this._isItemSelected(t);this._processSelectableItem(n,i)}},_processSelectableItem(e,n){e.toggleClass(this._selectedItemClass(),n),this._setAriaSelectionAttribute(e,String(n))},_updateSelectedItems(e){const n=this,{addedItemKeys:t}=e,{removedItemKeys:i}=e;if(n._rendered&&(t.length||i.length)){const o=n._selectionChangePromise;if(!n._rendering){const r=[];let c;const v=[];n._editStrategy.beginCache();for(let S=0;S<t.length;S++)c=n._getIndexByKey(t[S]),r.push(c),n._addSelection(c);for(let S=0;S<i.length;S++)c=n._getIndexByKey(i[S]),v.push(c),n._removeSelection(c);n._editStrategy.endCache(),n._updateSelection(r,v)}Ft(o).done(()=>{n._fireSelectionChangeEvent(e.addedItems,e.removedItems)})}},_fireSelectionChangeEvent(e,n){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:e,removedItems:n})},_updateSelection:De,_setAriaSelectionAttribute(e,n){this.setAria("selected",n,e)},_removeSelection(e){const n=this._editStrategy.getItemElement(e);Co(e)&&(this._processSelectableItem(n,!1),ue.triggerHandler(n,"stateChanged",!1))},_addSelection(e){const n=this._editStrategy.getItemElement(e);Co(e)&&(this._processSelectableItem(n,!0),ue.triggerHandler(n,"stateChanged",!0))},_isItemSelected(e){const n=this._getKeyByIndex(e);return this._selection.isItemSelected(n,{checkPending:!0})},_optionChanged(e){switch(e.name){case"selectionMode":this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),this.callBase(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done(()=>this._normalizeSelectedItems());break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(e)}},_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare(e){if(e.data("dxItemDeleting"))return Ae().resolve().promise();e.data("dxItemDeleting",!0);const n=Ae(),t={cancel:!1},i=this._itemEventHandler(e,"onItemDeleting",t,{excludeValidators:["disabled","readOnly"]});return Ft(i).always(function(o){const r=!i,c=!r&&"resolved"===i.state(),S=r||c&&!arguments.length||c&&o;Ft(ii(t.cancel)).always(()=>{e.data("dxItemDeleting",!1)}).done(T=>{S&&!T?n.resolve():n.reject()}).fail(n.reject)}),n.promise()},_deleteItemFromDS(e){const n=this._dataController,t=Ae(),i=this.option("disabled"),o=n.store();if(!o)return Ae().resolve().promise();if(!o.remove)throw Jt.Error("E1011");return this.option("disabled",!0),o.remove(n.keyOf(this._getItemData(e))).done(r=>{void 0!==r?t.resolve():t.reject()}).fail(()=>{t.reject()}),t.always(()=>{this.option("disabled",i)}),t},_tryRefreshLastPage(){const e=Ae();return this._isLastPage()||this.option("grouped")?e.resolve():this._refreshLastPage().done(()=>{e.resolve()}),e.promise()},_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete(e){const n=this._getKeyByIndex(e);this._selection.deselect([n])},_updateIndicesAfterIndex(e){const n=this._itemElements();for(let t=e+1;t<n.length;t++)V(n[t]).data(this._itemIndexKey(),t-1)},_simulateOptionChange(e){const n=this.option(e);n instanceof zu||this._optionChangedAction({name:e,fullName:e,value:n})},isItemSelected(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))},selectItem(e){if("none"===this.option("selectionMode"))return;const n=this._editStrategy.getNormalizedIndex(e);if(!Co(n))return;const t=this._getKeyByIndex(n);if(this._selection.isItemSelected(t))return;if("single"===this.option("selectionMode"))return this._selection.setSelection([t]);const i=this.option("selectedItemKeys")||[];return this._selection.setSelection([...i,t],[t])},unselectItem(e){const n=this._editStrategy.getNormalizedIndex(e);if(!Co(n))return;const t=this._selection.getSelectedItemKeys();if(this.option("selectionRequired")&&t.length<=1)return;const i=this._getKeyByIndex(n);this._selection.isItemSelected(i,{checkPending:!0})&&this._selection.deselect([i])},_deleteItemElementByIndex(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)},_afterItemElementDeleted(e,n){const t=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(t),this._itemEventHandler(e,"onItemDeleted",n,{beforeExecute(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem(e){const n=this,t=Ae(),i=this._editStrategy.getItemElement(e),o=this._editStrategy.getNormalizedIndex(e),r=this._itemResponseWaitClass();return Co(o)?this._waitDeletingPrepare(i).done(()=>{i.addClass(r);const c=n._extendActionArgs(i);n._deleteItemFromDS(i).done(()=>{n._deleteItemElementByIndex(o),n._afterItemElementDeleted(i,c),n._tryRefreshLastPage().done(()=>{t.resolveWith(n)})}).fail(()=>{i.removeClass(r),t.rejectWith(n)})}).fail(()=>{t.rejectWith(n)}):t.rejectWith(n),t.promise()},reorderItem(e,n){const t=Ae(),i=this,o=this._editStrategy,r=o.getItemElement(e),c=o.getItemElement(n),v=o.getNormalizedIndex(e),S=o.getNormalizedIndex(n),T=this._dataController.getDataSource()?"dataSource":"items";return Co(v)&&Co(S)&&v!==S?t.resolveWith(this):t.rejectWith(this),t.promise().done(function(){c[o.itemPlacementFunc(v,S)](r),o.moveItemAtIndexToIndex(v,S),this._updateIndicesAfterIndex(v),i.option("selectedItems",i._getItemsByKeys(i._selection.getSelectedItemKeys(),i._selection.getSelectedItems())),"items"===T&&i._simulateOptionChange(T),i._itemEventHandler(r,"onItemReordered",{fromIndex:o.getIndex(v),toIndex:o.getIndex(S)},{excludeValidators:["disabled","readOnly"]})})}}),yq=WC.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(e){const n=Ae(),t=Ae();this._deferredItems[e.index]=t;const i=this.callBase.call(this,e);return t.done(()=>{n.resolve(i)}),n.promise()},_onItemTemplateRendered(e,n){return()=>{this._deferredItems[n.index].resolve()}},_postProcessRenderItems:De,_renderItemsAsync(){const e=Ae();return Ft.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),e.resolve()}),e.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),Cq=WC,xq=vi,Oq=yq;class sR extends Oq{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(n=>"disabled"!==n)}_initTemplates(){super._initTemplates();const n=new $s((t,i,o)=>{if(lt(i)){const{text:r,html:c,widget:v}=i;r&&t.text(r).wrapInner("<div>"),c&&t.html(c),"dxDropDownButton"===v&&(i.options=i.options??{},Ie(i.options.stylingMode)||(i.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===v&&(this.option("useFlatButtons")&&(i.options=i.options??{},i.options.stylingMode=i.options.stylingMode??"text"),this.option("useDefaultButtons")&&(i.options=i.options??{},i.options.type=i.options.type??"default"))}else t.text(String(i));this._getTemplate("dx-polymorph-widget").render({container:t,model:o,parent:this})},["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:n,menuItem:n})}_getDefaultOptions(){return He({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>ki(),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(n){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass("dx-toolbar"),this._$toolbarItemsContainer=V("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const n=this._$toolbarItemsContainer;Ee(["before","center","after"],(t,i)=>{const o=`dx-toolbar-${i}`;n.find(`.${o}`).length||(this[`_$${i}Section`]=V("<div>").addClass(o).attr("role","presentation").appendTo(n))})}_arrangeItems(n){var t,i;const o=n??Xe(this.$element());this._$centerSection.css({margin:"0 auto",float:"none"});const r=Li(null===(t=this._$beforeSection)||void 0===t?void 0:t.get(0)),c=Li(null===(i=this._$afterSection)||void 0===i?void 0:i.get(0));this._alignCenterSection(r,c,o);const v=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),S=v.parent();if(!v.length)return;const T=r.width?r.width:v.position().left,F=S.hasClass("dx-toolbar-before")?0:T,N=S.hasClass("dx-toolbar-after")?0:c.width;let B=0;S.children().not(".dx-toolbar-label").each((le,he)=>{B+=qt(he)});const ne=Math.max(o-B-F-N,0);if(S.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,ne);else{const le=qt(v)-Xe(v);v.css("maxWidth",ne-le)}}_alignCenterSection(n,t,i){var o;this._alignSection(this._$centerSection,i-n.width-t.width);const r=this.option("rtlEnabled"),c=r?t:n,v=r?n:t,S=Li(null===(o=this._$centerSection)||void 0===o?void 0:o.get(0));(c.right>S.left||S.right>v.left)&&this._$centerSection.css({marginLeft:c.width,marginRight:v.width,float:c.width>v.width?"none":"right"})}_alignSection(n,t){let o=n.find(".dx-toolbar-label").toArray();t-=this._getCurrentLabelsPaddings(o);const r=this._getCurrentLabelsWidth(o),c=Math.abs(r-t);t<r?(o=o.reverse(),this._alignSectionLabels(o,c,!1)):this._alignSectionLabels(o,c,!0)}_alignSectionLabels(n,t,i){const o=function(r){return Li(r).width};for(let r=0;r<n.length;r++){const c=V(n[r]),v=Math.ceil(o(n[r]));let S;i&&c.css("maxWidth","inherit");const T=Math.ceil(i?o(n[r]):v);if(!(T<t)){S=i?v+t:v-t,c.css("maxWidth",S);break}S=i?T:0,t-=T,c.css("maxWidth",S)}}_applyCompactMode(){const n=V(this.element());n.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>Xe(n)&&n.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(n){let t=0;return n.forEach(i=>{t+=qt(i)}),t}_getCurrentLabelsPaddings(n){let t=0;return n.forEach(i=>{t+=qt(i)-Xe(i)}),t}_renderItem(n,t,i,o){const v=!!(t.text??t.html),S=super._renderItem(n,t,i??this[`_$${t.location??"center"}Section`],o);return S.toggleClass("dx-toolbar-button",!v).toggleClass("dx-toolbar-label",v).addClass(t.cssClass),S}_renderGroupedItems(){Ee(this.option("items"),(n,t)=>{const i=t.items,o=V("<div>").addClass("dx-toolbar-group"),r=t.location??"center";!i||!i.length||(Ee(i,(c,v)=>{this._renderItem(c,v,o,null)}),this._$toolbarItemsContainer.find(`.dx-toolbar-${r}`).append(o))})}_renderItems(n){this.option("grouped")&&n.length&&n[0].items?this._renderGroupedItems():super._renderItems(n)}_getToolbarItems(){return this.option("items")??[]}_renderContentImpl(){const n=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===n.length),this._renderItems(this._renderedItemsCount?n.slice(this._renderedItemsCount):n),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(n){n&&this._arrangeItems()}_isVisible(){return Xe(this.$element())>0&&ut(this.$element())>0}_getIndexByItem(n){return this._getToolbarItems().indexOf(n)}_itemOptionChanged(n,t,i,o){super._itemOptionChanged(n,t,i,o),this._arrangeItems()}_optionChanged(n){const{name:t}=n;switch(t){case"width":super._optionChanged(n),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(n)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if(Fi()){const n=()=>new Promise(i=>{const o=()=>{let c=!0;return this.$element().parents().each((v,S)=>{if(Wn.isAnimating(V(S)))return c=!1,!1}),c&&i(),c},r=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>o()||r(),15)};r()}),t=()=>{const i=this.$element().find(".dx-toolbar-label"),o=[];return i.each((r,c)=>{const v=V(c).text(),S=V(c).css("fontWeight");o.push(EM(v,S))}),Promise.all(o)};Promise.all([n(),t()]).then(()=>{this._dimensionChanged()})}}}xt("dxToolbarBase",sR);const Dq=sR,Iq=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function df(e,n){var t;if(!e)return;const i=e._findItemElementByItem(n);if(!i.length)return;const o=e._getItemData(i),r=!!(null!==(t=o.options)&&void 0!==t&&t.disabled||o.disabled||e.option("disabled")),{widget:c}=o;if(c&&Iq.includes(c)){const T=i.find(c.toLowerCase().replace("dx",".dx-"));if(T.length){var v,S;const F=function(e){const n=e.data&&e.data(),t=n&&n.dxComponents,i=t&&t[0];return i&&n[i]}(T);if(!F)return;let N=null===(v=F._focusTarget)||void 0===v?void 0:v.call(F);N="dxDropDownButton"===c?N&&N.find(".dx-buttongroup"):N??V(F.element());const B=null===(S=o.options)||void 0===S?void 0:S.tabIndex;N.attr("tabIndex",r?-1:B??0)}}}class wq{constructor(n){this._toolbar=n}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){return this._toolbar.option("items")??[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar._itemElements(),!0)}_arrangeItems(){const n=this._toolbar._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0);if(!n.length)return;const t=Xe(this._toolbar.$element()),i=qt(n)-Xe(n);n.css("maxWidth",t-i)}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}const aR=ot(),Pq={observe:De,unobserve:De,disconnect:De},hf=new class Tq{constructor(){if(!Ke()||!aR.ResizeObserver)return Pq;this._callbacksMap=new Map,this._observer=new aR.ResizeObserver(n=>{n.forEach(t=>{var i;null===(i=this._callbacksMap.get(t.target))||void 0===i||i(t)})})}observe(n,t){this._callbacksMap.set(n,t),this._observer.observe(n)}unobserve(n){this._callbacksMap.delete(n),this._observer.unobserve(n)}disconnect(){this._callbacksMap.clear(),this._observer.disconnect()}},Mq=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i;class os{constructor(){this.NAME="base"}defaultMessage(n){return de.getFormatter(`validation-${this.NAME}`)(n)}defaultFormattedMessage(n){return de.getFormatter(`validation-${this.NAME}-formatted`)(n)}_isValueEmpty(n){return!Uu.required.validate(n,{})}validate(n,t){const i=Array.isArray(n)?n:[n];let o=!0;return i.length?i.every(r=>(o=this._validate(r,t),o)):o=this._validate(null,t),o}}class lR extends os{constructor(){super(),this.NAME="custom"}validate(n,t){if(t.ignoreEmptyValue&&this._isValueEmpty(n))return!0;const{validator:i}=t,o=i&&Be(i.option)&&i.option("dataGetter"),r=Be(o)&&o(),c={value:n,validator:i,rule:t};return r&&pe(c,r),t.validationCallback(c)}}const Uu={required:new class Aq extends os{constructor(){super(),this.NAME="required"}_validate(n,t){return!(!Ie(n)||!1===n)&&(n=String(n),(t.trim||!Ie(t.trim))&&(n=n.trim()),""!==n)}},numeric:new class Rq extends os{constructor(){super(),this.NAME="numeric"}_validate(n,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(n))||(t.useCultureSettings&&_t(n)?!isNaN(Lt.parse(n)):rn(n))}},range:new class kq extends os{constructor(){super(),this.NAME="range"}_validate(n,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(n))return!0;const i=Uu.numeric.validate(n,t),o=Ie(n)&&""!==n,r=i?parseFloat(n):o&&n.valueOf(),{min:c}=t,{max:v}=t;if(!i&&!tu(n)&&!o)return!1;if(Ie(c))return Ie(v)?r>=c&&r<=v:r>=c;if(Ie(v))return r<=v;throw vt.Error("E0101")}},stringLength:new class Fq extends os{constructor(){super(),this.NAME="stringLength"}_validate(n,t){return n=String(n??""),(t.trim||!Ie(t.trim))&&(n=n.trim()),!(!t.ignoreEmptyValue||!this._isValueEmpty(n))||Uu.range.validate(n.length,pe({},t))}},custom:new lR,async:new class Lq extends lR{constructor(){super(),this.NAME="async"}validate(n,t){if(Ie(t.reevaluate)||pe(t,{reevaluate:!0}),t.ignoreEmptyValue&&this._isValueEmpty(n))return!0;const{validator:i}=t,o=i&&Be(i.option)&&i.option("dataGetter"),r=Be(o)&&o(),c={value:n,validator:i,rule:t};r&&pe(c,r);const v=t.validationCallback(c);if(!ll(v))throw vt.Error("E0103");return this._getWrappedPromise(ii(v).promise())}_getWrappedPromise(n){const t=Ae();return n.then(i=>{t.resolve(i)},i=>{const o={isValid:!1};Ie(i)&&(_t(i)?o.message=i:dt(i)&&Ie(i.message)&&_t(i.message)&&(o.message=i.message)),t.resolve(o)}),t.promise()}},compare:new class Nq extends os{constructor(){super(),this.NAME="compare"}_validate(n,t){if(!t.comparisonTarget)throw vt.Error("E0102");if(t.ignoreEmptyValue&&this._isValueEmpty(n))return!0;pe(t,{reevaluate:!0});const i=t.comparisonTarget();switch(t.comparisonType||"=="){case"==":return n==i;case"!=":return n!=i;case"===":return n===i;case"!==":return n!==i;case">":return n>i;case">=":return n>=i;case"<":return n<i;case"<=":return n<=i}}},pattern:new class Hq extends os{constructor(){super(),this.NAME="pattern"}_validate(n,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(n))return!0;let{pattern:i}=t;return _t(i)&&(i=new RegExp(i)),i.test(n)}},email:new class Bq extends os{constructor(){super(),this.NAME="email"}_validate(n,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(n))||Uu.pattern.validate(n,pe({},t,{pattern:Mq}))}}},Vq=Tt.inherit({ctor(e,n){this.group=e,this.validators=[],this._isRemovable=n,this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new Fs(this)},validate(){const e={isValid:!0,brokenRules:[],validators:[],status:"valid",complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),Ee(this.validators,(n,t)=>{const i=t.validate();e.isValid=e.isValid&&i.isValid,i.brokenRules&&(e.brokenRules=e.brokenRules.concat(i.brokenRules)),e.validators.push(t),"pending"===i.status&&this._addPendingValidator(t),this._subscribeToChangeEvents(t)}),this._pendingValidators.length?e.status="pending":(e.status=e.isValid?"valid":"invalid",this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(e)),this._updateValidationInfo(e),pe({},this._validationInfo.result)},_subscribeToChangeEvents(e){e.on("validating",this._onValidatorStatusChanged),e.on("validated",this._onValidatorStatusChanged)},_unsubscribeFromChangeEvents(e){e.off("validating",this._onValidatorStatusChanged),e.off("validated",this._onValidatorStatusChanged)},_unsubscribeFromAllChangeEvents(){Ee(this.validators,(e,n)=>{this._unsubscribeFromChangeEvents(n)})},_updateValidationInfo(e){this._validationInfo.result=e,"pending"===e.status&&(this._validationInfo.deferred||(this._validationInfo.deferred=Ae(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()))},_addPendingValidator(e){vr(this._pendingValidators,t=>t===e)[0]||this._pendingValidators.push(e)},_removePendingValidator(e){const n=this._pendingValidators.indexOf(e);n>=0&&this._pendingValidators.splice(n,1)},_orderBrokenRules(e){let n=[];return Ee(this.validators,(t,i)=>{const o=vr(e,r=>r.validator===i);o.length&&(n=n.concat(o))}),n},_updateBrokenRules(e){if(!this._validationInfo.result)return;let{brokenRules:n}=this._validationInfo.result;const t=vr(n,i=>i.validator!==e.validator);e.brokenRules&&(n=t.concat(e.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(n)},_onValidatorStatusChanged(e){"pending"!==e.status?this._resolveIfComplete(e):this._addPendingValidator(e.validator)},_resolveIfComplete(e){if(this._removePendingValidator(e.validator),this._updateBrokenRules(e),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=0===this._validationInfo.result.brokenRules.length?"valid":"invalid",this._validationInfo.result.isValid="valid"===this._validationInfo.result.status;const n=pe({},this._validationInfo.result,{complete:null}),{deferred:t}=this._validationInfo;this._validationInfo.deferred=null,this._raiseValidatedEvent(n),t&&setTimeout(()=>{t.resolve(n)})}},_raiseValidatedEvent(e){this._eventsStrategy.fireEvent("validated",[e])},_resetValidationInfo(){this._validationInfo={result:null,deferred:null}},_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)},removeRegisteredValidator(e){const n=this.validators.indexOf(e);n>-1&&(this.validators.splice(n,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:e}))},registerValidator(e){this.validators.includes(e)||(this.validators.push(e),this._synchronizeValidationInfo())},reset(){Ee(this.validators,(e,n)=>{n.reset()}),this._pendingValidators=[],this._resetValidationInfo()},on(e,n){return this._eventsStrategy.on(e,n),this},off(e,n){return this._eventsStrategy.off(e,n),this}}),qs={groups:[],getGroupConfig(e){const n=vr(this.groups,t=>t.group===e);if(n.length)return n[0]},findGroup(e,n){var t;const o=(null===(t=e.data())||void 0===t||null===(t=t.dxComponents)||void 0===t?void 0:t.includes("dxValidationGroup"))&&e.dxValidationGroup("instance");if(o)return o;const r=e.parents(".dx-validationgroup").first();return r.length?r.dxValidationGroup("instance"):n},initGroups(){this.groups=[],this.addGroup(void 0,!1)},addGroup(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=this.getGroupConfig(e);return t||(t=new Vq(e,n),this.groups.push(t)),t},removeGroup(e){const n=this.getGroupConfig(e),t=this.groups.indexOf(n);return t>-1&&this.groups.splice(t,1),n},_setDefaultMessage(e){const{rule:n,validator:t,name:i}=e;Ie(n.message)||(n.message=t.defaultFormattedMessage&&Ie(i)?t.defaultFormattedMessage(i):t.defaultMessage())},_addBrokenRule(e){const{result:n,rule:t}=e;n.brokenRule||(n.brokenRule=t),n.brokenRules||(n.brokenRules=[]),n.brokenRules.push(t)},validate(e,n,t){var i;let o={name:t,value:e,brokenRule:null,brokenRules:null,isValid:!0,validationRules:n,pendingRules:null,status:"valid",complete:null};const r=null==n||null===(i=n[0])||void 0===i?void 0:i.validator,c=[];return Ee(n||[],(v,S)=>{const T=Uu[S.type];let F;if(!T)throw vt.Error("E0100");return Ie(S.isValid)&&S.value===e&&!S.reevaluate?!!S.isValid||(o.isValid=!1,this._addBrokenRule({result:o,rule:S}),!1):(S.value=e,"async"===S.type?(c.push({rule:S,ruleValidator:T}),!0):(F=T.validate(e,S),S.isValid=F,F||(o.isValid=!1,this._setDefaultMessage({rule:S,validator:T,name:t}),this._addBrokenRule({result:o,rule:S})),!!S.isValid&&void 0))}),o.isValid&&!o.brokenRules&&c.length&&(o=this._validateAsyncRules({value:e,items:c,result:o,name:t})),this._synchronizeGroupValidationInfo(r,o),o.status=o.pendingRules?"pending":o.isValid?"valid":"invalid",o},_synchronizeGroupValidationInfo(e,n){if(!e)return;const t=qs.getGroupConfig(e._validationGroup);t._updateBrokenRules.call(t,{validator:e,brokenRules:n.brokenRules??[]})},_validateAsyncRules(e){let{result:n,value:t,items:i,name:o}=e;const r=[];return Ee(i,(c,v)=>{const S=v.ruleValidator.validate(t,v.rule);if(ll(S)){n.pendingRules||(n.pendingRules=[]),n.pendingRules.push(v.rule);const T=S.then(F=>{const N=this._getPatchedRuleResult(F);return this._updateRuleConfig({rule:v.rule,ruleResult:N,validator:v.ruleValidator,name:o}),N});r.push(T)}else this._updateRuleConfig({rule:v.rule,ruleResult:this._getPatchedRuleResult(S),validator:v.ruleValidator,name:o})}),r.length&&(n.complete=Promise.all(r).then(c=>this._getAsyncRulesResult({result:n,values:c}))),n},_updateRuleConfig(e){let{rule:n,ruleResult:t,validator:i,name:o}=e;n.isValid=t.isValid,t.isValid||(Ie(t.message)&&_t(t.message)&&t.message.length?n.message=t.message:this._setDefaultMessage({rule:n,validator:i,name:o}))},_getPatchedRuleResult(e){let n;return dt(e)?(n=pe({},e),Ie(n.isValid)||(n.isValid=!0)):n={isValid:!Nv(e)||e},n},_getAsyncRulesResult(e){let{values:n,result:t}=e;return Ee(n,(i,o)=>{!1===o.isValid&&(t.isValid=o.isValid,this._addBrokenRule({result:t,rule:t.pendingRules[i]}))}),t.pendingRules=null,t.complete=null,t.status=t.isValid?"valid":"invalid",t},registerValidatorInGroup(e,n){const t=qs.addGroup(e);t.registerValidator.call(t,n)},removeRegisteredValidator(e,n){const t=qs.getGroupConfig(e);t&&(t.removeRegisteredValidator.call(t,n),0===t.validators.length&&t._isRemovable&&this.removeGroup(e))},initValidationOptions(e){const n={};return e&&["isValid","validationStatus","validationError","validationErrors"].forEach(i=>{i in e&&pe(n,this.synchronizeValidationOptions({name:i,value:e[i]},e))}),n},synchronizeValidationOptions(e,n){let{name:t,value:i}=e;switch(t){case"validationStatus":{const o="valid"===i||"pending"===i;return n.isValid!==o?{isValid:o}:{}}case"isValid":{const{validationStatus:o}=n;let r=o;return i&&"invalid"===o?r="valid":!i&&"invalid"!==o&&(r="invalid"),r!==o?{validationStatus:r}:{}}case"validationErrors":{const o=i&&i.length?i[0]:null;return n.validationError!==o?{validationError:o}:{}}case"validationError":{const{validationErrors:o}=n;if(!i&&o)return{validationErrors:null};if(i&&!o)return{validationErrors:[i]};if(i&&o&&i!==o[0])return o[0]=i,{validationErrors:o.slice()}}}return{}},validateGroup(e){const n=qs.getGroupConfig(e);if(!n)throw vt.Error("E0110");return n.validate()},resetGroup(e){const n=qs.getGroupConfig(e);if(!n)throw vt.Error("E0110");return n.reset()}};qs.initGroups();const Rl=qs;var $u=Array.isArray;function pf(e){var n=typeof e;return"string"===n||"number"===n}function ft(e){return null==e}function Wu(e){return null===e||!1===e||!0===e||void 0===e}function Bt(e){return"function"==typeof e}function Gu(e){return"string"==typeof e}function li(e){return null===e}function jq(e){return void 0===e}function rs(e,n){var t={};if(e)for(var i in e)t[i]=e[i];if(n)for(var o in n)t[o]=n[o];return t}function GC(e){return!li(e)&&"object"==typeof e}var In={};function KC(e){return e.substr(2).toLowerCase()}function cR(e,n){e.appendChild(n)}function qC(e,n,t){li(t)?cR(e,n):e.insertBefore(n,t)}function uR(e,n){e.removeChild(n)}function dR(e){for(var n=0;n<e.length;n++)e[n]()}function Gq(e,n,t){var i=e.children;return 4&t?i.$LI:8192&t?2===e.childFlags?i:i[n?0:i.length-1]:i}function to(e,n){for(var t;e;){if(2033&(t=e.flags))return e.dom;e=Gq(e,n,t)}return null}function Ku(e,n){do{var t=e.flags;if(2033&t)return void uR(n,e.dom);var i=e.children;if(4&t&&(e=i.$LI),8&t&&(e=i),8192&t){if(2!==e.childFlags){for(var o=0,r=i.length;o<r;++o)Ku(i[o],n);return}e=i}}while(e)}function hR(e,n,t){do{var i=e.flags;if(2033&i)return void qC(n,e.dom,t);var o=e.children;if(4&i&&(e=o.$LI),8&i&&(e=o),8192&i){if(2!==e.childFlags){for(var r=0,c=o.length;r<c;++r)hR(o[r],n,t);return}e=o}}while(e)}function pR(e,n,t){return e.constructor.getDerivedStateFromProps?rs(t,e.constructor.getDerivedStateFromProps(n,t)):t}var qu={v:!1},kl={componentComparator:null,createVNode:null,renderComplete:null};function Zu(e,n){e.textContent=n}function fR(e,n){return GC(e)&&e.event===n.event&&e.data===n.data}function gR(e,n){for(var t in n)jq(e[t])&&(e[t]=n[t]);return e}function ZC(e,n){return!!Bt(e)&&(e(n),!0)}var Xu="$";function ff(e,n,t,i,o,r,c,v){this.childFlags=e,this.children=n,this.className=t,this.dom=null,this.flags=i,this.key=void 0===o?null:o,this.props=void 0===r?null:r,this.ref=void 0===c?null:c,this.type=v}function Hn(e,n,t,i,o,r,c,v){var S=void 0===o?1:o,T=new ff(S,i,t,e,c,r,v,n);return kl.createVNode&&kl.createVNode(T),0===S&&_R(T,T.children),T}function no(e,n,t,i,o){e=function Zq(e,n){return 12&e?e:n.prototype&&n.prototype.render?4:n.render?32776:8}(e,n);var r=new ff(1,null,null,e,i,function qq(e,n,t){var i=(32768&e?n.render:n).defaultProps;return ft(i)?t:ft(t)?rs(i,null):gR(t,i)}(e,n,t),function Kq(e,n,t){if(4&e)return t;var i=(32768&e?n.render:n).defaultHooks;return ft(i)?t:ft(t)?i:gR(t,i)}(e,n,o),n);return kl.createVNode&&kl.createVNode(r),r}function Yu(e,n){return new ff(1,ft(e)||!0===e||!1===e?"":e,null,16,n,null,null,null)}function Fl(e,n,t){var i=Hn(8192,8192,null,e,n,null,t,null);switch(i.childFlags){case 1:i.children=gf(),i.childFlags=2;break;case 16:i.children=[Yu(e)],i.childFlags=4}return i}function Ir(e){var n=e.props;if(n){var t=e.flags;481&t&&(void 0!==n.children&&ft(e.children)&&_R(e,n.children),void 0!==n.className&&(ft(e.className)&&(e.className=n.className||null),n.className=void 0)),void 0!==n.key&&(e.key=n.key,n.key=void 0),void 0!==n.ref&&(e.ref=8&t?rs(e.ref,n.ref):n.ref,n.ref=void 0)}return e}function En(e){var n=-16385&e.flags,t=e.props;if(14&n&&!li(t)){var i=t;for(var o in t={},i)t[o]=i[o]}return 8192&n?function Xq(e){var n=e.children,t=e.childFlags;return Fl(2===t?En(n):n.map(En),t,e.key)}(e):new ff(e.childFlags,e.children,e.className,n,e.key,t,e.ref,e.type)}function gf(){return Yu("",null)}function mR(e,n,t,i){for(var o=e.length;t<o;t++){var r=e[t];if(!Wu(r)){var c=i+Xu+t;if($u(r))mR(r,n,0,c);else{if(pf(r))r=Yu(r,c);else{var v=r.key,S=Gu(v)&&v[0]===Xu;(81920&r.flags||S)&&(r=En(r)),r.flags|=65536,S?v.substring(0,i.length)!==i&&(r.key=i+v):r.key=li(v)?c:i+v}n.push(r)}}}}function _R(e,n){var t,i=1;if(Wu(n))t=n;else if(pf(n))i=16,t=n;else if($u(n)){for(var o=n.length,r=0;r<o;++r){var c=n[r];if(Wu(c)||$u(c)){t=t||n.slice(0,r),mR(n,t,r,"");break}if(pf(c))(t=t||n.slice(0,r)).push(Yu(c,Xu+r));else{var v=c.key,S=(81920&c.flags)>0,T=li(v),F=Gu(v)&&v[0]===Xu;S||T||F?(t=t||n.slice(0,r),(S||F)&&(c=En(c)),(T||F)&&(c.key=Xu+r),t.push(c)):t&&t.push(c),c.flags|=65536}}i=0===(t=t||n).length?1:8}else(t=n).flags|=65536,81920&n.flags&&(t=En(n)),i=2;return e.children=t,e.childFlags=i,e}function Qu(e){return Wu(e)||pf(e)?Yu(e,null):$u(e)?Fl(e,0,null):16384&e.flags?En(e):e}var Zs="http://www.w3.org/1999/xlink",XC="http://www.w3.org/XML/1998/namespace",vR={"xlink:actuate":Zs,"xlink:arcrole":Zs,"xlink:href":Zs,"xlink:role":Zs,"xlink:show":Zs,"xlink:title":Zs,"xlink:type":Zs,"xml:base":XC,"xml:lang":XC,"xml:space":XC};function mf(e){return{onClick:e,onDblClick:e,onFocusIn:e,onFocusOut:e,onKeyDown:e,onKeyPress:e,onKeyUp:e,onMouseDown:e,onMouseMove:e,onMouseUp:e,onTouchEnd:e,onTouchMove:e,onTouchStart:e}}var yR=mf(0),YC=mf(null),CR=mf(!0);function xR(e,n){var t=n.$EV;return t||(t=n.$EV=mf(null)),t[e]||1==++yR[e]&&(YC[e]=function rZ(e){var n="onClick"===e||"onDblClick"===e?function iZ(e){return function(n){0===n.button?bR(n,!0,e,SR(n)):n.stopPropagation()}}(e):function oZ(e){return function(n){bR(n,!1,e,SR(n))}}(e);return document.addEventListener(KC(e),n),n}(e)),t}function OR(e,n){var t=n.$EV;t&&t[e]&&(0==--yR[e]&&(document.removeEventListener(KC(e),YC[e]),YC[e]=null),t[e]=null)}function bR(e,n,t,i){var o=function Jq(e){return Bt(e.composedPath)?e.composedPath()[0]:e.target}(e);do{if(n&&o.disabled)return;var r=o.$EV;if(r){var c=r[t];if(c&&(i.dom=o,c.event?c.event(c.data,e):c(e),e.cancelBubble))return}o=o.parentNode}while(!li(o))}function eZ(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function tZ(){return this.defaultPrevented}function nZ(){return this.cancelBubble}function SR(e){var n={dom:document};return e.isDefaultPrevented=tZ,e.isPropagationStopped=nZ,e.stopPropagation=eZ,Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return n.dom}}),n}function DR(e,n,t){if(e[n]){var i=e[n];i.event?i.event(i.data,t):i(t)}else{var o=n.toLowerCase();e[o]&&e[o](t)}}function Ju(e,n){var t=function(i){var o=this.$V;if(o){var r=o.props||In,c=o.dom;if(Gu(e))DR(r,e,i);else for(var v=0;v<e.length;++v)DR(r,e[v],i);if(Bt(n)){var S=this.$V;n(S.props||In,c,!1,S)}}};return Object.defineProperty(t,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),t}function Xs(e,n,t){var i="$"+n,o=e[i];if(o){if(o[1].wrapped)return;e.removeEventListener(o[0],o[1]),e[i]=null}Bt(t)&&(e.addEventListener(n,t),e[i]=[n,t])}function QC(e){return"checkbox"===e||"radio"===e}var aZ=Ju("onInput",JC),lZ=Ju(["onClick","onChange"],JC);function IR(e){e.stopPropagation()}function JC(e,n){var t=e.type,i=e.value,o=e.checked,r=e.multiple,c=e.defaultValue,v=!ft(i);t&&t!==n.type&&n.setAttribute("type",t),!ft(r)&&r!==n.multiple&&(n.multiple=r),!ft(c)&&!v&&(n.defaultValue=c+""),QC(t)?(v&&(n.value=i),ft(o)||(n.checked=o)):v&&n.value!==i?(n.defaultValue=i,n.value=i):ft(o)||(n.checked=o)}function ed(e,n){if("option"===e.type)!function uZ(e,n){var t=e.props||In,i=e.dom;i.value=t.value,t.value===n||$u(n)&&-1!==n.indexOf(t.value)?i.selected=!0:(!ft(n)||!ft(t.selected))&&(i.selected=t.selected||!1)}(e,n);else{var t=e.children,i=e.flags;if(4&i)ed(t.$LI,n);else if(8&i)ed(t,n);else if(2===e.childFlags)ed(t,n);else if(12&e.childFlags)for(var o=0,r=t.length;o<r;++o)ed(t[o],n)}}IR.wrapped=!0;var dZ=Ju("onChange",ER);function ER(e,n,t,i){var o=!!e.multiple;!ft(e.multiple)&&o!==n.multiple&&(n.multiple=o);var r=e.selectedIndex;if(-1===r&&(n.selectedIndex=-1),1!==i.childFlags){var v=e.value;(function zq(e){return"number"==typeof e})(r)&&r>-1&&n.options[r]&&(v=n.options[r].value),t&&ft(v)&&(v=e.defaultValue),ed(i,v)}}var pZ=Ju("onInput",wR),fZ=Ju("onChange");function wR(e,n,t){var i=e.value,o=n.value;if(ft(i)){if(t){var r=e.defaultValue;!ft(r)&&r!==o&&(n.defaultValue=r,n.value=r)}}else o!==i&&(n.defaultValue=i,n.value=i)}function PR(e,n,t,i,o,r){64&e?JC(i,t):256&e?ER(i,t,o,n):128&e&&wR(i,t,o),r&&(t.$V=n)}function TR(e){return e.type&&QC(e.type)?!ft(e.checked):!ft(e.value)}function _f(e){e&&!ZC(e,null)&&e.current&&(e.current=null)}function td(e,n,t){e&&(Bt(e)||void 0!==e.current)&&t.push(function(){!ZC(e,n)&&void 0!==e.current&&(e.current=n)})}function Oo(e,n){Er(e),Ku(e,n)}function Er(e){var i,n=e.flags,t=e.children;if(481&n){var o=e.props;_f(i=e.ref);var r=e.childFlags;if(!li(o))for(var c=Object.keys(o),v=0,S=c.length;v<S;v++){var T=c[v];CR[T]&&OR(T,e.dom)}12&r?nd(t):2===r&&Er(t)}else t&&(4&n?(Bt(t.componentWillUnmount)&&t.componentWillUnmount(),_f(e.ref),t.$UN=!0,Er(t.$LI)):8&n?(!ft(i=e.ref)&&Bt(i.onComponentWillUnmount)&&i.onComponentWillUnmount(to(e,!0),e.props||In),Er(t)):1024&n?Oo(t,e.ref):8192&n&&12&e.childFlags&&nd(t))}function nd(e){for(var n=0,t=e.length;n<t;++n)Er(e[n])}function vf(e){e.textContent=""}function yf(e,n,t){nd(t),8192&n.flags?Ku(n,e):vf(e)}function ex(e,n,t,i,o,r,c){switch(e){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":i.autofocus=!!t;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e]=!!t;break;case"defaultChecked":case"value":case"volume":if(r&&"value"===e)break;var v=ft(t)?"":t;i[e]!==v&&(i[e]=v);break;case"style":!function yZ(e,n,t){if(ft(n))t.removeAttribute("style");else{var o,r,i=t.style;if(Gu(n))i.cssText=n;else if(ft(e)||Gu(e))for(o in n)i.setProperty(o,r=n[o]);else{for(o in n)(r=n[o])!==e[o]&&i.setProperty(o,r);for(o in e)ft(n[o])&&i.removeProperty(o)}}}(n,t,i);break;case"dangerouslySetInnerHTML":!function CZ(e,n,t,i){var r=n&&n.__html||"";(e&&e.__html||"")!==r&&!ft(r)&&!function sZ(e,n){var t=document.createElement("i");return t.innerHTML=n,t.innerHTML===e.innerHTML}(i,r)&&(li(t)||(12&t.childFlags?nd(t.children):2===t.childFlags&&Er(t.children),t.children=null,t.childFlags=1),i.innerHTML=r)}(n,t,c,i);break;default:CR[e]?function Qq(e,n,t,i){if(Bt(t))xR(e,i)[e]=t;else if(GC(t)){if(fR(n,t))return;xR(e,i)[e]=t}else OR(e,i)}(e,n,t,i):111===e.charCodeAt(0)&&110===e.charCodeAt(1)?function vZ(e,n,t,i){if(GC(t)){if(fR(n,t))return;t=function _Z(e){var n=e.event;return function(t){n(e.data,t)}}(t)}Xs(i,KC(e),t)}(e,n,t,i):ft(t)?i.removeAttribute(e):o&&vR[e]?i.setAttributeNS(vR[e],e,t):i.setAttribute(e,t)}}function MR(e,n,t,i,o){var r=!1,c=(448&n)>0;for(var v in c&&(r=TR(t))&&function mZ(e,n,t){64&e?function cZ(e,n){QC(n.type)?(Xs(e,"change",lZ),Xs(e,"click",IR)):Xs(e,"input",aZ)}(n,t):256&e?function hZ(e){Xs(e,"change",dZ)}(n):128&e&&function gZ(e,n){Xs(e,"input",pZ),n.onChange&&Xs(e,"change",fZ)}(n,t)}(n,i,t),t)ex(v,null,t[v],i,o,r,null);c&&PR(n,e,i,t,!0,r)}function AR(e,n,t){var i=Qu(e.render(n,e.state,t)),o=t;return Bt(e.getChildContext)&&(o=rs(t,e.getChildContext())),e.$CX=o,i}function RR(e,n,t,i,o,r){var c=new n(t,i),v=c.$N=!(!n.getDerivedStateFromProps&&!c.getSnapshotBeforeUpdate);if(c.$SVG=o,c.$L=r,e.children=c,c.$BS=!1,c.context=i,c.props===In&&(c.props=t),v)c.state=pR(c,t,c.state);else if(Bt(c.componentWillMount)){c.$BR=!0,c.componentWillMount();var S=c.$PS;if(!li(S)){var T=c.state;if(li(T))c.state=S;else for(var F in S)T[F]=S[F];c.$PS=null}c.$BR=!1}return c.$LI=AR(c,t,i),c}function tx(e,n){var t=e.props||In;return 32768&e.flags?e.type.render(t,e.ref,n):e.type(t,n)}function wn(e,n,t,i,o,r){var c=e.flags|=16384;481&c?FR(e,n,t,i,o,r):4&c?function bZ(e,n,t,i,o,r){var c=RR(e,e.type,e.props||In,t,i,r);wn(c.$LI,n,c.$CX,i,o,r),LR(e.ref,c,r)}(e,n,t,i,o,r):8&c?(function SZ(e,n,t,i,o,r){wn(e.children=Qu(tx(e,t)),n,t,i,o,r)}(e,n,t,i,o,r),NR(e,r)):512&c||16&c?kR(e,n,o):8192&c?function OZ(e,n,t,i,o,r){var c=e.children,v=e.childFlags;12&v&&0===c.length&&(v=e.childFlags=2,c=e.children=gf()),2===v?wn(c,t,n,i,o,r):Ys(c,t,n,i,o,r)}(e,t,n,i,o,r):1024&c&&function xZ(e,n,t,i,o){wn(e.children,e.ref,n,!1,null,o);var r=gf();kR(r,t,i),e.dom=r.dom}(e,t,n,o,r)}function kR(e,n,t){var i=e.dom=document.createTextNode(e.children);li(n)||qC(n,i,t)}function FR(e,n,t,i,o,r){var c=e.flags,v=e.props,S=e.className,T=e.childFlags,F=e.dom=function $q(e,n){return n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,i=i||(32&c)>0),N=e.children;if(!ft(S)&&""!==S&&(i?F.setAttribute("class",S):F.className=S),16===T)Zu(F,N);else if(1!==T){var B=i&&"foreignObject"!==e.type;2===T?(16384&N.flags&&(e.children=N=En(N)),wn(N,F,t,B,null,r)):(8===T||4===T)&&Ys(N,F,t,B,null,r)}li(n)||qC(n,F,o),li(v)||MR(e,c,v,F,i),td(e.ref,F,r)}function Ys(e,n,t,i,o,r){for(var c=0;c<e.length;++c){var v=e[c];16384&v.flags&&(e[c]=v=En(v)),wn(v,n,t,i,o,r)}}function LR(e,n,t){td(e,n,t),Bt(n.componentDidMount)&&t.push(function DZ(e){return function(){e.componentDidMount()}}(n))}function NR(e,n){var t=e.ref;ft(t)||(ZC(t.onComponentWillMount,e.props||In),Bt(t.onComponentDidMount)&&n.push(function IZ(e,n){return function(){e.onComponentDidMount(to(n,!0),n.props||In)}}(t,e)))}function wr(e,n,t,i,o,r,c){var v=n.flags|=16384;e.flags!==v||e.type!==n.type||e.key!==n.key||2048&v?16384&e.flags?function EZ(e,n,t,i,o,r){Er(e),n.flags&e.flags&2033?(wn(n,null,i,o,null,r),function Wq(e,n,t){e.replaceChild(n,t)}(t,n.dom,e.dom)):(wn(n,t,i,o,to(e,!0),r),Ku(e,t))}(e,n,t,i,o,c):wn(n,t,i,o,r,c):481&v?function AZ(e,n,t,i,o,r){var N,c=n.dom=e.dom,v=e.props,S=n.props,T=!1,F=!1;if(i=i||(32&o)>0,v!==S){var B=v||In;if((N=S||In)!==In)for(var X in(T=(448&o)>0)&&(F=TR(N)),N){var ne=B[X],le=N[X];ne!==le&&ex(X,ne,le,c,i,F,e)}if(B!==In)for(var he in B)ft(N[he])&&!ft(B[he])&&ex(he,B[he],null,c,i,F,e)}var Oe=n.children,_e=n.className;e.className!==_e&&(ft(_e)?c.removeAttribute("class"):i?c.setAttribute("class",_e):c.className=_e),4096&o?function PZ(e,n){e.textContent!==n&&(e.textContent=n)}(c,Oe):nx(e.childFlags,n.childFlags,e.children,Oe,c,t,i&&"foreignObject"!==n.type,null,e,r),T&&PR(o,n,c,N,!1,F);var ke=n.ref,Ne=e.ref;Ne!==ke&&(_f(Ne),td(ke,c,r))}(e,n,i,o,v,c):4&v?function FZ(e,n,t,i,o,r,c){var v=n.children=e.children;if(!li(v)){v.$L=c;var S=n.props||In,T=n.ref,F=e.ref,N=v.state;if(!v.$N){if(Bt(v.componentWillReceiveProps)){if(v.$BR=!0,v.componentWillReceiveProps(S,i),v.$UN)return;v.$BR=!1}li(v.$PS)||(N=rs(N,v.$PS),v.$PS=null)}HR(v,N,S,t,i,o,!1,r,c),F!==T&&(_f(F),td(T,v,c))}}(e,n,t,i,o,r,c):8&v?function LZ(e,n,t,i,o,r,c){var v=!0,S=n.props||In,T=n.ref,F=e.props,N=!ft(T),B=e.children;if(N&&Bt(T.onComponentShouldUpdate)&&(v=T.onComponentShouldUpdate(F,S)),!1!==v){N&&Bt(T.onComponentWillUpdate)&&T.onComponentWillUpdate(F,S);var X=Qu(tx(n,i));wr(B,X,t,i,o,r,c),n.children=X,N&&Bt(T.onComponentDidUpdate)&&T.onComponentDidUpdate(F,S)}else n.children=B}(e,n,t,i,o,r,c):16&v?function NZ(e,n){var t=n.children,i=n.dom=e.dom;t!==e.children&&(i.nodeValue=t)}(e,n):512&v?n.dom=e.dom:8192&v?function TZ(e,n,t,i,o,r){var c=e.children,v=n.children,S=e.childFlags,T=n.childFlags,F=null;12&T&&0===v.length&&(T=n.childFlags=2,v=n.children=gf());var N=0!=(2&T);if(12&S){var B=c.length;(8&S&&8&T||N||!N&&v.length>B)&&(F=to(c[B-1],!1).nextSibling)}nx(S,T,c,v,t,i,o,F,e,r)}(e,n,t,i,o,c):function MZ(e,n,t,i){var o=e.ref,r=n.ref,c=n.children;if(nx(e.childFlags,n.childFlags,e.children,c,o,t,!1,null,e,i),n.dom=e.dom,o!==r&&!Wu(c)){var v=c.dom;uR(o,v),cR(r,v)}}(e,n,i,c)}function nx(e,n,t,i,o,r,c,v,S,T){switch(e){case 2:switch(n){case 2:wr(t,i,o,r,c,v,T);break;case 1:Oo(t,o);break;case 16:Er(t),Zu(o,i);break;default:!function RZ(e,n,t,i,o,r){Er(e),Ys(n,t,i,o,to(e,!0),r),Ku(e,t)}(t,i,o,r,c,T)}break;case 1:switch(n){case 2:wn(i,o,r,c,v,T);break;case 1:break;case 16:Zu(o,i);break;default:Ys(i,o,r,c,v,T)}break;case 16:switch(n){case 16:!function wZ(e,n,t){e!==n&&(""!==e?t.firstChild.nodeValue=n:Zu(t,n))}(t,i,o);break;case 2:vf(o),wn(i,o,r,c,v,T);break;case 1:vf(o);break;default:vf(o),Ys(i,o,r,c,v,T)}break;default:switch(n){case 16:nd(t),Zu(o,i);break;case 2:yf(o,S,t),wn(i,o,r,c,v,T);break;case 1:yf(o,S,t);break;default:var F=0|t.length,N=0|i.length;0===F?N>0&&Ys(i,o,r,c,v,T):0===N?yf(o,S,t):8===n&&8===e?function BZ(e,n,t,i,o,r,c,v,S,T){var le,he,F=r-1,N=c-1,B=0,X=e[B],ne=n[B];e:{for(;X.key===ne.key;){if(16384&ne.flags&&(n[B]=ne=En(ne)),wr(X,ne,t,i,o,v,T),e[B]=ne,++B>F||B>N)break e;X=e[B],ne=n[B]}for(X=e[F],ne=n[N];X.key===ne.key;){if(16384&ne.flags&&(n[N]=ne=En(ne)),wr(X,ne,t,i,o,v,T),e[F]=ne,N--,B>--F||B>N)break e;X=e[F],ne=n[N]}}if(B>F){if(B<=N)for(he=(le=N+1)<c?to(n[le],!0):v;B<=N;)16384&(ne=n[B]).flags&&(n[B]=ne=En(ne)),++B,wn(ne,t,i,o,he,T)}else if(B>N)for(;B<=F;)Oo(e[B++],t);else!function VZ(e,n,t,i,o,r,c,v,S,T,F,N,B){var X,ne,le,he=0,Oe=v,_e=v,ke=r-v+1,Ne=c-v+1,We=new Int32Array(Ne+1),Ot=ke===i,Cn=!1,At=0,Gn=0;if(o<4||(ke|Ne)<32)for(he=Oe;he<=r;++he)if(X=e[he],Gn<Ne){for(v=_e;v<=c;v++)if(X.key===(ne=n[v]).key){if(We[v-_e]=he+1,Ot)for(Ot=!1;Oe<he;)Oo(e[Oe++],S);At>v?Cn=!0:At=v,16384&ne.flags&&(n[v]=ne=En(ne)),wr(X,ne,S,t,T,F,B),++Gn;break}!Ot&&v>c&&Oo(X,S)}else Ot||Oo(X,S);else{var Oi={};for(he=_e;he<=c;++he)Oi[n[he].key]=he;for(he=Oe;he<=r;++he)if(X=e[he],Gn<Ne)if(void 0!==(v=Oi[X.key])){if(Ot)for(Ot=!1;he>Oe;)Oo(e[Oe++],S);We[v-_e]=he+1,At>v?Cn=!0:At=v,16384&(ne=n[v]).flags&&(n[v]=ne=En(ne)),wr(X,ne,S,t,T,F,B),++Gn}else Ot||Oo(X,S);else Ot||Oo(X,S)}if(Ot)yf(S,N,e),Ys(n,S,t,T,F,B);else if(Cn){var ro=function zZ(e){var n=0,t=0,i=0,o=0,r=0,c=0,v=0,S=e.length;for(S>BR&&(BR=S,Pr=new Int32Array(S),Cf=new Int32Array(S));t<S;++t)if(0!==(n=e[t])){if(e[i=Pr[o]]<n){Cf[t]=i,Pr[++o]=t;continue}for(r=0,c=o;r<c;)e[Pr[v=r+c>>1]]<n?r=v+1:c=v;n<e[Pr[r]]&&(r>0&&(Cf[t]=Pr[r-1]),Pr[r]=t)}r=o+1;var T=new Int32Array(r);for(c=Pr[r-1];r-- >0;)T[r]=c,c=Cf[c],Pr[r]=0;return T}(We);for(v=ro.length-1,he=Ne-1;he>=0;he--)0===We[he]?(16384&(ne=n[At=he+_e]).flags&&(n[At]=ne=En(ne)),wn(ne,S,t,T,(le=At+1)<o?to(n[le],!0):F,B)):v<0||he!==ro[v]?hR(ne=n[At=he+_e],S,(le=At+1)<o?to(n[le],!0):F):v--}else if(Gn!==Ne)for(he=Ne-1;he>=0;he--)0===We[he]&&(16384&(ne=n[At=he+_e]).flags&&(n[At]=ne=En(ne)),wn(ne,S,t,T,(le=At+1)<o?to(n[le],!0):F,B))}(e,n,i,r,c,F,N,B,t,o,v,S,T)}(t,i,o,r,c,F,N,v,S,T):function HZ(e,n,t,i,o,r,c,v,S){for(var N,B,T=r>c?c:r,F=0;F<T;++F)B=e[F],16384&(N=n[F]).flags&&(N=n[F]=En(N)),wr(B,N,t,i,o,v,S),e[F]=N;if(r<c)for(F=T;F<c;++F)16384&(N=n[F]).flags&&(N=n[F]=En(N)),wn(N,t,i,o,v,S);else if(r>c)for(F=T;F<r;++F)Oo(e[F],t)}(t,i,o,r,c,F,N,v,T)}}}function HR(e,n,t,i,o,r,c,v,S){var T=e.state,F=e.props,N=!!e.$N,B=Bt(e.shouldComponentUpdate);if(N&&(n=pR(e,t,n!==T?rs(T,n):n)),c||!B||B&&e.shouldComponentUpdate(t,n,o)){!N&&Bt(e.componentWillUpdate)&&e.componentWillUpdate(t,n,o),e.props=t,e.state=n,e.context=o;var X=null,ne=AR(e,t,o);N&&Bt(e.getSnapshotBeforeUpdate)&&(X=e.getSnapshotBeforeUpdate(F,T)),wr(e.$LI,ne,i,e.$CX,r,v,S),e.$LI=ne,Bt(e.componentDidUpdate)&&function kZ(e,n,t,i,o){o.push(function(){e.componentDidUpdate(n,t,i)})}(e,F,T,X,S)}else e.props=t,e.state=n,e.context=o}var Pr,Cf,BR=0;function id(e,n,t,i){void 0===t&&(t=null),void 0===i&&(i=In),function UZ(e,n,t,i){var o=[],r=n.$V;qu.v=!0,ft(r)?ft(e)||(16384&e.flags&&(e=En(e)),wn(e,n,i,!1,null,o),n.$V=e,r=e):ft(e)?(Oo(r,n),n.$V=null):(16384&e.flags&&(e=En(e)),wr(r,e,n,i,!1,null,o),r=n.$V=e),dR(o),qu.v=!1,Bt(t)&&t(),Bt(kl.renderComplete)&&kl.renderComplete(r,n)}(e,n,t,i)}typeof document<"u"&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);var xf=[],$Z=typeof Promise<"u"?Promise.resolve().then.bind(Promise.resolve()):function(e){window.setTimeout(e,0)},ix=!1;function VR(e,n,t,i){var o=e.$PS;if(Bt(n)&&(n=n(o?rs(e.state,o):e.state,e.props,e.context)),ft(o))e.$PS=n;else for(var r in n)o[r]=n[r];if(e.$BR)Bt(t)&&e.$L.push(t.bind(e));else{if(!qu.v&&0===xf.length)return jR(e,i),void(Bt(t)&&t.call(e));if(-1===xf.indexOf(e)&&xf.push(e),i&&(e.$F=!0),ix||(ix=!0,$Z(zR)),Bt(t)){var c=e.$QU;c||(c=e.$QU=[]),c.push(t)}}}function WZ(e){for(var n=e.$QU,t=0;t<n.length;++t)n[t].call(e);e.$QU=null}function zR(){var e;for(ix=!1;e=xf.shift();)if(!e.$UN){var n=e.$F;e.$F=!1,jR(e,n),e.$QU&&WZ(e)}}function jR(e,n){if(n||!e.$BR){var t=e.$PS;e.$PS=null;var i=[];qu.v=!0,HR(e,rs(e.state,t),e.props,to(e.$LI,!0).parentNode,e.context,e.$SVG,n,null,i),dR(i),qu.v=!1}else e.state=e.$PS,e.$PS=null}var od=function(n,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=n||In,this.context=t||In};od.prototype.forceUpdate=function(n){this.$UN||VR(this,{},n,!0)},od.prototype.setState=function(n,t){this.$UN||this.$BS||VR(this,n,t,!1)},od.prototype.render=function(n,t,i){return null};const ss={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(0===this.lockCount){const e=this.callbacks;this.callbacks=[],e.forEach(n=>n())}}},ox=(e,n)=>{if(!(e instanceof Object&&n instanceof Object))return e===n;const i=Object.keys(e),o=Object.keys(n);return i.length===o.length&&!i.some(c=>e[c]!==n[c])};class Ll extends od{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(n,t){this._pendingContext=t??{}}shouldComponentUpdate(n,t){return!ox(this.props,n)||!ox(this.state,t)||!ox(this.context,this._pendingContext)}}class rx extends Ll{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){ss.lock()}componentWillUpdate(n,t,i){ss.lock()}componentDidMount(){ss.callbacks.push(()=>{this._effects=this.createEffects()}),ss.callEffects()}componentDidUpdate(){ss.callbacks.push(()=>this.updateEffects()),ss.callEffects()}destroyEffects(){this._effects.forEach(n=>n.dispose())}componentWillUnmount(){this.destroyEffects()}}class Of extends rx{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){const n=this.vDomElement,t=n.className.length?n.className.split(" "):[],i=t.filter(r=>n.dxClasses.previous.indexOf(r)<0),o=n.dxClasses.previous.filter(r=>t.indexOf(r)<0);i.forEach(r=>{const c=n.dxClasses.removed.indexOf(r);c>-1?n.dxClasses.removed.splice(c,1):n.dxClasses.added.includes(r)||n.dxClasses.added.push(r)}),o.forEach(r=>{const c=n.dxClasses.added.indexOf(r);c>-1?n.dxClasses.added.splice(c,1):n.dxClasses.removed.includes(r)||n.dxClasses.removed.push(r)})}componentDidMount(){const n=to(this.$LI,!0);this.vDomElement=n,super.componentDidMount(),n.dxClasses=n.dxClasses||{removed:[],added:[],previous:[]},n.dxClasses.previous=n?.className.length?n.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const n=this.vDomElement;null!==n&&(n.dxClasses.added.forEach(t=>n.classList.add(t)),n.dxClasses.removed.forEach(t=>n.classList.remove(t)),n.dxClasses.previous=n.className.length?n.className.split(" "):[])}shouldComponentUpdate(n,t){const i=super.shouldComponentUpdate(n,t);return i&&this.vDomUpdateClasses(),i}}let GZ=0;class _n{constructor(n,t){this.dependency=t,this.effect=n,this.destroy=n()}update(n){const t=this.dependency;n&&(this.dependency=n),(!n||n.some((i,o)=>t[o]!==i))&&(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const bf=()=>new _n(()=>{zR()},[]),qZ="a runtime error occured! Use Inferno in development environment to find the error.";function Nl(e){return null===e}function UR(e,n,t,i,o,r){const c=e.childFlags,v=e.children,S=e.props,T=e.flags;if(1!==c){if(2===c)Nl(t)?wn(v,n,i,o,null,r):t=(t=rd(v,n,t,i,o,r))?t.nextSibling:null;else if(16===c)Nl(t)?n.appendChild(document.createTextNode(v)):1!==n.childNodes.length||3!==t.nodeType?n.textContent=v:t.nodeValue!==v&&(t.nodeValue=v),t=null;else if(12&c){let F=!1;for(let N=0,B=v.length;N<B;++N){const X=v[N];Nl(t)||F&&(16&X.flags)>0?wn(X,n,i,o,t,r):t=(t=rd(X,n,t,i,o,r))?t.nextSibling:null,F=(16&X.flags)>0}}if(!(8192&T)){let F=null;for(;t;)F=t.nextSibling,n.removeChild(t),t=F}}else!Nl(n.firstChild)&&!function tX(e,n){return!!(n&&n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html&&function JZ(e,n){const t=document.createElement("i");return t.innerHTML=n,t.innerHTML===e.innerHTML}(e,n.dangerouslySetInnerHTML.__html))}(n,S)&&(n.textContent="",448&T&&(n.defaultValue=""))}function $R(e,n,t){if(3!==t.nodeType)n.replaceChild(e.dom=document.createTextNode(e.children),t);else{const i=e.children;t.nodeValue!==i&&(t.nodeValue=i),e.dom=t}return e.dom}function rd(e,n,t,i,o,r){const c=e.flags|=16384;return 14&c?function nX(e,n,t,i,o,r,c){const S=e.ref;let F;if(r){const N=RR(e,e.type,e.props||In,i,o,c);F=rd(N.$LI,n,t,N.$CX,o,c),LR(S,N,c)}else{const N=Qu(tx(e,i));F=rd(N,n,t,i,o,c),e.children=N,NR(e,c)}return F}(e,n,t,i,o,(4&c)>0,r):481&c?function iX(e,n,t,i,o,r){const c=e.props,v=e.className,S=e.flags,T=e.ref;return o=o||(32&S)>0,1!==t.nodeType?(FR(e,null,i,o,null,r),n.replaceChild(e.dom,t)):(e.dom=t,UR(e,t,t.firstChild,i,o,r),Nl(c)||MR(e,S,c,t,o),function ZZ(e){return null==e}(v)?""!==t.className&&t.removeAttribute("class"):o?t.setAttribute("class",v):t.className=v,td(T,t,r)),e.dom}(e,n,t,i,o,r):16&c?$R(e,n,t):512&c?e.dom=t:8192&c?function oX(e,n,t,i,o,r){const c=e.children;return 2===e.childFlags?($R(c,n,t),c.dom):(UR(e,n,t,i,o,r),function eX(e){let n,t;for(;e;){if(n=e.flags,2033&n)return e.dom;t=e.children,e=8192&n?2===e.childFlags?t:t[t.length-1]:4&n?t.$LI:t}return null}(c[c.length-1]))}(e,n,t,i,o,r):(function QZ(e){throw e||(e=qZ),new Error(`Inferno Error: ${e}`)}(),null)}function WR(e){return null==e}function GR(e){return void 0===e}var aX={onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function Sf(e,n,t){var o,T,i=arguments,r=null,c=null,v=null,S=0,F=arguments.length-2;if(1===F)o=t;else if(F>1)for(o=[];F-- >0;)o[F]=i[F+2];if(!function sX(e){return"string"==typeof e}(e)){if(S=2,GR(o)||(n||(n={}),n.children=o),!WR(n))for(var B in T={},n)"key"===B?c=n.key:"ref"===B?r=n.ref:1===aX[B]?(r||(r={}),r[B]=n[B]):T[B]=n[B];return no(S,e,T,c,r)}if(S=function Yq(e){switch(e){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case"$F":return 8192;default:return 1}}(e),!WR(n))for(var N in T={},n)"className"===N||"class"===N?v=n[N]:"key"===N?c=n.key:"children"===N&&GR(o)?o=n.children:"ref"===N?r=n.ref:("contenteditable"===N&&(S|=4096),T[N]=n[N]);return 8192&S?Fl(1===F?[o]:o,0,c):Hn(S,e,v,o,0,T,c,r)}const dX=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),fX=/[A-Z]/g;function KR(e){if(e instanceof Object)return Object.entries(e).reduce((n,[t,i])=>(n[(e=>e.replace(fX,"-$&").toLowerCase())(t)]=(e=>"number"==typeof e||!Number.isNaN(Number(e)))(i)?((e,n)=>dX.has(e)?n:`${n}px`)(t,i):i,n),{})}const qR=e=>{const{parentNode:n}=e;if(n){const t=e.nextSibling;hu(e),n.$V=e.$V,id(null,n),n.insertBefore(e,t),e.innerHTML="",delete n.$V}delete e.$V},Hl=Zi({createElement:(e,n)=>Sf(e,n),remove:qR,onAfterRender:()=>{ss.callEffects()},onPreRender:()=>{ss.lock()},render:(e,n,t,i)=>{if(i)id(Sf(e,n),t);else{const{parentNode:o}=t,r=t?.nextSibling,c=Pe.createElement("div");c.appendChild(t);const v=Pe.createDocumentFragment().appendChild(c);!!t.$V&&qR(t),function rX(e,n,t){let i=n.firstChild;if(Nl(i))id(e,n,t);else{const o=[];for(function XZ(e){return null===e||!1===e||!0===e||void 0===e}(e)||(i=rd(e,n,i,{},!1,o));i&&(i=i.nextSibling);)n.removeChild(i);if(o.length>0){let r;for(;void 0!==(r=o.shift());)r()}}n.$V=e,function YZ(e){return"function"==typeof e}(t)&&t()}(Sf(e,n),v),t.$V=v.$V,o&&o.insertBefore(t,r)}}}),mX=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(t=>e[t]===n[t]),_X=["isEqual"];class ZR extends rx{constructor(n){super(n),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const n=to(this.$LI,!0);if(null==n||!n.parentNode)return()=>{};const t=n.parentNode,i=V(t),o=i.contents().toArray(),r=function CX(e,n){const{data:t,index:i}=e.model??{data:{}};t&&Object.keys(t).forEach(r=>{t[r]&&Pe.isNode(t[r])&&(t[r]=st(V(t[r])))});const o=e.template.render(He({container:n,transclude:e.transclude},{renovated:e.renovated},e.transclude?{}:{model:t},!e.transclude&&Number.isFinite(i)?{index:i}:{}));return void 0===o?[]:function vX(e){return!!e.toArray}(o)?o.toArray():[V(o).get(0)]}(this.props,st(i));return((e,n)=>{if(n&&n[0])n.is(e)||(Ee(n,(t,i)=>{((e,n)=>{n&&Pe.insertElement(e.parentNode,n,e)})(e[0],i)}),e.remove())})(V(n),V(r)),()=>{const c=V(t).contents().toArray();(function xX(e,n){n.forEach(t=>{!e.find(o=>t===o)&&t.parentNode&&V(t).remove()})})(o,c),t.appendChild(n)}}shouldComponentUpdate(n){const{model:t,template:i}=this.props,{isEqual:o,model:r,template:c}=n,v=o??mX;if(i!==c)return!0;if(!Ie(t)||!Ie(r))return t!==r;const{data:S,index:T}=t,{data:F,index:N}=r;return T!==N||!v(S,F)}createEffects(){return[new _n(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}function sx(e){return Array.isArray(e)?[...e]:He({},e)}function XR(e,n,t){const i=sx(t.length>0&&n&&e!==n?n:e),o=t[0];return t.length>1?i[o]=XR(e[o],n?.[o],t.slice(1)):o&&(i[o]=lt(e[o])?sx(e[o]):e[o]),i}function OX(e,n,t,i){const o=n[t],r=e[t];e[t]=lt(o)||t!==i&&Array.isArray(o)?XR(o,r,cl(i).slice(1)):o}const ax=(e,n)=>t=>{Object.prototype.hasOwnProperty.call(e,t)&&void 0===e[t]&&(e[t]=n(t))};let YR=(()=>{class e extends bl{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(t,i){super(t,i),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){if(this.getSupportedKeyNames().length>0&&"function"!=typeof this._viewComponent.prototype.keyDown)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var t;return null===(t=this._viewRef)||void 0===t?void 0:t.current}_checkContentReadyOption(t){const i=this._getContentReadyOptions().reduce((o,r)=>(o[r]=!0,o),{});return this._checkContentReadyOption=o=>!!i[o],this._checkContentReadyOption(t)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const t=this._getViewComponentDefaultProps();return pe(!0,super._getDefaultOptions(),t,this._propsInfo.twoWay.reduce((i,o)=>{let[r,c,v]=o;return He({},i,{[r]:t[c],[v]:S=>this.option(r,S)})},{}),this._propsInfo.templates.reduce((i,o)=>He({},i,{[o]:null}),{}))}_getUnwrappedOption(){const t={};return Object.keys(this.option()).forEach(i=>{t[i]=this.option(i)}),t}_initializeComponent(){var t;super._initializeComponent(),null===(t=this._templateManager)||void 0===t||t.addDefaultTemplates(this.getDefaultTemplates());const i=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(i),this._propsInfo.templates.forEach(o=>{this._componentTemplates[o]=this._createTemplateComponent(this._props[o])}),Object.keys(this._getActionConfigsFull()).forEach(o=>this._addAction(o)),this._viewRef={current:null},this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const t=this.getProps();this._renderWrapper(t)}_renderWrapper(t){const i=this.$element()[0];this._isNodeReplaced||Hl.onPreRender(),Hl.render(this._viewComponent,t,i,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,Hl.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(t,i){this._options.silent(t,i)}_render(){}_removeWidget(){Hl.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const t=this.$element()[0];if(!this._elementAttr){const{attributes:r}=t,c=Array.from(r).filter(v=>{var S;return!this._propsInfo.templates.includes(v.name)&&(null===(S=r[v.name])||void 0===S?void 0:S.specified)}).reduce((v,S)=>{let{name:T,value:F}=S;const N=v;return N[T]=""===F&&T in t?t[T]:F,N},{});this._elementAttr=c,this._storedClasses=t.getAttribute("class")||""}const i=t.style,o={};for(let r=0;r<i.length;r+=1)o[i[r]]=i.getPropertyValue(i[r]);return this._elementAttr.style=o,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(t){const{allowNull:i,elements:o,props:r,twoWay:c}=this._propsInfo,v=this._getViewComponentDefaultProps(),S=Object.keys(v),T=this._getDefaultOptions(),{children:F,onKeyboardHandled:N,ref:B}=t,ne={ref:B,children:F,onKeyDown:N?(le,he)=>{N(he)}:void 0};return[...r,...this._getAdditionalProps()].forEach(le=>{Object.prototype.hasOwnProperty.call(t,le)&&(ne[le]=t[le])}),i.forEach(ax(ne,()=>null)),S.forEach(ax(ne,le=>T[le])),c.forEach(le=>{let[he,Oe]=le;ax(ne,()=>T[Oe])(he)}),o.forEach(le=>{if(le in ne){const he=ne[le];qi(he)&&(ne[le]=this._patchElementParam(he))}}),ne}getSupportedKeyNames(){return[]}prepareStyleProp(t){return"string"==typeof t.style?He({},t,{style:{},cssText:t.style}):t}getProps(){const{elementAttr:t}=this.option(),i=this._patchOptionValues(He({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach(o=>{i[o]=this._componentTemplates[o]}),this.prepareStyleProp(He({},i,this.elementAttr,t,{className:[...(this.elementAttr.class??"").split(" "),...(t?.class??"").split(" ")].filter((o,r,c)=>o&&c.indexOf(o)===r).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return He({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const t=Object.values(this._templatesInfo),i={};return t.forEach(o=>{i[o]="dx-renovation-template-mock"}),i}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(t){const i=Object.entries(this._templatesInfo).reduce((o,r)=>{let[c,v]=r;return He({},o,{[c]:t[c]??v})},{});return He({},t,i)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const t={};return this.getSupportedKeyNames().forEach(o=>{t[o]=r=>this.viewRef.keyDown(WT.createKeyDownOptions(r))}),t}_addAction(t,i){let o=i;if(!o){const r=this._createActionByOption(t,this._getActionConfigsFull()[t]);o=c=>(Object.keys(c).forEach(v=>{Ie(c[v])&&Pe.isNode(c[v])&&(c[v]=st(V(c[v])))}),r(c))}this._actionsMap[t]=o}_optionChanged(t){const{fullName:i,name:o,previousValue:r,value:c}=t;OX(this._props,this.option(),o,i),this._propsInfo.templates.includes(o)&&c!==r&&(this._componentTemplates[o]=this._createTemplateComponent(c)),o&&this._getActionConfigsFull()[o]&&this._addAction(o),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(i),super._optionChanged(t),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?Hl.createElement(ZR,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(t){if(!t)return;const i=this._getTemplate(t);return _t(i)&&"dx-renovation-template-mock"===i?void 0:o=>Hl.createElement(ZR,function yX(e,n){const t={template:n,model:He({},e)},i=e.data??{},{isEqual:o}=i,r=ai(i,_X);return o&&(t.model.data=r,t.isEqual=o),t}(o,i))}_wrapKeyDownHandler(t){return i=>{const{keyName:o,originalEvent:r,which:c}=i,v=this.customKeyHandlers,S=v[o]||v[c];return void 0===S||S.bind(this)(r,i)?t?.(r,i):(r.cancel=!0,r)}}_toPublicElement(t){return st(V(t))}_patchElementParam(t){try{const i=V(t),o=i?.get(0);return null!=o&&o.nodeType?o:t}catch{return t}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return He({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(t,i){this.customKeyHandlers[t]=i}setAria(t,i){this._aria[t]=i,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}return e.IS_RENOVATED_WIDGET=!1,e})();const QR=YR;YR.IS_RENOVATED_WIDGET=!0;const Df=e=>!(!e||"string"!=typeof e)&&(/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(e)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(e)?"image":/^[\w-_]+$/.test(e)?"dxIcon":!!/^\s?([\w-_:]\s?)+$/.test(e)&&"fontIcon"),Qs=e=>{switch(Df(e)){case"image":return V("<img>").attr("src",e).addClass("dx-icon");case"fontIcon":return V("<i>").addClass(`dx-icon ${e}`);case"dxIcon":return V("<i>").addClass(`dx-icon dx-icon-${e}`);case"svg":return V("<i>").addClass("dx-icon dx-svg-icon").append(e);default:return null}};class bX extends QR{get _validationGroupConfig(){return Rl.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const n=super.getProps();return n.onClick=i=>{let{event:o}=i;this._clickAction({event:o,validationGroup:this._validationGroupConfig})},"svg"===Df(n.icon)&&(n.iconTemplate=this._createTemplateComponent(()=>n.icon)),n}get _templatesInfo(){return{template:"content"}}_toggleActiveState(n,t){const i=this.viewRef;t?i.activate():i.deactivate()}_getSubmitAction(){let n=!0,t="valid";return this._createAction(i=>{let{event:o,submitInput:r}=i;if(n){const c=this._validationGroupConfig;if(void 0!==c&&""!==c){const v=c.validate();t=v.status,"pending"===v.status&&(n=!1,this.option("disabled",!0),v.complete.then(S=>{let{status:T}=S;this.option("disabled",!1),t=T,"valid"===t&&r.click(),n=!0}))}}"valid"!==t&&o.preventDefault(),o.stopPropagation()})}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const n=this.$element().find(".dx-button-content").first(),t=n.children().filter(".dx-template-wrapper"),i=n.children().filter(".dx-button-submit-input");t.length&&(t.addClass("dx-button-content"),t.append(i),n.replaceWith(t))}_patchOptionValues(n){return super._patchOptionValues(He({},n,{templateData:n._templateData}))}_findGroup(){const n=this.$element(),t=this.option("validationGroup");return void 0!==t&&""!==t?t:Rl.findGroup(n,this._modelByElement(n))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(n){"onClick"===n.name&&(this._clickAction=this._createClickAction()),super._optionChanged(n)}}function as(e){return Object.keys(e).filter(n=>e[n]).join(" ")}const SX=["iconTemplate","position","source"],IX={position:"left",source:""},EX=e=>e&&(e.defaultProps?n=>Ir(no(2,e,He({},n))):e);let wX=(()=>{class e extends Ll{constructor(t){super(t),this.state={}}get sourceType(){return Df(this.props.source)}get cssClass(){return"left"!==this.props.position?"dx-icon-right":""}get iconClassName(){const t={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:i}=this.props;return"dxIcon"===this.sourceType?as(He({},t,{[`dx-icon-${i}`]:!0})):"fontIcon"===this.sourceType?as(He({},t,{[String(i)]:!!i})):"image"===this.sourceType?as(t):"svg"===this.sourceType?as(He({},t,{"dx-svg-icon":!0})):""}get restAttributes(){return ai(this.props,SX)}render(){const t=this.props;return(e=>{let{iconClassName:n,props:{iconTemplate:t,source:i},sourceType:o}=e;return Fl(["dxIcon"===o&&Hn(1,"i",n),"fontIcon"===o&&Hn(1,"i",n),"image"===o&&Hn(1,"img",n,null,1,{alt:"",src:i}),t&&Hn(1,"i",n,t({}),0)],0)})({props:He({},t,{iconTemplate:EX(t.iconTemplate)}),sourceType:this.sourceType,cssClass:this.cssClass,iconClassName:this.iconClassName,restAttributes:this.restAttributes})}}return e.defaultProps=IX,e})();const JR="dx-inkripple-showing",ek="dx-inkripple-hiding",tk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{useHoldAnimation:n,waveSizeCoefficient:t,isCentered:i,wavesNumber:o}=e;return{waveSizeCoefficient:t||2,isCentered:i||!1,wavesNumber:o||1,durations:AX(n??!0)}},lx=function(e){const n=tk(e);return{showWave:ik.bind(this,n),hideWave:rk.bind(this,n)}},nk=function(e,n){const t=function(e){let n=e.children(".dx-inkripple");return 0===n.length&&(n=V("<div>").addClass("dx-inkripple").appendTo(e)),n}(V(e)),i=t.children(".dx-inkripple-wave").toArray();for(let o=i.length;o<n;o++){const r=V("<div>").appendTo(t).addClass("dx-inkripple-wave");i.push(r[0])}return V(i)},TX=function(e,n){const t=V(n.element),i=qt(t),o=et(t),r=parseInt(Math.sqrt(i*i+o*o)),c=Math.min(4e3,parseInt(r*e.waveSizeCoefficient));let v,S;if(e.isCentered)v=(i-c)/2,S=(o-c)/2;else{const T=n.event,F=t.offset();v=T.pageX-F.left-c/2,S=T.pageY-F.top-c/2}return{left:v,top:S,height:c,width:c}};function ik(e,n){const t=nk(n.element,e.wavesNumber).eq(n.wave||0);e.hidingTimeout&&clearTimeout(e.hidingTimeout),ok(t),t.css(TX(e,n)),e.showingTimeout=setTimeout(MX.bind(this,e,t),0)}function MX(e,n){const t=e.durations.showingScale+"ms";n.addClass(JR).css("transitionDuration",t)}function AX(e){return{showingScale:e?1e3:300,hidingScale:300,hidingOpacity:300}}function ok(e){e.removeClass(ek).css("transitionDuration","")}function rk(e,n){e.showingTimeout&&clearTimeout(e.showingTimeout);const t=nk(n.element,n.wavesNumber).eq(n.wave||0),i=e.durations,o=i.hidingScale+"ms, "+i.hidingOpacity+"ms";t.addClass(ek).removeClass(JR).css("transitionDuration",o);const r=Math.max(i.hidingScale,i.hidingOpacity);e.hidingTimeout=setTimeout(ok.bind(this,t),r)}const RX=["config"],FX={config:Object.freeze({})};let LX=(()=>{class e extends Ll{constructor(t){super(t),this.state={},this.__getterCache={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return void 0!==this.__getterCache.getConfig?this.__getterCache.getConfig:this.__getterCache.getConfig=(()=>{const{config:t}=this.props;return tk(t)})()}get restAttributes(){return ai(this.props,RX)}hideWave(t){rk(this.getConfig,t)}showWave(t){ik(this.getConfig,t)}componentWillUpdate(t,i,o){this.props.config!==t.config&&(this.__getterCache.getConfig=void 0)}render(){return(e=>Ir(Hn(1,"div","dx-inkripple",null,1,He({},e.restAttributes))))({props:He({},this.props),getConfig:this.getConfig,restAttributes:this.restAttributes})}}return e.defaultProps=FX,e})();const NX=Tt.abstract,HX=je.real(),sk=Tt.inherit(function(){const e=Te("scroll","dxScrollEmitter");return{ctor:function(n){this._element=n,this._locked=!1,this._proxiedScroll=t=>{this._disposed||this._scroll(t)},ue.on(this._element,e,this._proxiedScroll)},_scroll:NX,check:function(n,t){this._locked&&t()},dispose:function(){this._disposed=!0,ue.off(this._element,e,this._proxiedScroll)}}}()),ak=sk.inherit({ctor:function(e,n){this.callBase(e),this._timeout=n},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){const e=this;this._timer=setTimeout(function(){e._clearTimer()},this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),lk=ak.inherit({ctor:function(e){this.callBase(e,400),this._lastWheelDirection=null},check:function(e,n){this._checkDirectionChanged(e),this.callBase(e,n)},_checkDirectionChanged:function(e){if(!oi(e))return void(this._lastWheelDirection=null);const n=e.shiftKey||!1,t=null!==this._lastWheelDirection&&n!==this._lastWheelDirection;this._lastWheelDirection=n,this._locked=this._locked&&!t}});let cx=ak.inherit({ctor:function(e){this.callBase(e,400)}});!function(){const{ios:e,android:n}=HX;(e||n)&&(cx=sk.inherit({_scroll:function(){this._locked=!0;const t=this;$o(this._scrollFrame),this._scrollFrame=yu(function(){t._locked=!1})},check:function(t,i){$o(this._scrollFrame),$o(this._checkFrame);const o=this,r=this.callBase;this._checkFrame=yu(function(){r.call(o,t,i),o._locked=!1})},dispose:function(){this.callBase(),$o(this._scrollFrame),$o(this._checkFrame)}}))}();const BX=xC.inherit(function(){const e=Math.round(16.666666666666668);return{ctor:function(n){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new cx(n),this._wheelLocker=new lk(n)},validate:function(){return!0},configure:function(n){n.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new cx(n.scrollTarget),this._wheelLocker=new lk(n.scrollTarget)),this.callBase(n)},_init:function(n){this._wheelLocker.check(n,function(){oi(n)&&this._accept(n)}.bind(this)),this._pointerLocker.check(n,function(){const t=this.isNative&&Bs(n);!oi(n)&&!t&&this._accept(n)}.bind(this)),this._fireEvent("dxscrollinit",n),this._prevEventData=an(n)},move:function(n){this.callBase.apply(this,arguments),n.isScrollingEvent=this.isNative||n.isScrollingEvent},_start:function(n){this._savedEventData=an(n),this._fireEvent("dxscrollstart",n),this._prevEventData=an(n)},_move:function(n){const t=an(n);this._fireEvent("dxscroll",n,{delta:Vs(this._prevEventData,t)}),Vs(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=an(n)},_end:function(n){const t=Vs(this._prevEventData,an(n));let i={x:0,y:0};if(!oi(n)&&t.time<100){const o=Vs(this._savedEventData,this._prevEventData),r=e/o.time;i={x:o.x*r,y:o.y*r}}this._fireEvent("dxscrollend",n,{velocity:i})},_stop:function(n){this._fireEvent("dxscrollstop",n)},cancel:function(n){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",n)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}}}());Dl({emitter:BX,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});function vn(e){return(n,t,i,o)=>{const r=o?Te(e,o):e;if(t)return ue.on(n,r,i,t),()=>{ue.off(n,r,t)}}}vn(si),vn("scroll"),vn("dxscrollinit"),vn("dxscrollstart"),vn("dxscroll"),vn("dxscrollend"),vn("dxscrollstop"),vn("dxscrollcancel"),vn(Wt.down),vn(Wt.up),vn(Wt.move),vn("mouseenter"),vn("mouseleave"),vn("keydown");const VX=vn("dxactive"),zX=vn("dxinactive"),jX=vn("dxhoverstart"),UX=vn("dxhoverend"),$X=vn("focusin"),WX=vn("focusout"),If={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},ls=function(e){const n=GZ++;return{id:n,defaultValue:e,Provider:class extends od{getChildContext(){return Object.assign(Object.assign({},this.context),{[n]:this.props.value||e})}render(){return this.props.children}}}}(void 0),GX=["children","rtlEnabled"],qX={};let ZX=(()=>{class e extends Ll{constructor(t){super(t),this.state={},this.__getterCache={}}getChildContext(){return He({},this.context,{[ls.id]:this.config||ls.defaultValue})}get config(){return void 0!==this.__getterCache.config?this.__getterCache.config:this.__getterCache.config=(()=>({rtlEnabled:this.props.rtlEnabled}))()}get restAttributes(){return ai(this.props,GX)}componentWillUpdate(t,i,o){this.props.rtlEnabled!==t.rtlEnabled&&(this.__getterCache.config=void 0)}render(){return(e=>e.props.children)({props:He({},this.props),config:this.config,restAttributes:this.restAttributes})}}return e.defaultProps=qX,e})();const QX=["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"],Ef=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(If),Object.getOwnPropertyDescriptors({_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:Object.freeze({}),classes:"",name:"",addWidgetClass:!0})));let ck=(()=>{class e extends Of{get config(){return this.context[ls.id]?this.context[ls.id]:ls.defaultValue}constructor(t){super(t),this.widgetElementRef={current:null},this.state={active:!1,focused:!1,hovered:!1},this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}createEffects(){return[new _n(this.setRootElementRef,[]),new _n(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new _n(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new _n(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new _n(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new _n(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new _n(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new _n(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new _n(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new _n(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new _n(this.windowResizeEffect,[this.props.onDimensionChanged]),new _n(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new _n(this.checkDeprecation,[this.props.height,this.props.width]),new _n(this.applyCssTextEffect,[this.props.cssText]),bf()]}updateEffects(){var t,i,o,r,c,v,S,T,F,N,B,X,ne;null===(t=this._effects[1])||void 0===t||t.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),null===(i=this._effects[2])||void 0===i||i.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),null===(o=this._effects[3])||void 0===o||o.update([this.props.disabled,this.props.name,this.props.onClick]),null===(r=this._effects[4])||void 0===r||r.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),null===(c=this._effects[5])||void 0===c||c.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),null===(v=this._effects[6])||void 0===v||v.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),null===(S=this._effects[7])||void 0===S||S.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),null===(T=this._effects[8])||void 0===T||T.update([this.props.focusStateEnabled,this.props.onKeyDown]),null===(F=this._effects[9])||void 0===F||F.update([this.props.name,this.props.onDimensionChanged]),null===(N=this._effects[10])||void 0===N||N.update([this.props.onDimensionChanged]),null===(B=this._effects[11])||void 0===B||B.update([this.props.name,this.props.onVisibilityChange]),null===(X=this._effects[12])||void 0===X||X.update([this.props.height,this.props.width]),null===(ne=this._effects[13])||void 0===ne||ne.update([this.props.cssText])}setRootElementRef(){const{onRootElementRendered:t,rootElementRef:i}=this.props;i&&(i.current=this.widgetElementRef.current),t?.(this.widgetElementRef.current)}activeEffect(){const{_feedbackShowTimeout:t,activeStateEnabled:i,activeStateUnit:o,disabled:r,onActive:c}=this.props;if(i&&!r)return VX(this.widgetElementRef.current,S=>{this.setState(T=>({active:!0})),c?.(S)},{timeout:t,selector:o},"UIFeedback")}inactiveEffect(){const{_feedbackHideTimeout:t,activeStateEnabled:i,activeStateUnit:o,onInactive:r}=this.props;if(i)return zX(this.widgetElementRef.current,v=>{this.state.active&&(this.setState(S=>({active:!1})),r?.(v))},{timeout:t,selector:o},"UIFeedback")}clickEffect(){const{disabled:t,name:i,onClick:o}=this.props,r=i;if(o&&!t)return function(e,n){let{namespace:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.on(e,ln("dxclick",t),n)}(this.widgetElementRef.current,o,{namespace:r}),()=>function(e){let{namespace:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.off(e,ln("dxclick",n))}(this.widgetElementRef.current,{namespace:r})}focusInEffect(){const{disabled:t,focusStateEnabled:i,name:o,onFocusIn:r}=this.props;if(i&&!t)return $X(this.widgetElementRef.current,v=>{v.isDefaultPrevented()||(this.setState(S=>({focused:!0})),r?.(v))},null,`${o}Focus`)}focusOutEffect(){const{focusStateEnabled:t,name:i,onFocusOut:o}=this.props;if(t)return WX(this.widgetElementRef.current,c=>{!c.isDefaultPrevented()&&this.state.focused&&(this.setState(v=>({focused:!1})),o?.(c))},null,`${i}Focus`)}hoverStartEffect(){const{activeStateUnit:t,disabled:i,hoverStateEnabled:o,onHoverStart:r}=this.props;if(o&&!i)return jX(this.widgetElementRef.current,v=>{!this.state.active&&this.setState(S=>({hovered:!0})),r?.(v)},{selector:t},"UIFeedback")}hoverEndEffect(){const{activeStateUnit:t,hoverStateEnabled:i,onHoverEnd:o}=this.props;if(i)return UX(this.widgetElementRef.current,c=>{this.state.hovered&&(this.setState(v=>({hovered:!1})),o?.(c))},{selector:t},"UIFeedback")}keyboardEffect(){const{focusStateEnabled:t,onKeyDown:i}=this.props;if(t&&i){const o=vu_on(this.widgetElementRef.current,this.widgetElementRef.current,r=>i(r));return()=>vu_off(o)}}resizeEffect(){const t=`${this.props.name}VisibilityChange`,{onDimensionChanged:i}=this.props;if(i)return Tp_on(this.widgetElementRef.current,i,{namespace:t}),()=>Tp_off(this.widgetElementRef.current,{namespace:t})}windowResizeEffect(){const{onDimensionChanged:t}=this.props;if(t)return gu.add(t),()=>{gu.remove(t)}}visibilityEffect(){const{name:t,onVisibilityChange:i}=this.props,o=`${t}VisibilityChange`;if(i)return Mp_on(this.widgetElementRef.current,()=>i(!0),()=>i(!1),{namespace:o}),()=>Mp_off(this.widgetElementRef.current,{namespace:o})}checkDeprecation(){const{height:t,width:i}=this.props;Be(i)&&vt.log("W0017","width"),Be(t)&&vt.log("W0017","height")}applyCssTextEffect(){const{cssText:t}=this.props;""!==t&&(this.widgetElementRef.current.style.cssText=t)}get shouldRenderConfigProvider(){const{rtlEnabled:t}=this.props;return function YX(e,n){const t=Ie(e),i=Ie(Ht().rtlEnabled)&&!t&&!Ie(n?.rtlEnabled);return t&&e!==n?.rtlEnabled||i}(t,this.config)}get rtlEnabled(){const{rtlEnabled:t}=this.props;return function XX(e,n){return void 0!==e?e:void 0!==n?.rtlEnabled?n.rtlEnabled:Ht().rtlEnabled}(t,this.config)}get attributes(){const{aria:t,disabled:i,focusStateEnabled:o,visible:r}=this.props,c=o&&!i&&this.props.accessKey;return He({},pe({},c&&{accessKey:c}),(e=>Object.keys(e).reduce((n,t)=>e[t]?He({},n,{["role"===t||"id"===t?t:`aria-${t}`]:String(e[t])}):n,{}))(He({},t,{disabled:i,hidden:!r})),pe({},this.restAttributes))}get styles(){const{height:t,width:i}=this.props,o=this.restAttributes.style||{},r=Op("width",Be(i)?i():i);return He({},o,{height:Op("height",Be(t)?t():t)??o.height,width:r??o.width})}get cssClasses(){const{activeStateEnabled:t,addWidgetClass:i,className:o,classes:r,disabled:c,focusStateEnabled:v,hoverStateEnabled:S,onVisibilityChange:T,visible:F}=this.props,N=!!v&&!c,B=!!S&&!c,X=!!t&&!c;return as({"dx-widget":!!i,[String(r)]:!!r,[String(o)]:!!o,"dx-state-disabled":!!c,"dx-state-invisible":!F,"dx-state-focused":!!this.state.focused&&N,"dx-state-active":!!this.state.active&&X,"dx-state-hover":!!this.state.hovered&&B&&!this.state.active,"dx-rtl":!!this.rtlEnabled,"dx-visibility-change-handler":!!T})}get tabIndex(){const{disabled:t,focusStateEnabled:i,tabIndex:o}=this.props;return i&&!t?o:void 0}get restAttributes(){return ai(this.props,QX)}focus(){Ap_trigger(this.widgetElementRef.current)}blur(){const t=Pe.getActiveElement(this.widgetElementRef.current);this.widgetElementRef.current===t&&t.blur()}activate(){this.setState(t=>({active:!0}))}deactivate(){this.setState(t=>({active:!1}))}render(){return(e=>{const n=Ir(Hn(1,"div",e.cssClasses,e.props.children,0,He({},e.attributes,{tabIndex:e.tabIndex,title:e.props.hint,style:KR(e.styles)}),null,e.widgetElementRef));return e.shouldRenderConfigProvider?no(2,ZX,{rtlEnabled:e.rtlEnabled,children:n}):n})({props:He({},this.props),active:this.state.active,focused:this.state.focused,hovered:this.state.hovered,widgetElementRef:this.widgetElementRef,config:this.config,shouldRenderConfigProvider:this.shouldRenderConfigProvider,rtlEnabled:this.rtlEnabled,attributes:this.attributes,styles:this.styles,cssClasses:this.cssClasses,tabIndex:this.tabIndex,restAttributes:this.restAttributes})}}return e.defaultProps=Ef,e})();const tY=["accessKey","activeStateEnabled","children","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],nY=["outlined","text","contained"],rY=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(If),Object.getOwnPropertyDescriptors({activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:Object.freeze({})}))),uk=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>Fi(yo()),options:{useInkRipple:!0}}]),dk=e=>e&&(e.defaultProps?n=>Ir(no(2,e,He({},n))):e);class wf extends Of{constructor(n){super(n),this.state={},this.contentRef={current:null},this.inkRippleRef={current:null},this.submitInputRef={current:null},this.widgetRef={current:null},this.__getterCache={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this),this.emitClickEvent=this.emitClickEvent.bind(this)}createEffects(){return[new _n(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),bf()]}updateEffects(){var n;null===(n=this._effects[0])||void 0===n||n.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:n,useSubmitBehavior:t}=this.props;if(t&&n)return function(e,n){let{namespace:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.on(e,ln("click",t),n)}(this.submitInputRef.current,i=>n({event:i,submitInput:this.submitInputRef.current}),{namespace:"UIFeedback"}),()=>function(e){let{namespace:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.off(e,ln("click",n))}(this.submitInputRef.current,{namespace:"UIFeedback"})}onActive(n){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.showWave({element:this.contentRef.current,event:n})}onInactive(n){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.hideWave({element:this.contentRef.current,event:n})}onWidgetClick(n){const{onClick:t,useSubmitBehavior:i}=this.props;t?.({event:n}),i&&this.submitInputRef.current.click()}keyDown(n){const{onKeyDown:t}=this.props,{keyName:i,originalEvent:o,which:r}=n,c=t?.(n);if(null!=c&&c.cancel)return c;("space"===i||"space"===r||"enter"===i||"enter"===r)&&(o.preventDefault(),this.emitClickEvent())}emitClickEvent(){this.contentRef.current.click()}get aria(){const{icon:n,text:t}=this.props;let i=t??"";if(!t&&n)switch(Df(n)){case"image":{const c=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;i=!n.includes("base64")&&c.test(n)?n.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":i=de.format(pu(n,!0))||n;break;case"fontIcon":i=n;break;case"svg":var o;i=(null===(o=/<title>(.*?)<\/title>/.exec(n))||void 0===o?void 0:o[1])??""}return He({role:"button"},i?{label:i}:{})}get cssClasses(){return(e=>{const{icon:n,iconPosition:t,stylingMode:i,text:o,type:r}=e;return as({"dx-button":!0,[`dx-button-mode-${i&&nY.includes(i)?i:"contained"}`]:!0,[`dx-button-${r??"normal"}`]:!0,"dx-button-has-text":!!o,"dx-button-has-icon":!!n,"dx-button-icon-right":"left"!==t})})(this.props)}get iconSource(){const{icon:n}=this.props;return n??""}get inkRippleConfig(){return void 0!==this.__getterCache.inkRippleConfig?this.__getterCache.inkRippleConfig:this.__getterCache.inkRippleConfig=(()=>{const{icon:n,text:t}=this.props;return!t&&n?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}})()}get buttonTemplateData(){const{icon:n,templateData:t,text:i}=this.props;return He({icon:n,text:i},t)}get restAttributes(){return ai(this.props,tY)}focus(){this.widgetRef.current.focus()}activate(){this.widgetRef.current.activate()}deactivate(){this.widgetRef.current.deactivate()}componentWillUpdate(n,t,i){super.componentWillUpdate(),(this.props.icon!==n.icon||this.props.text!==n.text)&&(this.__getterCache.inkRippleConfig=void 0)}render(){const n=this.props;return(e=>{const{children:n,iconPosition:t,iconTemplate:i,template:o,text:r}=e.props,c=!e.props.template&&!n&&""!==r,v="left"===t,S=!e.props.template&&!n&&(e.iconSource||e.props.iconTemplate)&&no(2,wX,{source:e.iconSource,position:t,iconTemplate:i});return Ir(no(2,ck,He({accessKey:e.props.accessKey,activeStateEnabled:e.props.activeStateEnabled,aria:e.aria,className:e.props.className,classes:e.cssClasses,disabled:e.props.disabled,focusStateEnabled:e.props.focusStateEnabled,height:e.props.height,hint:e.props.hint,hoverStateEnabled:e.props.hoverStateEnabled,onActive:e.onActive,onClick:e.onWidgetClick,onInactive:e.onInactive,onKeyDown:e.keyDown,rtlEnabled:e.props.rtlEnabled,tabIndex:e.props.tabIndex,visible:e.props.visible,width:e.props.width},e.restAttributes,{children:Hn(1,"div","dx-button-content",[e.props.template&&o({data:e.buttonTemplateData}),!e.props.template&&n,v&&S,c&&Hn(1,"span","dx-button-text",r,0),!v&&S,e.props.useSubmitBehavior&&Hn(64,"input","dx-button-submit-input",null,1,{type:"submit",tabIndex:-1},null,e.submitInputRef),e.props.useInkRipple&&no(2,LX,{config:e.inkRippleConfig},null,e.inkRippleRef)],0,null,null,e.contentRef)}),null,e.widgetRef))})({props:He({},n,{template:dk(n.template),iconTemplate:dk(n.iconTemplate)}),contentRef:this.contentRef,submitInputRef:this.submitInputRef,inkRippleRef:this.inkRippleRef,widgetRef:this.widgetRef,onActive:this.onActive,onInactive:this.onInactive,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,emitClickEvent:this.emitClickEvent,aria:this.aria,cssClasses:this.cssClasses,iconSource:this.iconSource,inkRippleConfig:this.inkRippleConfig,buttonTemplateData:this.buttonTemplateData,restAttributes:this.restAttributes})}}wf.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(rY),Object.getOwnPropertyDescriptors(He({},vl(uk)))));const hk=[];class ux extends bX{getProps(){const n=super.getProps();return n.onKeyDown=this._wrapKeyDownHandler(n.onKeyDown),n}focus(){var n;return null===(n=this.viewRef)||void 0===n?void 0:n.focus(...arguments)}activate(){var n;return null===(n=this.viewRef)||void 0===n?void 0:n.activate(...arguments)}deactivate(){var n;return null===(n=this.viewRef)||void 0===n?void 0:n.deactivate(...arguments)}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:["activeStateEnabled","hoverStateEnabled","icon","iconPosition","onClick","onSubmit","pressed","stylingMode","template","iconTemplate","text","type","useInkRipple","useSubmitBehavior","templateData","className","accessKey","disabled","focusStateEnabled","height","hint","onKeyDown","rtlEnabled","tabIndex","visible","width"]}}get _viewComponent(){return wf}}xt("dxButton",ux),ux.defaultOptions=function sY(e){hk.push(e),wf.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(wf.defaultProps),Object.getOwnPropertyDescriptors(vl(uk)),Object.getOwnPropertyDescriptors(vl(hk))))};const bo=ux,Pf="dxResizable",aY=Te(OC,Pf),lY=Te(Xp,Pf),cY=Te(bC,Pf),uY={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},pk=bl.inherit({_getDefaultOptions(){return pe(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];const e=this.option("handles");if("none"===e||!e)return;const n="all"===e?["top","bottom","left","right"]:e.split(" "),t={};Ee(n,(i,o)=>{t[o]=!0,this._renderHandle(o)}),t.bottom&&t.right&&this._renderHandle("corner-bottom-right"),t.bottom&&t.left&&this._renderHandle("corner-bottom-left"),t.top&&t.right&&this._renderHandle("corner-top-right"),t.top&&t.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()},_renderHandle(e){const n=V("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${e}`).appendTo(this.$element());this._handles.push(n)},_attachEventHandlers(){if(this.option("disabled"))return;const e={};e[aY]=this._dragStartHandler.bind(this),e[lY]=this._dragHandler.bind(this),e[cY]=this._dragEndHandler.bind(this),this._handles.forEach(n=>{ue.on(n,e,{direction:"both",immediate:!0})})},_detachEventHandlers(){this._handles.forEach(e=>{ue.off(e)})},_toggleEventHandlers(e){e?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){const e=this.$element();return"border-box"===e.css("boxSizing")?{width:qt(e),height:et(e)}:{width:Xe(e),height:ut(e)}},_dragStartHandler(e){const n=this.$element();n.is(".dx-state-disabled, .dx-state-disabled *")?e.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(e),this._elementLocation=Nn(n),this._elementSize=this._getElementSize(),this._renderDragOffsets(e),this._resizeStartAction({event:e,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),e.targetElements=null)},_toggleResizingClass(e){this.$element().toggleClass("dx-resizable-resizing",e)},_renderDragOffsets(e){const n=this._getArea();if(!n)return;const t=V(e.target).closest(".dx-resizable-handle"),i=qt(t),o=et(t),r=t.offset(),c=n.offset,v=this._getAreaScrollOffset();e.maxLeftOffset=this._leftMaxOffset=r.left-c.left-v.scrollX,e.maxRightOffset=this._rightMaxOffset=c.left+n.width-r.left-i+v.scrollX,e.maxTopOffset=this._topMaxOffset=r.top-c.top-v.scrollY,e.maxBottomOffset=this._bottomMaxOffset=c.top+n.height-r.top-o+v.scrollY},_getBorderWidth(e,n){if($t(e.get(0)))return 0;const t=e.css(uY[n]);return parseInt(t)||0},_proportionate(e,n){const t=this._elementSize;return n*("x"===e?t.width/t.height:t.height/t.width)},_getProportionalDelta(e){let{x:n,y:t}=e;const i=this._proportionate("y",n);if(i>=t)return{x:n,y:i};const o=this._proportionate("x",t);return o>=n?{x:o,y:t}:{x:0,y:0}},_getDirectionName(e){const n=this._movingSides;return"x"===e?n.left?"left":"right":n.top?"top":"bottom"},_fitIntoArea(e,n){const t=this._getDirectionName(e);return Math.min(n,this[`_${t}MaxOffset`]??1/0)},_fitDeltaProportionally(e){let n=He({},e);const t=this._elementSize,{minWidth:i,minHeight:o,maxWidth:r,maxHeight:c}=this.option(),v=()=>t.width+n.x,S=()=>t.height+n.y,T=B=>n[B]===this._fitIntoArea(B,n[B]),F=()=>Pu(v(),i,r)&&T("x"),N=()=>Pu(S(),o,c)&&T("y");if(!F()){const B=this._fitIntoArea("x",Ci(v(),i,r)-t.width);n={x:B,y:this._proportionate("y",B)}}if(!N()){const B=this._fitIntoArea("y",Ci(S(),o,c)-t.height);n={x:this._proportionate("x",B),y:B}}return F()&&N()?n:{x:0,y:0}},_fitDelta(e){let{x:n,y:t}=e;const i=this._elementSize,{minWidth:o,minHeight:r,maxWidth:c,maxHeight:v}=this.option();return{x:Ci(i.width+n,o,c)-i.width,y:Ci(i.height+t,r,v)-i.height}},_getDeltaByOffset(e){const n=this._movingSides,t=this._isCornerHandler(n)&&this.option("keepAspectRatio");let i={x:e.x*(n.left?-1:1),y:e.y*(n.top?-1:1)};if(t){const o=this._getProportionalDelta(i);i=this._fitDeltaProportionally(o)}else{const o=this._fitDelta(i);i=this._roundByStep(o)}return i},_updatePosition(e,n){let{width:t,height:i}=n;const o=this._elementLocation,r=this._movingSides,c=this.$element(),v=this._getElementSize();Tn(c,{top:o.top+(r.top?e.y*(r.top?-1:1)-((v.height||i)-i):0),left:o.left+(r.left?e.x*(r.left?-1:1)-((v.width||t)-t):0)})},_dragHandler(e){const n=this._getOffset(e),t=this._getDeltaByOffset(n),i=this._updateDimensions(t);this._updatePosition(t,i),this._triggerResizeAction(e,i)},_updateDimensions(e){const n=T=>"px"===T.substring(T.length-2),t="strict"===this.option("stepPrecision"),i=this._elementSize,o=i.width+e.x,r=i.height+e.y,c=this.$element().get(0).style,v=e.x||t||n(c.width),S=e.y||t||n(c.height);return v&&this.option({width:o}),S&&this.option({height:r}),{width:v?o:i.width,height:S?r:i.height}},_triggerResizeAction(e,n){let{width:t,height:i}=n;this._resizeAction({event:e,width:this.option("width")||t,height:this.option("height")||i,handles:this._movingSides}),Cr(this.$element())},_isCornerHandler:e=>0===Object.values(e).reduce((n,t)=>n^t,0),_getOffset(e){const{offset:n}=e,t=this._movingSides;return!t.left&&!t.right&&(n.x=0),!t.top&&!t.bottom&&(n.y=0),n},_roundByStep(e){return"strict"===this.option("stepPrecision")?this._roundStrict(e):this._roundNotStrict(e)},_getSteps(){return Gv(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(e){const n=this._getSteps();return{x:e.x-e.x%n.h,y:e.y-e.y%n.v}},_roundStrict(e){const n=this._movingSides,t={x:e.x*(n.left?-1:1),y:e.y*(n.top?-1:1)},i=this._getSteps(),o=this._elementLocation,r=this._elementSize,S=((n.left?o.left:o.left+r.width)+t.x)%i.h,T=((n.top?o.top:o.top+r.height)+t.y)%i.v,F=Math.sign||(Oe=>0==(Oe=+Oe)||isNaN(Oe)?Oe:Oe>0?1:-1),N=(Oe,_e)=>(1+.2*F(_e))%1*Oe,B=(Oe,_e)=>Math.abs(Oe)<.2*_e;let X=t.x-S,ne=t.y-T;S>N(i.h,t.x)&&(X+=i.h),T>N(i.v,t.y)&&(ne+=i.v);const le=!n.left&&!n.right||B(t.x,i.h)?0:X,he=!n.top&&!n.bottom||B(t.y,i.v)?0:ne;return{x:le*(n.left?-1:1),y:he*(n.top?-1:1)}},_getMovingSides(e){const n=V(e.target),t=n.hasClass("dx-resizable-handle-corner-top-left"),i=n.hasClass("dx-resizable-handle-corner-top-right"),o=n.hasClass("dx-resizable-handle-corner-bottom-left"),r=n.hasClass("dx-resizable-handle-corner-bottom-right");return{top:n.hasClass("dx-resizable-handle-top")||t||i,left:n.hasClass("dx-resizable-handle-left")||t||o,bottom:n.hasClass("dx-resizable-handle-bottom")||o||r,right:n.hasClass("dx-resizable-handle-right")||i||r}},_getArea(){let e=this.option("area");return Be(e)&&(e=e.call(this)),lt(e)?this._getAreaFromObject(e):this._getAreaFromElement(e)},_getAreaScrollOffset(){const e=this.option("area"),t={scrollY:0,scrollX:0};if(!Be(e)&&!lt(e)){const i=V(e)[0];$t(i)&&(t.scrollX=i.pageXOffset,t.scrollY=i.pageYOffset)}return t},_getAreaFromObject(e){const n={width:e.right-e.left,height:e.bottom-e.top,offset:{left:e.left,top:e.top}};return this._correctAreaGeometry(n),n},_getAreaFromElement(e){const n=V(e);let t;return n.length&&(t={width:jP(n),height:UP(n),offset:pe({top:0,left:0},$t(n[0])?{}:n.offset())},this._correctAreaGeometry(t,n)),t},_correctAreaGeometry(e,n){const t=n?this._getBorderWidth(n,"left"):0,i=n?this._getBorderWidth(n,"top"):0;e.offset.left+=t+this._getBorderWidth(this.$element(),"left"),e.offset.top+=i+this._getBorderWidth(this.$element(),"top"),e.width-=qt(this.$element())-jP(this.$element()),e.height-=et(this.$element())-UP(this.$element())},_dragEndHandler(e){const n=this.$element();this._resizeEndAction({event:e,width:qt(n),height:et(n),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(e){this.option("width",Ci(e,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(e){this.option("height",Ci(e,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(e){switch(e.name){case"disabled":this._toggleEventHandlers(!e.value),this.callBase(e);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":Ke()&&this._renderWidth(qt(this.$element()));break;case"minHeight":case"maxHeight":Ke()&&this._renderHeight(et(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(e)}},_clean(){this.$element().find(".dx-resizable-handle").remove()},_useTemplates:()=>!1});xt(Pf,pk);const dY=pk,fY={setOverflow:De,restoreOverflow:De},mY=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],dx=ot();class _Y extends EC{constructor(n){let{fullScreen:t,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:c}=n;super(ai(n,mY)),this._props=He({},this._props,{fullScreen:t,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:c}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(n){this._props.fullScreen=n,n?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(n){this._props.dragAndResizeArea=n,this._updateDragResizeContainer()}set dragOutsideBoundary(n){this._props.dragOutsideBoundary=n,this._updateDragResizeContainer()}set outsideDragFactor(n){this._props.outsideDragFactor=n}updateContainer(n){super.updateContainer(n),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var n,t;this._props.fullScreen?(Tn(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(n=(t=this._props).forceApplyBindings)||void 0===n||n.call(t),super.positionContent())}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?V(dx):this._props.dragAndResizeArea?V(this._props.dragAndResizeArea):fT().get(0)||this._props.container?this._$markupContainer:V(dx)}_getVisualContainer(){return this._props.fullScreen?V(dx):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const vY=ot(),fk=["cancel","clear","done"],yY=Wo.safari&&XT(Wo.version,[11])<0,cs={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},gk=wl.inherit({_supportedKeys(){return pe(this.callBase(),{upArrow:e=>{var n;null===(n=this._drag)||void 0===n||n.moveUp(e)},downArrow:e=>{var n;null===(n=this._drag)||void 0===n||n.moveDown(e)},leftArrow:e=>{var n;null===(n=this._drag)||void 0===n||n.moveLeft(e)},rightArrow:e=>{var n;null===(n=this._drag)||void 0===n||n.moveRight(e)}})},_getDefaultOptions(){return pe(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:e=>"desktop"===je.real().deviceType&&"generic"===e.platform,options:{dragEnabled:!0}},{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ki(),options:{useFlatToolbarButtons:!0}},{device:()=>Fi(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init(){const e=this.option("_wrapperClassExternal"),n=e?`dx-popup-wrapper ${e}`:"dx-popup-wrapper";this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(n),this._$popupContent=this._$content.wrapInner(V("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render(){const e=this.option("fullScreen");this._toggleFullScreenClass(e),this.callBase()},_createBodyOverflowManager(){this._bodyOverflowManager=(()=>{if(!Ke())return fY;const e=ot(),{documentElement:n}=Pe.getDocument(),t=Pe.getBody(),i="ios"===je.real().platform,o={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:i?()=>{if(Ie(o.position)||"fixed"===t.style.position)return;const{scrollY:r,scrollX:c}=e;o.position=t.style.position,o.top=t.style.top,o.left=t.style.left,t.style.setProperty("position","fixed"),t.style.setProperty("top",-r+"px"),t.style.setProperty("left",-c+"px")}:()=>{(()=>{const r=e.innerWidth-n.clientWidth;if(o.paddingRight||r<=0)return;const c=e.getComputedStyle(t).getPropertyValue("padding-right"),v=parseInt(c,10);o.paddingRight=v,t.style.setProperty("padding-right",`${v+r}px`)})(),!o.overflow&&"hidden"!==t.style.overflow&&(o.overflow=t.style.overflow,o.overflowX=t.style.overflowX,o.overflowY=t.style.overflowY,t.style.setProperty("overflow","hidden"))},restoreOverflow:i?()=>{if(!Ie(o.position))return;const r=-parseInt(t.style.top,10),c=-parseInt(t.style.left,10);["position","top","left"].forEach(v=>{o[v]?t.style.setProperty(v,o[v]):t.style.removeProperty(v)}),e.scrollTo(c,r),o.position=null}:()=>{Ie(o.paddingRight)&&(o.paddingRight?t.style.setProperty("padding-right",`${o.paddingRight}px`):t.style.removeProperty("padding-right"),o.paddingRight=null),["overflow","overflowX","overflowY"].forEach(r=>{if(!Ie(o[r]))return;const c=r.replace(/(X)|(Y)/,v=>`-${v.toLowerCase()}`);o[r]?t.style.setProperty(c,o[r]):t.style.removeProperty(c),o[r]=null})}}})()},_toggleFullScreenClass(e){this.$overlayContent().toggleClass("dx-popup-fullscreen",e).toggleClass("dx-popup-normal",!e)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Hs,bottom:new Hs})},_getActionsList(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler(e){this._shouldSkipContentResize(e)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions(){const e=this.option("animation");return["to","from"].some(n=>{var t;const i=null==e||null===(t=e.show)||void 0===t?void 0:t[n];return dt(i)&&("width"in i||"height"in i)})},_updateResizeCallbackSkipCondition(){const e=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=n=>e&&this._showAnimationProcessing||this._areContentDimensionsRendered(n)},_observeContentResize(e){if(!this.option("useResizeObserver"))return;const n=this._$content.get(0);e?hf.observe(n,t=>{this._contentResizeHandler(t)}):hf.unobserve(n)},_areContentDimensionsRendered(e){var n,t,i;const o=null===(n=e.contentBoxSize)||void 0===n?void 0:n[0];var r,c;if(o)return parseInt(o.inlineSize,10)===(null===(r=this._renderedDimensions)||void 0===r?void 0:r.width)&&parseInt(o.blockSize,10)===(null===(c=this._renderedDimensions)||void 0===c?void 0:c.height);const{contentRect:v}=e;return parseInt(v.width,10)===(null===(t=this._renderedDimensions)||void 0===t?void 0:t.width)&&parseInt(v.height,10)===(null===(i=this._renderedDimensions)||void 0===i?void 0:i.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle(){const e=this._getToolbarItems("top"),{title:n,showTitle:t}=this.option();if(t&&n&&e.unshift({location:je.current().ios?"center":"before",text:n}),t||e.length>0){this._$title&&this._$title.remove();const i=V("<div>").addClass("dx-popup-title").insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",e,i).addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var e;const{title:n,showTitle:t}=this.option(),o=t&&n?new Pn:null;null===(e=this._$title)||void 0===e||e.find(".dx-toolbar-label").eq(0).attr("id",o),this.$overlayContent().attr("aria-labelledby",o)},_renderTemplateByType(e,n,t,i){const{rtlEnabled:o,useDefaultToolbarButtons:r,useFlatToolbarButtons:c,disabled:v}=this.option(),S=this._getTemplateByOption(e);if(S instanceof Hs){const N=pe({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),B=pe(i,{items:n,rtlEnabled:o,useDefaultButtons:r,useFlatButtons:c,disabled:v,integrationOptions:N});this._getTemplate("dx-polymorph-widget").render({container:t,model:{widget:this._getToolbarName(),options:B}});const X=t.children("div");return t.replaceWith(X),X}const F=V(S.render({container:st(t)}));return F.hasClass("dx-template-wrapper")&&(t.replaceWith(F),t=F),t},_getToolbarName:()=>"dxToolbarBase",_renderVisibilityAnimate(e){return this.callBase(e)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction(e){this._getTitleRenderAction()({titleElement:st(e)})},_getTitleRenderAction(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer(){return(e,n,t)=>{const i=V("<div>").addClass("dx-closebutton");this._createComponent(i,bo,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),V(t).append(i)}},_getToolbarItems(e){const n=this.option("toolbarItems"),t=[];this._toolbarItemClasses=[];const i=je.current().platform;let o=0;return Ee(n,(r,c)=>{const v=Ie(c.shortcut),S=v?(e=>{const n=je.current(),{platform:t}=n;let i="bottom",o="before";if("ios"===t)switch(e){case"cancel":i="top";break;case"clear":i="top",o="after";break;case"done":o="after"}else if("android"===t)switch(e){case"cancel":case"done":o="after"}return{toolbar:i,location:o}})(c.shortcut):c;if(v&&"ios"===i&&o<2&&(S.toolbar="top",o++),S.toolbar=c.toolbar||S.toolbar||"top",S&&S.toolbar===e){v&&pe(S,{location:c.location},this._getToolbarItemByAlias(c));const T="generic"===i;"done"===c.shortcut&&T||"cancel"===c.shortcut&&!T?t.unshift(S):t.push(S)}}),"top"===e&&this._hasCloseButton()&&t.push(this._getCloseButton()),t},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:e=>"done"===e.toLowerCase()?"OK":pu(e,!0),_getToolbarButtonStylingMode(e){return Go()?"done"===e?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"},_getToolbarButtonType(e){return Go()&&"done"===e||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias(e){const n=this,t=e.shortcut;if(!fk.includes(t))return!1;const i=pe({text:de.format(this._getLocalizationKey(t)),onClick:this._createToolbarItemAction(e.onClick),integrationOptions:{},type:this._getToolbarButtonType(t),stylingMode:this._getToolbarButtonStylingMode(t)},e.options||{}),o=`dx-popup-${t}`;return this._toolbarItemClasses.push(o),{template(r,c,v){const S=V("<div>").addClass(o).appendTo(v);n._createComponent(S,bo,i)}}},_createToolbarItemAction(e){return this._createAction(e,{afterExecute(n){n.component.hide()}})},_renderBottom(){const e=this._getToolbarItems("bottom");if(e.length){this._$bottom&&this._$bottom.remove();const n=V("<div>").addClass("dx-popup-bottom").insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",e,n,{compactMode:!0}).addClass("dx-popup-bottom"),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState(e){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",!!e)},_toggleClasses(){Ee(fk,(n,t)=>{const i=`dx-popup-${t}`;this._toolbarItemClasses.includes(i)?(this.$wrapper().addClass(`${i}-visible`),this._$bottom.addClass(i)):(this.$wrapper().removeClass(`${i}-visible`),this._$bottom.removeClass(i))})},_toggleFocusClass(e,n){if(this.callBase(e,n),e&&!(e=>Sr.length&&Sr[Sr.length-1]===this._zIndex)()){const t=Gp(this._zIndexInitValue());Mu(this._zIndex),this._zIndex=t,this._$wrapper.css("zIndex",t),this._$content.css("zIndex",t)}},_toggleContentScrollClass(){const e=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",e)},_getPositionControllerConfig(){const{fullScreen:e,forceApplyBindings:n,dragOutsideBoundary:t,dragAndResizeArea:i,outsideDragFactor:o}=this.option();return pe({},this.callBase(),{fullScreen:e,forceApplyBindings:n,dragOutsideBoundary:t,dragAndResizeArea:i,outsideDragFactor:o})},_initPositionController(){this._positionController=new _Y(this._getPositionControllerConfig())},_getDragTarget(){return this.topToolbar()},_renderGeometry(e){const{visible:n,useResizeObserver:t}=this.option();if(n&&Ke()){const o=this._showAnimationProcessing&&!(null!=e&&e.forceStopAnimation)&&t;this._isAnimationPaused=o||void 0,this._stopAnimation(),null!=e&&e.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(e?.isDimensionChange),o&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt(Xe(this._$content),10),height:parseInt(ut(this._$content),10)})},_renderGeometryImpl(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag(){const e=this._getDragTarget(),n=this.option("dragEnabled");if(!e)return;const t={dragEnabled:n,handle:e.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(t):this._drag=new class hY{constructor(n){this.init(n)}init(n){let{dragEnabled:t,handle:i,draggableElement:o,positionController:r}=n;this._positionController=r,this._draggableElement=o,this._handle=i,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(n){this._moveTo(5,0,n)}moveUp(n){this._moveTo(-5,0,n)}moveLeft(n){this._moveTo(0,-5,n)}moveRight(n){this._moveTo(0,5,n)}subscribe(){const n=this._getEventNames();ue.on(this._handle,n.startEventName,t=>{this._dragStartHandler(t)}),ue.on(this._handle,n.updateEventName,t=>{this._dragUpdateHandler(t)}),ue.on(this._handle,n.endEventName,t=>{this._dragEndHandler(t)})}unsubscribe(){const n=this._getEventNames();ue.off(this._handle,n.startEventName),ue.off(this._handle,n.updateEventName),ue.off(this._handle,n.endEventName)}_getEventNames(){return{startEventName:Te(OC,"overlayDrag"),updateEventName:Te(Xp,"overlayDrag"),endEventName:Te(bC,"overlayDrag")}}_dragStartHandler(n){const t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},n.targetElements=[],n.maxTopOffset=t.top,n.maxBottomOffset=t.bottom,n.maxLeftOffset=t.left,n.maxRightOffset=t.right}_dragUpdateHandler(n){this._moveByOffset({top:n.offset.y-this._prevOffset.y,left:n.offset.x-this._prevOffset.x}),this._prevOffset=n.offset}_dragEndHandler(n){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(n)}_moveTo(n,t,i){if(!this._dragEnabled)return;i.preventDefault(),i.stopPropagation();const o=this._fitOffsetIntoAllowedRange(n,t);this._moveByOffset(o),this._dragEndHandler(i)}_fitOffsetIntoAllowedRange(n,t){const i=this._getAllowedOffsets();return{top:Ci(n,-i.top,i.bottom),left:Ci(t,-i.left,i.right)}}_getContainerDimensions(){const n=Pe.getDocument(),t=this._positionController.$dragResizeContainer.get(0);let i=qt(t),o=et(t);return $t(t)&&(o=Math.max(n.body.clientHeight,o),i=Math.max(n.body.clientWidth,i)),{width:i,height:o}}_getContainerPosition(){const n=this._positionController.$dragResizeContainer.get(0);return $t(n)?{top:0,left:0}:cu(n)}_getElementPosition(){return cu(this._draggableElement)}_getInnerDelta(){const n=this._getContainerDimensions(),t=this._getElementDimensions();return{x:n.width-t.width,y:n.height-t.height}}_getOuterDelta(){const{width:n,height:t}=this._getElementDimensions(),{outsideDragFactor:i}=this._positionController;return{x:n*i,y:t*i}}_getFullDelta(){const n=this._getInnerDelta(),t=this._getOuterDelta();return{x:n.x+t.x,y:n.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const n=this._getFullDelta();if(!(n.y>=0&&n.x>=0))return{top:0,bottom:0,left:0,right:0};const i=this._getElementPosition(),o=this._getContainerPosition(),r=this._getOuterDelta();return{top:i.top-o.top+r.y,bottom:-i.top+o.top+n.y,left:i.left-o.left+r.x,right:-i.left+o.left+n.x}}_moveByOffset(n){const t=Nn(this._draggableElement);Tn(this._draggableElement,{left:t.left+n.left,top:t.top+n.top})}}(t),this.$overlayContent().toggleClass("dx-popup-draggable",n)},_renderResize(){this._resizable=this._createComponent(this._$content,dY,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:e=>{this._resizeEndHandler(e),this._observeContentResize(!0)},onResize:e=>{this._setContentHeight(),this._actions.onResize(e)},onResizeStart:e=>{this._observeContentResize(!1),this._actions.onResizeStart(e)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler(e){const n=this._resizable.option("width"),t=this._resizable.option("height");n&&this._setOptionWithoutOptionChange("width",n),t&&this._setOptionWithoutOptionChange("height",t),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(e.event),this._actions.onResizeEnd(e)},_setContentHeight(){(this.option("forceApplyBindings")||De)();const e=this.$overlayContent().get(0),n=this._chooseHeightStrategy(e);this.$content().css(this._getHeightCssStyles(n,e)),this._setHeightClasses(this.$overlayContent(),n)},_heightStrategyChangeOffset:(e,n)=>e===cs.flex?-n:0,_chooseHeightStrategy(e){const n="auto"===e.style.width||""===e.style.width;let t=cs.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(t=n||yY?cs.inherit:cs.flex),t},_getHeightCssStyles(e,n){let t={};const i=this._getOptionValue("maxHeight",n),o=this._getOptionValue("minHeight",n),r=this._splitPopupHeight(),c=r.header+r.footer+r.contentVerticalOffsets+r.popupVerticalOffsets+this._heightStrategyChangeOffset(e,r.popupVerticalPaddings);if(e===cs.static){if(!this._isAutoHeight()||i||o){const S=(this.option("fullScreen")?Math.min(Li(n).height,ot().innerHeight):Li(n).height)-c;t={height:Math.max(0,S),minHeight:"auto",maxHeight:"auto"}}}else{const v=V(this._positionController.$visualContainer).get(0),S=function(e,n,t){const i=VP(e,n,t);return null!==i?i:"none"}(i,-c,v);t={height:"auto",minHeight:O3(o,-c,v),maxHeight:S}}return t},_setHeightClasses(e,n){let t="";for(const i in cs)cs[i]!==n&&(t+=` ${cs[i]}`);e.removeClass(t).addClass(n)},_isAutoHeight(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight(){const e=this.topToolbar(),n=this.bottomToolbar();return{header:zP(e&&e.get(0)),footer:zP(n&&n.get(0)),contentVerticalOffsets:Qv(this.$overlayContent().get(0),!0),popupVerticalOffsets:Qv(this.$content().get(0),!0),popupVerticalPaddings:Qv(this.$content().get(0),!1)}},_isAllWindowCovered(){return this.callBase()||this.option("fullScreen")},_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),Ke()&&this._renderFullscreenWidthClass()},_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})},_clean(){this.callBase(),this._observeContentResize(!1)},_dispose(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",qt(this.$overlayContent())===Xe(vY))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll(e){if(!this._bodyOverflowManager)return;const{setOverflow:n,restoreOverflow:t}=this._bodyOverflowManager;e?t():n()},refreshPosition(){this._renderPosition()},_optionChanged(e){var n;const{value:t,name:i}=e;switch(i){case"disabled":this.callBase(e),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(t);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),Cr(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),Cr(this.$overlayContent());break;case"container":var o;this.callBase(e),this.option("resizeEnabled")&&(null===(o=this._resizable)||void 0===o||o.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(e),null===(n=this._resizable)||void 0===n||n.option(i,t);break;case"onTitleRendered":this._createTitleRenderAction(t);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":{const r=!e.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),r&&(this._renderGeometry(),Cr(this.$overlayContent()));break}case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=t,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=t,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=t;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),Cr(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=t,this._toggleFullScreenClass(t),this._toggleSafariScrolling(),this._renderGeometry(),Cr(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(e),this._toggleContentScrollClass();break;default:this.callBase(e)}},bottomToolbar(){return this._$bottom},topToolbar(){return this._$title},$content(){return this._$popupContent},content(){return st(this.$content())},$overlayContent(){return this._$content},getFocusableElements(){return this.$wrapper().find("[tabindex]").filter((e,n)=>n.getAttribute("tabindex")>=0)}});xt("dxPopup",gk);const Tf=gk,mk="dxswipestart",_k="dxswipe",hx="dxswipeend",xY={horizontal:{defaultItemSizeFunc:function(){return Xe(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(e){return(an(e).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){const n=an(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(n.x-this._tickData.x)>=n.time-this._tickData.time}},vertical:{defaultItemSizeFunc:function(){return ut(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(e){return(an(e).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){const n=an(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(n.y-this._tickData.y)>=n.time-this._tickData.time}}},OY=xC.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(e){this.callBase(e),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return xY[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(e){this._tickData=an(e)},_start:function(e){this._savedEventData=an(e),(e=this._fireEvent("dxswipestart",e)).cancel||(this._maxLeftOffset=e.maxLeftOffset,this._maxRightOffset=e.maxRightOffset,this._maxTopOffset=e.maxTopOffset,this._maxBottomOffset=e.maxBottomOffset)},_move:function(e){const n=this._getStrategy(),t=an(e);let i=n.calcOffsetRatio.call(this,e);i=this._fitOffset(i,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent("dxswipe",e,{offset:i}),!1!==e.cancelable&&e.preventDefault()},_end:function(e){const n=this._getStrategy(),t=n.calcOffsetRatio.call(this,e),i=n.isFastSwipe.call(this,e);let o=t,r=this._calcTargetOffset(t,i);o=this._fitOffset(o,this.elastic),r=this._fitOffset(r,!1),this._fireEvent("dxswipeend",e,{offset:o,targetOffset:r})},_fitOffset:function(e,n){const i=this._getStrategy().getBounds.call(this);return e<-i[0]?n?(-2*i[0]+e)/3:-i[0]:e>i[1]?n?(2*i[1]+e)/3:i[1]:e},_calcTargetOffset:function(e,n){let t;return n?(t=Math.ceil(Math.abs(e)),e<0&&(t=-t)):t=Math.round(e),t}});function SY(e,n){const t=function sd(e){var n,t;return e&&Ke()?null===(n=(t=ot()).getComputedStyle)||void 0===n?void 0:n.call(t,e):null}(e);return t?function bY(e){return e?Number(e.replace("px","")):0}(t[`margin${fu(n)}`]):0}Dl({emitter:OY,events:["dxswipestart","dxswipe","dxswipeend"]});const Mf=WC.inherit({_getDefaultOptions(){return pe(this.callBase(),{repaintChangesOnly:!1})},ctor(){var e;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=n=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&n.storeLoadOptions&&(n.storeLoadOptions.skip+=this._correctionIndex)},null===(e=this._dataController)||void 0===e||e.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload(){this._correctionIndex=0},_init(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey(e){let n=V();const t=this.key();return this.itemElements().each((i,o)=>{const r=V(o),c=this._getItemData(r);if(t?ef(t,this.keyOf(c),e):this._isItemEquals(c,e))return n=r,!1}),n},_dataSourceChangedHandler(e,n){null!=n&&n.changes?this._modifyByChanges(n.changes):(this.callBase(e,n),this._refreshItemsCache())},_isItemEquals(e,n){e&&e.__dx_key__&&(e=e.data);try{return JSON.stringify(e)===JSON.stringify(n)}catch{return e===n}},_isItemStrictEquals(e,n){return this._isItemEquals(e,n)},_shouldAddNewGroup(e,n){let t=!1;return this.option("grouped")&&(e.length||(t=!0),Ee(e,(i,o)=>{"insert"===o.type&&(t=!0,Ee(n,(r,c)=>{if(void 0!==o.data.key&&o.data.key===c.key)return t=!1,!1}))})),t},_partialRefresh(){if(this.option("repaintChangesOnly")){const e=t=>t&&void 0!==t.__dx_key__?t.__dx_key__:this.keyOf(t),n=function(e,n,t,i){const o={},r={};let c=0,v=0;const S=[];e.forEach(function(F,N){const B=cf(F,t);o[B]=N}),n.forEach(function(F,N){const B=cf(F,t);r[B]=N});const T=Math.max(e.length,n.length);for(let F=0;F<T+c;F++){const N=n[F],B=F-c+v,X=e[B];if(!N||X&&!iq(X,n,r,t))X&&(S.push({type:"remove",key:t(X),index:F,oldItem:X}),v++,F--);else{const le=cf(N,t),he=o[le],Oe=e[he];if(Oe){if(he!==B)return;i(Oe,N)||S.push({type:"update",data:N,key:t(N),index:F,oldItem:Oe})}else c++,S.push({type:"insert",data:N,index:F})}}return S}(this._itemsCache,this._editStrategy.itemsGetter(),e,this._isItemStrictEquals.bind(this));if(n&&this._itemsCache.length&&!this._shouldAddNewGroup(n,this._itemsCache))return this._modifyByChanges(n,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache(){if(this.option("repaintChangesOnly")){const e=this._editStrategy.itemsGetter();try{this._itemsCache=pe(!0,[],e),this.key()||(this._itemsCache=this._itemsCache.map((n,t)=>({__dx_key__:e[t],data:n})))}catch{this._itemsCache=pe([],e)}}},_dispose(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange(e,n,t,i){if(i)this._renderItem(t.index,t.data,null,this._findItemElementByKey(t.key));else{const o=n[Ws(e,n,t.key)];o&&MC(e,n,t.key,t.data).done(()=>{this._renderItem(n.indexOf(o),o,null,this._findItemElementByKey(t.key))})}},_insertByChange(e,n,t,i){Ft(i||AC(e,n,t.data,t.index)).done(()=>{this._beforeItemElementInserted(t),this._renderItem(t.index??n.length,t.data),this._afterItemElementInserted(),this._correctionIndex++})},_updateSelectionAfterRemoveByChange(e){const n=this.option("selectedIndex");n>e?this.option("selectedIndex",n-1):n===e&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted(e){const n=this.option("selectedIndex");e.index<=n&&this.option("selectedIndex",n+1)},_afterItemElementInserted:De,_removeByChange(e,n,t,i){const o=i?t.index:Ws(e,n,t.key);if(i?t.oldItem:n[o]){const c=this._findItemElementByKey(t.key),v=this._extendActionArgs(c);this._waitDeletingPrepare(c).done(()=>{i?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(c,v),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(c,v))}),this._correctionIndex--}},_modifyByChanges(e,n){const t=this._editStrategy.itemsGetter(),i={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,r=o.paginate(),c=o.group();(r||c)&&(e=e.filter(v=>"insert"!==v.type||void 0!==v.index)),e.forEach(v=>this[`_${v.type}ByChange`](i,t,v,n)),this._renderedItemsCount=t.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer(e,n,t){const i=e.children(this._itemSelector()).get(t);Pe.insertElement(e.get(0),n.get(0),i)},_optionChanged(e){switch(e.name){case"items":this._partialRefresh(e.value)||this.callBase(e);break;case"dataSource":(!this.option("repaintChangesOnly")||!e.value)&&this.option("items",[]),this.callBase(e);break;case"repaintChangesOnly":break;default:this.callBase(e)}}}),vk=wl.inherit({_supportedKeys(){return pe(this.callBase(),{escape:De})},_getDefaultOptions(){return pe(this.callBase(),{message:de.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:()=>Fi(),options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:()=>Go(),options:{width:"auto",height:"auto"}}])},_init(){this.callBase.apply(this,arguments)},_render(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._updateWrapperAria()},_updateWrapperAria(){if(this.$wrapper().removeAttr("aria-label").removeAttr("role"),!this.option("showIndicator")){const n=this._getAriaAttributes();this.$wrapper().attr(n)}},_getAriaAttributes(){const{message:e}=this.option();return{role:"alert","aria-label":e||de.format("Loading")}},_renderContentImpl(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=V("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show(){const e=this.option("delay");if(!e)return this.callBase();const n=Ae(),t=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(()=>{t().done(()=>{n.resolve()})},e),n.promise()},_hide(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout(){clearTimeout(this._showTimeout)},_renderMessage(){if(!this._$loadPanelContentWrapper)return;const e=this.option("message");if(!e)return;const n=V("<div>").addClass("dx-loadpanel-message").text(e);this._$loadPanelContentWrapper.append(n)},_renderLoadIndicator(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=V("<div>").addClass("dx-loadpanel-indicator").appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,Us,{elementAttr:this._getAriaAttributes(),indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent(){this.$content().find(".dx-loadpanel-message").remove(),this.$content().find(".dx-loadpanel-indicator").remove(),delete this._$indicator},_togglePaneVisible(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged(e){switch(e.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._updateWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(e)}},_dispose(){this._clearShowTimeout(),this.callBase()}});xt("dxLoadPanel",vk);const IY=vk,px="dxScrollbar",yk="horizontal";let Bl=null;const wY=vi.inherit({_getDefaultOptions(){return pe(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:"onScroll",containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init(){this.callBase(),this._isHovered=!1},_initMarkup(){this._renderThumb(),this.callBase()},_render(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass("dx-scrollbar-hoverable",this.option("hoverStateEnabled"))},_renderThumb(){this._$thumb=V("<div>").addClass("dx-scrollable-scroll"),V("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb(e){return!!this.$element().find(e).length},_isHoverMode(){const e=this.option("visibilityMode");return("onHover"===e||"always"===e)&&this.option("expandable")},_renderDirection(){const e=this.option("direction");this.$element().addClass(`dx-scrollbar-${e}`),this._dimension=e===yk?"width":"height",this._prop=e===yk?"left":"top"},_attachPointerDownHandler(){ue.on(this._$thumb,Te(Wt.down,px),this.feedbackOn.bind(this))},feedbackOn(){this.$element().addClass("dx-scrollable-scrollbar-active"),Bl=this},feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),Bl=null},cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility(e){"onScroll"===this.option("visibilityMode")&&this._$thumb.css("opacity"),e=this._adjustVisibility(e),this.option().visible=e,this._$thumb.toggleClass("dx-state-invisible",!e)},_adjustVisibility(e){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case"onScroll":break;case"onHover":e=e||!!this._isHovered;break;case"never":e=!1;break;case"always":e=!0}return e},moveTo(e){if(this._isHidden())return;lt(e)&&(e=e[this._prop]||0);const n={};n[this._prop]=this._calculateScrollBarPosition(e),Tn(this._$thumb,n)},_calculateScrollBarPosition(e){return-e*this._thumbRatio},_update(){const e=Math.round(this.option("containerSize")),n=Math.round(this.option("contentSize"));let t=Math.round(this.option("baseContainerSize")),i=Math.round(this.option("baseContentSize"));isNaN(t)&&(t=e,i=n),this._baseContainerToContentRatio=i?t/i:t,this._realContainerToContentRatio=n?e/n:e;const o=Math.round(Math.max(Math.round(e*this._realContainerToContentRatio),15));this._thumbRatio=(e-o)/(this.option("scaleRatio")*(n-e)),this.option(this._dimension,o/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden(){return"never"===this.option("visibilityMode")},_needScrollbar(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio(){return this._realContainerToContentRatio},_normalizeSize(e){return lt(e)?e[this._dimension]||0:e},_clean(){this.callBase(),this===Bl&&(Bl=null),ue.off(this._$thumb,`.${px}`)},_optionChanged(e){if(!this._isHidden())switch(e.name){case"containerSize":case"contentSize":this.option()[e.name]=this._normalizeSize(e.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:dl(function(){this._adjustVisibility()&&this.option("visible",!0)})});Qi.add(()=>{ue.subscribeGlobal(Pe.getDocument(),Te(Wt.up,px),()=>{Bl&&Bl.feedbackOff()})});const Ck=wY,xk="dxNativeScrollable",ad="vertical",Af="horizontal",fx=Tt.inherit({ctor(e){this._init(e)},_init(e){this._component=e,this._$element=e.$element(),this._$container=V(e.container()),this._$content=e.$content(),this._direction=e.option("direction"),this._useSimulatedScrollbar=e.option("useSimulatedScrollbar"),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e),this._isRtlNativeStrategy=e._isRtlNativeStrategy.bind(e)},render(){const n=je.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${n}`).toggleClass("dx-scrollable-scrollbars-hidden",!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition(e){e&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass("dx-scrollable-scrollbar-simulated"),this._renderScrollbar(ad),this._renderScrollbar(Af)},_renderScrollbar(e){this._isDirection(e)&&(this._scrollbars[e]=new Ck(V("<div>").appendTo(this._$element),{direction:e,expandable:this._component.option("scrollByThumb")}))},handleInit:De,handleStart:De,handleMove(e){this._isLocked()?e.cancel=!0:this._allowedDirection()&&(e.originalEvent.isScrollingEvent=!0)},handleEnd:De,handleCancel:De,handleStop:De,_eachScrollbar(e){e=e.bind(this),Ee(this._scrollbars||{},(n,t)=>{e(t,n)})},createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs(){const{left:e,top:n}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-e):this._isReachedLeft(e),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(e)):this._isReachedRight(e),reachedTop:this._isDirection(ad)?Math.round(n)>=0:void 0,reachedBottom:this._isDirection(ad)?Math.round(Math.abs(n)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset(){const{top:e,left:n}=this.location();return{top:-e,left:this._normalizeOffsetLeft(-n)}},_normalizeOffsetLeft(e){return this._isRtlNativeStrategy()?this._getMaxOffset().left+e:e},_isReachedLeft(e){return this._isDirection(Af)?Math.round(e)>=0:void 0},_isReachedRight(e){return this._isDirection(Af)?Math.round(Math.abs(e)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible(){const{showScrollbar:e}=this.option();return"never"!==e&&!1!==e},handleScroll(e){this._eventForUserAction=e,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars(){const{top:e,left:n}=this._getScrollOffset();this._eachScrollbar(t=>{t.moveTo({top:-e,left:-n}),t.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(()=>{this._eachScrollbar(e=>{e.option("visible",!1)})},500)},location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:De,update(){this._update(),this._updateAction(this._createActionArgs())},_update(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions(){this._containerSize={height:ut(this._$container),width:Xe(this._$container)},this._componentContentSize={height:ut(this._component.$content()),width:Xe(this._component.$content())},this._contentSize={height:ut(this._$content),width:Xe(this._$content)}},_updateScrollbars(){this._eachScrollbar(function(e,n){const t=n===ad?"height":"width";e.option({containerSize:this._containerSize[t],contentSize:this._componentContentSize[t]}),e.update()})},_allowedDirections(){return{vertical:this._isDirection(ad)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Af)&&this._contentSize.width>this._containerSize.width}},dispose(){const{className:e}=this._$element.get(0),n=new RegExp("dx-scrollable-native\\S*","g");n.test(e)&&this._$element.removeClass(e.match(n).join(" ")),ue.off(this._$element,`.${xk}`),ue.off(this._$container,`.${xk}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars(){this._eachScrollbar(e=>{e.$element().remove()})},scrollBy(e){const n=this.location();this._$container.scrollTop(Math.round(-n.top-e.top)),this._$container.scrollLeft(Math.round(-n.left-e.left))},validate(e){return!(this.option("disabled")||oi(e)&&this._isScrolledInMaxDirection(e)||!this._allowedDirection())},_isScrolledInMaxDirection(e){const n=this._$container.get(0);let t;return t=e.delta>0?e.shiftKey?!n.scrollLeft:!n.scrollTop:e.shiftKey?n.scrollLeft>=this._getMaxOffset().left:n.scrollTop>=this._getMaxOffset().top,t},getDirection(){return this._allowedDirection()}}),MY=fx.inherit({_init(e){this.callBase(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$refreshingText=e._$refreshingText,this._$scrollViewContent=V(e.content()),this._$container=V(e.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=bt(),this.releaseCallbacks=bt(),this.reachBottomCallbacks=bt()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const e=V("<div>").addClass("dx-scrollview-pull-down-image"),n=V("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new Us(V("<div>")).$element(),i=this._$pullDownText=V("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=V("<div>").text(this.option("pullingDownText")).appendTo(i),this._$pulledDownText=V("<div>").text(this.option("pulledDownText")).appendTo(i),this._$refreshingText=V("<div>").text(this.option("refreshingText")).appendTo(i),this._$pullDown.empty().append(e).append(n.append(t)).append(i)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const e=this;Ee([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],(t,i)=>{i.element[e._state===i.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),n=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-n.clientHeight,0)},_allowedDirections(){const e=this.callBase();return e.vertical=e.vertical||this._pullDownEnabled,e},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(()=>{this._pullDownRefreshing()},400))},_setPullDownOffset(e){Tn(this._$topPocket,{top:e}),Tn(this._$scrollViewContent,{top:e})},handleScroll(e){if(this.callBase(e),2===this._state)return;const n=this.location().top,t=(this._location||0)-n;this._location=n,this._isPullDown()?this._pullDownReady():t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){1!==this._state&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(e){e&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=e},reachBottomEnable(e){this._reachBottomEnabled=e},pendingRelease(){this._state=1},release(){const e=Ae();return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout(()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()},400),e.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),AY=fx.inherit({_init(e){this.callBase(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$scrollViewContent=V(e.content()),this._$container=V(e.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=bt(),this.releaseCallbacks=bt(),this.reachBottomCallbacks=bt()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const e=V("<div>").addClass("dx-scrollview-pull-down-indicator"),n=new Us(V("<div>")).$element();this._$icon=V("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(e.append(n))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),n=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-n.clientHeight,0)},_allowedDirections(){const e=this.callBase();return e.vertical=e.vertical||this._pullDownEnabled,e},handleInit(e){this.callBase(e),0===this._state&&0===this._location&&(this._startClientY=an(e.originalEvent).y,this._state=4)},handleMove(e){this.callBase(e),this._deltaY=an(e.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(e.preventDefault(),this._movePullDown())},_movePullDown(){const e=this._getPullDownHeight(),n=Math.min(3*e,this._deltaY+this._getPullDownStartPosition()),t=180*n/e/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",n<e),Tn(this._$pullDown,{top:n}),this._$icon.css({transform:`rotate(${t}deg)`})},_isPullDown(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*et(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*et(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){(4===this._state||5===this._state)&&this._releaseState()},handleScroll(e){if(this.callBase(e),2===this._state)return;const n=this.location().top,t=this._location-n;this._location=n,t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),Tn(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(e){this._$topPocket.toggle(e),this._pullDownEnabled=e},reachBottomEnable(e){this._reachBottomEnabled=e},pendingRelease(){this._state=1},release(){const e=Ae();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()},800),e.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),{abstract:RY}=Tt,Ok=Tt.inherit({ctor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start(){this._stopped=!1,this._finished=!1,this._stepCore()},stop(){this._stopped=!0,$o(this._stepAnimationFrame)},_stepCore(){if(!this._isStopped())return this._isFinished()?(this._finished=!0,void this._complete()):(this._step(),void(this._stepAnimationFrame=yu(this._proxiedStepCore)));this._stop()},_step:RY,_isFinished:De,_stop:De,_complete:De,_isStopped(){return this._stopped},inProgress(){return!(this._stopped||this._finished)}}),bk="dxSimulatedScrollable",Rf=`${bk}Cursor`,gx=`${bk}Keyboard`,qo="vertical",Bn="horizontal",NY=(1-.92**(400/Math.round(1e3/60)))/(1-.92),Sk=Ok.inherit({ctor(e){this.callBase(),this.scroller=e},VELOCITY_LIMIT:1,_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration(){return this.scroller._inBounds()?.92:.5},_complete(){this.scroller._scrollComplete()}}),HY=Sk.inherit({VELOCITY_LIMIT:.2,_isFinished(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:()=>.92,_complete(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),Dk=Tt.inherit({ctor(e){this._initOptions(e),this._initAnimators(),this._initScrollbar()},_initOptions(e){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=e.direction===Bn?"x":"y",this._prop=e.direction===Bn?"left":"top",this._dimension=e.direction===Bn?"width":"height",this._scrollProp=e.direction===Bn?"scrollLeft":"scrollTop",Ee(e,(n,t)=>{this[`_${n}`]=t})},_initAnimators(){this._inertiaAnimator=new Sk(this),this._bounceAnimator=new HY(this)},_initScrollbar(){this._scrollbar=new Ck(V("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:e=>!0===e?"onScroll":!1===e?"never":e,_scrollStep(e){const n=this._location;this._location+=e,this._suppressBounce(),this._move(),!(Math.abs(n-this._location)<1)&&ue.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation(e){return e=void 0!==e?e:this._location,Math.max(Math.min(e,this._maxOffset),this._minOffset)},_move(e){this._location=void 0!==e?e*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent(){const e=this._location;this._$container[this._scrollProp](-e/this._getScaleRatio()),this._moveContentByTranslator(e)},_getScaleRatio(){if(Ke()&&!this._scaleRatio){const e=this._$element.get(0),n=this._getRealDimension(e,this._dimension),t=this._getBaseDimension(e,this._dimension);this._scaleRatio=Math.round(n/t*100)/100}return this._scaleRatio||1},_getRealDimension:(e,n)=>Math.round(Li(e)[n]),_getBaseDimension:(e,n)=>e[`offset${fu(n)}`],_moveContentByTranslator(e){let n;const t=-this._maxScrollPropValue;if(n=e>0?e:e<=t?e-t:e%1,this._translateOffset===n)return;const i={};i[this._prop]=n,this._translateOffset=n,0!==n?Tn(this._$content,i):iC(this._$content)},_moveScrollbar(){this._scrollbar.moveTo(this._location)},_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce(){const n=(this._bounceLocation=this._boundLocation())-this._location;this._velocity=n/NY},_inBounds(e){return this._boundLocation(e=void 0!==e?e:this._location)===e},_crossBoundOnNextStep(){const e=this._location,n=e+this._velocity;return e<this._minOffset&&n>=this._minOffset||e>this._maxOffset&&n<=this._maxOffset},_initHandler(e){this._stopScrolling(),this._prepareThumbScrolling(e)},_stopScrolling:dl(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling(e){if(oi(e.originalEvent))return;const n=V(e.originalEvent.target),t=this._isScrollbar(n);t&&this._moveToMouseLocation(e),this._thumbScrolling=t||this._isThumb(n),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(n),this._thumbScrolling&&this._scrollbar.feedbackOn()},_isThumbScrollingHandler(e){return this._isThumb(e)},_moveToMouseLocation(e){const n=e[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],t=this._location+n/this._containerToContentRatio()-ut(this._$container)/2;this._scrollStep(-Math.round(t))},_startHandler(){this._showScrollbar()},_moveHandler(e){this._crossThumbScrolling||(this._thumbScrolling&&(e[this._axis]=-Math.round(e[this._axis]/this._containerToContentRatio())),this._scrollBy(e))},_scrollBy(e){e=e[this._axis],this._inBounds()||(e*=.5),this._scrollStep(e)},_scrollByHandler(e){this._scrollBy(e),this._scrollComplete()},_containerToContentRatio(){return this._scrollbar.containerToContentRatio()},_endHandler(e){return this._completeDeferred=Ae(),this._velocity=e[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler(){this._update(),this._moveToBounds()},_update(){return this._stopScrolling(),Wv(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),_r(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio(){this._scaleRatio=null},_updateLocation(){this._location=(Nn(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:()=>0,_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:MP(function(){const e=this._containerSize(),n=this._contentSize(),t=this._getBaseDimension(this._$container.get(0),this._dimension),i=this._getBaseDimension(this._$content.get(0),this._dimension);_r(()=>{this._scrollbar.option({containerSize:e,contentSize:n,baseContainerSize:t,baseContentSize:i,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:dl(MP(dl(function(){const e=this._boundLocation(),n=e!==this._location;this._location=e,this._move(),n&&this._scrollAction()}))),_createActionsHandler(e){this._scrollAction=e.scroll,this._bounceAction=e.bounce},_showScrollbar(){this._scrollbar.option("visible",!0)},_hideScrollbar(){this._scrollbar.option("visible",!1)},_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize(){const e="hidden"===this._$content.css(`overflow${this._axis.toUpperCase()}`);let n=this._getRealDimension(this._$content.get(0),this._dimension);if(!e){const t=this._$content[0][`scroll${fu(this._dimension)}`]*this._getScaleRatio();n=Math.max(t,n)}return n},_validateEvent(e){const n=V(e.originalEvent.target);return this._isThumb(n)||this._isScrollbar(n)},_isThumb(e){return this._scrollByThumb&&this._scrollbar.isThumb(e)},_isScrollbar(e){return this._scrollByThumb&&e&&e.is(this._$scrollbar)},_reachedMin(){return Math.round(this._location-this._minOffset)<=0},_reachedMax(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler(){this._scrollbar.cursorLeave()},dispose:De});let So,Vl;const Ik=Tt.inherit({ctor(e){this._init(e)},_init(e){this._component=e,this._$element=e.$element(),this._$container=V(e.container()),this._$wrapper=e._$wrapper,this._$content=e.$content(),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e)},render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers(){this._scrollers={},this._isDirection(Bn)&&this._createScroller(Bn),this._isDirection(qo)&&this._createScroller(qo),this._$element.toggleClass("dx-scrollable-scrollbars-alwaysvisible","always"===this.option("showScrollbar"))},_createScroller(e){this._scrollers[e]=new Dk(this._scrollerOptions(e))},_scrollerOptions(e){return{direction:e,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio(e){for(const n in this._scrollers){const t=this._getPropByDirection(n);Ie(e[t])&&(e[t]*=this._scrollers[n]._getScaleRatio())}return e},_isAnyThumbScrolling(e){let n=!1;return this._eventHandler("isThumbScrolling",e).done((t,i)=>{n=t||i}),n},handleInit(e){this._suppressDirections(e),this._eventForUserAction=e,this._eventHandler("init",e)},_suppressDirections(e){oi(e.originalEvent)?this._prepareDirections(!0):(this._prepareDirections(),this._eachScroller(function(n,t){const i=V(e.originalEvent.target),o=n._validateEvent(e)||this.option("scrollByContent")&&this._isContent(i);this._validDirections[t]=o}))},_isContent(e){return!!e.closest(this._$element).length},_prepareDirections(e){e=e||!1,this._validDirections={},this._validDirections[Bn]=e,this._validDirections[qo]=e},_eachScroller(e){e=e.bind(this),Ee(this._scrollers,(n,t)=>{e(t,n)})},handleStart(e){this._eventForUserAction=e,this._eventHandler("start").done(this._startAction)},_saveActive(){Vl=this},_resetActive(){Vl===this&&(Vl=null)},handleMove(e){if(this._isLocked())return e.cancel=!0,void this._resetActive();this._saveActive(),e.preventDefault&&e.preventDefault(),this._adjustDistance(e,e.delta),this._eventForUserAction=e,this._eventHandler("move",e.delta)},_adjustDistance(e,n){n.x*=this._validDirections[Bn],n.y*=this._validDirections[qo];const t=this._tryGetDevicePixelRatio();t&&oi(e.originalEvent)&&(n.x=Math.round(n.x/t*100)/100,n.y=Math.round(n.y/t*100)/100)},_tryGetDevicePixelRatio(){if(Ke())return ot().devicePixelRatio},handleEnd(e){return this._resetActive(),this._refreshCursorState(e.originalEvent&&e.originalEvent.target),this._adjustDistance(e,e.velocity),this._eventForUserAction=e,this._eventHandler("end",e.velocity).done(this._endAction)},handleCancel(e){return this._resetActive(),this._eventForUserAction=e,this._eventHandler("end",{x:0,y:0})},handleStop(){this._resetActive(),this._eventHandler("stop")},handleScroll(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler(){ue.off(this._$element,`.${gx}`),!this.option("disabled")&&this.option("useKeyboard")&&ue.on(this._$element,Te("keydown",gx),this._keyDownHandler.bind(this))},_keyDownHandler(e){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{"tab"===$n(e)&&this._eachScroller(t=>{t._updateHandler()})}),!this._$container.is(Pe.getActiveElement(this._$container.get(0))))return;let n=!0;switch($n(e)){case"downArrow":this._scrollByLine({y:1});break;case"upArrow":this._scrollByLine({y:-1});break;case"rightArrow":this._scrollByLine({x:1});break;case"leftArrow":this._scrollByLine({x:-1});break;case"pageDown":this._scrollByPage(1);break;case"pageUp":this._scrollByPage(-1);break;case"home":this._scrollToHome();break;case"end":this._scrollToEnd();break;default:n=!1}n&&(e.stopPropagation(),e.preventDefault())},_scrollByLine(e){const n=this._tryGetDevicePixelRatio();let t=40;n&&(t=Math.abs(t/n*100)/100),this.scrollBy({top:(e.y||0)*-t,left:(e.x||0)*-t})},_scrollByPage(e){const n=this._wheelProp(),t=this._dimensionByProp(n),i={};i[n]=e*-("width"===t?Xe:ut)(this._$container),this.scrollBy(i)},_dimensionByProp:e=>"left"===e?"width":"height",_getPropByDirection:e=>e===Bn?"left":"top",_scrollToHome(){const n={};n[this._wheelProp()]=0,this._component.scrollTo(n)},_scrollToEnd(){const e=this._wheelProp(),t={},i="width"===this._dimensionByProp(e)?Xe:ut;t[e]=i(this._$content)-i(this._$container),this._component.scrollTo(t)},createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler(e){const n=this._createActionByOption(e);return()=>{n(pe(this._createActionArgs(),arguments))}},_createActionArgs(){const{horizontal:e,vertical:n}=this._scrollers,t=this._getScrollOffset();return this._scrollOffset={top:n&&t.top,left:e&&t.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:e&&e._reachedMax(),reachedRight:e&&e._reachedMin(),reachedTop:n&&n._reachedMax(),reachedBottom:n&&n._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler(e){const n=[].slice.call(arguments).slice(1),t=ni(this._scrollers,i=>i[`_${e}Handler`].apply(i,n));return Ft.apply(V,t).promise()},location(){const e=Nn(this._$content);return e.top-=this._$container.scrollTop(),e.left-=this._$container.scrollLeft(),e},disabledChanged(){this._attachCursorHandlers()},_attachCursorHandlers(){ue.off(this._$element,`.${Rf}`),!this.option("disabled")&&this._isHoverMode()&&(ue.on(this._$element,Te("mouseenter",Rf),this._cursorEnterHandler.bind(this)),ue.on(this._$element,Te("mouseleave",Rf),this._cursorLeaveHandler.bind(this)))},_isHoverMode(){return"onHover"===this.option("showScrollbar")},_cursorEnterHandler(e){(e=e||{}).originalEvent=e.originalEvent||{},!Vl&&!e.originalEvent._hoverHandled&&(So&&So._cursorLeaveHandler(),So=this,this._eventHandler("cursorEnter"),e.originalEvent._hoverHandled=!0)},_cursorLeaveHandler(e){So!==this||Vl===So||(this._eventHandler("cursorLeave"),So=null,this._refreshCursorState(e&&e.relatedTarget))},_refreshCursorState(e){if(!this._isHoverMode()&&(!e||Vl))return;const t=V(e).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),i=t.length&&t.data("dxScrollableStrategy");So&&So!==i&&So._cursorLeaveHandler(),i&&i._cursorEnterHandler()},update(){return Ft(this._eventHandler("update").done(this._updateAction),Wv(()=>{const n=this._allowedDirections();return _r(()=>{let t=n.vertical?"pan-x":"";t=n.horizontal?"pan-y":t,t=n.vertical&&n.horizontal?"none":t,this._$container.css("touchAction",t)}),Ft().promise()}))},_allowedDirections(){const e=this.option("bounceEnabled"),n=this._scrollers[qo],t=this._scrollers[Bn];return{vertical:n&&(n._minOffset<0||e),horizontal:t&&(t._minOffset<0||e)}},_updateBounds(){this._scrollers[Bn]&&this._scrollers[Bn]._updateBounds()},_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==qo},updateRtlPosition(e){if(e&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let n=this._getMaxOffset().left-this._rtlConfig.scrollRight;n<=0&&(n=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==n&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:n}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:e,scrollLeft:n}=this._$container.get(0),t=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===t&&this._rtlConfig.clientWidth===e&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-n),this._rtlConfig.clientWidth=e,this._rtlConfig.windowPixelRatio=t}},_getWindowDevicePixelRatio:()=>Ke()?ot().devicePixelRatio:1,scrollBy(e){const n=this._scrollers[qo],t=this._scrollers[Bn];n&&(e.top=n._boundLocation(e.top+n._location)-n._location),t&&(e.left=t._boundLocation(e.left+t._location)-t._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:e.left,y:e.top}),this._endAction(),this._updateRtlConfig()},validate(e){return!(oi(e)&&ri(e)||this.option("disabled"))&&(!!this.option("bounceEnabled")||(oi(e)?this._validateWheel(e):this._validateMove(e)))},_validateWheel(e){const n=this._scrollers[this._wheelDirection(e)],t=n._reachedMin(),i=n._reachedMax();let S=(!t||!i)&&(!t&&!i||t&&e.delta>0||i&&e.delta<0);return S=S||void 0!==this._validateWheelTimer,S&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},500)),S},_validateMove(e){return!(!this.option("scrollByContent")&&!V(e.target).closest(".dx-scrollable-scrollbar").length)&&this._allowedDirection()},getDirection(e){return oi(e)?this._wheelDirection(e):this._allowedDirection()},_wheelProp(){return this._wheelDirection()===Bn?"left":"top"},_wheelDirection(e){switch(this.option("direction")){case Bn:return Bn;case qo:return qo;default:return e&&e.shiftKey?Bn:qo}},dispose(){this._resetActive(),So===this&&(So=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers(){ue.off(this._$element,`.${Rf}`),ue.off(this._$container,`.${gx}`)}}),BY=Math,VY=Dk.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const e=this;Ee([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],(t,i)=>{i.element[e._state===i.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},_initCallbacks(){this.pullDownCallbacks=bt(),this.releaseCallbacks=bt(),this.reachBottomCallbacks=bt()},_updateBounds(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const n=this._$container.get(0),t=this._$content.get(0);this._bottomBoundary=Math.max(t.clientHeight-this._bottomPocketSize-n.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){const e=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(e.scrollTop))<=1},_scrollComplete(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return BY.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=PP(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(e){this._reachBottomEnabled!==e&&(this._reachBottomEnabled=e,this._updateBounds())},_pullDownEnablingHandler(e){this._pullDownEnabled!==e&&(this._pullDownEnabled=e,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=ut(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),zY=Ik.inherit({_init(e){this.callBase(e),this._$pullDown=e._$pullDown,this._$topPocket=e._$topPocket,this._$bottomPocket=e._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=bt(),this.releaseCallbacks=bt(),this.reachBottomCallbacks=bt()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){const e=V("<div>").addClass("dx-scrollview-pull-down-image"),n=V("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new Us(V("<div>")).$element(),i=this._$pullDownText=V("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=V("<div>").text(this.option("pullingDownText")).appendTo(i),this._$pulledDownText=V("<div>").text(this.option("pulledDownText")).appendTo(i),this._$refreshingText=V("<div>").text(this.option("refreshingText")).appendTo(i),this._$pullDown.empty().append(e).append(n.append(t)).append(i)},pullDownEnable(e){this._eventHandler("pullDownEnabling",e)},reachBottomEnable(e){this._eventHandler("reachBottomEnabling",e)},_createScroller(e){const n=this,t=n._scrollers[e]=new VY(n._scrollerOptions(e));t.pullDownCallbacks.add(()=>{n.pullDownCallbacks.fire()}),t.releaseCallbacks.add(()=>{n.releaseCallbacks.fire()}),t.reachBottomCallbacks.add(()=>{n.reachBottomCallbacks.fire()})},_scrollerOptions(e){return pe(this.callBase(e),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){const e=this.callBase();return e.top+=ut(this._$topPocket),e},dispose(){Ee(this._scrollers,function(){this.dispose()}),this.callBase()}}),Ek=function(){return[{device:()=>!Cu,options:{useNative:!1}},{device:e=>!je.isSimulator()&&"desktop"===je.real().deviceType&&"generic"===e.platform,options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:Sl,showScrollbar:"onHover"}}]},Zo="dxScrollable",Xo="vertical",Ar="horizontal",mx="both",_x=bl.inherit({_getDefaultOptions(){return pe(this.callBase(),{disabled:!1,onScroll:null,direction:Xo,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:De})},_defaultOptionsRules(){return this.callBase().concat(Ek(),[{device:()=>Cu&&"android"===je.real().platform&&!Wo.mozilla,options:{useSimulatedScrollbar:!0}}])},_initOptions(e){this.callBase(e),"useSimulatedScrollbar"in e||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged(e){e?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset,this.option("_onVisibilityChanged")(this)):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup(){const e=this.$element().addClass("dx-scrollable"),n=this._$container=V("<div>").addClass("dx-scrollable-container"),t=this._$wrapper=V("<div>").addClass("dx-scrollable-wrapper");(this._$content=V("<div>").addClass("dx-scrollable-content")).append(e.contents()).appendTo(n),n.appendTo(t),t.appendTo(e)},_dimensionChanged(){this.update(),this._updateRtlPosition()},_initMarkup(){this.callBase(),this._renderDirection()},_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition(e){this._strategy.updateRtlPosition(e)},_getMaxOffset(){const{scrollWidth:e,clientWidth:n,scrollHeight:t,clientHeight:i}=V(this.container()).get(0);return{left:e-n,top:t-i}},_attachEventHandlers(){const e=this._strategy,n={getDirection:e.getDirection.bind(e),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};ue.off(this._$wrapper,`.${Zo}`),ue.on(this._$wrapper,Te("dxscrollinit",Zo),n,this._initHandler.bind(this)),ue.on(this._$wrapper,Te("dxscrollstart",Zo),e.handleStart.bind(e)),ue.on(this._$wrapper,Te("dxscroll",Zo),e.handleMove.bind(e)),ue.on(this._$wrapper,Te("dxscrollend",Zo),e.handleEnd.bind(e)),ue.on(this._$wrapper,Te("dxscrollcancel",Zo),e.handleCancel.bind(e)),ue.on(this._$wrapper,Te("dxscrollstop",Zo),e.handleStop.bind(e)),ue.off(this._$container,`.${Zo}`),ue.on(this._$container,Te("scroll",Zo),e.handleScroll.bind(e))},_validate(e){return!this._isLocked()&&(this._updateIfNeed(),this._moveIsAllowed(e))},_moveIsAllowed(e){return this._strategy.validate(e)},handleMove(e){this._strategy.handleMove(e)},_prepareDirections(e){this._strategy._prepareDirections(e)},_initHandler(){const e=this._strategy;e.handleInit.apply(e,arguments)},_renderDisabledState(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection(){this.$element().removeClass(`dx-scrollable-${Ar}`).removeClass(`dx-scrollable-${Xo}`).removeClass(`dx-scrollable-${mx}`).addClass(`dx-scrollable-${this.option("direction")}`)},_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data("dxScrollableStrategy",this._strategy)},_createStrategy(){this._strategy=this.option("useNative")?new fx(this):new Ik(this)},_createActions(){this._strategy&&this._strategy.createActions()},_clean(){this._strategy&&this._strategy.dispose()},_optionChanged(e){switch(e.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":this.callBase(e),this._updateRtlPosition();break;default:this.callBase(e)}},_resetInactiveDirection(){const e=this._getInactiveProp();if(!e||!Ke())return;const n=this.scrollOffset();n[e]=0,this.scrollTo(n)},_getInactiveProp(){const e=this.option("direction");return e===Xo?"left":e===Ar?"top":void 0},_location(){return this._strategy.location()},_normalizeLocation(e){if(lt(e)){const t=mn(e.left,e.x),i=mn(e.top,e.y);return{left:Ie(t)?-t:void 0,top:Ie(i)?-i:void 0}}const n=this.option("direction");return{left:n!==Xo?-e:void 0,top:n!==Ar?-e:void 0}},_isLocked(){return this._locked},_lock(){this._locked=!0},_unlock(){this.option("disabled")||(this._locked=!1)},_isDirection(e){const n=this.option("direction");return e===Xo?n!==Ar:e===Ar?n!==Xo:n===e},_updateAllowedDirection(){const e=this._strategy._allowedDirections();this._allowedDirectionValue=this._isDirection(mx)&&e.vertical&&e.horizontal?mx:this._isDirection(Ar)&&e.horizontal?Ar:this._isDirection(Xo)&&e.vertical?Xo:null},_allowedDirection(){return this._allowedDirectionValue},$content(){return this._$content},content(){return st(this._$content)},container(){return st(this._$container)},scrollOffset(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy(){const{useNative:e,rtlEnabled:n}=this.option();return e&&n},scrollTop(){return this.scrollOffset().top},scrollLeft(){return this.scrollOffset().left},clientHeight(){return ut(this._$container)},scrollHeight(){return et(this.$content())},clientWidth(){return Xe(this._$container)},scrollWidth(){return qt(this.$content())},update(){if(this._strategy)return Ft(this._strategy.update()).done(()=>{this._updateAllowedDirection()})},scrollBy(e){((e=this._normalizeLocation(e)).top||e.left)&&(this._updateIfNeed(),this._strategy.scrollBy(e))},scrollTo(e){e=this._normalizeLocation(e),this._updateIfNeed();let n=this._location();this.option("useNative")||(e=this._strategy._applyScaleRatio(e),n=this._strategy._applyScaleRatio(n)),this._isRtlNativeStrategy()&&(n.left-=this._getMaxOffset().left);const t=this._normalizeLocation({left:n.left-mn(e.left,n.left),top:n.top-mn(e.top,n.top)});!t.top&&!t.left||this._strategy.scrollBy(t)},scrollToElement(e,n){const t=V(e),i=this.$content().find(e).length,o=t.parents(".dx-scrollable").length-t.parents(".dx-scrollable-content").length==0;if(!i||!o)return;const r={top:0,left:0},c=this.option("direction");c!==Xo&&(r.left=this.getScrollElementPosition(t,Ar,n)),c!==Ar&&(r.top=this.getScrollElementPosition(t,Xo,n)),this.scrollTo(r)},getScrollElementPosition(e,n,t){const i=this.scrollOffset();return function WY(e,n,t,i,o){const r=He({top:0,left:0,right:0,bottom:0},o),c="vertical"===n,v=c?"top":"left",S=c?"bottom":"right",T=c?"height":"width",F=t[`offset${fu(T)}`],N=t[`client${fu(T)}`],B=t.getBoundingClientRect()[T],X=e.getBoundingClientRect()[T];let ne=1;Math.abs(B-F)>1&&(ne=B/F);const le=function jY(e,n){const t={left:0,top:0};let i=n;for(;null!==(o=i)&&void 0!==o&&o.offsetParent&&!i.classList.contains(e);){var o;const r=i.offsetParent,c=i.getBoundingClientRect(),v=r.getBoundingClientRect();t.left+=c.left-v.left,t.top+=c.top-v.top,i=i.offsetParent}return t}("dx-scrollable-content",e)[v]/ne,he=i[v],Oe=he-le+r[v],_e=he-le-X/ne+N-r[S];return Oe<=0&&_e>=0?he:he-(Math.abs(Oe)>Math.abs(_e)?_e:Oe)}(e.get(0),n,V(this.container()).get(0),i,t)},_updateIfNeed(){this.option("updateManually")||this.update()},_useTemplates:()=>!1,isRenovated:()=>!!_x.IS_RENOVATED_WIDGET});xt(Zo,_x);const wk=_x,qY={pullDown:MY,swipeDown:AY,simulated:zY},ZY=!Ke(),XY={finishLoading:De,release:De,refresh:De,scrollOffset:()=>({top:0,left:0}),_optionChanged(e){if("onUpdated"!==e.name)return this.callBase.apply(this,arguments)}},Pk=wk.inherit(ZY?XY:{_getDefaultOptions(){return pe(this.callBase(),{pullingDownText:de.format("dxScrollView-pullingDownText"),pulledDownText:de.format("dxScrollView-pulledDownText"),refreshingText:de.format("dxScrollView-refreshingText"),reachBottomText:de.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"android"===je.real().platform,options:{refreshStrategy:"swipeDown"}},{device:()=>ki(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){const e=V("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(e)},_initTopPocket(){const e=this._$topPocket=V("<div>").addClass("dx-scrollview-top-pocket"),n=this._$pullDown=V("<div>").addClass("dx-scrollview-pull-down");e.append(n),this._$content.prepend(e)},_initBottomPocket(){const e=this._$bottomPocket=V("<div>").addClass("dx-scrollview-bottom-pocket"),n=this._$reachBottom=V("<div>").addClass("dx-scrollview-scrollbottom"),t=V("<div>").addClass("dx-scrollview-scrollbottom-indicator"),i=new Us(V("<div>")).$element(),o=this._$reachBottomText=V("<div>").addClass("dx-scrollview-scrollbottom-text");this._updateReachBottomText(),n.append(t.append(i)).append(o),e.append(n),this._$content.append(e)},_initLoadPanel(){const e=V("<div>").addClass("dx-scrollview-loadpanel").appendTo(this.$element()),n={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(e,IY,n)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){const e=this.option("useNative")?this.option("refreshStrategy"):"simulated";this._strategy=new(0,qY[e])(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(e){const n=this.callBase.apply(this,arguments);return("pullDown"===e||"reachBottom"===e)&&this._tryRefreshPocketState(),n},_pullDownEnable(e){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(e),this._strategy.pullDownEnable(e),this._pullDownEnabled=e)},_reachBottomEnable(e){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(e),this._strategy.reachBottomEnable(e),this._reachBottomEnabled=e)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(e){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=e},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(e){switch(e.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(e)}},content(){return st(this._$content.children().eq(1))},release(e){return void 0!==e&&this.toggleLoading(!e),this._strategy.release()},toggleLoading(e){this._reachBottomEnable(e)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});xt("dxScrollView",Pk);const kf=Pk,Tk={_getSpecificDataSourceOption(){let e=this.option("dataSource"),n=!1,t={};return this._getGroupedOption()&&(e=>Array.isArray(e)&&e.every(n=>2===Object.keys(n).length&&"key"in n&&"items"in n&&Array.isArray(n.items)))(e)&&(t=e.reduce((i,o)=>{const r=o.items.map(c=>(dt(c)||(c={text:c},n=!0),"key"in c||(c.key=o.key),c));return i.concat(r)},[]),e={store:{type:"array",data:t},group:{selector:"key",keepInitialKeyOrder:!0}},n&&(e.searchExpr="text")),e}},QY=ju.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge(e){if(this._$element.children(".dx-list-item-badge-container").remove(),!e)return;const n=V("<div>").addClass("dx-list-item-badge-container").append(V("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(e)),t=this._$element.children(".dx-list-item-chevron-container").first();t.length>0?n.insertBefore(t):n.appendTo(this._$element)},_renderShowChevron(e){if(this._$element.children(".dx-list-item-chevron-container").remove(),!e)return;const n=V("<div>").addClass("dx-list-item-chevron-container"),t=V("<div>").addClass("dx-list-item-chevron");n.append(t).appendTo(this._$element)}}),tQ=sn("items");const vx=Mf.inherit({_activeStateUnit:[".dx-list-item",".dx-list-select-all"].join(","),_supportedKeys(){const e=this,n=function(i){let o=t(i);o.is(e.option("focusedElement"))&&(function(c,v){let S=c.position().top;"prev"===v&&(S=c.position().top-ut(e.$element())+et(c)),e.scrollTo(S)}(o,i),o=t(i)),e.option("focusedElement",st(o)),e.scrollToItem(o)};function t(i){const o=e.scrollTop(),r=ut(e.$element());let c=V(e.option("focusedElement")),v=!0;if(!c.length)return V();for(;v;){const S=c[i]();if(!S.length)break;const T=S.position().top+et(S)/2;v=T<r+o&&T>o,v&&(c=S)}return c}return pe(this.callBase(),{leftArrow:De,rightArrow:De,pageUp:()=>(n("prev"),!1),pageDown:()=>(n("next"),!1)})},_getDefaultOptions(){return pe(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:de.format("dxList-pullingDownText"),pulledDownText:de.format("dxList-pulledDownText"),refreshingText:de.format("dxList-refreshingText"),pageLoadingText:de.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:de.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:e=>e?e.showChevron:void 0,badgeExpr:e=>e?e.badge:void 0})},_defaultOptionsRules(){const e=yo();return this.callBase().concat(Ek(),[{device:()=>!Cu,options:{useNativeScrolling:!1}},{device:n=>!Cu&&!je.isSimulator()&&"desktop"===je.real().deviceType&&"generic"===n.platform,options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>Fi(e),options:{useInkRipple:!0}},{device:()=>ki(e),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged(e){e&&this._updateLoadingState(!0)},_itemClass:()=>"dx-list-item",_itemDataKey:()=>"dxListItemData",_itemContainer(){return this._$container},_getItemsContainer(){return this._$listContainer},_cleanItemContainer(){this.callBase();const e=this._getItemsContainer();V(e).empty(),e.appendTo(this._$container)},_saveSelectionChangeEvent(e){this._selectionChangeEventInstance=e},_getSelectionChangeEvent(){return this._selectionChangeEventInstance},_refreshItemElements(){this._itemElementsCache=this.option("grouped")?this._getItemsContainer().children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._getItemsContainer().children(this._itemSelector())},_modifyByChanges(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem(e,n){return this.callBase(e,n).done(function(){this._refreshItemElements()})},deleteItem(e){return this.callBase(e).done(function(){this._refreshItemElements()})},_itemElements(){return this._itemElementsCache},_itemSelectHandler(e){if("single"!==this.option("selectionMode")||!this.isItemSelected(e.currentTarget))return this.callBase(e)},_allowDynamicItemsAppend:()=>!0,_init(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=V("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions(){const e=this._scrollBottomMode(),n=this._nextButtonMode();return pe(this.callBase(),{paginate:mn(e||n,!0)})},_getGroupedOption(){return this.option("grouped")},_getGroupContainerByIndex(e){return this._getItemsContainer().find(".dx-list-group").eq(e).find(".dx-list-group-body")},_dataSourceFromUrlLoadMode:()=>"raw",_initScrollView(){const e=this.option("scrollingEnabled"),n=e&&this.option("pullRefreshEnabled"),t=e&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),function nQ(){return kf}(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!e,onScroll:this._scrollHandler.bind(this),onPullDown:n?this._pullDownHandler.bind(this):null,onReachBottom:t?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=V(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText(e){this._$listContainer.toggleClass("dx-wrap-item-text",e)},_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler(e){this._scrollAction&&this._scrollAction(e)},_initTemplates(){this._templateManager.addDefaultTemplates({group:new $s((e,n)=>{lt(n)?n.key&&e.text(n.key):e.text(String(n))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate(e,n){if(this.callBase(e,n),e.icon){const t=Qs(e.icon).addClass("dx-list-item-icon"),i=V("<div>").addClass("dx-list-item-icon-container");i.append(t),n.prepend(i)}},_getBindableFields:()=>["text","html","icon"],_updateLoadingState(e){const n=this._dataController,t=this._scrollBottomMode()&&e&&!n.isLoading()&&!this._isLastPage();this._shouldContinueLoading(t)?this._infiniteDataLoading():(this._scrollView.release(!t&&!n.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted(e){return Ie(e)&&(this._isFirstLoadCompleted=e),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler(e){this._loadIndicationSuppressed()||(e&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(()=>{var i;(this._itemElements().length||this._isDataSourceFirstLoadCompleted())&&(null===(i=this._scrollView)||void 0===i||i.startLoading())}):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),e||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler(){!this._shouldAppendItems()&&Ke()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed(e){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=e},_scrollViewIsFull(){const e=this._scrollView;return!e||ut(e.content())>ut(e.container())},_pullDownHandler(e){this._pullRefreshAction(e);const n=this._dataController;n.getDataSource()&&!n.isLoading()?(this._clearSelectedItems(),n.pageIndex(0),n.reload()):this._updateLoadingState()},_shouldContinueLoading(e){var n;const t=ut(this._scrollView.content())-ut(this._scrollView.container())<((null===(n=this._scrollView.scrollOffset())||void 0===n?void 0:n.top)??0);return e&&(!this._scrollViewIsFull()||t)},_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler(e){this._pageLoadingAction(e),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems(e){this.option("grouped")?(Ee(e,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),Fi()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent(){const e=Te(si,this.NAME),n=this.$element(),t=this.option("collapsibleGroups");n.toggleClass("dx-list-collapsible-groups",t),ue.off(n,e,".dx-list-group-header"),t&&ue.on(n,e,".dx-list-group-header",i=>{this._createAction(o=>{const r=V(o.event.currentTarget).parent();this._collapseGroupHandler(r),this.option("focusStateEnabled")&&this.option("focusedElement",st(r.find(".dx-list-item").eq(0)))},{validatingTargetName:"element"})({event:i})})},_collapseGroupHandler(e,n){const t=Ae();if(e.hasClass("dx-list-group-collapsed")===n)return t.resolve();const i=e.children(".dx-list-group-body"),o=et(i);let r=0;return 0===o&&(lu(i,"auto"),r=et(i)),e.toggleClass("dx-list-group-collapsed",n),Wn.animate(i,{type:"custom",from:{height:o},to:{height:r},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),t.resolve()}.bind(this)}),t.promise()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup(){this._itemElementsCache=V(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()},_setListAria(){const{items:e,allowItemDeleting:n}=this.option(),t=de.format(n?"dxList-listAriaLabel-deletable":"dxList-listAriaLabel");this.setAria(null!=e&&e.length?{role:"listbox",label:t}:{role:void 0,label:void 0},this._$listContainer)},_focusTarget(){return this._itemContainer()},_renderInkRipple(){this._inkRipple=lx()},_toggleActiveState(e,n,t){this.callBase.apply(this,arguments);const i=this;if(!this._inkRipple)return;const o={element:e,event:t};n?Fi()?this._inkRippleTimer=setTimeout(()=>{i._inkRipple.showWave(o)},35):i._inkRipple.showWave(o):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(o))},_postprocessRenderItem(e){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(V(e.itemElement))},_attachSwipeEvent(e){const n=Te(hx,this.NAME);ue.on(e,n,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler(e){this._itemDXEventHandler(e,"onItemSwipe",{direction:e.offset<0?"left":"right"})},_nextButtonHandler(e){this._pageLoadingAction(e);const n=this._dataController;n.getDataSource()&&!n.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup(e,n){const t=V("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),i=`dx-${(new Pn).toString()}`;this.setAria({role:"group",labelledby:i},t);const r=V("<div>").addClass("dx-list-group-header").attr("id",i).appendTo(t),c=this.option("groupTemplate"),v=this._getTemplate(n.template||c,n,e,r),S={index:e,itemData:n,container:st(r)};this._createItemByTemplate(v,S),V("<div>").addClass("dx-list-group-header-indicator").prependTo(r),this._renderingGroupIndex=e;const T=V("<div>").addClass("dx-list-group-body").appendTo(t);Ee(tQ(n)||[],(F,N)=>{this._renderItem({group:e,item:F},N,T)}),this._groupRenderAction({groupElement:st(t),groupIndex:e,groupData:n})},downInkRippleHandler(e){this._toggleActiveState(V(e.currentTarget),!0,e)},upInkRippleHandler(e){this._toggleActiveState(V(e.currentTarget),!1)},attachGroupHeaderInkRippleEvents(){const e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);const n=[e,"dxpointerdown",".dx-list-group-header",this._downInkRippleHandler],t=[e,"dxpointerup dxpointerout",".dx-list-group-header",this._upInkRippleHandler];ue.off(...n),ue.on(...n),ue.off(...t),ue.on(...t)},_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState(e){this.callBase(e),this._scrollView.option("disabled",e||!this.option("scrollingEnabled"))},_toggleNextButton(e){const n=this._dataController,t=this._getNextButton();this.$element().toggleClass("dx-has-next",e),e&&n.isLoaded()&&t.appendTo(this._itemContainer()),e||t.detach()},_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton(){const e=V("<div>").addClass("dx-list-next-button"),n=V("<div>").appendTo(e);return this._createComponent(n,bo,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:ki()?"default":void 0,integrationOptions:{}}),e},_moveFocus(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh(){if(Ke()){const e=this._scrollView.scrollTop();this.callBase(),e&&this._scrollView.scrollTo(e)}else this.callBase()},_optionChanged(e){switch(e.name){case"pageLoadMode":this._toggleNextButton(e.value),this._initScrollView();break;case"dataSource":this.callBase(e),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(e),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(e.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(e),this._scrollView.option(e.name,e.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(e),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(e);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(e)}},_extendActionArgs(e){if(!this.option("grouped"))return this.callBase(e);const n=e.closest(".dx-list-group"),t=n.find(".dx-list-item");return pe(this.callBase(e),{itemIndex:{group:n.index(),item:t.index(e)}})},expandGroup(e){const n=Ae(),t=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(t,!1).done(()=>{n.resolveWith(this)}),n.promise()},collapseGroup(e){const n=Ae(),t=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(t,!0).done(()=>{n.resolveWith(this)}),n},updateDimensions(){const e=this,n=Ae();return e._scrollView?e._scrollView.update().done(()=>{!e._scrollViewIsFull()&&e._updateLoadingState(!0),n.resolveWith(e)}):n.resolveWith(e),n.promise()},reload(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint(){this.scrollTo(0),this.callBase()},scrollTop(){return this._scrollView.scrollOffset().top},clientHeight(){return this._scrollView.clientHeight()},scrollHeight(){return this._scrollView.scrollHeight()},scrollBy(e){this._scrollView.scrollBy(e)},scrollTo(e){this._scrollView.scrollTo(e)},scrollToItem(e){const n=this._editStrategy.getItemElement(e),t=n?.get(0);this._scrollView.scrollToElement(t,{bottom:SY(t,"bottom")})},_dimensionChanged(){this.updateDimensions()}}).include(Tk);vx.ItemClass=QY;class iQ extends vx{_init(){super._init(),this._activeStateUnit=".dx-toolbar-menu-action:not(.dx-toolbar-hidden-button-group)"}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){const n=this._itemContainer();Ee(["before","center","after","menu"],(t,i)=>{const o=`_$${i}Section`;this[o]||(this[o]=V("<div>").addClass("dx-toolbar-menu-section")),this[o].appendTo(n)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".dx-scrollview-content").attr("role","menu")}_updateSections(){const n=this.$element().find(".dx-toolbar-menu-section");n.removeClass("dx-toolbar-menu-last-section"),n.not(":empty").eq(-1).addClass("dx-toolbar-menu-last-section")}_renderItem(n,t,i,o){const r=t.location??"menu",v=super._renderItem(n,t,this[`_$${r}Section`],o);return this._getItemTemplateName({itemData:t})&&v.addClass("dx-toolbar-menu-custom"),("menu"===r||"dxButton"===t.widget||"dxButtonGroup"===t.widget||t.isAction)&&v.addClass("dx-toolbar-menu-action"),"dxButton"===t.widget&&v.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===t.widget&&v.addClass("dx-toolbar-hidden-button-group"),v.addClass(t.cssClass),v}_getItemTemplateName(n){const t=super._getItemTemplateName(n),i=n.itemData;return i&&i.menuItemTemplate||t}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(n,t,i){V(n.target).closest(".dx-toolbar-menu-action").length&&super._itemClickHandler(n,t,i)}_clean(){this._getSections().empty(),super._clean()}}class oQ extends xq{_supportedKeys(){var n;let t={};return(!this.option("opened")||!(null!==(n=this._list)&&void 0!==n&&n.option("focusedElement")))&&(t=this._button._supportedKeys()),pe(super._supportedKeys(),t,{tab(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return He({},super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ki(),options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Dy("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){const n=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(n,bo,{icon:"overflow",template:"content",stylingMode:Go()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:t=>{this.option("opened",!this.option("opened")),this._buttonClickAction(t)}})}_toggleActiveState(n,t,i){this._button._toggleActiveState(n,t,i)}_toggleMenuVisibility(n){var t,i;const o=n??!(null!==(t=this._popup)&&void 0!==t&&t.option("visible"));n&&this._renderPopup(),null===(i=this._popup)||void 0===i||i.toggle(o),this.setAria("expanded",o)}_renderPopup(){if(this._$popup)return;this._$popup=V("<div>").appendTo(this.$element());const{rtlEnabled:n,container:t,animation:i}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(o){let{component:r}=o;r.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,preventScrollEvents:!1,contentTemplate:o=>this._renderList(o),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top "+(n?"left":"right"),at:"bottom "+(n?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:i,onOptionChanged:o=>{let{name:r,value:c}=o;"visible"===r&&this.option("opened",c)},container:t,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:o=>this._closeOutsideDropDownHandler(o),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}_getMaxHeight(){const n=this.$element(),t=n.offset().top,i=et(ot()),o=Math.max(t,i-t-et(n));return Math.min(i,o-3-10)}_closeOutsideDropDownHandler(n){return!V(n.target).closest(this.$element()).length}_renderList(n){const t=V(n);t.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(t,iQ,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:i=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(i)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(n,t,i){var o;null===(o=this._list)||void 0===o||o._itemOptionChanged(n,t,i),df(this._list,n)}_getListDataSource(){return this.option("dataSource")??this.option("items")}_setListDataSource(){var n;null===(n=this._list)||void 0===n||n.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(n){var t;super._toggleVisibility(n),null===(t=this._button)||void 0===t||t.option("visible",n)}_optionChanged(n){var t,i,o;const{name:r,value:c}=n;switch(r){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(t=this._list)||void 0===t||t.option(r,this._getTemplate(c));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(i=this._list)||void 0===i||i.option(r,c),super._optionChanged(n);break;case"onItemRendered":null===(o=this._list)||void 0===o||o.option(r,c);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(c),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(r,c);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(n)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(n=>df(this._list,n))}}const yx="dx-toolbar-item-invisible";class rQ{constructor(n){this._toolbar=n}_initMarkup(){_r(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(!this._hasVisibleMenuItems())return;this._renderMenuButtonContainer();const n=V("<div>").appendTo(this._overflowMenuContainer()),t=this._toolbar._createActionByOption("onItemClick"),i=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(n,oQ,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>i,onItemClick:o=>{t(o)},container:this._toolbar.option("menuContainer"),onOptionChanged:o=>{let{name:r,value:c}=o;"opened"===r&&this._toolbar.option("overflowMenuVisible",c),"items"===r&&this._updateMenuVisibility(c)}})}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=V("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(n){const t=n??this._getMenuItems(),i=t.length&&this._hasVisibleMenuItems(t);this._toggleMenuVisibility(i)}_toggleMenuVisibility(n){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass("dx-state-invisible",!n)}_renderMenuItems(){_r(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){return vr(this._toolbar.option("items")??[],n=>!this._toolbar._isMenuItem(n))}_getHiddenItems(){return this._toolbar._itemContainer().children(`.dx-toolbar-item-auto-hide.${yx}`).not(".dx-state-invisible")}_getMenuItems(){const n=vr(this._toolbar.option("items")??[],o=>this._toolbar._isMenuItem(o)),t=this._getHiddenItems();return this._restoreItems=this._restoreItems??[],[...[].slice.call(t).map(o=>{const r=this._toolbar._getItemData(o),c=V(o),v=c.children();return pe({menuItemTemplate:()=>(this._restoreItems.push({container:c,item:v}),V("<div>").addClass("dx-toolbar-item-auto-hide").append(v))},r)}),...n]}_hasVisibleMenuItems(n){const t=n??this._toolbar.option("items");let i=!1;const o=sn("visible"),r=sn("locateInMenu");return Ee(t,(c,v)=>{const S=o(v,{functionsAsIs:!0}),T=r(v,{functionsAsIs:!0});(!1!==S&&("auto"===T||"always"===T)||"menu"===v.location)&&(i=!0)}),i}_arrangeItems(){this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),Ee(this._restoreItems??[],(t,i)=>{V(i.container).append(i.item)}),this._restoreItems=[];const n=Xe(this._toolbar.$element());return this._hideOverflowItems(n),n}_hideOverflowItems(n){const t=this._toolbar.$element().find(".dx-toolbar-item-auto-hide");if(!t.length)return;const i=n??Xe(this._toolbar.$element());V(t).removeClass(yx);let o=this._getItemsWidth();for(;t.length&&i<o;)t.eq(-1).addClass(yx),o=this._getItemsWidth(),t.splice(-1,1)}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(n,t,i){var o;"disabled"!==t&&"options.disabled"!==t||!this._toolbar._isMenuItem(n)?this.renderMenuItems():null===(o=this._menu)||void 0===o||o._itemOptionChanged(n,t,i)}_renderItem(n,t){"auto"===n.locateInMenu&&t.addClass("dx-toolbar-item-auto-hide")}_optionChanged(n,t){var i,o,r,c,v;switch(n){case"disabled":null===(i=this._menu)||void 0===i||i.option(n,t);break;case"overflowMenuVisible":null===(o=this._menu)||void 0===o||o.option("opened",t);break;case"onItemClick":null===(r=this._menu)||void 0===r||r.option(n,t);break;case"menuContainer":null===(c=this._menu)||void 0===c||c.option("container",t);break;case"menuItemTemplate":null===(v=this._menu)||void 0===v||v.option("itemTemplate",t)}}}class Ak extends Dq{_getDefaultOptions(){return He({},super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(n){"height"!==n&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new wq(this):new rQ(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(n,t,i,o){const r=super._renderItem(n,t,i,o);this._layoutStrategy._renderItem(t,r);const{widget:c,showText:v}=t;return"dxButton"===c&&"inMenu"===v&&r.toggleClass("dx-toolbar-text-auto-hide"),r}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(this.$element().is(":hidden"))return;const n=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(n)}_itemOptionChanged(n,t,i,o){this._isMenuItem(n)||super._itemOptionChanged(n,t,i,o),this._layoutStrategy._itemOptionChanged(n,t,i),("disabled"===t||"options.disabled"===t)&&df(this,n),"location"===t&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(n=>df(this,n))}_isMenuItem(n){return"menu"===n.location||"always"===n.locateInMenu}_isToolbarItem(n){return void 0===n.location||"never"===n.locateInMenu}_optionChanged(n){const{name:t,value:i}=n;switch(this._layoutStrategy._optionChanged(t,i),t){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged(n),this._updateFocusableItemsTabIndex();break;default:super._optionChanged(n)}}updateDimensions(){this._dimensionChanged()}}xt("dxToolbar",Ak);const sQ=Ak,Rk=wk,Ff="dx-invalid-message",kk=wl.inherit({_getDefaultOptions(){return pe(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget(){const{target:e}=this.option();this.option("position.of",e)},_ensureMessageNotEmpty(){this._textMarkup=this._getTextMarkup();const e=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(e)},_toggleVisibilityClasses(e){e?(this.$element().addClass(Ff),this.$wrapper().addClass(Ff)):(this.$element().removeClass(Ff),this.$wrapper().removeClass(Ff))},_updateContentId(){const{container:e,contentId:n}=this.option(),t=n??V(e).attr("aria-describedby");this.$content().addClass("dx-invalid-message-content").attr("id",t)},_renderInnerHtml(e){const n=e&&V(e);n?.html(this._textMarkup)},_getTextMarkup(){const e=this.option("validationErrors")??[];let n="";return e.forEach(t=>{n+=(n?"<br />":"")+z5(t?.message??"")}),n},_toggleModeClass(){const e=this.option("mode");this.$wrapper().toggleClass("dx-invalid-message-auto","auto"===e).toggleClass("dx-invalid-message-always","always"===e)},updateMaxWidth(){const e=this.option("target"),n=qt(e);let t="100%";n&&(t=Math.max(n,100)),this.option({maxWidth:t})},_getPositionsArray(e,n){switch(e){case"top":return[`${n} bottom`,`${n} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${n} top`,`${n} bottom`]}},_updatePosition(){const{positionSide:e,rtlEnabled:n,offset:t,boundary:i}=this.option(),o=TM(n),r=this._getPositionsArray(e,o),c=He({},t);this.$element().addClass(`dx-invalid-message-${e}`),n&&"left"!==e&&"right"!==e&&(c.h=-c.h),"top"===e&&(c.v=-c.v),"left"===e&&(c.h=-c.h),this.option("position",{offset:c,boundary:i,my:r[0],at:r[1],collision:"none flip"})},_optionChanged(e){const{name:n,value:t,previousValue:i}=e;switch(n){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(e);break;case"boundary":this.option("position.boundary",t);break;case"mode":this._toggleModeClass(t);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${i}`),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(e);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(e)}}});xt("dxValidationMessage",kk);const Fk=kk,Lk="dx-invalid-message-auto",Nk="dx-validation-target",dQ=["outlined","filled","underlined"],Hk={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},Cx=vi.inherit({ctor(){this.showValidationMessageTimeout=null,this.validationRequest=bt(),this.callBase.apply(this,arguments)},_createElement(e){this.callBase(e);const n=this.$element();n&&Yt(n[0],Nk,this)},_initOptions(e){this.callBase.apply(this,arguments),this.option(Rl.initValidationOptions(e))},_init(){this._initialValue=this.option("value"),this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass("dx-show-invalid-badge")},_getDefaultOptions(){return pe(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})},_attachKeyboardEvents(){this.option("readOnly")||this.callBase()},_setOptionsByReference(){this.callBase(),pe(this._optionsByReference,{validationError:!0})},_createValueChangeAction(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction(){this._valueChangeActionSuppressed=!1},_initMarkup(){var e;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),null===(e=this.option("_onMarkupRendered"))||void 0===e||e()},_raiseValueChangeAction(e,n){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(e,n))},_valueChangeArgs(e,n){return{value:e,previousValue:n,event:this._valueChangeEventInstance}},_saveValueChangeEvent(e){this._valueChangeEventInstance=e},_focusInHandler(e){const n="auto"===this.option("validationMessageMode");if(this._canValueBeChangedByClick()&&n){var t;const i=null===(t=this._validationMessage)||void 0===t?void 0:t.$wrapper();i?.removeClass(Lk),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>i?.addClass(Lk),150)}return this.callBase(e)},_canValueBeChangedByClick:()=>!1,_getStylingModePrefix:()=>"dx-editor-",_renderStylingMode(){const e=this.option("stylingMode"),n=this._getStylingModePrefix(),t=dQ.map(o=>n+o);t.forEach(o=>this.$element().removeClass(o));let i=n+e;if(!t.includes(i)){const o=this._getDefaultOptions().stylingMode,r=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;i=n+(r||o)}this.$element().addClass(i)},_getValidationErrors(){let e=this.option("validationErrors");return!e&&this.option("validationError")&&(e=[this.option("validationError")]),e},_disposeValidationMessage(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses(e){this.$element().toggleClass("dx-invalid",e),this.setAria("invalid",e||void 0)},_renderValidationState(){const e=this.option("isValid")&&"invalid"!==this.option("validationStatus"),n=this._getValidationErrors(),t=this.$element();if(this._toggleValidationClasses(!e),Ke()&&!1!==this.option("_showValidationMessage")&&(this._disposeValidationMessage(),!e&&n)){const{validationMessageMode:i,validationMessageOffset:o,validationBoundary:r,rtlEnabled:c}=this.option();this._$validationMessage=V("<div>").appendTo(t);const v=`dx-${new Pn}`;this.setAria("describedby",v),this._validationMessage=new Fk(this._$validationMessage,pe({validationErrors:n,rtlEnabled:c,target:this._getValidationMessageTarget(),visualContainer:t,mode:i,positionSide:this._getValidationMessagePosition(),offset:o,boundary:r,contentId:v},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition(){return this.option("validationMessagePosition")},_getValidationMessageTarget(){return this.$element()},_toggleReadOnlyState(){const e=this.option("readOnly");this._toggleBackspaceHandler(e),this.$element().toggleClass("dx-state-readonly",!!e),this._setAriaReadonly(e)},_setAriaReadonly(e){this.setAria("readonly",e||void 0)},_toggleBackspaceHandler(e){const n=this._keyboardEventBindingTarget(),t=Te("keydown","editorReadOnly");ue.off(n,t),e&&ue.on(n,t,i=>{"backspace"===$n(i)&&i.preventDefault()})},_dispose(){Yt(this.$element()[0],Nk,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName(e){const n=this._getSubmitElement();n&&(e.length>0?n.attr("name",e):n.removeAttr("name"))},_getSubmitElement:()=>null,_setValidationMessageOption(e){var n;let{name:t,value:i}=e;null===(n=this._validationMessage)||void 0===n||n.option(Hk[t]?Hk[t]:t,i)},_hasActiveElement:De,_optionChanged(e){var n;switch(e.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":e.value!=e.previousValue&&(this.option("isDirty",this._initialValue!==e.value),this.validationRequest.fire({value:e.value,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(e.value,e.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(e),null===(n=this._validationMessage)||void 0===n||n.updateMaxWidth();break;case"name":this._setSubmitElementName(e.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Rl.synchronizeValidationOptions(e,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(e);break;case"rtlEnabled":this._setValidationMessageOption(e),this.callBase(e);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,e);break;case"_showValidationMessage":case"isDirty":break;default:this.callBase(e)}},_resetToInitialValue(){this.option("value",this._initialValue)},blur(){this._hasActiveElement()&&Ip()},clear(){const e=this._getDefaultOptions();this.option("value",e.value)},reset(){arguments.length&&(this._initialValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}});Cx.isEditor=e=>e instanceof Cx;const Js=Cx;class Lf{constructor(n,t,i){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=t,this.name=n,this.options=i||{}}_addPlaceMarker(n){this.$placeMarker=V("<div>").appendTo(n)}_addToContainer(n){const{$placeMarker:t,$container:i}=this;t?t.replaceWith(n):n.appendTo(i)}_attachEvents(n,t){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:n,options:t}=this;return t.visible||!n.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:n,$placeMarker:t}=this;n&&(n.dispose?n.dispose():n.remove(),this.instance=null),t&&t.remove()}render(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$container;if(this.$container=n,this._isVisible()){const{instance:t,$element:i}=this._create();this.instance=t,this._attachEvents(t,i)}else this._addPlaceMarker(n)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const hQ=Wt.down;class pQ extends Lf{_create(){const n=V("<span>").addClass("dx-clear-button-area").append(V("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(n),this.update(!0),{instance:n,$element:n}}_isVisible(){const{editor:n}=this;return n._isClearButtonVisible()}_attachEvents(n,t){const{editor:i}=this,o=i.NAME;ue.on(t,Te(hQ,o),r=>{r.preventDefault(),"mouse"!==r.pointerType&&i._clearValueHandler(r)}),ue.on(t,Te(si,o),r=>i._clearValueHandler(r))}_legacyRender(n,t){n.toggleClass("dx-show-clear-button",t)}update(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&super.update();const{editor:t,instance:i}=this,o=t.$element(),r=this._isVisible();i&&i.toggleClass("dx-state-invisible",!r),this._legacyRender(o,r)}}class gQ extends Lf{_attachEvents(n,t){const{editor:i}=this;ue.on(t,Bp,()=>{i.$element().addClass("dx-custom-button-hovered")}),ue.on(t,Gy,()=>{i.$element().removeClass("dx-custom-button-hovered")}),ue.on(t,si,o=>{o.stopPropagation()})}_create(){const{editor:n}=this,t=V("<div>");return this._addToContainer(t),{$element:t,instance:n._createComponent(t,bo,pe({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(n)}))}}_prepareIntegrationOptions(n){return pe({},n.option("integrationOptions"),{skipTemplates:["content"]})}update(){const n=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),n}_isVisible(){const{editor:n}=this;return n.option("visible")}_isDisabled(){return void 0!==this.options.disabled?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}function Bk(e,n){if(-1!==e.indexOf(n))throw Jt.Error("E1055",n);e.push(n)}class vQ{constructor(n,t){this.buttons=[],this.defaultButtonsInfo=t,this.editor=n}_compileButtonInfo(n){const t=[];return n.map(i=>{const o="string"==typeof i;if(o||function mQ(e){(()=>{if(!e||"object"!=typeof e||Array.isArray(e))throw Jt.Error("E1053")})(),(()=>{if(!("name"in e))throw Jt.Error("E1054")})(),(()=>{const{name:n}=e;if("string"!=typeof n)throw Jt.Error("E1055")})(),(()=>{const{location:n}=e;"location"in e&&"after"!==n&&"before"!==n&&(e.location="after")})()}(i),o||function _Q(e,n){return!!n.find(t=>t.name===e)}(i.name,this.defaultButtonsInfo)){const v=this.defaultButtonsInfo.find(S=>{let{name:T}=S;return T===i||T===i.name});if(!v)throw Jt.Error("E1056",this.editor.NAME,i);return Bk(t,i),v}const{name:c}=i;return Bk(t,c),pe(i,{Ctor:gQ})})}_createButton(n){const{Ctor:t,options:i,name:o}=n,r=new t(o,this.editor,i);return this.buttons.push(r),r}_renderButtons(n,t,i){let o=null;return(n?this._compileButtonInfo(n):this.defaultButtonsInfo).forEach(c=>{const{location:v="after"}=c;v===i&&this._createButton(c).render((o=o??V("<div>").addClass("dx-texteditor-buttons-container"),"before"===i?t.prepend(o):t.append(o),o))}),o}clean(){this.buttons.forEach(n=>n.dispose()),this.buttons=[]}getButton(n){const t=this.buttons.find(i=>{let{name:o}=i;return o===n});return t&&t.instance}renderAfterButtons(n,t){return this._renderButtons(n,t,"after")}renderBeforeButtons(n,t){return this._renderButtons(n,t,"before")}updateButtons(n){this.buttons.forEach(t=>{(!n||-1!==n.indexOf(t.name))&&t.update()})}}const Nf=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],yQ=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];function Vk(e){if(Ie(e)&&!Array.isArray(e))throw Jt.Error("E1053")}const xQ=Js.inherit({ctor(e,n){n&&Vk(n.buttons),this._buttonCollection=new vQ(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions(){return pe(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:e=>Ie(e)&&!1!==e?e:"",stylingMode:Ht().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>Fi(yo()),options:{labelMode:"floating",stylingMode:Ht().editorStylingMode||"filled"}},{device:()=>Go(yo()),options:{labelMode:"outside"}}])},_getDefaultButtons:()=>[{name:"clear",Ctor:pQ}],_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")},_input(){return this.$element().find(".dx-texteditor-input").first()},_isFocused(){return Cl(this._input())||this.callBase()},_inputWrapper(){return this.$element()},_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:e=>yQ.includes(e),_renderStylingMode(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render(){this.callBase(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput(){this._$textEditorContainer=V("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=V("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const e=this._getInputContainer(),n=V("<div>").addClass("dx-pending-indicator").appendTo(e);this._pendingIndicator=this._createComponent(n,Us)},_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))},_renderValidationState(){this.callBase(),"pending"===this.option("validationStatus")?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):("invalid"===this.option("validationStatus")&&(this._showValidMark=!1),!this._showValidMark&&!0===this.option("showValidationMark")&&(this._showValidMark="valid"===this.option("validationStatus")&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()},_getButtonsContainer(){return this._$textEditorContainer},_renderButtonContainers(){const e=this.option("buttons"),n=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(e,n),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(e,n)},_cleanButtonContainers(){var e,n;null===(e=this._$beforeButtonsContainer)||void 0===e||e.remove(),null===(n=this._$afterButtonsContainer)||void 0===n||n.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this.callBase()},_createInput(){const e=V("<input>");return this._applyInputAttributes(e,this.option("inputAttr")),e},_setSubmitElementName(e){const n=this.option("inputAttr.name");return this.callBase(e||n||"")},_applyInputAttributes(e,n){const t=pe(this._getDefaultAttributes(),n);e.attr(t).addClass("dx-texteditor-input"),this._setInputMinHeight(e)},_setInputMinHeight(e){e.css("minHeight",this.option("height")?"0":"")},_getPlaceholderAttr(){const{ios:e,mac:n}=je.real(),{placeholder:t}=this.option();return t||(e||n?" ":null)},_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}},_updateButtons(e){this._buttonCollection.updateButtons(e)},_updateButtonsStyling(e){Ee(this.option("buttons"),(n,t)=>{let{options:i,name:o}=t;if(i&&!i.stylingMode&&this.option("visible")){const r=this.getButton(o);r.option&&r.option("stylingMode","underlined"===e?"text":"contained")}})},_renderValue(){return this._renderInputValue().promise()},_renderInputValue(e){e=e??this.option("value");let n=this.option("text");const t=this.option("displayValue"),i=this.option("displayValueFormatter");return void 0!==t&&null!==e?n=i(t):Ie(n)||(n=i(e)),this.option("text",n),this._input().val()!==(Ie(n)?n:"")?this._renderDisplayText(n):this._toggleEmptinessEventHandler(),Ae().resolve()},_renderDisplayText(e){this._input().val(e),this._toggleEmptinessEventHandler()},_isValueValid(){if(this._input().length){const{validity:e}=this._input().get(0);if(e)return e.valid}return!0},_toggleEmptiness(e){this.$element().toggleClass("dx-texteditor-empty",e),this._togglePlaceholder(e)},_togglePlaceholder(e){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!e)},_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState(e){this.callBase.apply(this,arguments),this._input().prop("disabled",e)},_toggleTabIndex(){const e=this._input(),n=this.option("disabled"),t=this.option("focusStateEnabled");n||!t?e.attr("tabIndex",-1):e.removeAttr("tabIndex")},_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue(){return this.option("readOnly")},_toggleSpellcheckState(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize(){this._labelContainerElement&&(hf.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer(){return this._input()},_getLabelContainerWidth(){return Xe(this._getLabelContainer())},_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&Xe(this._$beforeButtonsContainer))??0},_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(e){var n;const t=this.option("inputAttr"),i=t?.["aria-label"],o=null===(n=this._label)||void 0===n?void 0:n.getId(),r=i?void 0:o;(r||e)&&this.setAria({labelledby:r,label:i},this._getFieldElement())},_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=V(this._getLabelContainer()).get(0);const{label:e,labelMode:n,labelMark:t,rtlEnabled:i}=this.option(),o={onClickHandler:()=>{this.focus()},onHoverHandler:r=>{r.stopPropagation()},onActiveHandler:r=>{r.stopPropagation()},$editor:this.$element(),text:e,mark:t,mode:n,rtlEnabled:i,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new class fQ{constructor(n){this.NAME="dxLabel",this._props=n,this._id=`dx-texteditor-label-${new Pn}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&"hidden"!==this._props.mode}_render(){this._$before=V("<div>").addClass("dx-label-before"),this._$labelSpan=V("<span>"),this._$label=V("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=V("<div>").addClass("dx-label-after"),this._$root=V("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const n=this._isVisible();this._updateEditorBeforeButtonsClass(n),this._updateEditorLabelClass(n),n?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const n=Te(si,this.NAME),t=Te(Bp,this.NAME),i=Te("dxactive",this.NAME);ue.off(this._$labelSpan,n),ue.off(this._$labelSpan,t),ue.off(this._$labelSpan,i),this._isVisible()&&this._isOutsideMode()&&(ue.on(this._$labelSpan,n,o=>{""===ot().getSelection().toString()&&(this._props.onClickHandler(),o.preventDefault())}),ue.on(this._$labelSpan,t,o=>{this._props.onHoverHandler(o)}),ue.on(this._$labelSpan,i,o=>{this._props.onActiveHandler(o)}))}_updateEditorLabelClass(n){this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),n&&(this._props.$editor.addClass("floating"===this._props.mode?"dx-texteditor-with-floating-label":"dx-texteditor-with-label"),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside"))}_isOutsideMode(){return"outside"===this._props.mode}_updateEditorBeforeButtonsClass(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible();this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),n&&this._props.$editor.addClass(this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"")}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const n=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:n}),this._updateLabelTransform()}}_updateLabelTransform(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const i=(this._props.rtlEnabled?1:-1)*(Xe(this._$before)+n);this._$labelSpan.css("transform",`translateX(${i}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const n=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:n})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(n){this._props.mode=n,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(n){this._props.text=n,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(n){this._props.mark=n,this._updateMark()}updateContainsButtonsBefore(n){this._props.containsButtonsBefore=n,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(n){this._props.beforeWidth=n,this._updateBeforeWidth()}updateMaxWidth(n){this._props.containerWidth=n,this._updateMaxWidth()}}(o),this._setFieldAria(),this._labelContainerElement&&hf.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const e=this._input(),n=this.option("placeholder"),t={id:n?`dx-${new Pn}`:void 0,"data-dx_placeholder":n},i=this._$placeholder=V("<div>").attr(t);i.insertAfter(e),i.addClass("dx-placeholder")},_attachPlaceholderEvents(){const e=Te(Wt.up,this.NAME);ue.on(this._$placeholder,e,()=>{ue.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder(){return this._$placeholder||V()},_clearValueHandler(e){const n=this._input();e.stopPropagation(),this._saveValueChangeEvent(e),this._clearValue(),!this._isFocused()&&ue.trigger(n,"focus"),ue.trigger(n,"input")},_clearValue(){this.clear()},_renderEvents(){const e=this._input();Ee(Nf,(n,t)=>{if(this.hasActionSubscription(`on${t}`)){const i=this._createActionByOption(`on${t}`,{excludeValidators:["readOnly"]});ue.on(e,Te(t.toLowerCase(),this.NAME),o=>{this._disposed||i({event:o})})}})},_refreshEvents(){const e=this._input();Ee(Nf,(n,t)=>{ue.off(e,Te(t.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler(){this.option("text",this._input().val())},_keyDownHandler(e){const n=this._input(),t=e.ctrlKey&&"enter"===$n(e),i=n.val()!==this.option("value");t&&i&&ue.trigger(n,"change")},_getValueChangeEventOptionName:()=>"valueChangeEvent",_renderValueChangeEvent(){const e=Te(this._renderValueEventName(),`${this.NAME}TextChange`),n=Te(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),t=Te("keydown",`${this.NAME}TextChange`),i=this._input();ue.on(i,e,this._keyPressHandler.bind(this)),ue.on(i,n,this._valueChangeEventHandler.bind(this)),ue.on(i,t,this._keyDownHandler.bind(this))},_cleanValueChangeEvent(){const e=`.${this.NAME}ValueChange`,n=`.${this.NAME}TextChange`;ue.off(this._input(),e),ue.off(this._input(),n)},_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:()=>"input change keypress",_focusTarget(){return this._input()},_focusEventTarget(){return this.element()},_isInput(e){return e===this._input().get(0)},_preventNestedFocusEvent(e){if(e.isDefaultPrevented())return!0;let n=this._isNestedTarget(e.relatedTarget);return"focusin"===e.type?n=n&&this._isNestedTarget(e.target)&&!this._isInput(e.target):n||this._toggleFocusClass(!1,this.$element()),n&&e.preventDefault(),n},_isNestedTarget(e){return!!this.$element().find(e).length},_focusClassTarget(){return this.$element()},_focusInHandler(e){this._preventNestedFocusEvent(e),this.callBase.apply(this,arguments)},_focusOutHandler(e){this._preventNestedFocusEvent(e),this.callBase.apply(this,arguments)},_toggleFocusClass(e,n){this.callBase(e,this._focusClassTarget(n))},_hasFocusClass(e){return this.callBase(V(e||this.$element()))},_renderEmptinessEvent(){const e=this._input();ue.on(e,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler(){const e=this._input().val(),n=(""===e||null===e)&&this._isValueValid();this._toggleEmptiness(n)},_valueChangeEventHandler(e,n){this.option("readOnly")||(this._saveValueChangeEvent(e),this.option("value",arguments.length>1?n:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),ue.off(this._input(),"keyup.onEnterKey.dxTextEditor"),ue.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp(e){this._disposed||"enter"===$n(e)&&this._enterKeyAction({event:e})},_updateValue(){this._options.silent("text",null),this._renderValue()},_dispose(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement(){return this._input()},_hasActiveElement(){return this._input().is(Pe.getActiveElement(this._input()[0]))},_optionChanged(e){const{name:n,fullName:t,value:i}=e,o=n.replace("on","");if(Nf.includes(o))this._refreshEvents();else switch(n){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(e),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(i),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(i);break;case"labelMode":this._label.updateMode(i),this._setFieldAria();break;case"width":this.callBase(e),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(e);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(e);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(n));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":t===n&&Vk(i),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(e),i&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(e)}},_renderInputType(){this._setInputType(this.option("mode"))},_setInputType(e){const n=this._input();"search"===e&&(e="text");try{n.prop("type",e)}catch{n.prop("type","text")}},getButton(e){return this._buttonCollection.getButton(e)},focus(){ue.trigger(this._input(),"focus")},clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const e=this._getDefaultOptions();this.option("value")===e.value?(this._options.silent("text",""),this._renderValue()):this.option("value",e.value)},_resetToInitialValue(){this.option("value")===this._initialValue?(this._options.silent("text",this._initialValue),this._renderValue()):this.callBase(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()},_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)},reset(){arguments.length?this.callBase(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0):this.callBase()},on(e,n){const t=this.callBase(e,n),i=e.charAt(0).toUpperCase()+e.substr(1);return Nf.includes(i)&&this._refreshEvents(),t}});class zk{constructor(n){this._value=" ",pe(this,n)}next(n){if(!arguments.length)return this._next;this._next=n}_prepareHandlingArgs(n,t){t=t||{};const i=Object.prototype.hasOwnProperty.call(n,"value")?"value":"text";return n[i]=t.str??n[i],n.start=t.start??n.start,n.length=t.length??n.length,n.index+=1,n}first(n){return n=n||0,this.next().first(n+1)}isAccepted(n){return!1}adjustedCaret(n,t,i){return t?this._adjustedForward(n,0,i):this._adjustedBackward(n,0,i)}_adjustedForward(n,t,i){}_adjustedBackward(n,t,i){}isValid(n){}reset(){}clear(n){}text(){}value(){}rawValue(){}handle(n){}}class OQ extends zk{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class jk extends zk{text(){return(" "!==this._value?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(n){const t=Object.prototype.hasOwnProperty.call(n,"value")?n.value:n.text;if(!t||!t.length||!n.length)return 0;if(n.start)return this.next().handle(this._prepareHandlingArgs(n,{start:n.start-1}));const i=t[0],o=t.substring(1);return this._tryAcceptChar(i,n),this._accepted()?this.next().handle(this._prepareHandlingArgs(n,{str:o,length:n.length-1}))+1:this.handle(this._prepareHandlingArgs(n,{str:o,length:n.length-1}))}clear(n){this._tryAcceptChar(" ",n),this.next().clear(this._prepareHandlingArgs(n))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(n,t){if(this._accepted(!1),!this._isAllowed(n,t))return;const i=" "===n?this.maskChar:n;t.fullText=t.fullText.substring(0,t.index)+i+t.fullText.substring(t.index+1),this._accepted(!0),this._value=n}_accepted(n){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!n}first(n){return" "===this._value?n||0:super.first(n)}_isAllowed(n,t){return" "===n||this._isValid(n,t)}_isValid(n,t){const{allowedChars:i}=this;return i instanceof RegExp?i.test(n):Be(i)?i(n,t.index,t.fullText):Array.isArray(i)?i.includes(n):i===n}isAccepted(n){return 0===n?this._accepted():this.next().isAccepted(n-1)}_adjustedForward(n,t,i){return t>=n?t:this.next()._adjustedForward(n,t+1,i)||t+1}_adjustedBackward(n,t){return t>=n-1?n:this.next()._adjustedBackward(n,t+1)||t+1}isValid(n){return this._isValid(this._value,n)&&this.next().isValid(this._prepareHandlingArgs(n))}}class Uk extends jk{value(){return this.next().value()}handle(n){const t=Object.prototype.hasOwnProperty.call(n,"value"),i=t?n.value:n.text;if(!i.length||!n.length)return 0;if(n.start||t)return this.next().handle(this._prepareHandlingArgs(n,{start:n.start&&n.start-1}));const o=i[0],r=i.substring(1);this._tryAcceptChar(o);const c=this._isAllowed(o)?this._prepareHandlingArgs(n,{str:r,length:n.length-1}):n;return this.next().handle(c)+1}clear(n){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(n))}_tryAcceptChar(n){this._accepted(this._isValid(n))}_isValid(n){return n===this.maskChar}first(n){return n=n||0,this.next().first(n+1)}_adjustedForward(n,t,i){return t>=n&&i===this.maskChar?t:n===t+1&&this._accepted()?n:this.next()._adjustedForward(n,t+1,i)}_adjustedBackward(n,t){return t>=n-1?0:this.next()._adjustedBackward(n,t+1)}isValid(n){return this.next().isValid(this._prepareHandlingArgs(n))}}const SQ=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],DQ=["historyUndo","historyRedo"],IQ=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function EQ(e){return" ".repeat(e)}class wQ{constructor(n){this.editor=n}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(n){if(!n)return this.editor._caret();this.editor._caret(n)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const n=this._editorInput(),t=Te("blur beforedeactivate","dxMask");ue.on(n,t,i=>{this.editor._changeHandler(i)})}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(n){const{originalEvent:t}=n;if(!t)return;const{inputType:i}=t;if(DQ.includes(i))this._handleHistoryInputEvent();else if(SQ.includes(i))this._handleBackwardDeleteInputEvent();else{const o=this._editorCaret();if(!o.end)return;this._clearSelectedText(),this._autoFillHandler(t),this._editorCaret(o),this._handleInsertTextInputEvent(t.data)}this._editorOption("text")===this._previousText&&n.stopImmediatePropagation()}_handleHistoryInputEvent(){const n=this._editorCaret();this._updateEditorMask({start:n.start,length:n.end-n.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();const n=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==n.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var n,t;const i=(null===(n=this._prevCaret)||void 0===n?void 0:n.end)-(null===(t=this._prevCaret)||void 0===t?void 0:t.start)||1,o=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:o.start,length:i,text:EQ(i)}))}_handleInsertTextInputEvent(n){var t;const i=n??"";this.editor.setForwardDirection(),this._updateEditorMask({start:(null===(t=this._prevCaret)||void 0===t?void 0:t.start)??0,length:i.length||1,text:i})||this._editorCaret(this._prevCaret)}_updateEditorMask(n){const t=n.text.length,i=this.editor._handleChain(n);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:o,end:r}=this._editorCaret(),c=i-t;i>1&&1===t&&this._editorCaret({start:o+c,end:r+c}),this.editor._adjustCaret()}return!!i}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const n=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(()=>{this._editorCaret({start:n,end:n})},0)}}_focusOutHandler(n){this.editor._changeHandler(n),"onFocus"===this._editorOption("showMaskMode")&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(n){const{editor:t}=this;t._maskKeyHandler(n,()=>{t._hasSelection()||t._handleKey(" ")})}_cutHandler(n){const t=this._editorCaret(),i=this._editorInput().val().substring(t.start,t.end);this.editor._maskKeyHandler(n,()=>DT(n,i))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(()=>{const n=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",n)})}_pasteHandler(n){const{editor:t}=this;if(this._editorOption("disabled"))return;const i=this._editorCaret();t._maskKeyHandler(n,()=>{const o=DT(n),r=t._maskRulesChain.text().substring(i.end),c=t._handleChain({text:o,start:i.start,length:o.length}),v=i.start+c;t._handleChain({text:r,start:v,length:r.length}),t._caret({start:v,end:v})})}_autoFillHandler(n){const{editor:t}=this,i=this._editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._isAutoFill()&&(t._maskKeyHandler(n,()=>{t._handleChain({text:i,start:0,length:i.length})}),t._validateMask())})}_isAutoFill(){const n=this._editorInput();if(Wo.webkit){const t=n.get(0);return t?.matches(":-webkit-autofill")??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(n){return t=>{var i;null===(i=this[`_${n}Handler`])||void 0===i||i.call(this,t)}}attachEvents(){const n=this._editorInput();IQ.forEach(t=>{const i=Te(t.toLowerCase(),"dxMask");ue.on(n,i,this.getHandler(t))}),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),ue.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:PQ,mac:TQ}=je.real(),MQ=PQ||TQ,$k=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=V(e).get(0),!Ie(n))return function(e){let n;try{n={start:e.selectionStart,end:e.selectionEnd}}catch{n={start:0,end:0}}return n}(e);!t&&MQ&&Pe.getActiveElement(e)!==e||function(e,n){const t=Pe.getBody();if(t.contains(e)||t.contains(e.getRootNode().host))try{e.selectionStart=n.start,e.selectionEnd=n.end}catch{}}(e,n)},kQ={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:e=>Hf(e),l:e=>Hf(e)||Gk(e),C:/\S/,c:/./,A:e=>Hf(e)||Wk(e),a:e=>Hf(e)||Wk(e)||Gk(e)};function Wk(e){return/[0-9]/.test(e)}function Hf(e){const n=e.charCodeAt();return n>64&&n<91||n>96&&n<123||n>127}function Gk(e){return" "===e}const Kk=xQ.inherit({_getDefaultOptions(){return pe(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:de.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys(){const e=this,n={del:e._maskStrategy.getHandler("del"),enter:e._changeHandler},t=e.callBase();return Ee(n,(i,o)=>{const r=t[i];t[i]=function(c){e.option("mask")&&o.call(e,c),r&&r(c)}}),t},_getSubmitElement(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy(){this._maskStrategy=new wQ(this)},_initMarkup(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers(){if(this._onMouseWheel===De)return;const n=this._input(),t=Te(Lp,this.NAME),i=this._createAction(o=>{const{event:r}=o;Cl(n)&&!ri(r)&&(this._onMouseWheel(r),r.preventDefault(),r.stopPropagation())});ue.off(n,t),ue.on(n,t,o=>{i({event:o})})},_onMouseWheel:De,_useMaskBehavior(){return!!this.option("mask")},_attachDropEventHandler(){if(!this._useMaskBehavior())return;const n=Te("drop",this.NAME),t=this._input();ue.off(t,n),ue.on(t,n,i=>i.preventDefault())},_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),this.callBase(),this._attachDropEventHandler()},_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=V("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_changeHandler(e){const n=this._input(),t=n.val();if(t===this._changedValue)return;this._changedValue=t;const i=Ty(e,{type:"change"});ue.trigger(n,i)},_parseMask(){this._maskRules=pe({},kQ,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule(e){const n=this.option("mask");if(e>=n.length)return new OQ;const t=n[e],i="\\"===t,o=i?new Uk({maskChar:n[e+1]}):this._getMaskRule(t);return o.next(this._parseMaskRule(e+1+i)),o},_getMaskRule(e){let n;return Ee(this._maskRules,(t,i)=>{if(t===e)return n={pattern:t,allowedChars:i},!1}),Ie(n)?new jk(pe({maskChar:this.option("maskChar")||" "},n)):new Uk({maskChar:e})},_renderMaskedValue(){if(!this._maskRulesChain)return;const e=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const n={length:e.length};n[this._isMaskedValueMode()?"text":"value"]=e,this._handleChain(n),this._displayMask()},_replaceSelectedText:(e,n,t)=>void 0===t?e:e.slice(0,n.start)+t+e.slice(n.end),_isMaskedValueMode(){return this.option("useMaskedValue")},_displayMask(e){e=e||this._caret(),this._renderValue(),this._caret(e)},_isValueEmpty(){return Vv(this._value)},_shouldShowMask(){return"onFocus"!==this.option("showMaskMode")||Cl(this._input())||!this._isValueEmpty()},_showMaskPlaceholder(){if(this._shouldShowMask()){const e=this._maskRulesChain.text();this.option("text",e),"onFocus"===this.option("showMaskMode")&&this._renderDisplayText(e)}},_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const e=this._maskRulesChain.value(),n=Vv(e)?"":this._getPreparedValue();this._$hiddenElement.val(n)}return this.callBase()},_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler(e){this._maskRulesChain?(this._saveValueChangeEvent(e),this.option("value",this._getPreparedValue())):this.callBase.apply(this,arguments)},_isControlKeyFired(e){return this._isControlKey($n(e))||ri(e)},_handleChain(e){const n=this._maskRulesChain.handle(this._normalizeChainArguments(e));return this._updateMaskInfo(),n},_normalizeChainArguments(e){return(e=e||{}).index=0,e.fullText=this._maskRulesChain.text(),e},_convertToValue(e){return this._isMaskedValueMode()?this._replaceMaskCharWithEmpty(e||this._textValue||""):e||this._value||""},_replaceMaskCharWithEmpty(e){return e.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler(e,n){if(this.option("readOnly"))return;this.setForwardDirection(),e.preventDefault(),this._handleSelection();const t=this._input().val(),i=()=>{t!==this._input().val()&&ue.trigger(this._input(),"input")},o=n();o?o.then(i):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),i())},_handleKey(e,n){this._direction(n||"forward"),this._adjustCaret(e),this._handleKeyChain(e),this._moveCaret()},_handleSelection(){if(!this._hasSelection())return;const e=this._caret(),n=new Array(e.end-e.start+1).join(" ");this._handleKeyChain(n)},_handleKeyChain(e){const n=this._caret(),t=this.isForwardDirection()?n.start:n.start-1,i=this.isForwardDirection()?n.end:n.end-1;this._handleChain({text:e,start:t,length:t===i?1:i-t})},_tryMoveCaretBackward(){this.setBackwardDirection();const e=this._caret().start;return this._adjustCaret(),!e||e!==this._caret().start},_adjustCaret(e){const n=this._caret().start,t=this.isForwardDirection(),i=this._maskRulesChain.adjustedCaret(n,t,e);this._caret({start:i,end:i})},_moveCaret(){const e=this._caret().start,n=e+(this.isForwardDirection()?0:-1),t=this._maskRulesChain.isAccepted(n)?e+(this.isForwardDirection()?1:-1):e;this._caret({start:t,end:t})},_caret(e,n){const t=this._input();if(t.length){if(!arguments.length)return $k(t);$k(t,e,n)}},_hasSelection(){const e=this._caret();return e.start!==e.end},_direction(e){if(!arguments.length)return this._typingDirection;this._typingDirection=e},setForwardDirection(){this._direction("forward")},setBackwardDirection(){this._direction("backward")},isForwardDirection(){return"forward"===this._direction()},_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()},_clean(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask(){if(!this._maskRulesChain)return;const e=Vv(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})},_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()},_processEmptyMask(e){if(e)return;const n=this.option("value");this.option({text:n,isValid:!0,validationError:null}),this.validationRequest.fire({value:n,editor:this}),this._renderValue()},_optionChanged(e){switch(e.name){case"mask":this._updateMaskOption(),this._processEmptyMask(e.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(e),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(e)}},clear(){const{value:e}=this._getDefaultOptions();this.option("value")===e&&this._renderMaskedValue(),this.callBase()}});xt("dxTextEditor",Kk);const qk=Kk,FQ=ot(),LQ=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],Zk=qk.inherit({ctor(e,n){n&&(this._showClearButton=n.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions(){return pe(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType(){this.callBase(),this._renderSearchMode()},_useTemplates:()=>!1,_renderProps(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp(){const e=this._getMaxLength();e&&e>0?this._input().attr("maxLength",e):this._input().removeAttr("maxLength")},_renderSearchMode(){const e=this._$element;"search"===this.option("mode")?(e.addClass("dx-searchbox"),this._renderSearchIcon(),void 0===this._showClearButton&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(e.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",void 0===this._showClearButton?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon(){const e=V("<div>").addClass("dx-icon").addClass("dx-icon-search");e.prependTo(this._input().parent()),this._$searchIcon=e},_getLabelContainerWidth(){if(this._$searchIcon){const e=this._input().parent();return Xe(e)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth(){let e=this.callBase();return this._$searchIcon&&(e+=qt(this._$searchIcon)),e},_optionChanged(e){switch(e.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(e),this._updateLabelWidth();break;case"mask":this.callBase(e),this._toggleMaxLengthProp();break;default:this.callBase(e)}},_onKeyDownCutOffHandler(e){const n=this._getMaxLength();if(n&&!e.ctrlKey&&!this._hasSelection()){const t=V(e.target),i=$n(e);return this._cutOffExtraChar(t),t.val().length<n||LQ.includes(i)||""!==FQ.getSelection().toString()}return!0},_onChangeCutOffHandler(e){const n=V(e.target);this.option("maxLength")&&this._cutOffExtraChar(n)},_cutOffExtraChar(e){const n=this._getMaxLength(),t=e.val();n&&t.length>n&&e.val(t.substr(0,n))},_getMaxLength(){return this.option("mask")?null:this.option("maxLength")}});xt("dxTextBox",Zk);const ld=Zk;let Xk=function NQ(e){return class{constructor(){throw new Error(`Module '${e}' not found`)}static getInstance(){}}}("TextBox");const Bf={_getDefaultOptions:function(){return pe(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){const e=this.$element(),n=this.option("searchEnabled"),t=this._addWidgetPrefix("search"),i=this._addWidgetPrefix("with-search");if(!n)return e.removeClass(i),void this._removeSearchBox();const o=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(o):(e.addClass(i),this._$searchEditorElement=V("<div>").addClass(t).prependTo(e),this._searchEditor=this._createComponent(this._$searchEditorElement,Xk,o))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){const e=this,n=e.option("searchEditorOptions"),t=de.format("Search");return pe({mode:"search",placeholder:t,tabIndex:e.option("tabIndex"),value:e.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":t},onValueChanged:function(i){const o=e.option("searchTimeout");e._valueChangeDeferred=new Ae,clearTimeout(e._valueChangeTimeout),e._valueChangeDeferred.done(function(){this.option("searchValue",i.value)}.bind(e)),i.event&&"input"===i.event.type&&o?e._valueChangeTimeout=setTimeout(function(){e._valueChangeDeferred.resolve()},o):e._valueChangeDeferred.resolve()}},n)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(e,n){this.option("searchEnabled")&&this._toggleFocusClass(n,this.$element()),this.callBase(e,n)},getOperationBySearchMode:function(e){return"equals"===e?"=":e},_optionChanged:function(e){switch(e.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void Jt.log("W1009");"searchMode"===e.name?this._dataSource.searchOperation(this.getOperationBySearchMode(e.value)):this._dataSource[e.name](e.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(e)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){const e=this.$element();this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(e){Xk=e}},HQ=Tt.inherit({ctor(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes(e,n){const t=this;Ee(e,(i,o)=>{const r=Ie(n)?n:t._getParentId(o),c=t._convertItemToNode(o,r);t._dataStructure.push(c),t._checkForDuplicateId(c.internalFields.key),t._indexByKey[c.internalFields.key]=t._dataStructure.length-1,t._itemHasChildren(o)&&t._convertItemsToNodes(t._dataAccessors.getters.items(o),c.internalFields.key)})},_checkForDuplicateId(e){if(Ie(this._indexByKey[e]))throw Jt.Error("E1040",e)},_getParentId(e){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(e):void 0},_itemHasChildren(e){if("plain"===this._dataType)return;const n=this._dataAccessors.getters.items(e);return n&&n.length},_getUniqueKey(e){const n=this._dataAccessors.getters.key,t=n(e);return n&&(t||0===t)&&hp(t)?t:this.getItemsCount()},_convertItemToNode(e,n){this._itemsCount++,!1!==e.visible&&this._visibleItemsCount++;const t={internalFields:{disabled:this._dataAccessors.getters.disabled(e,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(e,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(e,{defaultValue:!1}),key:this._getUniqueKey(e),parentKey:Ie(n)?n:this._rootValue,item:this._makeObjectFromPrimitive(e),childrenKeys:[]}};return pe(t,e),delete t.items,t},setChildrenKeys(){const e=this;Ee(this._dataStructure,(n,t)=>{if(t.internalFields.parentKey===e._rootValue)return;const i=e.getParentNode(t);i&&i.internalFields.childrenKeys.push(t.internalFields.key)})},_makeObjectFromPrimitive(e){if(hp(e)){const n=e;this._dataAccessors.setters.key(e={},n)}return e},_convertToPublicNode(e,n){if(!e)return null;const t={text:this._dataAccessors.getters.display(e),key:e.internalFields.key,selected:e.internalFields.selected,expanded:e.internalFields.expanded,disabled:e.internalFields.disabled,parent:n||null,itemData:e.internalFields.item,children:[],items:[]};return t.parent&&(t.parent.children.push(t),t.parent.items.push(t)),t},convertToPublicNodes(e,n){if(!e.length)return[];const t=this,i=[];return Ee(e,(o,r)=>{r=hp(r)?t._getByKey(r):r;const c=t._convertToPublicNode(r,n);c.children=t.convertToPublicNodes(r.internalFields.childrenKeys,c),i.push(c),r.internalFields.publicNode=c}),i},setDataAccessors(e){this._dataAccessors=e},_getByKey(e){return this._dataStructure[this.getIndexByKey(e)]||null},getParentNode(e){return this._getByKey(e.internalFields.parentKey)},getByKey(e,n){if(null==n)return null;let t=null;const i=this;return r=n,Ee(e,(c,v)=>{if((v.internalFields&&v.internalFields.key||i._dataAccessors.getters.key(v)).toString()===r.toString())return t=v,!1}),t;var r},getItemsCount(){return this._itemsCount},getVisibleItemsCount(){return this._visibleItemsCount},updateIndexByKey(){const e=this;this._indexByKey={},Ee(this._dataStructure,(n,t)=>{e._checkForDuplicateId(t.internalFields.key),e._indexByKey[t.internalFields.key]=n})},updateChildrenKeys(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys(){this._indexByKey={},Ee(this._dataStructure,(e,n)=>{n.internalFields.childrenKeys=[]})},getIndexByKey(e){return this._indexByKey[e]},createPlainStructure(e,n,t){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=n,this._dataType=t,this._indexByKey={},this._convertItemsToNodes(e),this.setChildrenKeys(),this._dataStructure}}),zl="expanded",ea="selected";Bf.setEditorClass(ld);const VQ=Tt.inherit({ctor(e){this.options={},pe(this.options,this._defaultOptions(),e),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption(e,n){this.options[e]=n,"recursiveSelection"===e&&this._updateSelection()},_defaultOptions:()=>({dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new HQ,onNodeChanged:De,sort:null}),_createInternalDataStructure(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(ea)},_updateExpansion(e){this.options.recursiveExpansion&&(e?this._updateOneBranch(e):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(zl)},_updateNodesKeysArray(e){const n=this;let t=[];return Ee(n._getDataBySelectionMode(),(i,o)=>{n._isNodeVisible(o)&&o.internalFields[e]&&(e===zl||n.options.multipleSelection?t.push(o.internalFields.key):(t.length&&n.toggleSelection(t[0],!1,!0),t=[o.internalFields.key]))}),t},_getDataBySelectionMode(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:e=>!1!==e.internalFields.item.visible,_getByKey(e,n){return e===this._dataStructure?this.options.dataConverter._getByKey(n):this.options.dataConverter.getByKey(e,n)},_setChildrenSelection(){const e=this;Ee(this._dataStructure,(n,t)=>{if(!t.internalFields.childrenKeys.length)return;const i=t.internalFields.selected;!0===i&&e._toggleChildrenSelection(t,i)})},_setParentSelection(){const e=this;Ee(this._dataStructure,(n,t)=>{e.options.dataConverter.getParentNode(t)&&t.internalFields.parentKey!==e.options.rootValue&&e._iterateParents(t,o=>{const r=e._calculateSelectedState(o);e._setFieldState(o,ea,r)})})},_setParentExpansion(){const e=this;Ee(this._dataStructure,(n,t)=>{t.internalFields.expanded&&e._updateOneBranch(t.internalFields.key)})},_updateOneBranch(e){const n=this,t=this.getNodeByKey(e);n._iterateParents(t,i=>{n._setFieldState(i,zl,!0)})},_iterateChildren(e,n,t,i){if(!Be(t))return;const o=this,r=e.internalFields.key;-1===(i=i||[]).indexOf(r)&&(i.push(r),Ee(e.internalFields.childrenKeys,(c,v)=>{const S=o.getNodeByKey(v);t(S),S.internalFields.childrenKeys.length&&n&&o._iterateChildren(S,n,t,i)}))},_iterateParents(e,n,t){if(e.internalFields.parentKey===this.options.rootValue||!Be(n))return;t=t||[];const{key:i}=e.internalFields;if(-1===t.indexOf(i)){t.push(i);const o=this.options.dataConverter.getParentNode(e);o&&(n(o),o.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(o,n,t))}},_calculateSelectedState(e){const n=e.internalFields.childrenKeys.length;let t=0,i=0,o=!1;for(let r=0;r<=n-1;r++){const c=this.getNodeByKey(e.internalFields.childrenKeys[r]),S=c.internalFields.selected;!1===c.internalFields.item.visible?i++:S?t++:void 0===S&&(t+=.5)}return t&&(o=t===n-i||void 0),o},_toggleChildrenSelection(e,n){const t=this;this._iterateChildren(e,!0,i=>{t._isNodeVisible(i)&&t._setFieldState(i,ea,n)})},_setFieldState(e,n,t){e.internalFields[n]!==t&&(e.internalFields[n]=t,e.internalFields.publicNode&&(e.internalFields.publicNode[n]=t),this.options.dataAccessors.setters[n](e.internalFields.item,t),this.options.onNodeChanged(e))},_markChildren(e){const n=this;Ee(e,(t,i)=>{const o=n.getIndexByKey(i),r=n.getNodeByKey(i);n._dataStructure[o]=0,r.internalFields.childrenKeys.length&&n._markChildren(r.internalFields.childrenKeys)})},_removeNode(e){const n=this.getNodeByKey(e);this._dataStructure[this.getIndexByKey(e)]=0,this._markChildren(n.internalFields.childrenKeys);const t=this;let i=0;const o=pe([],this._dataStructure);Ee(o,(r,c)=>{c||(t._dataStructure.splice(r-i,1),i++)})},_addNode(e){const{dataConverter:n}=this.options,t=n._convertItemToNode(e,this.options.dataAccessors.getters.parentKey(e));this._dataStructure=this._dataStructure.concat(t),this._initialDataStructure=this._initialDataStructure.concat(t),n._dataStructure=n._dataStructure.concat(t)},_updateFields(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys(){return this._selectedNodesKeys},getExpandedNodesKeys(){return this._expandedNodesKeys},getData(){return this._dataStructure},getFullData(){return this._initialDataStructure},getNodeByItem(e){let n=null;return Ee(this._dataStructure,(t,i)=>{if(i.internalFields.item===e)return n=i,!1}),n},getNodesByItems(e){const n=this,t=[];return Ee(e,(i,o)=>{const r=n.getNodeByItem(o);r&&t.push(r)}),t},getNodeByKey(e,n){return this._getByKey(n||this._getDataBySelectionMode(),e)},getTreeNodes(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:e=>e.internalFields.publicNode,getRootNodes(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes(e){return Ko(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",e]).toArray()},getIndexByKey(e){return this.options.dataConverter.getIndexByKey(e)},addItem(e){this._addNode(e),this._updateFields()},removeItem(e){this._removeNode(e),this._updateFields()},toggleSelection(e,n,t){const i=this._isSingleModeUnselect(n),o=this._getByKey(t||i?this._initialDataStructure:this._dataStructure,e);this._setFieldState(o,ea,n),this.options.recursiveSelection&&!t&&(n?this._setChildrenSelection():this._toggleChildrenSelection(o,n),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(ea)},_isSingleModeUnselect(e){return!this.options.multipleSelection&&!e},toggleNodeDisabledState(e,n){const t=this.getNodeByKey(e);this._setFieldState(t,"disabled",n)},toggleSelectAll(e){if(!Ie(e))return;const n=this,t=n._selectedNodesKeys[n._selectedNodesKeys.length-1],i=n._isSingleModeUnselect(e)?this._initialDataStructure:this._dataStructure;Ee(i,(o,r)=>{n._isNodeVisible(r)&&n._setFieldState(r,ea,e)}),n._selectedNodesKeys=n._updateNodesKeysArray(ea),!e&&n.options.selectionRequired&&n.toggleSelection(t,!0)},isAllSelected(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion(e,n){const t=this.getNodeByKey(e);this._setFieldState(t,zl,n),n&&this._updateExpansion(e),this._expandedNodesKeys=this._updateNodesKeysArray(zl)},isFiltered(e){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[e]).length},_createCriteria(e,n,t){const i=[];return Array.isArray(e)?(Ee(e,(o,r)=>{i.push([r,t,n],"or")}),i.pop(),i):[e,t,n]},_filterDataStructure(e,n){const t=this.options.searchExpr||this.options.dataAccessors.getters.display,i=Bf.getOperationBySearchMode(this.options.searchMode),o=this._createCriteria(t,e,i);return Ko(n=n||this._initialDataStructure,{langParams:this.options.langParams}).filter(o).toArray()},search(e){const n=this;let t=this._filterDataStructure(e);const{dataConverter:i}=this.options;return function o(r,c){const{length:v}=r;for(;c<v;){const S=r[c];if(S.internalFields.parentKey===n.options.rootValue){c++;continue}const T=i.getParentNode(S);T?(T.internalFields.expanded||n._setFieldState(T,zl,!0),r.includes(T)?c++:(r.splice(c,0,T),o(r,c))):(Jt.log("W1007",S.internalFields.parentKey,S.internalFields.key),c++)}}(t,0),this.options.sort&&(t=Lu_queryByOptions(Ko(t),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),i._indexByKey={},Ee(t,(o,r)=>{r.internalFields.childrenKeys=[],i._indexByKey[r.internalFields.key]=o}),i._dataStructure=t,i.setChildrenKeys(),i._dataStructure}}),zQ=Cq.inherit({_getDefaultOptions(){return pe(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter(){const e=this._createDataAdapterAccessors();this._dataAdapter=new VQ(pe({dataAccessors:{getters:e.getters,setters:e.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:De,_getItemExtraPropNames:De,_initDynamicTemplates(){const e=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new $s(this._addContent.bind(this),e,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent(e,n){e.html(n.html).append(this._getIconContainer(n)).append(this._getTextContainer(n))},_getLinkContainer(e,n,t){let{linkAttr:i,url:o}=t;const r=dt(i)?i:{};return V("<a>").addClass("dx-item-url").attr(He({},r,{href:o})).append(e).append(n)},_getIconContainer(e){if(!e.icon)return;const n=Qs(e.icon);if(n.is("img")){const t=this.NAME.startsWith("dxPrivateComponent")?"":`${this.NAME} `;n.attr("alt",`${t}item icon`)}return n},_getTextContainer:e=>V("<span>").text(e.text),_initAccessors(){const e=this;Ee(this._getAccessors(),(n,t)=>{e._compileAccessor(t)}),this._compileDisplayGetter()},_getAccessors:()=>["key","selected","items","disabled","parentId","expanded"],_getChildNodes(e){const n=this,t=[];return Ee(e.internalFields.childrenKeys,(i,o)=>{const r=n._dataAdapter.getNodeByKey(o);t.push(r)}),t},_hasChildren:e=>e&&e.internalFields.childrenKeys.length,_compileAccessor(e){const n=`_${e}Getter`,t=`_${e}Setter`,i=this.option(`${e}Expr`);return i?Be(i)?(this[t]=function(o,r){o[i()]=r},void(this[n]=function(o){return o[i()]})):(this[n]=sn(i),void(this[t]=Uv(i))):(this[n]=De,void(this[t]=De))},_createDataAdapterAccessors(){const e=this,n={getters:{},setters:{}};return Ee(this._getAccessors(),(t,i)=>{const r=`_${i}Setter`,c="parentId"===i?"parentKey":i;n.getters[c]=e[`_${i}Getter`],n.setters[c]=e[r]}),n.getters.display=this._displayGetter?this._displayGetter:t=>t.text,n},_initMarkup(){this.callBase(),this._addWidgetClass()},_addWidgetClass(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:De,_renderItemFrame(e,n){const t=this.callBase.apply(this,arguments);return t.toggleClass("dx-state-disabled",!!this._disabledGetter(n)),t},_optionChanged(e){switch(e.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(e);break;default:this.callBase(e)}}}),UQ=class jQ extends $C{_getPlainItems(){return ni(this._collectionWidget.option("items"),function n(t){return t.items?[t].concat(ni(t.items,n)):t})}_stringifyItem(n){return JSON.stringify(n,(t,i)=>"template"===t?this._getTemplateString(i):i)}_getTemplateString(n){let t;return t="object"==typeof n?V(n).text():n.toString(),t}},io="dx-menu-item",$Q=`${io}-content`,xx=`${io}-selected`,Yk=`${io}-wrapper`,WQ=`${io}-expanded`,GQ=`${io}-has-text`,KQ=`${io}-has-icon`,qQ=`${io}-has-submenu`,Qk=`${io}-popout`,ZQ=`${Qk}-container`,Jk=`${io}-text`,XQ={show:50,hide:300},YQ=`${Jk}-with-url`,QQ=(()=>{class e extends zQ{_getDefaultOptions(){return pe(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return io}_setAriaSelectionAttribute(t,i){}_selectedItemClass(){return xx}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return pe(super._supportedKeys(),{space:()=>{const t=V(this.option("focusedElement"));!t.length||!this._isSelectionEnabled()||this.selectItem(t[0])},pageUp:De,pageDown:De})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=`.${io}`,super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(t,i,o){const{linkAttr:r,url:c}=o;return t?.addClass("dx-icon-with-url"),i?.addClass(YQ),super._getLinkContainer(t,i,{linkAttr:r,url:c})}_addContent(t,i){const{html:o,url:r}=i;if(r){t.html(o);const c=this._getLinkContainer(this._getIconContainer(i),this._getTextContainer(i),i);t.append(c)}else super._addContent(t,i);t.append(this._getPopoutContainer(i)),this._addContentClasses(i,t.parent())}_getTextContainer(t){const{text:i}=t;if(!i)return;const o=V("<span>").addClass(Jk),r=lt(t)?i:String(t);return o.text(r)}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(t){const{items:i}=t;let o;if(i&&i.length){const r=V("<div>").addClass(Qk);o=V("<span>").addClass(ZQ).append(r)}return o}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(t){if(!t)return;const i=this._dataAdapter.getNodeByItem(t);this._dataAdapter.toggleSelection(i.internalFields.key,!0)}_renderSelectedItem(){const t=this._dataAdapter.getSelectedNodesKeys(),i=t.length&&t[0],o=this.option("selectedItem");if(!i)return void this._selectByItem(o);const r=this._dataAdapter.getNodeByKey(i);if(!1!==r.selectable){if(!o)return void this.option("selectedItem",r.internalFields.item);o!==r.internalFields.item&&(this._dataAdapter.toggleSelection(i,!1),this._selectByItem(o))}}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=lx()}_toggleActiveState(t,i,o){if(super._toggleActiveState.apply(this,arguments),!this._inkRipple)return;const r={element:t,event:o};i?this._inkRipple.showWave(r):this._inkRipple.hideWave(r)}_getShowSubmenuMode(){let t=this.option("showSubmenuMode");return t=dt(t)?t.name:t,this._isDesktopDevice()?t:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===je.real().deviceType}_initEditStrategy(){this._editStrategy=new UQ(this)}_addCustomCssClass(t){t.addClass(this.option("cssClass"))}_itemWrapperSelector(){return`.${Yk}`}_hoverStartHandler(t){const i=this._getItemElementByEventArgs(t);!i||this._isItemDisabled(i)||(t.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,i),this._getSubmenuDelay("show"))))}_getAvailableItems(t){return super._getAvailableItems(t).filter(function(){return"hidden"!==V(this).css("visibility")})}_isItemDisabled(t){return this._disabledGetter(t.data(this._itemDataKey()))}_showSubmenu(t){this._addExpandedClass(t)}_addExpandedClass(t){V(t).addClass(WQ)}_getSubmenuDelay(t){const{delay:i}=this.option("showSubmenuMode");return Ie(i)?dt(i)?i[t]:i:XQ[t]}_getItemElementByEventArgs(t){let i=V(t.target);if(i.hasClass(this._itemClass())||i.get(0)===t.currentTarget)return i;for(;!i.hasClass(this._itemClass());)if(i=i.parent(),i.hasClass("dx-submenu"))return null;return i}_hoverEndHandler(t){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(t){return t&&t.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(t,i){if(!t.length)return;this.hasIcons=!1;const o=this._renderContainer(this.$element(),i);let r=-1,c=-1;Ee(t,(v,S)=>{const T=!1!==S.visible;T&&r<0&&(r=v),r<v&&(S.beginGroup||v===c)&&(c=T?v:v+1),v===c&&r<v&&this._renderSeparator(o),this._renderItem(v,S,o)}),this.hasIcons||o.addClass("dx-menu-no-icons")}_renderContainer(t,i){const o=V("<ul>");return this.setAria("role","none",o),o.appendTo(t).addClass("dx-menu-items-container")}_createDOMElement(t){const i=V("<li>");return this.setAria("role","none",i),i.appendTo(t).addClass(Yk)}_renderItem(t,i,o,r){const{items:c=[]}=this.option(),v=r??this._createDOMElement(o);c[t+1]&&c[t+1].beginGroup&&v.addClass("dx-menu-last-group-item");const S=super._renderItem(t,i.internalFields.item,v);i.internalFields.item===this.option("selectedItem")&&S.addClass(xx),S.attr("tabIndex",-1),this._hasSubmenu(i)&&this.setAria("haspopup","true",S)}_renderItemFrame(t,i,o){const r=o.children(`.${io}`);return r.length?r:super._renderItemFrame.apply(this,arguments)}_refreshItem(t,i){const o=this._dataAdapter.getNodeByItem(i),r=t.data(this._itemIndexKey()),c=t.closest("ul"),v=t.closest("li");this._renderItem(r,o,c,v)}_addContentClasses(t,i){const r=!!t.icon,c=!!t.items&&!!t.items.length;i.toggleClass(GQ,!!t.text&&!!t.text.length),i.toggleClass(KQ,r),this.hasIcons||(this.hasIcons=r),i.toggleClass(qQ,c)}_getItemContent(t){let i=super._getItemContent(t);return i.length||(i=t.children(`.${$Q}`)),i}_postprocessRenderItem(t){const i=V(t.itemElement),o=this._dataAdapter.getSelectedNodesKeys();o.length&&this._selectedGetter(t.itemData)&&this._isItemSelectable(t.itemData)&&this._dataAdapter.getNodeByItem(t.itemData).internalFields.key===o[0]?(i.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(i,"true")):this._setAriaSelectionAttribute(i,"false")}_isItemSelectable(t){return!1!==t.selectable}_renderSeparator(t){V("<li>").appendTo(t).addClass("dx-menu-separator")}_itemClickHandler(t){if(t._skipHandling)return;const i=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(t,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:i.bind(this)}),t._skipHandling=!0}_itemClick(t){const{event:i,itemData:o}=t.args[0],r=this._getItemElementByEventArgs(i),c=r&&r.find(".dx-item-url").get(0);o.url&&c&&c.click()}_updateSubmenuVisibilityOnClick(t){this._updateSelectedItemOnClick(t),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(t.args[0].itemElement)}_updateSelectedItemOnClick(t){const i=t.args?t.args[0]:t;if(!this._isItemSelectAllowed(i.itemData))return;const o=this._dataAdapter.getSelectedNodesKeys(),r=o.length&&this._dataAdapter.getNodeByKey(o[0]);r&&this._toggleItemSelection(r,!1),r&&r.internalFields.item===i.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(i.itemData)}_isItemSelectAllowed(t){const i=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&i&&this._isItemSelectable(t)&&!this._itemsGetter(t)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(new Ae).resolve().promise()}_optionChanged(t){switch(t.name){case"showSubmenuMode":break;case"selectedItem":{const i=this._dataAdapter.getNodeByItem(t.value),o=this._dataAdapter.getSelectedNodesKeys()[0];if(i&&i.internalFields.key!==o){if(!1===i.selectable)break;o&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(o),!1),this._toggleItemSelection(i,!0),this._updateSelectedItems()}break}case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(t)}}_toggleItemSelection(t,i){const o=this._getElementByItem(t.internalFields.item);o&&V(o).toggleClass(xx),this._dataAdapter.toggleSelection(t.internalFields.key,i)}_getElementByItem(t){let i;return Ee(this._itemElements(),(o,r)=>V(r).data(this._itemDataKey())!==t||(i=r,!1)),i}_updateSelectedItems(t,i){(t||i)&&this._fireSelectionChangeEvent(i,t)}_fireSelectionChangeEvent(t,i){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[t],removedItems:[i]})}selectItem(t){const i=t.nodeType?this._getItemData(t):t,o=this._dataAdapter.getSelectedNodesKeys()[0],r=this.option("selectedItem"),c=this._dataAdapter.getNodeByItem(i);c.internalFields.key!==o&&(o&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(o),!1),this._toggleItemSelection(c,!0),this._updateSelectedItems(r,i),this._setOptionWithoutOptionChange("selectedItem",i))}unselectItem(t){const i=t.nodeType?this._getItemData(t):t,o=this._dataAdapter.getNodeByItem(i),r=this.option("selectedItem");o.internalFields.selected&&(this._toggleItemSelection(o,!1),this._updateSelectedItems(r,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return e.ItemClass=ju,e})(),eF=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],eJ=["up","down","first","last"],tF=ot();class nF extends QQ{getShowEvent(n){return dt(n)?null!==n.name?n.name??"dxcontextmenu":null:n}getShowDelay(n){return dt(n)&&n.delay}_getDefaultOptions(){return pe(super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!Ke(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),pe(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},Ee(eF,(n,t)=>{this._actions[t]=this._createActionByOption(t)||De})}_setOptionsByReference(){super._setOptionsByReference(),pe(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():V()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return pe(super._supportedKeys(),{space:()=>{const n=V(this.option("focusedElement"));this.hide(),n.length&&this._isSelectionEnabled()&&this.selectItem(n[0])},escape:this.hide})}_getActiveItem(n){const t=this._getAvailableItems(),i=t.filter(".dx-state-focused"),o=t.filter(".dx-state-hover");return o.closest(".dx-menu-items-container").find(".dx-menu-item").index(i)>=0?i:o.length?o:super._getActiveItem()}_moveFocus(n){const t=this._getItemsByLocation(n),i=this._getActiveItem(!0),o=this.itemsContainer().find(".dx-state-hover"),c=!(!V(this.option("focusedElement")).length&&!o.length);let v;switch(n){case"up":v=c?this._prevItem(t):i,this._setFocusedElement(v),i.is(t.first())&&this._actions.onLeftFirstItem(i);break;case"down":v=c?this._nextItem(t):i,this._setFocusedElement(v),i.is(t.last())&&this._actions.onLeftLastItem(i);break;case"right":v=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(t,n),this._setFocusedElement(v);break;case"left":v=this.option("rtlEnabled")?this._expandSubmenuHandler(t,n):this._hideSubmenuHandler(),this._setFocusedElement(v);break;case"first":v=t.first(),this._setFocusedElement(v);break;case"last":v=t.last(),this._setFocusedElement(v);break;default:return super._moveFocus(n)}}_setFocusedElement(n){n&&0!==n.length&&(this.option("focusedElement",st(n)),this._scrollToElement(n))}_scrollToElement(n){const i=n.closest(".dx-scrollable").dxScrollable("instance");i?.scrollToElement(n)}_getItemsByLocation(n){const t=this._getActiveItem(!0);let i;return eJ.includes(n)&&(i=t.closest(".dx-menu-items-container").children().children()),i=this._getAvailableItems(i),i}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if(Ie(this._overlay)){const n=this._overlay.$content();super._refreshActiveDescendant(n)}}_hideSubmenuHandler(){const n=this._getActiveItem(!0),t=n.parents(".dx-menu-item-expanded").first();if(t.length)return this._hideSubmenusOnSameLevel(t),this._hideSubmenu(n.closest(".dx-submenu")),t;this._actions.onCloseRootSubmenu(n)}_expandSubmenuHandler(n,t){const i=this._getActiveItem(!0),o=this._getItemData(i),r=this._dataAdapter.getNodeByItem(o),c=this._hasSubmenu(r),v=i.children(".dx-submenu");if(c&&!i.hasClass("dx-state-disabled"))return(!v.length||"hidden"===v.css("visibility"))&&this._showSubmenu(i),this._nextItem(this._getItemsByLocation(t));this._actions.onExpandLastSubmenu(i)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_isTargetOutOfComponent(n){return!(0!==V(n).closest(".dx-context-menu").length)}_focusOutHandler(n){const{relatedTarget:t}=n;t&&this._isTargetOutOfComponent(t)&&this.hide(),super._focusOutHandler(n)}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(this._overlay)return;const n=this._getOverlayOptions();this._overlay=this._createComponent(V("<div>").appendTo(this._$element),wl,n);const t=this._overlay.$content();t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent()}preventShowingDefaultContextMenuAboveOverlay(){const n=this._itemContainer(),t=Te(iR,this.NAME);ue.off(n,t,".dx-submenu"),ue.on(n,t,".dx-submenu",i=>{i.stopPropagation(),i.preventDefault(),ue.off(n,t,".dx-submenu")})}_itemContextMenuHandler(n){super._itemContextMenuHandler(n),n.stopPropagation()}_addPlatformDependentClass(n){je.current().phone&&n.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(n){const t=this.getShowEvent(this.option("showEvent"));if(!t)return;const i=Te(t,this.NAME);this._showContextMenuEventHandler?ue.off(Pe.getDocument(),i,n,this._showContextMenuEventHandler):ue.off(V(n),i)}_attachShowContextMenuEvents(){const n=this._getTarget(),t=this.getShowEvent(this.option("showEvent"));if(!t)return;const i=Te(t,this.NAME);let o=this._createAction(c=>{const v=this.getShowDelay(this.option("showEvent"));v?setTimeout(()=>this._show(c.event),v):this._show(c.event)},{validatingTargetName:"target"});const r=c=>o({event:c,target:V(c.currentTarget)});o=this._createAction(o),qi(n)||n.nodeType||$t(n)?(this._showContextMenuEventHandler=void 0,ue.on(n,i,r)):(this._showContextMenuEventHandler=r,ue.on(Pe.getDocument(),i,n,this._showContextMenuEventHandler))}_hoverEndHandler(n){super._hoverEndHandler(n),n.stopPropagation()}_renderDimensions(){}_renderContainer(n,t){const i=t||this._itemContainer();(n=V("<div>")).appendTo(i).addClass("dx-submenu").css("visibility",t?"hidden":"visible"),n.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(n);const o=super._renderContainer(n);return t?o:this.option("width")?o.css("minWidth",this.option("width")):this.option("height")?o.css("minHeight",this.option("height")):o}_renderSubmenuItems(n,t){this._renderItems(this._getChildNodes(n),t);const i=t.children(".dx-submenu");this._actions.onSubmenuCreated({itemElement:st(t),itemData:n.internalFields.item,submenuElement:st(i)}),this._initScrollable(i),this.setAria({role:"menu"},i)}_getOverlayOptions(){const n=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:i=>this._hideOnOutsideClickHandler(i),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:n.at,my:n.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:tF}}_overlayShownActionHandler(n){this._actions.onShown(n)}_overlayHidingActionHandler(n){this._actions.onHiding(n),n.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(n){this._actions.onHidden(n)}_shouldHideOnOutsideClick(n){const{closeOnOutsideClick:t,hideOnOutsideClick:i}=this.option();return Be(i)?i(n):Be(t)?t(n):i||t}_hideOnOutsideClickHandler(n){if(!this._shouldHideOnOutsideClick(n))return!1;if(Pe.isDocument(n.target))return!0;const t=this._getActiveItemsContainer(n.target),i=this._getItemsContainers(),o=this._searchActiveItem(n.target),r=this.$element().parents(".dx-menu-item"),c=o[0]===r[0]&&o.length&&r.length;return!(this._isIncludeOverlay(t,i)&&o.length||c)||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(o),!1)}_getActiveItemsContainer(n){return V(n).closest(".dx-menu-items-container")}_getItemsContainers(){return this._overlay.$content().find(".dx-menu-items-container")}_searchActiveItem(n){return V(n).closest(".dx-menu-item").eq(0)}_isIncludeOverlay(n,t){let i=!1;return Ee(t,(o,r)=>{n.is(r)&&!i&&(i=!0)}),i}_hideAllShownChildSubmenus(n){const t=n.find(".dx-submenu"),i=pe([],this._shownSubmenus);t.length>0&&Ee(i,(o,r)=>{const c=this._searchActiveItem(r.context).parent();c.parent().is(n.parent().parent())&&!c.is(n.parent())&&this._hideSubmenu(r)})}_initScrollable(n){this._createComponent(n,Rk,{useKeyboard:!1,_onVisibilityChanged:t=>{t.scrollTo(0)}})}_setSubMenuHeight(n,t,i){const o=n.find(".dx-menu-items-container"),r=et(o),c=this._getMaxHeight(t,!i),v=Math.min(r,c);n.css("height",i?v:"100%")}_getMaxHeight(n){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=et(tF),o=qi(n),r=Pe.getDocument();if(!o||n.length&&n[0]===r)return i;const v=n[0].getBoundingClientRect().top,S=et(n);return(t?Math.max(v,i-v-S):Math.max(v+S,i-v))-10}_dimensionChanged(){this._shownSubmenus&&this._shownSubmenus.forEach(n=>{const t=n.closest(".dx-menu-item");this._setSubMenuHeight(n,t,!0),this._scrollToElement(t);const i=this._getSubmenuPosition(t);Dn.setup(n,i)})}_getSubmenuBorderWidth(){return ki(yo())?0:1}_showSubmenu(n){const t=this._dataAdapter.getNodeByItem(this._getItemData(n));if(this._hideSubmenusOnSameLevel(n),!this._hasSubmenu(t))return;let i=n.children(".dx-submenu");const o=i.length;super._showSubmenu(n),o||(this._renderSubmenuItems(t,n),i=n.children(".dx-submenu")),this._setSubMenuHeight(i,n,!0),this._isSubmenuVisible(i)||this._drawSubmenu(n)}_hideSubmenusOnSameLevel(n){const t=n.parent(".dx-menu-item-wrapper").siblings().find(".dx-menu-item-expanded");t.length&&(t.removeClass("dx-menu-item-expanded"),this._hideSubmenu(t.find(".dx-submenu")))}_hideSubmenuGroup(n){this._isSubmenuVisible(n)&&this._hideSubmenuCore(n)}_isSubmenuVisible(n){return"visible"===n.css("visibility")}_drawSubmenu(n){const t=this.option("animation")?this.option("animation").show:{},i=n.children(".dx-submenu"),o=this._getSubmenuPosition(n);this._overlay&&this._overlay.option("visible")&&(Ie(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(i)||this._shownSubmenus.push(i),t&&Wn.stop(i),Dn.setup(i,o),t&&(lt(t.to)&&(t.to.position=o),this._animate(i,t)),i.css("visibility","visible"))}_animate(n,t){Wn.animate(n,t)}_getSubmenuPosition(n){const t=this.option("submenuDirection").toLowerCase(),o={collision:"flip",of:n.parent(".dx-menu-item-wrapper"),offset:{h:0,v:-1}};switch(t){case"left":o.at="left top",o.my="right top";break;case"right":o.at="right top",o.my="left top";break;default:this.option("rtlEnabled")?(o.at="left top",o.my="right top"):(o.at="right top",o.my="left top")}return o}_updateSubmenuVisibilityOnClick(n){if(!n.args.length)return;const{itemData:t}=n.args[0],i=this._dataAdapter.getNodeByItem(t);if(!i)return;const o=V(n.args[0].itemElement);let r=o.find(".dx-submenu");if(this._hasSubmenu(i)&&!r.length&&(this._renderSubmenuItems(i,o),r=o.find(".dx-submenu")),(o.context!==r.context||"visible"!==r.css("visibility"))&&(this._updateSelectedItemOnClick(n),t&&!t.disabled&&(!t||!1!==t.closeMenuOnClick)))if(0===r.length){const S=V(o.parents(".dx-submenu")[0]);this._hideSubmenu(S),!n.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(r)&&this._hideSubmenu(r),this._showSubmenu(o)}_hideSubmenu(n){const t=pe([],this._shownSubmenus);Ee(t,(i,o)=>{(n.is(o)||Uo(n[0],o[0]))&&(o.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore(o))})}_hideSubmenuCore(n){const t=this._shownSubmenus.indexOf(n),i=this.option("animation")?this.option("animation").hide:null;t>=0&&this._shownSubmenus.splice(t,1),this._stopAnimate(n),i&&this._animate(n,i),n.css("visibility","hidden"),n.dxScrollable("instance").scrollTo(0),this.option("focusedElement",null)}_stopAnimate(n){Wn.stop(n,!0)}_hideAllShownSubmenus(){const n=pe([],this._shownSubmenus);this._overlay.$content().find(".dx-menu-item-expanded").removeClass("dx-menu-item-expanded"),Ee(n,(i,o)=>{this._hideSubmenu(o)})}_visibilityChanged(n){n&&this._renderContentImpl()}_optionChanged(n){if(eF.includes(n.name))this._initActions();else switch(n.name){case"visible":this._renderVisibility(n.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":n.previousValue&&this._detachShowContextMenuEvents(n.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(n)}}_renderVisibility(n){return n?this._show():this._hide()}_toggleVisibility(){}_show(n){const t={jQEvent:n};let i=Ae().reject().promise();if(this._actions.onShowing(t),t.cancel)return i;const o=this._positionContextMenu(n);if(o){var r;this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes()));const c=V(this._overlay.content()).children(".dx-submenu");this._setOptionWithoutOptionChange("visible",!0),this._overlay.option({height:()=>this._getMaxHeight(o.of),maxHeight:()=>{const v=c.find(".dx-menu-items-container"),S=this._getSubmenuBorderWidth();return et(v)+2*S},position:o}),c.length&&this._setSubMenuHeight(c,o.of,!1),i=this._overlay.show(),n&&n.stopPropagation(),this._setAriaAttributes(),"dxhold"===(null==n||null===(r=n.originalEvent)||void 0===r?void 0:r.type)&&this.preventShowingDefaultContextMenuAboveOverlay()}return i}_renderItems(n,t){super._renderItems(n,t);const i=V(this._overlay.content()).children(".dx-submenu");i.length&&this._initScrollable(i)}_setAriaAttributes(){this._overlayContentId=`dx-${new Pn}`,this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||V(Pe.getDocument())}_getContextMenuPosition(){return pe({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(n){let t=this._getContextMenuPosition();const i=this._isInitialOptionValue("position"),o=this._createActionByOption("onPositioning");n&&n.preventDefault&&i&&(t.of=n);const r={position:t,event:n};return o(r),r.cancel?t=null:r.event&&(r.event.cancel=!0,n.preventDefault()),t}_refresh(){if(Ke())if(this._overlay){const n=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",n)}else super._refresh();else super._refresh()}_hide(){let n;return this._overlay&&(n=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),n||Ae().reject().promise()}toggle(n){const t=this.option("visible");return this._renderVisibility(n=void 0===n?!t:n)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}xt("dxContextMenu",nF);const iF=nF,Ox=class tJ{constructor(n){const{EventDispatcher:t}=Ze();this.onChanged=new t,this._owner=n}raiseBarCommandExecuted(n,t){this.onChanged.raise("notifyBarCommandExecuted",parseInt(n),t)}getCommandKeys(){throw"Not Implemented"}setItemValue(n,t){}setItemEnabled(n,t){}setItemVisible(n,t){}setEnabled(n){}setItemSubItems(n,t){}isVisible(){return!0}_getKeys(n){return n.reduce((i,o)=>(void 0!==o.command&&i.push(o.command),o.items&&(i=i.concat(this._getKeys(o.items))),i),[])}},oF=Te(Wt.up,"dxDiagramPanel"),rF=class nJ extends vi{_init(){super._init(),this._createOnPointerUpAction()}_render(){super._render(),this._attachPointerUpEvent()}_getPointerUpElements(){return[this.$element()]}_attachPointerUpEvent(){this._getPointerUpElements().forEach(t=>{ue.off(t,oF),ue.on(t,oF,i=>{V(i.target).closest(".dx-textbox").length||this._onPointerUpAction()})})}_createOnPointerUpAction(){this._onPointerUpAction=this._createActionByOption("onPointerUp")}_optionChanged(n){"onPointerUp"===n.name?this._createOnPointerUpAction():super._optionChanged(n)}},bx={getContextMenuItemTemplate(e,n,t,i){const o=V(i);o.empty();const r=void 0!==n.rootCommand?n.rootCommand:-1;if(n.icon&&!n.checked){const c=Qs(n.icon);o.append(c)}else if(e._menuHasCheckedItems&&!0===e._menuHasCheckedItems[r]){const c=Qs("check");c.css("visibility",n.checked?"visible":"hidden"),o.append(c)}o.append('<span class="dx-menu-item-text">'+n.text+"</span>"),Array.isArray(n.items)&&n.items.length>0&&o.append('<span class="dx-menu-item-popout-container"><div class="dx-menu-item-popout"></div></span>')},getContextMenuCssClass:()=>"dx-diagram-contextmenu",onContextMenuItemClick(e,n,t){if(void 0===n.command&&void 0===n.name||Array.isArray(n.items)&&n.items.length){if(void 0!==n.rootCommand&&void 0!==n.value){const i=bx.getItemCommandParameter(e,n,n.value);t.call(this,n.rootCommand,void 0,i)}}else{const i=bx.getItemCommandParameter(e,n);t.call(this,n.command,n.name,i)}},getItemValue:e=>"object"==typeof e.value?JSON.stringify(e.value):e.value,getItemOptionText(e,n){if(e){n=n.slice();const t=this._getParentItemOptionText(n);e._originalItemsInfo&&e._originalItemsInfo[t]&&(n[n.length-1]+=e._originalItemsInfo[t].indexPathCorrection)}return this._getItemOptionTextCore(n)},_getParentItemOptionText(e){const n=e.slice(0,e.length-1);return this._getItemOptionTextCore(n)},_getItemOptionTextCore:e=>e.reduce((n,t)=>n+`items[${t}].`,""),getItemCommandParameter:(e,n,t)=>n.getParameter?n.getParameter(e):t,updateContextMenuItems(e,n,t,i){e._originalItemsInfo||(e._originalItemsInfo={}),e._originalItemsInfo[n]||(e._originalItemsInfo[n]={items:e.option(n+"items")||[]}),i=i.map(r=>({value:this.getItemValue(r),text:r.text,checked:r.checked,widget:e,rootCommand:t}));const o=e._originalItemsInfo[n].items;e.option(n+"items",i.concat(o)),e._originalItemsInfo[n]&&o.length&&(e._originalItemsInfo[n].indexPathCorrection=i.length)},updateContextMenuItemVisible(e,n,t){e.option(n+"visible",t)},updateContextMenuItemValue(e,n,t,i){const o=e.option(n+"items");"boolean"!=typeof i||o&&o.length?void 0!==i&&(this._setContextMenuHasCheckedItems(e,t),Array.isArray(o)&&o.forEach((r,c)=>{r.checked=r.value===i})):(this._setContextMenuHasCheckedItems(e,-1),e.option(n+"checked",i))},_setContextMenuHasCheckedItems(e,n){e._menuHasCheckedItems||(e._menuHasCheckedItems={}),e._menuHasCheckedItems[n]=!0}},An=bx,sF="dx-invalid-message-auto",aF="dx-validation-target";class Sx extends QR{getProps(){const n=super.getProps();return n.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){const i=V(function iJ(e,n){var t;return((null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))??document).querySelector(n)}(this.element(),".dx-invalid-message.dx-overlay-wrapper"));i?.removeClass(sF);const o=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{i?.addClass(sF)},o)}},n.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},n}_createElement(n){super._createElement(n),this.showValidationMessageTimeout=void 0,this.validationRequest=bt(),Yt(this.$element()[0],aF,this)}_render(){var n;null===(n=this.option("_onMarkupRendered"))||void 0===n||n()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(n){super._initOptions(n),this.option(Rl.initValidationOptions(n))}_getDefaultOptions(){return pe(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(n,t){const i=pe({},n.option()),o=()=>this._silent(t,i);o(),n.on("optionChanged",o)}_raiseValidation(n,t){const i=!Ie(n)&&!Ie(t);n!==t&&!i&&this.validationRequest.fire({value:n,editor:this})}_raiseValueChangeAction(n,t){var i;null===(i=this._valueChangeAction)||void 0===i||i.call(this,{element:this.$element(),previousValue:t,value:n,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(n){const{name:t,previousValue:i,value:o}=n;switch(t&&void 0!==this._getActionConfigs()[t]&&this._addAction(t),t){case"value":this._raiseValidation(o,i),this.option("isDirty",this._initialValue!==o),this._raiseValueChangeAction(o,i);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Rl.synchronizeValidationOptions(n,this.option()))}super._optionChanged(n)}clear(){const{value:n}=this._getDefaultOptions();this.option({value:n})}reset(){arguments.length&&(this._initialValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),Yt(this.element(),aF,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}const oJ=Js.isEditor,lF=e=>oJ(e)||e instanceof Sx;Sx.isEditor=lF,Js.isEditor=lF;class rJ extends Sx{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const n=super.getProps();return null!==n.value&&(n.value=!!n.value),n}}const sJ=["dataSource","selectedRowKeys"],aJ={integrationOptions:!0};function cd(e,n,t){return{path:e,value:n,previousValue:t}}function cF(e,n,t,i,o,r){if(aJ[i])return;const c=Ki(n),v=Ki(t);if(n!==t)if(c!==v)e.push(cd(i,t,n));else if("object"===c)if(lt(t)){const S=dF(n,t,o,r);e.push(...S.map(T=>He({},T,{path:`${i}.${T.path}`})))}else e.push(cd(i,t,n));else if("array"===c)if(r.some(T=>o.includes(T))&&n!==t)e.push(cd(i,t,n));else if(n.length!==t.length)e.push(cd(i,t,n));else{const T=dF(n,t,o,r);[].push.apply(e,T.map(F=>He({},F,{path:`${i}${F.path}`})))}else e.push(cd(i,t,n))}const uF=e=>(n,t,i,o)=>{const r=[],c=Array.isArray(n)?v=>{cF(r,n[v],t[v],`[${v}]`,`${i}.${v}`,o)}:v=>{cF(r,n[v],t[v],v,`${i}.${v}`,o)};return e(n).forEach(c),Object.keys(t).filter(v=>!Object.prototype.hasOwnProperty.call(n,v)&&n[v]!==t[v]).forEach(v=>{r.push({path:v,value:t[v],previousValue:n[v]})}),r},dF=uF(e=>Object.keys(e)),lJ={key:!0,ref:!0,children:!0,style:!0},cJ=uF(e=>Object.keys(e).filter(n=>!lJ[n])),dJ=["valueChange"],hJ=["componentProps","componentType","templateNames"],hF=e=>Object.keys(e).reduce((n,t)=>(void 0!==e[t]&&(n[t]=e[t]),n),{}),fJ={};let gJ=(()=>{class e extends rx{get config(){return this.context[ls.id]?this.context[ls.id]:ls.defaultValue}constructor(t){super(t),this.state={},this.widgetRef={current:null},this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}createEffects(){return[new _n(this.setupWidget,[]),new _n(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var t;null===(t=this._effects[1])||void 0===t||t.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){const t=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){const t=this.getInstance();if(!t)return;const i=function uJ(e,n){return cJ(e,n,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:sJ)}(this.prevProps||{},this.properties);i.length&&(t.beginUpdate(),i.forEach(o=>{let{path:r,value:c}=o;t.option(r,c)}),t.endUpdate()),this.prevProps=this.properties}get properties(){var t;const i=hF(this.props.componentProps),{valueChange:o}=i,r=ai(i,dJ),c=He({rtlEnabled:!(null===(t=this.config)||void 0===t||!t.rtlEnabled),isRenovated:!0},r);return o&&(c.onValueChanged=S=>{let{value:T}=S;return o(T)}),this.props.templateNames.forEach(S=>{((e,n,t)=>{const i=n[e];return!!i&&"string"!=typeof i})(S,c)&&(c[S]=(T,F,N)=>{!function cX(e,n,t){setTimeout(()=>{id(Sf(e,n),(e=>{var n,t;return(null===(n=e.container)||void 0===n?void 0:n.get(0))||(null===(t=e.item)||void 0===t?void 0:t.get(0))})(n))},0)}(this.props.componentProps[S],{item:T,index:F,container:N})})}),c}get restAttributes(){return ai(this.props,hJ)}getInstance(){return this.instance}render(){return(e=>{let{props:{componentProps:{className:n}},restAttributes:t,widgetRef:i}=e;return hF(Hn(1,"div",n,null,1,He({},t),null,i))})({props:He({},this.props),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}return e.defaultProps=fJ,e})();const mJ=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],vJ=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(If),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));let yJ=(()=>{class e extends Ll{constructor(t){super(t),this.state={}}get componentProps(){return this.props}get restAttributes(){return ai(this.props,mJ)}render(){return(e=>{let{componentProps:n,restAttributes:t}=e;return Ir(no(2,gJ,He({componentType:Fk,componentProps:n,templateNames:[]},t)))})({props:He({},this.props),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return e.defaultProps=vJ,e})();const CJ=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],yn=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(If),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),bJ={get readOnly(){return yn.readOnly},get name(){return yn.name},get validationError(){return yn.validationError},get validationErrors(){return yn.validationErrors},get validationMessageMode(){return yn.validationMessageMode},get validationMessagePosition(){return yn.validationMessagePosition},get validationStatus(){return yn.validationStatus},get isValid(){return yn.isValid},get isDirty(){return yn.isDirty},get inputAttr(){return yn.inputAttr},get defaultValue(){return yn.defaultValue},get valueChange(){return yn.valueChange},get className(){return yn.className},get activeStateEnabled(){return yn.activeStateEnabled},get disabled(){return yn.disabled},get focusStateEnabled(){return yn.focusStateEnabled},get hoverStateEnabled(){return yn.hoverStateEnabled},get tabIndex(){return yn.tabIndex},get visible(){return yn.visible},get aria(){return Ef.aria},get classes(){return Ef.classes}};class Vf extends Of{constructor(n){super(n),this.widgetRef={current:null},this.rootElementRef={current:null},this.__getterCache={},this.state={validationMessageGuid:`dx-${new Pn}`,isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new _n(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),bf()]}updateEffects(){var n;null===(n=this._effects[0])||void 0===n||n.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(n=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(n){const{onFocusIn:t}=this.props;t?.(n)}get cssClasses(){return`${(e=>{const{classes:n,isValid:t,readOnly:i}=e;return as({"dx-state-readonly":!!i,"dx-invalid":!t,[String(n)]:!!n})})(He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:n,validationStatus:t}=this.props;return!(n&&"invalid"!==t)&&(this.validationErrors??[]).length>0}get aria(){const{isValid:n,readOnly:t}=this.props,i={readonly:t?"true":"false",invalid:n?"false":"true"};return this.shouldShowValidationMessage&&(i.describedBy=this.state.validationMessageGuid),He({},i,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:n,validationErrors:t}=this.props;let i=t&&[...t];return!i&&n&&(i=[He({},n)]),i})()}get validationMessageTarget(){var n;return null===(n=this.rootElementRef)||void 0===n?void 0:n.current}get restAttributes(){return ai(He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),CJ)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(n,t,i){super.componentWillUpdate(),(this.props.validationError!==n.validationError||this.props.validationErrors!==n.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return(e=>{const{aria:n,cssClasses:t,isValidationMessageVisible:i,onFocusIn:o,props:{accessKey:r,activeStateEnabled:c,children:v,className:S,disabled:T,focusStateEnabled:F,height:N,hint:B,hoverStateEnabled:X,onClick:ne,onKeyDown:le,rtlEnabled:he,tabIndex:Oe,validationMessageMode:_e,validationMessagePosition:ke,visible:Ne,width:We},restAttributes:Ot,rootElementRef:Cn,validationErrors:At,validationMessageGuid:Gn,validationMessageTarget:Oi,widgetRef:ro}=e;return Ir(no(2,ck,He({rootElementRef:Cn,aria:n,classes:t,activeStateEnabled:c,focusStateEnabled:F,hoverStateEnabled:X,accessKey:r,className:S,rtlEnabled:he,hint:B,disabled:T,height:N,width:We,onFocusIn:o,onClick:ne,onKeyDown:le,tabIndex:Oe,visible:Ne},Ot,{children:Fl([v,i&&no(2,yJ,{validationErrors:At,mode:_e,positionSide:ke,rtlEnabled:he,target:Oi,boundary:Oi,visualContainer:Oi,contentId:Gn})],0)}),null,ro))})({props:He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}Vf.defaultProps=bJ;const DJ=["size"],EJ={};let wJ=(()=>{class e extends Ll{constructor(t){super(t),this.state={},this.elementRef={current:null},this.__getterCache={}}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:t}=this.props;return{fontSize:Op("fontSize",t)}})()}get restAttributes(){return ai(this.props,DJ)}componentWillUpdate(t,i,o){this.props.size!==t.size&&(this.__getterCache.cssStyles=void 0)}render(){return(e=>{const{cssStyles:n,elementRef:t}=e;return Hn(1,"span","dx-checkbox-icon",null,1,{style:KR(n)},null,t)})({props:He({},this.props),elementRef:this.elementRef,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}return e.defaultProps=EJ,e})();const PJ=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],pn=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(yn),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===je.real().deviceType&&!je.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),AJ={get text(){return pn.text},get enableThreeStateBehavior(){return pn.enableThreeStateBehavior},get activeStateEnabled(){return pn.activeStateEnabled},get hoverStateEnabled(){return pn.hoverStateEnabled},get focusStateEnabled(){return pn.focusStateEnabled},get defaultValue(){return pn.defaultValue},get valueChange(){return pn.valueChange},get readOnly(){return pn.readOnly},get name(){return pn.name},get validationError(){return pn.validationError},get validationErrors(){return pn.validationErrors},get validationMessageMode(){return pn.validationMessageMode},get validationMessagePosition(){return pn.validationMessagePosition},get validationStatus(){return pn.validationStatus},get isValid(){return pn.isValid},get isDirty(){return pn.isDirty},get inputAttr(){return pn.inputAttr},get className(){return pn.className},get disabled(){return pn.disabled},get tabIndex(){return pn.tabIndex},get visible(){return pn.visible},get aria(){return Ef.aria}};class zf extends Of{constructor(n){super(n),this.editorRef={current:null},this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[bf()]}onWidgetClick(n){const{enableThreeStateBehavior:t,readOnly:i,saveValueChangeEvent:o}=this.props;if(!i)if(o?.(n),t){let r;this.setState(c=>(r=null===(void 0!==this.props.value?this.props.value:c.value)||!(void 0!==this.props.value?this.props.value:c.value)&&null,{value:r})),this.props.valueChange(r)}else{let r;this.setState(c=>(r=!(void 0!==this.props.value?this.props.value:c.value),{value:r})),this.props.valueChange(r)}}keyDown(n){const{onKeyDown:t}=this.props,{keyName:i,originalEvent:o,which:r}=n,c=t?.(n);if(null!=c&&c.cancel)return c;("space"===i||"space"===r)&&(o.preventDefault(),this.onWidgetClick(o))}get cssClasses(){return(e=>{const{text:n,value:t}=e;return as({"dx-checkbox":!0,"dx-checkbox-checked":!0===t,"dx-checkbox-has-text":!!n,"dx-checkbox-indeterminate":null===t})})(He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){return He({},{role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":`${!0===(void 0!==this.props.value?this.props.value:this.state.value)}`},this.props.aria)}get restAttributes(){return ai(He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),PJ)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){return(e=>{const{aria:n,cssClasses:t,editorRef:i,keyDown:o,onWidgetClick:r,props:{accessKey:c,activeStateEnabled:v,className:S,disabled:T,focusStateEnabled:F,height:N,hint:B,hoverStateEnabled:X,iconSize:ne,isValid:le,name:he,onFocusIn:Oe,readOnly:_e,rtlEnabled:ke,tabIndex:Ne,text:We,validationError:Ot,validationErrors:Cn,validationMessageMode:At,validationMessagePosition:Gn,validationStatus:Oi,value:ro,visible:coe,width:uoe},restAttributes:doe}=e;return Ir(no(2,Vf,He({aria:n,classes:t,onClick:r,onKeyDown:o,accessKey:c,activeStateEnabled:v,focusStateEnabled:F,hoverStateEnabled:X,className:S,disabled:T,readOnly:_e,hint:B,height:N,width:uoe,rtlEnabled:ke,tabIndex:Ne,visible:coe,validationError:Ot,validationErrors:Cn,validationMessageMode:At,validationMessagePosition:Gn,validationStatus:Oi,isValid:le,onFocusIn:Oe},doe,{children:Fl([Ir(Hn(64,"input",null,null,1,He({type:"hidden",value:`${ro}`},he&&{name:he}))),Hn(1,"div","dx-checkbox-container",[no(2,wJ,{size:ne,isChecked:!0===ro}),We&&Hn(1,"span","dx-checkbox-text",We,0)],0)],4)}),null,i))})({props:He({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}zf.defaultProps=AJ;const fF=[];class Dx extends rJ{getProps(){const n=super.getProps();return n.onKeyDown=this._wrapKeyDownHandler(n.onKeyDown),n}focus(){var n;return null===(n=this.viewRef)||void 0===n?void 0:n.focus(...arguments)}blur(){var n;return null===(n=this.viewRef)||void 0===n?void 0:n.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return zf}}xt("dxCheckBox",Dx),Dx.defaultOptions=function kJ(e){fF.push(e),zf.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(zf.defaultProps),Object.getOwnPropertyDescriptors(function RJ(e){const n=["value"];return Object.keys(e).reduce((t,i)=>{const o=e[i];return t[n.some(c=>c===i)?"default"+i.charAt(0).toUpperCase()+i.slice(1):i]=o,t},{})}(vl(fF)))))};const gF=Dx,mF=Js.inherit({_supportedKeys(){return pe(this.callBase(),{space:function(e){e.preventDefault(),this._clickAction({event:e})}})},_getDefaultOptions(){return pe(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=V("<div>").addClass("dx-radiobutton-icon"),V("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(e){this.$element().toggleClass("dx-radiobutton-checked",e).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",e),this.setAria("checked",e)},_renderClick(){const e=Te(si,this.NAME);this._clickAction=this._createAction(n=>{this._clickHandler(n.event)}),ue.off(this.$element(),e),ue.on(this.$element(),e,n=>{this._clickAction({event:n})})},_clickHandler(e){this._saveValueChangeEvent(e),this.option("value",!0)},_optionChanged(e){"value"===e.name?(this._renderCheckedState(e.value),this.callBase(e)):this.callBase(e)}});xt("dxRadioButton",mF);const FJ=mF,Ix="dxListEditDecorator",LJ=Te(mk,Ix),NJ=Te(_k,Ix),HJ=Te(hx,Ix),BJ=Tt.inherit({ctor(e){this._list=e,this._init()},_init:De,_shouldHandleSwipe:!1,_attachSwipeEvent(e){const n={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=Xe(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};ue.on(e.$itemElement,LJ,n,this._itemSwipeStartHandler.bind(this)),ue.on(e.$itemElement,NJ,this._itemSwipeUpdateHandler.bind(this)),ue.on(e.$itemElement,HJ,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler(e){const n=V(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")?e.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(n,e))},_itemSwipeUpdateHandler(e){const n=V(e.currentTarget);this._swipeUpdateHandler(n,e)},_itemSwipeEndHandler(e){const n=V(e.currentTarget);this._swipeEndHandler(n,e),this._clearSwipeCache=!0},beforeBag:De,afterBag:De,_commonOptions(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement(e){this._shouldHandleSwipe&&(this._attachSwipeEvent(e),this._clearSwipeCache=!0)},afterRender:De,handleClick:De,handleKeyboardEvents:De,handleEnterPressing:De,handleContextMenu:De,_swipeStartHandler:De,_swipeUpdateHandler:De,_swipeEndHandler:De,visibilityChange:De,getExcludedSelectors:De,dispose:De}),_F={},vF="dx-list-select-decorator-enabled",yF=Te(si,"dxListEditDecorator");!function VJ(e,n,t){const i=_F,o={};o[e]=i[e]?i[e]:{},o[e][n]=t,pe(i,o)}("selection","default",BJ.inherit({_init(){this.callBase.apply(this,arguments);const e=this._list.option("selectionMode");this._singleStrategy="single"===e,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?FJ:gF,this._list.$element().addClass(vF)},beforeBag(e){const{$itemElement:n}=e,t=e.$container.addClass(this._containerClass),i=V("<div>").addClass(this._controlClass).appendTo(t);new this._controlWidget(i,pe(this._commonOptions(),{value:this._isSelected(n),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(o){o.event&&this._list._saveSelectionChangeEvent(o.event),this._processCheckedState(n,o.value),o.event&&o.event.stopPropagation()}.bind(this)}))},modifyElement(e){this.callBase.apply(this,arguments);const{$itemElement:n}=e,t=this._controlWidget.getInstance(n.find(`.${this._controlClass}`));ue.on(n,"stateChanged",(i,o)=>{t.option("value",o)})},_updateSelectAllState(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents(e,n){const t=!n,i=this._list,o=this._$selectAll,r=i._getLastItemIndex();return!(!o||!(n&&0===e||t&&e===r)||(i.option("focusedElement",o),i.scrollToItem(i.option("focusedElement")),0))},handleEnterPressing(e){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return e.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){this._$selectAll=V("<div>").addClass("dx-list-select-all");const e=this._list._supportedKeys().downArrow.bind(this._list),n=V("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(n,gF,{elementAttr:{"aria-label":de.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",e),V("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()},_attachSelectAllHandler(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),ue.off(this._$selectAll,yF),ue.on(this._$selectAll,yF,this._selectAllClickHandler.bind(this))},_updateSelectAllAriaLabel(){if(!this._$selectAll)return;const{value:e}=this._selectAllCheckBox.option(),t=void 0===e?"half checked":e?"checked":"not checked",i=`${de.format("dxList-selectAll")}, ${t}`;this._$selectAll.attr({"aria-label":i})},_selectAllHandler(e){e.event&&e.event.stopPropagation(),e.event&&this._list._saveSelectionChangeEvent(e.event);const{value:n}=this._selectAllCheckBox.option();n?this._selectAllItems():!1===n&&this._unselectAllItems(),this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:n})},_checkSelectAllCapability(){const e=this._list,n=e._dataController;return!("allPages"===e.option("selectAllMode")&&e.option("grouped")&&!n.group()&&(Jt.log("W1010"),1))},_selectAllItems(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler(e){this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected(e){return this._list.isItemSelected(e)},_processCheckedState(e,n){n?this._list.selectItem(e):this._list.unselectItem(e)},dispose(){this._disposeSelectAll(),this._list.$element().removeClass(vF),this.callBase.apply(this,arguments)},_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));const CF=pe({},UC,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new zu({store:new Vu(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=sn(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=sn(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(e){const n=Ae();return e=this._unwrappedValue(e),Ie(e)?(this._loadSingle(this._valueGetterExpr(),e).done(t=>{this._isValueEquals(this._valueGetter(t),e)?n.resolve(t):n.reject()}).fail(()=>{n.reject()}),this._loadValueDeferred=n,n.promise()):n.reject().promise()},_rejectValueLoading(){var e;null===(e=this._loadValueDeferred)||void 0===e||e.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(e){return(e=e??this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(e=this._getItemKey(e)),Rs.unwrap(e)},_getItemKey(e){const n=this._dataSource.key();if(Array.isArray(n)){const t={};for(let i=0,o=n.length;i<o;i++)t[n[i]]=e[n[i]];return t}return n&&"object"==typeof e&&(e=e[n]),e},_isValueEquals(e,n){const t=this._dataSource&&this._dataSource.key();let i=this._compareValues(e,n);return!i&&t&&Ie(e)&&Ie(n)&&(i=Array.isArray(t)?this._compareByCompositeKey(e,n,t):this._compareByKey(e,n,t)),i},_compareByCompositeKey(e,n,t){const i=dt;if(!i(e)||!i(n))return!1;for(let o=0,r=t.length;o<r;o++)if(e[t[o]]!==n[t[o]])return!1;return!0},_compareByKey(e,n,t){const i=Rs.unwrap,o=mn(i(e[t]),e),r=mn(i(n[t]),n);return this._compareValues(o,r)},_compareValues:(e,n)=>mr(e,!0)===mr(n,!0),_initDynamicTemplates:De,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const e=this.option("valueExpr");return _t(e)&&"this"!==e||Be(e)?e:null},_dataExpressionOptionChanged(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),xF=[],jf=function(e,n,t){xF.push({enabled:e,decoratorType:n,decoratorSubType:t})};jf(function(){return this.option("menuItems").length},()=>"menu",function(){return this.option("menuMode")}),jf(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){const e=this.option("itemDeleteMode");return"toggle"===e||"slideButton"===e||"swipe"===e||"static"===e?"delete":"menu"},function(){let e=this.option("itemDeleteMode");return"slideItem"===e&&(e="slide"),e}),jf(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},()=>"selection",()=>"default"),jf(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},()=>"reorder",()=>"default");const WJ=Tt.inherit({ctor(e){this._list=e,this._fetchRequiredDecorators()},dispose(){this._decorators&&this._decorators.length&&Ee(this._decorators,(e,n)=>{n.dispose()})},_fetchRequiredDecorators(){this._decorators=[],Ee(xF,(e,n)=>{if(n.enabled.call(this._list)){const i=n.decoratorType.call(this._list),o=n.decoratorSubType.call(this._list),r=this._createDecorator(i,o);this._decorators.push(r)}})},_createDecorator(e,n){return new(this._findDecorator(e,n))(this._list)},_findDecorator(e,n){var t;const i=null===(t=_F[e])||void 0===t?void 0:t[n];if(!i)throw Jt.Error("E1012",e,n);return i},modifyItemElement(e){const n=V(e.itemElement),t={$itemElement:n};this._prependBeforeBags(n,t),this._appendAfterBags(n,t),this._applyDecorators("modifyElement",t)},afterItemsRendered(){this._applyDecorators("afterRender")},_prependBeforeBags(e,n){const t=this._collectDecoratorsMarkup("beforeBag",n,"dx-list-item-before-bag");e.prepend(t)},_appendAfterBags(e,n){const t=this._collectDecoratorsMarkup("afterBag",n,"dx-list-item-after-bag");e.append(t)},_collectDecoratorsMarkup(e,n,t){const i=V("<div>");return Ee(this._decorators,function(){const o=V("<div>").addClass(t);this[e](pe({$container:o},n)),o.children().length&&i.append(o)}),i.children()},_applyDecorators(e,n){Ee(this._decorators,function(){this[e](n)})},_handlerExists(e){if(!this._decorators)return!1;const n=this._decorators,{length:t}=n;for(let i=0;i<t;i++)if(n[i][e]!==De)return!0;return!1},_eventHandler(e,n,t){if(!this._decorators)return!1;let i=!1;const o=this._decorators,{length:r}=o;for(let c=0;c<r&&(i=o[c][e](n,t),!i);c++);return i},handleClick(e,n){return this._eventHandler("handleClick",e,n)},handleKeyboardEvents(e,n){return this._eventHandler("handleKeyboardEvents",e,n)},handleEnterPressing(e){return this._eventHandler("handleEnterPressing",e)},contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")},handleContextMenu(e,n){return this._eventHandler("handleContextMenu",e,n)},getExcludedItemSelectors(){const e=[];return this._applyDecorators("getExcludedSelectors",e),e.join(",")}}),OF=function(e){return(e.group<<20)+e.item},ta=function(e){return{group:e>>20,item:1048575&e}},GJ=$C.inherit({_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:e=>e.find(".dx-list-item"),getIndexByItemData(e){const n=this._collectionWidget.option("items");let t=!1;return!!e&&(e.items&&e.items.length&&(e=e.items[0]),Ee(n,(i,o)=>{if(!o.items||(Ee(o.items,(r,c)=>c!==e||(t={group:i,item:r},!1)),t))return!1}),t)},getItemDataByIndex(e){const n=this._collectionWidget.option("items");return rn(e)?this.itemsGetter()[e]:e&&n[e.group]&&n[e.group].items[e.item]||null},itemsGetter(){let e=[];const n=this._collectionWidget.option("items");for(let t=0;t<n.length;t++)n[t]&&n[t].items?e=e.concat(n[t].items):e.push(n[t]);return e},deleteItemAtIndex(e){const n=ta(e);this._collectionWidget.option("items")[n.group].items.splice(n.item,1)},getKeysByItems(e){let t,n=[];for(t=0;t<e.length;t++)e[t]&&e[t].items?n=n.concat(e[t].items):n.push(e[t]);const i=[];for(t=0;t<n.length;t++)i.push(this._collectionWidget.keyOf(n[t]));return i},getIndexByKey(e,n){const t=n||this._collectionWidget.option("items");let i=-1;const o=this;return Ee(t,(r,c)=>{if(c.items&&(Ee(c.items,(v,S)=>{const T=o._collectionWidget.keyOf(S);if(o._equalKeys(T,e))return i={group:r,item:v},!1}),-1!==i))return!1}),i},_getGroups(e){const t=this._collectionWidget._dataController.group();return t?Lu_queryByOptions(Ko(e),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys(e,n){const t=[],i=this._getGroups(n),o={},r=c=>{const v=this.getIndexByKey(c,i),S=v&&i[v.group];if(S)return{groupKey:S.key,item:S.items[v.item]}};return Ee(e,(c,v)=>{const S=r(v);if(!S)return;const{groupKey:T}=S,{item:F}=S;let N=o[T];N||(N={key:T,items:[]},o[T]=N,t.push(N)),N.items.push(F)}),t},moveItemAtIndexToIndex(e,n){const t=this._collectionWidget.option("items"),i=ta(e),o=ta(n),r=t[i.group].items,c=t[o.group].items,v=r[i.item];r.splice(i.item,1),c.splice(o.item,0,v)},_isItemIndex:e=>e&&rn(e.group)&&rn(e.item),_getNormalizedItemIndex(e){const n=V(e),t=n.closest(".dx-list-group");return t.length?OF({group:this._groupElements().index(t),item:this._groupItemElements(t).index(n)}):-1},_normalizeItemIndex:e=>OF(e),_denormalizeItemIndex:e=>ta(e),_getItemByNormalizedIndex(e){const n=ta(e),t=this._groupElements().eq(n.group);return this._groupItemElements(t).eq(n.item)},_itemsFromSameParent:(e,n)=>ta(e).group===ta(n).group}),bF=vx.inherit({_supportedKeys(){const e=this,n=this.callBase(),t=(i,o)=>{const r=this._editStrategy,c=this.option("focusedElement"),v=r.getNormalizedIndex(c);if(v!==this._getLastItemIndex()||!this._dataController.isLoading())if(i.shiftKey&&e.option("itemDragging.allowReordering")){const F=r.getItemElement(v+(o?-1:1));this.reorderItem(c,F),this.scrollToItem(c),i.preventDefault()}else this._editProvider.handleKeyboardEvents(v,o)||(o?n.upArrow(i):n.downArrow(i))};return pe({},n,{del:i=>{e.option("allowItemDeleting")&&(i.preventDefault(),e.deleteItem(e.option("focusedElement")))},upArrow:i=>t(i,!0),downArrow:i=>t(i),enter:function(i){this._editProvider.handleEnterPressing(i)||n.enter.apply(this,arguments)},space:function(i){this._editProvider.handleEnterPressing(i)||n.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();const e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))},_isItemStrictEquals(e,n){const t=e&&e.__dx_key__;return!(t&&!this.key()&&this._selection.isItemSelected(t))&&this.callBase(e,n)},_getDefaultOptions(){return pe(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:de.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"ios"===e.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new WJ(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new GJ(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(e){const n=V(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(n,e)||(this._saveSelectionChangeEvent(e),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(e){const n=V(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")||(Ol(e)&&this._editProvider.handleContextMenu(n,e)?e.handledByEditProvider=!0:this.callBase(...arguments))},_getItemContainer(e){if(this.option("grouped")){var n;const t=null===(n=this._editStrategy.getIndexByItemData(e))||void 0===n?void 0:n.group;return this._getGroupContainerByIndex(t)}return this.callBase(e)},_itemContextMenuHandler(e){const n=V(e.currentTarget);n.is(".dx-state-disabled, .dx-state-disabled *")||(e.handledByEditProvider||!this._editProvider.handleContextMenu(n,e)?this.callBase(...arguments):e.preventDefault())},_postprocessRenderItem(e){this.callBase(...arguments),this._editProvider.modifyItemElement(e)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(e){const n=this._editStrategy.getItemElement(e);this.option("focusedElement",n),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(e){switch(e.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(e)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(e){return this._itemElements().index(e)},getItemElementByFlatIndex(e){const n=this._itemElements();return e<0||e>=n.length?V():n.eq(e)},getItemByIndex(e){return this._editStrategy.getItemDataByIndex(e)},deleteItem(e){const n=this._editStrategy,t=n.getNormalizedIndex(e),i=this.option("focusedElement"),o=this.option("focusStateEnabled"),r=i?n.getNormalizedIndex(i):t,v=r===this._getLastItemIndex()||t<r?r-1:r;return this.callBase(e).done(function(){o&&this.focusListItem(v)})}}).inherit(Bf).inherit({_addWidgetPrefix:e=>`dx-list-${e}`,_getCombinedFilter(){const e=this._dataController,n={filter:e.filter()};e.addSearchFilter(n);const{filter:t}=n;return t},_initDataSource(){const e=this.option("searchValue"),n=this.option("searchExpr"),t=this.option("searchMode");this.callBase();const i=this._dataController;e&&e.length&&i.searchValue(e),t.length&&i.searchOperation(Bf.getOperationBySearchMode(t)),n&&i.searchExpr(n)}});xt("dxList",bF);const KJ=bF;class XJ extends Lf{constructor(n,t,i){super(n,t,i),this.currentTemplate=null}_attachEvents(n){const{editor:t}=this;n.option("onClick",i=>{var o;(null!==(o=t._shouldCallOpenHandler)&&void 0!==o&&o.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(i)}),ue.on(n.$element(),"mousedown",i=>{t.$element().is(".dx-state-focused")&&i.preventDefault()})}_create(){const{editor:n}=this,t=V("<div>"),i=this._getOptions();this._addToContainer(t);const o=n._createComponent(t,bo,pe({},i,{elementAttr:{"aria-label":de.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(n.$element(),t,i.visible),{$element:t,instance:o}}_getOptions(){const{editor:n}=this,t=this._isVisible(),o={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:n.option("readOnly"),visible:t};return this._addTemplate(o),o}_isVisible(){const{editor:n}=this;return super._isVisible()&&n.option("showDropDownButton")}_legacyRender(n,t,i){n.toggleClass("dx-dropdowneditor-button-visible",i),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(n){this._isSameTemplate()||(n.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:t,instance:i}=this,o=t.$element(),r=this._getOptions();i?.option(r),this._legacyRender(o,i?.$element(),r.visible)}}}const SF=function(e){if(Ke())return qt(e)},DF="dx-dropdowneditor-input-wrapper",Uf="dx-dropdowneditor-overlay",IF="ios"===je.current().platform,EF=ld.inherit({_supportedKeys(){return pe({},this.callBase(),{tab(e){if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length)return void this.close();const n=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();n&&(ue.trigger(n,"focus"),n.select()),e.preventDefault()},escape(e){return this.option("opened")&&e.preventDefault(),this.close(),!0},upArrow(e){return!(!ri(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)&&(this.close(),1))},downArrow(e){return!(!ri(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)&&(this._validatedOpening(),1))},enter(e){return this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0}})},_getDefaultButtons(){return this.callBase().concat([{name:"dropDown",Ctor:XJ}])},_getDefaultOptions(){return pe(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:de.format("OK"),cancelButtonText:de.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:()=>!0,_getDefaultPopupPosition(e){const n=TM(e);return{offset:{h:0,v:-1},my:`${n} top`,at:`${n} bottom`,collision:"flip flip"}},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"generic"===e.platform,options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper(){return this.$element().find(`.${DF}`).first()},_init(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition(e){const{my:n,at:t}=this._getDefaultPopupPosition(e),i=this.option("popupPosition");this.option("popupPosition",pe({},i,{my:n,at:t}))},_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl(){this.option("deferRendering")||this._createPopup()},_renderInput(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput(){this._$container=this.$element().wrapInner(V("<div>").addClass(DF)).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"none",_getAriaRole:()=>"combobox",_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue(){return!this._isEditable()||this.callBase()},_cleanFocusState(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask(){this.option("fieldTemplate")||this.callBase()},_renderField(){const e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())},_renderPlaceholder(){this._getFieldTemplate()||this.callBase()},_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=V("<div>").addClass("dx-dropdowneditor-field-template-wrapper").prependTo(this.$element())))},_renderTemplatedField(e,n){const t=Cl(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();const i=this._$templateWrapper;e.render({model:n,container:st(i),onRendered:()=>{if(!this.$element().find(i).length)return;const r=this._input();if(!r.length)throw Jt.Error("E1010");this._integrateInput(),t&&ue.trigger(r,"focus")}})},_integrateInput(){var e;const{isValid:n}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!n),null===(e=this.option("_onMarkupRendered"))||void 0===e||e()},_refreshEmptinessEvent(){ue.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData(){return this.option("value")},_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new wp(e=>{const n=V("<div>").addClass("dx-dropdowneditor-icon");V(e.container).append(n)})}),this.callBase()},_renderOpenHandler(){const e=this._inputWrapper(),n=Te(si,this.NAME),t=this.option("openOnFieldClick");ue.off(e,n),ue.on(e,n,this._getInputClickHandler(t)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",t),t&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler(){IF&&(this._detachFocusOutEvents(),ue.on(this._inputWrapper(),Te("focusout",this.NAME),e=>{const n=e.relatedTarget;n&&this.option("opened")&&this._isTargetOutOfComponent(n)&&this.close()}))},_isTargetOutOfComponent(e){const n=this.content?V(this.content()).closest(`.${Uf}`):this._$popup;return 0===V(e).closest(`.${Uf}`,n).length},_detachFocusOutEvents(){IF&&ue.off(this._inputWrapper(),Te("focusout",this.NAME))},_getInputClickHandler(e){return e?n=>{this._executeOpenAction(n)}:()=>{this._focusInput()}},_openHandler(){this._toggleOpenState()},_executeOpenAction(e){this._openOnFieldClickAction({event:e})},_keyboardEventBindingTarget(){return this._input()},_focusInput(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!Cl(this._input())&&(this._resetCaretPosition(),ue.trigger(this._input(),"focus")),!0)},_resetCaretPosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this._input().get(0);if(n){const{value:t}=n,i=Ie(t)&&(e||this._isEditable())?t.length:0;this._caret({start:i,end:i},!0)}},_isEditable(){return this.option("acceptCustomValue")},_toggleOpenState(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState(){const e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",e),this._setPopupOption("visible",e);const n={expanded:e,controls:this._getControlsAria()};this.setAria(n),this.setAria("owns",e?this._popupContentId:void 0,this.$element())},_createPopup(){this._$popup||(this._$popup=V("<div>").addClass(Uf).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())},_setPopupAriaLabel(){const e=this._popup.$overlayContent();this.setAria("label","Dropdown",e)},_renderPopupContent:De,_renderPopup(){const e=pe(this._popupConfig(),this._options.cache("dropDownOptions"));delete e.closeOnOutsideClick,this._popup=this._createComponent(this._$popup,Tf,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){ue.on(this._popup.$overlayContent(),Te("keydown",this.NAME),e=>this._popupKeyHandler(e))},_popupKeyHandler(e){switch($n(e)){case"tab":this._popupTabHandler(e);break;case"escape":this._popupEscHandler(e)}},_popupTabHandler(e){const n=V(e.target),t=e.shiftKey&&n.is(this._getFirstPopupElement());(!e.shiftKey&&n.is(this._getLastPopupElement())||t)&&(ue.trigger(this.field(),"focus"),e.preventDefault())},_popupEscHandler(){ue.trigger(this._input(),"focus"),this.close()},_setPopupContentId(e){this._popupContentId=`dx-${new Pn}`,this.setAria("id",this._popupContentId,e)},_contentReadyHandler:De,_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:pe(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>SF(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Uf,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:De,_getPopupInitializedHandler(){const e=this.option("onPopupInitialized");return n=>{this._popupInitializedHandler(n),e&&this._popupInitializedAction({popup:n.component})}},_dimensionChanged(){!Ke()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth(){void 0===function(e){return null===e&&(e=void 0),"function"==typeof e&&(e=e()),e}(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>SF(this.$element()))},_popupPositionedHandler(e){var n;const{labelMode:t,stylingMode:i}=this.option();if(!this._popup)return;const o=this._popup.$overlayContent(),r=null===(n=e.position)||void 0===n||null===(n=n.v)||void 0===n?void 0:n.flip,c="hidden"!==t&&"outside"!==t&&"outlined"===i;if(e.position&&o.toggleClass("dx-dropdowneditor-overlay-flipped",r),r&&c&&this._label.isVisible()){const v=this._label.$element();Tn(o,{top:Nn(o).top-parseInt(v.css("fontSize"))})}},_popupShowingHandler:De,_popupHidingHandler(){this.option("opened",!1)},_popupShownHandler(){var e;this._openAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler(){var e;this._closeAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide(){const e=this.option("validationMessagePosition");if("auto"!==e)return e;let n="bottom";if(this._popup&&this._popup.option("visible")){const{top:t}=Dn.setup(this.$element()),{top:i}=Dn.setup(this._popup.$content());n=t+this.option("popupPosition").offset.v>i?"bottom":"top"}return n},_closeOutsideDropDownHandler(e){let{target:n}=e;const t=V(n),i=this.getButton("dropDown"),o=i&&i.$element(),r=!!t.closest(this.$element()).length,c=!!t.closest(o).length;return!r&&!c},_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption(e,n){this._setWidgetOption("_popup",arguments)},_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement(){return V(this._popup.getFocusableElements()).first()},_getLastPopupElement(){return V(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig(){const e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(e)},_applyButtonsLocation(e){const n=this.option("buttonsLocation"),t=e;if("default"!==n){const i=ru(n);Ee(t,(o,r)=>{pe(r,{toolbar:i[0],location:i[1]})})}return t},_applyButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged(e){const n=vi.getOptionsFromContainer(e);this._setPopupOption(n);const t=Object.keys(n);(t.includes("width")||t.includes("height"))&&this._dimensionChanged()},_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=V("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose(){this._detachFocusOutEvents(),this.callBase()},_optionChanged(e){var n;switch(e.name){case"width":case"height":this.callBase(e),null===(n=this._popup)||void 0===n||n.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":Ke()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(e.value),this.callBase(e);break;default:this.callBase(e)}},open(){this.option("opened",!0)},close(){this.option("opened",!1)},field(){return st(this._input())},content(){return this._popup?this._popup.content():null}});xt("dxDropDownEditor",EF);const wF=EF,PF=ot(),nee=["startswith","contains","endwith","notcontains"],TF="android"!==je.real().platform,MF=wF.inherit({_supportedKeys(){const e=this.callBase();return pe({},e,{tab(n){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(n);const t=V(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}e.tab.apply(this,arguments)},space:De,home:De,end:De})},_allowSelectItemByTab(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement(e){const n=this._valueGetter(this._list._getItemData(e));this._setValue(n)},_setValue(e){this.option("value",e)},_getDefaultOptions(){return pe(this.callBase(),pe(CF._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:de.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:De,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference(){this.callBase(),pe(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems(){const{items:e}=this.option();e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Dy("item")})},_isEditable(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget(){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:(e,n,t)=>e>t?n:e<n?t:e,_items(){const e=this._getPlainItems(!this._list&&this._dataSource.items());return new Ko(e).filter("disabled","<>",!0).toArray()},_calcNextItem(e){const n=this._items();return n[this._fitIntoRange(this._getSelectedIndex()+e,0,n.length-1)]},_getSelectedIndex(){const e=this._items(),n=this.option("selectedItem");let t=-1;return Ee(e,(i,o)=>{if(this._isValueEquals(o,n))return t=i,!1}),t},_createPopup(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const e=this._popup.$content();ue.off(e,"mouseup"),ue.on(e,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer(){const e=this.option("dropDownOptions.container"),n=e&&V(e);if(n&&n.length&&!$t(n.get(0))){const t=[].slice.call(n.parents());t.unshift(n.get(0)),Ee(t,(i,o)=>o!==V("body").get(0)&&("hidden"===PF.getComputedStyle(o).overflowY?(this._$customBoundaryContainer=V(o),!1):void 0))}},_popupWrapperClass:()=>"dx-dropdownlist-popup-wrapper",_renderInputValue(){const e=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(e,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,e))},_loadInputValue(e,n){return this._loadItem(e).always(n)},_getItemFromPlain(e,n){let t,i;return n&&"object"!=typeof e&&(n.itemByValue||(n.itemByValue={},t=this._getPlainItems(),t.forEach(function(o){n.itemByValue[this._valueGetter(o)]=o},this)),i=n.itemByValue[e]),i||(t=this._getPlainItems(),i=vr(t,o=>this._isValueEquals(this._valueGetter(o),e))[0]),i},_loadItem(e,n){const t=this._getItemFromPlain(e,n);return void 0!==t?Ae().resolve(t).promise():this._loadValue(e)},_getPlainItems(e){let n=[];e=e||this.option("items")||this._dataSource.items()||[];for(let t=0;t<e.length;t++)e[t]&&e[t].items?n=n.concat(e[t].items):n.push(e[t]);return n},_updateActiveDescendant(e){var n;const t=this.option("opened"),i=null===(n=this._list)||void 0===n?void 0:n.getFocusedItemId(),o=V(`#${i}`).length>0;this.setAria({activedescendant:t&&o&&i||null},e)},_setSelectedItem(e){const n=this._displayValue(e);this.option("selectedItem",mn(e,null)),this.option("displayValue",n)},_displayValue(e){return this._displayGetter(e)},_refreshSelected(){const e={};this._listItemElements().each((n,t)=>{const i=V(t),o=this._valueGetter(i.data("dxListItemData"));this._isSelectedValue(o,e)?this._list.selectItem(i):this._list.unselectItem(i)})},_popupShownHandler(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue(e){return this._isValueEquals(e,this.option("value"))},_validateSearchMode(){const e=this.option("searchMode"),n=e.toLowerCase();if(!nee.includes(n))throw Jt.Error("E1019",e)},_clearSelectedItem(){this.option("selectedItem",null)},_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(()=>{this._isCustomValueAllowed()||this._clearSelectedItem()})},_isCustomValueAllowed(){return this.option("displayCustomValue")},clear(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):V()},_popupConfig(){return pe(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent(){this.callBase(),this._renderList()},_getKeyboardListeners(){const e=this._canListHaveFocus();return this.callBase().concat([!e&&this._list])},_renderList(){this._listId=`dx-${(new Pn)._value}`;const e=V("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,KJ,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick(){const e=Te("mousedown","dxDropDownList");ue.off(this._$list,e),ue.on(this._$list,e,n=>n.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:()=>"desktop"===je.real().deviceType,_listConfig(){const e={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(e.tabIndex=null),e},_canListHaveFocus:()=>!1,_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:()=>({paginate:!1}),_getGroupedOption(){return this.option("grouped")},_dataSourceFromUrlLoadMode:()=>"raw",_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption(e,n){this._setWidgetOption("_list",arguments)},_listItemClickAction(e){this._listItemClickHandler(e),this._itemClickAction(e)},_listItemClickHandler:De,_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource(){const e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded},_searchValue(){return this._input().val()||""},_getSearchEvent(){return Te("input",`${this.NAME}Search`)},_getCompositionStartEvent(){return Te("compositionstart",`${this.NAME}CompositionStart`)},_getCompositionEndEvent(){return Te("compositionend",`${this.NAME}CompositionEnd`)},_getSetFocusPolicyEvent(){return Te("input",`${this.NAME}FocusPolicy`)},_renderEvents(){this.callBase(),ue.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(ue.on(this._input(),this._getSearchEvent(),e=>{this._searchHandler(e)}),TF&&(ue.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),ue.on(this._input(),this._getCompositionEndEvent(),e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())})))},_shouldRenderSearchEvent(){return this.option("searchEnabled")},_refreshEvents(){ue.off(this._input(),this._getSearchEvent()),ue.off(this._input(),this._getSetFocusPolicyEvent()),TF&&(ue.off(this._input(),this._getCompositionStartEvent()),ue.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress(e){if(!arguments.length)return this._isTextComposition;this._isTextComposition=e},_searchHandler(e,n){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();const t=this.option("searchTimeout");t?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(n)},t)):this._searchDataSource(n)},_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(e)},_filterDataSource(e){this._clearSearchTimer();const n=this._dataController;n.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),n.searchOperation(this.option("searchMode")),n.searchValue(e),n.load().done(this._dataSourceFiltered.bind(this,e))},_clearFilter(){const e=this._dataController;e.searchValue()&&e.searchValue(null)},_dataSourceFiltered(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup(){return this._hasItemsToShow()},_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))},_dataSourceChangedHandler(e){0===this._dataController.pageIndex()?this.option().items=e:this.option().items=this.option().items.concat(e)},_hasItemsToShow(){const t=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!t)},_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged(){this.callBase(),this._updateListDimensions()},_needPopupRepaint(){const e=this._dataController,n=e.pageIndex(),t=Ie(this._pageIndex)&&n<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=n,t},_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight(){const e=this.$element(),n=this._$customBoundaryContainer,t=e.offset().top-(n?n.offset().top:0),i=et(PF),o=n?Math.min(et(n),i):i,r=Math.max(t,o-t-et(e));return Math.min(.5*o,r)},_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)},_setSubmitValue(){const e=this.option("value"),n=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(n)},_shouldUseDisplayValue(e){return"this"===this.option("valueExpr")&&dt(e)},_optionChanged(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),this.callBase(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:this.callBase(e)}}}).include(CF,Tk);xt("dxDropDownList",MF);const oee=MF.inherit({_supportedKeys(){const e=this,n=this.callBase(),t=function(o){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(o.preventDefault(),this.clear()),this._savedTextRemoveEvent=o,this._preventSubstitution=!0},i=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return pe({},n,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),n.tab&&n.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(o){if(n.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},downArrow(o){if(n.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(o),!0},leftArrow(){var o;i(),null===(o=n.leftArrow)||void 0===o||o.apply(this,arguments)},rightArrow(){i(),n.rightArrow&&n.rightArrow.apply(this,arguments)},home(){i(),n.home&&n.home.apply(this,arguments)},end(){i(),n.end&&n.end.apply(this,arguments)},escape(){const o=n.escape&&n.escape.apply(this,arguments);return this._cancelEditing(),o??!0},enter(o){const r=this.option("opened"),c=this._input().val().trim(),v=c&&this._list&&!this._list.option("focusedElement");if(!c&&Ie(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(o),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return o.preventDefault(),v&&(r&&this._toggleOpenState(),this._valueChangeEventHandler(o)),r;if(n.enter&&n.enter.apply(this,arguments))return r}},space(o){const r=this.option("opened"),c=this.option("searchEnabled"),v=this.option("acceptCustomValue");if(r&&!c&&!v)return o.preventDefault(),this._valueChangeEventHandler(o),!0},backspace:t,del:t})},_getDefaultOptions(){return pe(this.callBase(),{placeholder:de.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(e){Ie(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return`${this.callBase()} dx-selectbox-popup-wrapper`},_setDeprecatedOptions(){this.callBase(),pe(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){if(!this._searchValue())return void this._focusListElement(null);const{items:n,selectedItem:t}=this.option(),i=this._list._itemElements(),o=n?.indexOf(t)??-1,r=-1===o||this._isCustomItemSelected()?null:i.eq(o);this._focusListElement(r)},_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);const t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)},_focusListElement(e){this._preventInputValueRender=!0,this._list.option("focusedElement",st(e)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),(!this._dataController.paginate()||!this._needPopupRepaint())&&this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),Ae().resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),Ae().resolve()},_setNextItem(e){const n=this._calcNextItem(e),t=this._valueGetter(n);this._setValue(t)},_setNextValue(e){(this._dataController.isLoaded()?Ae().resolve():this._dataController.load()).done(()=>{const t=this._getSelectedIndex(),i=this._dataController.pageSize(),o=this._dataController.isLastPage(),r=t===this._items().length-1;this._saveValueChangeEvent(e);const c="downArrow"===$n(e)?1:-1;i&&!o&&r&&c>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,c))):this._setNextItem(c)})},_setSelectedItem(e){const n=!this._isCustomValueAllowed()&&void 0===e;this.callBase(n?null:e),!n&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(e){return e=!Ie(e)&&this._isCustomValueAllowed()?this.option("value"):e,this.callBase(e)},_listConfig(){const e=pe(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&pe(e,{showSelectionControls:!0,selectByClick:!0}),e},_listFocusedItemChangeHandler(e){if(this._preventInputValueRender)return;const n=e.component,t=V(n.option("focusedElement")),i=n._getItemData(t);this._updateField(i)},_updateField(e){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){const t=this._displayGetter(e);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):De},_selectionChangeHandler(e){Ee(e.addedItems||[],(n,t)=>{this._setValue(this._valueGetter(t))})},_getActualSearchValue(){return this._dataController.searchValue()},_isInlineAutocompleteEnabled(){return this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_getAriaAutocomplete(){const{disabled:e,readOnly:n,searchEnabled:t}=this.option();return!t||n||e?"none":this._isInlineAutocompleteEnabled()?"both":"list"},_toggleOpenState(e){if(!this.option("disabled")){if(!(e=arguments.length?e:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&e)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);e&&this._scrollToSelectedItem(),this.callBase(e)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){const e=this.option("selectedItem");if(null===e)return!1;const n=this._displayGetter(e);return(n?String(n):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(e){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{const{acceptCustomValue:n,text:t,selectedItem:i}=this.option();n?!e&&!this._isValueChanging&&(this._updateField(i??this._createCustomItem(t)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(o=>{const r=mn(o,i);this._setSelectedItem(r),this._updateField(r),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()},_focusOutHandler(e){this._isPreventedFocusOutEvent(e)||(this._isOverlayNestedTarget(e.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)),e.target=this._input().get(0),this.callBase(e)},_cancelSearchIfNeed(e){const{searchEnabled:n}=this.option(),t=this._isOverlayNestedTarget(e?.relatedTarget);if(this._wasSearch()&&n&&!t){var o;const r=null===(o=this._popup)||void 0===o?void 0:o._hideAnimationProcessing;this._clearSearchTimer(),r?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e},_isOverlayNestedTarget:e=>!!V(e).closest(".dx-selectbox-popup-wrapper").length,_clearTextValue(){const e=this.option("selectedItem"),n=this._displayGetter(e);e&&""!==n&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){const e=Pe.getActiveElement(this.element());return this.callBase()&&V(e).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){const e=this._list&&this.option("opened")&&V(this._list.option("focusedElement"));return e&&e.length?this._list._getItemData(e):this.option("selectedItem")},_isSelectedValue(e){return this._isValueEquals(e,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(e){const n=this._getCurrentValue();this._focusListElement(V(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&n===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(e){this._setValue(e)},_loadItem(e,n){const t=this,i=Ae();return this.callBase(e,n).done(o=>{i.resolve(o)}).fail(o=>{if(null!=o&&o.shouldSkipCallback)return;const r=t.option("selectedItem");t.option("acceptCustomValue")&&e===t._valueGetter(r)?i.resolve(r):i.reject()}),i.promise()},_loadInputValue(e,n){return this._loadItemDeferred=this._loadItem(e).always(n),this._loadItemDeferred},_isCustomItemSelected(){const e=this.option("selectedItem"),n=this._searchValue(),t=this._displayGetter(e);return!t||n!==t.toString()},_valueChangeEventHandler(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(e){const n={text:e},t=this._customItemCreatingAction(n),i=mn(t,n.customItem);return Ie(t)&&vt.log("W0015","onCustomItemCreating","customItem"),i},_customItemAddedHandler(e){const n=this._searchValue(),t=this._createCustomItem(n);if(this._saveValueChangeEvent(e),void 0===t)throw this._renderValue(),vt.Error("E0121");ll(t)?ii(t).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(t)},_setCustomItem(e){this._disposed||(this.option("selectedItem",e=e||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)},_clearValueHandler(e){return this._preventFiltering=!0,this.callBase(e),this._searchCanceled(),!1},_wasSearch(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(e){this.callBase(),null!==e&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){const e=this._input().get(0),n=this._searchValue().length,t=0===e.selectionStart&&e.selectionEnd===n,i=e.selectionStart!==e.selectionEnd,o=n===e.selectionEnd;return this._wasSearch()&&i&&!t&&o&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()},_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered())return void delete this._preventSubstitution;const e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!e)return;const n=this._input(),t=n.val().length;if(0===t)return;const i=n.get(0),o=this._displayGetter(e).toString();i.value=o,this._caret({start:t,end:o.length})},_dispose(){this._renderInputValueAsync=De,delete this._loadItemDeferred,this.callBase()},_optionChanged(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":this.callBase(e),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(e)}}});xt("dxSelectBox",oee);const AF={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},Ex=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10)]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*\.*\d+)\)$/,process:function(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4])]}},{re:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/,process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),Number((parseInt(e[4],16)/255).toFixed(2))]}},{re:/^#([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Number((parseInt(e[4]+e[4],16)/255).toFixed(2))]}},{re:/^#([a-f0-9]{1})([a-f0-9]{1})([a-f0-9]{1})$/,process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/^hsv\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){const n=parseInt(e[1],10),t=parseInt(e[2],10),i=parseInt(e[3],10),o=RF(n,t,i);return[o[0],o[1],o[2],1,[n,t,i]]}},{re:/^hsl\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(e){const n=parseInt(e[1],10),t=parseInt(e[2],10),i=parseInt(e[3],10),o=kF(n,t,i);return[o[0],o[1],o[2],1,null,[n,t,i]]}}],Rr=Math.round;function kr(e){let n;this.baseColor=e,e&&(n=String(e).toLowerCase().replace(/ /g,""),n=AF[n]?"#"+AF[n]:n,n=function ree(e){if("transparent"===e)return[0,0,0,0];let n=0;const t=Ex.length;let i;for(;n<t;++n)if(i=Ex[n].re.exec(e),i)return Ex[n].process(i);return null}(n)),n||(this.colorIsInvalid=!0),n=n||{},this.r=Yo(n[0]),this.g=Yo(n[1]),this.b=Yo(n[2]),this.a=Yo(n[3],1,1),this.hsv=n[4]?{h:n[4][0],s:n[4][1],v:n[4][2]}:function aee(e,n,t){const i=Math.max(e,n,t),o=Math.min(e,n,t),r=i-o;let c,v,S=i;if(v=0===i?0:1-o/i,i===o)c=0;else switch(i){case e:c=(n-t)/r*60,n<t&&(c+=360);break;case n:c=(t-e)/r*60+120;break;case t:c=(e-n)/r*60+240}return v*=100,S*=100/255,{h:Math.round(c),s:Math.round(v),v:Math.round(S)}}(this.r,this.g,this.b),this.hsl=n[5]?{h:n[5][0],s:n[5][1],l:n[5][2]}:function cee(e,n,t){e=jl(e,255),n=jl(n,255),t=jl(t,255);const i=Math.max(e,n,t),o=Math.min(e,n,t),r=i+o;let c,v;const S=r/2;if(i===o)c=v=0;else{const T=i-o;v=S>.5?T/(2-r):T/r,c=function lee(e,n,t,i){switch(Math.max(e,n,t)){case e:return(n-t)/i+(n<t?6:0);case n:return(t-e)/i+2;case t:return(e-n)/i+4}}(e,n,t,T),c/=6}return{h:Rr(360*c),s:Rr(100*v),l:Rr(100*S)}}(this.r,this.g,this.b)}function Yo(e,n,t){return n=n||0,t=t||255,e<0||isNaN(e)?n:e>t?t:e}function RF(e,n,t){const o=(100-n)*t/100,r=e%60/60*(t-o),c=o+r,v=t-r;let S,T,F;switch(Math.floor(e%360/60)){case 0:S=t,T=c,F=o;break;case 1:S=v,T=t,F=o;break;case 2:S=o,T=t,F=c;break;case 3:S=o,T=v,F=t;break;case 4:S=c,T=o,F=t;break;case 5:S=t,T=o,F=v}return[Math.round(2.55*S),Math.round(2.55*T),Math.round(2.55*F)]}function wx(e,n){let t=n;return"r"===e&&(t=n+1/3),"b"===e&&(t=n-1/3),t}function Px(e,n,t){return t=function uee(e){return e<0&&(e+=1),e>1&&(e-=1),e}(t),t<1/6?e+6*(n-e)*t:t<.5?n:t<2/3?e+(n-e)*(2/3-t)*6:e}function kF(e,n,t){let i,o,r;if(e=jl(e,360),n=jl(n,100),t=jl(t,100),0===n)i=o=r=t;else{const c=t<.5?t*(1+n):t+n-t*n,v=2*t-c;i=Px(v,c,wx("r",e)),o=Px(v,c,wx("g",e)),r=Px(v,c,wx("b",e))}return[Rr(255*i),Rr(255*o),Rr(255*r)]}function jl(e,n){return e=Math.min(n,Math.max(0,parseFloat(e))),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Tx(e,n,t){return n=n||0,t=t||255,!(e%1!=0||e<n||e>t||"number"!=typeof e||isNaN(e))}kr.prototype={constructor:kr,highlight:function(e){return this.alter(e=e||10).toHex()},darken:function(e){return this.alter(-(e=e||10)).toHex()},alter:function(e){const n=new kr;return n.r=Yo(this.r+e),n.g=Yo(this.g+e),n.b=Yo(this.b+e),n},blend:function(e,n){const t=e instanceof kr?e:new kr(e),i=new kr;return i.r=Yo(Rr(this.r*(1-n)+t.r*n)),i.g=Yo(Rr(this.g*(1-n)+t.g*n)),i.b=Yo(Rr(this.b*(1-n)+t.b*n)),i},toHex:function(){return function see(e,n,t){return"#"+(16777216|e<<16|n<<8|t).toString(16).slice(1)}(this.r,this.g,this.b)},getPureColor:function(){return new kr("rgb("+RF(this.hsv.h,100,100).join(",")+")")},isValidHex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},isValidRGB:function(e,n,t){return!(!Tx(e)||!Tx(n)||!Tx(t))},isValidAlpha:function(e){return!(isNaN(e)||e<0||e>1||"number"!=typeof e)},colorIsInvalid:!1,fromHSL:function(e){const n=new kr,t=kF(e.h,e.s,e.l);return n.r=t[0],n.g=t[1],n.b=t[2],n}};const Do=kr,FF=ot(),Qo="dxDraggable",dee=Te(OC,Qo),hee=Te(Xp,Qo),pee=Te(bC,Qo),fee=Te(Yp,Qo),gee=Te(Qp,Qo),mee=Te(Wt.down,Qo),_ee=Te("keydown",Qo);let Mx,$f;const Ax=e=>({x:e.pageX-V(FF).scrollLeft(),y:e.pageY-V(FF).scrollTop()});class LF{constructor(n,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,"vertical"===n?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(n,t){let i=!1;n.some(o=>{const r=V(o),c=r.hasClass("dx-overlay-wrapper"),v=r.hasClass("dx-overlay-content");return!(!c&&!v)||(i=this._trySetScrollable(o,t),i)}),i||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(n){return("auto"===n.css(this._overFlowAttr)||n.hasClass("dx-scrollable-container"))&&n.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?Xe(n):ut(n))}_trySetScrollable(n,t){const i=this,o=V(n);let r;const c=i._component.option("scrollSensitivity");let v=i.isScrollable(o);return v&&(r=i._calculateDistanceToBorders(o,t),c>r[i._limitProps.start]?i._preventScroll||(i._scrollSpeed=-i._calculateScrollSpeed(r[i._limitProps.start]),i._$scrollableAtPointer=o):c>r[i._limitProps.end]?i._preventScroll||(i._scrollSpeed=i._calculateScrollSpeed(r[i._limitProps.end]),i._$scrollableAtPointer=o):(v=!1,i._preventScroll=!1)),v}_calculateDistanceToBorders(n,t){const i=n.get(0);let o;return i?(o=Li(i),{left:t.x-o.left,top:t.y-o.top,right:o.right-t.x,bottom:o.bottom-t.y}):{}}_calculateScrollSpeed(n){const t=this._component,i=t.option("scrollSensitivity"),o=t.option("scrollSpeed");return Math.ceil(((i-n)/i)**2*o)}scrollByStep(){const n=this;if(n._$scrollableAtPointer&&n._scrollSpeed){if(n._$scrollableAtPointer.hasClass("dx-scrollable-container")){const i=n._$scrollableAtPointer.closest(".dx-scrollable"),o=i.data("dxScrollable")||i.data("dxScrollView");if(o){const r=o.scrollOffset()[n._limitProps.start]+n._scrollSpeed;o.scrollTo({[n._limitProps.start]:r})}}else{const i=n._$scrollableAtPointer[n._scrollValue]()+n._scrollSpeed;n._$scrollableAtPointer[n._scrollValue](i)}const t=n._component._dragMoveArgs;t&&n._component._dragMoveHandler(t)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(n,t){if(!n)return!1;const i=Li(n.get(0)),o=i[this._limitProps.start],r=i[this._sizeAttr],c=Ax(t),v="width"===this._sizeAttr?c.x:c.y;return v<o||v>o+r}}const vee=Ok.inherit({ctor(e){this.callBase(),this._strategy=e},_step(){const e=this._strategy._horizontalScrollHelper,n=this._strategy._verticalScrollHelper;e&&e.scrollByStep(),n&&n.scrollByStep()}}),NF=bl.inherit({reset:De,dragMove:De,dragEnter:De,dragLeave:De,dragEnd(e){return this._getSourceDraggable()._fireRemoveEvent(e),Ae().resolve()},_fireRemoveEvent:De,_getDefaultOptions(){return pe(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),pe(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new vee(this),this._horizontalScrollHelper=new LF("horizontal",this),this._verticalScrollHelper=new LF("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:e=>(dt(e)&&(e={h:e.x,v:e.y}),e=ru(e).map(n=>parseFloat(n)),{left:e[0],top:1===e.length?e[0]:e[1]}),_getNormalizedCursorOffset(e,n){return Be(e)&&(e=e.call(this,n)),this._normalizeCursorOffset(e)},_calculateElementOffset(e){let n,t;const{event:i}=e,o=V(e.itemElement),r=V(e.dragElement),c=this._dragElementIsCloned(),v=this.option("cursorOffset");let S={left:0,top:0};const T=this._initialLocate=Nn(r);return(c||e.initialOffset||v)&&(n=e.initialOffset||o.offset(),v&&(S=this._getNormalizedCursorOffset(v,e),isFinite(S.left)&&(n.left=i.pageX),isFinite(S.top)&&(n.top=i.pageY)),t=r.offset(),n.top-=t.top+(S.top||0)-T.top,n.left-=t.left+(S.left||0)-T.left),n},_initPosition(e){const n=V(e.dragElement),t=this._calculateElementOffset(e);t&&this._move(t,n),this._startPosition=Nn(n)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(e){return dy(this.NAME)+(e?`-${e}`:"")},_getItemsSelector(){return this.option("filter")||""},_$content(){const e=this.$element(),n=e.children(".dx-template-wrapper");return n.length?n:e},_attachEventHandlers(){if(this.option("disabled"))return;let e=this._$content(),n=this._getItemsSelector();const t=this.option("allowMoveByClick"),i={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(o,r)=>{const c=this.option("group"),v=this._getSourceDraggable().option("group"),S=this._getScrollable(o);return!this._verticalScrollHelper.isOutsideScrollable(S,r)&&!this._horizontalScrollHelper.isOutsideScrollable(S,r)&&v&&v===c}};t&&(e=this._getArea(),ue.on(e,mee,i,this._pointerDownHandler.bind(this))),">"===n[0]&&(n=n.slice(1)),ue.on(e,dee,n,i,this._dragStartHandler.bind(this)),ue.on(e,hee,i,this._dragMoveHandler.bind(this)),ue.on(e,pee,i,this._dragEndHandler.bind(this)),ue.on(e,fee,i,this._dragEnterHandler.bind(this)),ue.on(e,gee,i,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&ue.on(e,_ee,this._keydownHandler.bind(this))},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(e,n){return{container:st(n),model:{itemData:this.option("itemData"),itemElement:st(e)}}},_createDragElement(e){let n=e;const t=this.option("clone"),i=this._getContainer();let o=this.option("dragTemplate");return o?(o=this._getTemplate(o),n=V("<div>").appendTo(i),o.render(this._getDragTemplateArgs(e,n))):t&&(n=V("<div>").appendTo(i),e.clone().css({width:e.css("width"),height:e.css("height")}).appendTo(n)),n.toggleClass(this._addWidgetPrefix("clone"),n.get(0)!==e.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){ue.off(this._$content(),`.${Qo}`),ue.off(this._getArea(),`.${Qo}`)},_move(e,n){Tn(n||this._$dragElement,e)},_getDraggableElement(e){const n=this._getSourceElement();if(n)return n;if(this.option("allowMoveByClick"))return this.$element();let i=V(e&&e.target);const o=this._getItemsSelector();if(">"===o[0]){const r=this._$content().find(o);r.is(i)||(i=i.closest(r))}return i},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(e){if(jT(e))return;const n={},t=this.$element(),i=this.option("dragDirection");("horizontal"===i||"both"===i)&&(n.left=e.pageX-t.offset().left+Nn(t).left-Xe(t)/2),("vertical"===i||"both"===i)&&(n.top=e.pageY-t.offset().top+Nn(t).top-ut(t)/2),this._move(n,t),this._getAction("onDragMove")(this._getEventArgs(e))},_isValidElement(e,n){const t=this.option("handle"),i=V(e.originalEvent&&e.originalEvent.target);return!(t&&!i.closest(t).length||!n.length||n.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(e){const n=this._getDraggableElement(e);if(this.dragInProgress=!0,!this._isValidElement(e,n))return void(e.cancel=!0);if(this._$sourceElement)return;const t=this._getDragStartArgs(e,n);if(this._getAction("onDragStart")(t),t.cancel)return void(e.cancel=!0);this.option("itemData",t.itemData),this._setSourceDraggable(),this._$sourceElement=n;let i=n.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),i=this._getDraggableElementOffset(i.left,i.top));const o=this._$dragElement=this._createDragElement(n);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(o.children());const r="fixed"===o.css("position");this._initPosition(pe({},t,{dragElement:o.get(0),initialOffset:r&&i})),this._getAction("onDraggableElementShown")(He({},t,{dragElement:o}));const c=this._getArea(),v=this._getAreaOffset(c),S=this._getBoundOffset(),T=qt(c),F=et(c),N=Xe(o),B=ut(o),X=o.offset().left-v.left,ne=o.offset().top-v.top;c.length&&(e.maxLeftOffset=X-S.left,e.maxRightOffset=T-X-N-S.right,e.maxTopOffset=ne-S.top,e.maxBottomOffset=F-ne-B-S.bottom),this.option("autoScroll")&&this._startAnimator()},_getAreaOffset:e=>e&&Dn.offset(e)||{left:0,top:0},_toggleDraggingClass(e){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),e)},_toggleDragSourceClass(e,n){const t=n||this._$sourceElement;t&&t.toggleClass(this._addWidgetPrefix("source"),e)},_setGestureCoverCursor(e){V(".dx-gesture-cover").css("cursor",e.css("cursor"))},_getBoundOffset(){let e=this.option("boundOffset");return Be(e)&&(e=e.call(this)),function(e){const n=function(e){switch(typeof e){case"string":return e.split(/\s+/,4);case"object":return[e.x||e.h||e.left,e.y||e.v||e.top,e.x||e.h||e.right,e.y||e.v||e.bottom];case"number":return[e];default:return e}}(e);let t=parseInt(n&&n[0],10),i=parseInt(n&&n[1],10),o=parseInt(n&&n[2],10),r=parseInt(n&&n[3],10);return isFinite(t)||(t=0),isFinite(i)||(i=t),isFinite(o)||(o=t),isFinite(r)||(r=i),{top:i,right:o,bottom:r,left:t}}(e)},_getArea(){let e=this.option("boundary");return Be(e)&&(e=e.call(this)),V(e)},_getContainer(){let e=this.option("container");return void 0===e&&(e=Ls()),V(e)},_getDraggableElementOffset(e,n){var t,i;const o=this._initScrollTop,r=this._initScrollLeft,c=this._getScrollableScrollTop(),v=this._getScrollableScrollLeft(),T="fixed"===V(this.element()).css("position"),F={left:((null===(t=this._startPosition)||void 0===t?void 0:t.left)??0)+e,top:((null===(i=this._startPosition)||void 0===i?void 0:i.top)??0)+n};return T||this._hasClonedDraggable()?F:{left:rn(v)?F.left+v-r:F.left,top:rn(c)?F.top+c-o:F.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(e){if(this._dragMoveArgs=e,!this._$dragElement)return void(e.cancel=!0);const n=this._getDraggableElementOffset(e.offset.x,e.offset.y);this._move(n),this._updateScrollable(e);const t=this._getEventArgs(e);this._getAction("onDragMove")(t),!0!==t.cancel&&this._getTargetDraggable().dragMove(e,scrollBy)},_updateScrollable(e){const n=this;if(n.option("autoScroll")){const t=Ax(e),i=Pe.elementsFromPoint(t.x,t.y,this.$element().get(0));n._verticalScrollHelper.updateScrollable(i,t),n._horizontalScrollHelper.updateScrollable(i,t)}},_getScrollable(e){let n;return e.parents().toArray().some(t=>{const i=V(t);return!(!this._horizontalScrollHelper.isScrollable(i)&&!this._verticalScrollHelper.isScrollable(i)||(n=i,0))}),n},_getScrollableScrollTop(){var e;return(null===(e=this._getScrollable(V(this.element())))||void 0===e?void 0:e.scrollTop())??0},_getScrollableScrollLeft(){var e;return(null===(e=this._getScrollable(V(this.element())))||void 0===e?void 0:e.scrollLeft())??0},_defaultActionArgs(){const e=this.callBase.apply(this,arguments),n=this.option("component");return n&&(e.component=n,e.element=n.element()),e},_getEventArgs(e){const n=this._getSourceDraggable(),t=this._getTargetDraggable();return{event:e,itemData:n.option("itemData"),itemElement:st(n._$sourceElement),fromComponent:n.option("component")||n,toComponent:t.option("component")||t,fromData:n.option("data"),toData:t.option("data")}},_getDragStartArgs(e,n){const t=this._getEventArgs(e);return{event:t.event,itemData:t.itemData,itemElement:n,fromData:t.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(e){const n=Ae(),t=this._getEventArgs(e),i=this._getEventArgs(e),o=this._getTargetDraggable();let r=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(t)}finally{Ft(ii(t.cancel)).done(c=>{if(!c&&(o!==this&&o._getAction("onDrop")(i),!i.cancel))return r=!1,void Ft(ii(o.dragEnd(t))).always(n.resolve);n.resolve()}).fail(n.resolve),n.done(()=>{r&&this._revertItemToInitialPosition(),this._resetDragOptions(o)})}},_isTargetOverAnotherDraggable(e){const n=this._getSourceDraggable();if(this===n)return!1;const t=n._$dragElement,i=n.$element(),o=this.$element(),r=Ax(e),v=Pe.elementsFromPoint(r.x,r.y,this.element()).filter(N=>{const B=V(N);return!!B.hasClass(this._addWidgetPrefix())&&!B.closest(t).length})[0],S=this._getSourceElement(),T=v===i.get(0),F=V(v).closest(S).length;return!v||v===o.get(0)&&!T&&!F},_dragEnterHandler(e){this._fireDragEnterEvent(e),this._isTargetOverAnotherDraggable(e)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(e)},_dragLeaveHandler(e){this._fireDragLeaveEvent(e),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(e)},_keydownHandler(e){this.dragInProgress&&"Escape"===e.key&&this._keydownEscapeHandler(e)},_keydownEscapeHandler(e){var n;if(!this._getSourceElement())return;const i=this._getEventArgs(e);if(this._getAction("onDragCancel")(i),i.cancel)return;this.dragInProgress=!1,null===(n=$f)||void 0===n||n._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();const o=this._getTargetDraggable();this._resetDragOptions(o),this._attachEventHandlers()},_getAction(e){return this[`_${e}Action`]||this._createActionByOption(e)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new Hs}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());const e=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),n=this._getTemplateByOption("contentTemplate");n&&V(n.render({container:this.element(),transclude:e}))},_optionChanged(e){const{name:n}=e;switch(n){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this[`_${n}Action`]=this._createActionByOption(n);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(e)}},_getTargetDraggable(){return Mx||this},_getSourceDraggable(){return $f||this},_setTargetDraggable(){const e=this.option("group"),n=this._getSourceDraggable();e&&e===n.option("group")&&(Mx=this)},_setSourceDraggable(){$f=this},_resetSourceDraggable(){$f=null},_resetTargetDraggable(){Mx=null},_resetDragOptions(e){this.reset(),e.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(e){const n=this._getEventArgs(e);this._getAction("onDragEnter")(n)},_fireDragLeaveEvent(e){const n=this._getEventArgs(e);this._getAction("onDragLeave")(n)}});xt(Qo,NF);const Rx=NF,HF="dxdblclick",BF=Te(si,"dxDblClick"),yee=Tt.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&ue.on(Pe.getDocument(),BF,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(e){const n=e.timeStamp||Date.now(),t=n-this._lastClickTimeStamp;!(t<0)&&t<300?(is({type:"dxdblclick",target:h6(this._firstClickTarget,e.target),originalEvent:e}),this._forgetLastClick()):(this._firstClickTarget=e.target,this._lastClickTimeStamp=n,clearTimeout(this._lastClickClearTimeout),this._lastClickClearTimeout=setTimeout(()=>{this._forgetLastClick()},600))},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),ue.off(Pe.getDocument(),BF,void 0),clearTimeout(this._lastClickClearTimeout),this._handlerCount=0)}}),Cee=new yee;_o(HF,Cee);const xee=qk,VF="dxNumberBox",zF=Te(Wt.up,VF),jF=Te(Wt.cancel,VF),Ul=vi.inherit({_getDefaultOptions(){return pe(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup(){this.callBase();const e=`dx-numberbox-spin-${this.option("direction")}`;this.$element().addClass("dx-numberbox-spin-button").addClass(e),this._spinIcon=V("<div>").addClass(`${e}-icon`).appendTo(this.$element())},_render(){this.callBase();const e=Te(Wt.down,this.NAME),n=this.$element();ue.off(n,e),ue.on(n,e,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler(e){e.preventDefault(),this._clearTimer(),ue.on(this.$element(),"dxhold",()=>{this._feedBackDeferred=Ae(),c8(this._feedBackDeferred),this._spinChangeHandler({event:e}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:e})});const n=Pe.getDocument();ue.on(n,zF,this._clearTimer.bind(this)),ue.on(n,jF,this._clearTimer.bind(this)),this._spinChangeHandler({event:e})},_dispose(){this._clearTimer(),this.callBase()},_clearTimer(){ue.off(this.$element(),"dxhold");const e=Pe.getDocument();ue.off(e,zF),ue.off(e,jF),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged(e){switch(e.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(e)}}});class Eee extends Lf{_attachEvents(n,t){const{editor:i}=this,o=Te(Wt.down,i.NAME),r=t.children(),c=i._createAction(v=>i._spinButtonsPointerDownHandler(v));ue.off(t,o),ue.on(t,o,v=>c({event:v})),Ul.getInstance(r.eq(0)).option("onChange",v=>i._spinUpChangeHandler(v)),Ul.getInstance(r.eq(1)).option("onChange",v=>i._spinDownChangeHandler(v))}_create(){const{editor:n}=this,t=V("<div>").addClass("dx-numberbox-spin-container"),i=V("<div>").appendTo(t),o=V("<div>").appendTo(t),r=this._getOptions();return this._addToContainer(t),n._createComponent(i,Ul,pe({direction:"up"},r)),n._createComponent(o,Ul,pe({direction:"down"},r)),this._legacyRender(n.$element(),this._isTouchFriendly(),r.visible),{instance:t,$element:t}}_getOptions(){const{editor:n}=this;return{visible:this._isVisible(),disabled:n.option("disabled")}}_isVisible(){const{editor:n}=this;return super._isVisible()&&n.option("showSpinButtons")}_isTouchFriendly(){const{editor:n}=this;return n.option("showSpinButtons")&&n.option("useLargeSpinButtons")}_legacyRender(n,t,i){n.toggleClass("dx-numberbox-spin-touch-friendly",t),n.toggleClass("dx-numberbox-spin",i)}update(){if(super.update()){const{editor:t,instance:i}=this,o=t.$element(),r=this._isVisible(),c=this._isTouchFriendly(),v=i.children(),S=Ul.getInstance(v.eq(0)),T=Ul.getInstance(v.eq(1)),F=this._getOptions();S.option(F),T.option(F),this._legacyRender(o,c,r)}}}const wee=Math,Tee=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],Mee=xee.inherit({_supportedKeys(){return pe(this.callBase(),{upArrow(e){ri(e)||(e.preventDefault(),e.stopPropagation(),this._spinUpChangeHandler(e))},downArrow(e){ri(e)||(e.preventDefault(),e.stopPropagation(),this._spinDownChangeHandler(e))},enter(){}})},_getDefaultOptions(){return pe(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:de.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:()=>!1,_getDefaultButtons(){return this.callBase().concat([{name:"spins",Ctor:Eee}])},_isSupportInputMode(){const e=parseFloat(Wo.version);return Wo.chrome&&e>=66||Wo.safari&&e>=12},_defaultOptionsRules(){return this.callBase().concat([{device:()=>je.real().generic&&!je.isSimulator(),options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==je.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes(){const e=this.callBase();return e.inputmode="decimal",e},_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement(){this._$submitElement=V("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(e){this._getSubmitElement().val(function(e){const n=Ht().serverDecimalSeparator;return Ie(e)&&(e=e.toString().replace(".",n)),e}(e))},_getSubmitElement(){return this._$submitElement},_keyPressHandler(e){this.callBase(e);const n=My(e);if(!/[\d.,eE\-+]/.test(n)){const i=$n(e);return ri(e)||i&&Tee.includes(i)?void 0:(e.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel(e){this._spinValueChange(e.delta>0?1:-1,e)},_renderValue(){const e=this._input().val(),n=this.option("value");(!e.length||Number(e)!==n)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());const t=Ie(n)?null:de.format("dxNumberBox-noDataText");return this.setAria({valuenow:mn(n,""),valuetext:t}),this.option("text",this._input().val()),this._updateButtons(),Ae().resolve()},_forceValueRender(){const e=this.option("value"),n=Number(e),t=isNaN(n)?"":this._applyDisplayValueFormatter(e);this._renderDisplayText(t)},_applyDisplayValueFormatter(e){return this.option("displayValueFormatter")(e)},_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:mn(this.option("min"),""),valuemax:mn(this.option("max"),"")})},_spinButtonsPointerDownHandler(){const e=this._input();!this.option("useLargeSpinButtons")&&Pe.getActiveElement()!==e[0]&&ue.trigger(e,"focus")},_spinUpChangeHandler(e){this.option("readOnly")||this._spinValueChange(1,e.event||e)},_spinDownChangeHandler(e){this.option("readOnly")||this._spinValueChange(-1,e.event||e)},_spinValueChange(e,n){const t=parseFloat(this.option("step"));if(0===t)return;let i=parseFloat(this._normalizeInputValue())||0;i=this._correctRounding(i,t*e);const o=this.option("min"),r=this.option("max");Ie(o)&&(i=Math.max(o,i)),Ie(r)&&(i=Math.min(r,i)),this._saveValueChangeEvent(n),this.option("value",i)},_correctRounding(e,n){const t=/[,.](.*)/,i=t.test(e),o=t.test(n);if(i||o){const r=i?t.exec(e)[0].length:0,c=o?t.exec(n)[0].length:0,v=wee.max(r,c);return this._round(e+n,v)}return e+n},_round(e,n){const t=10**(n=n||0);return e*=t,Math.round(e)/t},_renderValueChangeEvent(){this.callBase();const e=Te("focusout","NumberBoxForceValueChange");ue.off(this.element(),e),ue.on(this.element(),e,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue(){if("number"===this.option("mode"))return;const e=this._input(),n=this._applyDisplayValueFormatter(this.option("value"));e.val(null),e.val(n)},_valueChangeEventHandler(e){const n=this._input(),t=this._normalizeText(),i=this._parseValue(t),o="."!==t&&"-"!==t;!this._isValueValid()||this._validateValue(i)?(o&&this.callBase(e,isNaN(i)?null:i),this._applyValueBoundaries(t,i),this.validationRequest.fire({value:i,editor:this})):n.val(this._applyDisplayValueFormatter(i))},_applyValueBoundaries(e,n){const t=this._isValueIncomplete(e),i=this._isValueInRange(e);!t&&!i&&null!==n&&Number(e)!==n&&this._input().val(this._applyDisplayValueFormatter(n))},_replaceCommaWithPoint:e=>e.replace(",","."),_inputIsInvalid(){const e="number"===this.option("mode"),n=this._input().get(0).validity;return e&&n&&n.badInput},_renderDisplayText(e){this._inputIsInvalid()||this.callBase(e)},_isValueIncomplete:e=>/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(e),_isValueInRange(e){return Pu(e,this.option("min"),this.option("max"))},_isNumber(e){return null!==this._parseValue(e)},_validateValue(e){const n=this._normalizeText(),t=this._isValueValid();let i=!0;const o=this._isNumber(n);return isNaN(Number(e))&&(i=!1),!e&&t?i=!0:!o&&!t&&(i=!1),this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),i},_normalizeInputValue(){return this._parseValue(this._normalizeText())},_normalizeText(){const e=this._input().val().trim();return this._replaceCommaWithPoint(e)},_parseValue(e){const n=parseFloat(e);return isNaN(n)?null:Ci(n,this.option("min"),this.option("max"))},_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged(e){switch(e.name){case"value":this._validateValue(e.value),this._setSubmitValue(e.value),this.callBase(e),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(e)}}}),Wf=function(e){let n=0,t=0;for(let i=0;i<e.length;++i)if("'"===e[i]&&n++,"."===e[i]&&(++t,n%2==0))return{occurrence:t,index:i};return{occurrence:1,index:-1}},kx=function(e,n,t){let i=-1;for(;t--&&i++<e.length;)i=e.indexOf(n,i);return i},Fx=function(e,n){return-1===n?[e]:[e.slice(0,n),e.slice(n+1)]},Gf=function(e,n){if("string"==typeof n){const t=n.split(";"),i=Lt.getSign(e,n);t[1]=t[1]||`-${t[0]}`,n=(n=t[i<0?1:0]).replace(/'([^']*)'/g,S=>S.split("").map(()=>" ").join("").substr(2));const r=/^[^#0.,]*/.exec(n)[0].length,c=/[^#0.,]*$/.exec(n)[0].length;return{start:r,end:e.length-c}}return{start:0,end:e.length}},UF=function(e,n){const t=Lt.getDecimalSeparator(),i=new RegExp(`[^0-9${es(t)}]`,"g");return n.slice(0,e).replace(i,"").length},$F=function(e){return e.split("").reverse().join("")},WF=function(e,n){if(!e)return-1;const t=/[0-9]/g;let i=1,o=null,r=t.exec(n);for(;r;){if(o=r.index,i>=e)return o;i++,r=t.exec(n)}return null===o?n.length:o},na=function(e,n){return void 0===e.start&&(e={start:e,end:e}),{start:e.start+n,end:e.end+n}};function us(e,n,t){e=na(e,0);const i=Gf(n,t);return{start:Ci(e.start,i.start,i.end),end:Ci(e.end,i.start,i.end)}}const GF=Mee.inherit({_getDefaultOptions(){return pe(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:e=>"del"===e,_supportedKeys(){return this._useMaskBehavior()?pe(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex(e){const n=Lt.getDecimalSeparator(),t=Wf(this.option("format")).occurrence;return kx(e,n,t)},_focusInHandler(e){this._preventNestedFocusEvent(e)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0;const n=this._caret();if(n.start===n.end&&this._useMaskBehavior()){const t=this._getInputVal(),i=this._getTextSeparatorIndex(t);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,e)}},0)),this.callBase(e)},_focusOutHandler(e){const n=!this._preventNestedFocusEvent(e);n&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(e),n&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(e){const n=this._getFormatPattern(),t=this.option("value");return(this._format(t,n)||"")!==e},_updateFormattedValue(){const e=this._getInputVal();this._hasValueBeenChanged(e)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&ue.trigger(this._input(),"change"))},_arrowHandler(e,n){if(!this._useMaskBehavior())return;const t=this._getInputVal(),i=this._getFormatPattern();let o=na(this._caret(),e);(function(e,n,t){const i=us(e=na(e,0),n,t);return e.start>=i.start&&e.end<=i.end})(o,t,i)||(o=1===e?o.end:o.start,n.preventDefault(),this._caret(us(o,t,i)))},_moveCaretToBoundary(e){const n=Gf(this._getInputVal(),this._getFormatPattern()),t=na(1===e?n.start:n.end,0);this._caret(t)},_moveCaretToBoundaryEventHandler(e,n){!this._useMaskBehavior()||n&&n.shiftKey||(this._moveCaretToBoundary(e),n&&n.preventDefault())},_shouldMoveCaret(e,n){const t=Lt.getDecimalSeparator(),i=e.charAt(n.end)===t;return(this._lastKey===t||"."===this._lastKey||","===this._lastKey)&&i},_getInputVal(){return Lt.convertDigits(this._input().val(),!0)},_keyboardHandler(e){if(this.clearCaretTimeout(),this._lastKey=Lt.convertDigits(My(e),!0),this._lastKeyName=$n(e),!this._shouldHandleKey(e.originalEvent))return this.callBase(e);const n=this._getInputVal(),t=this._caret();let i;i="minus"===this._lastKeyName?"":110===e.which?Lt.getDecimalSeparator():this._lastKey;const o=this._tryParse(n,t,i);return this._shouldMoveCaret(n,t)&&(this._moveCaret(1),e.originalEvent.preventDefault()),void 0===o?"minus"!==this._lastKeyName&&e.originalEvent.preventDefault():this._parsedValue=o,this.callBase(e)},_keyPressHandler(e){this._useMaskBehavior()||this.callBase(e)},_removeHandler(e){const n=this._caret(),t=this._getInputVal();let{start:i}=n,{end:o}=n;this._lastKey=My(e),this._lastKeyName=$n(e);const r=this._isDeleteKey(this._lastKeyName),c=!r;if(i===o){if(!(c&&i>0||r&&i<t.length))return void e.preventDefault();r&&o++,c&&i--}const v=t.slice(i,o);if(this._isStub(v))return this._moveCaret(r?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(e),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&ue.trigger(this._input(),"input")),void e.preventDefault();const S=Lt.getDecimalSeparator();if(v===S){const F=t.indexOf(S);return void(this._isNonStubAfter(F+1)&&(this._moveCaret(r?1:-1),e.preventDefault()))}if(o-i<t.length&&this._replaceSelectedText(t,{start:i,end:o},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);const T=this._tryParse(t,{start:i,end:o},"");void 0===T?e.preventDefault():this._parsedValue=T},_isPercentFormat(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse(e,n){const t=this.option("format"),i=Be(t.parser),o=i?t.parser:Lt.parse;let r=0;if(!i){const c=Wf(n).index,v=this._getTextSeparatorIndex(e),S=-1!==c?c:n.length,T=-1!==v?v:e.length;T>S&&-1===n.indexOf("#")&&(r=T-S)}return o(e=e.substr(r),n)},_format(e,n){const t=this.option("format"),i=t?.formatter||t,o=Be(i)?i:Lt.format;return null===e?"":o(e,n)},_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat(){const e=this.option("format"),n=Be(e?.parser),t=_t(e)&&(e.includes("0")||e.includes("#"));this._currentFormat=n||t||"exponential"===e||"exponential"===e?.type?e:function a9(e){let n=".";const t=e(1).indexOf("100")>=0;n=JM(n,e,t,!0),n=JM(n,e,t,!1);const i=eA(n,e,t,!1),o=eA(n,e,t,!0);return o==="-"+i?i:i+";"+o}(r=>{const c=this._format(r,e);return Lt.convertDigits(c,!0)})},_getFormatForSign(e){const n=this._getFormatPattern();if(_t(n)){const i=n.split(";"),o=Lt.getSign(e,n);return i[1]=i[1]||`-${i[0]}`,o<0?i[1]:i[0]}return Lt.getSign(e)<0?"-":""},_removeStubs(e,n){const t=this._getFormatForSign(e),i=Lt.getThousandsSeparator(),o=this._getStubs(t);let r=e;if(o.length){const c=o[0],v=new RegExp(`(${es(o[1]||"")})$`,"g"),S=new RegExp(`[-${es(n?"":i)}]`,"g");r=r.replace(c,"").replace(v,"").replace(S,"")}return r},_getStubs(e){const n=/[^']([#0.,]+)/g.exec(e),t=n&&n[0].trim();return e.split(t).map(i=>i.replace(/'/g,""))},_truncateToPrecision(e,n){if(Ie(e)){const t=e.toString(),i=t.indexOf(".");if(t&&i>-1){const o=parseFloat(t.substr(0,i+n+1));return isNaN(o)?e:o}}return e},_tryParse(e,n,t){const i=n.start!==n.end,o=i&&0===n.start&&n.end===e.length,r=Lt.getDecimalSeparator();if(o&&t===r)return 0;const c=this._replaceSelectedText(e,n,t),v=this._getFormatPattern();let S=this._getParsedValue(c,v);const T=!v.parser&&this._getPrecisionLimits(c).max,N=t===r&&0===T,B=!i&&!(S!==this._parsedValue)&&"-"!==t&&this._isStub(t);return N||B||(""===this._removeStubs(c)&&(S=Math.abs(0*this._parsedValue)),isNaN(S))?void 0:(S=T?this._truncateToPrecision(null===S?this._parsedValue:S,T):S,!v.parser&&this._isPercentFormat()?function(e,n){return e&&$M(e/100,n)}(S,T):S)},_getParsedValue(e,n){const t=Lt.getSign(e,n?.formatter||n),i=this._removeStubs(e,!0),o=this._parse(i,n),r=o<0?-1:1;return rn(o)&&t!==r?t*o:o},_isValueIncomplete(e){if(!this._useMaskBehavior())return this.callBase(e);const n=this._caret(),t=Lt.getDecimalSeparator(),i=this._getTextSeparatorIndex(e),o=i>=0&&i<n.start,r=this._removeStubs(e,!0).split(t);if(!o||2!==r.length)return!1;const c=r[1].length,S=!!this._getFormatPattern().parser,T=!S&&this._getPrecisionLimits(this._getFormatPattern(),e),F=!!S||Pu(c,T.min,T.max),N="0"===r[1].charAt(c-1);return F&&(N||!c)},_isValueInRange(e){const n=mn(this.option("min"),-1/0),t=mn(this.option("max"),1/0);return Pu(e,n,t)},_setInputText(e){const n=Lt.convertDigits(e,!0),t=function(e,n,t,i){t=na(t,0);const o=Lt.getDecimalSeparator(),r=function Fee(e){return 1===e.length&&!!e.match(/^[,.][0-9]*$/g)}(e),c=Wf(i).occurrence,v=r?0:kx(e,o,c),S=kx(n,o,c),T=Fx(e,v),F=Fx(n,S);if(-1!==v&&t.start>v){const _e=UF(t.start-v-1,T[1]);return us(F[1]?S+1+WF(_e,F[1])+1:n.length,n,i)}const B=function(e){return e.replace(/[^0-9e]+$/,"")}(F[0]),ne=UF(T[0].length-t.start,$F(T[0])),le=WF(ne,$F(B));return us(B.length-(le+1),n,i)}(this._getInputVal(),n,this._caret(),this._getFormatPattern());this._input().val(e),this._toggleEmptinessEventHandler(),this._formattedValue=e,this._focusOutOccurs||this._caret(t)},_useMaskBehavior(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType(){const e="number"===this.option("mode"),n="desktop"===je.real().deviceType;this._useMaskBehavior()&&e?this._setInputType(n||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:e=>_t(e)&&1===e.length,_moveCaret(e){if(!e)return;const t=us(na(this._caret(),e),this._getInputVal(),this._getFormatPattern());this._caret(t)},_shouldHandleKey(e){const n=$n(e),t=ri(e)||e.altKey||e.shiftKey||!this._isChar(n),i="minus"===n;return this._useMaskBehavior()&&!t&&!i},_renderInput(){this.callBase(),this._renderFormatter()},_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents(){ue.off(this._input(),".dxNumberFormatter")},_isInputFromPaste(e){const n=e.originalEvent&&e.originalEvent.inputType;return Ie(n)?"insertFromPaste"===n:this._isValuePasted},_attachFormatterEvents(){const e=this._input();ue.on(e,Te("input","dxNumberFormatter"),n=>{this._formatValue(n),this._isValuePasted=!1}),ue.on(e,Te("dxclick","dxNumberFormatter"),()=>{this._caretTimeout||(this._caretTimeout=setTimeout(()=>{this._caretTimeout=void 0,this._caret(us(this._caret(),this._getInputVal(),this._getFormatPattern()))},0))}),ue.on(e,HF,()=>{this.clearCaretTimeout()})},clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter(e){const n=this._getInputVal().slice(e);return n&&!this._isStub(n,!0)},_isStub(e,n){const i=`^[^0-9${es(Lt.getDecimalSeparator())}]+$`;return new RegExp(i,"g").test(e)&&(n||this._isChar(e))},_parseValue(e){return this._useMaskBehavior()?this._parsedValue:this.callBase(e)},_getPrecisionLimits(e){const n=this._getFormatForSign(e),t=Wf(n).index,i=(Fx(n,t)[1]||"").replace(/[^#0]/g,"");return{min:i.replace(/^(0*)#*/,"$1").length,max:i.length}},_revertSign(e){if(!this._useMaskBehavior())return;const n=this._caret();if(n.start!==n.end){if("minus"===$n(e))return void this._applyRevertedSign(e,n,!0);this._caret(us(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(e,n)},_applyRevertedSign(e,n,t){const i=-1*mn(this._parsedValue,null);if((this._isValueInRange(i)||0===i)&&(this._parsedValue=i,t)){const o=this._getFormatPattern(),r=this._getInputVal();this._setTextByParsedValue(),e.preventDefault();const c=this._getInputVal(),v=function(e,n,t){const i=Gf(e,t);return Gf(n,t).start-i.start}(r,c,o),S=us(n=na(n,v),c,o);this._caret(S)}},_removeMinusFromText(e,n){return"minus"===this._lastKeyName&&"-"===e.charAt(n.start-1)?this._replaceSelectedText(e,{start:n.start-1,end:n.start},""):e},_setTextByParsedValue(){const e=this._getFormatPattern(),n=this._parseValue(),t=this._format(n,e)||"";this._setInputText(t)},_formatValue(e){let n=this._getInputVal();const t=this._caret(),i=this._removeMinusFromText(n,t),o=i!==n;if(n=i,!this._isInputFromPaste(e)&&this._isValueIncomplete(i))return this._formattedValue=n,void(o&&this._setTextByParsedValue());if(Lt.convertDigits(this._formattedValue,!0)!==n){const c=this._tryParse(n,t,"");Ie(c)&&(this._parsedValue=c)}this._setTextByParsedValue()},_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue(){const e=this._getInputVal();this._parsedValue=this._tryParse(e,this._caret())},_adjustParsedValue(){if(!this._useMaskBehavior())return;const n=this._removeStubs(this._getInputVal())?this._parseValue():null;this._parsedValue=rn(n)?Ci(n,this.option("min"),this.option("max")):n},_valueChangeEventHandler(e){if(!this._useMaskBehavior())return this.callBase(e);const n=this._caret();this._saveValueChangeEvent(e),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),n&&this._caret(n)},_optionChanged(e){switch(e.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(e);break;default:this.callBase(e)}},_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean(){this._clearCache(),this.callBase()}});xt("dxNumberBox",GF);const ud=GF,Kf="dx-colorview-container-row",KF="dx-colorview-palette-gradient",Bee="dx-colorview-palette-gradient-white",Vee="dx-colorview-palette-gradient-black",qF="dx-colorview-color-preview",zee="dx-colorview-color-preview-color-current",jee="dx-colorview-color-preview-color-new",ZF=Js.inherit({_supportedKeys(){const e=this.option("rtlEnabled"),n=this,t=function(N){let B=100/n._paletteWidth;return N.shiftKey&&(B*=n.option("keyStep")),B=B>1?B:1,Math.round(B)},i=function(N){let B=n._currentColor.hsv.s+N;B>100?B=100:B<0&&(B=0),n._currentColor.hsv.s=B,c()},o=function(N){let B=100/n._paletteHeight;return N.shiftKey&&(B*=n.option("keyStep")),B=B>1?B:1,Math.round(B)},r=function(N){let B=n._currentColor.hsv.v+N;B>100?B=100:B<0&&(B=0),n._currentColor.hsv.v=B,c()};function c(){n._placePaletteHandle(),n._updateColorFromHsv(n._currentColor.hsv.h,n._currentColor.hsv.s,n._currentColor.hsv.v)}const v=function(N){let B=360/(n._hueScaleWrapperHeight-n._hueScaleHandleHeight);return N.shiftKey&&(B*=n.option("keyStep")),B=B>1?B:1,B},S=function(N){n._currentColor.hsv.h+=N,n._placeHueScaleHandle();const B=Nn(n._$hueScaleHandle);n._updateColorHue(B.top+n._hueScaleHandleHeight/2)},T=function(N){let B=1/n._alphaChannelScaleWorkWidth;return N.shiftKey&&(B*=n.option("keyStep")),B=B>.01?B:.01,B=e?-B:B,B},F=function(N){n._currentColor.a+=N,n._placeAlphaChannelHandle();const B=Nn(n._$alphaChannelHandle);n._calculateColorTransparencyByScaleWidth(B.left+n._alphaChannelHandleWidth/2)};return pe(this.callBase(),{upArrow(N){N.preventDefault(),N.stopPropagation(),ri(N)?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&(this._saveValueChangeEvent(N),S(v(N))):this._currentColor.hsv.v<100&&(this._saveValueChangeEvent(N),r(o(N)))},downArrow(N){N.preventDefault(),N.stopPropagation(),ri(N)?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),this._saveValueChangeEvent(N),S(-v(N))):this._currentColor.hsv.v>0&&(this._saveValueChangeEvent(N),r(-o(N)))},rightArrow(N){N.preventDefault(),N.stopPropagation(),ri(N)?(e?this._currentColor.a<1:this._currentColor.a>0&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(N),F(-T(N))):this._currentColor.hsv.s<100&&(this._saveValueChangeEvent(N),i(t(N)))},leftArrow(N){N.preventDefault(),N.stopPropagation(),ri(N)?(e?this._currentColor.a>0:this._currentColor.a<1&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(N),F(T(N))):this._currentColor.hsv.s>0&&(this._saveValueChangeEvent(N),i(-t(N)))},enter(N){this._fireEnterKeyPressed(N)}})},_getDefaultOptions(){return pe(this.callBase(),{value:null,matchValue:null,onEnterKeyPressed:void 0,editAlphaChannel:!1,keyStep:1,stylingMode:void 0})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initColorAndOpacity(),this._initEnterKeyPressedAction()},_initEnterKeyPressedAction(){this._onEnterKeyPressedAction=this._createActionByOption("onEnterKeyPressed")},_fireEnterKeyPressed(e){this._onEnterKeyPressedAction&&this._onEnterKeyPressedAction({event:e})},_initColorAndOpacity(){this._setCurrentColor(this.option("value"))},_setCurrentColor(e){const n=new Do(e=e||"#000000");n.colorIsInvalid?(this._currentColor||(this._currentColor=new Do("#000000")),this.option("value",this._currentColor.baseColor)):(!this._currentColor||this._makeRgba(this._currentColor)!==this._makeRgba(n))&&(this._currentColor=n,this._$currentColor&&this._makeTransparentBackground(this._$currentColor,n))},_setBaseColor(e){const t=new Do(e||"#000000");t.colorIsInvalid||this._makeRgba(this.option("matchValue")!==this._makeRgba(t))&&this._$baseColor&&this._makeTransparentBackground(this._$baseColor,t)},_initMarkup(){this.callBase(),this.$element().addClass("dx-colorview"),this._renderColorPickerContainer()},_render(){this.callBase(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements()},_makeTransparentBackground(e,n){n instanceof Do||(n=new Do(n)),e.css("backgroundColor",this._makeRgba(n))},_makeRgba:e=>(e instanceof Do||(e=new Do(e)),`rgba(${[e.r,e.g,e.b,e.a].join(", ")})`),_renderValue(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer(){const e=this.$element();this._$colorPickerContainer=V("<div>").addClass("dx-colorview-container").appendTo(e),this._renderHtmlRows()},_renderHtmlRows(e){const n=this._$colorPickerContainer.find(`.${Kf}`),t=n.length;let o=t-(this.option("editAlphaChannel")?2:1);if(o>0&&n.eq(-1).remove(),o<0){o=Math.abs(o);const r=[];let c;for(c=0;c<o;c++)r.push(V("<div>").addClass(Kf));if(t)for(c=0;c<r.length;c++)n.eq(0).after(r[c]);else this._$colorPickerContainer.append(r)}},_renderHtmlCellInsideRow:(e,n,t)=>V("<div>").addClass("dx-colorview-container-cell").addClass(t).appendTo(n.find(`.${Kf}`).eq(e)),_renderPalette(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-palette-cell"),n=V("<div>").addClass([KF,Bee].join(" ")),t=V("<div>").addClass([KF,Vee].join(" "));this._$palette=V("<div>").addClass("dx-colorview-palette").css("backgroundColor",this._currentColor.getPureColor().toHex()).appendTo(e),this._paletteHeight=ut(this._$palette),this._paletteWidth=Xe(this._$palette),this._renderPaletteHandle(),this._$palette.append([n,t])},_renderPaletteHandle(){this._$paletteHandle=V("<div>").addClass("dx-colorview-palette-handle").appendTo(this._$palette);const e=`dx-${new Pn}`;this.setAria({id:e,role:"application"},this._$paletteHandle),this.setAria("activedescendant",e,this.option("target")),this._createComponent(this._$paletteHandle,Rx,{contentTemplate:null,boundary:this._$palette,allowMoveByClick:!0,boundOffset:function(){return-this._paletteHandleHeight/2}.bind(this),onDragMove:t=>{let{event:i}=t;const o=Nn(this._$paletteHandle);this._updateByDrag=!0,this._saveValueChangeEvent(i),this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(o),this._calculateColorValue(o))}}),this._paletteHandleWidth=Xe(this._$paletteHandle),this._paletteHandleHeight=ut(this._$paletteHandle),this._placePaletteHandle()},_placePaletteHandle(){Tn(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue(e){const n=Math.floor(e.top+this._paletteHandleHeight/2);return 100-Math.round(100*n/this._paletteHeight)},_calculateColorSaturation(e){const n=Math.floor(e.left+this._paletteHandleWidth/2);return Math.round(100*n/this._paletteWidth)},_updateColorFromHsv(e,n,t){const{a:i}=this._currentColor;this._currentColor=new Do(`hsv(${[e,n,t].join(",")})`),this._currentColor.a=i,this._updateColorParamsAndColorPreview(),this.applyColor()},_renderHueScale(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-hue-scale-cell");this._$hueScaleWrapper=V("<div>").addClass("dx-colorview-hue-scale-wrapper").appendTo(e),this._$hueScale=V("<div>").addClass("dx-colorview-hue-scale").appendTo(this._$hueScaleWrapper),this._hueScaleHeight=ut(this._$hueScale),this._hueScaleWrapperHeight=et(this._$hueScaleWrapper),this._renderHueScaleHandle()},_renderHueScaleHandle(){this._$hueScaleHandle=V("<div>").addClass("dx-colorview-hue-scale-handle").appendTo(this._$hueScaleWrapper),this._createComponent(this._$hueScaleHandle,Rx,{contentTemplate:null,boundary:this._$hueScaleWrapper,allowMoveByClick:!0,dragDirection:"vertical",onDragMove:e=>{let{event:n}=e;this._updateByDrag=!0,this._saveValueChangeEvent(n),this._updateColorHue(Nn(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)}}),this._hueScaleHandleHeight=ut(this._$hueScaleHandle),this._placeHueScaleHandle()},_placeHueScaleHandle(){const e=this._hueScaleWrapperHeight,n=this._hueScaleHandleHeight;let t=(e-n)*(360-this._currentColor.hsv.h)/360;e<t+n&&(t=e-n),t<0&&(t=0),Tn(this._$hueScaleHandle,{top:Math.round(t)})},_updateColorHue(e){let n=360-Math.round(360*(e-this._hueScaleHandleHeight/2)/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight));const t=this._currentColor.hsv.s,i=this._currentColor.hsv.v;this._isTopColorHue=!1,n=n<0?0:n,n>=360&&(this._isTopColorHue=!0,n=0),this._updateColorFromHsv(n,t,i),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer);this._$controlsContainer=V("<div>").addClass("dx-colorview-controls-container").appendTo(e)},_renderControls(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview(){const e=V("<div>").addClass("dx-colorview-color-preview-container").appendTo(this._$controlsContainer),n=V("<div>").addClass("dx-colorview-color-preview-container-inner").appendTo(e);this._$currentColor=V("<div>").addClass([qF,jee].join(" ")),this._$baseColor=V("<div>").addClass([qF,zee].join(" ")),this._makeTransparentBackground(this._$baseColor,this.option("matchValue")),this._makeTransparentBackground(this._$currentColor,this._currentColor),n.append([this._$baseColor,this._$currentColor])},_renderAlphaChannelElements(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find(`.${Kf}`).eq(1).addClass("dx-colorview-alpha-channel-row"),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:ud,value:this._currentColor.r,onValueChanged:this._updateColor.bind(this,!1),labelText:"R",labelAriaText:de.format("dxColorView-ariaRed"),labelClass:"dx-colorview-label-red"}),this._renderEditorWithLabel({editorType:ud,value:this._currentColor.g,onValueChanged:this._updateColor.bind(this,!1),labelText:"G",labelAriaText:de.format("dxColorView-ariaGreen"),labelClass:"dx-colorview-label-green"}),this._renderEditorWithLabel({editorType:ud,value:this._currentColor.b,onValueChanged:this._updateColor.bind(this,!1),labelText:"B",labelAriaText:de.format("dxColorView-ariaBlue"),labelClass:"dx-colorview-label-blue"})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel(e){const n=V("<div>"),t=V("<label>").addClass(e.labelClass).text(`${e.labelText}:`).append(n);ue.off(t,si),ue.on(t,si,c=>{c.preventDefault()});const{editorType:i}=e,o=pe({value:e.value,onValueChanged:e.onValueChanged,onKeyboardHandled:c=>this._keyboardHandler(c)},{stylingMode:this.option("stylingMode")});return i===ud&&(o.min=e.min||0,o.max=e.max||255,o.step=e.step||1),new i(n,o).registerKeyHandler("enter",c=>{this._fireEnterKeyPressed(c)}),this.setAria("label",e.labelAriaText,n),t},hexInputOptions(){return{editorType:ld,value:this._currentColor.toHex().replace("#",""),onValueChanged:this._updateColor.bind(this,!0),labelClass:"dx-colorview-label-hex",labelText:"#",labelAriaText:de.format("dxColorView-ariaHex")}},_renderHexInput(){this._hexInput=ld.getInstance(this._renderEditorWithLabel(this.hexInputOptions()).appendTo(this._$controlsContainer).find(".dx-textbox"));const e=`dx-${new Pn}`,n=this._$controlsContainer.find(".dx-colorview-label-hex").find(".dx-texteditor-input");this.setAria("id",e,n),this.setAria("labelledby",e,this._$paletteHandle)},_renderAlphaChannelScale(){const e=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer,"dx-colorview-alpha-channel-cell"),n=V("<div>").addClass("dx-colorview-alpha-channel-border").appendTo(e),t=V("<div>").addClass("dx-colorview-alpha-channel-wrapper").appendTo(n);this._$alphaChannelScale=V("<div>").addClass("dx-colorview-alpha-channel-scale").appendTo(t),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(e)},_makeCSSLinearGradient(e){const n=this._currentColor,t=`${n.r},${n.g},${n.b}`,i=this.option("rtlEnabled");e.css("backgroundImage",`linear-gradient(-90deg, rgba(${t}, ${i?"1":"0"}), rgba(${t}, ${i?"0":"1"}))`)},_renderAlphaChannelInput(){const e=this,n=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer);e._alphaChannelInput=this._renderEditorWithLabel({editorType:ud,value:this._currentColor.a,max:1,step:.1,onValueChanged(t){let{value:i}=t;i=e._currentColor.isValidAlpha(i)?i:e._currentColor.a,t.event&&e._saveValueChangeEvent(t.event),e._updateColorTransparency(i),e._placeAlphaChannelHandle()},labelClass:"dx-colorview-alpha-channel-label",labelText:"Alpha",labelAriaText:de.format("dxColorView-ariaAlpha")}).appendTo(n).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparency(e){this._currentColor.a=e,this.applyColor()},_renderAlphaChannelHandle(e){this._$alphaChannelHandle=V("<div>").addClass("dx-colorview-alpha-channel-handle").appendTo(e),this._createComponent(this._$alphaChannelHandle,Rx,{contentTemplate:null,boundary:e,allowMoveByClick:!0,dragDirection:"horizontal",onDragMove:n=>{let{event:t}=n;this._updateByDrag=!0;const o=Nn(this._$alphaChannelHandle).left+this._alphaChannelHandleWidth/2;this._saveValueChangeEvent(t),this._calculateColorTransparencyByScaleWidth(o)}}),this._alphaChannelHandleWidth=Xe(this._$alphaChannelHandle),this._alphaChannelScaleWorkWidth=Xe(e)-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparencyByScaleWidth(e){let n=(e-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth;const t=this.option("rtlEnabled");n=t?n:1-n,e>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?n=t?1:0:n<1&&(n=n.toFixed(2));const i=this._alphaChannelInput.option("value");n=Math.max(n,0),n=Math.min(n,1),n===i?this._updateByDrag=!1:this._alphaChannelInput.option("value",n)},_placeAlphaChannelHandle(){let e=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);e<0&&(e=0),this._alphaChannelScaleWorkWidth<e&&(e=this._alphaChannelScaleWorkWidth),Tn(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-e:e})},applyColor(){const e=this.option("value"),n=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),n===e?this._updateByDrag=!1:this.option("value",n)},cancelColor(){this._initColorAndOpacity(),this._refreshMarkup()},_updateColor(e,n){let t,i;e?i=this._validateHex(`#${this._hexInput.option("value")}`):(t=this._validateRgb(),this._alphaChannelInput?(t.push(this._alphaChannelInput.option("value")),i=`rgba(${t.join(", ")})`):i=`rgb(${t.join(", ")})`),this._suppressEditorsValueUpdating||(this._currentColor=new Do(i),this._saveValueChangeEvent(n.event),this.applyColor(),this._refreshMarkup())},_validateHex(e){return this._currentColor.isValidHex(e)?e:this._currentColor.toHex()},_validateRgb(){let e=this._rgbInputs[0].option("value"),n=this._rgbInputs[1].option("value"),t=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(e,n,t)||(e=this._currentColor.r,n=this._currentColor.g,t=this._currentColor.b),[e,n,t]},_refreshMarkup(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparency(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged(e){const{value:n}=e;switch(e.name){case"value":this._setCurrentColor(n),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(e);break;case"matchValue":this._setBaseColor(n);break;case"onEnterKeyPressed":this._initEnterKeyPressedAction();break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"keyStep":break;case"stylingMode":this._renderControls();break;default:this.callBase(e)}}});xt("dxColorView",ZF);const XF=ZF,YF="dx-colorbox-color-is-not-defined",qf=XF.prototype,ds={makeTransparentBackground:qf._makeTransparentBackground.bind(qf),makeRgba:qf._makeRgba.bind(qf)},$ee=wF.inherit({_supportedKeys(){const e=function(n){if(n.stopPropagation(),this.option("opened"))return n.preventDefault(),!0};return pe(this.callBase(),{enter:this._enterKeyHandler,leftArrow:e,rightArrow:e,upArrow:function(n){return this.option("opened")?!n.altKey||(this.close(),!1):(n.preventDefault(),!1)},downArrow:function(n){return this.option("opened")||n.altKey?!(!this.option("opened")&&n.altKey&&(this._validatedOpening(),1)):(n.preventDefault(),!1)}})},_getDefaultOptions(){return pe(this.callBase(),{editAlphaChannel:!1,applyValueMode:"useButtons",keyStep:1,fieldTemplate:null,buttonsLocation:"bottom after"})},_popupHidingHandler(){this.callBase(),"useButtons"===this.option("applyValueMode")&&this._updateColorViewValue(this.option("value"))},_popupConfig(){return pe(this.callBase(),{width:""})},_contentReadyHandler(){this._createColorView(),this._addPopupBottomClasses()},_addPopupBottomClasses(){const e=this._popup.bottomToolbar();e&&(e.addClass("dx-colorview-container-cell").addClass("dx-colorview-button-cell").find(".dx-toolbar-items-container").addClass("dx-colorview-buttons-container"),e.find(".dx-popup-done").addClass("dx-colorview-apply-button"),e.find(".dx-popup-cancel").addClass("dx-colorview-cancel-button"))},_createColorView(){this._popup.$overlayContent().addClass("dx-colorbox-overlay");const e=V("<div>").appendTo(this._popup.$content());this._colorView=this._createComponent(e,XF,this._colorViewConfig())},_applyNewColor(e){this.option("value",e),e&&ds.makeTransparentBackground(this._$colorResultPreview,e),this._colorViewEnterKeyPressed&&(this.close(),this._colorViewEnterKeyPressed=!1)},_colorViewConfig(){const e=this;return{value:e.option("value"),matchValue:e.option("value"),editAlphaChannel:e.option("editAlphaChannel"),applyValueMode:e.option("applyValueMode"),focusStateEnabled:e.option("focusStateEnabled"),stylingMode:this.option("stylingMode"),target:this._input(),onEnterKeyPressed(n){let{event:t}=n;e._colorViewEnterKeyPressed=!0,e._colorView.option("value")!==e.option("value")&&(e._saveValueChangeEvent(t),e._applyNewColor(e._colorView.option("value")),e.close())},onValueChanged(n){let{event:t,value:i,previousValue:o}=n;const r="instantly"===e.option("applyValueMode");ds.makeRgba(i)===o||!r&&!e._colorViewEnterKeyPressed||e._shouldSaveEmptyValue||(t&&e._saveValueChangeEvent(t),e._applyNewColor(i))}}},_enterKeyHandler(e){const n=this._input().val(),{value:t,editAlphaChannel:i}=this.option(),o=t&&i?ds.makeRgba(t):t;if(!n)return!1;if(!new Do(n).colorIsInvalid){if(n!==o&&(this._applyColorFromInput(n),this._saveValueChangeEvent(e),this.option("value",this.option("editAlphaChannel")?ds.makeRgba(n):n)),this._colorView){const c=this._colorView.option("value");t!==c&&(this._saveValueChangeEvent(e),this.option("value",c))}return this.close(),!1}this._input().val(o)},_applyButtonHandler(e){this._saveValueChangeEvent(e.event),this._applyNewColor(this._colorView.option("value")),this.callBase()},_cancelButtonHandler(){this._resetInputValue(),this.callBase()},_getKeyboardListeners(){return this.callBase().concat([this._colorView])},_init(){this.callBase()},_initMarkup(){this.$element().addClass("dx-colorbox"),this.callBase()},_renderInput(){this.callBase(),this._input().addClass("dx-colorbox-input"),this._renderColorPreview()},_renderColorPreview(){this.$element().wrapInner(V("<div>").addClass("dx-colorbox-input-container")),this._$colorBoxInputContainer=this.$element().children().eq(0),this._$colorResultPreview=V("<div>").addClass("dx-colorbox-color-result-preview").appendTo(this._$textEditorInputContainer),this.option("value")?ds.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass(YF)},_renderValue(){const{value:e,editAlphaChannel:n}=this.option(),i=e&&n?ds.makeRgba(e):e;return this.option("text",i),this.callBase()},_resetInputValue(){const e=this._input(),n=this.option("value");e.val(n),this._updateColorViewValue(n)},_updateColorViewValue(e){this._colorView&&this._colorView.option({value:e,matchValue:e})},_valueChangeEventHandler(e){let n=this._input().val();n&&(n=this._applyColorFromInput(n),this._updateColorViewValue(n)),this.callBase(e,n)},_applyColorFromInput(e){const{editAlphaChannel:n}=this.option();return new Do(e).colorIsInvalid?(this._resetInputValue(),this.option("value")):n?ds.makeRgba(e):e},_clean(){this.callBase(),delete this._shouldSaveEmptyValue},_optionChanged(e){const{value:n}=e,{name:t}=e;switch(t){case"value":this._$colorBoxInputContainer.toggleClass(YF,!n),n?ds.makeTransparentBackground(this._$colorResultPreview,n):this._$colorResultPreview.removeAttr("style"),null===n&&(this._shouldSaveEmptyValue=!0),this._updateColorViewValue(n),this._shouldSaveEmptyValue=!1,this.callBase(e);break;case"applyButtonText":case"cancelButtonText":this.callBase(e),this._popup&&this._addPopupBottomClasses();break;case"editAlphaChannel":case"keyStep":this._colorView&&this._colorView.option(t,n);break;default:this.callBase(e)}}});xt("dxColorBox",$ee);class Gee extends Ox{getCommandKeys(){return this._getKeys(this._owner._commands)}setItemValue(n,t){this._owner._setItemValue(n,t)}setItemEnabled(n,t){this._owner._setItemEnabled(n,t)}setEnabled(n){this._owner._setEnabled(n)}setItemSubItems(n,t){this._owner._setItemSubItems(n,t)}}class QF{constructor(n){this._widget=n}canUpdate(n){return void 0===n}setEnabled(n){this._widget.option("disabled",!n)}setValue(n,t,i,o){"value"in this._widget.option()?this._updateEditorValue(n,t):void 0!==n&&this._updateButtonValue(n),i&&this._updateContextMenuItemValue(i,"",o,n)}setItems(n,t,i){t?this._updateContextMenuItems(t,"",i,n):this._updateEditorItems(n)}_updateContextMenuItems(n,t,i,o){An.updateContextMenuItems(n,t,i,o)}_updateEditorItems(n){"items"in this._widget.option()&&this._widget.option("items",n.map(t=>({value:An.getItemValue(t),text:t.text})))}_updateEditorValue(n,t){this._widget.option("value",n),!this._widget.option("selectedItem")&&t&&this._widget.option("value",t)}_updateButtonValue(n){this._widget.option("iconChecked")&&this._widget.option("iconUnchecked")?this._widget.option("icon",this._widget.option(n?"iconChecked":"iconUnchecked")):this._widget.$element().toggleClass("dx-format-active",n)}_updateContextMenuItemValue(n,t,i,o){An.updateContextMenuItemValue(n,t,i,o)}}class Kee extends QF{constructor(n,t,i,o){super(n),this._indexPath=t,this._rootCommandKey=i,this._rootWidget=o}canUpdate(n){return super.canUpdate(n)||n===this._widget}setEnabled(n){this._widget.option(this._getItemOptionText()+"disabled",!n);const t=this._hasEnabledCommandItems(this._widget.option("items"));this._rootWidget.option("disabled",!t)}_hasEnabledCommandItems(n){return!!n&&n.some(t=>void 0!==t.command&&!t.disabled||this._hasEnabledCommandItems(t.items))}setValue(n){this._updateContextMenuItemValue(this._widget,this._getItemOptionText(),this._rootCommandKey,n)}setItems(n){this._updateContextMenuItems(this._widget,this._getItemOptionText(),this._rootCommandKey,n)}_getItemOptionText(){return An.getItemOptionText(this._widget,this._indexPath)}}const dd=class Wee extends rF{_init(){this._commands=[],this._itemHelpers={},this._commandContextMenus={},this._contextMenuList=[],this._valueConverters={},this.bar=new Gee(this),this._createOnInternalCommand(),this._createOnCustomCommand(),this._createOnSubMenuVisibilityChangingAction(),super._init()}_initMarkup(){super._initMarkup();const n=!Ke();!this.option("skipAdjustSize")&&!n&&Jv(this.$element(),""),this._commands=this._getCommands(),this._itemHelpers={},this._commandContextMenus={},this._contextMenuList=[];const t=this._createMainElement();if(this._renderToolbar(t),!this.option("skipAdjustSize")&&!n){const i=this.$element().find(".dx-toolbar-before");Jv(this.$element(),Xe(i))}}_createMainElement(){return V("<div>").addClass("dx-diagram-toolbar").appendTo(this._$element)}_getCommands(){return this.option("commands")||[]}_renderToolbar(n){const t=this._commands.filter(c=>-1===["after","center"].indexOf(c.location)),i=this._commands.filter(c=>"center"===c.location),o=this._commands.filter(c=>"after"===c.location),r=[].concat(this._prepareToolbarItems(t,"before",this._executeCommand)).concat(this._prepareToolbarItems(i,"center",this._executeCommand)).concat(this._prepareToolbarItems(o,"after",this._executeCommand));this._toolbarInstance=this._createComponent(n,sQ,{dataSource:r})}_prepareToolbarItems(n,t,i){return n.map(o=>pe(!0,{location:t,locateInMenu:this.option("locateInMenu")},this._createItem(o,t,i),this._createItemOptions(o),this._createItemActionOptions(o,i)))}_createItem(n,t,i){return(n.getCommandValue||n.getEditorValue||n.getEditorDisplayValue)&&(this._valueConverters[n.command]={getCommandValue:n.getCommandValue,getEditorValue:n.getEditorValue,getEditorDisplayValue:n.getEditorDisplayValue}),"separator"===n.widget?{template:(o,r,c)=>{V(c).addClass("dx-diagram-toolbar-separator")},menuItemTemplate:(o,r,c)=>{V(c).addClass("dx-diagram-toolbar-menu-separator")}}:{widget:n.widget||"dxButton",cssClass:n.cssClass,options:{stylingMode:this.option("buttonStylingMode"),type:this.option("buttonType"),text:n.text,hint:n.hint,icon:n.icon||n.iconUnchecked||n.iconChecked,iconChecked:n.iconChecked,iconUnchecked:n.iconUnchecked,onInitialized:o=>this._onItemInitialized(o.component,n),onContentReady:o=>this._onItemContentReady(o.component,n,i)}}}_createItemOptions(n){let{widget:t,command:i,items:o,valueExpr:r,displayExpr:c,showText:v,hint:S,icon:T}=n;return"dxSelectBox"===t?this._createSelectBoxItemOptions(i,S,o,r,c):"dxTextBox"===t?this._createTextBoxItemOptions(i,S):"dxColorBox"===t?this._createColorBoxItemOptions(i,S,T):t&&"dxButton"!==t?void 0:{showText:v||"inMenu"}}_createSelectBoxItemOptions(n,t,i,o,r){let c=this._createTextEditorItemOptions(t);return c=pe(!0,c,{options:{dataSource:i,displayExpr:r||"text",valueExpr:o||"value"}}),i&&i.every(S=>void 0!==S.icon)&&(c=pe(!0,c,{options:{fieldTemplate:(S,T)=>{V("<i>").addClass(S&&S.icon||"dx-diagram-i-selectbox-null-icon dx-diagram-i").appendTo(T),V("<div>").dxTextBox({readOnly:!0,stylingMode:"outlined"}).appendTo(T)},itemTemplate:(S,T,F)=>(V(F).attr("title",S.hint),`<i class="${S.icon}"></i>`)}})),c}_createTextBoxItemOptions(n,t){let i=this._createTextEditorItemOptions(t);return i=pe(!0,i,{options:{readOnly:!0,focusStateEnabled:!1,hoverStateEnabled:!1,buttons:[{name:"dropDown",location:"after",options:{icon:"spindown",disabled:!1,stylingMode:"text",onClick:o=>{const r=this._commandContextMenus[n];r&&this._toggleContextMenu(r)}}}]}}),i}_createColorBoxItemOptions(n,t,i){let o=this._createTextEditorItemOptions(t);return i&&(o=pe(!0,o,{options:{openOnFieldClick:!0,fieldTemplate:(r,c)=>{V("<i>").addClass(i).css("borderBottomColor",r).appendTo(c),V("<div>").dxTextBox({readOnly:!0,stylingMode:"outlined"}).appendTo(c)}}})),o=pe(!0,o,{options:{onOpened:()=>{this.option("isMobileView")&&V("body").addClass("dx-diagram-mobile-toolbar-color-box-opened")},onClosed:()=>{V("body").removeClass("dx-diagram-mobile-toolbar-color-box-opened")}}}),o}_createTextEditorItemOptions(n){return{options:{stylingMode:this.option("editorStylingMode"),hint:n}}}_createItemActionOptions(n,t){switch(n.widget){case"dxSelectBox":case"dxColorBox":case"dxCheckBox":return{options:{onValueChanged:i=>{const o=An.getItemCommandParameter(this,n,i.component.option("value"));t.call(this,n.command,n.name,o)}}};case"dxTextBox":return{};default:return{options:{onClick:i=>{if(n.items){const o=i.component._contextMenu;o&&this._toggleContextMenu(o)}else{const o=An.getItemCommandParameter(this,n);t.call(this,n.command,n.name,o)}}}}}}_toggleContextMenu(n){this._contextMenuList.forEach(t=>{n!==t&&t.hide()}),n.toggle()}_onItemInitialized(n,t){this._addItemHelper(t.command,new QF(n))}_onItemContentReady(n,t,i){if(("dxButton"===n.NAME||"dxTextBox"===n.NAME)&&t.items){const o=this._isTouchMode(),r=V("<div>").appendTo(this.$element());n._contextMenu=this._createComponent(r,iF,{items:t.items,target:n.$element(),cssClass:An.getContextMenuCssClass(),showEvent:"",hideOnOutsideClick:c=>!o&&0===V(c.target).closest(n._contextMenu._dropDownButtonElement).length,focusStateEnabled:!1,position:{at:"left bottom"},itemTemplate:function(c,v,S){An.getContextMenuItemTemplate(this,c,v,S)},onItemClick:c=>{let{component:v,itemData:S}=c;An.onContextMenuItemClick(this,S,i.bind(this)),(!S.items||!S.items.length)&&v.hide()},onShowing:c=>{this._showingSubMenu||(this._showingSubMenu=c.component,this._onSubMenuVisibilityChangingAction({visible:!0,component:this}),c.component.option("items",c.component.option("items")),delete this._showingSubMenu)},onInitialized:c=>{let{component:v}=c;return this._onContextMenuInitialized(v,t,n)},onDisposing:c=>{let{component:v}=c;return this._onContextMenuDisposing(v,t)}}),o||(n._contextMenu._dropDownButtonElement=n.$element(),"dxTextBox"===n.NAME&&(n._contextMenu._dropDownButtonElement=n.getButton("dropDown").element()))}}_isTouchMode(){const{Browser:n}=Ze();return n.TouchUI}_onContextMenuInitialized(n,t,i){this._contextMenuList.push(n),t.command&&(this._commandContextMenus[t.command]=n),this._addContextMenuHelper(t,n,[],i)}_addItemHelper(n,t){if(void 0!==n){if(this._itemHelpers[n])throw new Error("Toolbar cannot contain duplicated commands.");this._itemHelpers[n]=t}}_addContextMenuHelper(n,t,i,o){n.items&&n.items.forEach((r,c)=>{const v=i.concat(c);this._addItemHelper(r.command,new Kee(t,v,r.command,o)),this._addContextMenuHelper(r,t,v,o)})}_onContextMenuDisposing(n,t){this._contextMenuList.splice(this._contextMenuList.indexOf(n),1),delete this._commandContextMenus[t.command]}_executeCommand(n,t,i){if(!this._updateLocked){if("number"==typeof n){const o=this._valueConverters[n];o&&o.getCommandValue&&(i=o.getCommandValue(i)),this.bar.raiseBarCommandExecuted(n,i)}else"string"==typeof n&&this._onInternalCommandAction({command:n});void 0!==t&&this._onCustomCommandAction({name:t})}}_createOnInternalCommand(){this._onInternalCommandAction=this._createActionByOption("onInternalCommand")}_createOnCustomCommand(){this._onCustomCommandAction=this._createActionByOption("onCustomCommand")}_setItemEnabled(n,t){if(n in this._itemHelpers){const i=this._itemHelpers[n];i.canUpdate(this._showingSubMenu)&&i.setEnabled(t)}}_setEnabled(n){this._toolbarInstance.option("disabled",!n),this._contextMenuList.forEach(t=>{t.option("disabled",!n)})}_setItemValue(n,t){try{if(this._updateLocked=!0,n in this._itemHelpers){const i=this._itemHelpers[n];if(i.canUpdate(this._showingSubMenu)){const o=this._valueConverters[n];let r;o&&o.getEditorValue&&(t=o.getEditorValue(t)),o&&o.getEditorDisplayValue&&(r=o.getEditorDisplayValue(t));const c=this._commandContextMenus[n];i.setValue(t,r,c,c&&n)}}}finally{this._updateLocked=!1}}_setItemSubItems(n,t){if(this._updateLocked=!0,n in this._itemHelpers){const i=this._itemHelpers[n];if(i.canUpdate(this._showingSubMenu)){const o=this._commandContextMenus[n];i.setItems(t,o,o&&n)}}this._updateLocked=!1}_createOnSubMenuVisibilityChangingAction(){this._onSubMenuVisibilityChangingAction=this._createActionByOption("onSubMenuVisibilityChanging")}_optionChanged(n){switch(n.name){case"isMobileView":V("body").removeClass("dx-diagram-mobile-toolbar-color-box-opened"),this._invalidate();break;case"onSubMenuVisibilityChanging":this._createOnSubMenuVisibilityChangingAction();break;case"onInternalCommand":this._createOnInternalCommand();break;case"onCustomCommand":this._createOnCustomCommand();break;case"container":case"commands":this._invalidate();break;case"export":break;default:super._optionChanged(n)}}_getDefaultOptions(){return pe(super._getDefaultOptions(),{isMobileView:!1,export:{fileName:"Diagram"},locateInMenu:"auto",buttonStylingMode:"text",buttonType:"normal",editorStylingMode:"filled",skipAdjustSize:!1})}setCommandChecked(n,t){this._setItemValue(n,t)}setCommandEnabled(n,t){this._setItemEnabled(n,t)}},hs=ot(),Lx=hl(),JF={EXCEL:"xlsx",CSS:"css",PNG:"png",JPEG:"jpeg",GIF:"gif",SVG:"svg",PDF:"pdf"},qee={CSS:"text/css",EXCEL:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",PNG:"image/png",JPEG:"image/jpeg",GIF:"image/gif",SVG:"image/svg+xml",PDF:"application/pdf"},Zee={_revokeObjectURLTimeout:3e4,_getDataUri:function(e,n){return`data:${this._getMimeType(e)};base64,${n}`},_getMimeType:function(e){return qee[e]||"application/octet-stream"},_linkDownloader:function(e,n){const t=Pe.createElement("a");return t.download=e,t.href=n,t.target="_blank",t},_winJSBlobSave:function(e,n,t){const i=new Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=Windows.Storage.Pickers.PickerLocationId.documentsLibrary;const o=JF[t];if(o){const r=this._getMimeType(t);i.fileTypeChoices.insert(r,["."+o])}i.suggestedFileName=n,i.pickSaveFileAsync().then(function(r){r&&r.openAsync(Windows.Storage.FileAccessMode.readWrite).then(function(c){const v=e.msDetachStream();Windows.Storage.Streams.RandomAccessStream.copyAsync(v,c).then(function(){c.flushAsync().done(function(){v.close(),c.close()})})})})},_click:function(e){try{e.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}catch{const t=Pe.getDocument().createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,hs,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}},_saveBlobAs:function(e,n,t){if(this._blobSaved=!1,Ie(Lx.msSaveOrOpenBlob))Lx.msSaveOrOpenBlob(t,e),this._blobSaved=!0;else if(Ie(hs.WinJS))this._winJSBlobSave(t,e,n),this._blobSaved=!0;else{const i=hs.URL||hs.webkitURL||hs.mozURL||hs.msURL||hs.oURL;if(Ie(i)){const o=i.createObjectURL(t),r=this._linkDownloader(e,o);setTimeout(()=>{i.revokeObjectURL(o),this._objectUrlRevoked=!0},this._revokeObjectURLTimeout),this._click(r)}else fp.warn("window.URL || window.webkitURL || window.mozURL || window.msURL || window.oURL is not defined")}},saveAs:function(e,n,t){const i=JF[n];if(i&&(e+="."+i),Be(hs.Blob))this._saveBlobAs(e,n,t);else{Ie(Lx.userAgent.match(/iPad/i))||Jt.log("E1034");const o=this._linkDownloader(e,this._getDataUri(n,t));this._click(o)}}},Zf="separator",Nx={widget:Zf},en_LARGE_ICON_ITEM="dx-diagram-lg-icon-item",Vn={SHOW_TOOLBOX_COMMAND_NAME:"toolbox",SHOW_PROPERTIES_PANEL_COMMAND_NAME:"propertiesPanel",getAllCommands:function(){const{DiagramCommand:e}=Ze();return this._allCommands||(this._allCommands={separator:Nx,exportSvg:{command:e.ExportSvg,text:de.format("dxDiagram-commandExportToSvg"),getParameter:n=>t=>this._exportTo(n,t,"SVG","image/svg+xml")},exportPng:{command:e.ExportPng,text:de.format("dxDiagram-commandExportToPng"),getParameter:n=>t=>this._exportTo(n,t,"PNG","image/png")},exportJpg:{command:e.ExportJpg,text:de.format("dxDiagram-commandExportToJpg"),getParameter:n=>t=>this._exportTo(n,t,"JPEG","image/jpeg")},undo:{command:e.Undo,hint:de.format("dxDiagram-commandUndo"),text:de.format("dxDiagram-commandUndo"),icon:"undo",menuIcon:"undo"},redo:{command:e.Redo,hint:de.format("dxDiagram-commandRedo"),text:de.format("dxDiagram-commandRedo"),icon:"redo",menuIcon:"redo"},cut:{command:e.Cut,hint:de.format("dxDiagram-commandCut"),text:de.format("dxDiagram-commandCut"),icon:"cut",menuIcon:"cut"},copy:{command:e.Copy,hint:de.format("dxDiagram-commandCopy"),text:de.format("dxDiagram-commandCopy"),icon:"copy",menuIcon:"copy"},paste:{command:e.PasteInPosition,hint:de.format("dxDiagram-commandPaste"),text:de.format("dxDiagram-commandPaste"),icon:"paste",menuIcon:"paste"},selectAll:{command:e.SelectAll,hint:de.format("dxDiagram-commandSelectAll"),text:de.format("dxDiagram-commandSelectAll"),icon:"dx-diagram-i-button-select-all dx-diagram-i",menuIcon:"dx-diagram-i-menu-select-all dx-diagram-i"},delete:{command:e.Delete,hint:de.format("dxDiagram-commandDelete"),text:de.format("dxDiagram-commandDelete"),icon:"remove",menuIcon:"remove"},fontName:{command:e.FontName,hint:de.format("dxDiagram-commandFontName"),text:de.format("dxDiagram-commandFontName"),widget:"dxSelectBox",items:["Arial","Arial Black","Helvetica","Times New Roman","Courier New","Courier","Verdana","Georgia","Comic Sans MS","Trebuchet MS"].map(n=>({text:n,value:n})),cssClass:"dx-diagram-md-edit-item"},fontSize:{command:e.FontSize,hint:de.format("dxDiagram-commandFontSize"),text:de.format("dxDiagram-commandFontSize"),widget:"dxSelectBox",items:[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72].map(n=>({text:n+"pt",value:n+"pt"})),cssClass:"dx-diagram-sm-edit-item"},bold:{command:e.Bold,hint:de.format("dxDiagram-commandBold"),text:de.format("dxDiagram-commandBold"),icon:"bold",menuIcon:"bold"},italic:{command:e.Italic,hint:de.format("dxDiagram-commandItalic"),text:de.format("dxDiagram-commandItalic"),icon:"italic",menuIcon:"italic"},underline:{command:e.Underline,hint:de.format("dxDiagram-commandUnderline"),text:de.format("dxDiagram-commandUnderline"),icon:"underline",menuIcon:"underline"},fontColor:{command:e.FontColor,text:de.format("dxDiagram-commandTextColor"),hint:de.format("dxDiagram-commandTextColor"),widget:"dxColorBox",icon:"dx-icon dx-icon-color",menuIcon:"dx-icon dx-icon-color",cssClass:"dx-diagram-color-edit-item"},lineColor:{command:e.StrokeColor,text:de.format("dxDiagram-commandLineColor"),hint:de.format("dxDiagram-commandLineColor"),widget:"dxColorBox",icon:"dx-icon dx-icon-background",menuIcon:"dx-icon dx-icon-background",cssClass:"dx-diagram-color-edit-item"},lineWidth:{command:e.StrokeWidth,text:de.format("dxDiagram-commandLineWidth"),hint:de.format("dxDiagram-commandLineWidth"),widget:"dxSelectBox",items:[1,2,3,4,5,6,7,8].map(n=>({text:n+"px",value:n.toString()})),cssClass:"dx-diagram-sm-edit-item"},lineStyle:{command:e.StrokeStyle,text:de.format("dxDiagram-commandLineStyle"),hint:de.format("dxDiagram-commandLineStyle"),widget:"dxSelectBox",items:[{value:"",menuIcon:"dx-diagram-i-line-solid dx-diagram-i",hint:de.format("dxDiagram-commandLineStyleSolid")},{value:"2,2",menuIcon:"dx-diagram-i-line-dotted dx-diagram-i",hint:de.format("dxDiagram-commandLineStyleDotted")},{value:"6,2",menuIcon:"dx-diagram-i-line-dashed dx-diagram-i",hint:de.format("dxDiagram-commandLineStyleDashed")}],cssClass:"dx-diagram-image-dropdown-item"},fillColor:{command:e.FillColor,text:de.format("dxDiagram-commandFillColor"),hint:de.format("dxDiagram-commandFillColor"),widget:"dxColorBox",icon:"dx-diagram-i dx-diagram-i-button-fill",menuIcon:"dx-diagram-i dx-diagram-i-menu-fill",cssClass:"dx-diagram-color-edit-item"},textAlignLeft:{command:e.TextLeftAlign,hint:de.format("dxDiagram-commandAlignLeft"),text:de.format("dxDiagram-commandAlignLeft"),icon:"alignleft",menuIcon:"alignleft"},textAlignCenter:{command:e.TextCenterAlign,hint:de.format("dxDiagram-commandAlignCenter"),text:de.format("dxDiagram-commandAlignCenter"),icon:"aligncenter",menuIcon:"aligncenter"},textAlignRight:{command:e.TextRightAlign,hint:de.format("dxDiagram-commandAlignRight"),text:de.format("dxDiagram-commandAlignRight"),icon:"alignright",menuIcon:"alignright"},lock:{command:e.Lock,hint:de.format("dxDiagram-commandLock"),text:de.format("dxDiagram-commandLock"),icon:"dx-diagram-i-button-lock dx-diagram-i",menuIcon:"dx-diagram-i-menu-lock dx-diagram-i"},unlock:{command:e.Unlock,hint:de.format("dxDiagram-commandUnlock"),text:de.format("dxDiagram-commandUnlock"),icon:"dx-diagram-i-button-unlock dx-diagram-i",menuIcon:"dx-diagram-i-menu-unlock dx-diagram-i"},bringToFront:{command:e.BringToFront,hint:de.format("dxDiagram-commandBringToFront"),text:de.format("dxDiagram-commandBringToFront"),icon:"dx-diagram-i-button-bring-to-front dx-diagram-i",menuIcon:"dx-diagram-i-menu-bring-to-front dx-diagram-i"},sendToBack:{command:e.SendToBack,hint:de.format("dxDiagram-commandSendToBack"),text:de.format("dxDiagram-commandSendToBack"),icon:"dx-diagram-i-button-send-to-back dx-diagram-i",menuIcon:"dx-diagram-i-menu-send-to-back dx-diagram-i"},insertShapeImage:{command:e.InsertShapeImage,text:de.format("dxDiagram-commandInsertShapeImage"),icon:"dx-diagram-i-button-image-insert dx-diagram-i",menuIcon:"dx-diagram-i-menu-image-insert dx-diagram-i"},editShapeImage:{command:e.EditShapeImage,text:de.format("dxDiagram-commandEditShapeImage"),icon:"dx-diagram-i-button-image-edit dx-diagram-i",menuIcon:"dx-diagram-i-menu-image-edit dx-diagram-i"},deleteShapeImage:{command:e.DeleteShapeImage,text:de.format("dxDiagram-commandDeleteShapeImage"),icon:"dx-diagram-i-button-image-delete dx-diagram-i",menuIcon:"dx-diagram-i-menu-image-delete dx-diagram-i"},connectorLineType:{command:e.ConnectorLineOption,widget:"dxSelectBox",hint:de.format("dxDiagram-commandConnectorLineType"),text:de.format("dxDiagram-commandConnectorLineType"),items:[{value:0,menuIcon:"dx-diagram-i-connector-straight dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineStraight"),text:de.format("dxDiagram-commandConnectorLineStraight")},{value:1,menuIcon:"dx-diagram-i-connector-orthogonal dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineOrthogonal"),text:de.format("dxDiagram-commandConnectorLineOrthogonal")}],cssClass:"dx-diagram-image-dropdown-item"},connectorLineStart:{command:e.ConnectorStartLineEnding,widget:"dxSelectBox",items:[{value:0,menuIcon:"dx-diagram-i-connector-begin-none dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineNone"),text:de.format("dxDiagram-commandConnectorLineNone")},{value:1,menuIcon:"dx-diagram-i-connector-begin-arrow dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")},{value:2,menuIcon:"dx-diagram-i-connector-begin-outlined-triangle dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")},{value:3,menuIcon:"dx-diagram-i-connector-begin-filled-triangle dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")}],hint:de.format("dxDiagram-commandConnectorLineStart"),text:de.format("dxDiagram-commandConnectorLineStart"),cssClass:"dx-diagram-image-dropdown-item"},connectorLineEnd:{command:e.ConnectorEndLineEnding,widget:"dxSelectBox",items:[{value:0,menuIcon:"dx-diagram-i-connector-end-none dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineNone"),text:de.format("dxDiagram-commandConnectorLineNone")},{value:1,menuIcon:"dx-diagram-i-connector-end-arrow dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")},{value:2,menuIcon:"dx-diagram-i-connector-end-outlined-triangle dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")},{value:3,menuIcon:"dx-diagram-i-connector-end-filled-triangle dx-diagram-i",hint:de.format("dxDiagram-commandConnectorLineArrow"),text:de.format("dxDiagram-commandConnectorLineArrow")}],hint:de.format("dxDiagram-commandConnectorLineEnd"),text:de.format("dxDiagram-commandConnectorLineEnd"),cssClass:"dx-diagram-image-dropdown-item"},layoutTreeTopToBottom:{command:e.AutoLayoutTreeVertical,text:de.format("dxDiagram-commandLayoutTopToBottom"),hint:de.format("dxDiagram-commandLayoutTopToBottom"),icon:"dx-diagram-i-button-layout-tree-tb dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutTreeBottomToTop:{command:e.AutoLayoutTreeVerticalBottomToTop,text:de.format("dxDiagram-commandLayoutBottomToTop"),hint:de.format("dxDiagram-commandLayoutBottomToTop"),icon:"dx-diagram-i-button-layout-tree-bt dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutTreeLeftToRight:{command:e.AutoLayoutTreeHorizontal,text:de.format("dxDiagram-commandLayoutLeftToRight"),hint:de.format("dxDiagram-commandLayoutLeftToRight"),icon:"dx-diagram-i-button-layout-tree-lr dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutTreeRightToLeft:{command:e.AutoLayoutTreeHorizontalRightToLeft,text:de.format("dxDiagram-commandLayoutRightToLeft"),hint:de.format("dxDiagram-commandLayoutRightToLeft"),icon:"dx-diagram-i-button-layout-tree-rl dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutLayeredTopToBottom:{command:e.AutoLayoutLayeredVertical,text:de.format("dxDiagram-commandLayoutTopToBottom"),hint:de.format("dxDiagram-commandLayoutTopToBottom"),icon:"dx-diagram-i-button-layout-layered-tb dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutLayeredBottomToTop:{command:e.AutoLayoutLayeredVerticalBottomToTop,text:de.format("dxDiagram-commandLayoutBottomToTop"),hint:de.format("dxDiagram-commandLayoutBottomToTop"),icon:"dx-diagram-i-button-layout-layered-bt dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutLayeredLeftToRight:{command:e.AutoLayoutLayeredHorizontal,text:de.format("dxDiagram-commandLayoutLeftToRight"),hint:de.format("dxDiagram-commandLayoutLeftToRight"),icon:"dx-diagram-i-button-layout-layered-lr dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},layoutLayeredRightToLeft:{command:e.AutoLayoutLayeredHorizontalRightToLeft,text:de.format("dxDiagram-commandLayoutRightToLeft"),hint:de.format("dxDiagram-commandLayoutRightToLeft"),icon:"dx-diagram-i-button-layout-layered-rl dx-diagram-i",cssClass:en_LARGE_ICON_ITEM},fullScreen:{command:e.Fullscreen,hint:de.format("dxDiagram-commandFullscreen"),text:de.format("dxDiagram-commandFullscreen"),icon:"dx-diagram-i dx-diagram-i-button-fullscreen",menuIcon:"dx-diagram-i dx-diagram-i-menu-fullscreen",cssClass:"dx-diagram-color-edit-item"},units:{command:e.ViewUnits,hint:de.format("dxDiagram-commandUnits"),text:de.format("dxDiagram-commandUnits"),widget:"dxSelectBox"},simpleView:{command:e.ToggleSimpleView,hint:de.format("dxDiagram-commandSimpleView"),text:de.format("dxDiagram-commandSimpleView"),widget:"dxCheckBox"},showGrid:{command:e.ShowGrid,hint:de.format("dxDiagram-commandShowGrid"),text:de.format("dxDiagram-commandShowGrid"),widget:"dxCheckBox"},snapToGrid:{command:e.SnapToGrid,hint:de.format("dxDiagram-commandSnapToGrid"),text:de.format("dxDiagram-commandSnapToGrid"),widget:"dxCheckBox"},gridSize:{command:e.GridSize,hint:de.format("dxDiagram-commandGridSize"),text:de.format("dxDiagram-commandGridSize"),widget:"dxSelectBox"},pageSize:{command:e.PageSize,hint:de.format("dxDiagram-commandPageSize"),text:de.format("dxDiagram-commandPageSize"),widget:"dxSelectBox",cssClass:"dx-diagram-lg-edit-item",getCommandValue:n=>JSON.parse(n),getEditorValue:n=>JSON.stringify(n)},pageOrientation:{command:e.PageLandscape,hint:de.format("dxDiagram-commandPageOrientation"),text:de.format("dxDiagram-commandPageOrientation"),widget:"dxSelectBox",items:[{value:!0,text:de.format("dxDiagram-commandPageOrientationLandscape")},{value:!1,text:de.format("dxDiagram-commandPageOrientationPortrait")}],cssClass:"dx-diagram-md-edit-item"},pageColor:{command:e.PageColor,hint:de.format("dxDiagram-commandPageColor"),text:de.format("dxDiagram-commandPageColor"),widget:"dxColorBox",icon:"dx-diagram-i dx-diagram-i-button-fill",menuIcon:"dx-diagram-i dx-diagram-i-menu-fill",cssClass:"dx-diagram-color-edit-item"},zoomLevel:{command:e.ZoomLevel,hint:de.format("dxDiagram-commandZoomLevel"),text:de.format("dxDiagram-commandZoomLevel"),widget:"dxTextBox",items:[Nx,{command:e.FitToScreen,hint:de.format("dxDiagram-commandFitToContent"),text:de.format("dxDiagram-commandFitToContent")},{command:e.FitToWidth,hint:de.format("dxDiagram-commandFitToWidth"),text:de.format("dxDiagram-commandFitToWidth")},Nx,{command:e.AutoZoomToContent,hint:de.format("dxDiagram-commandAutoZoomByContent"),text:de.format("dxDiagram-commandAutoZoomByContent")},{command:e.AutoZoomToWidth,hint:de.format("dxDiagram-commandAutoZoomByWidth"),text:de.format("dxDiagram-commandAutoZoomByWidth")}],getEditorDisplayValue:n=>Math.round(100*n)+"%",cssClass:"dx-diagram-sm-edit-item"},toolbox:{command:this.SHOW_TOOLBOX_COMMAND_NAME,iconChecked:"dx-diagram-i dx-diagram-i-button-toolbox-close",iconUnchecked:"dx-diagram-i dx-diagram-i-button-toolbox-open",hint:de.format("dxDiagram-uiShowToolbox"),text:de.format("dxDiagram-uiShowToolbox")},propertiesPanel:{command:this.SHOW_PROPERTIES_PANEL_COMMAND_NAME,iconChecked:"close",iconUnchecked:"dx-diagram-i dx-diagram-i-button-properties-panel-open",hint:de.format("dxDiagram-uiProperties"),text:de.format("dxDiagram-uiProperties")}})},getMainToolbarCommands:function(e,n){const t=this.getAllCommands(),i=e?this._getPreparedCommands(t,e):this._getDefaultMainToolbarCommands(t);return this._prepareToolbarCommands(i,n)},_getDefaultMainToolbarCommands:function(e){return this._defaultMainToolbarCommands||(this._defaultMainToolbarCommands=[e.undo,e.redo,e.separator,e.fontName,e.fontSize,e.bold,e.italic,e.underline,e.separator,e.lineWidth,e.lineStyle,e.separator,e.fontColor,e.lineColor,e.fillColor,e.separator,e.textAlignLeft,e.textAlignCenter,e.textAlignRight,e.separator,e.connectorLineType,e.connectorLineStart,e.connectorLineEnd,e.separator,{text:de.format("dxDiagram-uiLayout"),showText:"always",items:[{text:de.format("dxDiagram-uiLayoutTree"),items:[e.layoutTreeTopToBottom,e.layoutTreeBottomToTop,e.layoutTreeLeftToRight,e.layoutTreeRightToLeft]},{text:de.format("dxDiagram-uiLayoutLayered"),items:[e.layoutLayeredTopToBottom,e.layoutLayeredBottomToTop,e.layoutLayeredLeftToRight,e.layoutLayeredRightToLeft]}]}])},getHistoryToolbarCommands:function(e,n){const t=this.getAllCommands(),i=e?this._getPreparedCommands(t,e):this._getDefaultHistoryToolbarCommands(t);return this._prepareToolbarCommands(i,n)},_getDefaultHistoryToolbarCommands:function(e){return this._defaultHistoryToolbarCommands||(this._defaultHistoryToolbarCommands=[e.undo,e.redo,e.separator,e.toolbox])},getViewToolbarCommands:function(e,n){const t=this.getAllCommands(),i=e?this._getPreparedCommands(t,e):this._getDefaultViewToolbarCommands(t);return this._prepareToolbarCommands(i,n)},_getDefaultViewToolbarCommands:function(e){return this._defaultViewToolbarCommands||(this._defaultViewToolbarCommands=[e.zoomLevel,e.separator,e.fullScreen,e.separator,{widget:"dxButton",icon:"export",text:de.format("dxDiagram-uiExport"),hint:de.format("dxDiagram-uiExport"),items:[e.exportSvg,e.exportPng,e.exportJpg]},{icon:"preferences",hint:de.format("dxDiagram-uiSettings"),text:de.format("dxDiagram-uiSettings"),items:[e.units,e.separator,e.showGrid,e.snapToGrid,e.gridSize,e.separator,e.simpleView,e.toolbox]}])},getPropertiesToolbarCommands:function(e,n){const t=this.getAllCommands(),i=e?this._getPreparedCommands(t,e):this._getDefaultPropertiesToolbarCommands(t);return this._prepareToolbarCommands(i,n)},_getDefaultPropertiesToolbarCommands:function(e){return this._defaultPropertiesToolbarCommands||(this._defaultPropertiesToolbarCommands=[e.propertiesPanel])},_getDefaultPropertyPanelCommandGroups:function(){return this._defaultPropertyPanelCommandGroups||(this._defaultPropertyPanelCommandGroups=[{title:de.format("dxDiagram-uiStyle"),groups:[{title:de.format("dxDiagram-uiText"),commands:["fontName","fontSize","bold","italic","underline","textAlignLeft","textAlignCenter","textAlignRight","fontColor"]},{title:de.format("dxDiagram-uiObject"),commands:["lineStyle","lineWidth","lineColor","fillColor"]},{title:de.format("dxDiagram-uiConnector"),commands:["connectorLineType","connectorLineStart","connectorLineEnd"]}]},{title:de.format("dxDiagram-uiLayout"),groups:[{title:de.format("dxDiagram-uiLayoutLayered"),commands:["layoutLayeredTopToBottom","layoutLayeredBottomToTop","layoutLayeredLeftToRight","layoutLayeredRightToLeft"]},{title:de.format("dxDiagram-uiLayoutTree"),commands:["layoutTreeTopToBottom","layoutTreeBottomToTop","layoutTreeLeftToRight","layoutTreeRightToLeft"]}]},{title:de.format("dxDiagram-uiDiagram"),groups:[{title:de.format("dxDiagram-uiPage"),commands:["pageSize","pageOrientation","pageColor"]}]}])},_preparePropertyPanelGroups:function(e){const n=this.getAllCommands(),t=[];return e.forEach(i=>{let r,o=i.commands;o&&(o=this._getPreparedCommands(n,o),o=this._prepareToolbarCommands(o)),i.groups&&(r=[],i.groups.forEach(c=>{let v=c.commands;v&&(v=this._getPreparedCommands(n,v),v=this._prepareToolbarCommands(v)),r.push({title:c.title,commands:v})})),t.push({title:i.title,commands:o,groups:r})}),t},getPropertyPanelCommandTabs:function(e){return e=e||this._getDefaultPropertyPanelCommandGroups(),this._preparePropertyPanelGroups(e)},getContextMenuCommands:function(e){const n=this.getAllCommands(),t=e?this._getPreparedCommands(n,e):this._getDefaultContextMenuCommands(n);return this._prepareContextMenuCommands(t)},_getDefaultContextMenuCommands:function(e){return this._defaultContextMenuCommands||(this._defaultContextMenuCommands=[e.cut,e.copy,e.paste,e.delete,e.separator,e.selectAll,e.separator,e.bringToFront,e.sendToBack,e.separator,e.lock,e.unlock,e.separator,e.insertShapeImage,e.editShapeImage,e.deleteShapeImage])},_getPreparedCommands(e,n){return n.map(t=>{if(t.widget&&t.widget===Zf)return{command:t,location:t.location};if(e[t])return e[t];if(t.text||t.icon||t.name){const i=t.name&&e[t.name],o={command:i&&i.command,name:t.name,location:t.location,text:t.text||i&&i.text,hint:t.text||i&&i.hint,icon:t.icon||i&&i.icon,menuIcon:t.icon||i&&i.menuIcon,widget:i&&i.widget,cssClass:i&&i.cssClass,getParameter:i&&i.getParameter,getCommandValue:i&&i.getCommandValue,getEditorValue:i&&i.getEditorValue,getEditorDisplayValue:i&&i.getEditorDisplayValue,iconChecked:i&&i.iconChecked,iconUnchecked:i&&i.iconUnchecked};return o.items=Array.isArray(t.items)?this._getPreparedCommands(e,t.items):i&&i.items,o}}).filter(t=>t)},_prepareContextMenuCommands(e,n,t){let i=!1;return e.map(o=>{if(this._isValidCommand(o,n)){if(!o.widget||o.widget!==Zf){const r=this._cloneCommand(o,n);return r.icon=r.menuIcon,r.beginGroup=i,r.rootCommand=r.command?void 0:t&&t.command,i=!1,r}i=!0}}).filter(o=>o)},_prepareToolbarCommands(e,n){return e.map(t=>{if(this._isValidCommand(t,n))return this._cloneCommand(t,n)}).filter(t=>t).filter((t,i,o)=>(t.widget!==Zf||i!==o.length-1)&&t)},_cloneCommand(e,n){const t=pe({},e);return Array.isArray(e.items)&&(t.items=this._prepareContextMenuCommands(e.items,n,t)),t},_isValidCommand:(e,n)=>-1===(n=n||[]).indexOf(e.command),_exportTo(e,n,t,i){const o=ot();if(o&&o.atob&&Be(o.Blob)){const r=this._getBlobByDataURI(o,n,i),c=e.option("export");Zee.saveAs(c.fileName||"foo",t,r)}},_getBlobByDataURI(e,n,t){const i=e.atob(n.split(",")[1]),o=new Uint8Array(i.length);for(let r=0;r<i.length;r++)o[r]=i.charCodeAt(r);return new e.Blob([o.buffer],{type:t})}},Yee=class Xee extends dd{_getCommands(){return Vn.getMainToolbarCommands(this.option("commands"),this.option("excludeCommands"))}},Jee=class Qee extends dd{_getCommands(){return Vn.getHistoryToolbarCommands(this.option("commands"),this._getExcludeCommands())}_getExcludeCommands(){const n=[].concat(this.option("excludeCommands"));return this.option("isMobileView")||n.push(Vn.SHOW_TOOLBOX_COMMAND_NAME),n}},tte=class ete extends dd{_getCommands(){return Vn.getViewToolbarCommands(this.option("commands"),this.option("excludeCommands"))}},ite=class nte extends dd{_getCommands(){return Vn.getPropertiesToolbarCommands()}};class e1 extends iF{_renderContextMenuOverlay(){super._renderContextMenuOverlay(),this._overlay&&this.option("isTouchBarMode")&&this._overlay&&this._overlay.option("onShown",()=>{V(this._overlay.$content()).parent().addClass("dx-diagram-touchbar-overlay")})}}class rte extends Ox{constructor(n){super(n)}getCommandKeys(){return this._getKeys(this._owner._commands)}setItemValue(n,t){this._owner._setItemValue(n,t)}setItemEnabled(n,t){this._owner._setItemEnabled(n,t)}setItemVisible(n,t){this._owner._setItemVisible(n,t)}setItemSubItems(n,t){this._owner._setItemSubItems(n,t)}setEnabled(n){this._owner._setEnabled(n)}isVisible(){return this._owner.isVisible()}}const ste_DiagramContextMenuWrapper=class ote extends vi{_init(){super._init(),this._createOnVisibilityChangingAction(),this._createOnInternalCommand(),this._createOnCustomCommand(),this._createOnItemClickAction(),this._tempState=void 0,this._commands=[],this._commandToIndexMap={},this.bar=new rte(this)}_initMarkup(){super._initMarkup(),this._commands=this._getCommands(),this._commandToIndexMap={},this._fillCommandToIndexMap(this._commands,[]),this._$contextMenuTargetElement=V("<div>").addClass("dx-diagram-touchbar-target").appendTo(this.$element());const n=V("<div>").appendTo(this.$element());this._contextMenuInstance=this._createComponent(n,e1,{isTouchBarMode:this._isTouchBarMode(),cssClass:this._isTouchBarMode()?"dx-diagram-touchbar":An.getContextMenuCssClass(),hideOnOutsideClick:!1,showEvent:"",focusStateEnabled:!1,items:this._commands,position:this._isTouchBarMode()?{my:{x:"center",y:"bottom"},at:{x:"center",y:"top"},of:this._$contextMenuTargetElement}:{},itemTemplate:function(t,i,o){An.getContextMenuItemTemplate(this,t,i,o)},onItemClick:t=>{let{itemData:i}=t;return this._onItemClick(i)},onShowing:t=>{!0!==this._inOnShowing&&(this._inOnShowing=!0,this._onVisibilityChangingAction({visible:!0,component:this}),t.component.option("items",t.component.option("items")),delete this._inOnShowing)}})}_show(n,t,i){if(this._contextMenuInstance.hide(),this._isTouchBarMode()){this._$contextMenuTargetElement.show(),i||(i={x:n,y:t,width:0,height:0});const o=i.width>800?0:(800-i.width)/2;this._$contextMenuTargetElement.css({left:i.x-o,top:i.y-32,width:i.width+2*o,height:i.height+64}),this._contextMenuInstance.show()}else this._contextMenuInstance.option("position",{offset:n+" "+t}),this._contextMenuInstance.show()}_hide(){this._$contextMenuTargetElement.hide(),this._contextMenuInstance.hide()}_isTouchBarMode(){const{Browser:n}=Ze();return n.TouchUI}_onItemClick(n){let t=!1;this._onItemClickAction&&(t=this._onItemClickAction(n)),t||(An.onContextMenuItemClick(this,n,this._executeCommand.bind(this)),this._contextMenuInstance.hide())}_executeCommand(n,t,i){"number"==typeof n?this.bar.raiseBarCommandExecuted(n,i):"string"==typeof n&&this._onInternalCommandAction({command:n}),void 0!==t&&this._onCustomCommandAction({name:t})}_createOnInternalCommand(){this._onInternalCommandAction=this._createActionByOption("onInternalCommand")}_createOnCustomCommand(){this._onCustomCommandAction=this._createActionByOption("onCustomCommand")}_getCommands(){return Vn.getContextMenuCommands(this.option("commands"))}_fillCommandToIndexMap(n,t){n.forEach((i,o)=>{const r=t.concat([o]);void 0!==i.command&&(this._commandToIndexMap[i.command]=r),Array.isArray(i.items)&&this._fillCommandToIndexMap(i.items,r)})}_setItemEnabled(n,t){this._setItemVisible(n,t)}_setItemVisible(n,t){const i=An.getItemOptionText(this._contextMenuInstance,this._commandToIndexMap[n]);An.updateContextMenuItemVisible(this._contextMenuInstance,i,t)}_setItemValue(n,t){const i=An.getItemOptionText(this._contextMenuInstance,this._commandToIndexMap[n]);An.updateContextMenuItemValue(this._contextMenuInstance,i,n,t)}_setItemSubItems(n,t){const i=An.getItemOptionText(this._contextMenuInstance,this._commandToIndexMap[n]);An.updateContextMenuItems(this._contextMenuInstance,i,n,t)}_setEnabled(n){this._contextMenuInstance.option("disabled",!n)}isVisible(){return this._inOnShowing}_createOnVisibilityChangingAction(){this._onVisibilityChangingAction=this._createActionByOption("onVisibilityChanging")}_createOnItemClickAction(){this._onItemClickAction=this._createActionByOption("onItemClick")}_optionChanged(n){switch(n.name){case"onVisibilityChanging":this._createOnVisibilityChangingAction();break;case"onInternalCommand":this._createOnInternalCommand();break;case"onCustomCommand":this._createOnCustomCommand();break;case"onItemClick":this._createOnItemClickAction();break;case"commands":this._invalidate();break;case"export":break;default:super._optionChanged(n)}}},t1={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},lte=["shading","target","$arrow"],Fr={left:-1,top:-1,center:0,right:1,bottom:1},o1={top:{my:"bottom center",at:"top center",collision:"fit flip"},bottom:{my:"top center",at:"bottom center",collision:"fit flip"},right:{my:"left center",at:"right center",collision:"flip fit"},left:{my:"right center",at:"left center",collision:"flip fit"}},cte={h:10,v:10};class ute extends EC{constructor(n){let{shading:t,target:i,$arrow:o}=n;super(ai(n,lte)),this._props=He({},this._props,{shading:t,target:i}),this._$arrow=o,this._positionSide=void 0,this.updatePosition(this._props.position)}positionWrapper(){this._props.shading&&this._$wrapper.css({top:0,left:0})}updateTarget(n){this._props.target=n,this.updatePosition(this._props.position)}_renderBoundaryOffset(){}_getContainerPosition(){const n=Gv(this._position.offset||"");let{h:t,v:i}=n;const o=this._isVerticalSide(),r=this._isHorizontalSide();if(o||r){const F=(this._isPopoverInside()?-1:1)*Fr[this._positionSide]*((o?ut(this._$arrow):Xe(this._$arrow))-this._getContentBorderWidth(this._positionSide));o?i+=F:t+=F}return pe({},this._position,{offset:`${t} ${i}`})}_getContentBorderWidth(n){const t=this._$content.css(t1[n]);return parseInt(t)||0}_isPopoverInside(){const n=Dn.setup.normalizeAlign(this._position.my),t=Dn.setup.normalizeAlign(this._position.at);return n.h===t.h&&n.v===t.v}_isVerticalSide(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"top"===n||"bottom"===n}_isHorizontalSide(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._positionSide;return"left"===n||"right"===n}_getDisplaySide(n){const t=Dn.setup.normalizeAlign(n.my),i=Dn.setup.normalizeAlign(n.at),o=Fr[t.h]===Fr[i.h]&&Fr[t.v]===Fr[i.v]?-1:1;return Math.abs(Fr[t.h]-o*Fr[i.h])>Math.abs(Fr[t.v]-o*Fr[i.v])?i.h:i.v}_normalizePosition(n){const t={of:this._props.target,boundaryOffset:cte};let i;return i=Ie(n)?pe(!0,{},t,this._positionToObject(n)):t,this._positionSide=this._getDisplaySide(i),i}_positionToObject(n){return _t(n)?pe({},o1[n]):n}}const r1={left:"right",top:"bottom",right:"left",bottom:"top",center:"center"},s1=function(e){return dt(e)?e.name:e},a1=function(e,n){const t=e.option(n);return s1(t)},Hx=function(e,n){const{target:t,shading:i,disabled:o,hideEvent:r}=e.option(),c=_t(t),v=i&&"hide"===n,S=v?null:a1(e,`${n}Event`);if(v&&r&&Jt.log("W1020"),!S||o)return;const T=Te(S,e.NAME),F=e._createAction(function(){const X=function(e,n){const t=e.option(n);return dt(t)&&t.delay}(e,`${n}Event`);this._clearEventsTimeouts(),X?this._timeouts[n]=setTimeout(()=>{e[n]()},X):e[n]()}.bind(e),{validatingTargetName:"target"}),N=function(X){F({event:X,target:V(X.currentTarget)})},B=`_${n}EventHandler`;if(c)e[B]=N,ue.on(Pe.getDocument(),T,t,N);else{const X=st(V(t));e[B]=void 0,ue.on(X,T,N)}},Bx=function(e,n,t,i){let o=i||a1(e,`${t}Event`);if(!o)return;o=Te(o,e.NAME);const r=`_${t}EventHandler`;e[r]?ue.off(Pe.getDocument(),o,n,e[r]):ue.off(st(V(n)),o)},l1=Tf.inherit({_getDefaultOptions(){return pe(this.callBase(),{target:void 0,shading:!1,position:pe({},o1.bottom),hideOnOutsideClick:!0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",from:1,to:0}},showTitle:!1,width:"auto",height:"auto",dragEnabled:!1,resizeEnabled:!1,fullScreen:!1,hideOnParentScroll:!0,arrowPosition:"",arrowOffset:0,_fixWrapperPosition:!0})},_defaultOptionsRules:()=>[{device:{platform:"ios"},options:{arrowPosition:{boundaryOffset:{h:20,v:-10},collision:"fit"}}},{device:()=>!Ke(),options:{animation:null}},{device:()=>ki(),options:{useFlatToolbarButtons:!0}},{device:()=>Fi(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}],_init(){var e;this.callBase(),this._renderArrow(),this._timeouts={},this.$element().addClass("dx-popover"),this.$wrapper().addClass("dx-popover-wrapper");const n=null===(e=this.option("toolbarItems"))||void 0===e?void 0:e.length;this.setAria("role",n?"dialog":"tooltip")},_render(){this.callBase.apply(this,arguments),this._detachEvents(this.option("target")),this._attachEvents()},_detachEvents(e){Bx(this,e,"show"),Bx(this,e,"hide")},_attachEvents(){Hx(this,"show"),Hx(this,"hide")},_renderArrow(){this._$arrow=V("<div>").addClass("dx-popover-arrow").prependTo(this.$overlayContent())},_documentDownHandler(e){return!this._isOutsideClick(e)||this.callBase(e)},_isOutsideClick(e){return!V(e.target).closest(this.option("target")).length},_animate(e){e&&e.to&&"object"==typeof e.to&&pe(e.to,{position:this._getContainerPosition()}),this.callBase.apply(this,arguments)},_stopAnimation(){this.callBase.apply(this,arguments)},_renderTitle(){this.$wrapper().toggleClass("dx-popover-without-title",!this.option("showTitle")),this.callBase()},_renderPosition(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.callBase(),this._renderOverlayPosition(e),this._actions.onPositioned()},_renderOverlayPosition(e){this._resetOverlayPosition(e),this._updateContentSize(e);const n=this._getContainerPosition(),t=Dn.setup(this.$overlayContent(),n),i=this._getSideByLocation(t);this._togglePositionClass(`dx-position-${i}`),this._toggleFlippedClass(t.h.flip,t.v.flip),(this._isHorizontalSide()||this._isVerticalSide())&&this._renderArrowPosition(i)},_resetOverlayPosition(e){this._setContentHeight(e),this._togglePositionClass(`dx-position-${this._positionController._positionSide}`),Tn(this.$overlayContent(),{left:0,top:0}),this._$arrow.css({top:"auto",right:"auto",bottom:"auto",left:"auto"})},_updateContentSize(e){if(!this.$content()||!e)return;const n=Dn.calculate(this.$overlayContent(),this._getContainerPosition());if(n.h.oversize>0&&this._isHorizontalSide()&&!n.h.fit){const t=Xe(this.$overlayContent())-n.h.oversize;Jv(this.$overlayContent(),t)}if(n.v.oversize>0&&this._isVerticalSide()&&!n.v.fit){const t=ut(this.$overlayContent())-n.v.oversize,i=ut(this.$content())-n.v.oversize;lu(this.$overlayContent(),t),lu(this.$content(),i)}},_getContainerPosition(){return this._positionController._getContainerPosition()},_getHideOnParentScrollTarget(){return V(this._positionController._position.of||this.callBase())},_getSideByLocation(e){const n=e.v.flip,t=e.h.flip;return this._isVerticalSide()&&n||this._isHorizontalSide()&&t||this._isPopoverInside()?r1[this._positionController._positionSide]:this._positionController._positionSide},_togglePositionClass(e){this.$wrapper().removeClass("dx-position-left dx-position-right dx-position-top dx-position-bottom").addClass(e)},_toggleFlippedClass(e,n){this.$wrapper().toggleClass("dx-popover-flipped-horizontal",e).toggleClass("dx-popover-flipped-vertical",n)},_renderArrowPosition(e){const n=Li(this._$arrow.get(0)),t=-(this._isVerticalSide(e)?n.height:n.width);this._$arrow.css(r1[e],t);const i=this._isVerticalSide(e)?"left":"top",o=this._isVerticalSide(e)?"width":"height",r=V(this._positionController._position.of),c=Dn.offset(r)||{top:0,left:0},v=Dn.offset(this.$overlayContent()),S=n[o],T=v[i],F=Li(this.$overlayContent().get(0))[o],N=c[i],B=r.get(0),X=B&&!B.preventDefault?Li(B)[o]:0,ne=Math.max(T,N),le=Math.min(T+F,N+X);let he;he="start"===this.option("arrowPosition")?ne-T:"end"===this.option("arrowPosition")?le-T-S:(ne+le)/2-T-S/2;const Oe=this._positionController._getContentBorderWidth(e),_e=Ci(he-Oe+this.option("arrowOffset"),Oe,F-S-2*Oe);this._$arrow.css(i,_e)},_isPopoverInside(){return this._positionController._isPopoverInside()},_setContentHeight(e){e&&this.callBase()},_getPositionControllerConfig(){const{shading:e,target:n}=this.option();return pe({},this.callBase(),{target:n,shading:e,$arrow:this._$arrow})},_initPositionController(){this._positionController=new ute(this._getPositionControllerConfig())},_renderWrapperDimensions(){this.option("shading")&&this.$wrapper().css({width:"100%",height:"100%"})},_isVerticalSide(e){return this._positionController._isVerticalSide(e)},_isHorizontalSide(e){return this._positionController._isHorizontalSide(e)},_clearEventTimeout(e){clearTimeout(this._timeouts[e])},_clearEventsTimeouts(){this._clearEventTimeout("show"),this._clearEventTimeout("hide")},_clean(){this._detachEvents(this.option("target")),this.callBase.apply(this,arguments)},_optionChanged(e){switch(e.name){case"arrowPosition":case"arrowOffset":this._renderGeometry();break;case"fullScreen":e.value&&this.option("fullScreen",!1);break;case"target":e.previousValue&&this._detachEvents(e.previousValue),this._positionController.updateTarget(e.value),this._invalidate();break;case"showEvent":case"hideEvent":{const n=e.name.substring(0,4),t=s1(e.previousValue);this.hide(),Bx(this,this.option("target"),n,t),Hx(this,n);break}case"visible":this._clearEventTimeout(e.value?"show":"hide"),this.callBase(e);break;default:this.callBase(e)}},show(e){return e&&this.option("target",e),this.callBase()}});xt("dxPopover",l1);const c1=l1,pte=class hte extends vi{_init(){super._init(),this._onShownAction=this._createActionByOption("onShown");const n=ot();this._popoverPositionData=[{my:{x:"center",y:"top"},at:{x:"center",y:"bottom"},offset:{x:0,y:5},calcMaxHeight:t=>Math.max(150,n.innerHeight-t.bottom-6)},{my:{x:"right",y:"center"},at:{x:"left",y:"center"},offset:{x:-5,y:0},calcMaxHeight:t=>Math.max(150,2*Math.min(t.top,n.innerHeight-t.bottom)-2)},{my:{x:"center",y:"bottom"},at:{x:"center",y:"top"},offset:{x:0,y:-5},calcMaxHeight:t=>Math.max(150,t.top-6)},{my:{x:"left",y:"center"},at:{x:"right",y:"center"},offset:{x:5,y:0},calcMaxHeight:t=>Math.max(150,2*Math.min(t.top,n.innerHeight-t.bottom)-2)}]}_initMarkup(){super._initMarkup(),this._$popoverTargetElement=V("<div>").addClass("dx-diagram-context-toolbox-target").appendTo(this.$element());const n=V("<div>").addClass("dx-diagram-context-toolbox").appendTo(this.$element());this._isTouchMode()&&n.addClass("dx-diagram-touch-context-toolbox"),this._popoverInstance=this._createComponent(n,c1,{hideOnOutsideClick:!1,container:this.$element()})}_isTouchMode(){const{Browser:n}=Ze();return n.TouchUI}_show(n,t,i,o,r){this._popoverInstance.hide(),this._$popoverTargetElement.css({left:n+this._popoverPositionData[i].offset.x,top:t+this._popoverPositionData[i].offset.y}).show();const c=ot(),v=this._$popoverTargetElement.get(0);this._$popoverTargetElement.css({left:v.offsetLeft-(v.getBoundingClientRect().left+c.scrollX-v.offsetLeft),top:v.offsetTop-(v.getBoundingClientRect().top+c.scrollY-v.offsetTop)});const S=v.getBoundingClientRect();this._popoverInstance.option({maxHeight:this._popoverPositionData[i].calcMaxHeight(S),width:void 0!==this.option("toolboxWidth")?this.option("toolboxWidth"):void 0,position:{my:this._popoverPositionData[i].my,at:this._popoverPositionData[i].at,of:this._$popoverTargetElement},contentTemplate:()=>V("<div>").append(V("<div>").addClass("dx-diagram-context-toolbox-content")).dxScrollView({width:"100%",height:"100%"}),onContentReady:()=>{const T=this.$element().find(".dx-diagram-context-toolbox-content");this._onShownAction({category:o,callback:r,$element:T,hide:()=>this._popoverInstance.hide()})}}),this._popoverInstance.show()}_hide(){this._$popoverTargetElement.hide(),this._popoverInstance.hide()}},gte=class fte extends vi{_init(){super._init(),this._command=void 0,this._isShown=!1,this._createOnGetContentOption(),this._createOnHiddenOption()}_initMarkup(){super._initMarkup(),this._command=this.option("command"),this._$popupElement=V("<div>").appendTo(this.$element()),this._popup=this._createComponent(this._$popupElement,Tf,{title:this.option("title"),maxWidth:this.option("maxWidth"),height:this.option("height"),toolbarItems:this.option("toolbarItems"),onHidden:this._onHiddenAction})}_clean(){delete this._popup,this._$popupElement&&this._$popupElement.remove()}_getDefaultOptions(){return pe(super._getDefaultOptions(),{title:"",maxWidth:500,height:"auto",toolbarItems:this._getToolbarItems()})}_getToolbarItems(){return[this._getOkToolbarItem(),this._getCancelToolbarItem()]}_getOkToolbarItem(){return{widget:"dxButton",location:"after",toolbar:"bottom",options:{text:de.format("dxDiagram-dialogButtonOK"),onClick:function(){this._command.execute(this._commandParameter),this._hide()}.bind(this)}}}_getCancelToolbarItem(){return{widget:"dxButton",location:"after",toolbar:"bottom",options:{text:de.format("dxDiagram-dialogButtonCancel"),onClick:this._hide.bind(this)}}}_optionChanged(n){switch(n.name){case"title":case"maxWidth":case"height":case"toolbarItems":this._popup.option(n.name,n.value);break;case"command":this._command=n.value;break;case"onGetContent":this._createOnGetContentOption();break;case"onHidden":this._createOnHiddenOption();break;default:super._optionChanged(n)}}_createOnGetContentOption(){this._onGetContentAction=this._createActionByOption("onGetContent")}_createOnHiddenOption(){this._onHiddenAction=this._createActionByOption("onHidden")}_hide(){this._popup.hide(),this._isShown=!1}_show(){this._popup.$content().empty().append(this._onGetContentAction()),this._popup.show(),this._isShown=!0}isVisible(){return this._isShown}},mte={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,quarter:7776e6,year:31536e6};function Yf(e){return mte[e]}const hd=7,pd=["millisecond","second","minute","hour","day","week","month","quarter","year"],u1=function(e){let n,t,i;const o=["millisecond","second","minute","hour","day","month","year"],r={};for(n=o.length-1;n>=0;n--)i=o[n],t=Math.floor(e/Yf(i)),t>0&&(r[i+"s"]=t,e-=Qf(i,t));return r};function Qf(e,n){return Yf(e)*n}function Jf(e){let t,n=-1;return _t(e)?e:dt(e)?(Ee(e,function(i,o){for(t=0;t<pd.length;t++)o&&(i===pd[t]+"s"||i===pd[t])&&n<t&&(n=t)}),pd[n]):""}const Cte={millisecond:"millisecond",second:"longtime",minute:"shorttime",hour:"shorttime",day:"day",week:"day",month:"month",quarter:"quarter",year:"year"},d1=function(e){return Math.floor(e/3)},h1=function(e){return 3*d1(e)};function p1(e,n,t,i){e=new Date(e.getTime());const o=new Date(e.getTime());let r,c;const v=Jf(n);switch(v){case"second":e=new Date(1e3*Math.floor(o.getTime()/1e3));break;case"minute":e=new Date(6e4*Math.floor(o.getTime()/6e4));break;case"hour":e=new Date(36e5*Math.floor(o.getTime()/36e5));break;case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0,0,0,0);break;case"week":(e=y1(e,i||0)).setHours(0,0,0,0);break;case"quarter":r=h1(e.getMonth()),c=e.getMonth(),e.setDate(1),e.setHours(0,0,0,0),c!==r&&e.setMonth(r)}return t&&"hour"!==v&&"minute"!==v&&"second"!==v&&S1(o,e),e}function f1(e){return p1(e,"day")}function g1(e,n,t){const i=new Date(e.getTime()),o=_t(n)?_1(n.toLowerCase()):rn(n)?u1(n):n;return o.years&&i.setFullYear(i.getFullYear()+o.years*t),o.quarters&&i.setMonth(i.getMonth()+3*o.quarters*t),o.months&&i.setMonth(i.getMonth()+o.months*t),o.weeks&&i.setDate(i.getDate()+7*o.weeks*t),o.days&&i.setDate(i.getDate()+o.days*t),o.hours&&i.setTime(i.getTime()+36e5*o.hours*t),o.minutes&&i.setTime(i.getTime()+6e4*o.minutes*t),o.seconds&&i.setTime(i.getTime()+1e3*o.seconds*t),o.milliseconds&&i.setTime(i.getTime()+o.milliseconds*t),i}const m1=function(e,n,t){const i=t?-1:1;return tu(e)?g1(e,n,i):$M(e+n*i,n)};function eg(e){return Hi(e.getFullYear(),e.getMonth()+1,0).getDate()}function _1(e){const n={};switch(e){case"year":n.years=1;break;case"month":n.months=1;break;case"quarter":n.months=3;break;case"week":n.weeks=1;break;case"day":n.days=1;break;case"hour":n.hours=1;break;case"minute":n.minutes=1;break;case"second":n.seconds=1;break;case"millisecond":n.milliseconds=1}return n}function Vx(e,n){return v1(e,n)&&e.getMonth()===n.getMonth()}function v1(e,n){return e&&n&&e.getFullYear()===n.getFullYear()}function fd(e){return e&&e.getFullYear()-e.getFullYear()%100}function gd(e){return e&&e.getFullYear()-e.getFullYear()%10}function y1(e,n){const t=(e.getDay()-n+hd)%hd,i=new Date(e);return i.setDate(e.getDate()-t),i}function C1(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())}function x1(e){return new Date(e,0,1)}function zx(e){return new Date(e,11,31)}function O1(e,n){let t=e.getDay()-n+1;return t<=0&&(t+=hd),t}function b1(e,n,t){let i=e;return Ie(e)?(Ie(n)&&e<n&&(i=n),Ie(t)&&e>t&&(i=t),i):e}function S1(e,n){if(!Ie(e))return;const t=n.getHours()-e.getHours();if(0===t)return;const i=1===t||-23===t?-1:1,o=new Date(n.getTime()+36e5*i);(i>0||o.getDate()===n.getDate())&&n.setTime(o.getTime())}function D1(e,n){return 60*(n.getTimezoneOffset()-e.getTimezoneOffset())*1e3}const Hi=function(e){const n=new Date(...arguments);return n.setFullYear(e),n},ia={dateUnitIntervals:pd,convertMillisecondsToDateUnits:u1,dateToMilliseconds:function(e){let n=0;return dt(e)&&Ee(e,function(t,i){n+=Qf(t.substr(0,t.length-1),i)}),_t(e)&&(n=Qf(e,1)),n},getNextDateUnit:function(e,n){switch(Jf(e)){case"millisecond":return"second";case"second":return"minute";case"minute":return"hour";case"hour":return"day";case"day":return n?"week":"month";case"week":return"month";case"month":return"quarter";case"quarter":case"year":return"year";default:return 0}},convertDateUnitToMilliseconds:Qf,getDateUnitInterval:Jf,getDateFormatByTickInterval:function xte(e){return Cte[Jf(e)]||""},getDatesDifferences:function(e,n){let t=0;const i={year:e.getFullYear()!==n.getFullYear(),month:e.getMonth()!==n.getMonth(),day:e.getDate()!==n.getDate(),hour:e.getHours()!==n.getHours(),minute:e.getMinutes()!==n.getMinutes(),second:e.getSeconds()!==n.getSeconds(),millisecond:e.getMilliseconds()!==n.getMilliseconds()};return Ee(i,function(o,r){r&&t++}),0===t&&0!==D1(e,n)&&(i.hour=!0,t++),i.count=t,i},correctDateWithUnitBeginning:p1,trimTime:f1,setToDayEnd:function(e){const n=f1(e);return n.setDate(n.getDate()+1),new Date(n.getTime()-1)},roundDateByStartDayHour:function(e,n){const t=this.dateTimeFromDecimal(n),i=new Date(e);return(e.getHours()===t.hours&&e.getMinutes()<t.minutes||e.getHours()<t.hours)&&i.setHours(t.hours,t.minutes,0,0),i},dateTimeFromDecimal:function(e){return{hours:Math.floor(e),minutes:e%1*60}},addDateInterval:g1,addInterval:m1,getSequenceByInterval:function(e,n,t){const i=[];let o;for(i.push(tu(e)?new Date(e.getTime()):e),o=e;o<n;)o=m1(o,t),i.push(o);return i},getDateIntervalByString:_1,sameHoursAndMinutes:function kte(e,n){return e&&n&&e.getHours()===n.getHours()&&e.getMinutes()===n.getMinutes()},sameDate:function Rte(e,n){return Vx(e,n)&&e.getDate()===n.getDate()},sameMonthAndYear:Vx,sameMonth:Vx,sameYear:v1,sameDecade:function(e,n){if(!Ie(e)||!Ie(n))return;const t=e.getFullYear()-e.getFullYear()%10,i=n.getFullYear()-n.getFullYear()%10;return e&&n&&t===i},sameCentury:function(e,n){if(!Ie(e)||!Ie(n))return;const t=e.getFullYear()-e.getFullYear()%100,i=n.getFullYear()-n.getFullYear()%100;return e&&n&&t===i},getDifferenceInMonth:function(e){let n=1;return"year"===e&&(n=12),"decade"===e&&(n=120),"century"===e&&(n=1200),n},getDifferenceInMonthForCells:function(e){let n=1;return"decade"===e&&(n=12),"century"===e&&(n=120),n},getFirstYearInDecade:gd,getFirstDecadeInCentury:fd,getShortDateFormat:function(){return"yyyy/MM/dd"},getViewFirstCellDate:function(e,n){return"month"===e?Hi(n.getFullYear(),n.getMonth(),1):"year"===e?Hi(n.getFullYear(),0,n.getDate()):"decade"===e?Hi(gd(n),n.getMonth(),n.getDate()):"century"===e?Hi(fd(n),n.getMonth(),n.getDate()):void 0},getViewLastCellDate:function(e,n){return"month"===e?Hi(n.getFullYear(),n.getMonth(),eg(n)):"year"===e?Hi(n.getFullYear(),11,n.getDate()):"decade"===e?Hi(gd(n)+9,n.getMonth(),n.getDate()):"century"===e?Hi(fd(n)+90,n.getMonth(),n.getDate()):void 0},getViewDown:function(e){switch(e){case"century":return"decade";case"decade":return"year";case"year":return"month"}},getViewUp:function(e){switch(e){case"month":return"year";case"year":return"decade";case"decade":return"century"}},getLastMonthDay:eg,getLastMonthDate:function(e){if(Ie(e))return Hi(e.getFullYear(),e.getMonth()+1,0)},getFirstMonthDate:function(e){if(Ie(e))return Hi(e.getFullYear(),e.getMonth(),1)},getFirstWeekDate:y1,getWeekNumber:function jx(e,n,t){const i=O1(x1(e.getFullYear()),n),o=O1(zx(e.getFullYear()),n),r=hd-i+1;let c=Math.ceil((function Vte(e){const n=C1(e)-C1(x1(e.getFullYear()));return 1+Math.floor(n/Yf("day"))}(e)-r)/7);switch(t){case"fullWeek":return r===hd&&c++,0===c?jx(zx(e.getFullYear()-1),n,t):c;case"firstDay":return r>0&&c++,(c>52&&!(7===i||7===o)||54===c)&&(c=1),c;case"firstFourDays":return r>3&&c++,c>52&&!(4===i||4===o)&&(c=1),0===c?jx(zx(e.getFullYear()-1),n,t):c}},normalizeDateByWeek:function(e,n){const t=ia.getDatesInterval(e,n,"day");let i=new Date(e);return t>=6&&(i=new Date(i.setDate(i.getDate()+7))),i},getQuarter:d1,getFirstQuarterMonth:h1,dateInRange:function(e,n,t,i){return"date"===i&&(n=n&&ia.correctDateWithUnitBeginning(n,"day"),t=t&&ia.correctDateWithUnitBeginning(t,"day"),e=e&&ia.correctDateWithUnitBeginning(e,"day")),b1(e,n,t)===e},intervalsOverlap:function(e){const{firstMin:n,firstMax:t,secondMin:i,secondMax:o}=e;return n<=i&&i<=t||n>i&&n<o||n<o&&t>o},roundToHour:function(e){const n=new Date(e.getTime());return n.setHours(n.getHours()+1),n.setMinutes(0),n},normalizeDate:b1,getViewMinBoundaryDate:function(e,n){const t=Hi(n.getFullYear(),n.getMonth(),1);return"month"===e||(t.setMonth(0),"year"===e)||("decade"===e&&t.setFullYear(gd(n)),"century"===e&&t.setFullYear(fd(n))),t},getViewMaxBoundaryDate:function(e,n){const t=new Date(n);return t.setDate(eg(n)),"month"===e||(t.setMonth(11),t.setDate(eg(t)),"year"===e)||("decade"===e&&t.setFullYear(gd(n)+9),"century"===e&&t.setFullYear(fd(n)+99)),t},fixTimezoneGap:S1,getTimezonesDifference:D1,makeDate:function(e){return new Date(e)},getDatesInterval:function(e,n,t){const i=n.getTime()-e.getTime(),o=Yf(t)||1;return Math.floor(i/o)},getDatesOfInterval:function(e,n,t){const i=[];let o=new Date(e.getTime());for(;o<n;)i.push(new Date(o.getTime())),o=this.addInterval(o,t);return i},createDateWithFullYear:Hi,getMachineTimezoneName:()=>typeof Intl<"u"?Intl.DateTimeFormat().resolvedOptions().timeZone:null,sameView:function(e,n,t){return ia[pu("same "+e)](n,t)}},md=ia;function oo(e,n){for(;e.length<n;)e="0"+e;return e}const _d={3:"abbreviated",4:"wide",5:"narrow"},Ux={y:function(e,n,t){let i=e[t?"getUTCFullYear":"getFullYear"]();return 2===n&&(i%=100),oo(i.toString(),n)},M:function(e,n,t,i){const o=e[t?"getUTCMonth":"getMonth"](),r=_d[n];return r?i.getMonthNames(r,"format")[o]:oo((o+1).toString(),Math.min(n,2))},L:function(e,n,t,i){const o=e[t?"getUTCMonth":"getMonth"](),r=_d[n];return r?i.getMonthNames(r,"standalone")[o]:oo((o+1).toString(),Math.min(n,2))},Q:function(e,n,t,i){const o=e[t?"getUTCMonth":"getMonth"](),r=Math.floor(o/3),c=_d[n];return c?i.getQuarterNames(c)[r]:oo((r+1).toString(),Math.min(n,2))},E:function(e,n,t,i){const o=e[t?"getUTCDay":"getDay"]();return i.getDayNames(_d[n<3?3:n])[o]},a:function(e,n,t,i){const r=e[t?"getUTCHours":"getHours"]()<12?0:1;return i.getPeriodNames(_d[n])[r]},d:function(e,n,t){return oo(e[t?"getUTCDate":"getDate"]().toString(),Math.min(n,2))},H:function(e,n,t){return oo(e[t?"getUTCHours":"getHours"]().toString(),Math.min(n,2))},h:function(e,n,t){return oo((e[t?"getUTCHours":"getHours"]()%12||12).toString(),Math.min(n,2))},m:function(e,n,t){return oo(e[t?"getUTCMinutes":"getMinutes"]().toString(),Math.min(n,2))},s:function(e,n,t){return oo(e[t?"getUTCSeconds":"getSeconds"]().toString(),Math.min(n,2))},S:function(e,n,t){return oo(e[t?"getUTCMilliseconds":"getMilliseconds"]().toString(),3).substr(0,n)},x:function(e,n,t){const i=t?0:e.getTimezoneOffset(),o=i>0?"-":"+",r=Math.abs(i),v=r%60,S=oo(Math.floor(r/60).toString(),2),T=oo(v.toString(),2);return o+S+(n>=3?":":"")+(n>1||v?T:"")},X:function(e,n,t){return t||!e.getTimezoneOffset()?"Z":Ux.x(e,n,t)},Z:function(e,n,t){return Ux.X(e,n>=5?3:2,t)}},I1=" .,:;/\\<>()-[]\u060c",ps=function(e){const n=e&&Lt.convertDigits(e,!1).charCodeAt(0),t=Lt.convertDigits("0",!1).charCodeAt(0);return t<=n&&n<t+10},Xte=function(e,n,t,i){const o=e[t],r=e[t+1];if(!i&&("."===o||" "===o&&". m."===e.slice(t-1,t+3)||"-"===o&&!ps(r)))return!0;const c=i&&n.some(v=>e[t]!==v[t]);return I1.indexOf(o)<0&&i===ps(o)&&(!i||c)},Yte=function(e,n){if(!ps(e[n]))for(;n>0&&!ps(e[n-1])&&("."===e[n-1]||I1.indexOf(e[n-1])<0);)n--;return n},E1=function(e,n){return Array.isArray(e)?e.map(function(t){return(n(t)||"").toString()}):(n(e)||"").toString()},tne=/[a-zA-Z]/g,Lr={3:"abbreviated",4:"wide",5:"narrow"},w1=function(e,n){return e>2?Object.keys(Lr).map(function(t){return["format","standalone"].map(function(i){return n.getMonthNames(Lr[t],i).join("|")}).join("|")}).join("|"):2===e?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},rne={":":function(e,n){const t=e>1?`{${e}}`:"";let i=es(n.getTimeSeparator());return":"!==i&&(i=`${i}|:`),`${i}${t}`},y:function(e){return 2===e?`[0-9]{${e}}`:"[0-9]+?"},M:w1,L:w1,Q:function(e,n){return e>2?n.getQuarterNames(Lr[e],"format").join("|"):"0?[1-4]"},E:function(e,n){return"\\D*"},a:function(e,n){return n.getPeriodNames(Lr[e<3?3:e],"format").join("|")},d:function(e){return 2===e?"3[01]|[12][0-9]|0?[1-9]":"0??[1-9]|[12][0-9]|3[01]"},H:function(e){return 2===e?"2[0-3]|1[0-9]|0?[0-9]":"0??[0-9]|1[0-9]|2[0-3]"},h:function(e){return 2===e?"1[012]|0?[1-9]":"0??[1-9]|1[012]"},m:function(e){return 2===e?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},s:function(e){return 2===e?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},S:function(e){return`[0-9]{1,${e}}`},w:function(e){return 2===e?"[1-5][0-9]|0?[0-9]":"0??[0-9]|[1-5][0-9]"},x:function(e){return 3===e?"[+-](?:2[0-3]|[01][0-9]):(?:[0-5][0-9])|Z":"[+-](?:2[0-3]|[01][0-9])(?:[0-5][0-9])|Z"}},Nr=Number,$x=function(e,n){return e.map(t=>t.toLowerCase()).indexOf(n.toLowerCase())},P1=function(e,n,t){return n>2?["format","standalone"].map(function(i){return Object.keys(Lr).map(function(o){const r=t.getMonthNames(Lr[o],i);return $x(r,e)})}).reduce(function(i,o){return i.concat(o)}).filter(function(i){return i>=0})[0]:Nr(e)-1},sne={y:function(e,n){const t=Nr(e);return 2===n?t<30?2e3+t:1900+t:t},M:P1,L:P1,Q:function(e,n,t){return n>2?t.getQuarterNames(Lr[n],"format").indexOf(e):Nr(e)-1},E:function(e,n,t){const i=t.getDayNames(Lr[n<3?3:n],"format");return $x(i,e)},a:function(e,n,t){const i=t.getPeriodNames(Lr[n<3?3:n],"format");return $x(i,e)},d:Nr,H:Nr,h:Nr,m:Nr,s:Nr,S:function(e,n){for(n=Math.max(n,3),e=e.slice(0,3);n<3;)e+="0",n++;return Nr(e)}},tg=["y","M","d","h","m","s","S"],Wx={y:"setFullYear",M:"setMonth",L:"setMonth",a:function(e,n,t){let i=e.getHours();const o=t.h;void 0!==o&&o!==i&&i--,n||12!==i?n&&12!==i&&(i+=12):i=0,e.setHours(i)},d:"setDate",H:"setHours",h:"setHours",m:"setMinutes",s:"setSeconds",S:"setMilliseconds"},ane=function(e,n){const t=e[n];if(!t)return 0;let i=0;do{n++,i++}while(e[n]===t);return i},lne=function(e,n){let t="";for(let i=0;i<n;i++)t+=e;return t},une=["d","H","h","m","s","w","M","L","Q"],_ne=function(e,n){const t=function(e,n){let o,t="",i="";const r=[],c=function(){i&&(r.push(`'${i}'`),t+=`${es(i)})`,i="")};for(let v=0;v<e.length;v++){const S=e[v],F=rne[S];if("'"!==S||(o=!o,"'"===e[v-1]))if(F&&!o){const N=ane(e,v),B=lne(S,N);c(),r.push(B),t+=`(${F(N,n)})`,v+=N-1}else i||(t+="("),i+=S}return c(),function(e){const n=o=>{if(!o)return!1;const r=o[0];return["y","S"].includes(r)||une.includes(r)&&o.length<3};let t=!0,i=0;return e.every((o,r,c)=>{return n(o)&&("S"!==(v=o)[0]&&2!==v.length&&(t=++i<2),n(c[r+1])||(i=0)),t;var v})}(r)||fp.warn(`The following format may be parsed incorrectly: ${e}.`),{patterns:r,regexp:new RegExp(`^${t}$`,"i")}}(e,n);return function(i){const o=t.regexp.exec(i);if(o){const r=new Date,c=new Date(r.getFullYear(),0,1),v=function(e){return e.map(function(n){return"'"===n[0]?"":"H"===n[0]?"h":n[0]})}(t.patterns),S=function(e){const n=e.map(function(t){return tg.indexOf(t)});return Math.max.apply(Math,n)}(v),T=function(e){const n=e.filter(function(t){return tg.indexOf(t)<0});return tg.concat(n)}(v),F={};return T.forEach(function(N,B){if(!N||B<tg.length&&B>S)return;const X=v.indexOf(N);X>=0?function(e,n,t,i,o){const r=n[0],c=Wx[r],v=sne[r];if(c&&v){const S=v(t,n.length,i);o[n]=S,e[c]?e[c](S):c(e,S,o)}}(c,t.patterns[X],o[X+1],n,F):function(e,n,t){const i=Wx[n],r=t["g"+i.substr(1)]();e[i](r)}(c,N,r)}),c}return null}},vne=["January","February","March","April","May","June","July","August","September","October","November","December"],yne=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Cne=["AM","PM"],xne=["Q1","Q2","Q3","Q4"],T1=(e,n)=>{const t={abbreviated:3,short:2,narrow:1};return ni(e,i=>i.substr(0,t[n]))},One={"af-NA":1,agq:1,ak:1,ar:6,"ar-EH":1,"ar-ER":1,"ar-KM":1,"ar-LB":1,"ar-MA":1,"ar-MR":1,"ar-PS":1,"ar-SO":1,"ar-SS":1,"ar-TD":1,"ar-TN":1,asa:1,ast:1,az:1,"az-Cyrl":1,bas:1,be:1,bem:1,bez:1,bg:1,bm:1,br:1,bs:1,"bs-Cyrl":1,ca:1,ce:1,cgg:1,ckb:6,cs:1,cy:1,da:1,de:1,dje:1,dsb:1,dua:1,dyo:1,ee:1,el:1,"en-001":1,"en-AE":6,"en-BI":1,"en-MP":1,"en-MV":5,"en-SD":6,eo:1,es:1,et:1,eu:1,ewo:1,fa:6,ff:1,"ff-Adlm":1,fi:1,fo:1,fr:1,"fr-DJ":6,"fr-DZ":6,"fr-SY":6,fur:1,fy:1,ga:1,gd:1,gl:1,gsw:1,gv:1,ha:1,hr:1,hsb:1,hu:1,hy:1,ia:1,ig:1,is:1,it:1,jgo:1,jmc:1,ka:1,kab:6,kde:1,kea:1,khq:1,kk:1,kkj:1,kl:1,"ko-KP":1,ksb:1,ksf:1,ksh:1,ku:1,kw:1,ky:1,lag:1,lb:1,lg:1,ln:1,lrc:6,lt:1,lu:1,lv:1,"mas-TZ":1,mfe:1,mg:1,mgo:1,mi:1,mk:1,mn:1,ms:1,mua:1,mzn:6,naq:1,nds:1,nl:1,nmg:1,nnh:1,no:1,nus:1,nyn:1,os:1,pcm:1,pl:1,ps:6,"pt-AO":1,"pt-CH":1,"pt-CV":1,"pt-GQ":1,"pt-GW":1,"pt-LU":1,"pt-ST":1,"pt-TL":1,"qu-BO":1,"qu-EC":1,rm:1,rn:1,ro:1,rof:1,ru:1,rw:1,rwk:1,sah:1,sbp:1,sc:1,se:1,ses:1,sg:1,shi:1,"shi-Latn":1,si:1,sk:1,sl:1,smn:1,so:1,"so-DJ":6,sq:1,sr:1,"sr-Latn":1,sv:1,sw:1,"ta-LK":1,"ta-MY":1,teo:1,tg:1,"ti-ER":1,tk:1,to:1,tr:1,tt:1,twq:1,tzm:1,uk:1,uz:1,"uz-Arab":6,"uz-Cyrl":1,vai:1,"vai-Latn":1,vi:1,vun:1,wae:1,wo:1,xog:1,yav:1,yi:1,yo:1,zgh:1},bne=/[\u200E\u200F]/g,Sne=/[\u202F]/g,oa=e=>n=>{if(!e.timeZoneName){const t=n.getFullYear(),i=String(t).length<3,c=new Date(Date.UTC(i?t+400:t,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return i&&c.setFullYear(t),Kx(c,pe({timeZone:"UTC"},e))}return Kx(n,e)},Gx={},Dne=e=>{const n=eo.locale()+"/"+JSON.stringify(e);return Gx[n]||(Gx[n]=new Intl.DateTimeFormat(eo.locale(),e).format),Gx[n]};function Kx(e,n){return Dne(n)(e).replace(bne,"").replace(Sne," ")}const qx=e=>new Intl.NumberFormat(eo.locale()).format(e),Ine=(()=>{const e={};return n=>{if(!(n in e)){if("0"===qx(0))return e[n]=!1,!1;e[n]={};for(let t=0;t<10;++t)e[n][qx(t)]=t}return e[n]}})(),ig=e=>{const n=Ine(eo.locale());return n?e.split("").map(t=>t in n?String(n[t]):t).join(""):e},M1=e=>e.replace(/(\D)0+(\d)/g,"$1$2"),Zx=e=>e.replace("d\u2019","de "),Xx={day:{day:"numeric"},date:{year:"numeric",month:"long",day:"numeric"},dayofweek:{weekday:"long"},longdate:{weekday:"long",year:"numeric",month:"long",day:"numeric"},longdatelongtime:{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},longtime:{hour:"numeric",minute:"numeric",second:"numeric"},month:{month:"long"},monthandday:{month:"long",day:"numeric"},monthandyear:{year:"numeric",month:"long"},shortdate:{},shorttime:{hour:"numeric",minute:"numeric"},shortyear:{year:"2-digit"},year:{year:"numeric"}};Object.defineProperty(Xx,"shortdateshorttime",{get:function(){const e=Intl.DateTimeFormat(eo.locale()).resolvedOptions();return{year:e.year,month:e.month,day:e.day,hour:"numeric",minute:"numeric"}}});const A1={standalone:function(e,n){const t=new Date(1999,e,13,1);return oa({month:n})(t)},format:function(e,n){const t=new Date(0,e,13,1),o=Zx(oa({day:"numeric",month:n})(t)).split(" ").filter(r=>r.indexOf("13")<0);return 1===o.length?o[0]:2===o.length?o[0].length>o[1].length?o[0]:o[1]:A1.standalone(e,n)}},Pne={engine:function(){return"intl"},getMonthNames:function(e,n){const t={wide:"long",abbreviated:"short",narrow:"narrow"}[e||"wide"];return n="format"===n?n:"standalone",Array.apply(null,new Array(12)).map((i,o)=>A1[n](o,t))},getDayNames:function(e){return t={wide:"long",abbreviated:"short",short:"narrow",narrow:"narrow"}[e||"wide"],Array.apply(null,new Array(7)).map((i,o)=>oa({weekday:t})(new Date(0,0,o)));var t},getPeriodNames:function(){const e=oa({hour:"numeric",hour12:!0});return[1,13].map(n=>{const t=qx(1),i=e(new Date(0,0,1,n)).split(t);return 2!==i.length?"":(i[0].length>i[1].length?i[0]:i[1]).trim()})},format:function(e,n){if(!e)return;if(!n)return e;"function"!=typeof n&&!n.formatter&&(n=n.type||n);const t=(e=>"string"==typeof e&&Xx[e.toLowerCase()])(n);if(t)return oa(t)(e);const i=typeof n;return n.formatter||"function"===i||"string"===i?this.callBase.apply(this,arguments):oa(n)(e)},parse:function(e,n){let t;return n&&!n.parser&&"string"==typeof e&&(e=Zx(e),t=i=>Zx(this.format(i,n))),this.callBase(e,t||n)},_parseDateBySimpleFormat:function(e,n){e=ig(e);const t=this.getFormatParts(n),i=e.split(/\D+/).filter(c=>c.length>0);if(t.length!==i.length)return;const o=this._generateDateArgs(t,i),r=c=>{const v=(S=o,new Date(S.year,S.month,S.day,(S.hours+(c?12:0))%24,S.minutes,S.seconds));var S;if(((e,n)=>M1(e)===M1(n))(ig(this.format(v,n)),e))return v};return r(!1)||r(!0)},_generateDateArgs:function(e,n){const t=new Date,i={year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hours:0,minutes:0,seconds:0};return e.forEach((o,r)=>{let v=parseInt(n[r],10);"month"===o&&(v-=1),i[o]=v}),i},formatUsesMonthName:function(e){return"object"!=typeof e||e.type||e.format?this.callBase.apply(this,arguments):"long"===e.month},formatUsesDayName:function(e){return"object"!=typeof e||e.type||e.format?this.callBase.apply(this,arguments):"long"===e.weekday},getTimeSeparator:function(){return ig(Kx(new Date(2001,1,1,11,11),{hour:"numeric",minute:"numeric",hour12:!1})).replace(/\d/g,"")},getFormatParts:function(e){if("string"==typeof e)return this.callBase(e);const n=pe({},Xx[e.toLowerCase()]),t=new Date(2001,2,4,5,6,7);let i=oa(n)(t);return i=ig(i),[{name:"year",value:1},{name:"month",value:3},{name:"day",value:4},{name:"hours",value:5},{name:"minutes",value:6},{name:"seconds",value:7}].map(o=>({name:o.name,index:i.indexOf(o.value)})).filter(o=>o.index>-1).sort((o,r)=>o.index-r.index).map(o=>o.name)}},Tne=typeof Intl<"u",Yx={shortdate:"M/d/y",shorttime:"h:mm a",longdate:"EEEE, MMMM d, y",longtime:"h:mm:ss a",monthandday:"MMMM d",monthandyear:"MMMM y",quarterandyear:"QQQ y",day:"d",year:"y",shortdateshorttime:"M/d/y, h:mm a",longdatelongtime:"EEEE, MMMM d, y, h:mm:ss a",month:"LLLL",shortyear:"yy",dayofweek:"EEEE",quarter:"QQQ",hour:"HH",minute:"mm",second:"ss",millisecond:"SSS","datetime-local":"yyyy-MM-ddTHH':'mm':'ss"},Mne={year:["y","yy","yyyy"],day:["d","dd"],month:["M","MM","MMM","MMMM"],hours:["H","HH","h","hh","ah"],minutes:["m","mm"],seconds:["s","ss"],milliseconds:["S","SS","SSS"]},R1=Zi({engine:function(){return"base"},_getPatternByFormat:function(e){return Yx[e.toLowerCase()]},_expandPattern:function(e){return this._getPatternByFormat(e)||e},formatUsesMonthName:function(e){return-1!==this._expandPattern(e).indexOf("MMMM")},formatUsesDayName:function(e){return-1!==this._expandPattern(e).indexOf("EEEE")},getFormatParts:function(e){const n=this._getPatternByFormat(e)||e,t=[];return Ee(n.split(/\W+/),(i,o)=>{Ee(Mne,(r,c)=>{c.includes(o)&&t.push(r)})}),t},getMonthNames:function(e){return function(e){return T1(vne,e)}(e)},getDayNames:function(e){return function(e){return T1(yne,e)}(e)},getQuarterNames:function(e){return xne},getPeriodNames:function(e){return Cne},getTimeSeparator:function(){return":"},is24HourFormat:function(e){const n=new Date(2017,0,20,11,0,0,0),t=new Date(2017,0,20,23,0,0,0),i=this.format(n,e),o=this.format(t,e);for(let r=0;r<i.length;r++)if(i[r]!==o[r])return!isNaN(parseInt(i[r]))},format:function(e,n){if(!e)return;if(!n)return e;let t;if("function"==typeof n)t=n;else if(n.formatter)t=n.formatter;else if(_t(n=n.type||n))return n=Yx[n.toLowerCase()]||n,Lt.convertDigits(function(e,n){return function(t){let i,o,r,S,c=0,v=!1,T="";if(!t)return null;if(!e)return t;const F="Z"===e[e.length-1]||"'Z'"===e.slice(-3);for(i=0;i<e.length;i++)r=e[i],o=Ux[r],S=r===e[i+1],c++,S||(o&&!v&&(T+=o(t,c,F,n)),c=0),"'"!==r||S?(v||!o)&&(T+=r):v=!v,"'"===r&&S&&i++;return T}}(n,this)(e));return t?t(e):void 0},parse:function(e,n){const t=this;let i,o;if(!e)return;if(!n)return this.parse(e,"shortdate");if(n.parser)return n.parser(e);if("string"!=typeof n||Yx[n.toLowerCase()]){o=c=>{const v=t.format(c,n);return Lt.convertDigits(v,!0)};try{i=function(e){const n=[],t=E1(new Date(2009,8,8,6,5,4),e),i=t.split("").map(function(v,S){return S});let o=t;const r={},c=[{date:new Date(2009,8,8,6,5,4,111),pattern:"S"},{date:new Date(2009,8,8,6,5,2),pattern:"s"},{date:new Date(2009,8,8,6,2,4),pattern:"m"},{date:new Date(2009,8,8,18,5,4),pattern:"H",isDigit:!0},{date:new Date(2009,8,8,2,5,4),pattern:"h",isDigit:!0},{date:new Date(2009,8,8,18,5,4),pattern:"a",isDigit:!1},{date:new Date(2009,8,1,6,5,4),pattern:"d"},{date:[new Date(2009,8,2,6,5,4),new Date(2009,8,3,6,5,4),new Date(2009,8,4,6,5,4)],pattern:"E"},{date:new Date(2009,9,6,6,5,4),pattern:"M"},{date:new Date(1998,8,8,6,5,4),pattern:"y"}];if(o&&(c.forEach(function(v){const S=function(e,n,t,i){let o=0;const r=[],c=function(v){return e[o]!==v[o]&&(void 0===i||ps(e[o])===i)};for(Array.isArray(n)||(n=[n]),o=0;o<e.length;o++)if(t.indexOf(o)<0&&n.filter(c).length){o=Yte(e,o);do{if(i=ps(e[o]),!r.length&&!i&&ps(n[0][o]))break;r.push(o),t.unshift(o),o++}while(e[o]&&Xte(e,n,o,i));break}return 1===r.length&&("0"===e[t[0]-1]||"\u0660"===e[t[0]-1])&&t.unshift(t[0]-1),r}(t,E1(v.date,e),n,v.isDigit),T="M"!==v.pattern||r.d?v.pattern:"L";o=function(e,n,t,i){let o,r,c;if(!ps(e[n[0]]||"0")){const v=Math.max(n.length<=3?3:4,t.length);for(;n.length>v;){for(r=n.pop(),c=i[r],i[r]=-1,o=r+1;o<i.length;o++)i[o]--;e=e.substr(0,c)+e.substr(c+1)}for(r=n[n.length-1]+1,c=r<i.length?i[r]:r;n.length<v;){for(n.push(n[n.length-1]+1),o=r;o<i.length;o++)i[o]++;e=e.substr(0,c)+" "+e.substr(c)}}return e=function(e,n,t,i){const o=n[0],r=o<i.length?i[o]:o;return n.forEach(function(c,v){e=e.substr(0,r+v)+(t.length>1?t[v]:t)+e.substr(r+v+1)}),1===n.length&&(e=(e=e.replace("0"+t,t+t)).replace("\u0660"+t,t+t)),e}(e,n,t,i),e}(o,S,T,i),r[T]=S.length}),o=function(e,n,t,i){const o=n.split("").map(function(r,c){return t.indexOf(c)<0&&(r.match(tne)||"'"===r)?i[c]:-1});return e.split("").map(function(r,c){let v=r;const S=o.indexOf(c)>=0,T=c>0&&o.indexOf(c-1)>=0,F=o.indexOf(c+1)>=0;return S&&(T||(v="'"+v),F||(v+="'")),v}).join("")}(o,t,n,i),n.length))return o}(o)}catch{}}else i=n;if(i)return e=Lt.convertDigits(e,!0),_ne(i,this)(e);vt.log("W0012");const r=new Date(e);return r&&!isNaN(r.getTime())?r:void 0},firstDayOfWeekIndex:function(){const e=eo.getValueByClosestLocale(n=>One[n]);return void 0===e?0:e}});Tne&&R1.inject(Pne);const Hr=R1,Ane_scrollBarMeasureElement=(Zi({format:function(e,n){const t=_t(n)&&""!==n||lt(n)||Be(n),i=rn(e)||tu(e);return t&&i?Be(n)?n(e):(_t(n)&&(n={type:n}),rn(e)?Lt.format(e,n):tu(e)?Hr.format(e,n):void 0):Ie(e)?e.toString():""},getTimeFormat:function(e){return e?"longtime":"shorttime"},_normalizeFormat:function(e){return Array.isArray(e)?1===e.length?e[0]:function(n){return e.map(function(t){return Hr.format(n,t)}).join(" ")}:e},getDateFormatByDifferences:function(e,n){const t=[],i=n&&e.millisecond&&!(e.year||e.month||e.day);return i?t.push(function(r){return r.getSeconds()+r.getMilliseconds()/1e3+"s"}):e.millisecond&&t.push("millisecond"),(e.hour||e.minute||!i&&e.second)&&t.unshift(this.getTimeFormat(e.second)),e.year&&e.month&&e.day?n&&"month"===n?"monthandyear":(t.unshift("shortdate"),this._normalizeFormat(t)):e.year&&e.month?"monthandyear":e.year&&e.quarter?"quarterandyear":e.year?"year":e.quarter?"quarter":e.month&&e.day?(t.unshift(n?function(r){return Hr.getMonthNames("abbreviated")[r.getMonth()]+" "+Hr.format(r,"day")}:"monthandday"),this._normalizeFormat(t)):e.month?"month":e.day?(t.unshift(n?"day":function(r){return Hr.format(r,"dayofweek")+", "+Hr.format(r,"day")}),this._normalizeFormat(t)):this._normalizeFormat(t)},getDateFormatByTicks:function(e){let n,t,i;if(e.length>1)for(n=md.getDatesDifferences(e[0],e[1]),i=1;i<e.length-1;i++)t=md.getDatesDifferences(e[i],e[i+1]),n.count<t.count&&(n=t);else n={year:!0,month:!0,day:!0,hour:e[0].getHours()>0,minute:e[0].getMinutes()>0,second:e[0].getSeconds()>0,millisecond:e[0].getMilliseconds()>0};return this.getDateFormatByDifferences(n)},getDateFormatByTickInterval:function(e,n,t){let i;const o=function(v,S,T){switch(S){case"year":case"quarter":v.month=T;case"month":v.day=T;case"week":case"day":v.hour=T;case"hour":v.minute=T;case"minute":v.second=T;case"second":v.millisecond=T}};t=_t(t)?t.toLowerCase():t;const r=md.getDatesDifferences(e,n);return e!==n&&(v=r,S=e>n?n:e,!(T=e>n?e:n).getMilliseconds()&&T.getSeconds()?T.getSeconds()-S.getSeconds()==1&&(v.millisecond=!0,v.second=!1):!T.getSeconds()&&T.getMinutes()?T.getMinutes()-S.getMinutes()==1&&(v.second=!0,v.minute=!1):!T.getMinutes()&&T.getHours()?T.getHours()-S.getHours()==1&&(v.minute=!0,v.hour=!1):!T.getHours()&&T.getDate()>1?T.getDate()-S.getDate()==1&&(v.hour=!0,v.day=!1):1===T.getDate()&&T.getMonth()?T.getMonth()-S.getMonth()==1&&(v.day=!0,v.month=!1):!T.getMonth()&&T.getFullYear()&&T.getFullYear()-S.getFullYear()==1&&(v.month=!0,v.year=!1)),i=md.getDateUnitInterval(r),o(r,i,!0),i=md.getDateUnitInterval(t||"second"),o(r,i,!1),r[{week:"day"}[i]||i]=!0,this.getDateFormatByDifferences(r);var v,S,T}}),"dx-pivotgrid-scrollbar-measure-element");let F1=new Date;function L1(e){const n=function(t,i,o,r,c,v){let S,T;function F(N,B,X){Ft(n(t,i,o,r,B,X)).done(N.resolve)}for(r=r||[],t=t||[],S=c=c||0;S<t.length;S+=1){if(e&&S>c&&S%1e4==0&&new Date-F1>=300)return F1=new Date,T=new Ae,F(T,S,!1),T;const N=t[S];if(!v){if(r.unshift(N),o&&!1===i(r,S))return;if(N.children){const B=n(N.children,i,o,r);if(e&&B)return T=new Ae,B.done(F(T,S,!0)),T}}if(v=!1,!o&&!1===i(r,S))return;r.shift(),t[S]!==N&&(S-=1)}};return n}L1(!1),L1(!0);const z1=zo(()=>{const e=Pe.getDocument();e.body.insertAdjacentHTML("beforeend",`<div class="${Ane_scrollBarMeasureElement}"></div>`);const n=e.body.lastElementChild,t=(e=>e.offsetWidth-e.clientWidth)(n);return n&&e.body.removeChild(n),t}),Xne=class Zne extends vi{_init(){super._init();const{EventDispatcher:n}=Ze();this.onScroll=new n,this._createOnCreateDiagramAction()}_initMarkup(){super._initMarkup();const n=V("<div>").appendTo(this.$element()),t={direction:"both",bounceEnabled:!1,scrollByContent:!1,onScroll:o=>{let{scrollOffset:r}=o;this._raiseOnScroll(r.left,r.top)}},i=this.option("useNativeScrolling");void 0!==i&&(t.useNative=i),this._scrollView=this._createComponent(n,kf,t),this._onCreateDiagramAction({$parent:V(this._scrollView.content()),scrollView:this})}setScroll(n,t){this._scrollView.scrollTo({left:n,top:t}),this._raiseOnScrollWithoutPoint()}offsetScroll(n,t){this._scrollView.scrollBy({left:n,top:t}),this._raiseOnScrollWithoutPoint()}getSize(){const{Size:n}=Ze(),t=this._scrollView.$element();return new n(Math.floor(Xe(t)),Math.floor(ut(t)))}getScrollContainer(){return this._scrollView.$element()[0]}getScrollBarWidth(){return this.option("useNativeScrolling")?z1():0}detachEvents(){}_raiseOnScroll(n,t){const{Point:i}=Ze();this.onScroll.raise("notifyScrollChanged",()=>new i(n,t))}_raiseOnScrollWithoutPoint(){const{Point:n}=Ze();this.onScroll.raise("notifyScrollChanged",()=>new n(this._scrollView.scrollLeft(),this._scrollView.scrollTop()))}_createOnCreateDiagramAction(){this._onCreateDiagramAction=this._createActionByOption("onCreateDiagram")}_optionChanged(n){switch(n.name){case"onCreateDiagram":this._createOnCreateDiagramAction();break;case"useNativeScrolling":break;default:super._optionChanged(n)}}},Yne={getDefaultGroups(){return this._groups||(this._groups={general:{category:"general",title:de.format("dxDiagram-categoryGeneral")},flowchart:{category:"flowchart",title:de.format("dxDiagram-categoryFlowchart")},orgChart:{category:"orgChart",title:de.format("dxDiagram-categoryOrgChart")},containers:{category:"containers",title:de.format("dxDiagram-categoryContainers")},custom:{category:"custom",title:de.format("dxDiagram-categoryCustom")}})},getGroups:function(e){const n=this.getDefaultGroups();return e?e.map(function(t){return"string"==typeof t?{category:t,title:n[t]&&n[t].title||t}:t}).filter(function(t){return t}):[n.general,n.flowchart,n.orgChart,n.containers]}},j1=Mf.inherit({_activeStateUnit:".dx-accordion-item",_getDefaultOptions(){return pe(this.callBase(),{hoverStateEnabled:!0,height:void 0,itemTitleTemplate:"title",onItemTitleClick:null,selectedIndex:0,collapsible:!1,multiple:!1,animationDuration:300,deferRendering:!0,selectByClick:!0,activeStateEnabled:!0,_itemAttributes:{role:"tab"},_animationEasing:"ease"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>ki(),options:{animationDuration:200,_animationEasing:"cubic-bezier(0.4, 0, 0.2, 1)"}}])},_itemElements(){return this._itemContainer().children(this._itemSelector())},_init(){this.callBase(),this.option("selectionRequired",!this.option("collapsible")),this.option("selectionMode",this.option("multiple")?"multiple":"single");const e=this.$element();e.addClass("dx-accordion"),this._$container=V("<div>").addClass("dx-accordion-wrapper"),e.append(this._$container)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new $s((e,n)=>{if(lt(n)){const t=Qs(n.icon);t&&e.append(t),Ie(n.title)&&!lt(n.title)&&e.append(Pe.createTextNode(n.title))}else Ie(n)&&e.text(String(n));e.wrapInner(V("<div>").addClass("dx-accordion-item-title-caption"))},["title","icon"],this.option("integrationOptions.watchMethod"))})},_initMarkup(){this._deferredItems=[],this._deferredTemplateItems=[],this.callBase(),this.setAria({role:"tablist",multiselectable:this.option("multiple")}),_r(()=>{const e=this._getSelectedItemIndices();this._renderSelection(e,[])})},_render(){this.callBase(),Ft.apply(this,this._deferredTemplateItems).done(()=>{this._updateItemHeights(!0)})},_itemDataKey:()=>"dxAccordionItemData",_itemClass:()=>"dx-accordion-item",_itemContainer(){return this._$container},_itemTitles(){return this._itemElements().find(".dx-accordion-item-title")},_itemContents(){return this._itemElements().find(".dx-accordion-item-body")},_getItemData(e){return V(e).parent().data(this._itemDataKey())||this.callBase.apply(this,arguments)},_executeItemRenderAction(e){e.type||this.callBase.apply(this,arguments)},_itemSelectHandler(e){V(e.target).closest(this._itemContents()).length||this.callBase.apply(this,arguments)},_afterItemElementDeleted(e,n){this._deferredItems.splice(n.itemIndex,1),this.callBase.apply(this,arguments)},_renderItemContent(e){this._deferredTemplateItems[e.index]=Ae();const n=this.callBase(pe({},e,{contentClass:"dx-accordion-item-title",templateProperty:"titleTemplate",defaultTemplateName:this.option("itemTitleTemplate")}));this._attachItemTitleClickAction(n);const t=Ae();Ie(this._deferredItems[e.index])?this._deferredItems[e.index]=t:this._deferredItems.push(t),(!this.option("deferRendering")||this._getSelectedItemIndices().indexOf(e.index)>=0)&&t.resolve(),t.done(this.callBase.bind(this,pe({},e,{contentClass:"dx-accordion-item-body",container:st(V("<div>").appendTo(V(n).parent()))})))},_onItemTemplateRendered(e,n){return()=>{const t=this._deferredTemplateItems[n.index];t&&t.resolve()}},_attachItemTitleClickAction(e){const n=Te(si,this.NAME);ue.off(e,n),ue.on(e,n,this._itemTitleClickHandler.bind(this))},_itemTitleClickHandler(e){this._itemDXEventHandler(e,"onItemTitleClick")},_renderSelection(e,n){this._itemElements().addClass("dx-accordion-item-closed"),this.setAria("hidden",!0,this._itemContents()),this._updateItems(e,n)},_updateSelection(e,n){this._updateItems(e,n),this._updateItemHeightsWrapper(!1)},_updateItems(e,n){const t=this._itemElements();Ee(e,(i,o)=>{var r;null===(r=this._deferredItems[o])||void 0===r||r.resolve();const c=t.eq(o).addClass("dx-accordion-item-opened").removeClass("dx-accordion-item-closed");this.setAria("hidden",!1,c.find(".dx-accordion-item-body"))}),Ee(n,(i,o)=>{const r=t.eq(o).removeClass("dx-accordion-item-opened");this.setAria("hidden",!0,r.find(".dx-accordion-item-body"))})},_updateItemHeightsWrapper(e){this.option("templatesRenderAsynchronously")?this._animationTimer=setTimeout(()=>{this._updateItemHeights(e)}):this._updateItemHeights(e)},_updateItemHeights(e){const n=this,t=n._deferredAnimate,i=this._splitFreeSpace(this._calculateFreeSpace());return clearTimeout(this._animationTimer),Ft.apply(V,[].slice.call(this._itemElements()).map(o=>n._updateItemHeight(V(o),i,e))).done(()=>{t&&t.resolveWith(n)})},_updateItemHeight(e,n,t){const i=e.children(".dx-accordion-item-title");Wn.isAnimating(e)&&Wn.stop(e);const o=et(e);let r;return e.hasClass("dx-accordion-item-opened")?(r=n+et(i),r||(lu(e,"auto"),r=et(e))):r=et(i),this._animateItem(e,o,r,t,!!n)},_animateItem(e,n,t,i,o){let r;return i||n===t?(e.css("height",t),r=Ae().resolve()):r=Wn.animate(e,{type:"custom",from:{height:n},to:{height:t},duration:this.option("animationDuration"),easing:this.option("_animationEasing")}),r.done(()=>{e.hasClass("dx-accordion-item-opened")&&!o&&e.css("height",""),e.not(".dx-accordion-item-opened").addClass("dx-accordion-item-closed")})},_splitFreeSpace(e){return e&&e/this.option("selectedItems").length},_calculateFreeSpace(){const e=this.option("height");if(void 0===e||"auto"===e)return;const n=this._itemTitles();let t=0;return Ee(n,(i,o)=>{t+=et(o)}),ut(this.$element())-t},_visibilityChanged(e){e&&this._dimensionChanged()},_dimensionChanged(){this._updateItemHeights(!0)},_clean(){this._deferredTemplateItems.forEach(e=>{e.reject()}),this._deferredTemplateItems=[],clearTimeout(this._animationTimer),this.callBase()},_tryParseItemPropertyName(e){const n=e.match(/.*\.(.*)/);if(Ie(n)&&n.length>=1)return n[1]},_optionChanged(e){switch(e.name){case"items":this.callBase(e),"title"===this._tryParseItemPropertyName(e.fullName)&&this._renderSelection(this._getSelectedItemIndices(),[]),"visible"===this._tryParseItemPropertyName(e.fullName)&&this._updateItemHeightsWrapper(!0),!0===this.option("repaintChangesOnly")&&"items"===e.fullName&&(this._updateItemHeightsWrapper(!0),this._renderSelection(this._getSelectedItemIndices(),[]));break;case"animationDuration":case"onItemTitleClick":case"_animationEasing":break;case"collapsible":this.option("selectionRequired",!this.option("collapsible"));break;case"itemTitleTemplate":case"height":case"deferRendering":this._invalidate();break;case"multiple":this.option("selectionMode",e.value?"multiple":"single");break;default:this.callBase(e)}},expandItem(e){return this._deferredAnimate=Ae(),this.selectItem(e),this._deferredAnimate.promise()},collapseItem(e){return this._deferredAnimate=Ae(),this.unselectItem(e),this._deferredAnimate.promise()},updateDimensions(){return this._updateItemHeights(!1)}});xt("dxAccordion",j1);const Qne=j1,U1=c1.inherit({_getDefaultOptions(){return pe(this.callBase(),{toolbarItems:[],showCloseButton:!1,enableBodyScroll:!0,showTitle:!1,title:null,titleTemplate:null,onTitleRendered:null,bottomTemplate:null,preventScrollEvents:!1,propagateOutsideClick:!0})},_render(){this.$element().addClass("dx-tooltip"),this.$wrapper().addClass("dx-tooltip-wrapper"),this.callBase()},_renderContent(){this.callBase(),this._toggleAriaAttributes()},_toggleAriaDescription(e){const n=V(this.option("target")),t=e?this._contentId:void 0;$t(n.get(0))||this.setAria("describedby",t,n)},_toggleAriaAttributes(){this._contentId=`dx-${new Pn}`,this.$overlayContent().attr({id:this._contentId}),this._toggleAriaDescription(!0)}});xt("dxTooltip",U1);const Jne=U1,$1=class eie extends rF{_init(){super._init(),this._createOnVisibilityChangingAction(),this._createOnVisibilityChangedAction()}isVisible(){return this.option("isVisible")}isMobileView(){return this.option("isMobileView")}_initMarkup(){super._initMarkup();const n=this.$element(),t=V("<div>").addClass(this._getPopupClass()).addClass(this.isMobileView()&&"dx-diagram-mobile-popup").appendTo(n);this._popup=this._createComponent(t,Tf,this._getPopupOptions()),this._updatePopupVisible()}show(){this.option("isVisible",!0)}hide(){this.option("isVisible",!1)}toggle(){this.option("isVisible",!this.isVisible())}repaint(){this._popup.repaint()}_getPopupContent(){return this._popup.content()}_getPopupTitle(){return V(this._getPopupContent()).parent().find(".dx-popup-title")}_getPointerUpElements(){return[this._getPopupContent(),this._getPopupTitle()]}_getVerticalPaddingsAndBorders(){const n=V(this._getPopupContent());return et(n)-ut(n)}_getHorizontalPaddingsAndBorders(){const n=V(this._getPopupContent());return qt(n)-Xe(n)}_getPopupClass(){return""}_getPopupWidth(){return this.option("width")||"auto"}_getPopupMaxWidth(){return this.option("maxWidth")}_getPopupMinWidth(){return this.option("minWidth")}_getPopupHeight(){return this.option("height")||"auto"}_getPopupMaxHeight(){return this.option("maxHeight")}_getPopupMinHeight(){return this.option("minHeight")}_getPopupPosition(){return{}}_getPopupContainer(){return this.option("container")}_getPopupSlideAnimationObject(n){return pe({type:"slide",start:()=>{V("body").css("overflow","hidden")},complete:()=>{V("body").css("overflow","")}},n)}_getPopupAnimation(){return{hide:{type:"fadeOut"},show:{type:"fadeIn"}}}_getPopupOptions(){const n=this;let t=this._getPopupClass();return this.isMobileView()&&(t+=" dx-diagram-mobile-popup"),{animation:Ke()?this._getPopupAnimation():null,shading:!1,showTitle:!1,focusStateEnabled:!1,container:this._getPopupContainer(),width:this._getPopupWidth(),height:this._getPopupHeight(),maxWidth:this._getPopupMaxWidth(),maxHeight:this._getPopupMaxHeight(),minWidth:this._getPopupMinWidth(),minHeight:this._getPopupMinHeight(),position:this._getPopupPosition(),showCloseButton:!0,wrapperAttr:{class:t},onContentReady:function(){n._renderPopupContent(n._popup.content())},onShowing:()=>{this._onVisibilityChangingAction({visible:!0,component:this})},onShown:()=>{this.option("isVisible",!0),this._onVisibilityChangedAction({visible:!0,component:this})},onHiding:()=>{this._onVisibilityChangingAction({visible:!1,component:this})},onHidden:()=>{this.option("isVisible",!1),this._onVisibilityChangedAction({visible:!1,component:this})}}}_renderPopupContent(n){}_updatePopupVisible(){this._popup.option("visible",this.isVisible())}_createOnVisibilityChangingAction(){this._onVisibilityChangingAction=this._createActionByOption("onVisibilityChanging")}_createOnVisibilityChangedAction(){this._onVisibilityChangedAction=this._createActionByOption("onVisibilityChanged")}_optionChanged(n){switch(n.name){case"onVisibilityChanging":this._createOnVisibilityChangingAction();break;case"onVisibilityChanged":this._createOnVisibilityChangedAction();break;case"container":this._popup.option("container",this._getPopupContainer());break;case"width":this._popup.option("width",this._getPopupWidth());break;case"height":this._popup.option("height",this._getPopupHeight());break;case"maxWidth":this._popup.option("maxWidth",this._getPopupMaxWidth());break;case"maxHeight":this._popup.option("maxHeight",this._getPopupMaxHeight());break;case"minWidth":this._popup.option("minWidth",this._getPopupMinWidth());break;case"minHeight":this._popup.option("minHeight",this._getPopupMinHeight());break;case"isMobileView":this._invalidate();break;case"isVisible":this._updatePopupVisible();break;default:super._optionChanged(n)}}_getDefaultOptions(){return pe(super._getDefaultOptions(),{isVisible:!0,isMobileView:!1,offsetX:0,offsetY:0})}},nie=class tie extends $1{_init(){super._init(),this._toolboxes=[],this._filterText="",this._createOnShapeCategoryRenderedAction(),this._createOnFilterChangedAction()}_getPopupClass(){return"dx-diagram-toolbox-popup"}_getPopupHeight(){return this.isMobileView()?"100%":super._getPopupHeight()}_getPopupMaxHeight(){return this.isMobileView()?"100%":super._getPopupMaxHeight()}_getPopupMinHeight(){return 130}_getPopupPosition(){const t={my:"left top",at:"left top",of:this.option("offsetParent")};return this.isMobileView()?t:pe(t,{offset:this.option("offsetX")+" "+this.option("offsetY")})}_getPopupAnimation(){const n=this.option("offsetParent");return this.isMobileView()?{hide:this._getPopupSlideAnimationObject({direction:"left",from:{position:{my:"left top",at:"left top",of:n}},to:{position:{my:"right top",at:"left top",of:n}}}),show:this._getPopupSlideAnimationObject({direction:"right",from:{position:{my:"right top",at:"left top",of:n}},to:{position:{my:"left top",at:"left top",of:n}}})}:super._getPopupAnimation()}_getPopupOptions(){const n=super._getPopupOptions();return this.isMobileView()?n:pe(n,{showTitle:!0,toolbarItems:[{widget:"dxButton",location:"center",options:{activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,icon:"diagram-toolbox-drag",stylingMode:"outlined",type:"normal"}}]})}_renderPopupContent(n){let t="100%";if(this.option("showSearch")){const o=V("<div>").addClass("dx-diagram-toolbox-input-container").appendTo(n);this._updateElementWidth(o),this._renderSearchInput(o),Ke()&&(t="calc(100% - "+ut(this._searchInput.$element())+"px)")}const i=V("<div>").addClass("dx-diagram-toolbox-panel").appendTo(n);lu(i,t),this._updateElementWidth(i),this._renderScrollView(i)}_updateElementWidth(n){void 0!==this.option("toolboxWidth")&&n.css("width",this.option("toolboxWidth"))}updateMaxHeight(){if(this.isMobileView())return;let n=6;if(this._popup){const t=this._getPopupTitle();n+=et(t)}this._accordion&&(n+=et(this._accordion.$element())),this._searchInput&&(n+=et(this._searchInput.$element())),this.option("maxHeight",n)}_renderSearchInput(n){const t=V("<div>").addClass("dx-diagram-toolbox-input").appendTo(n);this._searchInput=this._createComponent(t,ld,{stylingMode:"outlined",placeholder:de.format("dxDiagram-uiSearch"),onValueChanged:i=>{this._onInputChanged(i.value)},valueChangeEvent:"keyup",buttons:[{name:"search",location:"after",options:{activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,icon:"search",stylingMode:"outlined",type:"normal",onClick:()=>{this._searchInput.focus()}}}]})}_renderScrollView(n){const t=V("<div>").appendTo(n);this._scrollView=this._createComponent(t,kf);const i=this._scrollView._moveIsAllowed.bind(this._scrollView);this._scrollView._moveIsAllowed=r=>{for(let c=0;c<this._toolboxes.length;c++)if(V(this._toolboxes[c]).children(".dxdi-tb-start-drag-flag").length)return!1;return i(r)};const o=V("<div>").appendTo(this._scrollView.content());this._updateElementWidth(o),this._renderAccordion(o)}_getAccordionDataSource(){const n=[],t=this.option("toolboxGroups");for(let i=0;i<t.length;i++){const o=t[i].category;n.push({category:o,title:t[i].title||o,expanded:t[i].expanded,displayMode:t[i].displayMode,shapes:t[i].shapes,onTemplate:(v,S,T)=>{const F=V(S);this._onShapeCategoryRenderedAction({category:T.category,displayMode:T.displayMode,dataToggle:"shape-toolbox-tooltip",shapes:T.shapes,$element:F}),this._toolboxes.push(F),""!==this._filterText&&this._onFilterChangedAction({text:this._filterText,filteringToolboxes:this._toolboxes.length-1}),this._createTooltips(F)}})}return n}_createTooltips(n){if(this._isTouchMode())return;const t=n.find('[data-toggle="shape-toolbox-tooltip"]'),i=this.$element();t.each((o,r)=>{const c=V(r),v=c.attr("title");if(v){const S=V("<div>").text(v).appendTo(i);this._createComponent(S,Jne,{target:c.get(0),showEvent:"mouseenter",hideEvent:"mouseleave",position:"top",animation:{show:{type:"fade",from:0,to:1,delay:500},hide:{type:"fade",from:1,to:0,delay:100}}})}})}_isTouchMode(){const{Browser:n}=Ze();return n.TouchUI}_renderAccordion(n){this._accordion=this._createComponent(n,Qne,{multiple:!0,animationDuration:0,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,collapsible:!0,displayExpr:"title",dataSource:this._getAccordionDataSource(),disabled:this.option("disabled"),itemTemplate:(t,i,o)=>{t.onTemplate(this,o,t)},onSelectionChanged:t=>{this._updateScrollAnimateSubscription(t.component)},onContentReady:t=>{t.component.option("selectedItems",[]);const i=t.component.option("dataSource");for(let o=0;o<i.length;o++)!1===i[o].expanded?t.component.collapseItem(o):!0===i[o].expanded&&t.component.expandItem(o);i.length&&void 0===i[0].expanded&&t.component.expandItem(0),this._updateScrollAnimateSubscription(t.component)}})}_updateScrollAnimateSubscription(n){n._deferredAnimate=new Ae,n._deferredAnimate.done(()=>{this.updateMaxHeight(),this._scrollView.update(),this._updateScrollAnimateSubscription(n)})}_onInputChanged(n){this._filterText=n,this._onFilterChangedAction({text:this._filterText,filteringToolboxes:this._toolboxes.map((t,i)=>i)}),this.updateTooltips(),this.updateMaxHeight(),this._scrollView.update()}updateFilter(){this._onInputChanged(this._filterText)}updateTooltips(){this._toolboxes.forEach(n=>{const t=V(n);this._createTooltips(t)})}_createOnShapeCategoryRenderedAction(){this._onShapeCategoryRenderedAction=this._createActionByOption("onShapeCategoryRendered")}_createOnFilterChangedAction(){this._onFilterChangedAction=this._createActionByOption("onFilterChanged")}_optionChanged(n){switch(n.name){case"onShapeCategoryRendered":this._createOnShapeCategoryRenderedAction();break;case"onFilterChanged":this._createOnFilterChangedAction();break;case"showSearch":case"toolboxWidth":this._invalidate();break;case"toolboxGroups":this._accordion.option("dataSource",this._getAccordionDataSource());break;default:super._optionChanged(n)}}},oie={onStart:mk,onUpdated:_k,onEnd:hx,onCancel:"dxswipecancel"},W1=bl.inherit({_getDefaultOptions:function(){return pe(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),this.option("disabled"))return;const e=this.NAME;this._createEventData(),Ee(oie,function(n,t){const i=this._createActionByOption(n,{context:this});t=Te(t,e),ue.on(this.$element(),t,this._eventData,function(o){return i({event:o})})}.bind(this))},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){ue.off(this.$element(),".dxSwipeable")},_optionChanged:function(e){switch(e.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(e)}},_useTemplates:function(){return!1}});mu(W1,"dxSwipeable");const G1=W1,og={move(e,n){Tn(e,{left:n})}},Jx={moveTo(e,n,t,i){Wn.animate(e,{type:"slide",to:{left:n},duration:t,complete:i})},complete(e){Wn.stop(e,!0)}},K1=e=>+e,q1=Mf.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys(){return pe(this.callBase(),{pageUp:De,pageDown:De})},_getDefaultOptions(){return pe(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>"dx-multiview-item",_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=Xe(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(e){const n=this._itemsCount();return e<0&&(e+=n),e>=n&&(e-=n),e},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);const e=this.$element();e.addClass("dx-multiview"),this._$wrapper=V("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(e),this._$itemContainer=V("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();const e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(e,n){this.callBase(e,n),this._deferredItems&&this._deferredItems.splice(n.itemIndex,1)},_beforeItemElementInserted(e){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(e.index,0,null)},_executeItemRenderAction(e,n,t){e=(this.option("items")||[]).indexOf(n),this.callBase(e,n,t)},_renderItemContent(e){const n=Ae(),t=this,{callBase:i}=this,o=Ae();return o.done(()=>{const r=i.call(t,e);n.resolve(r)}),this._deferredItems[e.index]=o,this.option("deferRendering")||o.resolve(),n.promise()},_render(){this.callBase(),_r(()=>{const e=this._getSelectedItemIndices();this._updateItems(e[0])})},_getElementAria:()=>({role:"group",roledescription:de.format("dxMultiView-elementAriaRoleDescription"),label:de.format("dxMultiView-elementAriaLabel")}),_setElementAria(){const e=this._getElementAria();this.setAria(e,this.$element())},_setItemsAria(){const e=this._itemElements(),n=this._itemsCount();e.each((t,i)=>{const o=this._getItemAria({itemIndex:t,itemsCount:n});this.setAria(o,V(i))})},_getItemAria(e){let{itemIndex:n,itemsCount:t}=e;return{role:"group",roledescription:de.format("dxMultiView-itemAriaRoleDescription"),label:de.format("dxMultiView-itemAriaLabel",n+1,t)}},_updateItems(e,n){this._updateItemsPosition(e,n),this._updateItemsVisibility(e,n)},_modifyByChanges(){this.callBase.apply(this,arguments);const e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0])},_updateItemsPosition(e,n){const t=this._itemElements(),i=Ie(n)?-this._animationDirection(n,e):void 0,o=t.eq(e);og.move(o,0),Ie(n)&&og.move(t.eq(n),100*i+"%")},_updateItemsVisibility(e,n){this._itemElements().each((i,o)=>{const r=V(o),c=i!==e&&i!==n;c||this._renderSpecificItem(i),r.toggleClass("dx-multiview-item-hidden",c),this.setAria("hidden",c||void 0,r)})},_renderSpecificItem(e){const n=this._itemElements().eq(e),t=n.find(this._itemContentClass()).length>0;Ie(e)&&!t&&(this._deferredItems[e].resolve(),Cr(n))},_refreshItem(e,n){this.callBase(e,n),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:De,_updateSelection(e,n){const t=e[0],i=n[0];Jx.complete(this._$itemContainer),this._updateItems(i,t);const o=this._animationDirection(t,i);this._animateItemContainer(o*this._itemWidth(),()=>{og.move(this._$itemContainer,0),this._updateItems(t),Xe(this._$itemContainer)})},_animateItemContainer(e,n){const t=this.option("animationEnabled")?200:0;Jx.moveTo(this._$itemContainer,e,t,n)},_animationDirection(e,n){const t=(e=>Nn(this._$itemContainer).left)(),i=(n-e)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return wu(0!==t?t:i)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),G1,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:e=>this._swipeStartHandler(e.event),onUpdated:e=>this._swipeUpdateHandler(e.event),onEnd:e=>this._swipeEndHandler(e.event)})},_findBoundaryIndices(){const e=this.option("items");let n,t;e.forEach((i,o)=>{i?.disabled||(n??(n=o),t=o)}),this._boundaryIndices={firstAvailableIndex:n??0,lastAvailableIndex:t??e.length-1,firstTrueIndex:0,lastTrueIndex:e.length-1}},_swipeStartHandler(e){Jx.complete(this._$itemContainer);const n=this.option("selectedIndex"),t=this.option("loop"),{firstAvailableIndex:i,lastAvailableIndex:o}=this._boundaryIndices,r=this.option("rtlEnabled");e.maxLeftOffset=K1(t||(r?n>i:n<o)),e.maxRightOffset=K1(t||(r?n<o:n>i)),this._swipeDirection=null},_swipeUpdateHandler(e){const{offset:n}=e,t=wu(n)*this._getRTLSignCorrection();if(og.move(this._$itemContainer,n*this._itemWidth()),t!==this._swipeDirection){this._swipeDirection=t;const i=this.option("selectedIndex"),o=this._normalizeIndex(i-t);this._updateItems(i,o)}},_findNextAvailableIndex(e,n){const{items:t,loop:i}=this.option(),{firstAvailableIndex:o,lastAvailableIndex:r,firstTrueIndex:c,lastTrueIndex:v}=this._boundaryIndices,S=[c,o].includes(e),T=[v,r].includes(e);if(i){if(S&&n<0)return r;if(T&&n>0)return o}for(let F=e+n;F>=o&&F<=r;F+=n)if(!t[F].disabled)return F;return e},_swipeEndHandler(e){const n=e.targetOffset*this._getRTLSignCorrection();if(n){const t=this._findNextAvailableIndex(this.option("selectedIndex"),-n);this.option("selectedIndex",t);const i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",st(i))}else this._animateItemContainer(0,De)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(e){const n=this.callBase.apply(this,arguments);return this._itemFocusLooped=n.is(e.last()),n},_nextItem(e){const n=this.callBase.apply(this,arguments);return this._itemFocusLooped=n.is(e.first()),n},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(e){e&&this._dimensionChanged()},_updateSwipeDisabledState(){const e=this._getSwipeDisabledState();G1.getInstance(this.$element()).option("disabled",e)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(e){const{value:n}=e;switch(e.name){case"loop":this.option("loopItemFocus",n);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(e);break;default:this.callBase(e)}}});xt("dxMultiView",q1);const sie=q1;function Z1(e){return e.scrollWidth-e.clientWidth}const eL="dx-tabs-expanded",lie=ju.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge(e){if(this._$element.children(".dx-badge").remove(),!e)return;const n=V("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(e);this._$element.append(n)}}),nL={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},vd={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},eO={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},nO=Mf.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions(){return pe(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:e=>e?e.badge:void 0,_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules(){const e=yo();return this.callBase().concat([{device:()=>"desktop"!==je.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>Go(e),options:{iconPosition:"top",stylingMode:"secondary"}},{device:()=>Fi(e),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:"top"}}])},_init(){const{orientation:e,stylingMode:n,scrollingEnabled:t}=this.option(),i=this._getIndicatorPosition();this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(t),this._toggleOrientationClass(e),this._toggleIndicatorPositionClass(i),this._toggleIconPositionClass(),this._toggleStylingModeClass(n),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(e,n){const t=lt(e)?e?.text:e;if(Ie(t)){const i=V("<span>").addClass("dx-tab-text-span");i.text(t);const o=V("<span>").addClass("dx-tab-text-span-pseudo");o.text(t),o.appendTo(i),i.appendTo(n)}Ie(e.html)&&n.html(e.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new $s((e,n)=>{this._prepareDefaultItemTemplate(n,e);const t=Qs(n.icon);t&&t.prependTo(e);const i=V("<div>").addClass("dx-tab-text");e.wrapInner(i)},["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(e,n){const{itemData:t,container:i,index:o}=n;return this._deferredTemplates[o]=Ae(),e.render({model:t,container:i,index:o,onRendered:()=>this._deferredTemplates[o].resolve()})},_itemClass:()=>"dx-tab",_selectedItemClass:()=>"dx-tab-selected",_itemDataKey:()=>"dxTabData",_initMarkup(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){Ft.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){const e=["dx-tabs-stretched",eL,"dx-overflow-hidden"];if(this.$element().removeClass(e.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());const n=this.getScrollable();if(n.update(),this.option("rtlEnabled")){const t=Z1(V(this.getScrollable().container()).get(0));n.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass(eL))},_isVertical(){return"vertical"===this.option("orientation")},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){const e=this._getVisibleItems(),n=this._getSummaryItemsSize("width",e,!0),t=Xe(this.$element());return![n,t].includes(0)&&n>t-1},_isItemsHeightExceeded(){const e=this._getVisibleItems();return this._getSummaryItemsSize("height",e,!0)-1>ut(this.$element())},_needStretchItems(){const e=this._getVisibleItems(),n=Xe(this.$element()),t=[];return Ee(e,(c,v)=>{t.push(qt(v,!0))}),Math.max.apply(null,t)>n/e.length+1},_cleanNavButtons(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple(){this._inkRipple=lx()},_getPointerEvent:()=>Wt.up,_toggleActiveState(e,n,t){if(this.callBase.apply(this,arguments),!this._inkRipple)return;const i={element:e,event:t};n?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)},_renderMultiple(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper(){this._$wrapper=V("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){const e=this.$element().wrapInner(V("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(e,Rk,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem(e){if(!this._scrollable)return;const n=this._editStrategy.getItemElement(e);this._scrollable.scrollToElement(n)},_renderNavButtons(){const{showNavButtons:e,rtlEnabled:n}=this.option();if(this.$element().toggleClass("dx-tabs-nav-buttons",e),!e)return;this._leftButton=this._createNavButton(-30,n?"chevronnext":"chevronprev");const t=this._leftButton.$element();t.addClass("dx-tabs-nav-button-left"),this.$element().prepend(t),this._rightButton=this._createNavButton(30,n?"chevronprev":"chevronnext");const i=this._rightButton.$element();i.addClass("dx-tabs-nav-button-right"),this.$element().append(i)},_updateNavButtonsAriaDisabled(){[this._leftButton,this._rightButton].forEach(n=>{n?.$element().attr({"aria-disabled":null})})},_updateNavButtonsState(){const e=this._isVertical(),n=this.getScrollable();var t,i,o,r;e?(null===(t=this._leftButton)||void 0===t||t.option("disabled",function Q1(e,n){return Math.round(e)<=n}(n.scrollTop(),1)),null===(i=this._rightButton)||void 0===i||i.option("disabled",function J1(e,n,t,i){return Math.round(function aie(e){return e.scrollHeight-e.clientHeight}(e)-n-t)<=i}(V(n.container()).get(0),n.scrollTop(),0,1))):(null===(o=this._leftButton)||void 0===o||o.option("disabled",function X1(e,n){return Math.round(e)<=n}(n.scrollLeft(),1)),null===(r=this._rightButton)||void 0===r||r.option("disabled",function Y1(e,n,t){return Math.round(Z1(e)-n)<=t}(V(n.container()).get(0),n.scrollLeft(),1))),this._updateNavButtonsAriaDisabled()},_updateScrollPosition(e,n){this._scrollable.update(),this._scrollable.scrollBy(e/n)},_createNavButton(e,n){const t=this._createAction(()=>{this._holdInterval=setInterval(()=>{this._updateScrollPosition(e,5)},5)}),i=Te("dxhold","dxNavButton"),o=Te(Wt.up,"dxNavButton"),r=Te(Wt.out,"dxNavButton"),c=this._createComponent(V("<div>").addClass("dx-tabs-nav-button"),bo,{focusStateEnabled:!1,icon:n,integrationOptions:{},elementAttr:{role:null,"aria-label":null,"aria-disabled":null},onClick:()=>{this._updateScrollPosition(e,1)}}),v=c.$element();return ue.on(v,i,{timeout:300},S=>{t({event:S})}),ue.on(v,o,()=>{this._clearInterval()}),ue.on(v,r,()=>{this._clearInterval()}),c},_clearInterval(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection(e){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(e[0]))},_visibilityChanged(e){e&&this._dimensionChanged()},_dimensionChanged(){this._renderScrolling()},_itemSelectHandler(e){"single"===this.option("selectionMode")&&this.isItemSelected(e.currentTarget)||this.callBase(e)},_clean(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(e){this.$element().toggleClass("dx-tabs-vertical",e)},_toggleTabsHorizontalClass(e){this.$element().toggleClass("dx-tabs-horizontal",e)},_getIndicatorPositionClass:e=>nL[e],_getIndicatorPosition(){const{_indicatorPosition:e,rtlEnabled:n}=this.option();if(e)return e;const t=this._isVertical();return n?t?"left":"bottom":t?"right":"bottom"},_toggleIndicatorPositionClass(e){const n=this._getIndicatorPositionClass(e);this._toggleElementClasses(nL,n)},_toggleScrollingEnabledClass(e){this.$element().toggleClass("dx-tabs-scrolling-enabled",!!e)},_toggleOrientationClass(e){const n="vertical"===e;this._toggleTabsVerticalClass(n),this._toggleTabsHorizontalClass(!n)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case"top":return vd.top;case"end":return vd.end;case"bottom":return vd.bottom;default:return vd.start}},_toggleIconPositionClass(){const e=this._getTabsIconPositionClass();this._toggleElementClasses(vd,e)},_toggleStylingModeClass(e){this._toggleElementClasses(eO,eO[e]??eO.primary)},_toggleElementClasses(e,n){for(const t in e)this.$element().removeClass(e[t]);this.$element().addClass(n)},_toggleFocusedDisabledNextClass(e,n){this._itemElements().eq(e).toggleClass("dx-focused-disabled-next-tab",n)},_toggleFocusedDisabledPrevClass(e,n){this._itemElements().eq(e).toggleClass("dx-focused-disabled-prev-tab",n)},_toggleFocusedDisabledClasses(e){const{selectedIndex:n}=this.option();this._itemElements().removeClass("dx-focused-disabled-next-tab").removeClass("dx-focused-disabled-prev-tab");const t=n-1,i=n+1,o=V(e).index(),r=this._itemElements().eq(i).hasClass("dx-state-disabled"),S=this._itemElements().eq(t).hasClass("dx-state-disabled")&&o===t;this._toggleFocusedDisabledNextClass(n,r&&o===i),this._toggleFocusedDisabledPrevClass(n,S)},_updateFocusedElement(){const{focusStateEnabled:e,selectedIndex:n}=this.option(),t=this._itemElements();if(e&&t.length){const i=t.get(n);this.option({focusedElement:i})}},_optionChanged(e){switch(e.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(e.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(e.name,e.value);break;case"width":case"height":this.callBase(e),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(e);break;case"focusedElement":this._toggleFocusedDisabledClasses(e.value),this.callBase(e),this._scrollToItem(e.value);break;case"rtlEnabled":{this.callBase(e);const n=this._getIndicatorPosition();this._toggleIndicatorPositionClass(n);break}case"orientation":{this._toggleOrientationClass(e.value);const n=this._getIndicatorPosition();this._toggleIndicatorPositionClass(n),Ke()&&this._updateScrollable();break}case"iconPosition":this._toggleIconPositionClass(),Ke()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(e.value),Ke()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(e.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(e),this._updateFocusedElement();break;default:this.callBase(e)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(e,n){this.callBase(e,n),this._renderScrolling()},getScrollable(){return this._scrollable}});nO.ItemClass=lie,xt("dxTabs",nO);const cie=nO,Wl={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},ra={top:"top",right:"right",bottom:"bottom",left:"left"},die={top:"bottom",right:"left",bottom:"top",left:"right"},iO=sie.inherit({_getDefaultOptions(){return pe(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:ra.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:e=>e?e.badge:void 0,_tabsIndicatorPosition:null})},_defaultOptionsRules(){const e=yo();return this.callBase().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!Sl,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>Go(e),options:{stylingMode:"secondary"}},{device:()=>ki(e),options:{iconPosition:"top"}}])},_init(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(e,n){const t=Qs(e?.icon);t&&n.append(t);const i=lt(e)?e?.title:e;if(Ie(i)&&!lt(i)){const o=V("<span>").addClass("dx-tab-text-span");o.append(Pe.createTextNode(i));const r=V("<span>").addClass("dx-tab-text-span-pseudo");r.append(Pe.createTextNode(i)),r.appendTo(o),o.appendTo(n)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new $s((e,n)=>{this._prepareTabsItemTemplate(n,e);const t=V("<div>").addClass("dx-tab-text");e.wrapInner(t)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout(){if(this._tabs)return;const e=this.$element();this._$tabContainer=V("<div>").addClass("dx-tabpanel-tabs").appendTo(e);const n=V("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(n,cie,this._tabConfig()),this._$container=V("<div>").addClass("dx-tabpanel-container").appendTo(e),this._$container.append(this._$wrapper)},_refreshActiveDescendant(){if(!this._tabs)return;const e=this._tabs,n=e.itemElements(),t=V(n[e.option("selectedIndex")]),i=this.getFocusedItemId();this.setAria("controls",void 0,V(n)),this.setAria("controls",i,t)},_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:e,tabsPosition:n}=this.option();return e??die[n]},_tabConfig(){const e=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(n){this.option("selectedIndex",n.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(n){if("focusedElement"===n.name)if(n.value){const t=V(n.value),i=this._itemElements().eq(t.index());this.option("focusedElement",st(i))}else this.option("focusedElement",n.value)}.bind(this),onFocusIn:function(n){this._focusInHandler(n.event)}.bind(this),onFocusOut:function(n){this._isFocusOutHandlerExecuting||this._focusOutHandler(n.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:e}},_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){const{tabsPosition:e}=this.option();return[ra.right,ra.left].includes(e)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case ra.right:return Wl.right;case ra.bottom:return Wl.bottom;case ra.left:return Wl.left;default:return Wl.top}},_toggleTabPanelTabsPositionClass(){for(const n in Wl)this.$element().removeClass(Wl[n]);const e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)},_updateTabsOrientation(){const e=this._getTabsOrientation();this._setTabsOption("orientation",e)},_toggleWrapperFocusedClass(e){this._toggleFocusClass(e,this._$wrapper)},_toggleDisabledFocusedClass(e){this._focusTarget().toggleClass("dx-disabled-focused-tab",e)},_updateFocusState(e,n){this.callBase(e,n);const t=e.target===this._tabs._focusTarget().get(0),i=e.target===this._focusTarget().get(0);if(t&&this._toggleFocusClass(n,this._focusTarget()),t||i){const o=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(n&&!o),this._toggleDisabledFocusedClass(n&&o)}i&&this._toggleFocusClass(n,this._tabs.option("focusedElement"))},_focusOutHandler(e){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(e),this._isFocusOutHandlerExecuting=!1},_setTabsOption(e,n){this._tabs&&this._tabs.option(e,n)},_visibilityChanged(e){e&&this._tabs._dimensionChanged()},registerKeyHandler(e,n){this.callBase(e,n),this._tabs&&this._tabs.registerKeyHandler(e,n)},repaint(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){const e=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",e)},_optionChanged(e){const{name:n,value:t,fullName:i}=e;switch(n){case"dataSource":default:this.callBase(e);break;case"items":this._setTabsOption(n,this.option(n)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(e);break;case"width":this.callBase(e),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(i,t),this.callBase(e),!0===this.option("focusStateEnabled")){const o=this.option("selectedIndex"),r=this._itemElements().eq(o);this.option("focusedElement",st(r))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(i,t),this.callBase(e);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(i,t);break;case"focusedElement":{const o=t&&V(t).index(),r=t&&this._tabs._itemElements().eq(o);if(this._setTabsOption("focusedElement",st(r)),t){const c=this._isDisabled(t);this._toggleWrapperFocusedClass(!c),this._toggleDisabledFocusedClass(c)}this.callBase(e);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",t);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",t);break;case"stylingMode":this._setTabsOption("stylingMode",t);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",t)}}});iO.ItemClass=class uie extends ju{_renderWatchers(){return this._startWatcher("badge",De),super._renderWatchers()}},xt("dxTabPanel",iO);const hie=iO,fie=class pie extends $1{_init(){super._init(),this._commandTabs=Vn.getPropertyPanelCommandTabs(this.option("propertyTabs")),this._createOnCreateToolbar(),this._createOnSelectedGroupChanged()}_initMarkup(){this._toolbars=[],this._selectedToolbar=void 0,super._initMarkup()}_getPopupClass(){let n="dx-diagram-properties-popup";return this._hasTabPanel()||(n+=" dx-diagram-properties-popup-notabs"),n}_getPopupWidth(){return this.isMobileView()?"100%":420}_getPopupHeight(){return 340}_getPopupPosition(){const n=this.option("offsetParent");return this.isMobileView()?{my:"left bottom",at:"left bottom",of:n}:{my:"right bottom",at:"right bottom",of:n,offset:"-"+this.option("offsetX")+" -"+this.option("offsetY")}}_getPopupAnimation(){const n=this.option("offsetParent");return this.isMobileView()?{hide:this._getPopupSlideAnimationObject({direction:"bottom",from:{position:{my:"left bottom",at:"left bottom",of:n}},to:{position:{my:"left top",at:"left bottom",of:n}}}),show:this._getPopupSlideAnimationObject({direction:"top",from:{position:{my:"left top",at:"left bottom",of:n}},to:{position:{my:"left bottom",at:"left bottom",of:n}}})}:super._getPopupAnimation()}_getPopupOptions(){return pe(super._getPopupOptions(),{showTitle:this.isMobileView(),showCloseButton:this.isMobileView()})}_renderPopupContent(n){if(!this._commandTabs.length)return;const t=V("<div>").addClass("dx-diagram-properties-panel").appendTo(n);this._hasTabPanel()?this._renderTabPanel(t):this._renderTabContent(t,this._commandTabs[0],0,!0)}_hasTabPanel(){return this._commandTabs.length>1}_renderTabPanel(n){const t=V("<div>").appendTo(n);this._tabPanel=this._createComponent(t,hie,{focusStateEnabled:!1,dataSource:this._commandTabs,itemTemplate:(i,o,r)=>{this._renderTabContent(r,i,o)},onSelectionChanged:i=>{this._onSelectedGroupChangedAction(),this._onPointerUpAction()},onContentReady:i=>{this._popup.option("height",ut(i.component.$element())+this._getVerticalPaddingsAndBorders()),this._firstScrollView&&(this._scrollViewHeight=et(this._firstScrollView.$element()),this._firstScrollView.option("height",this._scrollViewHeight))}})}_renderTabContent(n,t,i,o){const r=V("<div>").appendTo(n),c=this._createComponent(r,kf,{height:this._scrollViewHeight});this._renderTabInnerContent(c.content(),t,i),o?this._popup.option("height",ut(c.$element())+this._getVerticalPaddingsAndBorders()):this._firstScrollView=this._firstScrollView||c}_renderTabInnerContent(n,t,i){t.groups?t.groups.forEach((o,r)=>{this._renderTabGroupContent(n,i,o.title,o.commands)}):t.commands&&this._renderTabGroupContent(n,i,void 0,t.commands)}_renderTabGroupContent(n,t,i,o){i&&V("<div>").addClass("dx-diagram-properties-panel-group-title").appendTo(n).text(i);const c={$parent:V("<div>").addClass("dx-diagram-properties-panel-group-toolbar").appendTo(n),commands:o};this._onCreateToolbarAction(c),this._toolbars[t]||(this._toolbars[t]=[]),this._toolbars[t].push(c.toolbar),this._selectedToolbar=c.toolbar}getActiveToolbars(){const n=this._tabPanel?this._tabPanel.option("selectedIndex"):0;return this._toolbars[n]}_createOnCreateToolbar(){this._onCreateToolbarAction=this._createActionByOption("onCreateToolbar")}_createOnSelectedGroupChanged(){this._onSelectedGroupChangedAction=this._createActionByOption("onSelectedGroupChanged")}_optionChanged(n){switch(n.name){case"onCreateToolbar":this._createOnCreateToolbar();break;case"onSelectedGroupChanged":this._createOnSelectedGroupChanged();break;case"propertyTabs":this._invalidate();break;default:super._optionChanged(n)}}},mie=class gie extends Ox{constructor(n){super(n);const{DiagramCommand:t}=Ze();this.commandOptions={},this.commandOptions[t.Fullscreen]="fullScreen",this.commandOptions[t.ZoomLevel]=function(i){"object"==typeof this._getOption("zoomLevel")?this._setOption("zoomLevel.value",i):this._setOption("zoomLevel",i)},this.commandOptions[t.SwitchAutoZoom]=function(i){const{AutoZoomMode:o}=Ze();switch(i){case o.FitContent:this._setOption("autoZoomMode","fitContent");break;case o.FitToWidth:this._setOption("autoZoomMode","fitWidth");break;case o.Disabled:this._setOption("autoZoomMode","disabled")}},this.commandOptions[t.ToggleSimpleView]="simpleView",this.commandOptions[t.ShowGrid]="showGrid",this.commandOptions[t.SnapToGrid]="snapToGrid",this.commandOptions[t.GridSize]=function(i){"object"==typeof this._getOption("gridSize")?this._setOption("gridSize.value",i):this._setOption("gridSize",i)},this.commandOptions[t.ViewUnits]="viewUnits",this.commandOptions[t.PageSize]=function(i){const o=this._getOption("pageSize");(void 0===o||o.width!==i.width||o.height!==i.height)&&this._setOption("pageSize",i)},this.commandOptions[t.PageLandscape]=function(i){this._setOption("pageOrientation",i?"landscape":"portrait")},this.commandOptions[t.ViewUnits]=function(i){const{DiagramUnit:o}=Ze();switch(i){case o.In:this._setOption("viewUnits","in");break;case o.Cm:this._setOption("viewUnits","cm");break;case o.Px:this._setOption("viewUnits","px")}},this.commandOptions[t.PageColor]="pageColor",this._updateLock=0}getCommandKeys(){return Object.keys(this.commandOptions).map(function(n){return parseInt(n)})}setItemValue(n,t){if(!this.isUpdateLocked()){this.beginUpdate();try{"function"==typeof this.commandOptions[n]?this.commandOptions[n].call(this,t):this._setOption(this.commandOptions[n],t)}finally{this.endUpdate()}}}beginUpdate(){this._updateLock++}endUpdate(){this._updateLock--}isUpdateLocked(){return this._updateLock>0}_getOption(n){return this._owner.option(n)}_setOption(n,t){this._owner.option(n,t)}},lL=Js.inherit({_getDefaultOptions(){return pe(this.callBase(),{min:0,max:100,value:0})},_initMarkup(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper(){this._$wrapper=V("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())},_renderContainer(){this._$bar=V("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)},_renderRange(){this._$range=V("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)},_renderValue(){const e=this.option("value"),n=this.option("min"),t=this.option("max");if(n>t)return;if(e<n)return this.option("value",n),void(this._currentRatio=0);if(e>t)return this.option("value",t),void(this._currentRatio=1);const i=n===t?0:(e-n)/(t-n);!this._needPreventAnimation&&this._setRangeStyles({width:100*i+"%"}),this.setAria({valuemin:this.option("min"),valuemax:t,valuenow:e}),this._currentRatio=i},_rangeStylesConfig(){return{width:100*this._currentRatio+"%"}},_setRangeStyles(e){Wn.stop(this._$range),e?this._needPreventAnimation||!Ke()||Wn.animate(this._$range,{type:"custom",duration:100,to:e}):this._$range.css({width:0})},_optionChanged(e){switch(e.name){case"value":this._renderValue(),this.callBase(e);break;case"max":case"min":this._renderValue();break;default:this.callBase(e)}},_dispose(){Wn.stop(this._$range),this.callBase()}});xt("dxTrackBar",lL);const cL="dx-progressbar-animating-segment",uL=lL.inherit({_getDefaultOptions(){return pe(this.callBase(),{value:0,statusFormat:e=>`Progress: ${Math.round(100*e)}%`,showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"android"===e.platform,options:{_animatingSegmentCount:2}}])},_initMarkup(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),V("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range"),this._toggleStatus(this.option("showStatus"))},_useTemplates:()=>!1,_createCompleteAction(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus(){this._$status=V("<div>").addClass("dx-progressbar-status")},_renderIndeterminateState(){this._$segmentContainer=V("<div>").addClass("dx-progressbar-animating-container");const e=this.option("_animatingSegmentCount");for(let n=0;n<e;n++)V("<div>").addClass(cL).addClass(`${cL}-${n+1}`).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus(e){const n=this.option("statusPosition").split(" ");e?"top"===n[0]||"left"===n[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass(){const n=this.option("statusPosition").split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");let t=`dx-position-${n[0]}`;n[1]&&(t+=`-${n[1]}`),this._$wrapper.addClass(t)},_toggleIndeterminateState(e){e?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue(){const e=this.option("value"),n=this.option("max");e||0===e?(this._$segmentContainer&&this._toggleIndeterminateState(!1),e===n&&this._completeAction(),this.callBase(),this._setStatus()):this._toggleIndeterminateState(!0)},_setStatus(){let e=this.option("statusFormat");e=Be(e)?e.bind(this):function(t){return t};const n=e(this._currentRatio,this.option("value"));this._$status.text(n)},_dispose(){this._$status.remove(),this.callBase()},_optionChanged(e){switch(e.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(e.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(e)}}});xt("dxProgressBar",uL);const vie=uL,yie=Js,yd=ot(),oO=()=>!!yd.FormData;class dL extends yie{_supportedKeys(){const n=t=>{t.preventDefault();const i=this._selectButton.$element();ue.trigger(i,si)};return pe(super._supportedKeys(),{space:n,enter:n})}_setOptionsByReference(){super._setOptionsByReference(),pe(this._optionsByReference,{value:!0})}_getDefaultOptions(){return pe(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:de.format("dxFileUploader-selectFile"),uploadButtonText:de.format("dxFileUploader-upload"),labelText:de.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:de.format("dxFileUploader-readyToUpload"),uploadedMessage:de.format("dxFileUploader-uploaded"),uploadFailedMessage:de.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:de.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:de.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:de.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:de.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal",_buttonStylingMode:"contained"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===je.real().deviceType&&!je.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>"desktop"!==je.real().deviceType,options:{useDragOver:!1}},{device:()=>!oO(),options:{uploadMode:"useForm"}},{device:()=>"desktop"!==je.real().deviceType,options:{nativeDropSupported:!1}},{device:()=>Fi(),options:{_uploadButtonType:"default"}},{device:()=>Go(),options:{_buttonStylingMode:"text"}}])}_initOptions(n){const t="labelText"in n;super._initOptions(n),!t&&!this._shouldDragOverBeRendered()&&this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){if(this.option("chunkSize")>0){const n=this.option("uploadChunk");this._uploadStrategy=n&&Be(n)?new bie(this):new Oie(this)}else{const n=this.option("uploadFile");this._uploadStrategy=n&&Be(n)?new Die(this):new Sie(this)}}_initFileInput(){this._isCustomClickEvent=!1;const{multiple:n,accept:t,hint:i}=this.option();this._$fileInput||(this._$fileInput=V("<input>").attr("type","file"),ue.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),ue.on(this._$fileInput,"click",r=>(r.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent)));const o={multiple:n,accept:t,tabIndex:-1};Ie(i)&&(o.title=i),this._$fileInput.prop(o)}_inputChangeHandler(){if(this._doPreventInputChange)return;const n=this._$fileInput.val().replace(/^.*\\/,""),t=this._$fileInput.prop("files");if(t&&!t.length&&"useForm"!==this.option("uploadMode"))return;const i=t?this._getFiles(t):[{name:n}];this._changeValue(i),"instantly"===this.option("uploadMode")&&this._uploadFiles()}_shouldFileListBeExtended(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}_changeValue(n){const t=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",t.concat(n))}_getFiles(n){const t=[];return Ee(n,(i,o)=>t.push(o)),t}_getFile(n){const t=rn(n)?this.option("value")[n]:n;return this._files.filter(i=>i.value===t)[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=V("<div>")),this._updateInputLabelText()}_updateInputLabelText(){const n=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(n)}_focusTarget(){return this.$element().find(".dx-fileuploader-button")}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(n){n.progressBar=this._createProgressBar(n.value.size),n.progressBar.$element().appendTo(n.$file),this._initStatusMessage(n),this._ensureCancelButtonInitialized(n)}_setStatusMessage(n,t){setTimeout(()=>{this.option("showFileList")&&n.$statusMessage&&(n.$statusMessage.text(t),n.$statusMessage.css("display",""),n.progressBar.$element().remove())},400)}_getUploadAbortedStatusMessage(){return"instantly"===this.option("uploadMode")?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){const n=this.option("value");this._files&&(0===n?.length||!this._shouldFileListBeExtended())&&(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),Ee(n?.slice(this._files.length),(t,i)=>{const o=this._createFile(i);this._validateFile(o),this._files.push(o)})}_preventFilesUploading(n){n.forEach(t=>this._uploadStrategy.abortUpload(t))}_validateFile(n){n.isValidFileExtension=this._validateFileExtension(n),n.isValidMinSize=this._validateMinFileSize(n),n.isValidMaxSize=this._validateMaxFileSize(n)}_validateFileExtension(n){const t=this.option("allowedFileExtensions"),i=this.option("accept"),o=this._getAllowedFileTypes(i),r=n.value.name.substring(n.value.name.lastIndexOf(".")).toLowerCase();if(0!==i?.length&&!this._isFileTypeAllowed(n.value,o))return!1;if(0===t?.length)return!0;for(let c=0;c<t.length;c++)if(r===t[c].toLowerCase())return!0;return!1}_validateMaxFileSize(n){const t=n.value.size,i=this.option("maxFileSize");return!(i>0)||t<=i}_validateMinFileSize(n){const t=n.value.size,i=this.option("minFileSize");return!(i>0)||t>=i}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(n){return{value:n,loadedSize:0,onProgress:bt(),onAbort:bt(),onLoad:bt(),onError:bt(),onLoadStart:bt(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(n){n.isAborted=!1,n.uploadStarted=!1,n.isStartLoad=!1,n.loadedSize=0,n.chunksData=void 0,n.request=void 0}_renderFiles(){var n;const t=this.option("value");this._$filesContainer?(!this._shouldFileListBeExtended()||0===t?.length)&&this._$filesContainer.empty():this._$filesContainer=V("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);const i=this.option("showFileList");i&&Ee(this._files,(o,r)=>{r.$file||this._renderFile(r)}),this.$element().toggleClass("dx-fileuploader-show-file-list",i),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),null===(n=this._validationMessage)||void 0===n||n.repaint()}_renderFile(n){const{value:t}=n,i=V("<div>").addClass("dx-fileuploader-file-container").appendTo(this._$filesContainer);this._renderFileButtons(n,i),n.$file=V("<div>").addClass("dx-fileuploader-file").appendTo(i);const o=V("<div>").addClass("dx-fileuploader-file-info").appendTo(n.$file);n.$statusMessage=V("<div>").addClass("dx-fileuploader-file-status-message").appendTo(n.$file),V("<div>").addClass("dx-fileuploader-file-name").text(t.name).appendTo(o),Ie(t.size)&&V("<div>").addClass("dx-fileuploader-file-size").text(this._getFileSize(t.size)).appendTo(o),n.isValid()?n.$statusMessage.text(this.option("readyToUploadMessage")):(n.isValidFileExtension||n.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),n.isValidMaxSize||n.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),n.isValidMinSize||n.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),i.addClass("dx-fileuploader-invalid"))}_createValidationElement(n){return V("<span>").text(this.option(n))}_updateFileNameMaxWidth(){const n=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,t="useButtons"===this.option("uploadMode")?1:0,i=Xe(this._$filesContainer.find(".dx-fileuploader-file-container").first())||Xe(this._$filesContainer),o=this._$filesContainer.find(".dx-fileuploader-button-container").eq(0),r=Xe(o)*(n+t),c=this._$filesContainer.find(".dx-fileuploader-file-size").eq(0),v=c.text();c.text("1000 Mb");const S=Xe(c);c.text(v),this._$filesContainer.find(".dx-fileuploader-file-name").css("maxWidth",i-r-S)}_renderFileButtons(n,t){const i=this._getCancelButton(n);i&&t.append(i);const o=this._getUploadButton(n);o&&t.append(o)}_getCancelButton(n){if("useForm"===this.option("uploadMode"))return null;const{allowCanceling:t,readOnly:i,hoverStateEnabled:o,_buttonStylingMode:r}=this.option();return n.cancelButton=this._createComponent(V("<div>").addClass("dx-fileuploader-button dx-fileuploader-cancel-button"),bo,{onClick:()=>this._removeFile(n),icon:"close",visible:t,disabled:i,integrationOptions:{},hoverStateEnabled:o,stylingMode:r}),V("<div>").addClass("dx-fileuploader-button-container").append(n.cancelButton.$element())}_getUploadButton(n){if(!n.isValid()||"useButtons"!==this.option("uploadMode"))return null;const{hoverStateEnabled:t,_buttonStylingMode:i}=this.option();return n.uploadButton=this._createComponent(V("<div>").addClass("dx-fileuploader-button dx-fileuploader-upload-button"),bo,{onClick:()=>this._uploadFile(n),icon:"upload",hoverStateEnabled:t,stylingMode:i}),n.onLoadStart.add(()=>n.uploadButton.option({visible:!1,disabled:!0})),n.onAbort.add(()=>n.uploadButton.option({visible:!0,disabled:!1})),V("<div>").addClass("dx-fileuploader-button-container").append(n.uploadButton.$element())}_removeFile(n){var t;null===(t=n.$file)||void 0===t||t.parent().remove(),this._files.splice(this._files.indexOf(n),1);const i=this.option("value").slice();i.splice(i.indexOf(n.value),1),this._preventRecreatingFiles=!0,this.option("value",i),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(n){if("useForm"===this.option("uploadMode")||!Ie(n))return;const t=this._getFile(n);t&&(t.uploadStarted&&this._preventFilesUploading([t]),this._removeFile(t))}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(n){for(let t=0;t<n.length;t++)if(!n[t].isValid())return!0;return!1}_getFileSize(n){let t=0;const i=[de.format("dxFileUploader-bytes"),de.format("dxFileUploader-kb"),de.format("dxFileUploader-Mb"),de.format("dxFileUploader-Gb")],o=i.length-1;for(;t<o&&n>=1024;)n/=1024,t++;return`${Math.round(n)} ${i[t]}`}_renderSelectButton(){const n=V("<div>").addClass("dx-fileuploader-button").appendTo(this._$inputWrapper);this._selectButton=this._createComponent(n,bo,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),"desktop"===je.real().deviceType?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,ue.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(n){Ie(n)&&(this._detachSelectFileDialogHandler(n),ue.on(V(n),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(n){Ie(n)&&ue.off(V(n),"click",this._selectFileDialogHandler)}_renderUploadButton(){if("useButtons"!==this.option("uploadMode"))return;const n=V("<div>").addClass("dx-fileuploader-button").addClass("dx-fileuploader-upload-button").appendTo(this._$content);this._uploadButton=this._createComponent(n,bo,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=V("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();const n=`dx-fileuploader-input-label-${new Pn}`;this._$inputLabel.attr("id",n).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",n,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(n,t){const i=V(t),o=V("<span>").addClass("dx-button-text").text(n.text);return i.append(o).append(this._$fileInput),i}_renderInputWrapper(){this._$inputWrapper=V("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}_detachDragEventHandlers(n){Ie(n)&&ue.off(V(n),Te("",this.NAME))}_attachDragEventHandlers(n){const t=n!==this._$inputWrapper;!Ie(n)||!this._shouldDragOverBeRendered()||(this._detachDragEventHandlers(n),n=V(n),ue.on(n,Te("dragenter",this.NAME),this._dragEnterHandler.bind(this,t)),ue.on(n,Te("dragover",this.NAME),this._dragOverHandler.bind(this,t)),ue.on(n,Te("dragleave",this.NAME),this._dragLeaveHandler.bind(this,t)),ue.on(n,Te("drop",this.NAME),this._dropHandler.bind(this,t)))}_applyInputAttributes(n){this._$fileInput.attr(n)}_useInputForDrop(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}_getDropZoneElement(n,t){let i=n?Array.from(V(this.option("dropZone"))):[this._$inputWrapper];return i=i.map(o=>V(o).get(0)),i[i.indexOf(t.currentTarget)]}_dragEnterHandler(n,t){if(this.option("disabled"))return!1;this._useInputForDrop()||t.preventDefault();const i=this._getDropZoneElement(n,t);Ie(i)&&this._shouldRaiseDragOver(t,i)&&(this._activeDropZone=i,this._tryToggleDropZoneActive(!0,n,t))}_shouldRaiseDragOver(n,t){return null===this._activeDropZone&&this.isMouseOverElement(n,t,!1)&&n.originalEvent.dataTransfer.types.find(i=>"Files"===i)}_dragOverHandler(n,t){if(this._useInputForDrop()||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",!n){const i=this._getDropZoneElement(!1,t);this._shouldRaiseDragOver(t,i)&&this._dragEnterHandler(!1,t),this._shouldRaiseDragLeave(t,!1)&&this._dragLeaveHandler(!1,t)}}_dragLeaveHandler(n,t){this._useInputForDrop()||t.preventDefault(),this._shouldRaiseDragLeave(t,n)&&(this._tryToggleDropZoneActive(!1,n,t),this._activeDropZone=null)}_shouldRaiseDragLeave(n,t){return null!==this._activeDropZone&&!this.isMouseOverElement(n,this._activeDropZone,!t,-1)}_tryToggleDropZoneActive(n,t,i){const o=n?"addClass":"removeClass";this[n?"_dropZoneEnterAction":"_dropZoneLeaveAction"]({event:i,dropZoneElement:this._activeDropZone}),t||this.$element()[o]("dx-fileuploader-dragover")}_dropHandler(n,t){if(this._activeDropZone=null,n||this.$element().removeClass("dx-fileuploader-dragover"),this._useInputForDrop()||n&&this._isInteractionDisabled())return;t.preventDefault();const o=this._getFiles(t.originalEvent.dataTransfer.files);!this.option("multiple")&&o.length>1||0===o.length||(this._changeValue(o),"instantly"===this.option("uploadMode")&&this._uploadFiles())}_areAllFilesLoaded(){return this._files.every(n=>!n.isValid()||n._isError||n._isLoaded||n.isAborted)}_handleAllFilesUploaded(){this._recalculateProgress(),this._areAllFilesLoaded()&&this._filesUploadedAction()}_getAllowedFileTypes(n){return n.length?n.split(",").map(t=>t.trim()):[]}_isFileTypeAllowed(n,t){for(let i=0,o=t.length;i<o;i++){let r=t[i];if("."===r[0]){if(r=r.replace(".","\\."),n.name.match(new RegExp(`${r}$`,"i")))return!0}else if(r=r.replace(new RegExp("\\*","g"),""),n.type.match(new RegExp(r,"i")))return!0}return!1}_renderWrapper(){const n=V("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),t=V("<div>").addClass("dx-fileuploader-container").appendTo(n);this._$content=V("<div>").addClass("dx-fileuploader-content").appendTo(t)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach(n=>{n.$file=null,n.$statusMessage=null}),super._clean()}abortUpload(n){if("useForm"!==this.option("uploadMode"))if(Ie(n)){const t=this._getFile(n);t&&this._preventFilesUploading([t])}else this._preventFilesUploading(this._files)}upload(n){if("useForm"!==this.option("uploadMode"))if(Ie(n)){const t=this._getFile(n);t&&oO()&&this._uploadFile(t)}else this._uploadFiles()}_uploadFiles(){oO()&&Ee(this._files,(n,t)=>this._uploadFile(t))}_uploadFile(n){this._uploadStrategy.upload(n)}_updateProgressBar(n,t){n.progressBar&&n.progressBar.option({value:t.loaded,showStatus:!0}),this._progressAction({file:n.value,segmentSize:t.currentSegmentSize,bytesLoaded:t.loaded,bytesTotal:t.total,event:t.event,request:n.request})}_updateTotalProgress(n,t){let i=0;Ie(n)&&(this._files.length>0&&this._areAllFilesLoaded()&&0===n&&0===t?i=this._getProgressValue(1):n&&(i=this._getProgressValue(t/n))),this.option("progress",i),this._setLoadedSize(t)}_getProgressValue(n){return Math.floor(100*n)}_initStatusMessage(n){n.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(n){if(n.isInitialized)return;n.cancelButton.option("onClick",()=>{this._preventFilesUploading([n]),this._removeFile(n)});const t=()=>{setTimeout(()=>{n.cancelButton.option({visible:!1})},400)};n.onLoad.add(t),n.onError.add(t)}_createProgressBar(n){return this._createComponent(V("<div>"),vie,{value:void 0,min:0,max:n,statusFormat:t=>`${this._getProgressValue(t)}%`,showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,Ee(this._files,(n,t)=>{this._totalFilesSize+=t.value.size})),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,Ee(this._files,(n,t)=>{this._totalLoadedFilesSize+=t.loadedSize})),this._totalLoadedFilesSize}_setLoadedSize(n){this._totalLoadedFilesSize=n}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(n,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return!1;const r=i?parseFloat(yd.getComputedStyle(t,":before").height):0,c=i?parseFloat(yd.getComputedStyle(t,":after").height):0,v=cu(t).left,S=cu(t).top+r,T=t.offsetWidth,F=t.offsetHeight-r-c,N=this._getEventX(n),B=this._getEventY(n);return N+o>=v&&N-o<v+T&&B+o>=S&&B-o<S+F}_getEventX(n){return Ol(n)?this._getTouchEventX(n):n.clientX+this._getDocumentScrollLeft()}_getEventY(n){return Ol(n)?this._getTouchEventY(n):n.clientY+this._getDocumentScrollTop()}_getTouchEventX(n){let t=null;return n.changedTouches.length>0?t=n.changedTouches:n.targetTouches.length>0&&(t=n.targetTouches),t?t[0].pageX:0}_getTouchEventY(n){let t=null;return n.changedTouches.length>0?t=n.changedTouches:n.targetTouches.length>0&&(t=n.targetTouches),t?t[0].pageY:0}_getDocumentScrollTop(){const n=Pe.getDocument();return n.documentElement.scrollTop||n.body.scrollTop}_getDocumentScrollLeft(){const n=Pe.getDocument();return n.documentElement.scrollLeft||n.body.scrollLeft}_updateReadOnlyState(){const n=this.option("readOnly");this._selectButton.option("disabled",n),this._files.forEach(t=>{var i;return null===(i=t.cancelButton)||void 0===i?void 0:i.option("disabled",n)}),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var n,t;const i=this.option("hoverStateEnabled");null===(n=this._selectButton)||void 0===n||n.option("hoverStateEnabled",i),null===(t=this._uploadButton)||void 0===t||t.option("hoverStateEnabled",i),this._files.forEach(o=>{var r,c;null===(r=o.uploadButton)||void 0===r||r.option("hoverStateEnabled",i),null===(c=o.cancelButton)||void 0===c||c.option("hoverStateEnabled",i)})}_optionChanged(n){const{name:t,value:i,previousValue:o}=n;switch(t){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(n);break;case"value":!i.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(n);break;case"name":case"hint":this._initFileInput(),super._optionChanged(n);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),n.value||this.clear();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(n);break;case"disabled":this._updateInputLabelText(),super._optionChanged(n);break;case"selectButtonText":this._selectButton.option("text",i);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",i);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",i);break;case"_buttonStylingMode":this._files.forEach(r=>{var c,v;null===(c=r.uploadButton)||void 0===c||c.option("stylingMode",i),null===(v=r.cancelButton)||void 0===v||v.option("stylingMode",i)});break;case"dialogTrigger":this._detachSelectFileDialogHandler(o),this._attachSelectFileDialogHandler(i);break;case"dropZone":this._detachDragEventHandlers(o),this._attachDragEventHandlers(i);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":case"nativeDropSupported":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(n);break;case"allowCanceling":case"uploadMode":this.clear(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"inputAttr":this._applyInputAttributes(this.option(t));break;default:super._optionChanged(n)}}_resetInputValue(n){"useForm"===this.option("uploadMode")&&!n||(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}clear(){this.option("value",[])}}class xie{constructor(n,t){this.file=n,this.chunkSize=t,this.index=0}read(){if(!this.file)return null;const n=this.createBlobResult(this.file,this.index,this.chunkSize);return n.isCompleted&&(this.file=null),this.index++,n}createBlobResult(n,t,i){const o=t*i;return{blob:this.sliceFile(n,o,i),index:t,isCompleted:o+i>=n.size}}sliceFile(n,t,i){return n.slice?n.slice(t,t+i):n.webkitSlice?n.webkitSlice(t,t+i):null}}class hL{constructor(n){this.fileUploader=n}upload(n){n.isInitialized&&n.isAborted&&this.fileUploader._resetFileState(n),n.isValid()&&!n.uploadStarted&&(this._prepareFileBeforeUpload(n),this._uploadCore(n))}abortUpload(n){if(!(n._isError||n._isLoaded||n.isAborted)&&n.uploadStarted&&(n.isAborted=!0,n.request&&n.request.abort(),this._isCustomCallback("abortUpload"))){const t=this.fileUploader.option("abortUpload"),i=this._createUploadArgument(n);let o=null;try{o=ii(t(n.value,i))}catch(r){o=Ae().reject(r).promise()}o.done(()=>n.onAbort.fire()).fail(r=>this._handleFileError(n,r))}}_beforeSend(n,t){const i=this._createUploadArgument(t);this.fileUploader._beforeSendAction({request:n,file:t.value,uploadInfo:i}),t.request=n}_createUploadArgument(n){}_uploadCore(n){}_isCustomCallback(n){const t=this.fileUploader.option(n);return t&&Be(t)}_handleProgress(n,t){n._isError||(n._isProgressStarted=!0,this._handleProgressCore(n,t))}_handleProgressCore(n,t){}_handleFileError(n,t){n._isError=!0,n.onError.fire(t)}_prepareFileBeforeUpload(n){var t;n.$file&&(null===(t=n.progressBar)||void 0===t||t.dispose(),this.fileUploader._createFileProgressBar(n)),n.isInitialized||(n.onLoadStart.add(this._onUploadStarted.bind(this,n)),n.onLoad.add(this._onLoadedHandler.bind(this,n)),n.onError.add(this._onErrorHandler.bind(this,n)),n.onAbort.add(this._onAbortHandler.bind(this,n)),n.onProgress.add(this._onProgressHandler.bind(this,n)),n.isInitialized=!0)}_shouldHandleError(n,t){return(this._isStatusError(t.status)||!n._isProgressStarted)&&!n.isAborted}_isStatusError(n){return n>=400&&n<500||n>=500&&n<600}_onUploadStarted(n,t){n.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:n.value,event:t,request:n.request})}_onAbortHandler(n,t){const i={file:n.value,event:t,request:n.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(i),this.fileUploader._setStatusMessage(n,i.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(n,t){const i={file:n.value,event:void 0,request:n.request,error:t,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(i),this.fileUploader._setStatusMessage(n,i.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(n,t){const i={file:n.value,event:t,request:n.request,message:this.fileUploader.option("uploadedMessage")};n._isLoaded=!0,this.fileUploader._uploadedAction(i),this.fileUploader._setStatusMessage(n,i.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(n,t){if(n){const i=this.fileUploader._getTotalFilesSize(),o=this.fileUploader._getTotalLoadedFilesSize(),r=Math.min(t.loaded,n.value.size),c=r-n.loadedSize;n.loadedSize=r,this.fileUploader._updateTotalProgress(i,o+c),this.fileUploader._updateProgressBar(n,this._getLoadedData(r,t.total,c,t))}}_getLoadedData(n,t,i,o){return{loaded:n,total:t,currentSegmentSize:i}}_extendFormData(n){const t=this.fileUploader.option("uploadCustomData");for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Ie(t[i])&&n.append(i,t[i])}}class pL extends hL{constructor(n){super(n),this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(n){const t=n.value,i={name:t.name,loadedBytes:0,type:t.type,blobReader:new xie(t,this.chunkSize),guid:new Pn,fileSize:t.size,count:this._getFileChunksCount(t),customData:{}};n.chunksData=i,this._sendChunk(n,i)}_getFileChunksCount(n){return 0===n.size?1:Math.ceil(n.size/this.chunkSize)}_sendChunk(n,t){const i=t.blobReader.read();t.currentChunk=i,i&&this._sendChunkCore(n,t,i).done(()=>{n.isAborted||(t.loadedBytes+=i.blob.size,n.onProgress.fire({loaded:t.loadedBytes,total:n.value.size}),i.isCompleted&&n.onLoad.fire(),setTimeout(()=>this._sendChunk(n,t)))}).fail(o=>{this._shouldHandleError(n,o)&&this._handleFileError(n,o)})}_sendChunkCore(n,t,i){}_tryRaiseStartLoad(n){n.isStartLoad||(n.isStartLoad=!0,n.onLoadStart.fire())}_getEvent(n){return null}_createUploadArgument(n){return this._createChunksInfo(n.chunksData)}_createChunksInfo(n){return{bytesUploaded:n.loadedBytes,chunkCount:n.count,customData:n.customData,chunkBlob:n.currentChunk.blob,chunkIndex:n.currentChunk.index}}}class Oie extends pL{_sendChunkCore(n,t,i){return lf.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:o=>this._beforeSend(o,n),upload:{onprogress:o=>this._handleProgress(n,o),onloadstart:()=>this._tryRaiseStartLoad(n),onabort:()=>n.onAbort.fire()},data:this._createFormData({fileName:t.name,blobName:this.fileUploader.option("name"),blob:i.blob,index:i.index,count:t.count,type:t.type,guid:t.guid,size:t.fileSize})})}_createFormData(n){const t=new yd.FormData;return t.append(n.blobName,n.blob),t.append("chunkMetadata",JSON.stringify({FileName:n.fileName,Index:n.index,TotalCount:n.count,FileSize:n.size,FileType:n.type,FileGuid:n.guid})),this._extendFormData(t),t}}class bie extends pL{_sendChunkCore(n,t){this._tryRaiseStartLoad(n);const i=this._createChunksInfo(t),o=this.fileUploader.option("uploadChunk");try{return ii(o(n.value,i))}catch(r){return Ae().reject(r).promise()}}_shouldHandleError(n,t){return!0}}class fL extends hL{_uploadCore(n){n.loadedSize=0,this._uploadFile(n).done(()=>{n.isAborted||n.onLoad.fire()}).fail(t=>{this._shouldHandleError(n,t)&&this._handleFileError(n,t)})}_uploadFile(n){}_handleProgressCore(n,t){n.onProgress.fire(t)}_getLoadedData(n,t,i,o){const r=super._getLoadedData(n,t,i,o);return r.event=o,r}}class Sie extends fL{_uploadFile(n){return lf.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,n),upload:{onprogress:t=>this._handleProgress(n,t),onloadstart:()=>n.onLoadStart.fire(),onabort:()=>n.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),n.value)})}_createFormData(n,t){const i=new yd.FormData;return i.append(n,t,t.name),this._extendFormData(i),i}}class Die extends fL{_uploadFile(n){n.onLoadStart.fire();const t=o=>{this._handleProgress(n,{loaded:o,total:n.value.size})},i=this.fileUploader.option("uploadFile");try{return ii(i(n.value,t))}catch(o){return Ae().reject(o).promise()}}_shouldHandleError(n,t){return!0}}xt("dxFileUploader",dL);const Iie=dL,Eie={getConfigurations:function(){const{DiagramCommand:e}=Ze();return this.dialogList||(this.dialogList=[{command:e.InsertShapeImage,title:de.format("dxDiagram-dialogInsertShapeImageTitle"),onGetContent:this.getChangeImageDialogContent},{command:e.EditShapeImage,title:de.format("dxDiagram-dialogEditShapeImageTitle"),onGetContent:this.getChangeImageDialogContent}])},getChangeImageDialogContent:function(e){const n=V("<div>");return e.component._createComponent(n,Iie,{selectButtonText:de.format("dxDiagram-dialogEditShapeImageSelectButton"),accept:"image/*",uploadMode:"useForm",onValueChanged:function(t){const o=new(ot().FileReader);o.onload=function(r){e.component._commandParameter=r.target.result},o.readAsDataURL(t.value[0])}}),n},getDialogParameters(e){const n=this.getConfigurations().map(t=>t.command).indexOf(e);return n>=0?this.getConfigurations()[n]:null}},wie=Oy.inherit({}).include(UC),gL=class Pie extends wie{constructor(n){super(),this._diagramWidget=n,this._resetCache()}_dataSourceChangedHandler(n,t){if(this._resetCache(),this._items=n.map(i=>pe(!0,{},i)),this._dataSourceItems=n.slice(),t&&t.changes){const i=t.changes.filter(r=>r.internalChange),o=t.changes.filter(r=>!r.internalChange);i.length&&this._reloadContentByChanges(i,!1),o.length&&this._reloadContentByChanges(o,!0)}else this._diagramWidget._onDataSourceChanged()}_dataSourceLoadingChangedHandler(n){n&&!this._dataSource.isLoaded()?this._diagramWidget._showLoadingIndicator():this._diagramWidget._hideLoadingIndicator()}_prepareData(n){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&void 0===n[t]&&(n[t]=null);return n}insert(n,t,i){this._resetCache();const o=this._getStore();o.insert(this._prepareData(n)).done((r,c)=>{o.push([{type:"insert",key:c,data:r,internalChange:!0}]),t&&t(r),this._resetCache()}).fail(r=>{i&&i(r),this._resetCache()})}update(n,t,i,o){const r=this._getStore(),c=this._getStoreKey(r,n,t);r.update(c,this._prepareData(t)).done((v,S)=>{r.push([{type:"update",key:S,data:v,internalChange:!0}]),i&&i(S,v)}).fail(v=>{o&&o(v)})}remove(n,t,i,o){this._resetCache();const r=this._getStore(),c=this._getStoreKey(r,n,t);r.remove(c).done(v=>{r.push([{type:"remove",key:v,internalChange:!0}]),i&&i(v),this._resetCache()}).fail(v=>{o&&o(v),this._resetCache()})}findItem(n){return this._items?this._getItemByKey(n):null}getItems(){return this._items}hasItems(){return!!this._items}_reloadContentByChanges(n,t){n=n.map(i=>pe(i,{internalKey:this._getInternalKey(i.key)})),this._diagramWidget._reloadContentByChanges(n,t)}_getItemByKey(n){this._ensureCache();const t=this._cache,i=this._getIndexByKey(n);return t.items[i]}_getIndexByKey(n){this._ensureCache();const t=this._cache;if("object"!=typeof n){const i=t.keySet||t.keys.reduce((o,r,c)=>(o[r]=c,o),{});return t.keySet||(t.keySet=i),i[n]}for(let i=0,o=t.keys.length;i<o;i++)if(t.keys[i]===n)return i;return-1}_ensureCache(){const n=this._cache;n.keys||(n.keys=[],n.items=[],this._fillCache(n,this._items))}_fillCache(n,t){if(!t||!t.length)return;const i=this._getKeyExpr();i&&t.forEach(c=>{n.keys.push(i(c)),n.items.push(c)});const o=this._getItemsExpr();o&&t.forEach(c=>this._fillCache(n,o(c)));const r=this._getContainerChildrenExpr();r&&t.forEach(c=>this._fillCache(n,r(c)))}_getKeyExpr(){throw"Not Implemented"}_getItemsExpr(){}_getContainerChildrenExpr(){}_initDataSource(){super._initDataSource(),this._dataSource&&this._dataSource.paginate(!1)}_dataSourceOptions(){return{paginate:!1}}_getStore(){return this._dataSource&&this._dataSource.store()}_getStoreKey(n,t,i){let o=n.keyOf(i);if(o===i){const r=this._getKeyExpr();this._dataSourceItems.forEach(c=>{r(c)===t&&(o=c)})}return o}_getInternalKey(n){return"object"==typeof n?this._getKeyExpr()(n):n}_resetCache(){this._cache={}}},Mie=class Tie extends gL{_getKeyExpr(){return this._diagramWidget._createOptionGetter("nodes.keyExpr")}_getItemsExpr(){return this._diagramWidget._createOptionGetter("nodes.itemsExpr")}_getContainerChildrenExpr(){return this._diagramWidget._createOptionGetter("nodes.containerChildrenExpr")}},Rie=class Aie extends gL{_getKeyExpr(){return this._diagramWidget._createOptionGetter("edges.keyExpr")}},mL=Te("fullscreenchange","dxDiagramEvent"),_L=Te("msfullscreenchange","dxDiagramEvent"),vL=Te("webkitfullscreenchange","dxDiagramEvent"),yL=Te("mozfullscreenchange","dxDiagramEvent");class CL extends vi{_init(){this._updateDiagramLockCount=0,this.toggleFullscreenLock=0,this._toolbars=[],super._init(),this._initDiagram(),this._createCustomCommand()}_initMarkup(){super._initMarkup(),this._toolbars=[],delete this._isMobileScreenSize;const n=!Ke();this.$element().addClass("dx-diagram"),delete this._mainToolbar,this.option("mainToolbar.visible")&&this._renderMainToolbar();const t=V("<div>").addClass("dx-diagram-content-wrapper").appendTo(this.$element());if(delete this._historyToolbar,delete this._historyToolbarResizeCallback,this._isHistoryToolbarVisible()&&this._renderHistoryToolbar(t),delete this._propertiesToolbar,delete this._propertiesToolbarResizeCallback,this._isPropertiesPanelEnabled()&&this._renderPropertiesToolbar(t),delete this._viewToolbar,delete this._viewToolbarResizeCallback,this.option("viewToolbar.visible")&&this._renderViewToolbar(t),delete this._toolbox,delete this._toolboxResizeCallback,this._isToolboxEnabled()&&this._renderToolbox(t),delete this._propertiesPanel,delete this._propertiesPanelResizeCallback,this._isPropertiesPanelEnabled()&&this._renderPropertiesPanel(t),this._$content=V("<div>").addClass("dx-diagram-content").appendTo(t),delete this._contextMenu,this._diagramInstance.settings.contextMenuEnabled=this.option("contextMenu.enabled"),this._diagramInstance.settings.contextMenuEnabled&&this._renderContextMenu(t),delete this._contextToolbox,this.option("contextToolbox.enabled")&&this._renderContextToolbox(t),this._renderDialog(t),!n){const i=V("<div>").addClass("dx-diagram-scroll-view").appendTo(this._$content);this._createComponent(i,Xne,{useNativeScrolling:this.option("useNativeScrolling"),onCreateDiagram:o=>{this._diagramInstance.createDocument(o.$parent[0],o.scrollView,t[0])}})}this._setCustomCommandChecked(Vn.SHOW_PROPERTIES_PANEL_COMMAND_NAME,this._isPropertiesPanelVisible()),this._setCustomCommandChecked(Vn.SHOW_TOOLBOX_COMMAND_NAME,this._isToolboxVisible()),this._createOptionsUpdateBar()}_dimensionChanged(){this._isMobileScreenSize=void 0,this._processDiagramResize()}_visibilityChanged(n){n&&(this._bindDiagramData(),this.repaint())}_processDiagramResize(){this._diagramInstance.onDimensionChanged(),this._historyToolbarResizeCallback&&this._historyToolbarResizeCallback.call(this),this._propertiesToolbarResizeCallback&&this._propertiesToolbarResizeCallback.call(this),this._propertiesPanelResizeCallback&&this._propertiesPanelResizeCallback.call(this),this._viewToolbarResizeCallback&&this._viewToolbarResizeCallback.call(this),this._toolboxResizeCallback&&this._toolboxResizeCallback.call(this)}isMobileScreenSize(){return void 0===this._isMobileScreenSize&&(this._isMobileScreenSize=Ke()&&qt(this.$element())<576),this._isMobileScreenSize}_captureFocus(){this._diagramInstance&&this._diagramInstance.captureFocus()}_captureFocusOnTimeout(){this._captureFocusTimeout=setTimeout(()=>{this._captureFocus(),delete this._captureFocusTimeout},100)}_killCaptureFocusTimeout(){this._captureFocusTimeout&&(clearTimeout(this._captureFocusTimeout),delete this._captureFocusTimeout)}notifyBarCommandExecuted(){this._captureFocusOnTimeout()}_registerToolbar(n){this._registerBar(n),this._toolbars.push(n)}_registerBar(n){n.bar.onChanged.add(this),this._diagramInstance.registerBar(n.bar)}_getExcludeCommands(){const n=[];return this._isToolboxEnabled()||n.push(Vn.SHOW_TOOLBOX_COMMAND_NAME),this._isPropertiesPanelEnabled()||n.push(Vn.SHOW_PROPERTIES_PANEL_COMMAND_NAME),n}_getToolbarBaseOptions(){return{onContentReady:n=>{let{component:t}=n;return this._registerToolbar(t)},onSubMenuVisibilityChanging:n=>{let{component:t}=n;return this._diagramInstance.updateBarItemsState(t.bar)},onPointerUp:this._onPanelPointerUp.bind(this),export:this.option("export"),excludeCommands:this._getExcludeCommands(),onInternalCommand:this._onInternalCommand.bind(this),onCustomCommand:this._onCustomCommand.bind(this),isMobileView:this.isMobileScreenSize()}}_onInternalCommand(n){switch(n.command){case Vn.SHOW_TOOLBOX_COMMAND_NAME:this._toolbox&&this._toolbox.toggle();break;case Vn.SHOW_PROPERTIES_PANEL_COMMAND_NAME:this._propertiesPanel&&this._propertiesPanel.toggle()}}_onCustomCommand(n){this._customCommandAction({name:n.name})}_renderMainToolbar(){const n=V("<div>").addClass("dx-diagram-toolbar-wrapper").appendTo(this.$element());this._mainToolbar=this._createComponent(n,Yee,pe(this._getToolbarBaseOptions(),{commands:this.option("mainToolbar.commands"),skipAdjustSize:!0}))}_isHistoryToolbarVisible(){return this.option("historyToolbar.visible")&&!this.isReadOnlyMode()}_renderHistoryToolbar(n){const t=V("<div>").addClass("dx-diagram-floating-toolbar-container").appendTo(n);this._historyToolbar=this._createComponent(t,Jee,pe(this._getToolbarBaseOptions(),{commands:this.option("historyToolbar.commands"),locateInMenu:"never"})),this._updateHistoryToolbarPosition(),this._historyToolbarResizeCallback=()=>{this._historyToolbar.option("isMobileView",this.isMobileScreenSize())}}_updateHistoryToolbarPosition(){Ke()&&Dn.setup(this._historyToolbar.$element(),{my:"left top",at:"left top",of:this._historyToolbar.$element().parent(),offset:"12 12"})}_isToolboxEnabled(){return"disabled"!==this.option("toolbox.visibility")&&!this.isReadOnlyMode()}_isToolboxVisible(){return"visible"===this.option("toolbox.visibility")||"auto"===this.option("toolbox.visibility")&&!this.isMobileScreenSize()}_renderToolbox(n){const t=!Ke(),i=V("<div>").appendTo(n),o=this._getToolboxBounds(n,t);this._toolbox=this._createComponent(i,nie,{isMobileView:this.isMobileScreenSize(),isVisible:this._isToolboxVisible(),container:this.$element(),height:o.height,offsetParent:n,offsetX:o.offsetX,offsetY:o.offsetY,showSearch:this.option("toolbox.showSearch"),toolboxGroups:this._getToolboxGroups(),toolboxWidth:this.option("toolbox.width"),onShapeCategoryRendered:r=>{t||this._diagramInstance.createToolbox(r.$element[0],"texts"===r.displayMode,r.shapes||r.category,{shapeIconSpacing:12,shapeIconCountInRow:this.option("toolbox.shapeIconsPerRow"),shapeIconAttributes:{"data-toggle":r.dataToggle}})},onFilterChanged:r=>{t||this._diagramInstance.applyToolboxFilter(r.text,r.filteringToolboxes)},onVisibilityChanging:r=>{t||(this._setCustomCommandChecked(Vn.SHOW_TOOLBOX_COMMAND_NAME,r.visible),this._propertiesPanel&&r.visible&&this.isMobileScreenSize()&&this._propertiesPanel.hide(),this._historyToolbar&&r.visible&&this.isMobileScreenSize()&&(this._historyToolbarZIndex=Gp(wl.baseZIndex()),this._historyToolbar.$element().css("zIndex",this._historyToolbarZIndex),this._historyToolbar.$element().css("boxShadow","none")),this._viewToolbar&&(this._viewToolbar.$element().css("opacity",r.visible&&this.isMobileScreenSize()?"0":"1"),this._viewToolbar.$element().css("pointerEvents",r.visible&&this.isMobileScreenSize()?"none":"")))},onVisibilityChanged:r=>{!r.visible&&!this._textInputStarted&&this._captureFocus(),t||this._historyToolbar&&!r.visible&&this.isMobileScreenSize()&&this._historyToolbarZIndex&&(Mu(this._historyToolbarZIndex),this._historyToolbar.$element().css("zIndex",""),this._historyToolbar.$element().css("boxShadow",""),this._historyToolbarZIndex=void 0)},onPointerUp:this._onPanelPointerUp.bind(this)}),this._toolbox._popup.option("propagateOutsideClick",!this.option("fullScreen")),this._toolboxResizeCallback=()=>{const r=this._getToolboxBounds(n,t);this._toolbox.option("height",r.height),this._toolbox.option("isMobileView")!==this.isMobileScreenSize()&&(this._toolbox.option({isMobileView:this.isMobileScreenSize(),isVisible:this._isToolboxVisible()}),this._setCustomCommandChecked(Vn.SHOW_TOOLBOX_COMMAND_NAME,this._isToolboxVisible())),this._toolbox.updateMaxHeight()}}_getToolboxBounds(n,t){const i={offsetX:12,offsetY:12,height:t?0:ut(n)-24};return this._historyToolbar&&!t&&(i.offsetY+=et(this._historyToolbar.$element())+12,i.height-=et(this._historyToolbar.$element())+12),this._viewToolbar&&!t&&(i.height-=et(this._viewToolbar.$element())+this._getViewToolbarYOffset(t)),i}_renderViewToolbar(n){const t=!Ke(),i=V("<div>").addClass("dx-diagram-floating-toolbar-container").appendTo(n);this._viewToolbar=this._createComponent(i,tte,pe(this._getToolbarBaseOptions(),{commands:this.option("viewToolbar.commands"),locateInMenu:"never"})),this._updateViewToolbarPosition(i,n,t),this._viewToolbarResizeCallback=()=>{this._updateViewToolbarPosition(i,n,t)}}_getViewToolbarYOffset(n){if(n)return;let t=12;return this._viewToolbar&&this._propertiesToolbar&&(t+=(et(this._propertiesToolbar.$element())-et(this._viewToolbar.$element()))/2),t}_updateViewToolbarPosition(n,t,i){i||Dn.setup(n,{my:"left bottom",at:"left bottom",of:t,offset:"12 -"+this._getViewToolbarYOffset(i)})}_isPropertiesPanelEnabled(){return"disabled"!==this.option("propertiesPanel.visibility")&&!this.isReadOnlyMode()}_isPropertiesPanelVisible(){return"visible"===this.option("propertiesPanel.visibility")}_renderPropertiesToolbar(n){const t=!Ke(),i=V("<div>").addClass("dx-diagram-floating-toolbar-container").addClass("dx-diagram-properties-panel-toolbar-container").appendTo(n);this._propertiesToolbar=this._createComponent(i,ite,pe(this._getToolbarBaseOptions(),{buttonStylingMode:"contained",buttonType:"default",locateInMenu:"never"})),this._updatePropertiesToolbarPosition(i,n,t),this._propertiesToolbarResizeCallback=()=>{this._updatePropertiesToolbarPosition(i,n,t)}}_updatePropertiesToolbarPosition(n,t,i){i||Dn.setup(n,{my:"right bottom",at:"right bottom",of:t,offset:"-12 -12"})}_renderPropertiesPanel(n){const t=!Ke(),i=V("<div>").appendTo(n),o=24+(t?0:et(this._propertiesToolbar.$element()));this._propertiesPanel=this._createComponent(i,fie,{isMobileView:this.isMobileScreenSize(),isVisible:this._isPropertiesPanelVisible(),container:this.$element(),offsetParent:n,offsetX:12,offsetY:o,propertyTabs:this.option("propertiesPanel.tabs"),onCreateToolbar:r=>{r.toolbar=this._createComponent(r.$parent,dd,pe(this._getToolbarBaseOptions(),{commands:r.commands,locateInMenu:"never",editorStylingMode:"outlined"}))},onVisibilityChanging:r=>{t||(this._updatePropertiesPanelGroupBars(r.component),this._setCustomCommandChecked(Vn.SHOW_PROPERTIES_PANEL_COMMAND_NAME,r.visible),this._toolbox&&r.visible&&this.isMobileScreenSize()&&this._toolbox.hide())},onVisibilityChanged:r=>{!r.visible&&!this._textInputStarted&&this._captureFocus()},onSelectedGroupChanged:r=>{let{component:c}=r;return this._updatePropertiesPanelGroupBars(c)},onPointerUp:this._onPanelPointerUp.bind(this)}),this._propertiesPanelResizeCallback=()=>{this._propertiesPanel.option("isMobileView")!==this.isMobileScreenSize()&&(this._propertiesPanel.option({isMobileView:this.isMobileScreenSize(),isVisible:this._isPropertiesPanelVisible()}),this._setCustomCommandChecked(Vn.SHOW_PROPERTIES_PANEL_COMMAND_NAME,this._isPropertiesPanelVisible()))}}_updatePropertiesPanelGroupBars(n){n.getActiveToolbars().forEach(t=>{this._diagramInstance.updateBarItemsState(t.bar)})}_onPanelPointerUp(){this._captureFocusOnTimeout()}_renderContextMenu(n){const t=V("<div>").appendTo(n);this._contextMenu=this._createComponent(t,ste_DiagramContextMenuWrapper,{commands:this.option("contextMenu.commands"),onContentReady:i=>{let{component:o}=i;return this._registerBar(o)},onVisibilityChanging:i=>{let{component:o}=i;return this._diagramInstance.updateBarItemsState(o.bar)},onItemClick:i=>this._onBeforeCommandExecuted(i.command),export:this.option("export"),excludeCommands:this._getExcludeCommands(),onInternalCommand:this._onInternalCommand.bind(this),onCustomCommand:this._onCustomCommand.bind(this)})}_renderContextToolbox(n){const t=!Ke(),i=this.option("contextToolbox.category"),o=this.option("contextToolbox.displayMode"),r=this.option("contextToolbox.shapes"),c=V("<div>").appendTo(n);this._contextToolbox=this._createComponent(c,pte,{toolboxWidth:this.option("contextToolbox.width"),onShown:v=>{if(t)return;const S=V(v.$element);let T="texts"===o;if(!r&&!i&&!T){const F=this._getToolboxGroups().filter(function(N){return N.category===v.category})[0];F&&(T="texts"===F.displayMode)}this._diagramInstance.createContextToolbox(S[0],T,r||i||v.category,{shapeIconSpacing:12,shapeIconCountInRow:this.option("contextToolbox.shapeIconsPerRow")},F=>{v.callback(F),this._captureFocus(),v.hide()})}})}_setCustomCommandChecked(n,t){this._toolbars.forEach(i=>{i.setCommandChecked(n,t)})}_onBeforeCommandExecuted(n){const t=Eie.getDialogParameters(n);return t&&this._showDialog(t),!!t}_renderDialog(n){const t=V("<div>").appendTo(n);this._dialogInstance=this._createComponent(t,gte,{})}_showDialog(n){this._dialogInstance&&(this._dialogInstance.option("onGetContent",n.onGetContent),this._dialogInstance.option("onHidden",function(){this._captureFocus()}.bind(this)),this._dialogInstance.option("command",this._diagramInstance.getCommand(n.command)),this._dialogInstance.option("title",n.title),this._dialogInstance._show())}_showLoadingIndicator(){this._loadingIndicator=V("<div>").addClass("dx-diagram-loading-indicator"),this._createComponent(this._loadingIndicator,Us,{}),(this._$content||this.$element()).append(this._loadingIndicator)}_hideLoadingIndicator(){this._loadingIndicator&&(this._loadingIndicator.remove(),this._loadingIndicator=null)}_initDiagram(){const{DiagramControl:n}=Ze();if(this._diagramInstance=new n,this._diagramInstance.onChanged=this._raiseDataChangeAction.bind(this),this._diagramInstance.onEdgeInserted=this._raiseEdgeInsertedAction.bind(this),this._diagramInstance.onEdgeUpdated=this._raiseEdgeUpdatedAction.bind(this),this._diagramInstance.onEdgeRemoved=this._raiseEdgeRemovedAction.bind(this),this._diagramInstance.onNodeInserted=this._raiseNodeInsertedAction.bind(this),this._diagramInstance.onNodeUpdated=this._raiseNodeUpdatedAction.bind(this),this._diagramInstance.onNodeRemoved=this._raiseNodeRemovedAction.bind(this),this._diagramInstance.onToolboxDragStart=this._raiseToolboxDragStart.bind(this),this._diagramInstance.onToolboxDragEnd=this._raiseToolboxDragEnd.bind(this),this._diagramInstance.onTextInputStart=this._raiseTextInputStart.bind(this),this._diagramInstance.onTextInputEnd=this._raiseTextInputEnd.bind(this),this._diagramInstance.onToggleFullscreen=this._onToggleFullScreen.bind(this),this._diagramInstance.onShowContextMenu=this._onShowContextMenu.bind(this),this._diagramInstance.onHideContextMenu=this._onHideContextMenu.bind(this),this._diagramInstance.onShowContextToolbox=this._onShowContextToolbox.bind(this),this._diagramInstance.onHideContextToolbox=this._onHideContextToolbox.bind(this),this._diagramInstance.onNativeAction.add({notifyItemClick:this._raiseItemClickAction.bind(this),notifyItemDblClick:this._raiseItemDblClickAction.bind(this),notifySelectionChanged:this._raiseSelectionChanged.bind(this)}),this._diagramInstance.onRequestOperation=this._raiseRequestEditOperation.bind(this),this._updateEventSubscriptionMethods(),this._updateDefaultItemProperties(),this._updateEditingSettings(),this._updateShapeTexts(),this._updateUnitItems(),this._updateFormatUnitsMethod(),"in"!==this.option("units")&&this._updateUnitsState(),this.isReadOnlyMode()&&this._updateReadOnlyState(),this.option("pageSize")&&(this.option("pageSize.items")&&this._updatePageSizeItemsState(),this.option("pageSize.width")&&this.option("pageSize.height")&&this._updatePageSizeState()),"portrait"!==this.option("pageOrientation")&&this._updatePageOrientationState(),"#ffffff"!==this.option("pageColor")&&this._updatePageColorState(),"in"!==this.option("viewUnits")&&this._updateViewUnitsState(),this.option("showGrid")||this._updateShowGridState(),this.option("snapToGrid")||this._updateSnapToGridState(),this.option("gridSize")&&this._updateGridSizeState(),1!==this.option("zoomLevel")&&this._updateZoomLevelState(),this.option("simpleView")&&this._updateSimpleViewState(),"disabled"!==this.option("autoZoomMode")&&this._updateAutoZoomState(),this.option("fullScreen")){const t=ot();t&&t.self!==t.top?this.option("fullScreen",!1):this._updateFullscreenState()}this._createOptionsUpdateBar(),Ke()&&this._diagramInstance.initMeasurer(this.$element()[0]),this._updateCustomShapes(this._getCustomShapes()),this._refreshDataSources()}_createOptionsUpdateBar(){this.optionsUpdateBar||(this.optionsUpdateBar=new mie(this),this._diagramInstance.registerBar(this.optionsUpdateBar))}_deleteOptionsUpdateBar(){delete this.optionsUpdateBar}_clean(){this._diagramInstance&&(this._diagramInstance.cleanMarkup(n=>{V(n).empty()}),this._deleteOptionsUpdateBar()),super._clean()}_dispose(){this._killCaptureFocusTimeout(),super._dispose(),this._diagramInstance&&(this._diagramInstance.dispose(),this._diagramInstance=void 0)}_executeDiagramCommand(n,t){this._diagramInstance.getCommand(n).execute(t)}getNodeDataSource(){return this._nodesOption&&this._nodesOption.getDataSource()}getEdgeDataSource(){return this._edgesOption&&this._edgesOption.getDataSource()}_refreshDataSources(){this._beginUpdateDiagram(),this._refreshNodesDataSource(),this._refreshEdgesDataSource(),this._endUpdateDiagram()}_refreshNodesDataSource(){this._nodesOption&&(this._nodesOption._disposeDataSource(),delete this._nodesOption),this.option("nodes.dataSource")&&(this._nodesOption=new Mie(this),this._nodesOption.option("dataSource",this.option("nodes.dataSource")),this._nodesOption._refreshDataSource())}_refreshEdgesDataSource(){this._edgesOption&&(this._edgesOption._disposeDataSource(),delete this._edgesOption),this.option("edges.dataSource")&&(this._edgesOption=new Rie(this),this._edgesOption.option("dataSource",this.option("edges.dataSource")),this._edgesOption._refreshDataSource())}_getDiagramData(){let n;const{DiagramCommand:t}=Ze();return this._executeDiagramCommand(t.Export,function(i){n=i}),n}_setDiagramData(n,t){const{DiagramCommand:i}=Ze();this._executeDiagramCommand(i.Import,{data:n,keepExistingItems:t})}isReadOnlyMode(){return this.option("readOnly")||this.option("disabled")}_onDataSourceChanged(){this._bindDiagramData()}_getChangesKeys(n){return n.map(t=>Ie(t.internalKey)?t.internalKey:Ie(t.key)?t.key:null).filter(t=>Ie(t))}_createOptionGetter(n){const t=this.option(n);return t&&sn(t)}_onRequestUpdateLayout(n){this._requestLayoutUpdateAction||this._createRequestLayoutUpdateAction();const t={changes:n,allowed:!1};return this._requestLayoutUpdateAction(t),t.allowed}_createOptionSetter(n){const t=this.option(n);return Be(t)?t:t&&Uv(t)}_bindDiagramData(){if(this._updateDiagramLockCount||!this._isBindingMode())return;const{DiagramCommand:n,ConnectorLineOption:t,ConnectorLineEnding:i}=Ze();let o,r,c,v,S,T,F,N;const B={nodeDataSource:this._nodesOption&&this._nodesOption.getItems(),edgeDataSource:this._edgesOption&&this._edgesOption.getItems(),nodeDataImporter:{getKey:this._createOptionGetter("nodes.keyExpr"),setKey:this._createOptionSetter("nodes.keyExpr"),getCustomData:this._createOptionGetter("nodes.customDataExpr"),setCustomData:this._createOptionSetter("nodes.customDataExpr"),getLocked:this._createOptionGetter("nodes.lockedExpr"),setLocked:this._createOptionSetter("nodes.lockedExpr"),getStyle:this._createOptionGetter("nodes.styleExpr"),setStyle:this._createOptionSetter("nodes.styleExpr"),getStyleText:this._createOptionGetter("nodes.textStyleExpr"),setStyleText:this._createOptionSetter("nodes.textStyleExpr"),getZIndex:this._createOptionGetter("nodes.zIndexExpr"),setZIndex:this._createOptionSetter("nodes.zIndexExpr"),getType:this._createOptionGetter("nodes.typeExpr"),setType:this._createOptionSetter("nodes.typeExpr"),getText:this._createOptionGetter("nodes.textExpr"),setText:this._createOptionSetter("nodes.textExpr"),getImage:this._createOptionGetter("nodes.imageUrlExpr"),setImage:this._createOptionSetter("nodes.imageUrlExpr"),getLeft:this._createOptionGetter("nodes.leftExpr"),setLeft:this._createOptionSetter("nodes.leftExpr"),getTop:this._createOptionGetter("nodes.topExpr"),setTop:this._createOptionSetter("nodes.topExpr"),getWidth:this._createOptionGetter("nodes.widthExpr"),setWidth:this._createOptionSetter("nodes.widthExpr"),getHeight:this._createOptionGetter("nodes.heightExpr"),setHeight:this._createOptionSetter("nodes.heightExpr"),getParentKey:this._createOptionGetter("nodes.parentKeyExpr"),setParentKey:this._createOptionSetter("nodes.parentKeyExpr"),getItems:this._createOptionGetter("nodes.itemsExpr"),setItems:this._createOptionSetter("nodes.itemsExpr"),getChildren:F=this._createOptionGetter("nodes.containerChildrenExpr"),setChildren:N=this._createOptionSetter("nodes.containerChildrenExpr"),getContainerKey:!F&&!N&&this._createOptionGetter("nodes.containerKeyExpr"),setContainerKey:!F&&!N&&this._createOptionSetter("nodes.containerKeyExpr")},edgeDataImporter:{getKey:this._createOptionGetter("edges.keyExpr"),setKey:this._createOptionSetter("edges.keyExpr"),getCustomData:this._createOptionGetter("edges.customDataExpr"),setCustomData:this._createOptionSetter("edges.customDataExpr"),getLocked:this._createOptionGetter("edges.lockedExpr"),setLocked:this._createOptionSetter("edges.lockedExpr"),getStyle:this._createOptionGetter("edges.styleExpr"),setStyle:this._createOptionSetter("edges.styleExpr"),getStyleText:this._createOptionGetter("edges.textStyleExpr"),setStyleText:this._createOptionSetter("edges.textStyleExpr"),getZIndex:this._createOptionGetter("edges.zIndexExpr"),setZIndex:this._createOptionSetter("edges.zIndexExpr"),getFrom:this._createOptionGetter("edges.fromExpr"),setFrom:this._createOptionSetter("edges.fromExpr"),getFromPointIndex:this._createOptionGetter("edges.fromPointIndexExpr"),setFromPointIndex:this._createOptionSetter("edges.fromPointIndexExpr"),getTo:this._createOptionGetter("edges.toExpr"),setTo:this._createOptionSetter("edges.toExpr"),getToPointIndex:this._createOptionGetter("edges.toPointIndexExpr"),setToPointIndex:this._createOptionSetter("edges.toPointIndexExpr"),getPoints:this._createOptionGetter("edges.pointsExpr"),setPoints:this._createOptionSetter("edges.pointsExpr"),getText:this._createOptionGetter("edges.textExpr"),setText:this._createOptionSetter("edges.textExpr"),getLineOption:(o=this._createOptionGetter("edges.lineTypeExpr"))&&function(X){const ne=o(X);return this._getConnectorLineOption(ne)}.bind(this),setLineOption:(r=this._createOptionSetter("edges.lineTypeExpr"))&&function(X,ne){switch(ne){case t.Straight:ne="straight";break;case t.Orthogonal:ne="orthogonal"}r(X,ne)}.bind(this),getStartLineEnding:(c=this._createOptionGetter("edges.fromLineEndExpr"))&&function(X){const ne=c(X);return this._getConnectorLineEnding(ne)}.bind(this),setStartLineEnding:(v=this._createOptionSetter("edges.fromLineEndExpr"))&&function(X,ne){switch(ne){case i.Arrow:ne="arrow";break;case i.OutlinedTriangle:ne="outlinedTriangle";break;case i.FilledTriangle:ne="filledTriangle";break;case i.None:ne="none"}v(X,ne)}.bind(this),getEndLineEnding:(S=this._createOptionGetter("edges.toLineEndExpr"))&&function(X){const ne=S(X);return this._getConnectorLineEnding(ne)}.bind(this),setEndLineEnding:(T=this._createOptionSetter("edges.toLineEndExpr"))&&function(X,ne){switch(ne){case i.Arrow:ne="arrow";break;case i.OutlinedTriangle:ne="outlinedTriangle";break;case i.FilledTriangle:ne="filledTriangle";break;case i.None:ne="none"}T(X,ne)}.bind(this)},layoutParameters:this._getDataBindingLayoutParameters()};B.nodeDataSource&&this._executeDiagramCommand(n.BindDocument,B)}_reloadContentByChanges(n,t){const i=this._getChangesKeys(n),o=this._onRequestUpdateLayout(n);this._reloadContent(i,o,t)}_reloadContent(n,t,i){this._diagramInstance.reloadContent(n,()=>{let o,r;return this._nodesOption&&i&&(o=this._nodesOption.getItems()),this._edgesOption&&i&&(r=this._edgesOption.getItems()),{nodeDataSource:o,edgeDataSource:r}},t&&this._getDataBindingLayoutParameters(),i)}_getConnectorLineOption(n){const{ConnectorLineOption:t}=Ze();return"straight"===n?t.Straight:t.Orthogonal}_getConnectorLineEnding(n){const{ConnectorLineEnding:t}=Ze();switch(n){case"arrow":return t.Arrow;case"outlinedTriangle":return t.OutlinedTriangle;case"filledTriangle":return t.FilledTriangle;default:return t.None}}_getDataBindingLayoutParameters(){const{DataLayoutType:n,DataLayoutOrientation:t}=Ze(),i=this.option("nodes.autoLayout")||"off",o=i.type||i,r={};if("off"!==o&&("auto"!==o||!this._hasNodePositionExprs())){switch(r.type="tree"===o?n.Tree:n.Sugiyama,i.orientation){case"vertical":r.orientation=t.Vertical;break;case"horizontal":r.orientation=t.Horizontal}(this.option("edges.fromPointIndexExpr")||this.option("edges.toPointIndexExpr"))&&(r.skipPointIndices=!0)}return r.autoSizeEnabled=!!this.option("nodes.autoSizeEnabled"),r}_hasNodePositionExprs(){return this.option("nodes.topExpr")&&this.option("nodes.leftExpr")}_getAutoZoomValue(n){const{AutoZoomMode:t}=Ze();switch(n){case"fitContent":return t.FitContent;case"fitWidth":return t.FitToWidth;default:return t.Disabled}}_isBindingMode(){return this._nodesOption&&this._nodesOption.hasItems()||this._edgesOption&&this._edgesOption.hasItems()}_beginUpdateDiagram(){this._updateDiagramLockCount++}_endUpdateDiagram(){this._updateDiagramLockCount=Math.max(this._updateDiagramLockCount-1,0),this._updateDiagramLockCount||this._bindDiagramData()}_getCustomShapes(){return this.option("customShapes")||[]}_getToolboxGroups(){return Yne.getGroups(this.option("toolbox.groups"))}_updateAllCustomShapes(){this._diagramInstance.removeAllCustomShapes(),this._updateCustomShapes(this._getCustomShapes())}_updateCustomShapes(n,t){Array.isArray(t)&&this._diagramInstance.removeCustomShapes(t.map(i=>i.type)),Array.isArray(n)&&this._diagramInstance.addCustomShapes(n.map(i=>{const o=i.template||this.option("customShapeTemplate"),r=o&&this._getTemplate(o),c=i.toolboxTemplate||this.option("customShapeToolboxTemplate"),v=c&&this._getTemplate(c);return{category:i.category,type:i.type,baseType:i.baseType,title:i.title,svgUrl:i.backgroundImageUrl,svgToolboxUrl:i.backgroundImageToolboxUrl,svgLeft:i.backgroundImageLeft,svgTop:i.backgroundImageTop,svgWidth:i.backgroundImageWidth,svgHeight:i.backgroundImageHeight,defaultWidth:i.defaultWidth,defaultHeight:i.defaultHeight,toolboxWidthToHeightRatio:i.toolboxWidthToHeightRatio,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,allowResize:i.allowResize,defaultText:i.defaultText,allowEditText:i.allowEditText,textLeft:i.textLeft,textTop:i.textTop,textWidth:i.textWidth,textHeight:i.textHeight,defaultImageUrl:i.defaultImageUrl,allowEditImage:i.allowEditImage,imageLeft:i.imageLeft,imageTop:i.imageTop,imageWidth:i.imageWidth,imageHeight:i.imageHeight,connectionPoints:i.connectionPoints&&i.connectionPoints.map(S=>({x:S.x,y:S.y})),createTemplate:r&&((S,T)=>{r.render({model:this._nativeItemToDiagramItem(T),container:st(V(S))})}),createToolboxTemplate:v&&((S,T)=>{v.render({model:this._nativeItemToDiagramItem(T),container:st(V(S))})}),destroyTemplate:r&&(S=>{V(S).empty()}),templateLeft:i.templateLeft,templateTop:i.templateTop,templateWidth:i.templateWidth,templateHeight:i.templateHeight,keepRatioOnAutoSize:i.keepRatioOnAutoSize}}))}_getViewport(){const n=this.$element().closest(".dx-viewport");return n.length?n:V("body")}_onToggleFullScreen(n){this.toggleFullscreenLock>0||(this._changeNativeFullscreen(n),n?(this._prevParent=this.$element().parent(),this._prevFullScreenZIndex=this.$element().css("zIndex"),this._fullScreenZIndex=Gp(wl.baseZIndex()),this.$element().css("zIndex",this._fullScreenZIndex),this.$element().appendTo(this._getViewport())):(this.$element().appendTo(this._prevParent),this._fullScreenZIndex&&(Mu(this._fullScreenZIndex),this.$element().css("zIndex",this._prevFullScreenZIndex))),this.$element().toggleClass("dx-diagram-fullscreen",n),this._processDiagramResize(),this._toolbox&&(this._toolbox.repaint(),this._toolbox._popup.option("propagateOutsideClick",!n)),this._propertiesPanel&&this._propertiesPanel.repaint(),this._historyToolbar&&this._updateHistoryToolbarPosition())}_changeNativeFullscreen(n){const t=ot();t.self===t.top||n===this._inNativeFullscreen()||(n?this._subscribeFullscreenNativeChanged():this._unsubscribeFullscreenNativeChanged(),this._setNativeFullscreen(n))}_setNativeFullscreen(n){const t=ot(),i=t.self.document,o=t.self.document.body;n?o.requestFullscreen?o.requestFullscreen():o.mozRequestFullscreen?o.mozRequestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen():o.msRequestFullscreen&&o.msRequestFullscreen():i.exitFullscreen?i.exitFullscreen():i.mozCancelFullscreen?i.mozCancelFullscreen():i.webkitExitFullscreen?i.webkitExitFullscreen():i.msExitFullscreen&&i.msExitFullscreen()}_inNativeFullscreen(){const n=ot().document;return!((n.fullscreenElement||n.msFullscreenElement||n.webkitFullscreenElement)!==n.body&&!n.webkitIsFullscreen)}_subscribeFullscreenNativeChanged(){const n=ot().document,t=this._onNativeFullscreenChangeHandler.bind(this);ue.on(n,mL,t),ue.on(n,_L,t),ue.on(n,vL,t),ue.on(n,yL,t)}_unsubscribeFullscreenNativeChanged(){const n=ot().document;ue.off(n,mL),ue.off(n,_L),ue.off(n,vL),ue.off(n,yL)}_onNativeFullscreenChangeHandler(){this._inNativeFullscreen()||(this._unsubscribeFullscreenNativeChanged(),this.option("fullScreen",!1))}_executeDiagramFullscreenCommand(n){const{DiagramCommand:t}=Ze();this.toggleFullscreenLock++,this._executeDiagramCommand(t.Fullscreen,n),this.toggleFullscreenLock--}_onShowContextMenu(n,t,i){this._contextMenu&&this._contextMenu._show(n,t,i)}_onHideContextMenu(){this._contextMenu&&this._contextMenu._hide()}_onShowContextToolbox(n,t,i,o,r){this._contextToolbox&&this._contextToolbox._show(n,t,i,o,r)}_onHideContextToolbox(){this._contextToolbox&&this._contextToolbox._hide()}_getDiagramUnitValue(n){const{DiagramUnit:t}=Ze();switch(n){case"in":default:return t.In;case"cm":return t.Cm;case"px":return t.Px}}_updateReadOnlyState(){const{DiagramCommand:n}=Ze(),t=this.isReadOnlyMode();this._executeDiagramCommand(n.ToggleReadOnly,t)}_updateZoomLevelState(){if(this.option("zoomLevel.items")){this._updateZoomLevelItemsState();const n=this.option("zoomLevel.value");if(!n)return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.ZoomLevel,n)}else{const n=this.option("zoomLevel.value")||this.option("zoomLevel");if(!n)return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.ZoomLevel,n)}}_updateZoomLevelItemsState(){const n=this.option("zoomLevel.items");if(!Array.isArray(n))return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.ZoomLevelItems,n)}_updateAutoZoomState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.SwitchAutoZoom,this._getAutoZoomValue(this.option("autoZoomMode")))}_updateSimpleViewState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.ToggleSimpleView,this.option("simpleView"))}_updateFullscreenState(){const n=this.option("fullScreen");this._executeDiagramFullscreenCommand(n),this._onToggleFullScreen(n)}_updateShowGridState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.ShowGrid,this.option("showGrid"))}_updateSnapToGridState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.SnapToGrid,this.option("snapToGrid"))}_updateGridSizeState(){if(this.option("gridSize.items")){this._updateGridSizeItemsState();const n=this.option("gridSize.value");if(!n)return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.GridSize,n)}else{const n=this.option("gridSize.value")||this.option("gridSize");if(!n)return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.GridSize,n)}}_updateGridSizeItemsState(){const n=this.option("gridSize.items");if(!Array.isArray(n))return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.GridSizeItems,n)}_updateUnitItems(){const{DiagramLocalizationService:n}=Ze(),t=this._getUnitItems();this._unitItems!==t&&(this._unitItems=t,n.unitItems=t)}_getUnitItems(){const{DiagramUnit:n}=Ze(),t={};return t[n.In]=de.format("dxDiagram-unitIn"),t[n.Cm]=de.format("dxDiagram-unitCm"),t[n.Px]=de.format("dxDiagram-unitPx"),t}_updateFormatUnitsMethod(){const{DiagramLocalizationService:n}=Ze();n.formatUnit=function(t){return Lt.format(t)}}_updateViewUnitsState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.ViewUnits,this._getDiagramUnitValue(this.option("viewUnits")))}_updateUnitsState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.Units,this._getDiagramUnitValue(this.option("units")))}_updatePageSizeState(){const n=this.option("pageSize");if(!n||!n.width||!n.height)return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.PageSize,n)}_updatePageSizeItemsState(){const n=this.option("pageSize.items");if(!Array.isArray(n))return;const{DiagramCommand:t}=Ze();this._executeDiagramCommand(t.PageSizeItems,n)}_updatePageOrientationState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.PageLandscape,"landscape"===this.option("pageOrientation"))}_updatePageColorState(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.PageColor,this.option("pageColor"))}_updateShapeTexts(){const{DiagramLocalizationService:n}=Ze(),t=this._getShapeTexts();this._shapeTexts!==t&&(this._shapeTexts=t,n.shapeTexts=t)}_getShapeTexts(){const{ShapeTypes:n}=Ze(),t={};return t[n.Text]=de.format("dxDiagram-shapeText"),t[n.Rectangle]=de.format("dxDiagram-shapeRectangle"),t[n.Ellipse]=de.format("dxDiagram-shapeEllipse"),t[n.Cross]=de.format("dxDiagram-shapeCross"),t[n.Triangle]=de.format("dxDiagram-shapeTriangle"),t[n.Diamond]=de.format("dxDiagram-shapeDiamond"),t[n.Heart]=de.format("dxDiagram-shapeHeart"),t[n.Pentagon]=de.format("dxDiagram-shapePentagon"),t[n.Hexagon]=de.format("dxDiagram-shapeHexagon"),t[n.Octagon]=de.format("dxDiagram-shapeOctagon"),t[n.Star]=de.format("dxDiagram-shapeStar"),t[n.ArrowLeft]=de.format("dxDiagram-shapeArrowLeft"),t[n.ArrowUp]=de.format("dxDiagram-shapeArrowUp"),t[n.ArrowRight]=de.format("dxDiagram-shapeArrowRight"),t[n.ArrowDown]=de.format("dxDiagram-shapeArrowDown"),t[n.ArrowUpDown]=de.format("dxDiagram-shapeArrowUpDown"),t[n.ArrowLeftRight]=de.format("dxDiagram-shapeArrowLeftRight"),t[n.Process]=de.format("dxDiagram-shapeProcess"),t[n.Decision]=de.format("dxDiagram-shapeDecision"),t[n.Terminator]=de.format("dxDiagram-shapeTerminator"),t[n.PredefinedProcess]=de.format("dxDiagram-shapePredefinedProcess"),t[n.Document]=de.format("dxDiagram-shapeDocument"),t[n.MultipleDocuments]=de.format("dxDiagram-shapeMultipleDocuments"),t[n.ManualInput]=de.format("dxDiagram-shapeManualInput"),t[n.Preparation]=de.format("dxDiagram-shapePreparation"),t[n.Data]=de.format("dxDiagram-shapeData"),t[n.Database]=de.format("dxDiagram-shapeDatabase"),t[n.HardDisk]=de.format("dxDiagram-shapeHardDisk"),t[n.InternalStorage]=de.format("dxDiagram-shapeInternalStorage"),t[n.PaperTape]=de.format("dxDiagram-shapePaperTape"),t[n.ManualOperation]=de.format("dxDiagram-shapeManualOperation"),t[n.Delay]=de.format("dxDiagram-shapeDelay"),t[n.StoredData]=de.format("dxDiagram-shapeStoredData"),t[n.Display]=de.format("dxDiagram-shapeDisplay"),t[n.Merge]=de.format("dxDiagram-shapeMerge"),t[n.Connector]=de.format("dxDiagram-shapeConnector"),t[n.Or]=de.format("dxDiagram-shapeOr"),t[n.SummingJunction]=de.format("dxDiagram-shapeSummingJunction"),t[n.Container]=de.format("dxDiagram-shapeContainerDefaultText"),t[n.VerticalContainer]=de.format("dxDiagram-shapeVerticalContainer"),t[n.HorizontalContainer]=de.format("dxDiagram-shapeHorizontalContainer"),t[n.Card]=de.format("dxDiagram-shapeCardDefaultText"),t[n.CardWithImageOnLeft]=de.format("dxDiagram-shapeCardWithImageOnLeft"),t[n.CardWithImageOnTop]=de.format("dxDiagram-shapeCardWithImageOnTop"),t[n.CardWithImageOnRight]=de.format("dxDiagram-shapeCardWithImageOnRight"),t}_updateEventSubscriptionMethods(){const{RenderHelper:n}=Ze();n.addEventListener=(t,i,o)=>{ue.on(t,i,o)},n.removeEventListener=(t,i,o)=>{ue.off(t,i,o)}}_updateDefaultItemProperties(){this.option("defaultItemProperties.style")&&this._diagramInstance.setInitialStyleProperties(this.option("defaultItemProperties.style")),this.option("defaultItemProperties.textStyle")&&this._diagramInstance.setInitialTextStyleProperties(this.option("defaultItemProperties.textStyle")),this._diagramInstance.setInitialConnectorProperties({lineOption:this._getConnectorLineOption(this.option("defaultItemProperties.connectorLineType")),startLineEnding:this._getConnectorLineEnding(this.option("defaultItemProperties.connectorLineStart")),endLineEnding:this._getConnectorLineEnding(this.option("defaultItemProperties.connectorLineEnd"))}),this._diagramInstance.applyShapeSizeSettings({shapeMinWidth:this.option("defaultItemProperties.shapeMinWidth"),shapeMaxWidth:this.option("defaultItemProperties.shapeMaxWidth"),shapeMinHeight:this.option("defaultItemProperties.shapeMinHeight"),shapeMaxHeight:this.option("defaultItemProperties.shapeMaxHeight")})}_updateEditingSettings(){this._diagramInstance.applyOperationSettings({addShape:this.option("editing.allowAddShape"),addShapeFromToolbox:this.option("editing.allowAddShape"),deleteShape:this.option("editing.allowDeleteShape"),deleteConnector:this.option("editing.allowDeleteConnector"),changeConnection:this.option("editing.allowChangeConnection"),changeConnectorPoints:this.option("editing.allowChangeConnectorPoints"),changeShapeText:this.option("editing.allowChangeShapeText"),changeConnectorText:this.option("editing.allowChangeConnectorText"),resizeShape:this.option("editing.allowResizeShape"),moveShape:this.option("editing.allowMoveShape")})}fitToContent(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.FitToScreen)}fitToWidth(){const{DiagramCommand:n}=Ze();this._executeDiagramCommand(n.FitToWidth)}focus(){this._captureFocus()}export(){return this._getDiagramData()}exportTo(n,t){const i=this._getDiagramExportToCommand(n);this._executeDiagramCommand(i,t)}_getDiagramExportToCommand(n){const{DiagramCommand:t}=Ze();switch(n){case"png":return t.ExportPng;case"jpg":return t.ExportJpg;default:return t.ExportSvg}}import(n,t){this._setDiagramData(n,t),this._raiseDataChangeAction()}updateToolbox(){this._diagramInstance&&this._diagramInstance.refreshToolbox(),this._toolbox&&(this._toolbox.updateTooltips(),this._toolbox.updateFilter(),this._toolbox.updateMaxHeight())}_getDefaultOptions(){return pe(super._getDefaultOptions(),{readOnly:!1,zoomLevel:1,simpleView:!1,autoZoomMode:"disabled",fullScreen:!1,showGrid:!0,snapToGrid:!0,units:"in",viewUnits:"in",pageOrientation:"portrait",pageColor:"#ffffff",hasChanges:!1,nodes:{dataSource:null,keyExpr:"id",customDataExpr:void 0,lockedExpr:void 0,styleExpr:void 0,textStyleExpr:void 0,zIndexExpr:void 0,typeExpr:"type",textExpr:"text",imageUrlExpr:void 0,parentKeyExpr:void 0,itemsExpr:void 0,leftExpr:void 0,topExpr:void 0,widthExpr:void 0,heightExpr:void 0,containerKeyExpr:"containerKey",containerChildrenExpr:void 0,autoLayout:"auto",autoSizeEnabled:!0},edges:{dataSource:null,keyExpr:"id",customDataExpr:void 0,lockedExpr:void 0,styleExpr:void 0,textStyleExpr:void 0,zIndexExpr:void 0,fromExpr:"from",fromPointIndexExpr:void 0,toExpr:"to",toPointIndexExpr:void 0,pointsExpr:void 0,textExpr:void 0,lineTypeExpr:void 0,fromLineEndExpr:void 0,toLineEndExpr:void 0},customShapes:[],toolbox:{visibility:"auto",shapeIconsPerRow:3,showSearch:!0},mainToolbar:{visible:!1},historyToolbar:{visible:!0},viewToolbar:{visible:!0},contextMenu:{enabled:!0},contextToolbox:{enabled:!0,shapeIconsPerRow:4,width:152},propertiesPanel:{visibility:"auto"},defaultItemProperties:{connectorLineType:"orthogonal",connectorLineStart:"none",connectorLineEnd:"arrow"},editing:{allowAddShape:!0,allowDeleteShape:!0,allowDeleteConnector:!0,allowChangeConnection:!0,allowChangeConnectorPoints:!0,allowChangeShapeText:!0,allowChangeConnectorText:!0,allowResizeShape:!0,allowMoveShape:!0},export:{fileName:"Diagram"},onItemClick:null,onItemDblClick:null,onSelectionChanged:null,onRequestEditOperation:null,onRequestLayoutUpdate:null})}_raiseDataChangeAction(){this._initialized&&this.option("hasChanges",!0)}_raiseEdgeInsertedAction(n,t,i){this._edgesOption&&this._edgesOption.insert(n,t,i)}_raiseEdgeUpdatedAction(n,t,i,o){this._edgesOption&&this._edgesOption.update(n,t,i,o)}_raiseEdgeRemovedAction(n,t,i,o){this._edgesOption&&this._edgesOption.remove(n,t,i,o)}_raiseNodeInsertedAction(n,t,i){this._nodesOption&&this._nodesOption.insert(n,t,i)}_raiseNodeUpdatedAction(n,t,i,o){this._nodesOption&&this._nodesOption.update(n,t,i,o)}_raiseNodeRemovedAction(n,t,i,o){this._nodesOption&&this._nodesOption.remove(n,t,i,o)}_raiseToolboxDragStart(){this._toolbox&&this.isMobileScreenSize()&&(this._toolbox.hide(),this._toolboxDragHidden=!0)}_raiseToolboxDragEnd(){this._toolbox&&this._toolboxDragHidden&&(this._toolbox.show(),delete this._toolboxDragHidden)}_raiseTextInputStart(){this._textInputStarted=!0,this._propertiesPanel&&this.isMobileScreenSize()&&this._propertiesPanel.isVisible()&&(this._propertiesPanel.hide(),this._propertiesPanelTextInputHidden=!0),this._toolbox&&this.isMobileScreenSize()&&this._toolbox.isVisible()&&(this._toolbox.hide(),this._toolboxTextInputHidden=!0)}_raiseTextInputEnd(){this._propertiesPanel&&this._propertiesPanelTextInputHidden&&(this._propertiesPanel.show(),delete this._propertiesPanelTextInputHidden),this._toolbox&&this._toolboxTextInputHidden&&(this._toolbox.show(),delete this._toolboxTextInputHidden),this._textInputStarted=!1}_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_createItemDblClickAction(){this._itemDblClickAction=this._createActionByOption("onItemDblClick")}_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")}_createRequestEditOperationAction(){this._requestEditOperationAction=this._createActionByOption("onRequestEditOperation")}_createRequestLayoutUpdateAction(){this._requestLayoutUpdateAction=this._createActionByOption("onRequestLayoutUpdate")}_createCustomCommand(){this._customCommandAction=this._createActionByOption("onCustomCommand")}_raiseItemClickAction(n){this._itemClickAction||this._createItemClickAction(),this._itemClickAction({item:this._nativeItemToDiagramItem(n)})}_raiseItemDblClickAction(n){this._itemDblClickAction||this._createItemDblClickAction(),this._itemDblClickAction({item:this._nativeItemToDiagramItem(n)})}_raiseSelectionChanged(n){this._selectionChangedAction||this._createSelectionChangedAction(),this._selectionChangedAction({items:n.map(this._nativeItemToDiagramItem.bind(this))})}_raiseRequestEditOperation(n,t){this._requestEditOperationAction||this._createRequestEditOperationAction();const i=this._getRequestEditOperationEventArgs(n,t);this._requestEditOperationAction(i),t.allowed=i.allowed}_getModelOperation(n){const{DiagramModelOperation:t}=Ze();switch(n){case t.AddShape:return"addShape";case t.AddShapeFromToolbox:return"addShapeFromToolbox";case t.DeleteShape:return"deleteShape";case t.DeleteConnector:return"deleteConnector";case t.ChangeConnection:return"changeConnection";case t.ChangeConnectorPoints:return"changeConnectorPoints";case t.BeforeChangeShapeText:return"beforeChangeShapeText";case t.ChangeShapeText:return"changeShapeText";case t.BeforeChangeConnectorText:return"beforeChangeConnectorText";case t.ChangeConnectorText:return"changeConnectorText";case t.ResizeShape:return"resizeShape";case t.MoveShape:return"moveShape"}}_getRequestEditOperationEventArgs(n,t){const{DiagramModelOperation:i,ConnectorPosition:o}=Ze(),r={operation:this._getModelOperation(n),allowed:t.allowed,updateUI:t.updateUI,reason:t.updateUI?"checkUIElementAvailability":"modelModification"};switch(n){case i.AddShape:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape),position:t.position&&{x:t.position.x,y:t.position.y}};break;case i.AddShapeFromToolbox:r.args={shapeType:t.shapeType};break;case i.DeleteShape:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape)};break;case i.DeleteConnector:r.args={connector:t.connector&&this._nativeItemToDiagramItem(t.connector)};break;case i.ChangeConnection:r.args={newShape:t.shape&&this._nativeItemToDiagramItem(t.shape),oldShape:t.oldShape&&this._nativeItemToDiagramItem(t.oldShape),connector:t.connector&&this._nativeItemToDiagramItem(t.connector),connectionPointIndex:t.connectionPointIndex,connectorPosition:t.position===o.Begin?"start":"end"};break;case i.ChangeConnectorPoints:r.args={connector:t.connector&&this._nativeItemToDiagramItem(t.connector),newPoints:t.points&&t.points.map(c=>({x:c.x,y:c.y})),oldPoints:t.oldPoints&&t.oldPoints.map(c=>({x:c.x,y:c.y}))};break;case i.BeforeChangeShapeText:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape)};break;case i.ChangeShapeText:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape),text:t.text};break;case i.BeforeChangeConnectorText:r.args={connector:t.connector&&this._nativeItemToDiagramItem(t.connector),index:t.index};break;case i.ChangeConnectorText:r.args={connector:t.connector&&this._nativeItemToDiagramItem(t.connector),index:t.index,text:t.text};break;case i.ResizeShape:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape),newSize:t.size&&{width:t.size.width,height:t.size.height},oldSize:t.oldSize&&{width:t.oldSize.width,height:t.oldSize.height}};break;case i.MoveShape:r.args={shape:t.shape&&this._nativeItemToDiagramItem(t.shape),newPosition:t.position&&{x:t.position.x,y:t.position.y},oldPosition:t.oldPosition&&{x:t.oldPosition.x,y:t.oldPosition.y}}}return r}_nativeItemToDiagramItem(n){const{NativeShape:t}=Ze(),i=n instanceof t?this._nativeShapeToDiagramShape.bind(this):this._nativeConnectorToDiagramConnector.bind(this);return pe({id:n.id,key:n.key,dataItem:void 0},i(n))}_nativeShapeToDiagramShape(n){return{dataItem:this._nodesOption&&this._nodesOption.findItem(n.key),itemType:"shape",text:n.text,type:n.type,position:{x:n.position.x,y:n.position.y},size:{width:n.size.width,height:n.size.height},attachedConnectorIds:n.attachedConnectorIds,containerId:n.containerId,containerChildItemIds:n.containerChildItemIds,containerExpanded:n.containerExpanded}}_nativeConnectorToDiagramConnector(n){return{dataItem:this._edgesOption&&this._edgesOption.findItem(n.key),itemType:"connector",texts:n.texts,fromKey:n.fromKey,toKey:n.toKey,fromId:n.fromId,fromPointIndex:n.fromPointIndex,toId:n.toId,toPointIndex:n.toPointIndex,points:n.points.map(t=>({x:t.x,y:t.y}))}}getItemByKey(n){const t=this._diagramInstance&&this._diagramInstance.getNativeItemByDataKey(n);return t&&this._nativeItemToDiagramItem(t)}getItemById(n){const t=this._diagramInstance&&this._diagramInstance.getNativeItemByKey(n);return t&&this._nativeItemToDiagramItem(t)}getItems(){return this._diagramInstance.getNativeItems().map(n=>n&&this._nativeItemToDiagramItem(n))}getSelectedItems(){return this._diagramInstance.getNativeSelectedItems().map(n=>n&&this._nativeItemToDiagramItem(n))}setSelectedItems(n){return this._diagramInstance.setSelectedItems(n.map(t=>t.id))}scrollToItem(n){return this._diagramInstance.scrollToItems([n.id])}_invalidateContextMenuCommands(){this._contextMenu&&this._contextMenu.option({commands:this.option("contextMenu.commands")})}_invalidateMainToolbarCommands(){this._mainToolbar&&this._mainToolbar.option({commands:this.option("mainToolbar.commands")})}_invalidateHistoryToolbarCommands(){this._historyToolbar&&this._historyToolbar.option({commands:this.option("historyToolbar.commands")})}_invalidateViewToolbarCommands(){this._viewToolbar&&this._viewToolbar.option({commands:this.option("viewToolbar.commands")})}_invalidateToolboxGroups(){this._toolbox&&this._toolbox.option({toolboxGroups:this._getToolboxGroups()})}_optionChanged(n){if(this.optionsUpdateBar&&!this.optionsUpdateBar.isUpdateLocked()){this.optionsUpdateBar.beginUpdate();try{this._optionChangedCore(n)}finally{this.optionsUpdateBar.endUpdate()}}}_optionChangedCore(n){switch(n.name){case"readOnly":case"disabled":this._updateReadOnlyState(),this._invalidate();break;case"zoomLevel":("zoomLevel"===n.fullName||"zoomLevel.items"===n.fullName||"zoomLevel.value"===n.fullName)&&this._updateZoomLevelState();break;case"autoZoomMode":this._updateAutoZoomState();break;case"simpleView":this._updateSimpleViewState();break;case"useNativeScrolling":case"contextToolbox":case"propertiesPanel":this._invalidate();break;case"fullScreen":this._updateFullscreenState();break;case"showGrid":this._updateShowGridState();break;case"snapToGrid":this._updateSnapToGridState();break;case"gridSize":("gridSize"===n.fullName||"gridSize.items"===n.fullName||"gridSize.value"===n.fullName)&&this._updateGridSizeState();break;case"viewUnits":this._updateViewUnitsState();break;case"units":this._updateUnitsState();break;case"pageSize":("pageSize"===n.fullName||"pageSize.items"===n.fullName)&&this._updatePageSizeItemsState(),("pageSize"===n.fullName||"pageSize.width"===n.fullName||"pageSize.height"===n.fullName)&&this._updatePageSizeState();break;case"pageOrientation":this._updatePageOrientationState();break;case"pageColor":this._updatePageColorState();break;case"nodes":0===n.fullName.indexOf("nodes.autoLayout")?this._refreshDataSources():this._refreshNodesDataSource();break;case"edges":this._refreshEdgesDataSource();break;case"customShapes":n.fullName!==n.name?this._updateAllCustomShapes():this._updateCustomShapes(n.value,n.previousValue),this._invalidate();break;case"contextMenu":"contextMenu.commands"===n.fullName?this._invalidateContextMenuCommands():this._invalidate();break;case"toolbox":"toolbox.groups"===n.fullName?this._invalidateToolboxGroups():this._invalidate();break;case"mainToolbar":"mainToolbar.commands"===n.fullName?this._invalidateMainToolbarCommands():this._invalidate();break;case"historyToolbar":"historyToolbar.commands"===n.fullName?this._invalidateHistoryToolbarCommands():this._invalidate();break;case"viewToolbar":"viewToolbar.commands"===n.fullName?this._invalidateViewToolbarCommands():this._invalidate();break;case"onItemClick":this._createItemClickAction();break;case"onItemDblClick":this._createItemDblClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"onRequestEditOperation":this._createRequestEditOperationAction();break;case"onRequestLayoutUpdate":this._createRequestLayoutUpdateAction();break;case"onCustomCommand":this._createCustomCommand();break;case"defaultItemProperties":this._updateDefaultItemProperties();break;case"editing":this._updateEditingSettings();break;case"export":this._toolbars.forEach(t=>{t.option("export",this.option("export"))}),this._contextMenu&&this._contextMenu.option("export",this.option("export"));break;case"hasChanges":break;default:super._optionChanged(n)}}}xt("dxDiagram",CL);const kie=CL,xL=ue.triggerHandler;class Br{host;setHost(n){this.host=n}setTemplate(n){this.host.setTemplate(n)}}class OL{instance;zone;subscriptions={};events={};constructor(n,t){this.instance=n,this.zone=t}hasEvent(n){return 0!==this.getEmitter(n).observers.length}fireEvent(n,t){const i=this.getEmitter(n);i.observers.length&&((this.subscriptions[n]||[]).length===i.observers.length?i.next(t&&t[0]):this.zone.run(()=>i.next(t&&t[0])))}on(n,t){if("string"==typeof n){const i=this.subscriptions[n]||[],o=this.getEmitter(n).subscribe(t?.bind(this.instance)),r=o.unsubscribe.bind(o);i.push({handler:t,unsubscribe:r}),this.subscriptions[n]=i}else{const i=n;Object.keys(i).forEach(o=>this.on(o,i[o]))}}off(n,t){const i=this.subscriptions[n]||[];t?i.some((o,r)=>o.handler===t&&(o.unsubscribe(),i.splice(r,1),!0)):(i.forEach(o=>{o.unsubscribe()}),i.splice(0,i.length))}dispose(){}addEmitter(n,t){this.events[n]=t}getEmitter(n){return this.events[n]||(this.events[n]=new wi),this.events[n]}}class Fie{zone;component;lockedValueChangeEvent=!1;constructor(n,t){this.zone=n,this.component=t}fireNgEvent(n,t){if(this.lockedValueChangeEvent&&"valueChange"===n)return;const i=this.component[n];i&&i.observers.length&&this.zone.run(()=>{i.next(t&&t[0])})}createEmitters(n){n.forEach(t=>{this.component[t.emit]=new wi})}}let rO=(()=>{class e{_watchers=[];getWatchMethod(){return(i,o,r)=>{let c=i();(r=r||{}).skipImmediate||o(c);const v=()=>{const S=i();this._isDifferentValues(c,S,r.deep)&&(o(S),c=S)};return this._watchers.push(v),()=>{const S=this._watchers.indexOf(v);-1!==S&&this._watchers.splice(S,1)}}}_isDifferentValues(t,i,o){const r=this._toComparable(i),c=this._toComparable(t);return o&&r instanceof Object&&c instanceof Object?this._checkObjectsFields(i,t):r!==c}_toComparable(t){return t instanceof Date?t.getTime():t}_checkObjectsFields(t,i){for(const o in t){const r=this._toComparable(t[o]),c=this._toComparable(i[o]);let v=!1;if("object"==typeof r&&"object"==typeof c&&(v=ks(r,c)),r!==c&&!v)return!0}}checkWatchers(){for(const t of this._watchers)t()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=gt({token:e,factory:e.\u0275fac})}return e})(),bL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})();const SL="dx-visibility-change-handler";let DL=(()=>{class e{_host;_hostOptionPath;_collectionContainerImpl;_initialOptions={};constructor(){this._collectionContainerImpl=new IL(this._setOption.bind(this),this._filterItems.bind(this))}_optionChangedHandler(t){const i=this._fullOptionPath();if(0===t.fullName.indexOf(i)){const r=this[`${t.fullName.slice(i.length)}Change`];r&&r.next(t.value)}}_createEventEmitters(t){t.forEach(i=>{this[i.emit]=new wi})}_getOption(t){return this.isLinked?this.instance.option(this._fullOptionPath()+t):this._initialOptions[t]}_setOption(t,i){if(this.isLinked){const o=this._fullOptionPath()+t;this.instance.option(o,i)}else this._initialOptions[t]=i}_addRemovedOption(t){this.instance&&this.removedNestedComponents&&this.removedNestedComponents.push(t)}_deleteRemovedOptions(t){this.instance&&this.removedNestedComponents&&(this.removedNestedComponents=this.removedNestedComponents.filter(i=>!i.startsWith(t)))}_addRecreatedComponent(){this.instance&&this.recreatedNestedComponents&&this.recreatedNestedComponents.push({getOptionPath:()=>this._getOptionPath()})}_getOptionPath(){return this._hostOptionPath()+this._optionPath}setHost(t,i){this._host=t,this._hostOptionPath=i,this.optionChangedHandlers.subscribe(this._optionChangedHandler.bind(this))}setChildren(t,i){return this.resetOptions(t),this._collectionContainerImpl.setChildren(t,i)}_filterItems(t){return t.filter(i=>i!==this)}get instance(){return this._host&&this._host.instance}get resetOptions(){return this._host&&this._host.resetOptions}get isRecreated(){return this._host&&this._host.isRecreated}get removedNestedComponents(){return this._host&&this._host.removedNestedComponents}set removedNestedComponents(t){this._host.removedNestedComponents=t}get recreatedNestedComponents(){return this._host&&this._host.recreatedNestedComponents}set recreatedNestedComponents(t){this._host.recreatedNestedComponents=t}get isLinked(){return!!this.instance&&this._host.isLinked}get optionChangedHandlers(){return this._host&&this._host.optionChangedHandlers}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=tn({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})();class IL{_setOption;_filterItems;_activatedQueries={};constructor(n,t){this._setOption=n,this._filterItems=t}setChildren(n,t){if(this._filterItems&&(t=this._filterItems(t)),t.length&&(this._activatedQueries[n]=!0),this._activatedQueries[n]){const i=t.map((o,r)=>(o._index=r,o._value));this._setOption(n,i)}}}let aO,sg=(()=>{class e extends DL{setHost(t,i){super.setHost(t,i),this._host[this._optionPath]=this._initialOptions}_fullOptionPath(){return`${this._getOptionPath()}.`}static \u0275fac=function(){let t;return function(o){return(t||(t=ya(e)))(o||e)}}();static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})(),fs=(()=>{class e extends DL{_index;_fullOptionPath(){return`${this._getOptionPath()}[${this._index}].`}get _value(){return this._initialOptions}get isLinked(){return void 0!==this._index&&!!this.instance&&this._host.isLinked}static \u0275fac=function(){let t;return function(o){return(t||(t=ya(e)))(o||e)}}();static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})();function sO(e,n,t,i){void 0===!e.template||!n.nativeElement.hasChildNodes()||![].slice.call(n.nativeElement.childNodes).filter(c=>{if(c.tagName){const v=c.tagName.toLowerCase().substr(0,3);return!("dxi"===v||"dxo"===v)}return"#comment"!==c.nodeName&&c.textContent.replace(/\s/g,"").length}).length||(e.template={render:c=>{const v=n.nativeElement;if(Pe.setClass(v,"dx-template-wrapper",!0),c.container){const S=function Lie(e){return e.get?e.get(0):e}(c.container),T=S.contains(n.nativeElement);t.appendChild(S,n.nativeElement),T||i.body.contains(S)&&function(e){const n=[];V(e).hasClass(SL)||n.push(e),n.push.apply(n,e.querySelectorAll(`.${SL}`));for(let t=0;t<n.length;t++)xL(n[t],"dxshown")}(v)}return v}})}class ht{_host;_optionPath;getHost(){return this._host}setHost(n,t){this._host=n,this._optionPath=t||(()=>"")}setNestedOption(n){n.setHost(this._host,this._optionPath)}}Ht({buyNowLink:"https://go.devexpress.com/Licensing_Installer_Watermark_DevExtremeAngular.aspx"});const lO=()=>(aO||(aO="DX_isPlatformServer"),aO);let Bie=(()=>{class e{element;ngZone;watcherHelper;transferState;platformId;_initialOptions={};_optionsToUpdate={};_collectionContainerImpl;eventHelper;optionChangedHandlers=new wi;templates;instance;isLinked=!0;changedOptions={};removedNestedComponents=[];recreatedNestedComponents;widgetUpdateLocked=!1;templateUpdateRequired=!1;_updateTemplates(){if(this.templates.length&&this.templateUpdateRequired){const t={};this.templates.forEach(i=>{t[i.name]=i}),this.instance.option("integrationOptions.templates",t),this.templates=Object.values(t),this.templateUpdateRequired=!1}}_initEvents(){this.instance.on("optionChanged",t=>{this.changedOptions[t.name]=t.value;const i=t.name===t.fullName?t.value:t.component.option(t.name);this.eventHelper.fireNgEvent(`${t.name}Change`,[i]),this.optionChangedHandlers.emit(t)})}_initOptions(){this._initialOptions.integrationOptions.watchMethod=this.watcherHelper.getWatchMethod()}_initPlatform(){this.transferState.hasKey(lO())?this._initialOptions.integrationOptions.renderedOnServer=this.transferState.get(lO(),null):xv(this.platformId)&&this.transferState.set(lO(),!0)}_createEventEmitters(t){const i=this.ngZone;this.eventHelper.createEmitters(t),this._initialOptions.eventsStrategy=o=>{const r=new OL(o,i);return t.filter(c=>c.subscribe).forEach(c=>{r.addEmitter(c.subscribe,this[c.emit])}),r},this._initialOptions.nestedComponentOptions=function(o){return{eventsStrategy:r=>new OL(r,i),nestedComponentOptions:o.option("nestedComponentOptions")}}}_shouldOptionChange(t,i){if(this.changedOptions.hasOwnProperty(t)){const o=this.changedOptions[t];return delete this.changedOptions[t],i!==o}return!0}clearChangedOptions(){this.changedOptions={}}_getOption(t){return this.instance?this.instance.option(t):this._initialOptions[t]}lockWidgetUpdate(){!this.widgetUpdateLocked&&this.instance&&(this.instance.beginUpdate(),this.widgetUpdateLocked=!0)}unlockWidgetUpdate(){this.widgetUpdateLocked&&(this.widgetUpdateLocked=!1,this.instance.endUpdate())}_setOption(t,i){this.lockWidgetUpdate(),this._shouldOptionChange(t,i)&&(this.instance?this.instance.option(t,i):this._initialOptions[t]=i)}_createWidget(t){this._initialOptions.integrationOptions={},this._initPlatform(),this._initOptions(),this._initialOptions.onInitializing=function(){this.beginUpdate()},this.instance=this._createInstance(t,this._initialOptions),this._initEvents(),this._initialOptions={}}_destroyWidget(){if(this.removedNestedComponents=[],this.instance){const t=this.instance.element();xL(t,"dxremove",{_angularIntegration:!0}),this.instance.dispose(),Pe.removeElement(t)}}constructor(t,i,o,r,c,v){this.element=t,this.ngZone=i,this.watcherHelper=r,this.transferState=c,this.platformId=v,this.templates=[],o.setHost(this),this._collectionContainerImpl=new IL(this._setOption.bind(this)),this.eventHelper=new Fie(i,this)}ngOnChanges(t){for(const i in t)t[i].currentValue!==this[i]&&(this._optionsToUpdate[i]=t[i].currentValue)}ngOnInit(){this._createWidget(this.element.nativeElement)}ngDoCheck(){this.applyOptions()}ngAfterContentChecked(){this.applyOptions(),this.resetOptions(),this.unlockWidgetUpdate()}ngAfterViewInit(){this._updateTemplates(),this.instance.endUpdate(),this.recreatedNestedComponents=[]}ngAfterViewChecked(){this._updateTemplates()}applyOptions(){Object.keys(this._optionsToUpdate).length&&(this.instance&&this.instance.option(this._optionsToUpdate),this._optionsToUpdate={})}resetOptions(t){this.instance&&(this.removedNestedComponents.filter(i=>!(i&&!this.isRecreated(i)&&t)||i.startsWith(t)).forEach(i=>{this.instance.resetOption(i)}),this.removedNestedComponents=[],this.recreatedNestedComponents=[])}isRecreated(t){return this.recreatedNestedComponents&&this.recreatedNestedComponents.some(i=>i.getOptionPath()===t)}setTemplate(t){this.templates.push(t),this.templateUpdateRequired=!0}setChildren(t,i){return this.resetOptions(t),this._collectionContainerImpl.setChildren(t,i)}static \u0275fac=function(i){return new(i||e)(Le(uo),Le(Kt),Le(Br),Le(rO),Le(Fa),Le(ar))};static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fa],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})();const Vie=["mousemove","mouseover","mouseout"],zie=["mouseup","click","mousedown","transitionend","wheel"];let cO,uO=[],EL=function(e){cO||(cO=this.callBase.bind(this)),uO.push(e)};Qi.inject({add(e){return EL.call(this,e)}});let wL=(e,n,t)=>{Number(d0.major)<12&&console.warn("Your version of Angular is not supported. Please update your project to version 12 or later. Please refer to the Angular Update Guide for more information: https://update.angular.io"),Pe.inject({_document:e,listen(...o){const r=o[1];return Vie.includes(r)?n.runOutsideAngular(()=>this.callBase.apply(this,o)):n.isStable&&zie.includes(r)?n.run(()=>this.callBase.apply(this,o)):this.callBase.apply(this,o)},isElementNode:o=>o&&1===o.nodeType,isTextNode:o=>o&&3===o.nodeType,isDocument:o=>o&&9===o.nodeType}),HA.inject({getXhr(){if(!t)return this.callBase.apply(this);const o=t.build();return"withCredentials"in o||(o.withCredentials=!1),o}});const i=()=>{n.run(()=>{ue.set({}),uO.forEach(o=>cO.call(null,o)),uO=[],Qi.fire()})};i(),EL=o=>n.run(()=>o()),wL=i},jie=(()=>{class e{constructor(t,i,o){wL(t,i,o)}static \u0275fac=function(i){return new(i||e)(nt($i),nt(Kt),nt(Ov,8))};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),PL=(()=>{class e{_differs;_host;_propertyDiffers={};constructor(t){this._differs=t}setHost(t){this._host=t}setup(t,i){t in i&&this.setupSingle(t,i[t].currentValue)}setupSingle(t,i){if(i&&Array.isArray(i)){if(!this._propertyDiffers[t])try{return this._propertyDiffers[t]=this._differs.find(i).create(null),!0}catch{}}else delete this._propertyDiffers[t];return!1}getChanges(t,i){if(this._propertyDiffers[t])return this._propertyDiffers[t].diff(i)}checkChangedOptions(t,i){return this._host.changedOptions[t]===i}doCheck(t){if(this._propertyDiffers[t]&&this._host.instance){const i=this._host[t];(function Uie(e){return e&&"function"==typeof e[Symbol.iterator]})(i)&&this.getChanges(t,i)&&!this.checkChangedOptions(t,i)&&(this._host.lockWidgetUpdate(),this._host.instance.option(t,i))}}static \u0275fac=function(i){return new(i||e)(nt(Kc))};static \u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();const dO=["*"];let $ie=(()=>{class e extends sg{get orientation(){return this._getOption("orientation")}set orientation(t){this._setOption("orientation",t)}get type(){return this._getOption("type")}set type(t){this._setOption("type",t)}get _optionPath(){return"autoLayout"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnInit(){this._addRecreatedComponent()}ngOnDestroy(){this._addRemovedOption(this._getOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxo-auto-layout"]],inputs:{orientation:"orientation",type:"type"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),TL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Wie=(()=>{class e extends fs{get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get html(){return this._getOption("html")}set html(t){this._setOption("html",t)}get icon(){return this._getOption("icon")}set icon(t){this._setOption("icon",t)}get template(){return this._getOption("template")}set template(t){this._setOption("template",t)}get text(){return this._getOption("text")}set text(t){this._setOption("text",t)}get title(){return this._getOption("title")}set title(t){this._setOption("title",t)}get titleTemplate(){return this._getOption("titleTemplate")}set titleTemplate(t){this._setOption("titleTemplate",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get onClick(){return this._getOption("onClick")}set onClick(t){this._setOption("onClick",t)}get stylingMode(){return this._getOption("stylingMode")}set stylingMode(t){this._setOption("stylingMode",t)}get type(){return this._getOption("type")}set type(t){this._setOption("type",t)}get baseSize(){return this._getOption("baseSize")}set baseSize(t){this._setOption("baseSize",t)}get box(){return this._getOption("box")}set box(t){this._setOption("box",t)}get ratio(){return this._getOption("ratio")}set ratio(t){this._setOption("ratio",t)}get shrink(){return this._getOption("shrink")}set shrink(t){this._setOption("shrink",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get beginGroup(){return this._getOption("beginGroup")}set beginGroup(t){this._setOption("beginGroup",t)}get closeMenuOnClick(){return this._getOption("closeMenuOnClick")}set closeMenuOnClick(t){this._setOption("closeMenuOnClick",t)}get items(){return this._getOption("items")}set items(t){this._setOption("items",t)}get selectable(){return this._getOption("selectable")}set selectable(t){this._setOption("selectable",t)}get selected(){return this._getOption("selected")}set selected(t){this._setOption("selected",t)}get colSpan(){return this._getOption("colSpan")}set colSpan(t){this._setOption("colSpan",t)}get cssClass(){return this._getOption("cssClass")}set cssClass(t){this._setOption("cssClass",t)}get dataField(){return this._getOption("dataField")}set dataField(t){this._setOption("dataField",t)}get editorOptions(){return this._getOption("editorOptions")}set editorOptions(t){this._setOption("editorOptions",t)}get editorType(){return this._getOption("editorType")}set editorType(t){this._setOption("editorType",t)}get helpText(){return this._getOption("helpText")}set helpText(t){this._setOption("helpText",t)}get isRequired(){return this._getOption("isRequired")}set isRequired(t){this._setOption("isRequired",t)}get itemType(){return this._getOption("itemType")}set itemType(t){this._setOption("itemType",t)}get label(){return this._getOption("label")}set label(t){this._setOption("label",t)}get name(){return this._getOption("name")}set name(t){this._setOption("name",t)}get validationRules(){return this._getOption("validationRules")}set validationRules(t){this._setOption("validationRules",t)}get visibleIndex(){return this._getOption("visibleIndex")}set visibleIndex(t){this._setOption("visibleIndex",t)}get alignItemLabels(){return this._getOption("alignItemLabels")}set alignItemLabels(t){this._setOption("alignItemLabels",t)}get caption(){return this._getOption("caption")}set caption(t){this._setOption("caption",t)}get captionTemplate(){return this._getOption("captionTemplate")}set captionTemplate(t){this._setOption("captionTemplate",t)}get colCount(){return this._getOption("colCount")}set colCount(t){this._setOption("colCount",t)}get colCountByScreen(){return this._getOption("colCountByScreen")}set colCountByScreen(t){this._setOption("colCountByScreen",t)}get tabPanelOptions(){return this._getOption("tabPanelOptions")}set tabPanelOptions(t){this._setOption("tabPanelOptions",t)}get tabs(){return this._getOption("tabs")}set tabs(t){this._setOption("tabs",t)}get badge(){return this._getOption("badge")}set badge(t){this._setOption("badge",t)}get tabTemplate(){return this._getOption("tabTemplate")}set tabTemplate(t){this._setOption("tabTemplate",t)}get buttonOptions(){return this._getOption("buttonOptions")}set buttonOptions(t){this._setOption("buttonOptions",t)}get horizontalAlignment(){return this._getOption("horizontalAlignment")}set horizontalAlignment(t){this._setOption("horizontalAlignment",t)}get verticalAlignment(){return this._getOption("verticalAlignment")}set verticalAlignment(t){this._setOption("verticalAlignment",t)}get locateInMenu(){return this._getOption("locateInMenu")}set locateInMenu(t){this._setOption("locateInMenu",t)}get location(){return this._getOption("location")}set location(t){this._setOption("location",t)}get menuItemTemplate(){return this._getOption("menuItemTemplate")}set menuItemTemplate(t){this._setOption("menuItemTemplate",t)}get options(){return this._getOption("options")}set options(t){this._setOption("options",t)}get showText(){return this._getOption("showText")}set showText(t){this._setOption("showText",t)}get widget(){return this._getOption("widget")}set widget(t){this._setOption("widget",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get imageAlt(){return this._getOption("imageAlt")}set imageAlt(t){this._setOption("imageAlt",t)}get imageSrc(){return this._getOption("imageSrc")}set imageSrc(t){this._setOption("imageSrc",t)}get acceptedValues(){return this._getOption("acceptedValues")}set acceptedValues(t){this._setOption("acceptedValues",t)}get formatName(){return this._getOption("formatName")}set formatName(t){this._setOption("formatName",t)}get formatValues(){return this._getOption("formatValues")}set formatValues(t){this._setOption("formatValues",t)}get key(){return this._getOption("key")}set key(t){this._setOption("key",t)}get showChevron(){return this._getOption("showChevron")}set showChevron(t){this._setOption("showChevron",t)}get linkAttr(){return this._getOption("linkAttr")}set linkAttr(t){this._setOption("linkAttr",t)}get url(){return this._getOption("url")}set url(t){this._setOption("url",t)}get collapsed(){return this._getOption("collapsed")}set collapsed(t){this._setOption("collapsed",t)}get collapsedSize(){return this._getOption("collapsedSize")}set collapsedSize(t){this._setOption("collapsedSize",t)}get collapsible(){return this._getOption("collapsible")}set collapsible(t){this._setOption("collapsible",t)}get maxSize(){return this._getOption("maxSize")}set maxSize(t){this._setOption("maxSize",t)}get minSize(){return this._getOption("minSize")}set minSize(t){this._setOption("minSize",t)}get resizable(){return this._getOption("resizable")}set resizable(t){this._setOption("resizable",t)}get size(){return this._getOption("size")}set size(t){this._setOption("size",t)}get splitter(){return this._getOption("splitter")}set splitter(t){this._setOption("splitter",t)}get heightRatio(){return this._getOption("heightRatio")}set heightRatio(t){this._setOption("heightRatio",t)}get widthRatio(){return this._getOption("widthRatio")}set widthRatio(t){this._setOption("widthRatio",t)}get expanded(){return this._getOption("expanded")}set expanded(t){this._setOption("expanded",t)}get hasItems(){return this._getOption("hasItems")}set hasItems(t){this._setOption("hasItems",t)}get id(){return this._getOption("id")}set id(t){this._setOption("id",t)}get parentId(){return this._getOption("parentId")}set parentId(t){this._setOption("parentId",t)}static \u0275fac=function(){let t;return function(o){return(t||(t=ya(e)))(o||e)}}();static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})(),Gie=(()=>{class e extends fs{get message(){return this._getOption("message")}set message(t){this._setOption("message",t)}get trim(){return this._getOption("trim")}set trim(t){this._setOption("trim",t)}get type(){return this._getOption("type")}set type(t){this._setOption("type",t)}get ignoreEmptyValue(){return this._getOption("ignoreEmptyValue")}set ignoreEmptyValue(t){this._setOption("ignoreEmptyValue",t)}get max(){return this._getOption("max")}set max(t){this._setOption("max",t)}get min(){return this._getOption("min")}set min(t){this._setOption("min",t)}get reevaluate(){return this._getOption("reevaluate")}set reevaluate(t){this._setOption("reevaluate",t)}get validationCallback(){return this._getOption("validationCallback")}set validationCallback(t){this._setOption("validationCallback",t)}get comparisonTarget(){return this._getOption("comparisonTarget")}set comparisonTarget(t){this._setOption("comparisonTarget",t)}get comparisonType(){return this._getOption("comparisonType")}set comparisonType(t){this._setOption("comparisonType",t)}get pattern(){return this._getOption("pattern")}set pattern(t){this._setOption("pattern",t)}get _optionPath(){return"validationRules"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxi-validation-rule"]],inputs:{message:"message",trim:"trim",type:"type",ignoreEmptyValue:"ignoreEmptyValue",max:"max",min:"min",reevaluate:"reevaluate",validationCallback:"validationCallback",comparisonTarget:"comparisonTarget",comparisonType:"comparisonType",pattern:"pattern"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),Kie=(()=>{class e extends fs{get alignItemLabels(){return this._getOption("alignItemLabels")}set alignItemLabels(t){this._setOption("alignItemLabels",t)}get badge(){return this._getOption("badge")}set badge(t){this._setOption("badge",t)}get colCount(){return this._getOption("colCount")}set colCount(t){this._setOption("colCount",t)}get colCountByScreen(){return this._getOption("colCountByScreen")}set colCountByScreen(t){this._setOption("colCountByScreen",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get icon(){return this._getOption("icon")}set icon(t){this._setOption("icon",t)}get items(){return this._getOption("items")}set items(t){this._setOption("items",t)}get tabTemplate(){return this._getOption("tabTemplate")}set tabTemplate(t){this._setOption("tabTemplate",t)}get template(){return this._getOption("template")}set template(t){this._setOption("template",t)}get title(){return this._getOption("title")}set title(t){this._setOption("title",t)}get commands(){return this._getOption("commands")}set commands(t){this._setOption("commands",t)}get groups(){return this._getOption("groups")}set groups(t){this._setOption("groups",t)}get name(){return this._getOption("name")}set name(t){this._setOption("name",t)}static \u0275fac=function(){let t;return function(o){return(t||(t=ya(e)))(o||e)}}();static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})(),qie=(()=>{class e extends fs{get icon(){return this._getOption("icon")}set icon(t){this._setOption("icon",t)}get items(){return this._getOption("items")}set items(t){this._setOption("items",t)}get location(){return this._getOption("location")}set location(t){this._setOption("location",t)}get name(){return this._getOption("name")}set name(t){this._setOption("name",t)}get text(){return this._getOption("text")}set text(t){this._setOption("text",t)}static \u0275fac=function(){let t;return function(o){return(t||(t=ya(e)))(o||e)}}();static \u0275cmp=tn({type:e,selectors:[["ng-component"]],features:[fn],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})(),ML=(()=>{class e extends qie{get _optionPath(){return"commands"}get itemsChildren(){return this._getOption("items")}set itemsChildren(t){this.setChildren("items",t)}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxi-command"]],contentQueries:function(i,o,r){if(1&i&&Mi(r,FL,4),2&i){let c;Ti(c=Ai())&&(o.itemsChildren=c)}},inputs:{icon:"icon",items:"items",location:"location",name:"name",text:"text"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),AL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),hO=(()=>{class e extends fs{get commands(){return this._getOption("commands")}set commands(t){this._setOption("commands",t)}get title(){return this._getOption("title")}set title(t){this._setOption("title",t)}get category(){return this._getOption("category")}set category(t){this._setOption("category",t)}get displayMode(){return this._getOption("displayMode")}set displayMode(t){this._setOption("displayMode",t)}get expanded(){return this._getOption("expanded")}set expanded(t){this._setOption("expanded",t)}get shapes(){return this._getOption("shapes")}set shapes(t){this._setOption("shapes",t)}get _optionPath(){return"groups"}get commandsChildren(){return this._getOption("commands")}set commandsChildren(t){this.setChildren("commands",t)}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxi-group"]],contentQueries:function(i,o,r){if(1&i&&Mi(r,ML,4),2&i){let c;Ti(c=Ai())&&(o.commandsChildren=c)}},inputs:{commands:"commands",title:"title",category:"category",displayMode:"displayMode",expanded:"expanded",shapes:"shapes"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),RL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Zie=(()=>{class e extends Kie{renderer;document;element;get _optionPath(){return"tabs"}get itemsChildren(){return this._getOption("items")}set itemsChildren(t){this.setChildren("items",t)}get commandsChildren(){return this._getOption("commands")}set commandsChildren(t){this.setChildren("commands",t)}get groupsChildren(){return this._getOption("groups")}set groupsChildren(t){this.setChildren("groups",t)}constructor(t,i,o,r,c,v){super(),this.renderer=o,this.document=r,this.element=v,t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this)),c.setHost(this)}setTemplate(t){this.template=t}ngAfterViewInit(){sO(this,this.element,this.renderer,this.document)}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1),Le(Dc),Le($i),Le(Br,1),Le(uo))};static \u0275cmp=tn({type:e,selectors:[["dxi-tab"]],contentQueries:function(i,o,r){if(1&i&&(Mi(r,FL,4),Mi(r,ML,4),Mi(r,hO,4)),2&i){let c;Ti(c=Ai())&&(o.itemsChildren=c),Ti(c=Ai())&&(o.commandsChildren=c),Ti(c=Ai())&&(o.groupsChildren=c)}},inputs:{alignItemLabels:"alignItemLabels",badge:"badge",colCount:"colCount",colCountByScreen:"colCountByScreen",disabled:"disabled",icon:"icon",items:"items",tabTemplate:"tabTemplate",template:"template",title:"title",commands:"commands",groups:"groups",name:"name"},features:[Jn([ht,Br]),fn],ngContentSelectors:dO,decls:1,vars:0,template:function(i,o){1&i&&(Mh(),Ah(0))},styles:["[_nghost-%COMP%]{display:block}"]})}return e})(),kL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Xie=(()=>{class e extends fs{get lat(){return this._getOption("lat")}set lat(t){this._setOption("lat",t)}get lng(){return this._getOption("lng")}set lng(t){this._setOption("lng",t)}get col(){return this._getOption("col")}set col(t){this._setOption("col",t)}get colspan(){return this._getOption("colspan")}set colspan(t){this._setOption("colspan",t)}get row(){return this._getOption("row")}set row(t){this._setOption("row",t)}get rowspan(){return this._getOption("rowspan")}set rowspan(t){this._setOption("rowspan",t)}get screen(){return this._getOption("screen")}set screen(t){this._setOption("screen",t)}get _optionPath(){return"location"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxi-location"]],inputs:{lat:"lat",lng:"lng",col:"col",colspan:"colspan",row:"row",rowspan:"rowspan",screen:"screen"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),FL=(()=>{class e extends Wie{renderer;document;element;get _optionPath(){return"items"}get itemsChildren(){return this._getOption("items")}set itemsChildren(t){this.setChildren("items",t)}get validationRulesChildren(){return this._getOption("validationRules")}set validationRulesChildren(t){this.setChildren("validationRules",t)}get tabsChildren(){return this._getOption("tabs")}set tabsChildren(t){this.setChildren("tabs",t)}get locationChildren(){return this._getOption("location")}set locationChildren(t){this.setChildren("location",t)}constructor(t,i,o,r,c,v){super(),this.renderer=o,this.document=r,this.element=v,t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this)),c.setHost(this)}setTemplate(t){this.template=t}ngAfterViewInit(){sO(this,this.element,this.renderer,this.document)}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1),Le(Dc),Le($i),Le(Br,1),Le(uo))};static \u0275cmp=tn({type:e,selectors:[["dxi-item"]],contentQueries:function(i,o,r){if(1&i&&(Mi(r,e,4),Mi(r,Gie,4),Mi(r,Zie,4),Mi(r,Xie,4)),2&i){let c;Ti(c=Ai())&&(o.itemsChildren=c),Ti(c=Ai())&&(o.validationRulesChildren=c),Ti(c=Ai())&&(o.tabsChildren=c),Ti(c=Ai())&&(o.locationChildren=c)}},inputs:{disabled:"disabled",html:"html",icon:"icon",template:"template",text:"text",title:"title",titleTemplate:"titleTemplate",visible:"visible",onClick:"onClick",stylingMode:"stylingMode",type:"type",baseSize:"baseSize",box:"box",ratio:"ratio",shrink:"shrink",elementAttr:"elementAttr",hint:"hint",beginGroup:"beginGroup",closeMenuOnClick:"closeMenuOnClick",items:"items",selectable:"selectable",selected:"selected",colSpan:"colSpan",cssClass:"cssClass",dataField:"dataField",editorOptions:"editorOptions",editorType:"editorType",helpText:"helpText",isRequired:"isRequired",itemType:"itemType",label:"label",name:"name",validationRules:"validationRules",visibleIndex:"visibleIndex",alignItemLabels:"alignItemLabels",caption:"caption",captionTemplate:"captionTemplate",colCount:"colCount",colCountByScreen:"colCountByScreen",tabPanelOptions:"tabPanelOptions",tabs:"tabs",badge:"badge",tabTemplate:"tabTemplate",buttonOptions:"buttonOptions",horizontalAlignment:"horizontalAlignment",verticalAlignment:"verticalAlignment",locateInMenu:"locateInMenu",location:"location",menuItemTemplate:"menuItemTemplate",options:"options",showText:"showText",widget:"widget",height:"height",width:"width",imageAlt:"imageAlt",imageSrc:"imageSrc",acceptedValues:"acceptedValues",formatName:"formatName",formatValues:"formatValues",key:"key",showChevron:"showChevron",linkAttr:"linkAttr",url:"url",collapsed:"collapsed",collapsedSize:"collapsedSize",collapsible:"collapsible",maxSize:"maxSize",minSize:"minSize",resizable:"resizable",size:"size",splitter:"splitter",heightRatio:"heightRatio",widthRatio:"widthRatio",expanded:"expanded",hasItems:"hasItems",id:"id",parentId:"parentId"},features:[Jn([ht,Br]),fn],ngContentSelectors:dO,decls:1,vars:0,template:function(i,o){1&i&&(Mh(),Ah(0))},styles:["[_nghost-%COMP%]{display:block}"]})}return e})(),LL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Yie=(()=>{class e extends fs{get x(){return this._getOption("x")}set x(t){this._setOption("x",t)}get y(){return this._getOption("y")}set y(t){this._setOption("y",t)}get _optionPath(){return"connectionPoints"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxi-connection-point"]],inputs:{x:"x",y:"y"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),NL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),HL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),BL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Qie=(()=>{class e extends fs{renderer;document;element;get allowEditImage(){return this._getOption("allowEditImage")}set allowEditImage(t){this._setOption("allowEditImage",t)}get allowEditText(){return this._getOption("allowEditText")}set allowEditText(t){this._setOption("allowEditText",t)}get allowResize(){return this._getOption("allowResize")}set allowResize(t){this._setOption("allowResize",t)}get backgroundImageHeight(){return this._getOption("backgroundImageHeight")}set backgroundImageHeight(t){this._setOption("backgroundImageHeight",t)}get backgroundImageLeft(){return this._getOption("backgroundImageLeft")}set backgroundImageLeft(t){this._setOption("backgroundImageLeft",t)}get backgroundImageToolboxUrl(){return this._getOption("backgroundImageToolboxUrl")}set backgroundImageToolboxUrl(t){this._setOption("backgroundImageToolboxUrl",t)}get backgroundImageTop(){return this._getOption("backgroundImageTop")}set backgroundImageTop(t){this._setOption("backgroundImageTop",t)}get backgroundImageUrl(){return this._getOption("backgroundImageUrl")}set backgroundImageUrl(t){this._setOption("backgroundImageUrl",t)}get backgroundImageWidth(){return this._getOption("backgroundImageWidth")}set backgroundImageWidth(t){this._setOption("backgroundImageWidth",t)}get baseType(){return this._getOption("baseType")}set baseType(t){this._setOption("baseType",t)}get category(){return this._getOption("category")}set category(t){this._setOption("category",t)}get connectionPoints(){return this._getOption("connectionPoints")}set connectionPoints(t){this._setOption("connectionPoints",t)}get defaultHeight(){return this._getOption("defaultHeight")}set defaultHeight(t){this._setOption("defaultHeight",t)}get defaultImageUrl(){return this._getOption("defaultImageUrl")}set defaultImageUrl(t){this._setOption("defaultImageUrl",t)}get defaultText(){return this._getOption("defaultText")}set defaultText(t){this._setOption("defaultText",t)}get defaultWidth(){return this._getOption("defaultWidth")}set defaultWidth(t){this._setOption("defaultWidth",t)}get imageHeight(){return this._getOption("imageHeight")}set imageHeight(t){this._setOption("imageHeight",t)}get imageLeft(){return this._getOption("imageLeft")}set imageLeft(t){this._setOption("imageLeft",t)}get imageTop(){return this._getOption("imageTop")}set imageTop(t){this._setOption("imageTop",t)}get imageWidth(){return this._getOption("imageWidth")}set imageWidth(t){this._setOption("imageWidth",t)}get keepRatioOnAutoSize(){return this._getOption("keepRatioOnAutoSize")}set keepRatioOnAutoSize(t){this._setOption("keepRatioOnAutoSize",t)}get maxHeight(){return this._getOption("maxHeight")}set maxHeight(t){this._setOption("maxHeight",t)}get maxWidth(){return this._getOption("maxWidth")}set maxWidth(t){this._setOption("maxWidth",t)}get minHeight(){return this._getOption("minHeight")}set minHeight(t){this._setOption("minHeight",t)}get minWidth(){return this._getOption("minWidth")}set minWidth(t){this._setOption("minWidth",t)}get template(){return this._getOption("template")}set template(t){this._setOption("template",t)}get templateHeight(){return this._getOption("templateHeight")}set templateHeight(t){this._setOption("templateHeight",t)}get templateLeft(){return this._getOption("templateLeft")}set templateLeft(t){this._setOption("templateLeft",t)}get templateTop(){return this._getOption("templateTop")}set templateTop(t){this._setOption("templateTop",t)}get templateWidth(){return this._getOption("templateWidth")}set templateWidth(t){this._setOption("templateWidth",t)}get textHeight(){return this._getOption("textHeight")}set textHeight(t){this._setOption("textHeight",t)}get textLeft(){return this._getOption("textLeft")}set textLeft(t){this._setOption("textLeft",t)}get textTop(){return this._getOption("textTop")}set textTop(t){this._setOption("textTop",t)}get textWidth(){return this._getOption("textWidth")}set textWidth(t){this._setOption("textWidth",t)}get title(){return this._getOption("title")}set title(t){this._setOption("title",t)}get toolboxTemplate(){return this._getOption("toolboxTemplate")}set toolboxTemplate(t){this._setOption("toolboxTemplate",t)}get toolboxWidthToHeightRatio(){return this._getOption("toolboxWidthToHeightRatio")}set toolboxWidthToHeightRatio(t){this._setOption("toolboxWidthToHeightRatio",t)}get type(){return this._getOption("type")}set type(t){this._setOption("type",t)}get _optionPath(){return"customShapes"}get connectionPointsChildren(){return this._getOption("connectionPoints")}set connectionPointsChildren(t){this.setChildren("connectionPoints",t)}constructor(t,i,o,r,c,v){super(),this.renderer=o,this.document=r,this.element=v,t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this)),c.setHost(this)}setTemplate(t){this.template=t}ngAfterViewInit(){sO(this,this.element,this.renderer,this.document)}ngOnDestroy(){this._deleteRemovedOptions(this._fullOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1),Le(Dc),Le($i),Le(Br,1),Le(uo))};static \u0275cmp=tn({type:e,selectors:[["dxi-custom-shape"]],contentQueries:function(i,o,r){if(1&i&&Mi(r,Yie,4),2&i){let c;Ti(c=Ai())&&(o.connectionPointsChildren=c)}},inputs:{allowEditImage:"allowEditImage",allowEditText:"allowEditText",allowResize:"allowResize",backgroundImageHeight:"backgroundImageHeight",backgroundImageLeft:"backgroundImageLeft",backgroundImageToolboxUrl:"backgroundImageToolboxUrl",backgroundImageTop:"backgroundImageTop",backgroundImageUrl:"backgroundImageUrl",backgroundImageWidth:"backgroundImageWidth",baseType:"baseType",category:"category",connectionPoints:"connectionPoints",defaultHeight:"defaultHeight",defaultImageUrl:"defaultImageUrl",defaultText:"defaultText",defaultWidth:"defaultWidth",imageHeight:"imageHeight",imageLeft:"imageLeft",imageTop:"imageTop",imageWidth:"imageWidth",keepRatioOnAutoSize:"keepRatioOnAutoSize",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",template:"template",templateHeight:"templateHeight",templateLeft:"templateLeft",templateTop:"templateTop",templateWidth:"templateWidth",textHeight:"textHeight",textLeft:"textLeft",textTop:"textTop",textWidth:"textWidth",title:"title",toolboxTemplate:"toolboxTemplate",toolboxWidthToHeightRatio:"toolboxWidthToHeightRatio",type:"type"},features:[Jn([ht,Br]),fn],ngContentSelectors:dO,decls:1,vars:0,template:function(i,o){1&i&&(Mh(),Ah(0))},styles:["[_nghost-%COMP%]{display:block}"]})}return e})(),VL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),zL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),Jie=(()=>{class e extends sg{get customDataExpr(){return this._getOption("customDataExpr")}set customDataExpr(t){this._setOption("customDataExpr",t)}get dataSource(){return this._getOption("dataSource")}set dataSource(t){this._setOption("dataSource",t)}get fromExpr(){return this._getOption("fromExpr")}set fromExpr(t){this._setOption("fromExpr",t)}get fromLineEndExpr(){return this._getOption("fromLineEndExpr")}set fromLineEndExpr(t){this._setOption("fromLineEndExpr",t)}get fromPointIndexExpr(){return this._getOption("fromPointIndexExpr")}set fromPointIndexExpr(t){this._setOption("fromPointIndexExpr",t)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(t){this._setOption("keyExpr",t)}get lineTypeExpr(){return this._getOption("lineTypeExpr")}set lineTypeExpr(t){this._setOption("lineTypeExpr",t)}get lockedExpr(){return this._getOption("lockedExpr")}set lockedExpr(t){this._setOption("lockedExpr",t)}get pointsExpr(){return this._getOption("pointsExpr")}set pointsExpr(t){this._setOption("pointsExpr",t)}get styleExpr(){return this._getOption("styleExpr")}set styleExpr(t){this._setOption("styleExpr",t)}get textExpr(){return this._getOption("textExpr")}set textExpr(t){this._setOption("textExpr",t)}get textStyleExpr(){return this._getOption("textStyleExpr")}set textStyleExpr(t){this._setOption("textStyleExpr",t)}get toExpr(){return this._getOption("toExpr")}set toExpr(t){this._setOption("toExpr",t)}get toLineEndExpr(){return this._getOption("toLineEndExpr")}set toLineEndExpr(t){this._setOption("toLineEndExpr",t)}get toPointIndexExpr(){return this._getOption("toPointIndexExpr")}set toPointIndexExpr(t){this._setOption("toPointIndexExpr",t)}get zIndexExpr(){return this._getOption("zIndexExpr")}set zIndexExpr(t){this._setOption("zIndexExpr",t)}get _optionPath(){return"edges"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnInit(){this._addRecreatedComponent()}ngOnDestroy(){this._addRemovedOption(this._getOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxo-edges"]],inputs:{customDataExpr:"customDataExpr",dataSource:"dataSource",fromExpr:"fromExpr",fromLineEndExpr:"fromLineEndExpr",fromPointIndexExpr:"fromPointIndexExpr",keyExpr:"keyExpr",lineTypeExpr:"lineTypeExpr",lockedExpr:"lockedExpr",pointsExpr:"pointsExpr",styleExpr:"styleExpr",textExpr:"textExpr",textStyleExpr:"textStyleExpr",toExpr:"toExpr",toLineEndExpr:"toLineEndExpr",toPointIndexExpr:"toPointIndexExpr",zIndexExpr:"zIndexExpr"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),jL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),UL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),$L=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),WL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),GL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),KL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),eoe=(()=>{class e extends sg{get autoLayout(){return this._getOption("autoLayout")}set autoLayout(t){this._setOption("autoLayout",t)}get autoSizeEnabled(){return this._getOption("autoSizeEnabled")}set autoSizeEnabled(t){this._setOption("autoSizeEnabled",t)}get containerChildrenExpr(){return this._getOption("containerChildrenExpr")}set containerChildrenExpr(t){this._setOption("containerChildrenExpr",t)}get containerKeyExpr(){return this._getOption("containerKeyExpr")}set containerKeyExpr(t){this._setOption("containerKeyExpr",t)}get customDataExpr(){return this._getOption("customDataExpr")}set customDataExpr(t){this._setOption("customDataExpr",t)}get dataSource(){return this._getOption("dataSource")}set dataSource(t){this._setOption("dataSource",t)}get heightExpr(){return this._getOption("heightExpr")}set heightExpr(t){this._setOption("heightExpr",t)}get imageUrlExpr(){return this._getOption("imageUrlExpr")}set imageUrlExpr(t){this._setOption("imageUrlExpr",t)}get itemsExpr(){return this._getOption("itemsExpr")}set itemsExpr(t){this._setOption("itemsExpr",t)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(t){this._setOption("keyExpr",t)}get leftExpr(){return this._getOption("leftExpr")}set leftExpr(t){this._setOption("leftExpr",t)}get lockedExpr(){return this._getOption("lockedExpr")}set lockedExpr(t){this._setOption("lockedExpr",t)}get parentKeyExpr(){return this._getOption("parentKeyExpr")}set parentKeyExpr(t){this._setOption("parentKeyExpr",t)}get styleExpr(){return this._getOption("styleExpr")}set styleExpr(t){this._setOption("styleExpr",t)}get textExpr(){return this._getOption("textExpr")}set textExpr(t){this._setOption("textExpr",t)}get textStyleExpr(){return this._getOption("textStyleExpr")}set textStyleExpr(t){this._setOption("textStyleExpr",t)}get topExpr(){return this._getOption("topExpr")}set topExpr(t){this._setOption("topExpr",t)}get typeExpr(){return this._getOption("typeExpr")}set typeExpr(t){this._setOption("typeExpr",t)}get widthExpr(){return this._getOption("widthExpr")}set widthExpr(t){this._setOption("widthExpr",t)}get zIndexExpr(){return this._getOption("zIndexExpr")}set zIndexExpr(t){this._setOption("zIndexExpr",t)}get _optionPath(){return"nodes"}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnInit(){this._addRecreatedComponent()}ngOnDestroy(){this._addRemovedOption(this._getOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxo-nodes"]],inputs:{autoLayout:"autoLayout",autoSizeEnabled:"autoSizeEnabled",containerChildrenExpr:"containerChildrenExpr",containerKeyExpr:"containerKeyExpr",customDataExpr:"customDataExpr",dataSource:"dataSource",heightExpr:"heightExpr",imageUrlExpr:"imageUrlExpr",itemsExpr:"itemsExpr",keyExpr:"keyExpr",leftExpr:"leftExpr",lockedExpr:"lockedExpr",parentKeyExpr:"parentKeyExpr",styleExpr:"styleExpr",textExpr:"textExpr",textStyleExpr:"textStyleExpr",topExpr:"topExpr",typeExpr:"typeExpr",widthExpr:"widthExpr",zIndexExpr:"zIndexExpr"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),qL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),ZL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),XL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),toe=(()=>{class e extends sg{get groups(){return this._getOption("groups")}set groups(t){this._setOption("groups",t)}get shapeIconsPerRow(){return this._getOption("shapeIconsPerRow")}set shapeIconsPerRow(t){this._setOption("shapeIconsPerRow",t)}get showSearch(){return this._getOption("showSearch")}set showSearch(t){this._setOption("showSearch",t)}get visibility(){return this._getOption("visibility")}set visibility(t){this._setOption("visibility",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get _optionPath(){return"toolbox"}get groupsChildren(){return this._getOption("groups")}set groupsChildren(t){this.setChildren("groups",t)}constructor(t,i){super(),t.setNestedOption(this),i.setHost(this,this._fullOptionPath.bind(this))}ngOnInit(){this._addRecreatedComponent()}ngOnDestroy(){this._addRemovedOption(this._getOptionPath())}static \u0275fac=function(i){return new(i||e)(Le(ht,5),Le(ht,1))};static \u0275cmp=tn({type:e,selectors:[["dxo-toolbox"]],contentQueries:function(i,o,r){if(1&i&&Mi(r,hO,4),2&i){let c;Ti(c=Ai())&&(o.groupsChildren=c)}},inputs:{groups:"groups",shapeIconsPerRow:"shapeIconsPerRow",showSearch:"showSearch",visibility:"visibility",width:"width"},features:[Jn([ht]),fn],decls:0,vars:0,template:function(i,o){}})}return e})(),YL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),QL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),JL=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({})}return e})(),noe=(()=>{class e extends Bie{_watcherHelper;_idh;instance=null;get autoZoomMode(){return this._getOption("autoZoomMode")}set autoZoomMode(t){this._setOption("autoZoomMode",t)}get contextMenu(){return this._getOption("contextMenu")}set contextMenu(t){this._setOption("contextMenu",t)}get contextToolbox(){return this._getOption("contextToolbox")}set contextToolbox(t){this._setOption("contextToolbox",t)}get customShapes(){return this._getOption("customShapes")}set customShapes(t){this._setOption("customShapes",t)}get customShapeTemplate(){return this._getOption("customShapeTemplate")}set customShapeTemplate(t){this._setOption("customShapeTemplate",t)}get customShapeToolboxTemplate(){return this._getOption("customShapeToolboxTemplate")}set customShapeToolboxTemplate(t){this._setOption("customShapeToolboxTemplate",t)}get defaultItemProperties(){return this._getOption("defaultItemProperties")}set defaultItemProperties(t){this._setOption("defaultItemProperties",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get edges(){return this._getOption("edges")}set edges(t){this._setOption("edges",t)}get editing(){return this._getOption("editing")}set editing(t){this._setOption("editing",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get export(){return this._getOption("export")}set export(t){this._setOption("export",t)}get fullScreen(){return this._getOption("fullScreen")}set fullScreen(t){this._setOption("fullScreen",t)}get gridSize(){return this._getOption("gridSize")}set gridSize(t){this._setOption("gridSize",t)}get hasChanges(){return this._getOption("hasChanges")}set hasChanges(t){this._setOption("hasChanges",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get historyToolbar(){return this._getOption("historyToolbar")}set historyToolbar(t){this._setOption("historyToolbar",t)}get mainToolbar(){return this._getOption("mainToolbar")}set mainToolbar(t){this._setOption("mainToolbar",t)}get nodes(){return this._getOption("nodes")}set nodes(t){this._setOption("nodes",t)}get pageColor(){return this._getOption("pageColor")}set pageColor(t){this._setOption("pageColor",t)}get pageOrientation(){return this._getOption("pageOrientation")}set pageOrientation(t){this._setOption("pageOrientation",t)}get pageSize(){return this._getOption("pageSize")}set pageSize(t){this._setOption("pageSize",t)}get propertiesPanel(){return this._getOption("propertiesPanel")}set propertiesPanel(t){this._setOption("propertiesPanel",t)}get readOnly(){return this._getOption("readOnly")}set readOnly(t){this._setOption("readOnly",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get showGrid(){return this._getOption("showGrid")}set showGrid(t){this._setOption("showGrid",t)}get simpleView(){return this._getOption("simpleView")}set simpleView(t){this._setOption("simpleView",t)}get snapToGrid(){return this._getOption("snapToGrid")}set snapToGrid(t){this._setOption("snapToGrid",t)}get toolbox(){return this._getOption("toolbox")}set toolbox(t){this._setOption("toolbox",t)}get units(){return this._getOption("units")}set units(t){this._setOption("units",t)}get useNativeScrolling(){return this._getOption("useNativeScrolling")}set useNativeScrolling(t){this._setOption("useNativeScrolling",t)}get viewToolbar(){return this._getOption("viewToolbar")}set viewToolbar(t){this._setOption("viewToolbar",t)}get viewUnits(){return this._getOption("viewUnits")}set viewUnits(t){this._setOption("viewUnits",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get zoomLevel(){return this._getOption("zoomLevel")}set zoomLevel(t){this._setOption("zoomLevel",t)}onContentReady;onCustomCommand;onDisposing;onInitialized;onItemClick;onItemDblClick;onOptionChanged;onRequestEditOperation;onRequestLayoutUpdate;onSelectionChanged;autoZoomModeChange;contextMenuChange;contextToolboxChange;customShapesChange;customShapeTemplateChange;customShapeToolboxTemplateChange;defaultItemPropertiesChange;disabledChange;edgesChange;editingChange;elementAttrChange;exportChange;fullScreenChange;gridSizeChange;hasChangesChange;heightChange;historyToolbarChange;mainToolbarChange;nodesChange;pageColorChange;pageOrientationChange;pageSizeChange;propertiesPanelChange;readOnlyChange;rtlEnabledChange;showGridChange;simpleViewChange;snapToGridChange;toolboxChange;unitsChange;useNativeScrollingChange;viewToolbarChange;viewUnitsChange;visibleChange;widthChange;zoomLevelChange;get customShapesChildren(){return this._getOption("customShapes")}set customShapesChildren(t){this.setChildren("customShapes",t)}constructor(t,i,o,r,c,v,S,T){super(t,i,o,r,S,T),this._watcherHelper=r,this._idh=c,this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"customCommand",emit:"onCustomCommand"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"itemClick",emit:"onItemClick"},{subscribe:"itemDblClick",emit:"onItemDblClick"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"requestEditOperation",emit:"onRequestEditOperation"},{subscribe:"requestLayoutUpdate",emit:"onRequestLayoutUpdate"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{emit:"autoZoomModeChange"},{emit:"contextMenuChange"},{emit:"contextToolboxChange"},{emit:"customShapesChange"},{emit:"customShapeTemplateChange"},{emit:"customShapeToolboxTemplateChange"},{emit:"defaultItemPropertiesChange"},{emit:"disabledChange"},{emit:"edgesChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"exportChange"},{emit:"fullScreenChange"},{emit:"gridSizeChange"},{emit:"hasChangesChange"},{emit:"heightChange"},{emit:"historyToolbarChange"},{emit:"mainToolbarChange"},{emit:"nodesChange"},{emit:"pageColorChange"},{emit:"pageOrientationChange"},{emit:"pageSizeChange"},{emit:"propertiesPanelChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"showGridChange"},{emit:"simpleViewChange"},{emit:"snapToGridChange"},{emit:"toolboxChange"},{emit:"unitsChange"},{emit:"useNativeScrollingChange"},{emit:"viewToolbarChange"},{emit:"viewUnitsChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"zoomLevelChange"}]),this._idh.setHost(this),v.setHost(this)}_createInstance(t,i){return new kie(t,i)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("customShapes",t)}setupChanges(t,i){t in this._optionsToUpdate||this._idh.setup(t,i)}ngDoCheck(){this._idh.doCheck("customShapes"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,i){let o=this._idh.setupSingle(t,i),r=null!==this._idh.getChanges(t,i);(o||r)&&super._setOption(t,i)}static \u0275fac=function(i){return new(i||e)(Le(uo),Le(Kt),Le(Br),Le(rO),Le(PL),Le(ht),Le(Fa),Le(ar))};static \u0275cmp=tn({type:e,selectors:[["dx-diagram"]],contentQueries:function(i,o,r){if(1&i&&Mi(r,Qie,4),2&i){let c;Ti(c=Ai())&&(o.customShapesChildren=c)}},inputs:{autoZoomMode:"autoZoomMode",contextMenu:"contextMenu",contextToolbox:"contextToolbox",customShapes:"customShapes",customShapeTemplate:"customShapeTemplate",customShapeToolboxTemplate:"customShapeToolboxTemplate",defaultItemProperties:"defaultItemProperties",disabled:"disabled",edges:"edges",editing:"editing",elementAttr:"elementAttr",export:"export",fullScreen:"fullScreen",gridSize:"gridSize",hasChanges:"hasChanges",height:"height",historyToolbar:"historyToolbar",mainToolbar:"mainToolbar",nodes:"nodes",pageColor:"pageColor",pageOrientation:"pageOrientation",pageSize:"pageSize",propertiesPanel:"propertiesPanel",readOnly:"readOnly",rtlEnabled:"rtlEnabled",showGrid:"showGrid",simpleView:"simpleView",snapToGrid:"snapToGrid",toolbox:"toolbox",units:"units",useNativeScrolling:"useNativeScrolling",viewToolbar:"viewToolbar",viewUnits:"viewUnits",visible:"visible",width:"width",zoomLevel:"zoomLevel"},outputs:{onContentReady:"onContentReady",onCustomCommand:"onCustomCommand",onDisposing:"onDisposing",onInitialized:"onInitialized",onItemClick:"onItemClick",onItemDblClick:"onItemDblClick",onOptionChanged:"onOptionChanged",onRequestEditOperation:"onRequestEditOperation",onRequestLayoutUpdate:"onRequestLayoutUpdate",onSelectionChanged:"onSelectionChanged",autoZoomModeChange:"autoZoomModeChange",contextMenuChange:"contextMenuChange",contextToolboxChange:"contextToolboxChange",customShapesChange:"customShapesChange",customShapeTemplateChange:"customShapeTemplateChange",customShapeToolboxTemplateChange:"customShapeToolboxTemplateChange",defaultItemPropertiesChange:"defaultItemPropertiesChange",disabledChange:"disabledChange",edgesChange:"edgesChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",exportChange:"exportChange",fullScreenChange:"fullScreenChange",gridSizeChange:"gridSizeChange",hasChangesChange:"hasChangesChange",heightChange:"heightChange",historyToolbarChange:"historyToolbarChange",mainToolbarChange:"mainToolbarChange",nodesChange:"nodesChange",pageColorChange:"pageColorChange",pageOrientationChange:"pageOrientationChange",pageSizeChange:"pageSizeChange",propertiesPanelChange:"propertiesPanelChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",showGridChange:"showGridChange",simpleViewChange:"simpleViewChange",snapToGridChange:"snapToGridChange",toolboxChange:"toolboxChange",unitsChange:"unitsChange",useNativeScrollingChange:"useNativeScrollingChange",viewToolbarChange:"viewToolbarChange",viewUnitsChange:"viewUnitsChange",visibleChange:"visibleChange",widthChange:"widthChange",zoomLevelChange:"zoomLevelChange"},features:[Jn([Br,rO,ht,PL]),fn,fa],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return e})(),ioe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e});static \u0275inj=St({imports:[HL,AL,LL,BL,VL,NL,zL,jL,UL,$L,WL,GL,KL,qL,TL,ZL,XL,kL,RL,YL,QL,JL,jie,bL,HL,AL,LL,BL,VL,NL,zL,jL,UL,$L,WL,GL,KL,qL,TL,ZL,XL,kL,RL,YL,QL,JL,bL]})}return e})();const ooe=[{ID:"106",Text:"Development",Type:"ellipse",Picture:""},{ID:"107",Text:"WinForms\nTeam",Type:"ellipse",Picture:""},{ID:"108",Text:"WPF\nTeam",Type:"ellipse",Picture:""},{ID:"109",Text:"Javascript\nTeam",Type:"ellipse",Picture:""},{ID:"110",Text:"ASP.NET\nTeam",Type:"ellipse",Picture:""},{ID:"112",Text:"Ken Samuelson",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/32.png"},{ID:"113",Text:"Terry Bradley",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/33.png"},{ID:"115",Text:"Nat Maguiree",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/34.png"},{ID:"116",Text:"Gabe Jones",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/35.png"},{ID:"117",Text:"Lucy Ball",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/36.png"},{ID:"119",Text:"Bart Arnaz",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/37.png"},{ID:"120",Text:"Leah Simpson",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/38.png"},{ID:"122",Text:"Hannah Brookly",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/39.png"},{ID:"123",Text:"Arnie Schwartz",Type:"cardWithImageOnLeft",Picture:"../../../../images/employees/40.png"}],roe=[{ID:"124",From:"106",To:"108"},{ID:"125",From:"106",To:"109"},{ID:"126",From:"106",To:"107"},{ID:"127",From:"106",To:"110"},{ID:"129",From:"110",To:"112"},{ID:"130",From:"110",To:"113"},{ID:"132",From:"107",To:"115"},{ID:"133",From:"107",To:"116"},{ID:"134",From:"107",To:"117"},{ID:"136",From:"108",To:"119"},{ID:"137",From:"108",To:"120"},{ID:"139",From:"109",To:"122"},{ID:"140",From:"109",To:"123"}];let eN=(()=>{class e{getOrgItems(){return ooe}getOrgLinks(){return roe}static \u0275fac=function(i){return new(i||e)};static \u0275prov=gt({token:e,factory:e.\u0275fac})}return e})();/localhost/.test(document.location.host);window&&window;let aoe=(()=>{class e{orgItemsDataSource;orgLinksDataSource;constructor(t){this.orgItemsDataSource=new Vu({key:"ID",data:t.getOrgItems()}),this.orgLinksDataSource=new Vu({key:"ID",data:t.getOrgLinks()})}static \u0275fac=function(i){return new(i||e)(Le(eN))};static \u0275cmp=tn({type:e,selectors:[["demo-app"]],features:[Jn([eN])],decls:18,vars:3,consts:[["id","diagram"],["diagram",""],["keyExpr","ID","textExpr","Text","typeExpr","Type","imageUrlExpr","Picture",3,"dataSource"],["type","tree","orientation","horizontal"],["keyExpr","ID","fromExpr","From","toExpr","To",3,"dataSource"],["category","general","title","General"],["category","orgChart","title","Organizational Chart",3,"expanded"]],template:function(i,o){1&i&&(Ya(0,"dx-diagram",0,1),fo(2,"\n  "),Ya(3,"dxo-nodes",2),fo(4,"\n    "),Ja(5,"dxo-auto-layout",3),fo(6,"\n  "),Qa(),fo(7,"\n  "),Ja(8,"dxo-edges",4),fo(9,"\n  "),Ya(10,"dxo-toolbox"),fo(11,"\n    "),Ja(12,"dxi-group",5),fo(13,"\n    "),Ja(14,"dxi-group",6),fo(15,"\n  "),Qa(),fo(16,"\n"),Qa(),fo(17,"\n")),2&i&&(Ch(3),Fc("dataSource",o.orgItemsDataSource),Ch(5),Fc("dataSource",o.orgLinksDataSource),Ch(6),Fc("expanded",!0))},dependencies:[noe,Jie,eoe,$ie,hO,toe],styles:["#diagram{height:900px}"]})}return e})(),loe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Et({type:e,bootstrap:[aoe]});static \u0275inj=St({imports:[QK,M5,ioe]})}return e})();XK().bootstrapModule(loe)},878:function(Gl){var Io;Io=()=>(()=>{"use strict";var Kl={9279:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Browser=void 0;var x=function(){function m(){}return m.IdentUserAgent=function(b,E){void 0===E&&(E=!1);var y=["Mozilla","IE","Firefox","Netscape","Safari","Chrome","Opera","Opera10","Edge"],p="IE",d="Win",s={Safari:2,Chrome:.1,Mozilla:1.9,Netscape:8,Firefox:2,Opera:9,IE:6,Edge:12};if(b&&0!==b.length){b=b.toLowerCase(),m.indentPlatformMajorVersion(b);try{for(var a={Windows:"Win",Macintosh:"Mac","Mac OS":"Mac",Mac_PowerPC:"Mac","cpu os":"MacMobile","cpu iphone os":"MacMobile",Android:"Android","!Windows Phone":"WinPhone","!WPDesktop":"WinPhone","!ZuneWP":"WinPhone"},l="(?:/|\\s*)?",u="(\\d+)(?:\\.((?:\\d+?[1-9])|\\d)0*?)?",h="(?:"+u+")?",f={Safari:"applewebkit(?:.*?(?:version/"+u+"[\\.\\w\\d]*?(?:\\s+mobile/\\S*)?\\s+safari))?",Chrome:"(?:chrome|crios)(?!frame)"+l+h,Mozilla:"mozilla(?:.*rv:"+h+".*Gecko)?",Netscape:"(?:netscape|navigator)\\d*/?\\s*"+h,Firefox:"firefox"+l+h,Opera:"(?:opera|\\sopr)"+l+h,Opera10:"opera.*\\s*version"+l+h,IE:"msie\\s*"+h,Edge:"edge"+l+h},g=null,O=-1,I=0;I<y.length;I++){var D=y[I],C=new RegExp(f[D],"i").exec(b);if(C&&C.index>=0){if("IE"===g&&O>=11&&"Safari"===D)continue;"Opera10"===(g=D)&&(g="Opera"),O=m.GetBrowserVersion(b,C,"trident"+l+h,m.getIECompatibleVersionString()),"Mozilla"===g&&O>=11&&(g="IE")}}g||(g=p);var P=-1!==O;P||(O=s[g]);var k=null,A=Number.MAX_VALUE;for(var R in a)if(Object.prototype.hasOwnProperty.call(a,R)){var M="!"===R.substr(0,1),L=b.indexOf((M?R.substr(1):R).toLowerCase());L>=0&&(L<A||M)&&(A=M?0:L,k=a[R])}var H=b.toUpperCase().match("SM-[A-Z]"),j=H&&H.length>0;"WinPhone"===k&&O<9&&(O=Math.floor(m.getVersionFromTrident(b,"trident"+l+h))),!E&&"IE"===g&&O>7&&document.documentMode<O&&(O=document.documentMode),"WinPhone"===k&&(O=Math.max(9,O)),k||(k=d),k!==a["cpu os"]||P||(O=4),m.fillUserAgentInfo(y,g,O,k,j)}catch{m.fillUserAgentInfo(y,p,s[p],d)}}else m.fillUserAgentInfo(y,p,s[p],d)},m.GetBrowserVersion=function(b,E,y,p){var d=m.getVersionFromMatches(E);if(p){var s=m.getVersionFromTrident(b,y);if("edge"===p||parseInt(p)===s)return s}return d},m.getIECompatibleVersionString=function(){if(document.compatible)for(var b=0;b<document.compatible.length;b++)if("IE"===document.compatible[b].userAgent&&document.compatible[b].version)return document.compatible[b].version.toLowerCase();return""},m.isTouchEnabled=function(){return m.hasTouchStart()||m.hasMaxTouchPoints()||m.hasMsMaxTouchPoints()},m.hasTouchStart=function(){return"ontouchstart"in window},m.hasMaxTouchPoints=function(){return navigator.maxTouchPoints>0},m.hasMsMaxTouchPoints=function(){return navigator.msMaxTouchPoints>0},m.hasNavigator=function(){return typeof navigator<"u"},m.fillUserAgentInfo=function(b,E,y,p,d){void 0===d&&(d=!1);for(var s=0;s<b.length;s++){var a=b[s];m[a]=a===E}m.Version=Math.floor(10*y)/10,m.MajorVersion=Math.floor(m.Version),m.WindowsPlatform="Win"===p||"WinPhone"===p,m.MacOSMobilePlatform="MacMobile"===p||"Mac"===p&&m.isTouchEnabled(),m.MacOSPlatform="Mac"===p&&!m.MacOSMobilePlatform,m.AndroidMobilePlatform="Android"===p,m.WindowsPhonePlatform="WinPhone"===p,m.WebKitFamily=m.Safari||m.Chrome||m.Opera&&m.MajorVersion>=15,m.NetscapeFamily=m.Netscape||m.Mozilla||m.Firefox,m.WebKitTouchUI=m.MacOSMobilePlatform||m.AndroidMobilePlatform;var l=m.IE&&m.MajorVersion>9&&m.WindowsPlatform&&m.UserAgent.toLowerCase().indexOf("touch")>=0;if(m.MSTouchUI=l||m.Edge&&!!window.navigator.maxTouchPoints,m.TouchUI=m.WebKitTouchUI||m.MSTouchUI,m.MobileUI=m.WebKitTouchUI||m.WindowsPhonePlatform,m.AndroidDefaultBrowser=m.AndroidMobilePlatform&&!m.Chrome,m.AndroidChromeBrowser=m.AndroidMobilePlatform&&m.Chrome,d&&(m.SamsungAndroidDevice=d),m.MSTouchUI){var u=m.UserAgent.toLowerCase().indexOf("arm;")>-1;m.VirtualKeyboardSupported=u||m.WindowsPhonePlatform}else m.VirtualKeyboardSupported=m.WebKitTouchUI;m.fillDocumentElementBrowserTypeClassNames(b)},m.indentPlatformMajorVersion=function(b){var E=/(?:(?:windows nt|macintosh|mac os|cpu os|cpu iphone os|android|windows phone|linux) )(\d+)(?:[-0-9_.])*/.exec(b);E&&(m.PlaformMajorVersion=E[1])},m.getVersionFromMatches=function(b){var E=-1,y="";return b&&(b[1]&&(y+=b[1],b[2]&&(y+="."+b[2])),""!==y&&(E=parseFloat(y),isNaN(E)&&(E=-1))),E},m.getVersionFromTrident=function(b,E){var y=new RegExp(E,"i").exec(b);return m.getVersionFromMatches(y)+4},m.fillDocumentElementBrowserTypeClassNames=function(b){for(var E="",y=b.concat(["WindowsPlatform","MacOSPlatform","MacOSMobilePlatform","AndroidMobilePlatform","WindowsPhonePlatform","WebKitFamily","WebKitTouchUI","MSTouchUI","TouchUI","AndroidDefaultBrowser"]),p=0;p<y.length;p++){var d=y[p];m[d]&&(E+="dx"+d+" ")}E+="dxBrowserVersion-"+m.MajorVersion,typeof document<"u"&&document&&document.documentElement&&(""!==document.documentElement.className&&(E=" "+E),document.documentElement.className+=E,m.Info=E)},m.getUserAgent=function(){return m.hasNavigator()&&navigator.userAgent?navigator.userAgent.toLowerCase():""},m.UserAgent=m.getUserAgent(),m._foo=m.IdentUserAgent(m.UserAgent),m}();_.Browser=x},1772:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EmptyBatchUpdatableObject=_.BatchUpdatableObject=void 0;var x=function(){function b(){this.suspendUpdateCount=0,this.occurredEvents=0}return b.prototype.beginUpdate=function(){0===this.suspendUpdateCount&&this.onUpdateLocked(),this.suspendUpdateCount<0?this.suspendUpdateCount--:this.suspendUpdateCount++},b.prototype.endUpdate=function(){if(this.suspendUpdateCount<0?this.suspendUpdateCount++:this.suspendUpdateCount>0&&this.suspendUpdateCount--,!this.isUpdateLocked()){var E=this.occurredEvents;this.occurredEvents=0,this.onUpdateUnlocked(E)}},b.prototype.suspendUpdate=function(){if(this.suspendUpdateCount>0){this.suspendUpdateCount*=-1;var E=this.occurredEvents;this.occurredEvents=0,this.onUpdateUnlocked(E)}},b.prototype.continueUpdate=function(){this.suspendUpdateCount<0&&(this.suspendUpdateCount*=-1)},b.prototype.isUpdateLocked=function(){return this.suspendUpdateCount>0},b.prototype.onUpdateLocked=function(){},b.prototype.registerOccurredEvent=function(E){this.occurredEvents|=E},b.prototype.resetOccurredEvents=function(){this.occurredEvents=0},b.prototype.isLocked=function(){return 0!==this.suspendUpdateCount},b}();_.BatchUpdatableObject=x;var m=function(){function b(){}return b.prototype.beginUpdate=function(){},b.prototype.endUpdate=function(){},b}();_.EmptyBatchUpdatableObject=m},7820:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Flag=void 0;var x=function(){function m(b){void 0===b&&(b=0),this.value=b}return m.prototype.get=function(b){return(this.value&b)===b},m.prototype.set=function(b,E){return(this.value&b)===b!==E&&(E?this.value|=b:this.value^=b),this},m.prototype.add=function(b){this.value|=b},m.prototype.anyOf=function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];for(var y=0,p=b;y<p.length;y++){var d=p[y];if((this.value&d)===d)return!0}return!1},m.prototype.getValue=function(){return this.value},m.prototype.clone=function(){return new m(this.value)},m}();_.Flag=x},6799:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExtendedMinMax=_.ExtendedMax=_.ExtendedMin=_.MinMaxNumber=_.MinMax=void 0;var m=x(655),b=function(s,a){this.minElement=s,this.maxElement=a};_.MinMax=b;var E=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return m.__extends(a,s),Object.defineProperty(a.prototype,"length",{get:function(){return this.maxElement-this.minElement},enumerable:!1,configurable:!0}),a}(b);_.MinMaxNumber=E,_.ExtendedMin=function(s,a){this.minElement=s,this.minValue=a},_.ExtendedMax=function(s,a){this.maxElement=s,this.maxValue=a};var d=function(s){function a(l,u,h,f){var g=s.call(this,l,h)||this;return g.minValue=u,g.maxValue=f,g}return m.__extends(a,s),a}(b);_.ExtendedMinMax=d},9291:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UnitConverter=void 0;var x=function(){function m(){}return m.hundredthsOfMillimeterToTwipsRound=function(b){return Math.round(1440*b/2540)},m.documentsToTwips=function(b){return 24*b/5},m.pixelsToTwips=function(b){return Math.round(m.pixelsToTwipsF(b))},m.pixelsToTwipsCustomDpi=function(b,E){return Math.round(m.pixelsToTwipsFCustomDpi(b,E))},m.inchesToTwips=function(b){return Math.round(m.inchesToTwipsF(b))},m.pointsToTwips=function(b){return Math.round(m.pointsToTwipsF(b))},m.picasToTwips=function(b){return Math.round(1440*b/m.PICAS_PER_INCH)},m.centimetersToTwips=function(b){return Math.round(m.centimetersToTwipsF(b))},m.pixelsToTwipsF=function(b){return 1440*b/m.DPI},m.pixelsToTwipsFCustomDpi=function(b,E){return 1440*b/E},m.inchesToTwipsF=function(b){return 1440*b},m.pointsToTwipsF=function(b){return 20*b},m.centimetersToTwipsF=function(b){return 1440*b/m.CENTIMETERS_PER_INCH},m.twipsToDegrees=function(b){return b/6e4},m.twipsToRadians=function(b){return b/6e4*Math.PI/180},m.degreesToTwips=function(b){return 6e4*b},m.radiansToTwips=function(b){return 6e4*b/Math.PI*180},m.radiansToDegrees=function(b){return b/Math.PI*180},m.twipsToFD=function(b){return Math.round(2048*b/1875)},m.fdToTwips=function(b){return Math.round(1875*b/2048)},m.emuToTwips=function(b){return b/635},m.twipsToPixels=function(b){return Math.round(m.twipsToPixelsF(b))},m.inchesToPixels=function(b){return Math.round(m.DPI*b)},m.centimeterToPixel=function(b){return Math.round(this.centimeterToPixelF(b))},m.centimeterToPixelF=function(b){return b*m.DPI/m.CENTIMETERS_PER_INCH},m.millimetersToPixel=function(b){return Math.round(b/(m.CENTIMETERS_PER_INCH/m.DPI)/10)},m.pointsToPixels=function(b){return Math.round(b*m.DPI/72)},m.pointsToPixelsF=function(b){return b*m.DPI/72},m.twipsToPixelsF=function(b){return b*m.DPI/1440},m.pixelsToPoints=function(b){return Math.round(72*b/m.DPI)},m.pixelsToPointsF=function(b){return 72*b/m.DPI},m.twipsToPoints=function(b){return Math.round(this.twipsToPointsF(b))},m.twipsToPointsF=function(b){return b/20},m.twipsToInches=function(b){return b/1440},m.pixelsToInches=function(b){return b/m.DPI},m.twipsToCentimeters=function(b){return b*m.CENTIMETERS_PER_INCH/1440},m.pixelToCentimeters=function(b){return b*m.CENTIMETERS_PER_INCH/m.DPI},m.twipsToHundredthsOfMillimeter=function(b){return Math.round(127*b/72)},m.pixelsToHundredthsOfMillimeter=function(b){return Math.round(2540*b/m.DPI)},m.hundredthsOfMillimeterToTwips=function(b){return 15*b/127},m.twipsToEmu=function(b){return 635*b},m.twipsToDegree=function(b){return b/6e4},m.DPI=96,m.CENTIMETERS_PER_INCH=2.54,m.PICAS_PER_INCH=6,m}();_.UnitConverter=x},5596:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Metrics=void 0;var x=function(){function m(){}return m.euclideanDistance=function(b,E){var y=b.x-E.x,p=b.y-E.y;return Math.sqrt(y*y+p*p)},m.manhattanDistance=function(b,E){return Math.abs(b.x-E.x)+Math.abs(b.y-E.y)},m}();_.Metrics=x},4125:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Offsets=void 0;var x=function(){function m(b,E,y,p){this.left=b,this.right=E,this.top=y,this.bottom=p}return m.empty=function(){return new m(0,0,0,0)},Object.defineProperty(m.prototype,"horizontal",{get:function(){return this.left+this.right},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"vertical",{get:function(){return this.top+this.bottom},enumerable:!1,configurable:!0}),m.fromNumber=function(b){return new m(b,b,b,b)},m.fromOffsets=function(b){return new m(b.left,b.right,b.top,b.bottom)},m.fromSide=function(b,E){return new m(b,b,E,E)},m.prototype.normalize=function(){return this.left=Math.max(0,this.left),this.right=Math.max(0,this.right),this.top=Math.max(0,this.top),this.bottom=Math.max(0,this.bottom),this},m.prototype.toString=function(){return JSON.stringify(this)},m.prototype.isEmpty=function(){return 0===this.left&&0===this.right&&0===this.top&&0===this.bottom},m.prototype.offset=function(b){return this.left+=b.left,this.right+=b.right,this.top+=b.top,this.bottom+=b.bottom,this},m.prototype.multiply=function(b,E,y,p){switch(arguments.length){case 1:return this.left*=b,this.right*=b,this.top*=b,this.bottom*=b,this;case 2:return this.left*=b,this.right*=b,this.top*=E,this.bottom*=E,this;case 4:return this.left*=b,this.right*=E,this.top*=y,this.bottom*=p,this}return this},m.prototype.clone=function(){return new m(this.left,this.right,this.top,this.bottom)},m.prototype.copyFrom=function(b){this.left=b.left,this.right=b.right,this.top=b.top,this.bottom=b.bottom},m.prototype.equals=function(b){return this.top===b.top&&this.bottom===b.bottom&&this.right===b.right&&this.left===b.left},m.prototype.applyConverter=function(b){return this.left=b(this.left),this.right=b(this.right),this.top=b(this.top),this.bottom=b(this.bottom),this},m}();_.Offsets=x},8900:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Point=void 0;var x=function(){function m(b,E){this.x=b,this.y=E}return m.zero=function(){return new m(0,0)},m.fromNumber=function(b){return new m(b,b)},m.prototype.isZero=function(){return 0===this.x&&0===this.y},m.prototype.toString=function(){return JSON.stringify(this)},m.prototype.copyFrom=function(b){this.x=b.x,this.y=b.y},m.prototype.clone=function(){return new m(this.x,this.y)},m.prototype.equals=function(b){return this.x===b.x&&this.y===b.y},m.prototype.offset=function(b,E){return this.x+=b,this.y+=E,this},m.prototype.offsetByPoint=function(b){return this.x+=b.x,this.y+=b.y,this},m.prototype.multiply=function(b,E){return this.x*=b,this.y*=E,this},m.prototype.negative=function(){return this.x*=-1,this.y*=-1,this},m.prototype.applyConverter=function(b){return this.x=b(this.x),this.y=b(this.y),this},m.plus=function(b,E){return new m(b.x+E.x,b.y+E.y)},m.minus=function(b,E){return new m(b.x-E.x,b.y-E.y)},m.xComparer=function(b,E){return b.x-E.x},m.yComparer=function(b,E){return b.y-E.y},m.equals=function(b,E){return b.x===E.x&&b.y===E.y},m}();_.Point=x},8011:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RectangleDeviation=_.HitTestDeviation=_.Rectangle=void 0;var m,l,b=x(7820),E=x(1104),y=x(8860),p=x(8900),d=x(6353),s=function(){function l(u,h,f,g){this.x=u,this.y=h,this.width=f,this.height=g}return Object.defineProperty(l.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"center",{get:function(){return l.center(this)},enumerable:!1,configurable:!0}),l.prototype.createRectangle=function(){return new l(this.x,this.y,this.width,this.height)},l.prototype.createSize=function(){return new d.Size(this.width,this.height)},l.prototype.createPosition=function(){return new p.Point(this.x,this.y)},l.prototype.createVerticalInterval=function(){return new y.FixedInterval(this.y,this.height)},l.prototype.createHorizontalInterval=function(){return new y.FixedInterval(this.x,this.width)},l.fromGeometry=function(u,h){return new l(u.x,u.y,h.width,h.height)},l.fromPoints=function(u,h){return new l(Math.min(u.x,h.x),Math.min(u.y,h.y),Math.abs(u.x-h.x),Math.abs(u.y-h.y))},l.fromPositions=function(u,h,f,g){return new l(Math.min(u,f),Math.min(h,g),Math.abs(f-u),Math.abs(g-h))},l.fromCenter=function(u,h){return new l(u.x-h,u.y-h,2*h,2*h)},l.prototype.isCollapsed=function(){return 0===this.width||0===this.height},l.prototype.isEmpty=function(){return 0===this.x&&0===this.y&&0===this.width&&0===this.height},l.prototype.toString=function(){return JSON.stringify(this)},l.prototype.setPosition=function(u){return this.x=u.x,this.y=u.y,this},l.prototype.setSize=function(u){return this.width=u.width,this.height=u.height,this},l.prototype.setGeomerty=function(u){return this.x=u.x,this.y=u.y,this.width=u.width,this.height=u.height,this},l.prototype.moveRectangle=function(u,h){return this.x+=u,this.y+=h,this},l.prototype.moveRectangleByPoint=function(u){return this.x+=u.x,this.y+=u.y,this},l.prototype.resize=function(u,h){return this.width+=u,this.height+=h,this},l.prototype.nonNegativeSize=function(){return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this},l.prototype.multiply=function(u,h){return this.x*=u,this.y*=h,this.width*=u,this.height*=h,this},l.prototype.equals=function(u){return l.equals(this,u)},l.prototype.clone=function(){var u=new l(0,0,0,0);return u.copyFrom(this),u},l.prototype.copyFrom=function(u){this.x=u.x,this.y=u.y,this.width=u.width,this.height=u.height},l.prototype.containsPoint=function(u){return l.containsPoint(this,u)},l.prototype.containsRectangle=function(u){return this.x<=u.x&&this.right>=u.right&&this.y<=u.y&&this.bottom>=u.bottom},l.prototype.inflate=function(u,h){return void 0===h&&(h=u),this.x-=u,this.y-=h,this.width+=2*u,this.height+=2*h,this},l.prototype.applyOffsetsInside=function(u){return this.x+=u.left,this.y+=u.top,this.width-=u.left+u.right,this.height-=u.top+u.bottom,this},l.prototype.applyNormalizedOffsetsInside=function(u){var h=Math.max(0,u.left),f=h+Math.max(0,u.right);0!==f&&(f<=this.width?(this.x+=h,this.width-=f):(this.x+=this.width*(h/f),this.width=0));var g=Math.max(0,u.top),O=g+Math.max(0,u.bottom);return 0!==O&&(O<=this.height?(this.y+=g,this.height-=O):(this.y+=this.height*(g/O),this.height=0)),this},l.prototype.applyOffsetsOutside=function(u){return this.x-=u.left,this.y-=u.top,this.width+=u.left+u.right,this.height+=u.top+u.bottom,this},l.prototype.applyConverter=function(u){return this.x=u(this.x),this.y=u(this.y),this.width=u(this.width),this.height=u(this.height),this},l.getHorizIntersection=function(u,h){return E.IntervalAlgorithms.getIntersection(new y.FixedInterval(u.x,u.width),new y.FixedInterval(h.x,h.width))},l.getVertIntersection=function(u,h){return E.IntervalAlgorithms.getIntersection(new y.FixedInterval(u.y,u.height),new y.FixedInterval(h.y,h.height))},l.getIntersection=function(u,h){var f=E.IntervalAlgorithms.getIntersection(new y.FixedInterval(u.x,u.width),new y.FixedInterval(h.x,h.width));if(!f)return null;var g=E.IntervalAlgorithms.getIntersection(new y.FixedInterval(u.y,u.height),new y.FixedInterval(h.y,h.height));return g?new l(f.start,g.start,f.length,g.length):null},l.getHorNonCollapsedIntersection=function(u,h){var f=l.getHorizIntersection(u,h);return f&&!f.isCollapsed()?f:null},l.getVertNonCollapsedIntersection=function(u,h){var f=l.getVertIntersection(u,h);return f&&!f.isCollapsed()?f:null},l.getNonCollapsedIntersection=function(u,h){var f=l.getIntersection(u,h);return f&&!f.isCollapsed()?f:null},l.areIntersected=function(u,h){return!(u.x>h.x+h.width||h.x>u.x+u.width||u.y>h.y+h.height||h.y>u.y+u.height)},l.union=function(u,h){var f=Math.max(u.x+u.width,h.x+h.width),g=Math.max(u.y+u.height,h.y+h.height),O=Math.min(u.x,h.x),I=Math.min(u.y,h.y);return new l(O,I,f-O,g-I)},l.equals=function(u,h){return u.x===h.x&&u.y===h.y&&u.width===h.width&&u.height===h.height},l.center=function(u){return new p.Point(u.x+u.width/2,u.y+u.height/2)},l.containsPoint=function(u,h){return h.y>=u.y&&u.y+u.height>=h.y&&h.x>=u.x&&u.x+u.width>=h.x},l}();_.Rectangle=s,(l=m=_.HitTestDeviation||(_.HitTestDeviation={}))[l.None=0]="None",l[l.Top=1]="Top",l[l.Bottom=2]="Bottom",l[l.Left=4]="Left",l[l.Right=8]="Right";var a=function(){function l(u,h){this.initRectangle=u,this.initPoint=h,this.deviation=new b.Flag(m.None)}return l.prototype.calcDeviation=function(){return this.initPoint.x<this.initRectangle.x?this.deviation.set(m.Left,!0):this.initPoint.x>this.initRectangle.right&&this.deviation.set(m.Right,!0),this.initPoint.y<this.initRectangle.y?this.deviation.set(m.Top,!0):this.initPoint.y>this.initRectangle.bottom&&this.deviation.set(m.Bottom,!0),this},l.prototype.calcAdditionalParams=function(){return this.insidePoint=this.initPoint.clone(),this.offsetToInside=new p.Point(0,0),this.deviation.get(m.Left)?(this.insidePoint.x=this.initRectangle.x,this.offsetToInside.x=this.insidePoint.x-this.initPoint.x):this.deviation.get(m.Right)&&(this.insidePoint.x=this.initRectangle.right,this.offsetToInside.x=this.initPoint.x-this.insidePoint.x),this.deviation.get(m.Top)?(this.insidePoint.y=this.initRectangle.y,this.offsetToInside.y=this.insidePoint.y-this.initPoint.y):this.deviation.get(m.Bottom)&&(this.insidePoint.y=this.initRectangle.bottom,this.offsetToInside.y=this.initPoint.y-this.insidePoint.y),this},l}();_.RectangleDeviation=a},1335:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Segment=void 0;var m=x(8679),b=x(5596),E=x(8900),y=x(8011),p=function(){function d(s,a){this.startPoint=s,this.endPoint=a}return Object.defineProperty(d.prototype,"length",{get:function(){return b.Metrics.euclideanDistance(this.startPoint,this.endPoint)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"xLength",{get:function(){return Math.abs(this.endPoint.x-this.startPoint.x)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"yLength",{get:function(){return Math.abs(this.endPoint.y-this.startPoint.y)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"center",{get:function(){return new E.Point(this.startPoint.x+(this.endPoint.x-this.startPoint.x)/2,this.startPoint.y+(this.endPoint.y-this.startPoint.y)/2)},enumerable:!1,configurable:!0}),d.prototype.isIntersected=function(s){return this.startPoint.equals(s.startPoint)||this.endPoint.equals(s.startPoint)||this.startPoint.equals(s.endPoint)||this.endPoint.equals(s.endPoint)||this.intersectCore(s)&&s.intersectCore(this)},d.prototype.containsPoint=function(s,a){return void 0===a&&(a=1e-7),this.startPoint.equals(s)||this.endPoint.equals(s)||m.MathUtils.numberCloseTo(this.length,b.Metrics.euclideanDistance(this.startPoint,s)+b.Metrics.euclideanDistance(this.endPoint,s),a)},d.prototype.isIntersectedByRect=function(s){if(y.Rectangle.containsPoint(s,this.startPoint)||y.Rectangle.containsPoint(s,this.endPoint))return!0;var a=s.x,l=s.x+s.width,u=s.y,h=s.y+s.height;return this.isIntersected(new d(new E.Point(a,u),new E.Point(a,h)))||this.isIntersected(new d(new E.Point(l,u),new E.Point(l,h)))||this.isIntersected(new d(new E.Point(a,u),new E.Point(l,u)))||this.isIntersected(new d(new E.Point(a,h),new E.Point(l,h)))},d.prototype.intersectCore=function(s){if(this.startPoint.x===this.endPoint.x){if(this.startPoint.x-s.endPoint.x!=0)return(this.startPoint.x-s.startPoint.x)/(this.startPoint.x-s.endPoint.x)<=0;if(s.endPoint.y-this.endPoint.y!=0)return(s.endPoint.y-this.startPoint.y)/(s.endPoint.y-this.endPoint.y)<=0}if(this.startPoint.y===this.endPoint.y){if(this.startPoint.y-s.endPoint.y!=0)return(this.startPoint.y-s.startPoint.y)/(this.startPoint.y-s.endPoint.y)<=0;if(s.endPoint.x-this.endPoint.x!=0)return(s.endPoint.x-this.startPoint.x)/(s.endPoint.x-this.endPoint.x)<=0}var a=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x),l=this.startPoint.y+(s.startPoint.x-this.startPoint.x)*a,u=this.startPoint.y+(s.endPoint.x-this.startPoint.x)*a,h=s.startPoint.y-l,f=s.endPoint.y-u;return 0===h&&0===f?(this.startPoint.y-l)/(this.endPoint.y-l)<=0||(this.startPoint.y-u)/(this.endPoint.y-u)<=0:0===h||0===f||h/f<0},d}();_.Segment=p},6353:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Size=void 0;var x=function(){function m(b,E){this.width=b,this.height=E}return m.empty=function(){return new m(0,0)},m.fromNumber=function(b){return new m(b,b)},m.initByCommonAction=function(b){var E=function(p){return p.width},y=function(p){return p.height};return new m(b(E,y),b(y,E))},m.prototype.isEmpty=function(){return 0===this.width&&0===this.height},m.prototype.toString=function(){return JSON.stringify(this)},m.prototype.nonNegativeSize=function(){return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this},m.prototype.offset=function(b,E){return this.width=this.width+b,this.height=this.height+E,this},m.prototype.multiply=function(b,E){return this.width*=b,this.height*=E,this},m.prototype.equals=function(b){return this.width===b.width&&this.height===b.height},m.prototype.clone=function(){return new m(this.width,this.height)},m.prototype.copyFrom=function(b){this.width=b.width,this.height=b.height},m.prototype.applyConverter=function(b){return this.width=b(this.width),this.height=b(this.height),this},m.equals=function(b,E){return b.width===E.width&&b.height===E.height},m}();_.Size=x},9716:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Vector=void 0;var x=function(){function m(b,E){void 0===b&&(b=0),void 0===E&&(E=0),this.x=b,this.y=E}return Object.defineProperty(m.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!1,configurable:!0}),m.fromPoints=function(b,E){return new m(E.x-b.x,E.y-b.y)},m.fromSegment=function(b){return new m(b.endPoint.x-b.startPoint.x,b.endPoint.y-b.startPoint.y)},m.prototype.normalize=function(){var b=this.length;return 0!==b&&(this.x/=b,this.y/=b),this},m.prototype.negative=function(){return this.x*=-1,this.y*=-1,this},Object.defineProperty(m,"axisX",{get:function(){return new m(1,0)},enumerable:!1,configurable:!0}),Object.defineProperty(m,"axisY",{get:function(){return new m(0,1)},enumerable:!1,configurable:!0}),m.angleBetween=function(b,E){var y=m.scalarProduct(b,E)/(b.length*E.length);return Math.acos(y)},m.scalarProduct=function(b,E){return b.x*E.x+b.y*E.y},m}();_.Vector=x},1104:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.IntervalAlgorithms=void 0;var m=x(2940),b=x(2400),E=x(8860),y=x(6102),p=function(){function d(){}return d.oneConstainsOtherArraysOfInterval=function(s,a){for(var l=m.ListUtils.deepCopy(a),u=l.pop();u;){if(!m.ListUtils.unsafeAnyOf(s,function(h){return h.containsInterval(u)}))return!1;u=l.pop()}return!0},d.getIntersection=function(s,a){return d.getIntersectionTemplate(s,a,s)},d.getIntersectionTemplate=function(s,a,l){var u=Math.max(s.start,a.start),h=Math.min(s.end,a.end);return u>h?null:l.makeByStartEnd(u,h)},d.getIntersectionNonNullLength=function(s,a){return d.getIntersectionNonNullLengthTemplate(s,a,s)},d.getIntersectionNonNullLengthTemplate=function(s,a,l){var u=d.getIntersectionTemplate(s,a,l);return u&&u.length?u:null},d.getIntersectionsTwoArraysOfInterval=function(s,a){return d.getIntersectionsTwoArraysOfIntervalTemplate(s,a,s[0])},d.getIntersectionsTwoArraysOfIntervalTemplate=function(s,a,l){for(var u=[],h=s.length,f=a.length,g=0,O=0,I=s[g],D=a[O],C=null;g<h&&O<f;){var w=d.getIntersectionTemplate(I,D,l);w&&(C&&C.end===w.start?C.length+=w.length:u.push(C=w)),I.end<D.end?I=s[++g]:D=a[++O]}return u},d.getAffectedObjects=function(s,a,l,u){return void 0===l&&(l=function(h){return b.SearchUtils.normedInterpolationIndexOf(s,function(f){return f.interval.start},h)}),void 0===u&&(u=function(h,f,g){return h.start===g&&0===f}),d.getAffectedObjectsTemplate(s,a,a[0],l,u)},d.getAffectedObjectsTemplate=function(s,a,l,u,h){void 0===u&&(u=function(k){return b.SearchUtils.normedInterpolationIndexOf(s,function(A){return A.interval.start},k)}),void 0===h&&(h=function(k,A,R){return k.start===R&&0===A});for(var f=new y.SparseIntervalsCollector(l),g=0,O=a;g<O.length;g++)for(var I=O[g],D=Math.max(0,u(I.start,s)),C=void 0;C=s[D];D++){var w=C.interval;if(w.start>I.end)break;var P=d.getIntersectionTemplate(w,I,l);P&&(P.length||h(w,I.length,P.start))&&f.add(D)}return f.getIntervals()},d.handleAffectedObjects=function(s,a,l,u){void 0===u&&(u=function(P){return b.SearchUtils.normedInterpolationIndexOf(s,function(k){return k.interval.start},P)});for(var h=new E.FixedInterval(0,0),f=0,g=a;f<g.length;f++)for(var O=g[f],I=Math.max(0,u(O.start,s)),D=void 0;D=s[I];I++){var C=D.interval;if(C.start>O.end)break;var w=d.getIntersectionTemplate(C,O,h);w&&l(D,I,O,w)}},d.getMergedIntervals=function(s,a){return d.getMergedIntervalsTemplate(s,a,s[0])},d.getMergedIntervalsTemplate=function(s,a,l){if(s.length<2)return s.length>0?[l.makeByStartLength(s[0].start,s[0].length)]:[];for(var u=a?[].concat(s).sort(function(D,C){return D.start-C.start}):s,h=[],f=0,g=void 0;g=u[f];){var O=g.start,I=g.end;for(++f;void 0!==(g=u[f])&&g.start<=I;f++)g.end>I&&(I=g.end);h.push(l.makeByStartEnd(O,I))}return h},d.reflectIntervals=function(s,a){return d.reflectIntervalsTemplate(s,a,a)},d.reflectIntervalsTemplate=function(s,a,l){if(!s.length)return[l.makeByStartLength(a.start,a.length)];var u=m.ListUtils.last(s).end,h=m.ListUtils.reducedMap(s,function(f,g){return d.getIntersectionNonNullLengthTemplate(l.makeByStartEnd(s[g-1].end,f.start),a,l)},1);return a.start<s[0].start&&h.unshift(l.makeByStartEnd(a.start,s[0].start)),a.end>u&&h.push(l.makeByStartEnd(u,a.end)),h},d.reflectionOfPointOnInterval=function(s,a,l){return(s-a.start)/a.length*l.length+l.start},d}();_.IntervalAlgorithms=p},7814:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConstInterval=void 0;var x=function(){function m(){}return Object.defineProperty(m.prototype,"center",{get:function(){return this.start+this.length/2},enumerable:!1,configurable:!0}),m.prototype.isNormalized=function(){return this.end>=this.start},m.prototype.isCollapsed=function(){return 0===this.length},m.prototype.equals=function(b){return this.start===b.start&&this.end===b.end},m.isCollapsed=function(b){return!b[1]&&b[0].isCollapsed()},m.prototype.containsInterval=function(b){return this.start<=b.start&&this.end>=b.end},m.prototype.containsIntervalWithoutEnd=function(b){return this.start<=b.start&&this.end>b.end},m.prototype.contains=function(b){return this.start<=b&&b<this.end},m.prototype.containsWithIntervalEnd=function(b){return this.start<=b&&b<=this.end},m.prototype.containsWithoutIntervalEndAndStart=function(b){return this.start<b&&b<this.end},m}();_.ConstInterval=x},8860:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FixedInterval=void 0;var m=x(655),b=function(E){function y(p,d){var s=E.call(this)||this;return s.start=p,s.length=d,s}return m.__extends(y,E),Object.defineProperty(y.prototype,"end",{get:function(){return this.start+this.length},set:function(p){this.length=p-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"center",{get:function(){return this.start+this.length/2},enumerable:!1,configurable:!0}),y.prototype.copyFrom=function(p){this.start=p.start,this.length=p.length},y.prototype.equals=function(p){return p&&this.start===p.start&&this.length===p.length},y.prototype.clone=function(){return new y(this.start,this.length)},y.prototype.makeByStartEnd=function(p,d){return new y(p,d-p)},y.prototype.makeByStartLength=function(p,d){return new y(p,d)},y.prototype.makeByLengthEnd=function(p,d){return new y(d-p,p)},y.fromPositions=function(p,d){return new y(p,d-p)},y.makeByConstInterval=function(p){return new y(p.start,p.length)},y.prototype.expand=function(p){var d=Math.max(p.end,this.end);return this.start=Math.min(p.start,this.start),this.end=d,this},y}(x(8678).MutableInterval);_.FixedInterval=b},8678:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.MutableInterval=void 0;var m=x(655),b=function(E){function y(){return null!==E&&E.apply(this,arguments)||this}return m.__extends(y,E),y.prototype.normalizeLength=function(){return this.length<0&&(this.length=0),this},y}(x(7814).ConstInterval);_.MutableInterval=b},6102:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SparseIntervalsCollector=void 0;var m=x(448),b=function(){function E(y){this.intervals=[],this.template=y}return E.prototype.add=function(y){this.curr&&this.curr.end===y?this.curr.length++:(this.curr=this.template.makeByStartLength(y,1),this.intervals.push(this.curr))},E.prototype.getIntervals=function(){return new m.SparseIntervals(this.intervals)},E}();_.SparseIntervalsCollector=b},448:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SparseIntervals=void 0;var m=x(8094),b=x(510),E=function(){function y(p){void 0===p&&(p=[]),this.list=p,this._count=0,this._numIntervals=0;for(var d=0,s=p;d<s.length;d++)this._count+=s[d].length,this._numIntervals++}return Object.defineProperty(y.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"numIntervals",{get:function(){return this._numIntervals},enumerable:!1,configurable:!0}),y.prototype.getInterval=function(p){return this.list[p]},y.prototype.getNativeIterator=function(){return new m.SparseIntervalsIterator(this)},y.prototype.getObjectsIterator=function(p){return new b.SparseObjectsIterator(this,p)},y}();_.SparseIntervals=E},8094:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SparseIntervalsIterator=void 0;var x=function(){function m(b){this.sparseIntervals=b,this.intervalIndex=-1}return Object.defineProperty(m.prototype,"isStarted",{get:function(){return!!this.curr},enumerable:!1,configurable:!0}),m.prototype.moveNext=function(){return this.curr&&this.posInInterval+1<this.curr.length?(this.posInInterval++,this.index++,this.initObject(),!0):this.intervalIndex+1<this.sparseIntervals.numIntervals&&(this.intervalIndex++,this.curr=this.sparseIntervals.getInterval(this.intervalIndex),this.curr.length?(this.posInInterval=0,this.index=this.curr.start,this.initObject(),!0):this.moveNext())},m.prototype.movePrev=function(){return this.curr&&this.posInInterval-1>=this.curr.start?(this.posInInterval--,this.index--,this.initObject(),!0):(this.isStarted||(this.intervalIndex=this.sparseIntervals.numIntervals),this.intervalIndex-1>=0&&(this.intervalIndex--,this.curr=this.sparseIntervals.getInterval(this.intervalIndex),this.posInInterval=Math.max(this.curr.length-1,this.curr.start),this.index=this.curr.start,this.initObject(),!0))},m.prototype.initObject=function(){},m}();_.SparseIntervalsIterator=x},510:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SparseObjectsIterator=void 0;var m=x(655),b=function(E){function y(p,d){var s=E.call(this,p)||this;return s.objects=d,s}return m.__extends(y,E),y.prototype.initObject=function(){this.obj=this.objects[this.index]},y}(x(8094).SparseIntervalsIterator);_.SparseObjectsIterator=b},6477:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Base64Utils=void 0;var m=x(2674),b=x(4633),E=function(){function y(){}return y.normalizeToDataUrl=function(p,d){return y.checkPrependDataUrl(p)||(p=y.prependByDataUrl(p,d)),p},y.prependByDataUrl=function(p,d){return"data:"+d+";base64,"+p},y.checkPrependDataUrl=function(p){return y.dataUrl.test(p)},y.deleteDataUrlPrefix=function(p){return p.replace(y.dataUrl,"")},y.getUint8Array=function(p){for(var d=(p=atob(p)).length,s=new Uint8Array(d);d--;)s[d]=p.charCodeAt(d);return s},y.fromArrayBuffer=function(p){for(var d=[],s=new Uint8Array(p),a=s.byteLength,l=0;l<a;l++)d.push(String.fromCharCode(s[l]));return window.btoa(d.join(""))},y.getFileFromBase64=function(p,d,s){void 0===d&&(d="");var a=y.getUint8Array(p);return m.FileUtils.createFile([a],d,s)},y.getMimeTypeAsString=function(p){var d=p.match(y.dataUrl);return d?d[1]:null},y.getKnownMimeType=function(p){var d=p.match(y.dataUrl);return d?b.MimeTypeUtils.stringTypeToType(d[1]):b.DxMimeType.Unknown},y.fromBlobAsArrayBuffer=function(p,d){var s=new FileReader;s.onloadend=function(){return d(y.fromArrayBuffer(s.result))},s.readAsArrayBuffer(p)},y.fromBlobAsDataUrl=function(p,d){var s=new FileReader;s.onloadend=function(){return d(s.result)},s.readAsDataURL(p)},y.dataUrl=/^data:(.*?)(;(.*?))??(;base64)?,/,y}();_.Base64Utils=E},13:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ColorUtils=void 0;var m=x(49),b=function(){function E(){}return E.getAlpha=function(y){return y>>24&255},E.getRed=function(y){return y>>16&255},E.getGreen=function(y){return y>>8&255},E.getBlue=function(y){return 255&y},E.redPartToString=function(y){var p=E.getRed(y).toString(16);return p.length>1?p:"0"+p},E.greenPartToString=function(y){var p=E.getGreen(y).toString(16);return p.length>1?p:"0"+p},E.bluePartToString=function(y){var p=E.getBlue(y).toString(16);return p.length>1?p:"0"+p},E.fromArgbNumber=function(y,p,d,s){return y<<24|p<<16|d<<8|s},E.fromRgbaString=function(y,p){void 0===p&&(p=255);var d=y.replace(/ +/g,"").match(/(rgba?)|(\d+(\.\d+)?%?)|(\.\d+)/g);if(d&&d.length>3){for(var s=[],a=1,l=void 0;l=d[a];a++){var u=-1!==l.indexOf("%")?Math.round(2.55*parseFloat(l)):parseInt(l);if(u<0||u>255)return null;s.push(u)}if(0===y.indexOf("rgba")){if(isNaN(s[3])||s[3]<0||s[3]>1)return null;s[3]<=1&&(s[3]=Math.round(255*s[3]))}else if(s[3])return null;return(255&s[0])<<16|(255&s[1])<<8|255&s[2]|(255&(s.length>3?s[3]:p))<<24}return null},E.fromHashString=function(y,p){return void 0===p&&(p=255),E.isHashColorString(y)?("#"===y.charAt(0)&&(y=y.substr(1)),3===y.length&&(y=m.StringUtils.repeat(y.charAt(0),2)+m.StringUtils.repeat(y.charAt(1),2)+m.StringUtils.repeat(y.charAt(2),2)),parseInt(y,16)|p<<24):null},E.fromColorName=function(y,p){void 0===p&&(p=255);var d=E.colorNames[y.toLowerCase()];return d?E.fromHashString(d,p):null},E.fromString=function(y,p){void 0===p&&(p=255);var d=E.fromRgbaString(y,p);if(null!==d)return d;var s=E.fromHashString(y,p);return null!==s?s:E.fromColorName(y,p)},E.colorToHash=function(y){return"#"+E.redPartToString(y)+E.greenPartToString(y)+E.bluePartToString(y)},E.stringToHash=function(y){var p=this.fromString(y);return null!==p?this.colorToHash(p):null},E.isHashColorString=function(y){return/^#?([0-9a-f]{6})$/i.test(y)||/^#?([0-9a-f]{3})$/i.test(y)},E.isKnownColorName=function(y){return!!E.colorNames[y.toLowerCase()]},E.isGray=function(y){var p=E.getRed(y);return p===E.getGreen(y)&&p===E.getBlue(y)},E.DARK_COLOR=-16777216,E.LIGHT_COLOR=-1,E.colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#00ff00",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",windowtext:"#000000"},E}();_.ColorUtils=b},2491:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.numberToStringHex=_.numberToStringBin=_.isOdd=_.isEven=_.isNonNullString=_.isString=_.isNumber=_.boolToString=_.boolToInt=_.isDefined=void 0;var m=x(49);_.isDefined=function(b){return null!=b},_.boolToInt=function(b){return b?1:0},_.boolToString=function(b){return b?"1":"0"},_.isNumber=function(b){return"number"==typeof b},_.isString=function(b){return"string"==typeof b},_.isNonNullString=function(b){return!!b},_.isEven=function(b){return b%2!=0},_.isOdd=function(b){return b%2==0},_.numberToStringBin=function(b,E){return void 0===E&&(E=0),m.StringUtils.padLeft(b.toString(2),E,"0")},_.numberToStringHex=function(b,E){return void 0===E&&(E=0),m.StringUtils.padLeft(b.toString(16),E,"0")}},4170:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Equals=_.Comparers=void 0;var x=function(){function b(){}return b.number=function(E,y){return E-y},b.string=function(E,y){return E===y?0:E>y?1:-1},b.stringIgnoreCase=function(E,y){return(E=E.toLowerCase())===(y=y.toLowerCase())?0:E>y?1:-1},b}();_.Comparers=x;var m=function(){function b(){}return b.simpleType=function(E,y){return E===y},b.object=function(E,y){return E&&y&&(E===y||E.equals(y))},b}();_.Equals=m},6907:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DomUtils=void 0;var m=x(9279),b=x(2491),E=x(8679),y=x(49),p=function(){function a(){}return a.clearInnerHtml=function(l){for(;l.firstChild;)l.removeChild(l.firstChild)},a.setStylePosition=function(l,u){l.left=E.MathUtils.round(u.x,3)+"px",l.top=E.MathUtils.round(u.y,3)+"px"},a.setStyleSize=function(l,u){l.width=E.MathUtils.round(u.width,3)+"px",l.height=E.MathUtils.round(u.height,3)+"px"},a.setStyleSizeAndPosition=function(l,u){a.setStylePosition(l,u),a.setStyleSize(l,u)},a.hideNode=function(l){if(l){var u=l.parentNode;u&&u.removeChild(l)}},a.isHTMLElementNode=function(l){return l.nodeType===Node.ELEMENT_NODE},a.isTextNode=function(l){return l.nodeType===Node.TEXT_NODE},a.isElementNode=function(l){return l.nodeType===Node.ELEMENT_NODE},a.isHTMLTableRowElement=function(l){return"TR"===l.tagName},a.isItParent=function(l,u){if(!l||!u)return!1;for(;u;){if(u===l)return!0;if("BODY"===u.tagName)return!1;u=u.parentNode}return!1},a.getParentByTagName=function(l,u){for(u=u.toUpperCase();l;){if("BODY"===l.tagName)return null;if(l.tagName===u)return l;l=l.parentNode}return null},a.getDocumentScrollTop=function(){var l=m.Browser.IE&&"hidden"===a.getCurrentStyle(document.body).overflow&&document.body.scrollTop>0;return m.Browser.WebKitFamily||m.Browser.Edge||l?m.Browser.MacOSMobilePlatform?window.pageYOffset:m.Browser.WebKitFamily&&document.documentElement.scrollTop||document.body.scrollTop:document.documentElement.scrollTop},a.getDocumentScrollLeft=function(){var l=m.Browser.IE&&"hidden"===a.getCurrentStyle(document.body).overflow&&document.body.scrollLeft>0;return m.Browser.Edge||l?document.body?document.body.scrollLeft:document.documentElement.scrollLeft:m.Browser.WebKitFamily?document.documentElement.scrollLeft||document.body.scrollLeft:document.documentElement.scrollLeft},a.getCurrentStyle=function(l){if(l.currentStyle)return l.currentStyle;if(document.defaultView&&document.defaultView.getComputedStyle){var u=document.defaultView.getComputedStyle(l,null);if(!u&&m.Browser.Firefox&&window.frameElement){for(var h=[],f=window.frameElement;!(u=document.defaultView.getComputedStyle(l,null));)h.push([f,f.style.display]),f.style.setProperty("display","block","important"),f="BODY"===f.tagName?f.ownerDocument.defaultView.frameElement:f.parentNode;u=function(I){if("object"!=typeof I||!b.isDefined(I))return I;var D={};for(var C in I)D[C]=I[C];return D}(u);for(var g=void 0,O=0;g=h[O];O++)g[0].style.display=g[1];document}return u}return window.getComputedStyle(l,null)},a.setFocus=function(l){function u(){try{l.focus(),m.Browser.IE&&document.activeElement!==l&&l.focus()}catch{}}m.Browser.MacOSMobilePlatform?u():setTimeout(function(){u()},100)},a.hasClassName=function(l,u){try{var h=u.split(" "),f=l.classList;if(f){for(var g=h.length-1;g>=0;g--)if(!f.contains(h[g]))return!1}else{var O=l.getAttribute&&l.getAttribute("class");if(!O)return!1;var I=O.split(" ");for(g=h.length-1;g>=0;g--)if(I.indexOf(h[g])<0)return!1}return!0}catch{return!1}},a.addClassName=function(l,u){if(!a.hasClassName(l,u)){var h=l.getAttribute&&l.getAttribute("class");l.setAttribute("class",""===h?u:h+" "+u)}},a.removeClassName=function(l,u){var h=" "+(l.getAttribute&&l.getAttribute("class"))+" ",f=h.replace(" "+u+" "," ");h.length!==f.length&&l.setAttribute("class",y.StringUtils.trim(f))},a.toggleClassName=function(l,u,h){void 0===h?a.hasClassName(l,u)?a.removeClassName(l,u):a.addClassName(l,u):h?a.addClassName(l,u):a.removeClassName(l,u)},a.pxToInt=function(l){return d(l,parseInt)},a.pxToFloat=function(l){return d(l,parseFloat)},a.getAbsolutePositionY=function(l){function u(h){return Math.round(h.getBoundingClientRect().top+a.getDocumentScrollTop())}return l?m.Browser.IE?(h=l,m.Browser.IE&&null===h.parentNode?0:h.getBoundingClientRect().top+a.getDocumentScrollTop()):m.Browser.Firefox&&m.Browser.Version>=3?u(l):m.Browser.NetscapeFamily&&(!m.Browser.Firefox||m.Browser.Version<3)?function(h){for(var f=s(h,!1),g=!0;null!=h;){if(f+=h.offsetTop,g||null==h.offsetParent||(f-=h.scrollTop),!g&&m.Browser.Firefox){var O=a.getCurrentStyle(h);"DIV"===h.tagName&&"visible"!==O.overflow&&(f+=a.pxToInt(O.borderTopWidth))}g=!1,h=h.offsetParent}return f}(l):m.Browser.WebKitFamily||m.Browser.Edge?u(l):function(h){for(var f=0,g=!0;null!=h;)f+=h.offsetTop,g||null==h.offsetParent||(f-=h.scrollTop),g=!1,h=h.offsetParent;return f}(l):0;var h},a.getAbsolutePositionX=function(l){function u(h){return Math.round(h.getBoundingClientRect().left+a.getDocumentScrollLeft())}return l?m.Browser.IE?(h=l,m.Browser.IE&&null===h.parentNode?0:h.getBoundingClientRect().left+a.getDocumentScrollLeft()):m.Browser.Firefox&&m.Browser.Version>=3?u(l):m.Browser.Opera&&m.Browser.Version<=12?function(h){for(var f=!0,g=s(h,!0);null!=h;)g+=h.offsetLeft,f||(g-=h.scrollLeft),h=h.offsetParent,f=!1;return g+document.body.scrollLeft}(l):m.Browser.NetscapeFamily&&(!m.Browser.Firefox||m.Browser.Version<3)?function(h){for(var f=s(h,!0),g=!0;null!=h;){if(f+=h.offsetLeft,g||null==h.offsetParent||(f-=h.scrollLeft),!g&&m.Browser.Firefox){var O=a.getCurrentStyle(h);"DIV"===h.tagName&&"visible"!==O.overflow&&(f+=a.pxToInt(O.borderLeftWidth))}g=!1,h=h.offsetParent}return f}(l):m.Browser.WebKitFamily||m.Browser.Edge?u(l):function(h){for(var f=0,g=!0;null!=h;)f+=h.offsetLeft,g||null==h.offsetParent||(f-=h.scrollLeft),g=!1,h=h.offsetParent;return f}(l):0;var h},a.isInteractiveControl=function(l){return["A","INPUT","SELECT","OPTION","TEXTAREA","BUTTON","IFRAME"].indexOf(l.tagName)>-1},a.getClearClientHeight=function(l){return l.offsetHeight-(a.getTopBottomPaddings(l)+a.getVerticalBordersWidth(l))},a.getTopBottomPaddings=function(l,u){var h=u||a.getCurrentStyle(l);return a.pxToInt(h.paddingTop)+a.pxToInt(h.paddingBottom)},a.getVerticalBordersWidth=function(l,u){b.isDefined(u)||(u=m.Browser.IE&&9!==m.Browser.MajorVersion&&window.getComputedStyle?window.getComputedStyle(l):a.getCurrentStyle(l));var h=0;return"none"!==u.borderTopStyle&&(h+=a.pxToFloat(u.borderTopWidth)),"none"!==u.borderBottomStyle&&(h+=a.pxToFloat(u.borderBottomWidth)),h},a.getNodes=function(l,u){for(var h=l.all||l.getElementsByTagName("*"),f=[],g=0;g<h.length;g++){var O=h[g];u(O)&&f.push(O)}return f},a.getChildNodes=function(l,u){for(var h=l.childNodes,f=[],g=0;g<h.length;g++){var O=h[g];u(O)&&f.push(O)}return f},a.getNodesByClassName=function(l,u){if(l.querySelectorAll){var h=l.querySelectorAll("."+u),f=[];return h.forEach(function(g){return f.push(g)}),f}return a.getNodes(l,function(g){return a.hasClassName(g,u)})},a.getChildNodesByClassName=function(l,u){return l.querySelectorAll?function(h,f){for(var g=[],O=0;O<h.length;O++){var I=h[O];f(I)&&g.push(I)}return g}(l.querySelectorAll("."+u),function(h){return h.parentNode===l}):a.getChildNodes(l,function(h){return!!a.isElementNode(h)&&b.isNonNullString(h.className)&&a.hasClassName(h,h.className)})},a.getVerticalScrollBarWidth=function(){if(void 0===a.verticalScrollBarWidth){var l=document.createElement("DIV");l.style.cssText="position: absolute; top: 0px; left: 0px; visibility: hidden; width: 200px; height: 150px; overflow: hidden; box-sizing: content-box",document.body.appendChild(l);var u=document.createElement("P");l.appendChild(u),u.style.cssText="width: 100%; height: 200px;";var h=u.offsetWidth;l.style.overflow="scroll";var f=u.offsetWidth;h===f&&(f=l.clientWidth),a.verticalScrollBarWidth=h-f,document.body.removeChild(l)}return a.verticalScrollBarWidth},a.getHorizontalBordersWidth=function(l,u){b.isDefined(u)||(u=m.Browser.IE&&window.getComputedStyle?window.getComputedStyle(l):a.getCurrentStyle(l));var h=0;return"none"!==u.borderLeftStyle&&(h+=a.pxToFloat(u.borderLeftWidth)),"none"!==u.borderRightStyle&&(h+=a.pxToFloat(u.borderRightWidth)),h},a.getFontFamiliesFromCssString=function(l){return l.split(",").map(function(u){return y.StringUtils.trim(u.replace(/'|"/gi,""))})},a.getInnerText=function(l){if(m.Browser.Safari&&m.Browser.MajorVersion<=5){null===a.html2PlainTextFilter&&((a.html2PlainTextFilter=document.createElement("DIV")).style.width="0",a.html2PlainTextFilter.style.height="0",a.html2PlainTextFilter.style.overflow="visible",a.html2PlainTextFilter.style.display="none",document.body.appendChild(a.html2PlainTextFilter));var u=a.html2PlainTextFilter;u.innerHTML=l.innerHTML,u.style.display="";var h=u.innerText;return u.style.display="none",h}return m.Browser.NetscapeFamily||m.Browser.WebKitFamily||m.Browser.IE&&m.Browser.Version>=9||m.Browser.Edge?l.textContent:l.innerText},a.html2PlainTextFilter=null,a.verticalScrollBarWidth=void 0,a}();function d(a,l){var u=0;if(b.isDefined(a)&&""!==a)try{var h=a.indexOf("px");h>-1&&(u=l(a.substr(0,h)))}catch{}return u}function s(a,l){for(var u=0,h=!0;null!=a&&"BODY"!==a.tagName;){var f=p.getCurrentStyle(a);if("absolute"===f.position)break;h||"DIV"!==a.tagName||""!==f.position&&"static"!==f.position||(u-=l?a.scrollLeft:a.scrollTop),a=a.parentNode,h=!1}return u}_.DomUtils=p},9712:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EncodeUtils=void 0;var x=function(){function m(){}return m.encodeHtml=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},m.decodeHtml=function(b){return b.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},m.prepareTextForRequest=function(b){return b.replace(/%/g,"%25").replace(/&/g,"%26amp;").replace(/\+/g,"%2B").replace(/</g,"%26lt;").replace(/>/g,"%26gt;").replace(/"/g,"%26quot;")},m.prepareTextForCallBackRequest=function(b){return b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},m.decodeViaTextArea=function(b){var E=document.createElement("TEXTAREA");return E.innerHTML=b,E.value},m}();_.EncodeUtils=x},3714:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EvtUtils=void 0;var m=x(9279),b=x(2491),E=x(6907),y=x(1632),p=function(){function d(){}return d.preventEvent=function(s){s.cancelable&&(s.preventDefault?s.preventDefault():s.returnValue=!1)},d.getEventSource=function(s){return b.isDefined(s)?d.getEventSourceCore(s):null},d.getEventSourceByPosition=function(s){if(!b.isDefined(s))return null;if(!document.elementFromPoint)return d.getEventSourceCore(s);var a=d.getEventX(s)-(d.clientEventRequiresDocScrollCorrection()?E.DomUtils.getDocumentScrollLeft():0),l=d.getEventY(s)-(d.clientEventRequiresDocScrollCorrection()?E.DomUtils.getDocumentScrollTop():0);return void 0===a||void 0===l?d.getEventSourceCore(s):document.elementFromPoint(a,l)},d.getEventSourceCore=function(s){return s.srcElement?s.srcElement:s.target},d.getMouseWheelEventName=function(){return m.Browser.Safari?"mousewheel":m.Browser.NetscapeFamily&&m.Browser.MajorVersion<17?"DOMMouseScroll":"wheel"},d.isLeftButtonPressed=function(s){return!!y.TouchUtils.isTouchEvent(s)||!!(s=m.Browser.IE&&b.isDefined(event)?event:s)&&(m.Browser.IE&&m.Browser.Version<11?!!m.Browser.MSTouchUI||s.button%2==1:m.Browser.WebKitFamily?"pointermove"===s.type||"pointerenter"===s.type||"pointerleave"===s.type?1===s.buttons:1===s.which:m.Browser.NetscapeFamily||m.Browser.Edge||m.Browser.IE&&m.Browser.Version>=11?d.isMoveEventName(s.type)?1===s.buttons:1===s.which:!m.Browser.Opera||0===s.button)},d.isMoveEventName=function(s){return s===y.TouchUtils.touchMouseMoveEventName||s===d.getMoveEventName()},d.getMoveEventName=function(){return window.PointerEvent?"pointermove":m.Browser.TouchUI?"touchmove":"mousemove"},d.preventEventAndBubble=function(s){d.preventEvent(s),s.stopPropagation&&s.stopPropagation(),s.cancelBubble=!0},d.clientEventRequiresDocScrollCorrection=function(){return m.Browser.AndroidDefaultBrowser||m.Browser.AndroidChromeBrowser||!(m.Browser.Safari&&m.Browser.Version<3||m.Browser.MacOSMobilePlatform&&m.Browser.Version<5.1)},d.getEventX=function(s){return y.TouchUtils.isTouchEvent(s)?y.TouchUtils.getEventX(s):s.clientX+(d.clientEventRequiresDocScrollCorrection()?E.DomUtils.getDocumentScrollLeft():0)},d.getEventY=function(s){return y.TouchUtils.isTouchEvent(s)?y.TouchUtils.getEventY(s):s.clientY+(d.clientEventRequiresDocScrollCorrection()?E.DomUtils.getDocumentScrollTop():0)},d.cancelBubble=function(s){s.cancelBubble=!0},d.getWheelDelta=function(s){var a;return a=m.Browser.NetscapeFamily&&m.Browser.MajorVersion<17?-s.detail:m.Browser.Safari?s.wheelDelta:-s.deltaY,m.Browser.Opera&&m.Browser.Version<9&&(a=-a),a},d}();_.EvtUtils=p},2674:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FileUtils=void 0;var m=x(9279),b=x(6477),E=x(2491),y=function(){function p(){}return p.loadJavascriptFile=function(d,s){var a,l=document.getElementsByTagName("head")[0];if(!l){l=document.createElement("head");var u=document.getElementsByTagName("body")[0];null===(a=u.parentNode)||void 0===a||a.insertBefore(l,u)}var h=document.createElement("script");return h.onload=s,h.src=d,l.appendChild(h),{htmlScriptElement:h}},p.startDownloadFileLocal=function(d,s){if(d instanceof ArrayBuffer&&(d=b.Base64Utils.fromArrayBuffer(d)),E.isString(d)&&(d=b.Base64Utils.getFileFromBase64(d)),window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,s);else{var a=document.createElement("a"),l=URL.createObjectURL(d);a.href=l,a.download=s,document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(l)},0)}},p.createFile=function(d,s,a){var l;if(m.Browser.IE||m.Browser.Edge&&m.Browser.MajorVersion<86){var u=new Blob(d,a);return u.lastModifiedDate=null!==(l=a?.lastModified)&&void 0!==l?l:Date.now(),u.name=s,u}return new File(d,s,a)},p.isFile=function(d){return m.Browser.IE||m.Browser.Edge&&m.Browser.MajorVersion<86?d instanceof File||d instanceof Blob&&E.isDefined(d.name):d instanceof File},p}();_.FileUtils=y},2153:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.KeyCode=_.ModifierKey=_.KeyUtils=void 0;var m,b,s,E=x(9279),y=x(9712),p=x(49),d=function(){function s(){}return s.getKeyModifiers=function(a){var l=0;return a.altKey&&(l|=m.Alt),a.ctrlKey&&(l|=m.Ctrl),a.shiftKey&&(l|=m.Shift),a.metaKey&&(l|=m.Meta),l},s.getShortcutCode=function(a,l,u,h,f){var g=a;return g|=l?m.Ctrl:0,g|=u?m.Shift:0,(g|=h?m.Alt:0)|(f?m.Meta:0)},s.getShortcutCodeByEvent=function(a){return s.getShortcutCode(s.getEventKeyCode(a),a.ctrlKey,a.shiftKey,a.altKey,!!E.Browser.MacOSPlatform&&a.metaKey)},s.getEventKeyCode=function(a){return E.Browser.NetscapeFamily||E.Browser.Opera?a.which:a.keyCode},s.parseShortcutString=function(a){if(!a)return 0;var l=!1,u=!1,h=!1,f=!1,g=null,O=a.toString().split("+");if(O.length>0)for(var I=0;I<O.length;I++){var D=p.StringUtils.trim(O[I].toUpperCase());switch(D){case"CONTROL":case"CONTROLKEY":case"CTRL":l=!0;break;case"SHIFT":case"SHIFTKEY":u=!0;break;case"ALT":h=!0;break;case"CMD":f=!0;break;case"F1":g=b.F1;break;case"F2":g=b.F2;break;case"F3":g=b.F3;break;case"F4":g=b.F4;break;case"F5":g=b.F5;break;case"F6":g=b.F6;break;case"F7":g=b.F7;break;case"F8":g=b.F8;break;case"F9":g=b.F9;break;case"F10":g=b.F10;break;case"F11":g=b.F11;break;case"F12":g=b.F12;break;case"RETURN":case"ENTER":g=b.Enter;break;case"HOME":g=b.Home;break;case"END":g=b.End;break;case"LEFT":g=b.Left;break;case"RIGHT":g=b.Right;break;case"UP":g=b.Up;break;case"DOWN":g=b.Down;break;case"PAGEUP":g=b.PageUp;break;case"PAGEDOWN":g=b.PageDown;break;case"SPACE":g=b.Space;break;case"TAB":g=b.Tab;break;case"BACKSPACE":case"BACK":g=b.Backspace;break;case"CONTEXT":g=b.ContextMenu;break;case"ESCAPE":case"ESC":g=b.Esc;break;case"DELETE":case"DEL":g=b.Delete;break;case"INSERT":case"INS":g=b.Insert;break;case"PLUS":g="+".charCodeAt(0);break;default:g=D.charCodeAt(0)}}else alert(y.EncodeUtils.decodeViaTextArea("Invalid shortcut"));return s.getShortcutCode(g,l,u,h,f)},s}();_.KeyUtils=d,(s=m=_.ModifierKey||(_.ModifierKey={}))[s.None=0]="None",s[s.Ctrl=65536]="Ctrl",s[s.Shift=262144]="Shift",s[s.Alt=1048576]="Alt",s[s.Meta=16777216]="Meta",function(s){s[s.Backspace=8]="Backspace",s[s.Tab=9]="Tab",s[s.Enter=13]="Enter",s[s.Pause=19]="Pause",s[s.CapsLock=20]="CapsLock",s[s.Esc=27]="Esc",s[s.Space=32]="Space",s[s.PageUp=33]="PageUp",s[s.PageDown=34]="PageDown",s[s.End=35]="End",s[s.Home=36]="Home",s[s.Left=37]="Left",s[s.Up=38]="Up",s[s.Right=39]="Right",s[s.Down=40]="Down",s[s.Insert=45]="Insert",s[s.Delete=46]="Delete",s[s.Key_0=48]="Key_0",s[s.Key_1=49]="Key_1",s[s.Key_2=50]="Key_2",s[s.Key_3=51]="Key_3",s[s.Key_4=52]="Key_4",s[s.Key_5=53]="Key_5",s[s.Key_6=54]="Key_6",s[s.Key_7=55]="Key_7",s[s.Key_8=56]="Key_8",s[s.Key_9=57]="Key_9",s[s.Key_a=65]="Key_a",s[s.Key_b=66]="Key_b",s[s.Key_c=67]="Key_c",s[s.Key_d=68]="Key_d",s[s.Key_e=69]="Key_e",s[s.Key_f=70]="Key_f",s[s.Key_g=71]="Key_g",s[s.Key_h=72]="Key_h",s[s.Key_i=73]="Key_i",s[s.Key_j=74]="Key_j",s[s.Key_k=75]="Key_k",s[s.Key_l=76]="Key_l",s[s.Key_m=77]="Key_m",s[s.Key_n=78]="Key_n",s[s.Key_o=79]="Key_o",s[s.Key_p=80]="Key_p",s[s.Key_q=81]="Key_q",s[s.Key_r=82]="Key_r",s[s.Key_s=83]="Key_s",s[s.Key_t=84]="Key_t",s[s.Key_u=85]="Key_u",s[s.Key_v=86]="Key_v",s[s.Key_w=87]="Key_w",s[s.Key_x=88]="Key_x",s[s.Key_y=89]="Key_y",s[s.Key_z=90]="Key_z",s[s.Windows=91]="Windows",s[s.ContextMenu=93]="ContextMenu",s[s.Numpad_0=96]="Numpad_0",s[s.Numpad_1=97]="Numpad_1",s[s.Numpad_2=98]="Numpad_2",s[s.Numpad_3=99]="Numpad_3",s[s.Numpad_4=100]="Numpad_4",s[s.Numpad_5=101]="Numpad_5",s[s.Numpad_6=102]="Numpad_6",s[s.Numpad_7=103]="Numpad_7",s[s.Numpad_8=104]="Numpad_8",s[s.Numpad_9=105]="Numpad_9",s[s.Multiply=106]="Multiply",s[s.Add=107]="Add",s[s.Subtract=109]="Subtract",s[s.Decimal=110]="Decimal",s[s.Divide=111]="Divide",s[s.F1=112]="F1",s[s.F2=113]="F2",s[s.F3=114]="F3",s[s.F4=115]="F4",s[s.F5=116]="F5",s[s.F6=117]="F6",s[s.F7=118]="F7",s[s.F8=119]="F8",s[s.F9=120]="F9",s[s.F10=121]="F10",s[s.F11=122]="F11",s[s.F12=123]="F12",s[s.NumLock=144]="NumLock",s[s.ScrollLock=145]="ScrollLock",s[s.Semicolon=186]="Semicolon",s[s.Equals=187]="Equals",s[s.Comma=188]="Comma",s[s.Dash=189]="Dash",s[s.Period=190]="Period",s[s.ForwardSlash=191]="ForwardSlash",s[s.GraveAccent=192]="GraveAccent",s[s.OpenBracket=219]="OpenBracket",s[s.BackSlash=220]="BackSlash",s[s.CloseBracket=221]="CloseBracket",s[s.SingleQuote=222]="SingleQuote"}(b=_.KeyCode||(_.KeyCode={}))},2940:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ListUtils=void 0;var m=x(6799),b=x(4170),E=function(){function y(){}return y.remove=function(p,d){var s=p.indexOf(d,0);s>=0&&p.splice(s,1)},y.removeBy=function(p,d){for(var s=p.length,a=0;a<s;a++)if(d(p[a],a))return p.splice(a,1)[0];return null},y.shallowCopy=function(p){return p.slice()},y.deepCopy=function(p){return y.map(p,function(d){return d.clone()})},y.initByValue=function(p,d){for(var s=[];p>0;p--)s.push(d);return s},y.initByCallback=function(p,d){for(var s=[],a=0;a<p;a++)s.push(d(a));return s},y.forEachOnInterval=function(p,d){for(var s=p.end,a=p.start;a<s;a++)d(a)},y.reverseForEachOnInterval=function(p,d){for(var s=p.start,a=p.end-1;a>=s;a--)d(a)},y.reducedMap=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=[],u=s;u<a;u++){var h=d(p[u],u);null!==h&&l.push(h)}return l},y.filter=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=[],u=s;u<a;u++){var h=p[u];d(h,u)&&l.push(h)}return l},y.map=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=[],u=s;u<a;u++)l.push(d(p[u],u));return l},y.indexBy=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=s;l<a;l++)if(d(p[l],l))return l;return-1},y.reverseIndexBy=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);for(var l=s;l>=a;l--)if(d(p[l],l))return l;return-1},y.elementBy=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);var l=y.indexBy(p,d,s,a);return l<0?null:p[l]},y.reverseElementBy=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);var l=y.reverseIndexBy(p,d,s,a);return l<0?null:p[l]},y.last=function(p){return p[p.length-1]},y.setLast=function(p,d){return p[p.length-1]=d},y.incLast=function(p){return++p[p.length-1]},y.decLast=function(p){return--p[p.length-1]},y.equals=function(p,d){return p.length===d.length&&y.allOf2(p,d,function(s,a){return s.equals(a)})},y.equalsByReference=function(p,d){var s=p.length;if(s!==p.length)return!1;for(var a=0;a<s;a++)if(p[a]!==d[a])return!1;return!0},y.unique=function(p,d,s,a){void 0===s&&(s=d),void 0===a&&(a=function(){});var l=p.length;if(0===l)return[];var u=(p=p.sort(d))[0],h=y.reducedMap(p,function(f){return 0!==s(u,f)?(u=f,f):(a(f),null)},1,l);return h.unshift(p[0]),h},y.uniqueNumber=function(p){p=p.sort(b.Comparers.number);for(var d=Number.NaN,s=p.length-1;s>=0;s--)d===p[s]?p.splice(s,1):d=p[s];return p},y.forEach=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=s;l<a;l++)d(p[l],l)},y.forEach2=function(p,d,s,a,l){void 0===a&&(a=0),void 0===l&&(l=p.length);for(var u=a;u<l;u++)s(p[u],d[u],u)},y.reverseForEach=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);for(var l=s;l>=a;l--)d(p[l],l)},y.reverseIndexOf=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);for(var l=s;l>=a;l--)if(p[l]===d)return l;return-1},y.accumulate=function(p,d,s,a,l){void 0===a&&(a=0),void 0===l&&(l=p.length);for(var u=d,h=a;h<l;h++)u=s(u,p[h],h);return u},y.accumulateNumber=function(p,d,s,a,l){void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=p.length);for(var u=s,h=a;h<l;h++)u+=d(p[h],h,u);return u},y.anyOf=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=s;l<a;l++)if(d(p[l],l))return!0;return!1},y.unsafeAnyOf=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=s;l<a;l++){var u=d(p[l],l);if(u)return u}return null},y.reverseAnyOf=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);for(var l=s;l>=a;l--)if(d(p[l],l))return!0;return!1},y.unsafeReverseAnyOf=function(p,d,s,a){void 0===s&&(s=p.length-1),void 0===a&&(a=0);for(var l=s;l>=a;l--){var u=d(p[l],l);if(u)return u}return null},y.anyOf2=function(p,d,s,a,l){void 0===a&&(a=0),void 0===l&&(l=p.length);for(var u=a;u<l;u++)if(s(p[u],d[u],u))return!0;return!1},y.allOf=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);for(var l=s;l<a;l++)if(!d(p[l],l))return!1;return!0},y.allOf2=function(p,d,s,a,l){void 0===a&&(a=0),void 0===l&&(l=p.length);for(var u=a;u<l;u++)if(!s(p[u],d[u],u))return!1;return!0},y.allOfOnInterval=function(p,d){for(var s=p.end,a=p.start;a<s;a++)if(!d(a))return!1;return!0},y.addListOnTail=function(p,d){for(var s=0,a=void 0;a=d[s];s++)p.push(a);return p},y.joinLists=function(p){for(var d=[],s=1;s<arguments.length;s++)d[s-1]=arguments[s];return y.accumulate(d,[],function(a,l){return y.addListOnTail(a,p(l)),a})},y.push=function(p,d){return p.push(d),p},y.countIf=function(p,d){return y.accumulateNumber(p,function(s,a){return d(s,a)?1:0})},y.clear=function(p){p.splice(0)},y.merge=function(p,d,s,a,l,u){if(void 0===l&&(l=0),void 0===u&&(u=p.length),p=p.slice(l,u),u-l<2)return p;for(var h=(p=p.sort(d))[l],f=[h],g=l+1;g<u;g++){var O=p[g];s(h,O)?a(h,O):f.push(h=O)}return f},y.min=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);var l=y.minExtended(p,d,s,a);return l?l.minElement:null},y.max=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);var l=y.maxExtended(p,d,s,a);return l?l.maxElement:null},y.minMax=function(p,d,s,a){void 0===s&&(s=0),void 0===a&&(a=p.length);var l=y.minMaxExtended(p,d,s,a);return l?new m.MinMax(l.minElement,l.maxElement):null},y.minExtended=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=d(l),h=s+1;h<a;h++){var f=p[h],g=d(f);g<u&&(u=g,l=f)}return new m.ExtendedMin(l,u)},y.maxExtended=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=d(l),h=s+1;h<a;h++){var f=p[h],g=d(f);g>u&&(u=g,l=f)}return new m.ExtendedMax(l,u)},y.minMaxExtended=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=l,h=d(l),f=h,g=s+1;g<a;g++){var O=p[g],I=d(O);I<h?(h=I,l=O):I>f&&(f=I,u=O)}return new m.ExtendedMinMax(l,h,u,f)},y.minByCmp=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=s+1;u<a;u++){var h=p[u];d(h,l)<0&&(l=h)}return l},y.maxByCmp=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=s+1;u<a;u++){var h=p[u];d(h,l)>0&&(l=h)}return l},y.minMaxByCmp=function(p,d,s,a){if(void 0===s&&(s=0),void 0===a&&(a=p.length),0===p.length)return null;for(var l=p[s],u=l,h=s+1;h<a;h++){var f=p[h],g=d(f,l);g>0?u=f:g<0&&(l=f)}return new m.MinMax(l,u)},y}();_.ListUtils=E},8679:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.MathUtils=void 0;var m=x(2940),b=function(){function E(){}return E.round=function(y,p){void 0===p&&(p=0);var d=E.powFactor[p];return Math.round(y*d)/d},E.numberCloseTo=function(y,p,d){return void 0===d&&(d=1e-5),Math.abs(y-p)<d},E.restrictValue=function(y,p,d){return d<p&&(d=p),y>d?d:y<p?p:y},E.getRandomInt=function(y,p){return Math.floor(Math.random()*(p-y+1))+y},E.generateGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var p=16*Math.random()|0;return("x"===y?p:3&p|8).toString(16)})},E.powFactor=m.ListUtils.initByCallback(20,function(y){return Math.pow(10,y)}),E.somePrimes=[1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003],E}();_.MathUtils=b},4633:(J,_)=>{var x,m,b,E,p;Object.defineProperty(_,"__esModule",{value:!0}),_.MimeTypeUtils=_.DxMimeType=_.ImageWebpMimeType=_.ImageWbmpMimeType=_.ImageIcoMimeType=_.ImageTiffMimeType=_.ImageSvgMimeType=_.ImagePjpegMimeType=_.ImageJpegMimeType=_.ImageGifMimeType=_.ImagePngMimeType=_.DocmMimeType=_.HtmlMimeType=_.PlainTextMimeType=_.RtfMimeType=_.OpenXmlMimeType=void 0,_.OpenXmlMimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document",_.RtfMimeType="application/rtf",_.PlainTextMimeType="text/plain",_.HtmlMimeType="text/html",_.DocmMimeType="application/vnd.ms-word.document.macroEnabled.12",_.ImagePngMimeType="image/png",_.ImageGifMimeType="image/gif",_.ImageJpegMimeType="image/jpeg",_.ImagePjpegMimeType="image/pjpeg",_.ImageSvgMimeType="image/svg+xml",_.ImageTiffMimeType="image/tiff",_.ImageIcoMimeType="image/vnd.microsoft.icon",_.ImageWbmpMimeType="image/vnd.wap.wbmp",_.ImageWebpMimeType="image/webp",(p=E=_.DxMimeType||(_.DxMimeType={}))[p.Unknown=0]="Unknown",p[p.OpenXml=1]="OpenXml",p[p.Rtf=2]="Rtf",p[p.PlainText=3]="PlainText",p[p.Docm=4]="Docm",p[p.Png=5]="Png",p[p.Gif=6]="Gif",p[p.Jpeg=7]="Jpeg",p[p.Pjpeg=8]="Pjpeg",p[p.Svg=9]="Svg",p[p.Tiff=10]="Tiff",p[p.Ico=11]="Ico",p[p.Wbmp=12]="Wbmp",p[p.Webp=13]="Webp",p[p.Html=14]="Html";var y=function(){function p(){}return p.stringTypeToExtension=function(d){var s=p.stringTypeToTypeMap[d];return void 0===s?"":p.typeToExtensionMap[s]},p.typeToExtension=function(d){return p.typeToExtensionMap[d]??""},p.extensionToType=function(d){return"."!==(d=d.toLowerCase())[0]&&(d+="."),p.extensionToTypeMap[d]??E.Unknown},p.typeToStringType=function(d){return p.typeToStringTypeMap[d]??""},p.stringTypeToType=function(d){var s=p.stringTypeToTypeMap[d];return void 0===s?E.Unknown:s},p.stringTypeToTypeMap=((x={})[_.OpenXmlMimeType]=E.OpenXml,x[_.RtfMimeType]=E.Rtf,x[_.PlainTextMimeType]=E.PlainText,x[_.DocmMimeType]=E.Docm,x[_.HtmlMimeType]=E.Html,x[_.ImagePngMimeType]=E.Png,x[_.ImageGifMimeType]=E.Gif,x[_.ImageJpegMimeType]=E.Jpeg,x[_.ImagePjpegMimeType]=E.Pjpeg,x[_.ImageSvgMimeType]=E.Svg,x[_.ImageTiffMimeType]=E.Tiff,x[_.ImageIcoMimeType]=E.Ico,x[_.ImageWbmpMimeType]=E.Wbmp,x[_.ImageWebpMimeType]=E.Webp,x),p.typeToStringTypeMap=((m={})[E.Unknown]=void 0,m[E.OpenXml]=_.OpenXmlMimeType,m[E.Rtf]=_.RtfMimeType,m[E.PlainText]=_.PlainTextMimeType,m[E.Docm]=_.DocmMimeType,m[E.Html]=_.HtmlMimeType,m[E.Png]=_.ImagePngMimeType,m[E.Gif]=_.ImageGifMimeType,m[E.Jpeg]=_.ImageJpegMimeType,m[E.Pjpeg]=_.ImagePjpegMimeType,m[E.Svg]=_.ImageSvgMimeType,m[E.Tiff]=_.ImageTiffMimeType,m[E.Ico]=_.ImageIcoMimeType,m[E.Wbmp]=_.ImageWbmpMimeType,m[E.Webp]=_.ImageWebpMimeType,m),p.typeToExtensionMap=((b={})[E.Unknown]=void 0,b[E.OpenXml]=".docx",b[E.Rtf]=".rtf",b[E.PlainText]=".txt",b[E.Docm]=".docm",b[E.Html]=".html",b[E.Png]=".png",b[E.Gif]=".gif",b[E.Jpeg]=".jpeg",b[E.Pjpeg]=".pjpeg",b[E.Svg]=".svg",b[E.Tiff]=".tiff",b[E.Ico]=".ico",b[E.Wbmp]=".wbmp",b[E.Webp]=".webp",b),p.extensionToTypeMap={".docx":E.OpenXml,".rtf":E.Rtf,".txt":E.PlainText,".docm":E.Docm,".html":E.Html,".htm":E.Html,".png":E.Png,".gif":E.Gif,".jpeg":E.Jpeg,".pjpeg":E.Pjpeg,".svg":E.Svg,".tiff":E.Tiff,".ico":E.Ico,".wbmp":E.Wbmp,".webp":E.Webp},p}();_.MimeTypeUtils=y},2400:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SearchUtils=void 0;var x=function(){function m(){}return m.binaryIndexOf=function(b,E,y,p){void 0===y&&(y=0),void 0===p&&(p=-2);var d=0===y;for(-2===p&&(p=b.length-1);y<=p;){var s=y+(p-y>>1),a=E(b[s]);if(a<0)y=s+1;else{if(!(a>0))return s;p=s-1}}return d?~y:-1},m.normedBinaryIndexOf=function(b,E,y,p){void 0===y&&(y=0),void 0===p&&(p=-2);var d=m.binaryIndexOf(b,E,y,p);return m.binaryIndexNormalizator(d)},m.binaryIndexNormalizator=function(b){return b<0?~b-1:b},m.normedInterpolationIndexOf=function(b,E,y,p,d){void 0===p&&(p=0),void 0===d&&(d=-2),-2===d&&(d=b.length-1);var s=b[Math.min(p,d)];if(void 0===s||y<E(s))return-1;for(var a=E(b[p]),l=E(b[d]);;){if(!(y>a&&y<l))return y===a?p:d;var u=p+Math.floor((y-a)*(d-p)/(l-a)),h=E(b[u]);if(y>h){if(y<(a=E(b[p=u+1])))return u}else{if(!(y<h))return u;l=E(b[d=u-1])}}},m}();_.SearchUtils=x},49:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.StringUtils=void 0;var x=function(){function m(){}return m.isAlpha=function(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"},m.isDigit=function(b){return b>="0"&&b<="9"},m.stringHashCode=function(b){var E=0;if(0===b.length)return E;for(var y=b.length,p=0;p<y;p++)E=(E<<5)-E+b.charCodeAt(p),E|=0;return E},m.endsAt=function(b,E){var y=b.length-1,p=E.length-1,d=y-p;if(d<0)return!1;for(;y>=d;y--,p--)if(b[y]!==E[p])return!1;return!0},m.startsAt=function(b,E){return b.substr(0,E.length)===E},m.stringInLowerCase=function(b){return b.toLowerCase()===b},m.stringInUpperCase=function(b){return b.toUpperCase()===b},m.atLeastOneSymbolInUpperCase=function(b){for(var E=0,y=void 0;y=b[E];E++)if(m.stringInUpperCase(y)&&!m.stringInLowerCase(y))return!0;return!1},m.getSymbolFromEnd=function(b,E){return b[b.length-E]},m.trim=function(b,E){if(void 0===E)return m.trimInternal(b,!0,!0);var y=E.join("");return b.replace(new RegExp("(^["+y+"]*)|(["+y+"]*$)","g"),"")},m.trimStart=function(b,E){if(void 0===E)return m.trimInternal(b,!0,!1);var y=E.join("");return b.replace(new RegExp("^["+y+"]*","g"),"")},m.trimEnd=function(b,E){if(void 0===E)return m.trimInternal(b,!1,!0);var y=E.join("");return b.replace(new RegExp("["+y+"]*$","g"),"")},m.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},m.repeat=function(b,E){return new Array(E<=0?0:E+1).join(b)},m.isNullOrEmpty=function(b){return!b||!b.length},m.padLeft=function(b,E,y){return m.repeat(y,Math.max(0,E-b.length))+b},m.trimInternal=function(b,E,y){var p=b.length;if(!p)return b;if(p<764833){var d=b;return E&&(d=d.replace(/^\s+/,"")),y&&(d=d.replace(/\s+$/,"")),d}var s=0;if(y)for(;p>0&&/\s/.test(b[p-1]);)p--;if(E&&p>0)for(;s<p&&/\s/.test(b[s]);)s++;return b.substring(s,p)},m}();_.StringUtils=x},1632:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TouchUtils=void 0;var m=x(9279),b=x(2491),E=function(){function y(){}return y.onEventAttachingToDocument=function(p,d){return!m.Browser.MacOSMobilePlatform||!y.isTouchEventName(p)||(y.documentTouchHandlers[p]||(y.documentTouchHandlers[p]=[]),y.documentTouchHandlers[p].push(d),y.documentEventAttachingAllowed)},y.isTouchEventName=function(p){return m.Browser.WebKitTouchUI&&(p.indexOf("touch")>-1||p.indexOf("gesture")>-1)},y.isTouchEvent=function(p){return m.Browser.WebKitTouchUI&&b.isDefined(p.changedTouches)},y.getEventX=function(p){return m.Browser.IE?p.pageX:p.changedTouches[0].pageX},y.getEventY=function(p){return m.Browser.IE?p.pageY:p.changedTouches[0].pageY},y.touchMouseDownEventName=m.Browser.WebKitTouchUI?"touchstart":m.Browser.Edge&&m.Browser.MSTouchUI&&window.PointerEvent?"pointerdown":"mousedown",y.touchMouseUpEventName=m.Browser.WebKitTouchUI?"touchend":m.Browser.Edge&&m.Browser.MSTouchUI&&window.PointerEvent?"pointerup":"mouseup",y.touchMouseMoveEventName=m.Browser.WebKitTouchUI?"touchmove":m.Browser.Edge&&m.Browser.MSTouchUI&&window.PointerEvent?"pointermove":"mousemove",y.msTouchDraggableClassName="dxMSTouchDraggable",y.documentTouchHandlers={},y.documentEventAttachingAllowed=!0,y}();_.TouchUtils=E},7097:(J,_,x)=>{x(8091).polyfill()},8091:J=>{function _(x,m){if(null==x)throw new TypeError("Cannot convert first argument to object");for(var b=Object(x),E=1;E<arguments.length;E++){var y=arguments[E];if(null!=y)for(var p=Object.keys(Object(y)),d=0,s=p.length;d<s;d++){var a=p[d],l=Object.getOwnPropertyDescriptor(y,a);void 0!==l&&l.enumerable&&(b[a]=y[a])}}return b}J.exports={assign:_,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:_})}}},8721:(J,_,x)=>{x.r(_)},5656:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ApiController=void 0;var E,l,y=x(1772),p=x(6031),d=x(4867),s=x(3607),a=function(l){function u(h,f,g){var O=l.call(this)||this;return O.events=h,O.model=g,O.selection=f,O}return b(u,l),u.prototype.notifySelectionChanged=function(h){this.isUpdateLocked()?this.registerOccurredEvent(E.SelectionChanged):this.raiseSelectionChanged()},u.prototype.notifyToolboxDragStart=function(){this.events.raise("notifyToolboxItemDragStart")},u.prototype.notifyToolboxDragEnd=function(){this.events.raise("notifyToolboxItemDragEnd")},u.prototype.notifyToolboxDraggingMouseMove=function(){},u.prototype.notifyClick=function(h){var f=this;this.tryRaiseUserAction(h,function(g){return f.events.raise("notifyItemClick",g)})},u.prototype.notifyDblClick=function(h){var f=this;this.tryRaiseUserAction(h,function(g){return f.events.raise("notifyItemDblClick",g)})},u.prototype.createNativeItem=function(h){return h&&this.cleanupNativeItem(h.toNative(this.model.units))},u.prototype.createNativeShape=function(h){return this.createNativeItem(h)},u.prototype.createNativeConnector=function(h){return this.createNativeItem(h)},u.prototype.convertUnit=function(h){return d.ModelUtils.getlUnitValue(this.model.units,h)},u.prototype.convertPoint=function(h){return new s.Point(this.convertUnit(h.x),this.convertUnit(h.y))},u.prototype.convertSize=function(h){return new s.Size(this.convertUnit(h.width),this.convertUnit(h.height))},u.prototype.cleanupNativeItem=function(h){var f=this.dataSource;return f&&(f.isAutoGeneratedKey(h.fromKey)&&(h.fromKey=void 0),f.isAutoGeneratedKey(h.key)&&(h.key=void 0),f.isAutoGeneratedKey(h.toKey)&&(h.toKey=void 0)),h},u.prototype.setDataSource=function(h){this.dataSource=h},u.prototype.tryRaiseUserAction=function(h,f){var g=this;if(this.isUserAction(h)){var O=this.model.findItem(h.source.key);O&&this.events.raise1(function(I){return f(g.createNativeItem(O))})}},u.prototype.isUserAction=function(h){return h.source&&(h.source.type===p.MouseEventElementType.Shape||h.source.type===p.MouseEventElementType.ShapeExpandButton||h.source.type===p.MouseEventElementType.ShapeParameterBox||h.source.type===p.MouseEventElementType.ShapeResizeBox||h.source.type===p.MouseEventElementType.ShapeConnectionPoint||h.source.type===p.MouseEventElementType.Connector||h.source.type===p.MouseEventElementType.ConnectorPoint||h.source.type===p.MouseEventElementType.ConnectorSide||h.source.type===p.MouseEventElementType.ConnectorOrthogonalSide||h.source.type===p.MouseEventElementType.ConnectorText)},u.prototype.onUpdateUnlocked=function(h){h&E.SelectionChanged&&this.raiseSelectionChanged()},u.prototype.raiseSelectionChanged=function(){var h=this,f=this.selection.getKeys().map(function(g){return h.createNativeItem(h.model.findItem(g))});this.events.raise1(function(g){return g.notifySelectionChanged(f)})},u}(y.BatchUpdatableObject);_.ApiController=a,(l=E||(E={}))[l.SelectionChanged=1]="SelectionChanged"},7185:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.NativeConnector=_.NativeShape=_.NativeItem=void 0;var E=x(4867),y=function(){function s(a,l){this.id=a,this.key=l,this.unitsApplied=!1}return s.prototype.applyUnits=function(a){this.unitsApplied||void 0===a||(this.applyUnitsCore(a),this.unitsApplied=!0)},s}();_.NativeItem=y;var p=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.applyUnitsCore=function(l){this.position.x=E.ModelUtils.getlUnitValue(l,this.position.x),this.position.y=E.ModelUtils.getlUnitValue(l,this.position.y),this.size.width=E.ModelUtils.getlUnitValue(l,this.size.width),this.size.height=E.ModelUtils.getlUnitValue(l,this.size.height)},a}(y);_.NativeShape=p;var d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.applyUnitsCore=function(l){this.points.forEach(function(u){u.x=E.ModelUtils.getlUnitValue(l,u.x),u.y=E.ModelUtils.getlUnitValue(l,u.y)})},a}(y);_.NativeConnector=d},8906:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutCommandBase=void 0;var E=x(4867),y=x(9741),p=x(5503),d=x(7959),s=x(8675),a=x(8011),l=x(7626),u=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return b(f,h),f.prototype.executeCore=function(g,O){var I=this;this.control.history.beginTransaction();var D=this.getAffectedShapes(),C=this.getAffectedConnectors(),w=this.createLayoutSettings(),P=E.ModelUtils.getGraphInfoByItems(this.control.model,D,C,!1);if(P.length){var k,A=this.control.model,R=s.GeometryUtils.getCommonRectangle(s.Utils.flatten(P.map(function(M){return M.graph.items.map(function(L){return A.findItem(L.key)})})).concat(P.map(function(M){return M.container})).filter(function(M){return M}).map(function(M){return M.rectangle}));this.control.history.addAndRedo(new l.ScrollIntoViewOnUndoHistoryItem(this.control.view,R)),P.forEach(function(M){var L=I.createLayout(w,M.graph),H=E.ModelUtils.getNonGraphItems(I.control.model,M.container,L.nodeToLayout,D,C),j=E.ModelUtils.applyLayout(I.control.history,I.control.model,M.container,M.graph,L,H,w,I.control.settings.snapToGrid,I.control.settings.gridSize,!1);k=k&&a.Rectangle.union(k,j)||j}),E.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.addAndRedo(new l.ScrollIntoViewOnRedoHistoryItem(this.control.view,k))}return this.control.history.endTransaction(),!0},f.prototype.getAffectedShapes=function(){return this.control.selection.isEmpty()?this.control.model.items.filter(function(g){return g instanceof p.Shape&&!g.locked}):this.control.selection.getSelectedShapes(!1,!0)},f.prototype.getAffectedConnectors=function(){return this.control.selection.isEmpty()?this.control.model.items.filter(function(g){return g instanceof d.Connector&&!g.locked}):this.control.selection.getSelectedConnectors(!1,!0)},f}(y.SimpleCommandBase);_.AutoLayoutCommandBase=u},30:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutLayeredHorizontalCommand=void 0;var E=x(8906),y=x(1256),p=x(8710),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.createLayoutSettings=function(){var l=new p.LayoutSettings;return l.orientation=p.DataLayoutOrientation.Horizontal,l},a.prototype.createLayout=function(l,u){return new y.SugiyamaLayoutBuilder(l,u).build()},a}(E.AutoLayoutCommandBase);_.AutoLayoutLayeredHorizontalCommand=d},7826:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutLayeredHorizontalRightToLeftCommand=void 0;var E=x(8710),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.createLayoutSettings=function(){var s=p.prototype.createLayoutSettings.call(this);return s.direction=E.LogicalDirectionKind.Backward,s},d}(x(30).AutoLayoutLayeredHorizontalCommand);_.AutoLayoutLayeredHorizontalRightToLeftCommand=y},554:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutLayeredVerticalBottomToTopCommand=void 0;var E=x(8710),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.createLayoutSettings=function(){var s=p.prototype.createLayoutSettings.call(this);return s.direction=E.LogicalDirectionKind.Backward,s},d}(x(9427).AutoLayoutLayeredVerticalCommand);_.AutoLayoutLayeredVerticalBottomToTopCommand=y},9427:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutLayeredVerticalCommand=void 0;var E=x(8906),y=x(1256),p=x(8710),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.createLayoutSettings=function(){var l=new p.LayoutSettings;return l.orientation=p.DataLayoutOrientation.Vertical,l},a.prototype.createLayout=function(l,u){return new y.SugiyamaLayoutBuilder(l,u).build()},a}(E.AutoLayoutCommandBase);_.AutoLayoutLayeredVerticalCommand=d},7004:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutTreeHorizontalCommand=void 0;var E=x(8906),y=x(9533),p=x(8710),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.createLayoutSettings=function(){var u=new p.TreeLayoutSettings(this.control.settings.snapToGrid?this.control.settings.gridSize:void 0);return u.orientation=p.DataLayoutOrientation.Horizontal,u},a.prototype.createLayout=function(l,u){return new y.TreeLayoutBuilder(l,u).build()},a}(E.AutoLayoutCommandBase);_.AutoLayoutTreeHorizontalCommand=d},5010:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutTreeHorizontalRightToLeftCommand=void 0;var E=x(8710),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.createLayoutSettings=function(){var s=p.prototype.createLayoutSettings.call(this);return s.direction=E.LogicalDirectionKind.Backward,s},d}(x(7004).AutoLayoutTreeHorizontalCommand);_.AutoLayoutTreeHorizontalRightToLeftCommand=y},2217:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutTreeVerticalBottomToTopCommand=void 0;var E=x(8710),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.createLayoutSettings=function(){var s=p.prototype.createLayoutSettings.call(this);return s.direction=E.LogicalDirectionKind.Backward,s},d}(x(375).AutoLayoutTreeVerticalCommand);_.AutoLayoutTreeVerticalBottomToTopCommand=y},375:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AutoLayoutTreeVerticalCommand=void 0;var E=x(8906),y=x(9533),p=x(8710),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.createLayoutSettings=function(){var u=new p.TreeLayoutSettings(this.control.settings.snapToGrid?this.control.settings.gridSize:void 0);return u.orientation=p.DataLayoutOrientation.Vertical,u},a.prototype.createLayout=function(l,u){return new y.TreeLayoutBuilder(l,u).build()},a}(E.AutoLayoutCommandBase);_.AutoLayoutTreeVerticalCommand=d},4982:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ClipboardCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.setClipboardData=function(d){this.control.render&&this.control.render.input.setClipboardData(d),p.clipboardData=d},p.prototype.getClipboardData=function(d){this.control.render&&this.isPasteSupportedByBrowser()?this.control.render.input.getClipboardData(d):d(p.clipboardData)},p.prototype.isPasteSupportedByBrowser=function(){return this.control.render&&this.control.render.input.isPasteSupportedByBrowser()},p}(x(9741).SimpleCommandBase);_.ClipboardCommand=E},5827:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.CopySelectionCommand=void 0;var E=x(5885),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){return p.prototype.isEnabled.call(this)&&!this.control.selection.isEmpty(!0)},d.prototype.isEnabledInReadOnlyMode=function(){return!0},d.prototype.executeCore=function(s){var a=(new E.Exporter).exportItems(this.control.selection.getSelectedItems(!0,!0));return this.setClipboardData(a),!0},d}(x(4982).ClipboardCommand);_.CopySelectionCommand=y},2664:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.CutSelectionCommand=void 0;var E=x(5885),y=x(4867),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.isEnabled=function(){var a=this.control.selection.getSelectedItems();return d.prototype.isEnabled.call(this)&&a.length&&(a.length>1||this.permissionsProvider.canDeleteItems(a))},s.prototype.executeCore=function(a){var l=new E.Exporter,u=this.control.selection.getSelectedItems(!0,!0),h=l.exportItems(u);return this.permissionsProvider.beginDeleteItems(u),this.setClipboardData(h),y.ModelUtils.deleteSelection(this.control.history,this.control.model,this.control.selection),this.permissionsProvider.endDeleteItems(),!0},Object.defineProperty(s.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),s}(x(4982).ClipboardCommand);_.CutSelectionCommand=p},4200:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.PasteSelectionCommand=void 0;var E=x(8900),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.getEventPositionOffset=function(s,a){return new E.Point(0,0)},d}(x(7688).PasteSelectionCommandBase);_.PasteSelectionCommand=y},7688:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.PasteSelectionCommandBase=void 0;var E=x(4982),y=x(2406),p=x(5503),d=x(4383),s=x(7959),a=x(3849),l=x(4867),u=x(4297),h=x(8900),f=x(9291),g=function(O){function I(){return null!==O&&O.apply(this,arguments)||this}return b(I,O),I.prototype.isEnabled=function(){return O.prototype.isEnabled.call(this)&&(this.isPasteSupportedByBrowser()||void 0!==E.ClipboardCommand.clipboardData)},I.prototype.isVisible=function(){return this.isPasteSupportedByBrowser()||void 0!==E.ClipboardCommand.clipboardData},I.prototype.parseClipboardData=function(D){var C;C=new y.Importer(this.control.shapeDescriptionManager,D).importItems(this.control.model);var w=this.getEventPositionOffset(C,this.control.contextMenuPosition);w=this.getCorrectedOffsetByModel(C,w);for(var P=0;P<C.length;P++){var k=C[P];k instanceof p.Shape?k.position.offsetByPoint(w):k instanceof s.Connector&&k.points.forEach(function(A){return A.offsetByPoint(w)})}return C},I.prototype.getCorrectedOffsetByModel=function(D,C){var w=D.reduce(function(A,R){var M=R instanceof p.Shape?R.position.x:R instanceof s.Connector?R.getMinX():Number.MAX_VALUE,L=R instanceof p.Shape?R.position.y:R instanceof s.Connector?R.getMinY():Number.MAX_VALUE;return(L<A.y||L===A.y&&M<A.x)&&(A.topLeftItem=R,A.x=M,A.y=L),A},{topLeftItem:D[0],x:Number.MAX_VALUE,y:Number.MAX_VALUE}).topLeftItem;if(w instanceof p.Shape){var P=this.getShapeCorrectedPosition(this.control.model,w,C);return new h.Point(P.x-w.position.x,P.y-w.position.y)}if(w instanceof s.Connector){var k=this.getConnectorCorrectedPoints(this.control.model,w,C);return new h.Point(w.points[0].x-k[0].x,w.points[0].y-k[0].y)}},I.prototype.executeCore=function(D,C){var w=this,P=!0;return void 0===C?this.getClipboardData(function(k){P=w.execute(k)}):this.performPaste(C),P},I.prototype.addItemForSortingRecursive=function(D,C){if(D[C.key])return D[C.key];if(C instanceof s.Connector)return D[C.key]=C.endItem?this.addItemForSortingRecursive(D,C.endItem)-.5:C.beginItem?this.addItemForSortingRecursive(D,C.beginItem)+.5:-1,D[C.key];if(0===C.attachedConnectors.length)return D[C.key]=0;for(var w=0;w<C.attachedConnectors.length;w++){var P=C.attachedConnectors[w].beginItem;return D[C.key]=C.attachedConnectors[w].endItem===C&&P&&P!==C.attachedConnectors[w].endItem?this.addItemForSortingRecursive(D,P)+1:0}},I.prototype.getSortedPasteItems=function(D){for(var C=[],w=[],P={},k=0;k<D.length;k++){var A=D[k];A instanceof p.Shape?C.push(A):A instanceof s.Connector&&(w.push(A),this.addItemForSortingRecursive(P,A))}return w.sort(function(R,M){return P[M.key]-P[R.key]}),C.concat(w)},I.prototype.performPaste=function(D){this.control.beginUpdateCanvas(),this.control.history.beginTransaction();var C={},w=this.parseClipboardData(D);w=this.getSortedPasteItems(w);for(var P=0;P<w.length;P++){var k=w[P];k instanceof p.Shape?this.control.history.addAndRedo(new d.ImportShapeHistoryItem(k)):k instanceof s.Connector&&this.control.history.addAndRedo(new a.ImportConnectorHistoryItem(k));var A=k.container&&k.container.key;A&&void 0!==C[A]?A&&void 0!==C[A]&&(C[k.key]=!1):C[k.key]=!0}l.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.addAndRedo(new u.SetSelectionHistoryItem(this.control.selection,Object.keys(C).filter(function(R){return C[R]}))),this.control.history.endTransaction(),this.control.endUpdateCanvas(),this.control.barManager.updateItemsState()},I.prototype.getShapeCorrectedPosition=function(D,C,w){for(var P=C.position.clone().offsetByPoint(w);D.findShapeAtPosition(P);)P.offset(I.positionOffset,I.positionOffset);return P},I.prototype.getConnectorCorrectedPoints=function(D,C,w){for(var P=C.points.map(function(k){return k.clone().offsetByPoint(w)});D.findConnectorAtPoints(P);)P.forEach(function(k){k.x+=I.positionOffset,k.y+=I.positionOffset});return P},Object.defineProperty(I.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),I.positionOffset=f.UnitConverter.pixelsToTwips(10),I}(E.ClipboardCommand);_.PasteSelectionCommandBase=g},437:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.PasteSelectionInPositionCommand=void 0;var E=x(7688),y=x(5503),p=x(7959),d=x(8900),s=function(a){function l(){return null!==a&&a.apply(this,arguments)||this}return b(l,a),l.prototype.getEventPositionOffset=function(u,h){if(!h)return d.Point.zero();var f=u.reduce(function(O,I){return{x:Math.min(O.x,I instanceof y.Shape?I.position.x:I instanceof p.Connector?I.getMinX():Number.MAX_VALUE),y:Math.min(O.y,I instanceof y.Shape?I.position.y:I instanceof p.Connector?I.getMinY():Number.MAX_VALUE)}},{x:Number.MAX_VALUE,y:Number.MAX_VALUE}),g=this.control.render.getModelPointByEventPoint(h.x,h.y);return new d.Point(g.x-f.x,g.y-f.y)},l}(E.PasteSelectionCommandBase);_.PasteSelectionInPositionCommand=s},9687:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CommandBase=void 0;var x=function(){function m(b){this.control=b}return m.prototype.execute=function(b){this.isPermissionsRequired&&this.permissionsProvider.lockPermissions();var y,E=this.getState();return this.isPermissionsRequired&&this.permissionsProvider.unlockPermissions(),!!E.enabled&&(this.control.beginUpdate(),y=this.isPermissionsRequired?this.executeWithPermissions(E,b):this.executeCore(E,b),this.control.endUpdate(),y&&this.updateControlState(),y)},m.prototype.executeWithPermissions=function(b,E){var y=!1;return this.permissionsProvider.beginStorePermissions(),this.control.history.beginTransaction(),y=this.executeCore(b,E),this.permissionsProvider.isStoredPermissionsGranted()||(this.permissionsProvider.lockPermissions(),this.control.history.undoTransaction(),this.permissionsProvider.unlockPermissions(),y=!1),this.control.history.endTransaction(),this.permissionsProvider.endStorePermissions(),y},m.prototype.updateControlState=function(){this.lockInputPositionUpdating()||this.control.selection.inputPosition.reset(),this.lockUIUpdating()||this.control.barManager.updateItemsState()},Object.defineProperty(m.prototype,"permissionsProvider",{get:function(){return this.control&&this.control.permissionsProvider},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isPermissionsRequired",{get:function(){return!1},enumerable:!1,configurable:!0}),m.prototype.lockUIUpdating=function(){return!1},m.prototype.lockInputPositionUpdating=function(){return!1},m}();_.CommandBase=x},7156:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CommandManager=_.DiagramCommand=void 0;var m,ge,b=x(264),E=x(6679),y=x(3614),p=x(6596),d=x(4845),s=x(4378),a=x(7607),l=x(3411),u=x(7480),h=x(4077),f=x(6106),g=x(1649),O=x(3166),I=x(8700),D=x(2301),C=x(7306),w=x(2452),P=x(2153),k=x(375),A=x(4503),R=x(7550),M=x(7649),L=x(1813),H=x(3690),j=x(2276),U=x(1203),K=x(5827),q=x(2664),Y=x(4200),W=x(1239),z=x(4624),Z=x(3591),se=x(30),re=x(5925),Q=x(4522),G=x(9538),ie=x(125),ae=x(7004),me=x(9427),be=x(9031),Ce=x(6049),ve=x(4999),ee=x(4419),oe=x(8016),te=x(72),ce=x(6619),fe=x(7795),ye=x(9970),xe=x(4281),Se=x(437),we=x(5830),Fe=x(9158),Ge=x(962),Ve=x(4643),Rt=x(4681),Gt=x(2217),ci=x(5010),gs=x(554),ms=x(7826),_s=x(7717);(ge=m=_.DiagramCommand||(_.DiagramCommand={}))[ge.Undo=0]="Undo",ge[ge.Redo=1]="Redo",ge[ge.Cut=2]="Cut",ge[ge.Copy=3]="Copy",ge[ge.Paste=4]="Paste",ge[ge.PasteInPosition=5]="PasteInPosition",ge[ge.SelectAll=6]="SelectAll",ge[ge.Delete=7]="Delete",ge[ge.Import=8]="Import",ge[ge.ImportBPMN=9]="ImportBPMN",ge[ge.Export=10]="Export",ge[ge.ExportSvg=11]="ExportSvg",ge[ge.ExportPng=12]="ExportPng",ge[ge.ExportJpg=13]="ExportJpg",ge[ge.BindDocument=14]="BindDocument",ge[ge.UnbindDocument=15]="UnbindDocument",ge[ge.Bold=16]="Bold",ge[ge.Italic=17]="Italic",ge[ge.Underline=18]="Underline",ge[ge.FontName=19]="FontName",ge[ge.FontSize=20]="FontSize",ge[ge.FontColor=21]="FontColor",ge[ge.FillColor=22]="FillColor",ge[ge.StrokeColor=23]="StrokeColor",ge[ge.TextLeftAlign=24]="TextLeftAlign",ge[ge.TextCenterAlign=25]="TextCenterAlign",ge[ge.TextRightAlign=26]="TextRightAlign",ge[ge.ConnectorLineOption=27]="ConnectorLineOption",ge[ge.ConnectorStartLineEnding=28]="ConnectorStartLineEnding",ge[ge.ConnectorEndLineEnding=29]="ConnectorEndLineEnding",ge[ge.BringToFront=30]="BringToFront",ge[ge.SendToBack=31]="SendToBack",ge[ge.MoveLeft=32]="MoveLeft",ge[ge.MoveStepLeft=33]="MoveStepLeft",ge[ge.MoveRight=34]="MoveRight",ge[ge.MoveStepRight=35]="MoveStepRight",ge[ge.MoveUp=36]="MoveUp",ge[ge.MoveStepUp=37]="MoveStepUp",ge[ge.MoveDown=38]="MoveDown",ge[ge.MoveStepDown=39]="MoveStepDown",ge[ge.CloneLeft=40]="CloneLeft",ge[ge.CloneRight=41]="CloneRight",ge[ge.CloneUp=42]="CloneUp",ge[ge.CloneDown=43]="CloneDown",ge[ge.AutoLayoutTree=44]="AutoLayoutTree",ge[ge.AutoLayoutFlow=45]="AutoLayoutFlow",ge[ge.AutoLayoutTreeVertical=46]="AutoLayoutTreeVertical",ge[ge.AutoLayoutTreeHorizontal=47]="AutoLayoutTreeHorizontal",ge[ge.AutoLayoutLayeredVertical=48]="AutoLayoutLayeredVertical",ge[ge.AutoLayoutLayeredHorizontal=49]="AutoLayoutLayeredHorizontal",ge[ge.Lock=50]="Lock",ge[ge.Unlock=51]="Unlock",ge[ge.Units=52]="Units",ge[ge.ViewUnits=53]="ViewUnits",ge[ge.PageSize=54]="PageSize",ge[ge.PageLandscape=55]="PageLandscape",ge[ge.PageColor=56]="PageColor",ge[ge.GridSize=57]="GridSize",ge[ge.ShowGrid=58]="ShowGrid",ge[ge.SnapToGrid=59]="SnapToGrid",ge[ge.ZoomLevel=60]="ZoomLevel",ge[ge.Fullscreen=61]="Fullscreen",ge[ge.ToggleSimpleView=62]="ToggleSimpleView",ge[ge.ToggleReadOnly=63]="ToggleReadOnly",ge[ge.EditShapeImage=64]="EditShapeImage",ge[ge.FitToScreen=65]="FitToScreen",ge[ge.SwitchAutoZoom=66]="SwitchAutoZoom",ge[ge.ToggleAutoZoom=67]="ToggleAutoZoom",ge[ge.FitToWidth=68]="FitToWidth",ge[ge.ZoomLevelItems=69]="ZoomLevelItems",ge[ge.GridSizeItems=70]="GridSizeItems",ge[ge.PageSizeItems=71]="PageSizeItems",ge[ge.ImportXML=72]="ImportXML",ge[ge.InsertShapeImage=73]="InsertShapeImage",ge[ge.DeleteShapeImage=74]="DeleteShapeImage",ge[ge.StrokeStyle=75]="StrokeStyle",ge[ge.StrokeWidth=76]="StrokeWidth",ge[ge.AutoLayoutTreeVerticalBottomToTop=77]="AutoLayoutTreeVerticalBottomToTop",ge[ge.AutoLayoutTreeHorizontalRightToLeft=78]="AutoLayoutTreeHorizontalRightToLeft",ge[ge.AutoLayoutLayeredVerticalBottomToTop=79]="AutoLayoutLayeredVerticalBottomToTop",ge[ge.AutoLayoutLayeredHorizontalRightToLeft=80]="AutoLayoutLayeredHorizontalRightToLeft",ge[ge.Zoom25=81]="Zoom25",ge[ge.Zoom50=82]="Zoom50",ge[ge.Zoom75=83]="Zoom75",ge[ge.Zoom100=84]="Zoom100",ge[ge.Zoom125=85]="Zoom125",ge[ge.Zoom150=86]="Zoom150",ge[ge.Zoom200=87]="Zoom200",ge[ge.AutoZoomToContent=88]="AutoZoomToContent",ge[ge.AutoZoomToWidth=89]="AutoZoomToWidth",ge[ge.ZoomLevelInPercentage=90]="ZoomLevelInPercentage",ge[ge.ConnectorRoutingMode=91]="ConnectorRoutingMode";var ui=function(){function ge(Re){this.commands={},this.shortcutsToCommand={},this.lastCommandsChain=[],this.executingCommandsChain=[],this.executingCommandCounter=0,this.isPublicApiCall=!1,this.createCommand(Re,m.Undo,E.UndoCommand,P.ModifierKey.Ctrl|P.KeyCode.Key_z,P.ModifierKey.Meta|P.KeyCode.Key_z),this.createCommand(Re,m.Redo,y.RedoCommand,P.ModifierKey.Ctrl|P.KeyCode.Key_y,P.ModifierKey.Ctrl|P.ModifierKey.Shift|P.KeyCode.Key_z,P.ModifierKey.Meta|P.ModifierKey.Shift|P.KeyCode.Key_z),this.createCommand(Re,m.Cut,q.CutSelectionCommand,P.KeyCode.Key_x|P.ModifierKey.Ctrl,P.KeyCode.Key_x|P.ModifierKey.Meta,P.KeyCode.Delete|P.ModifierKey.Shift),this.createCommand(Re,m.Copy,K.CopySelectionCommand,P.KeyCode.Key_c|P.ModifierKey.Ctrl,P.KeyCode.Key_c|P.ModifierKey.Meta,P.KeyCode.Insert|P.ModifierKey.Ctrl),this.createCommand(Re,m.Paste,Y.PasteSelectionCommand),this.createCommand(Re,m.PasteInPosition,Se.PasteSelectionInPositionCommand),this.createCommand(Re,m.SelectAll,w.SelectAllCommand,P.KeyCode.Key_a|P.ModifierKey.Ctrl,P.KeyCode.Key_a|P.ModifierKey.Meta),this.createCommand(Re,m.Delete,b.DeleteCommand,P.KeyCode.Delete,P.KeyCode.Backspace),this.createCommand(Re,m.Import,p.ImportCommand),this.createCommand(Re,m.ImportBPMN,W.ImportBPMNCommand),this.createCommand(Re,m.ImportXML,we.ImportXMLCommand),this.createCommand(Re,m.Export,d.ExportCommand),this.createCommand(Re,m.ExportSvg,j.ExportSvgCommand),this.createCommand(Re,m.ExportPng,H.ExportPngCommand),this.createCommand(Re,m.ExportJpg,U.ExportJpgCommand),this.createCommand(Re,m.BindDocument,G.BindDocumentCommand),this.createCommand(Re,m.UnbindDocument,ie.UnbindDocumentCommand),this.createCommand(Re,m.Bold,s.ToggleFontBoldCommand,P.ModifierKey.Ctrl|P.KeyCode.Key_b,P.ModifierKey.Meta|P.KeyCode.Key_b),this.createCommand(Re,m.Italic,a.ToggleFontItalicCommand,P.ModifierKey.Ctrl|P.KeyCode.Key_i,P.ModifierKey.Meta|P.KeyCode.Key_i),this.createCommand(Re,m.Underline,l.ToggleFontUnderlineCommand,P.ModifierKey.Ctrl|P.KeyCode.Key_u,P.ModifierKey.Meta|P.KeyCode.Key_u),this.createCommand(Re,m.FontName,u.ChangeFontNameCommand),this.createCommand(Re,m.FontSize,h.ChangeFontSizeCommand),this.createCommand(Re,m.FontColor,f.ChangeFontColorCommand),this.createCommand(Re,m.FillColor,g.ChangeFillColorCommand),this.createCommand(Re,m.StrokeColor,O.ChangeStrokeColorCommand),this.createCommand(Re,m.StrokeStyle,Ve.ChangeStrokeStyleCommand),this.createCommand(Re,m.StrokeWidth,Rt.ChangeStrokeWidthCommand),this.createCommand(Re,m.TextLeftAlign,I.TextLeftAlignCommand),this.createCommand(Re,m.TextCenterAlign,I.TextCenterAlignCommand),this.createCommand(Re,m.TextRightAlign,I.TextRightAlignCommand),this.createCommand(Re,m.ConnectorLineOption,C.ChangeConnectorLineOptionCommand),this.createCommand(Re,m.ConnectorStartLineEnding,D.ChangeConnectorStartLineEndingCommand),this.createCommand(Re,m.ConnectorEndLineEnding,D.ChangeConnectorEndLineEndingCommand),this.createCommand(Re,m.BringToFront,Z.BringToFrontCommand),this.createCommand(Re,m.SendToBack,z.SendToBackCommand),this.createCommand(Re,m.MoveLeft,re.MoveLeftCommand,P.ModifierKey.Ctrl|P.KeyCode.Left,P.ModifierKey.Ctrl|P.ModifierKey.Shift|P.KeyCode.Left),this.createCommand(Re,m.MoveRight,re.MoveRightCommand,P.ModifierKey.Ctrl|P.KeyCode.Right,P.ModifierKey.Ctrl|P.ModifierKey.Shift|P.KeyCode.Right),this.createCommand(Re,m.MoveUp,re.MoveUpCommand,P.ModifierKey.Ctrl|P.KeyCode.Up,P.ModifierKey.Ctrl|P.ModifierKey.Shift|P.KeyCode.Up),this.createCommand(Re,m.MoveDown,re.MoveDownCommand,P.ModifierKey.Ctrl|P.KeyCode.Down,P.ModifierKey.Ctrl|P.ModifierKey.Shift|P.KeyCode.Down),this.createCommand(Re,m.MoveStepLeft,re.MoveStepLeftCommand,P.KeyCode.Left,P.ModifierKey.Shift|P.KeyCode.Left),this.createCommand(Re,m.MoveStepRight,re.MoveStepRightCommand,P.KeyCode.Right,P.ModifierKey.Shift|P.KeyCode.Right),this.createCommand(Re,m.MoveStepUp,re.MoveStepUpCommand,P.KeyCode.Up,P.ModifierKey.Shift|P.KeyCode.Up),this.createCommand(Re,m.MoveStepDown,re.MoveStepDownCommand,P.KeyCode.Down,P.ModifierKey.Shift|P.KeyCode.Down),this.createCommand(Re,m.CloneLeft,ve.CloneLeftCommand,P.ModifierKey.Alt|P.KeyCode.Left,P.ModifierKey.Alt|P.ModifierKey.Shift|P.KeyCode.Left),this.createCommand(Re,m.CloneRight,ve.CloneRightCommand,P.ModifierKey.Alt|P.KeyCode.Right,P.ModifierKey.Alt|P.ModifierKey.Shift|P.KeyCode.Right),this.createCommand(Re,m.CloneUp,ve.CloneUpCommand,P.ModifierKey.Alt|P.KeyCode.Up,P.ModifierKey.Alt|P.ModifierKey.Shift|P.KeyCode.Up),this.createCommand(Re,m.CloneDown,ve.CloneDownCommand,P.ModifierKey.Alt|P.KeyCode.Down,P.ModifierKey.Alt|P.ModifierKey.Shift|P.KeyCode.Down),this.createCommand(Re,m.Lock,be.LockCommand),this.createCommand(Re,m.Unlock,Ce.UnLockCommand),this.createCommand(Re,m.AutoLayoutTree,k.AutoLayoutTreeVerticalCommand),this.createCommand(Re,m.AutoLayoutFlow,se.AutoLayoutLayeredHorizontalCommand),this.createCommand(Re,m.Units,ee.ChangeUnitsCommand),this.createCommand(Re,m.ViewUnits,ee.ChangeViewUnitsCommand),this.createCommand(Re,m.PageSize,L.ChangePageSizeCommand),this.createCommand(Re,m.PageLandscape,M.ChangePageLandscapeCommand),this.createCommand(Re,m.PageColor,oe.ChangePageColorCommand),this.createCommand(Re,m.GridSize,R.ChangeGridSizeCommand),this.createCommand(Re,m.ShowGrid,te.ChangeShowGridCommand),this.createCommand(Re,m.SnapToGrid,A.ChangeSnapToGridCommand),this.createCommand(Re,m.ZoomLevel,Q.ChangeZoomLevelCommand),this.createCommand(Re,m.ZoomLevelInPercentage,Q.ChangeZoomLevelInPercentageCommand),this.createCommand(Re,m.AutoLayoutTreeVertical,k.AutoLayoutTreeVerticalCommand),this.createCommand(Re,m.AutoLayoutTreeVerticalBottomToTop,Gt.AutoLayoutTreeVerticalBottomToTopCommand),this.createCommand(Re,m.AutoLayoutTreeHorizontal,ae.AutoLayoutTreeHorizontalCommand),this.createCommand(Re,m.AutoLayoutTreeHorizontalRightToLeft,ci.AutoLayoutTreeHorizontalRightToLeftCommand),this.createCommand(Re,m.AutoLayoutLayeredVertical,me.AutoLayoutLayeredVerticalCommand),this.createCommand(Re,m.AutoLayoutLayeredVerticalBottomToTop,gs.AutoLayoutLayeredVerticalBottomToTopCommand),this.createCommand(Re,m.AutoLayoutLayeredHorizontal,se.AutoLayoutLayeredHorizontalCommand),this.createCommand(Re,m.AutoLayoutLayeredHorizontalRightToLeft,ms.AutoLayoutLayeredHorizontalRightToLeftCommand),this.createCommand(Re,m.Fullscreen,ce.ToggleFullscreenCommand,P.KeyCode.F11),this.createCommand(Re,m.ToggleSimpleView,fe.ToggleSimpleViewCommand),this.createCommand(Re,m.ToggleReadOnly,ye.ToggleReadOnlyCommand),this.createCommand(Re,m.InsertShapeImage,Fe.InsertShapeImageCommand),this.createCommand(Re,m.EditShapeImage,xe.EditShapeImageCommand),this.createCommand(Re,m.DeleteShapeImage,Ge.DeleteShapeImageCommand),this.createCommand(Re,m.FitToScreen,Q.FitToScreenCommand),this.createCommand(Re,m.FitToWidth,Q.FitToWidthCommand),this.createCommand(Re,m.SwitchAutoZoom,Q.SwitchAutoZoomCommand),this.createCommand(Re,m.ToggleAutoZoom,Q.ToggleAutoZoomCommand),this.createCommand(Re,m.ZoomLevelItems,Q.ChangeZoomLevelItemsCommand),this.createCommand(Re,m.GridSizeItems,R.ChangeGridSizeItemsCommand),this.createCommand(Re,m.PageSizeItems,L.ChangePageSizeItemsCommand),this.createCommand(Re,m.Zoom25,Q.ChangeZoomLevelTo25Command),this.createCommand(Re,m.Zoom50,Q.ChangeZoomLevelTo50Command),this.createCommand(Re,m.Zoom75,Q.ChangeZoomLevelTo75Command),this.createCommand(Re,m.Zoom100,Q.ChangeZoomLevelTo100Command),this.createCommand(Re,m.Zoom125,Q.ChangeZoomLevelTo125Command),this.createCommand(Re,m.Zoom150,Q.ChangeZoomLevelTo150Command),this.createCommand(Re,m.Zoom200,Q.ChangeZoomLevelTo200Command),this.createCommand(Re,m.AutoZoomToContent,Q.ToggleAutoZoomToContentCommand),this.createCommand(Re,m.AutoZoomToWidth,Q.ToggleAutoZoomToWidthCommand),this.createCommand(Re,m.ConnectorRoutingMode,_s.ChangeConnectorRoutingModeCommand)}return ge.prototype.getCommand=function(Re){return this.commands[Re]},ge.prototype.beforeExecuting=function(Re){this.executingCommandsChain.push(Re),this.executingCommandCounter++},ge.prototype.afterExecuting=function(){this.executingCommandCounter--,0===this.executingCommandCounter&&(this.lastCommandsChain=this.executingCommandsChain,this.executingCommandsChain=[])},ge.prototype.processShortcut=function(Re){var xn=this.shortcutsToCommand[Re];return!!xn&&xn.execute()},ge.prototype.processPaste=function(Re){var xn=this.getCommand(m.Paste);return xn&&xn.isEnabled()&&xn.execute(Re),!0},ge.prototype.notifySelectionChanged=function(Re){this.lastCommandsChain=[]},ge.prototype.notifyScrollPositionChanged=function(){},ge.prototype.createCommand=function(Re,xn,vs){for(var Jo=[],sa=3;sa<arguments.length;sa++)Jo[sa-3]=arguments[sa];this.commands[xn]=new vs(Re);for(var ql=0;ql<Jo.length;ql++){var Cd=Jo[ql];"number"==typeof Cd&&(this.shortcutsToCommand[Cd]=this.commands[xn])}},ge}();_.CommandManager=ui},2102:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleCommandState=void 0,_.SimpleCommandState=function(m,b,E,y,p){this.visible=!0,this.denyUpdateValue=!1,this.enabled=m,this.value=b,this.items=y,this.visible=p,this.defaultValue=E}},264:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteCommand=void 0;var E=x(4867),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){var s=this.control.selection.getSelectedItems();return p.prototype.isEnabled.call(this)&&s.length&&(s.length>1||this.permissionsProvider.canDeleteItems(s))},d.prototype.executeCore=function(s){var a=this.control.selection.getSelectedItems(!0,!0);return this.permissionsProvider.beginDeleteItems(a),E.ModelUtils.deleteSelection(this.control.history,this.control.model,this.control.selection),this.permissionsProvider.endDeleteItems(),!0},Object.defineProperty(d.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),d}(x(9741).SimpleCommandBase);_.DeleteCommand=y},3614:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.RedoCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.executeCore=function(d){return this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.control.history.redo(),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas(),!0},p.prototype.isEnabled=function(){return y.prototype.isEnabled.call(this)&&this.control.history.canRedo()},p}(x(9741).SimpleCommandBase);_.RedoCommand=E},2452:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.SelectAllCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p.prototype.executeCore=function(d,s){var a=[];return this.control.model.iterateItems(function(l){return a.push(l.key)}),this.control.selection.set(a),!0},p}(x(9741).SimpleCommandBase);_.SelectAllCommand=E},6679:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.UndoCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.executeCore=function(d){return this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.control.history.undo(),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas(),!0},p.prototype.isEnabled=function(){return y.prototype.isEnabled.call(this)&&this.control.history.canUndo()},p}(x(9741).SimpleCommandBase);_.UndoCommand=E},9538:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.BindDocumentCommand=void 0;var E=x(3503),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabledInReadOnlyMode=function(){return!0},d.prototype.executeCore=function(s,a){if(!a||!Array.isArray(a.nodeDataSource))throw Error("Format exception");return this.performImportData(a),this.control.updateLayout(!0),!0},d.prototype.performImportData=function(s){var a=this.control.createDocumentDataSource(s.nodeDataSource,s.edgeDataSource,s.dataParameters,s.nodeDataImporter,s.edgeDataImporter);this.control.beginUpdateCanvas(),this.permissionsProvider.lockPermissions();var l=new E.DataLayoutParameters(this.control.settings,s.layoutParameters);a.createModelItems(this.control.history,this.control.model,this.control.shapeDescriptionManager,this.control.selection,l,this.control.settings.snapToGrid,this.control.settings.gridSize,this.control.measurer),this.permissionsProvider.unlockPermissions(),this.control.endUpdateCanvas()},d}(x(9741).SimpleCommandBase);_.BindDocumentCommand=y},125:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.UnbindDocumentCommand=void 0;var E=x(4867),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabledInReadOnlyMode=function(){return!0},d.prototype.executeCore=function(s){return this.permissionsProvider.lockPermissions(),this.control.deleteDocumentDataSource(),E.ModelUtils.deleteAllItems(this.control.history,this.control.model,this.control.selection),this.control.history.clear(),this.permissionsProvider.unlockPermissions(),!0},d}(x(9741).SimpleCommandBase);_.UnbindDocumentCommand=y},4845:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportCommand=void 0;var E=x(5885),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.executeCore=function(s,a){return a((new E.Exporter).export(this.control.model)),!0},d}(x(1081).ExportImportCommandBase);_.ExportCommand=y},4012:function(J,_,x){var m,b=this&&this.__extends||(m=function(f,g){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,I){O.__proto__=I}||function(O,I){for(var D in I)I.hasOwnProperty(D)&&(O[D]=I[D])})(f,g)},function(f,g){function O(){this.constructor=f}m(f,g),f.prototype=null===g?Object.create(g):(O.prototype=g.prototype,new O)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportImageCommand=void 0;var E=x(8693),y=x(3872),p=x(1081),d=x(5885),s=x(1114),a=x(1733),l=x(6078),u=x(7176),h=function(f){function g(O){var I=f.call(this,O)||this;return I.exporter=new d.Exporter,I}return b(g,f),g.prototype.isEnabled=function(){return!u.ImageCache.instance.hasNonLoadedImages()},g.prototype.executeCore=function(O,I){var D=this;try{var C=this.getExportManager();this.getExportFunc()(this.control.model.size.clone(),this.control.model.pageColor,C,function(w){I(w,D.getExtension()),D.tryDispose()},this.control.settings.useCanvgForExportToImage)}catch(w){throw this.tryDispose(),w}return!0},g.prototype.getExportManager=function(){var O=this.getOrCreateMeasurer(),I=this.control.render&&this.control.render.items||this.createItemsManager(O);return this.exportManager||(this.exportManager=new y.CanvasExportManager(I.itemsContainer,O,this.control.instanceId))},g.prototype.createItemsManager=function(O){this.svgElement=s.RenderHelper.createSvgElement(document.body,!0);var I=new E.CanvasItemsManager(this.svgElement,1,new l.ExportDOMManipulator(O),this.control.instanceId);return this.control.modelManipulator.onModelChanged.add(I),this.control.modelManipulator.commitItemsCreateChanges(),I},g.prototype.tryDispose=function(){this.svgElement&&(document.body.removeChild(this.svgElement),delete this.svgElement),this.tempMeasurer&&(this.tempMeasurer.clean(),this.tempMeasurer=void 0),this.exportManager=void 0},g.prototype.getOrCreateMeasurer=function(){return this.control.measurer||(this.tempMeasurer=new a.TextMeasurer(document.body))},g}(p.ExportImportCommandBase);_.ExportImageCommand=h},1081:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportImportCommandBase=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p}(x(9741).SimpleCommandBase);_.ExportImportCommandBase=E},1203:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportJpgCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getExtension=function(){return"jpg"},p.prototype.getExportFunc=function(){return this.exporter.exportJpg},p}(x(4012).ExportImageCommand);_.ExportJpgCommand=E},3690:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportPngCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getExtension=function(){return"png"},p.prototype.getExportFunc=function(){return this.exporter.exportPng},p}(x(4012).ExportImageCommand);_.ExportPngCommand=E},2276:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportSvgCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getExtension=function(){return"svg"},p.prototype.getExportFunc=function(){return this.exporter.exportSvg},p}(x(4012).ExportImageCommand);_.ExportSvgCommand=E},1239:function(J,_,x){var m,b=this&&this.__extends||(m=function(g,O){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var C in D)D.hasOwnProperty(C)&&(I[C]=D[C])})(g,O)},function(g,O){function I(){this.constructor=g}m(g,O),g.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImportBPMNCommand=void 0;var E=x(5941),y=x(4867),p=x(4145),d=x(8900),s=x(7959),a=x(9603),l=x(3477),u=x(1256),h=x(8710),f=function(g){function O(){return null!==g&&g.apply(this,arguments)||this}return b(O,g),O.prototype.executeCore=function(I,D){var C=new E.BPMNImporter(D).import();return this.updateModel(C),!0},O.prototype.updateModel=function(I){var D=this,C={},w=[],P=[];this.control.history.beginTransaction(),I.items.forEach(function(A){var R=new p.AddShapeHistoryItem(D.getShapeDescription(A.type),new d.Point(0,0),A.text,A.key);D.control.history.addAndRedo(R),C[A.key]=R.shapeKey;var M=D.control.model.findShape(R.shapeKey);w.push(M)}),I.edges.forEach(function(A){var R=D.control.model.findShape(C[A.from]),M=D.control.model.findShape(C[A.to]),L=new a.AddConnectorHistoryItem([R.getConnectionPointPosition(0),M.getConnectionPointPosition(0)]);D.control.history.addAndRedo(L);var H=D.control.model.findConnector(L.connectorKey);D.control.history.addAndRedo(new l.AddConnectionHistoryItem(H,R,0,s.ConnectorPosition.Begin)),D.control.history.addAndRedo(new l.AddConnectionHistoryItem(H,M,0,s.ConnectorPosition.End)),P.push(H)});var k=new h.LayoutSettings;y.ModelUtils.getGraphInfoByItems(this.control.model,w,P).forEach(function(A){var R=new u.SugiyamaLayoutBuilder(k,A.graph).build(),M=y.ModelUtils.getNonGraphItems(D.control.model,A.container,R.nodeToLayout,w,P);y.ModelUtils.applyLayout(D.control.history,D.control.model,void 0,A.graph,R,M,k,D.control.settings.snapToGrid,D.control.settings.gridSize,!1)}),y.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.endTransaction()},O.prototype.getShapeDescription=function(I){return this.control.shapeDescriptionManager.get(I)},O}(x(1081).ExportImportCommandBase);_.ImportBPMNCommand=f},6596:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImportCommand=void 0;var E=x(2406),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.executeCore=function(s,a){this.permissionsProvider.lockPermissions();var u=new E.Importer(this.control.shapeDescriptionManager,a.data?a.data:a);if(!0===a.keepExistingItems)u.importItemsData(this.control.model),this.control.importItemsData();else{var h=u.import();this.control.importModel(h)}return this.permissionsProvider.unlockPermissions(),!0},d}(x(1081).ExportImportCommandBase);_.ImportCommand=y},5830:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImportXMLCommand=void 0;var E=x(780),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.executeCore=function(s,a){var l=new E.XmlImporter(this.control.shapeDescriptionManager,a).import();return this.control.importModel(l),!0},d}(x(1081).ExportImportCommandBase);_.ImportXMLCommand=y},4999:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.CloneDownCommand=_.CloneUpCommand=_.CloneRightCommand=_.CloneLeftCommand=_.CloneCommand=void 0;var E=x(4867),y=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.isEnabled=function(){var h=this.control.selection.getSelectedItems();return l.prototype.isEnabled.call(this)&&h.length&&h.length>0&&this.permissionsProvider.canAddItems(h)},u.prototype.executeCore=function(h,f){var g=E.ModelUtils.createRectangle(this.control.selection.getSelectedItems());return E.ModelUtils.cloneSelectionToOffset(this.control.history,this.control.model,void 0,this.control.selection,this.getOffsetX(g),this.getOffsetY(g)),!0},Object.defineProperty(u.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),u.prototype.getOffsetX=function(h){return 0},u.prototype.getOffsetY=function(h){return 0},u}(x(9741).SimpleCommandBase);_.CloneCommand=y;var p=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.getOffsetX=function(h){return-h.width},u}(y);_.CloneLeftCommand=p;var d=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.getOffsetX=function(h){return h.width},u}(y);_.CloneRightCommand=d;var s=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.getOffsetY=function(h){return-h.height},u}(y);_.CloneUpCommand=s;var a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.getOffsetY=function(h){return h.height},u}(y);_.CloneDownCommand=a},5925:function(J,_,x){var m,b=this&&this.__extends||(m=function(C,w){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,k){P.__proto__=k}||function(P,k){for(var A in k)k.hasOwnProperty(A)&&(P[A]=k[A])})(C,w)},function(C,w){function P(){this.constructor=C}m(C,w),C.prototype=null===w?Object.create(w):(P.prototype=w.prototype,new P)});Object.defineProperty(_,"__esModule",{value:!0}),_.MoveStepDownCommand=_.MoveDownCommand=_.MoveStepUpCommand=_.MoveUpCommand=_.MoveStepRightCommand=_.MoveRightCommand=_.MoveStepLeftCommand=_.MoveLeftCommand=_.MoveCommand=void 0;var E=x(8900),y=x(4867),p=x(9291),d=x(9741),s=x(4742),a=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.isEnabled=function(){return C.prototype.isEnabled.call(this)&&!this.control.selection.isEmpty()},w.prototype.executeCore=function(P,k){var A=this;this.control.history.beginTransaction();var R=this.control.selection,M=new s.SelectionDragHelper(this.control.history,this.control.model,this.permissionsProvider,new E.Point(0,0),R.getSelectedItems(!0));return M.initDraggingShapes(R.getSelectedShapes(!1,!0),!1),M.initDraggingConnectors(R.getSelectedConnectors(!1,!0),!1),M.move(!1,function(L){return A.getPosition(L)},function(){},function(){}),y.ModelUtils.tryUpdateModelRectangle(this.control.history,function(L,H){return M.onTryUpdateModelSize(L,H)}),this.control.history.endTransaction(),!0},Object.defineProperty(w.prototype,"isPermissionsRequired",{get:function(){return!0},enumerable:!1,configurable:!0}),w}(d.SimpleCommandBase);_.MoveCommand=a;var l=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return P.clone().offset(-p.UnitConverter.pixelsToTwips(1),0)},w}(a);_.MoveLeftCommand=l;var u=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return this.control.settings.snapToGrid?new E.Point(y.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,P.x-(this.control.settings.gridSize/2+2),!0),P.y):P.clone().offset(-this.control.settings.gridSize,0)},w}(a);_.MoveStepLeftCommand=u;var h=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return P.clone().offset(p.UnitConverter.pixelsToTwips(1),0)},w}(a);_.MoveRightCommand=h;var f=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return this.control.settings.snapToGrid?new E.Point(y.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,P.x+(this.control.settings.gridSize/2+2),!0),P.y):P.clone().offset(this.control.settings.gridSize,0)},w}(a);_.MoveStepRightCommand=f;var g=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return P.clone().offset(0,-p.UnitConverter.pixelsToTwips(1))},w}(a);_.MoveUpCommand=g;var O=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return this.control.settings.snapToGrid?new E.Point(P.x,y.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,P.y-(this.control.settings.gridSize/2+2),!1)):P.clone().offset(0,-this.control.settings.gridSize)},w}(a);_.MoveStepUpCommand=O;var I=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return P.clone().offset(0,p.UnitConverter.pixelsToTwips(1))},w}(a);_.MoveDownCommand=I;var D=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.getPosition=function(P){return this.control.settings.snapToGrid?new E.Point(P.x,y.ModelUtils.getSnappedPos(this.control.model,this.control.settings.gridSize,P.y+(this.control.settings.gridSize/2+2),!1)):P.clone().offset(0,this.control.settings.gridSize)},w}(a);_.MoveStepDownCommand=D},7550:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeGridSizeItemsCommand=_.ChangeGridSizeCommand=void 0;var E=x(9741),y=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.getValue=function(){return this.getModelUnit(this.control.settings.gridSize)},s.prototype.executeCore=function(a,l){return this.control.settings.gridSize=this.getModelUnitTwipsValue(l),!0},s.prototype.getItems=function(){var a=this;return this.control.settings.gridSizeItems.map(function(l){return{value:a.getModelUnit(l),text:a.getViewUnitText(l)}})},s}(E.SimpleCommandBase);_.ChangeGridSizeCommand=y;var p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.isEnabledInReadOnlyMode=function(){return!0},s.prototype.getValue=function(){var a=this;return this.control.settings.gridSizeItems.map(function(l){return a.getModelUnit(l)})},s.prototype.executeCore=function(a,l){var u=this;return this.control.settings.gridSizeItems=l.map(function(h){return u.getModelUnitTwipsValue(h)}),!0},s}(E.SimpleCommandBase);_.ChangeGridSizeItemsCommand=p},8016:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageColorCommand=void 0;var E=x(3499),y=x(7195),p=x(6613),d=x(13),s=function(a){function l(){return null!==a&&a.apply(this,arguments)||this}return b(l,a),l.prototype.getValue=function(){return d.ColorUtils.colorToHash(this.control.model.pageColor)},l.prototype.getDefaultValue=function(){return d.ColorUtils.colorToHash(p.DiagramModel.defaultPageColor)},l.prototype.createHistoryItems=function(u){return[new y.ChangePageColorHistoryItem(d.ColorUtils.fromString(u))]},l}(E.ChangePagePropertyCommand);_.ChangePageColorCommand=s},7649:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageLandscapeCommand=void 0;var E=x(3499),y=x(1380),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.getValue=function(){return this.control.model.pageLandscape},s.prototype.createHistoryItems=function(a){return[new y.ChangePageLandscapeHistoryItem(a)]},s}(E.ChangePagePropertyCommand);_.ChangePageLandscapeCommand=p},3499:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePagePropertyCommand=void 0;var E=x(4867),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.executeCore=function(s,a){var l=this;return this.control.history.beginTransaction(),this.createHistoryItems(a).forEach(function(u){l.control.history.addAndRedo(u)}),E.ModelUtils.tryUpdateModelRectangle(this.control.history),this.control.history.endTransaction(),!0},d.prototype.getItems=function(){return null},d}(x(9741).SimpleCommandBase);_.ChangePagePropertyCommand=y},1813:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageSizeItemsCommand=_.ChangePageSizeCommand=void 0;var E=x(3499),y=x(6353),p=x(1044),d=x(9741),s=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.getValue=function(){return this.getModelUnitSize(this.control.model.pageSize)},u.prototype.createHistoryItems=function(h){return[new p.ChangePageSizeHistoryItem(new y.Size(this.getModelUnitTwipsValue(h.width),this.getModelUnitTwipsValue(h.height)))]},u.prototype.getItems=function(){var h=this;return this.control.settings.pageSizeItems.map(function(f){return{value:h.getModelUnitSize(f.size),text:f.text.replace("{width}",h.getViewUnitText(f.size.width)).replace("{height}",h.getViewUnitText(f.size.height))}})},u.prototype.getModelUnitSize=function(h){return new y.Size(this.getModelUnit(h.width),this.getModelUnit(h.height))},u}(E.ChangePagePropertyCommand);_.ChangePageSizeCommand=s;var a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.isEnabled=function(){return!0},u.prototype.getValue=function(){var h=this;return this.control.settings.pageSizeItems.map(function(f){return{size:new y.Size(h.getModelUnit(f.width),h.getModelUnit(f.height)),text:f.text}})},u.prototype.executeCore=function(h,f){var g=this;return this.control.settings.pageSizeItems=f.map(function(O){return{size:new y.Size(g.getModelUnitTwipsValue(O.width),g.getModelUnitTwipsValue(O.height)),text:O.text}}),!0},u}(d.SimpleCommandBase);_.ChangePageSizeItemsCommand=a},72:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShowGridCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p.prototype.executeCore=function(d,s){var a=void 0===s?!this.control.settings.showGrid:!!s;return this.control.settings.showGrid!==a&&(this.control.settings.showGrid=a,!0)},p.prototype.getValue=function(){return this.control.settings.showGrid},p}(x(9741).SimpleCommandBase);_.ChangeShowGridCommand=E},4503:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeSnapToGridCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.executeCore=function(d,s){var a=void 0===s?!this.control.settings.snapToGrid:!!s;return this.control.settings.snapToGrid!==a&&(this.control.settings.snapToGrid=a,!0)},p.prototype.getValue=function(){return this.control.settings.snapToGrid},p}(x(9741).SimpleCommandBase);_.ChangeSnapToGridCommand=E},4419:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeViewUnitsCommand=_.ChangeUnitsCommand=void 0;var E=x(3499),y=x(7479),p=x(9741),d=x(6224),s=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.isEnabledInReadOnlyMode=function(){return!0},u.prototype.getValue=function(){return this.control.model.units},u.prototype.createHistoryItems=function(h){return[new y.ChangeUnitsHistoryItem(h)]},u.prototype.getItems=function(){return Object.keys(d.DiagramLocalizationService.unitItems).map(function(h){return{value:parseInt(h),text:d.DiagramLocalizationService.unitItems[h]}})},u}(E.ChangePagePropertyCommand);_.ChangeUnitsCommand=s;var a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.isEnabledInReadOnlyMode=function(){return!0},u.prototype.getValue=function(){return this.control.settings.viewUnits},u.prototype.executeCore=function(h,f){return this.control.settings.viewUnits=f,!0},u.prototype.getItems=function(){return Object.keys(d.DiagramLocalizationService.unitItems).map(function(h){return{value:parseInt(h),text:d.DiagramLocalizationService.unitItems[h]}})},u}(p.SimpleCommandBase);_.ChangeViewUnitsCommand=a},4522:function(J,_,x){var m,b=this&&this.__extends||(m=function(M,L){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,j){H.__proto__=j}||function(H,j){for(var U in j)j.hasOwnProperty(U)&&(H[U]=j[U])})(M,L)},function(M,L){function H(){this.constructor=M}m(M,L),M.prototype=null===L?Object.create(L):(H.prototype=L.prototype,new H)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleAutoZoomCommand=_.ToggleAutoZoomToWidthCommand=_.ToggleAutoZoomToContentCommand=_.SwitchAutoZoomCommand=_.FitToWidthCommand=_.FitToScreenCommand=_.ChangeZoomLevelItemsCommand=_.ChangeZoomLevelTo200Command=_.ChangeZoomLevelTo150Command=_.ChangeZoomLevelTo125Command=_.ChangeZoomLevelTo100Command=_.ChangeZoomLevelTo75Command=_.ChangeZoomLevelTo50Command=_.ChangeZoomLevelTo25Command=_.ChangeZoomLevelInPercentageCommand=_.ChangeZoomLevelCommand=void 0;var E=x(9741),y=x(240),p=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.isEnabledInReadOnlyMode=function(){return!0},L.prototype.getValue=function(){return this.control.view.getZoom()},L.prototype.executeCore=function(H,j){return this.control.settings.zoomLevel=j,this.control.settings.autoZoom=y.AutoZoomMode.Disabled,this.control.updateLayout(!0),!0},L.prototype.getItems=function(){return this.control.settings.zoomLevelItems.map(function(H){return{value:H,text:100*H+"%"}})},L}(E.SimpleCommandBase);_.ChangeZoomLevelCommand=p;var d=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.executeCore=function(H,j){return M.prototype.executeCore.call(this,H,j/100)},L.prototype.getValue=function(){return 100*this.control.view.getZoom()},L}(p);_.ChangeZoomLevelInPercentageCommand=d;var s=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.getValue=function(){return this.control.view.getZoom()===this.exactValue},L.prototype.executeCore=function(H,j){return M.prototype.executeCore.call(this,H,this.exactValue),!0},L.prototype.getItems=function(){},L}(p),a=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=.25,H}return b(L,M),L}(s);_.ChangeZoomLevelTo25Command=a;var l=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=.5,H}return b(L,M),L}(s);_.ChangeZoomLevelTo50Command=l;var u=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=.75,H}return b(L,M),L}(s);_.ChangeZoomLevelTo75Command=u;var h=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=1,H}return b(L,M),L}(s);_.ChangeZoomLevelTo100Command=h;var f=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=1.25,H}return b(L,M),L}(s);_.ChangeZoomLevelTo125Command=f;var g=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=1.5,H}return b(L,M),L}(s);_.ChangeZoomLevelTo150Command=g;var O=function(M){function L(){var H=null!==M&&M.apply(this,arguments)||this;return H.exactValue=2,H}return b(L,M),L}(s);_.ChangeZoomLevelTo200Command=O;var I=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.isEnabledInReadOnlyMode=function(){return!0},L.prototype.getValue=function(){return this.control.settings.zoomLevelItems},L.prototype.executeCore=function(H,j){return this.control.settings.zoomLevelItems=j,!0},L}(E.SimpleCommandBase);_.ChangeZoomLevelItemsCommand=I;var D=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.isEnabled=function(){return M.prototype.isEnabled.call(this)&&!!this.control.render},L.prototype.isEnabledInReadOnlyMode=function(){return!0},L.prototype.executeCore=function(H){var j=this.getZoomLevel();return this.control.settings.zoomLevel=j,this.control.settings.autoZoom=y.AutoZoomMode.Disabled,this.control.updateLayout(!0),!0},L}(E.SimpleCommandBase),C=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.getZoomLevel=function(){return this.control.render.view.getActualAutoZoomLevel(y.AutoZoomMode.FitContent)},L}(D);_.FitToScreenCommand=C;var w=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.getZoomLevel=function(){return this.control.render.view.getActualAutoZoomLevel(y.AutoZoomMode.FitToWidth)},L}(D);_.FitToWidthCommand=w;var P=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.isEnabledInReadOnlyMode=function(){return!0},L.prototype.getValue=function(){return this.control.settings.autoZoom},L.prototype.executeCore=function(H,j){return j=parseInt(j),this.control.settings.autoZoom!==j&&(j===y.AutoZoomMode.Disabled&&(this.control.settings.zoomLevel=this.control.view.getZoom()),this.control.settings.autoZoom=j,this.control.updateLayout(!0),!0)},L}(E.SimpleCommandBase);_.SwitchAutoZoomCommand=P;var k=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.getValue=function(){return this.control.settings.autoZoom===y.AutoZoomMode.FitContent},L.prototype.executeCore=function(H,j){return M.prototype.executeCore.call(this,H,y.AutoZoomMode.FitContent)},L}(P);_.ToggleAutoZoomToContentCommand=k;var A=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.getValue=function(){return this.control.settings.autoZoom===y.AutoZoomMode.FitToWidth},L.prototype.executeCore=function(H,j){return M.prototype.executeCore.call(this,H,y.AutoZoomMode.FitToWidth)},L}(P);_.ToggleAutoZoomToWidthCommand=A;var R=function(M){function L(){return null!==M&&M.apply(this,arguments)||this}return b(L,M),L.prototype.isEnabled=function(){return M.prototype.isEnabled.call(this)&&!!this.control.render},L.prototype.isEnabledInReadOnlyMode=function(){return!0},L.prototype.getValue=function(){return this.control.settings.autoZoom},L.prototype.executeCore=function(H,j){var U;return this.control.settings.autoZoom!==(U=void 0===j?this.control.settings.autoZoom===y.AutoZoomMode.Disabled?y.AutoZoomMode.FitContent:y.AutoZoomMode.Disabled:j?y.AutoZoomMode.FitContent:y.AutoZoomMode.Disabled)&&(U||(this.control.settings.zoomLevel=this.control.view.getZoom()),this.control.settings.autoZoom=U,this.control.updateLayout(!0),!0)},L}(E.SimpleCommandBase);_.ToggleAutoZoomCommand=R},6619:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleFullscreenCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p.prototype.getValue=function(){return this.control.settings.fullscreen},p.prototype.executeCore=function(d,s){return this.control.settings.fullscreen!==("boolean"==typeof s?s:!d.value)&&(this.control.settings.fullscreen=!d.value,this.control.notifyToggleFullscreen(this.control.settings.fullscreen)),!0},p}(x(9741).SimpleCommandBase);_.ToggleFullscreenCommand=E},9970:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleReadOnlyCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p.prototype.getValue=function(){return this.control.settings.readOnly},p.prototype.executeCore=function(d,s){return"boolean"==typeof s?this.control.settings.readOnly=s:void 0===s&&(this.control.settings.readOnly=!d.value),!0},p}(x(9741).SimpleCommandBase);_.ToggleReadOnlyCommand=E},7795:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleSimpleViewCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabledInReadOnlyMode=function(){return!0},p.prototype.getValue=function(){return this.control.settings.simpleView},p.prototype.executeCore=function(d,s){return"boolean"==typeof s?this.control.settings.simpleView=s:void 0===s&&(this.control.settings.simpleView=!d.value),this.control.updateLayout(!0),!0},p}(x(9741).SimpleCommandBase);_.ToggleSimpleViewCommand=E},3591:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.BringToFrontCommand=void 0;var E=x(5982),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){var s=this.control.selection.getSelectedItems();return p.prototype.isEnabled.call(this)&&s.length>0&&this.needBringToFront(s)},d.prototype.executeCore=function(s,a){var l=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedItems().forEach(function(u){var h=l.control.model.getIntersectItemsMaxZIndex(u)+1;l.control.history.addAndRedo(new E.ChangeZindexHistoryItem(u,h))}),this.control.history.endTransaction(),!0},d.prototype.needBringToFront=function(s){for(var a=this,l=function(g){var O=u.control.model.getIntersectItemsMaxZIndex(s[g]);if(O>s[g].zIndex)return{value:!0};if(O===s[g].zIndex){var I=!1;return u.control.model.getIntersectItems(s[g]).filter(function(D){return D.zIndex===s[g].zIndex}).forEach(function(D){a.control.model.getItemIndex(D)>a.control.model.getItemIndex(s[g])&&(I=!0)}),{value:I}}},u=this,h=0;h<s.length;h++){var f=l(h);if("object"==typeof f)return f.value}return!1},d}(x(9741).SimpleCommandBase);_.BringToFrontCommand=y},2301:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorEndLineEndingCommand=_.ChangeConnectorStartLineEndingCommand=void 0;var E=x(7551),y=x(4612),p=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getPropertyName=function(){return"startLineEnding"},a.prototype.getPropertyDefaultValue=function(){return y.ConnectorLineEnding.None},a}(E.ChangeConnectorPropertyCommand);_.ChangeConnectorStartLineEndingCommand=p;var d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getPropertyName=function(){return"endLineEnding"},a.prototype.getPropertyDefaultValue=function(){return y.ConnectorLineEnding.Arrow},a}(E.ChangeConnectorPropertyCommand);_.ChangeConnectorEndLineEndingCommand=d},7306:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorLineOptionCommand=void 0;var E=x(7551),y=x(4612),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.getPropertyName=function(){return"lineOption"},s.prototype.getPropertyDefaultValue=function(){return y.ConnectorLineOption.Straight},s}(E.ChangeConnectorPropertyCommand);_.ChangeConnectorLineOptionCommand=p},7551:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorPropertyCommand=void 0;var E=x(8236),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentConnectorPropertyValue(this.getPropertyName())},d.prototype.getDefaultValue=function(){return this.getPropertyDefaultValue()},d.prototype.executeCore=function(s,a){var l=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedConnectors().forEach(function(u){var h=l.getPropertyName();l.control.history.addAndRedo(new E.ChangeConnectorPropertyHistoryItem(u.key,h,a))}),this.control.selection.inputPosition.setConnectorPropertyValue(this.getPropertyName(),a),this.control.history.endTransaction(),!0},d.prototype.lockInputPositionUpdating=function(){return!0},d.prototype.isEnabled=function(){var s=this.control.selection.getSelectedConnectors();return p.prototype.isEnabled.call(this)&&s.length>0},d}(x(9741).SimpleCommandBase);_.ChangeConnectorPropertyCommand=y},7717:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorRoutingModeCommand=void 0;var E=x(9741),y=x(240),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.getValue=function(){return this.control.settings.connectorRoutingMode},s.prototype.executeCore=function(a,l){return this.control.settings.connectorRoutingMode=void 0!==l?l:y.ConnectorRoutingMode.None,!0},s}(E.SimpleCommandBase);_.ChangeConnectorRoutingModeCommand=p},1307:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeLockedCommand=void 0;var E=x(4867),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){var s=this,a=this.control.selection.getSelectedItems(!0),l=!1;return a.forEach(function(u){u.locked!==s.getLockState()&&(l=!0)}),p.prototype.isEnabled.call(this)&&l},d.prototype.executeCore=function(s,a){return E.ModelUtils.changeSelectionLocked(this.control.history,this.control.model,this.control.selection,this.getLockState()),!0},d}(x(9741).SimpleCommandBase);_.ChangeLockedCommand=y},9031:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.LockCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getLockState=function(){return!0},p}(x(1307).ChangeLockedCommand);_.LockCommand=E},4624:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.SendToBackCommand=void 0;var E=x(5982),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){var s=this.control.selection.getSelectedItems();return p.prototype.isEnabled.call(this)&&s.length>0&&this.needSendToBack(s)},d.prototype.executeCore=function(s,a){var l=this;return this.control.history.beginTransaction(),this.control.selection.getSelectedItems().forEach(function(u){var h=l.control.model.getIntersectItemsMinZIndex(u)-1;l.control.history.addAndRedo(new E.ChangeZindexHistoryItem(u,h))}),this.control.history.endTransaction(),!0},d.prototype.needSendToBack=function(s){for(var a=this,l=function(g){var O=u.control.model.getIntersectItemsMinZIndex(s[g]);if(O<s[g].zIndex)return{value:!0};if(O===s[g].zIndex){var I=!1;return u.control.model.getIntersectItems(s[g]).filter(function(D){return D.zIndex===s[g].zIndex}).forEach(function(D){a.control.model.getItemIndex(D)<a.control.model.getItemIndex(s[g])&&(I=!0)}),{value:I}}},u=this,h=0;h<s.length;h++){var f=l(h);if("object"==typeof f)return f.value}return!1},d}(x(9741).SimpleCommandBase);_.SendToBackCommand=y},6049:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.UnLockCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getLockState=function(){return!1},p}(x(1307).ChangeLockedCommand);_.UnLockCommand=E},962:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteShapeImageCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabled=function(){var d=this.getSelectedShape();return y.prototype.isEnabled.call(this)&&!d.image.isEmpty},p.prototype.executeCore=function(d,s){return y.prototype.executeCore.call(this,d,void 0)},p}(x(7650).EditShapeImageCommandBase);_.DeleteShapeImageCommand=E},4281:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.EditShapeImageCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabled=function(){var d=this.getSelectedShape();return y.prototype.isEnabled.call(this)&&!d.image.isEmpty},p}(x(7650).EditShapeImageCommandBase);_.EditShapeImageCommand=E},7650:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.EditShapeImageCommandBase=void 0;var E=x(8210),y=function(p){function d(){return null!==p&&p.apply(this,arguments)||this}return b(d,p),d.prototype.isEnabled=function(){var s=this.getSelectedShape();return p.prototype.isEnabled.call(this)&&!!s&&!s.locked&&s.enableImage&&s.allowEditImage},d.prototype.getValue=function(){var s=this.getSelectedShape();return s?s.image.exportUrl:void 0},d.prototype.getSelectedShape=function(){var s=this.control.selection.getSelectedShapes(!0);return 1===s.length?s[0]:void 0},d.prototype.executeCore=function(s,a){this.control.history.beginTransaction();var l=this.control.selection.getSelectedShapes(!1);return this.control.history.addAndRedo(new E.ChangeShapeImageHistoryItem(l[0],a)),this.control.history.endTransaction(),!0},d}(x(9741).SimpleCommandBase);_.EditShapeImageCommandBase=y},9158:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.InsertShapeImageCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.isEnabled=function(){var d=this.getSelectedShape();return y.prototype.isEnabled.call(this)&&d.image.isEmpty},p}(x(7650).EditShapeImageCommandBase);_.InsertShapeImageCommand=E},9741:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.SimpleCommandBase=void 0;var E=x(9687),y=x(2102),p=x(4867),d=x(6224),s=function(a){function l(){return null!==a&&a.apply(this,arguments)||this}return b(l,a),l.prototype.getState=function(){return new y.SimpleCommandState(this.isEnabled(),this.getValue(),this.getDefaultValue(),this.getItems(),this.isVisible())},l.prototype.isVisible=function(){return!0},l.prototype.isEnabled=function(){return!this.control.settings.readOnly||this.isEnabledInReadOnlyMode()},l.prototype.isEnabledInReadOnlyMode=function(){return!1},l.prototype.getValue=function(){},l.prototype.getDefaultValue=function(){},l.prototype.getItems=function(){},l.prototype.getModelUnit=function(u){return p.ModelUtils.getlUnitValue(this.control.model.units,u)},l.prototype.getModelUnitText=function(u){return p.ModelUtils.getUnitText(this.control.model.units,d.DiagramLocalizationService.unitItems,d.DiagramLocalizationService.formatUnit,u)},l.prototype.getModelUnitTwipsValue=function(u){return p.ModelUtils.getTwipsValue(this.control.model.units,u)},l.prototype.getViewUnit=function(u){return p.ModelUtils.getlUnitValue(this.control.settings.viewUnits,u)},l.prototype.getViewUnitText=function(u){return p.ModelUtils.getUnitText(this.control.settings.viewUnits,d.DiagramLocalizationService.unitItems,d.DiagramLocalizationService.formatUnit,u)},l.prototype.getViewUnitTwipsValue=function(u){return p.ModelUtils.getTwipsValue(this.control.settings.viewUnits,u)},l}(E.CommandBase);_.SimpleCommandBase=s},1649:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeFillColorCommand=void 0;var E=x(5726),y=x(13),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.processParameter=function(a){return y.ColorUtils.stringToHash(a)},s.prototype.getStyleProperty=function(){return"fill"},s}(E.ChangeStylePropertyCommand);_.ChangeFillColorCommand=p},6106:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeFontColorCommand=void 0;var E=x(2722),y=x(13),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.processParameter=function(a){return y.ColorUtils.stringToHash(a)},s.prototype.getStyleProperty=function(){return"fill"},s}(E.ChangeStyleTextPropertyCommand);_.ChangeFontColorCommand=p},7480:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeFontNameCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"font-family"},p}(x(2722).ChangeStyleTextPropertyCommand);_.ChangeFontNameCommand=E},4077:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeFontSizeCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"font-size"},p}(x(2722).ChangeStyleTextPropertyCommand);_.ChangeFontSizeCommand=E},3166:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStrokeColorCommand=void 0;var E=x(5726),y=x(13),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.processParameter=function(a){return y.ColorUtils.stringToHash(a)},s.prototype.getStyleProperty=function(){return"stroke"},s}(E.ChangeStylePropertyCommand);_.ChangeStrokeColorCommand=p},4643:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStrokeStyleCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"stroke-dasharray"},p}(x(5726).ChangeStylePropertyCommand);_.ChangeStrokeStyleCommand=E},4681:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStrokeWidthCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"stroke-width"},p}(x(5726).ChangeStylePropertyCommand);_.ChangeStrokeWidthCommand=E},5726:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStylePropertyCommand=void 0;var E=x(521),y=x(4634),p=x(1552),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentStylePropertyValue(this.getStyleProperty())},a.prototype.getStyleObj=function(l){return l.style},a.prototype.getDefaultStyleObj=function(){return new p.Style},a.prototype.createHistoryItem=function(l,u,h){return new y.ChangeStyleHistoryItem(l.key,u,h)},a.prototype.updateInputPosition=function(l){this.control.selection.inputPosition.setStylePropertyValue(this.getStyleProperty(),l)},a}(E.ChangeStylePropertyCommandBase);_.ChangeStylePropertyCommand=d},521:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStylePropertyCommandBase=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.executeCore=function(d,s){var a=this;this.control.history.beginTransaction();var l=this.control.selection.getSelectedItems();return s=this.processParameter(s),l.forEach(function(u){var h=a.getStyleProperty();a.control.history.addAndRedo(a.createHistoryItem(u,h,s))}),this.updateInputPosition(s),this.control.history.endTransaction(),!0},p.prototype.getDefaultValue=function(){return this.getDefaultStyleObj()[this.getStyleProperty()]},p.prototype.processParameter=function(d){return d},p}(x(8351).StylePropertyCommandBase);_.ChangeStylePropertyCommandBase=E},2722:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStyleTextPropertyCommand=void 0;var E=x(521),y=x(926),p=x(1552),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty())},a.prototype.getStyleObj=function(l){return l.styleText},a.prototype.getDefaultStyleObj=function(){return new p.TextStyle},a.prototype.createHistoryItem=function(l,u,h){return new y.ChangeStyleTextHistoryItem(l.key,u,h)},a.prototype.updateInputPosition=function(l){this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(),l)},a}(E.ChangeStylePropertyCommandBase);_.ChangeStyleTextPropertyCommand=d},8700:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.TextRightAlignCommand=_.TextCenterAlignCommand=_.TextLeftAlignCommand=_.ChangeTextAlignCommand=void 0;var E=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getStyleProperty=function(){return"text-anchor"},a}(x(6980).ToggleStyleTextPropertyCommand);_.ChangeTextAlignCommand=E;var y=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getStylePropertyValue=function(){return"start"},a}(E);_.TextLeftAlignCommand=y;var p=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getStylePropertyValue=function(){return"middle"},a}(E);_.TextCenterAlignCommand=p;var d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getStylePropertyValue=function(){return"end"},a}(E);_.TextRightAlignCommand=d},8351:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.StylePropertyCommandBase=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.lockInputPositionUpdating=function(){return!0},p}(x(9741).SimpleCommandBase);_.StylePropertyCommandBase=E},4378:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleFontBoldCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"font-weight"},p.prototype.getStylePropertyValue=function(){return"bold"},p}(x(6980).ToggleStyleTextPropertyCommand);_.ToggleFontBoldCommand=E},7607:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleFontItalicCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"font-style"},p.prototype.getStylePropertyValue=function(){return"italic"},p}(x(6980).ToggleStyleTextPropertyCommand);_.ToggleFontItalicCommand=E},3411:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleFontUnderlineCommand=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.getStyleProperty=function(){return"text-decoration"},p.prototype.getStylePropertyValue=function(){return"underline"},p}(x(6980).ToggleStyleTextPropertyCommand);_.ToggleFontUnderlineCommand=E},6980:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleStyleTextPropertyCommand=void 0;var E=x(8351),y=x(926),p=x(1552),d=function(s){function a(){return null!==s&&s.apply(this,arguments)||this}return b(a,s),a.prototype.getValue=function(){return this.control.selection.inputPosition.getCurrentTextStylePropertyValue(this.getStyleProperty())===this.getStylePropertyValue()},a.prototype.executeCore=function(l){var u=this;this.control.history.beginTransaction();var h=this.getStyleProperty(),f=l.value?p.TextStyle.defaultInstance[h]:this.getStylePropertyValue();return this.control.selection.getSelectedItems().forEach(function(g){u.control.history.addAndRedo(new y.ChangeStyleTextHistoryItem(g.key,h,f))}),this.control.selection.inputPosition.setTextStylePropertyValue(this.getStyleProperty(),f),this.control.history.endTransaction(),!0},a.prototype.getStyleObj=function(l){return l.styleText},a.prototype.getDefaultStyleObj=function(){return new p.TextStyle},a}(E.StylePropertyCommandBase);_.ToggleStyleTextPropertyCommand=d},5035:function(J,_){var x,m=this&&this.__extends||(x=function(p,d){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}x(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.DataSourceEdgeDataImporter=_.DataSourceNodeDataImporter=_.DataSourceItemDataImporter=void 0;var b=function(){this.getKey=function(p){return p.id},this.setKey=function(p,d){p.id=d},this.getCustomData=void 0,this.setCustomData=void 0,this.getLocked=void 0,this.setLocked=void 0,this.getStyle=void 0,this.setStyle=void 0,this.getStyleText=void 0,this.setStyleText=void 0,this.getZIndex=void 0,this.setZIndex=void 0};_.DataSourceItemDataImporter=b;var E=function(p){function d(){var s=null!==p&&p.apply(this,arguments)||this;return s.getType=void 0,s.setType=void 0,s.getText=void 0,s.setText=void 0,s.getImage=void 0,s.setImage=void 0,s.getLeft=void 0,s.setLeft=void 0,s.getTop=void 0,s.setTop=void 0,s.getWidth=void 0,s.setWidth=void 0,s.getHeight=void 0,s.setHeight=void 0,s.getChildren=void 0,s.setChildren=void 0,s.getParentKey=void 0,s.setParentKey=void 0,s.getItems=void 0,s.setItems=void 0,s.getContainerKey=void 0,s.setContainerKey=void 0,s}return m(d,p),d}(b);_.DataSourceNodeDataImporter=E;var y=function(p){function d(){var s=null!==p&&p.apply(this,arguments)||this;return s.getFrom=function(a){return a.from},s.setFrom=function(a,l){a.from=l},s.getFromPointIndex=void 0,s.setFromPointIndex=void 0,s.getTo=function(a){return a.to},s.setTo=function(a,l){a.to=l},s.getToPointIndex=void 0,s.setToPointIndex=void 0,s.getPoints=void 0,s.setPoints=void 0,s.getText=void 0,s.setText=void 0,s.getLineOption=void 0,s.setLineOption=void 0,s.getStartLineEnding=void 0,s.setStartLineEnding=void 0,s.getEndLineEnding=void 0,s.setEndLineEnding=void 0,s}return m(d,p),d}(b);_.DataSourceEdgeDataImporter=y},3503:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DataLayoutParameters=_.DataLayoutType=void 0;var m,d,b=x(8710),E=x(9533),y=x(1256);(d=m=_.DataLayoutType||(_.DataLayoutType={}))[d.Tree=0]="Tree",d[d.Sugiyama=1]="Sugiyama";var p=function(){function d(s,a){this.sizeSettings=s,a&&(void 0!==a.type&&(this.layoutType=a.type,this.layoutSettings=this.layoutType===m.Sugiyama?new b.LayoutSettings:new b.TreeLayoutSettings),void 0!==a.orientation&&(this.layoutSettings.orientation=a.orientation),this.skipPointIndices=a.skipPointIndices,this.autoSizeEnabled=a.autoSizeEnabled)}return Object.defineProperty(d.prototype,"needAutoLayout",{get:function(){return void 0!==this.layoutType},enumerable:!1,configurable:!0}),d.prototype.getLayoutBuilder=function(s){return this.layoutType===m.Tree?new E.TreeLayoutBuilder(this.layoutSettings,s):new y.SugiyamaLayoutBuilder(this.layoutSettings,s)},d}();_.DataLayoutParameters=p},4225:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DataSource=void 0;var m=x(9291),b=x(8900),E=x(6353),y=x(3477),p=x(9603),d=x(4145),s=x(8930),a=x(4629),l=x(8236),u=x(5144),h=x(9559),f=x(7443),g=x(8210),O=x(6516),I=x(5982),D=x(4634),C=x(926),w=x(7959),P=x(4867),k=x(2259),A=x(4246),R=x(8675),M=x(13),L=x(4914),H=x(8396),j=x(3490),U=x(5035),K=x(5558),q=x(58),Y=function(){function W(z,Z,se,re,Q,G){if(this.key=z,this.nodes=[],this.edges=[],this.autoGeneratedDataKeys={},this.addInternalKeyOnInsert=!1,this.useNodeParentId=!1,this.useNodeContainerId=!1,this.useNodeChildren=!1,this.useNodeItems=!1,this.canUseAutoSize=!1,this.canUpdateEdgeDataSource=!1,this.containers=null,null==z)throw new Error("DataSource key must be specified");this.key=z.toString(),this.loadParameters(re||{}),this.nodeDataImporter=this.createNodeDataImporter(Q),this.edgeDataImporter=this.createEdgeDataImporter(G),this.nodeDataSource=Z||[],this.edgeDataSource=se||[],this.canUpdateEdgeDataSource=!!se,this.fetchData()}return W.prototype.loadParameters=function(z){this.addInternalKeyOnInsert=!!z.addInternalKeyOnInsert},W.prototype.isAutoGeneratedKey=function(z){return z&&!!this.autoGeneratedDataKeys[z]},W.prototype.createNodeDataImporter=function(z){var Z=new U.DataSourceNodeDataImporter;return z&&this.assignNodeDataImporterProperties(z,Z),Z},W.prototype.createEdgeDataImporter=function(z){var Z=new U.DataSourceEdgeDataImporter;return z&&this.assignEdgeDataImporterProperties(z,Z),Z},W.prototype.assignItemDataImporterProperties=function(z,Z){z.getKey&&(Z.getKey=z.getKey),z.setKey&&(Z.setKey=z.setKey),z.getCustomData&&(Z.getCustomData=z.getCustomData),z.setCustomData&&(Z.setCustomData=z.setCustomData),z.getLocked&&(Z.getLocked=z.getLocked),z.setLocked&&(Z.setLocked=z.setLocked),z.getStyle&&(Z.getStyle=z.getStyle),z.setStyle&&(Z.setStyle=z.setStyle),z.getStyleText&&(Z.getStyleText=z.getStyleText),z.setStyleText&&(Z.setStyleText=z.setStyleText),z.getZIndex&&(Z.getZIndex=z.getZIndex),z.setZIndex&&(Z.setZIndex=z.setZIndex)},W.prototype.assignNodeDataImporterProperties=function(z,Z){this.assignItemDataImporterProperties(z,Z),z.getType&&(Z.getType=z.getType),z.setType&&(Z.setType=z.setType),z.getImage&&(Z.getImage=z.getImage),z.setImage&&(Z.setImage=z.setImage),z.getText&&(Z.getText=z.getText),z.setText&&(Z.setText=z.setText),z.getLeft&&(Z.getLeft=z.getLeft),z.setLeft&&(Z.setLeft=z.setLeft),z.getTop&&(Z.getTop=z.getTop),z.setTop&&(Z.setTop=z.setTop),z.getWidth&&(Z.getWidth=z.getWidth),z.setWidth&&(Z.setWidth=z.setWidth),z.getHeight&&(Z.getHeight=z.getHeight),z.setHeight&&(Z.setHeight=z.setHeight),z.getChildren&&(Z.getChildren=z.getChildren),z.setChildren&&(Z.setChildren=z.setChildren),z.getParentKey&&(Z.getParentKey=z.getParentKey),z.setParentKey&&(Z.setParentKey=z.setParentKey),z.getItems&&(Z.getItems=z.getItems),z.setItems&&(Z.setItems=z.setItems),z.getContainerKey&&(Z.getContainerKey=z.getContainerKey),z.setContainerKey&&(Z.setContainerKey=z.setContainerKey)},W.prototype.assignEdgeDataImporterProperties=function(z,Z){this.assignItemDataImporterProperties(z,Z),z.getFrom&&(Z.getFrom=z.getFrom),z.setFrom&&(Z.setFrom=z.setFrom),z.getFromPointIndex&&(Z.getFromPointIndex=z.getFromPointIndex),z.setFromPointIndex&&(Z.setFromPointIndex=z.setFromPointIndex),z.getTo&&(Z.getTo=z.getTo),z.setTo&&(Z.setTo=z.setTo),z.getToPointIndex&&(Z.getToPointIndex=z.getToPointIndex),z.setToPointIndex&&(Z.setToPointIndex=z.setToPointIndex),z.getPoints&&(Z.getPoints=z.getPoints),z.setPoints&&(Z.setPoints=z.setPoints),z.getText&&(Z.getText=z.getText),z.setText&&(Z.setText=z.setText),z.getLineOption&&(Z.getLineOption=z.getLineOption),z.setLineOption&&(Z.setLineOption=z.setLineOption),z.getStartLineEnding&&(Z.getStartLineEnding=z.getStartLineEnding),z.setStartLineEnding&&(Z.setStartLineEnding=z.setStartLineEnding),z.getEndLineEnding&&(Z.getEndLineEnding=z.getEndLineEnding),z.setEndLineEnding&&(Z.setEndLineEnding=z.setEndLineEnding)},W.prototype.fetchData=function(){var z=this;if(this.nodes=[],this.edges=[],this.autoGeneratedDataKeys={},this.useNodeParentId=void 0!==this.nodeDataImporter.getParentKey,this.useNodeContainerId=void 0!==this.nodeDataImporter.getContainerKey,this.useNodeItems=void 0!==this.nodeDataImporter.getItems,this.useNodeChildren=void 0!==this.nodeDataImporter.getChildren,this.canUseAutoSize=void 0===this.nodeDataImporter.getWidth&&void 0!==this.nodeDataImporter.getText,this.useEdgesArray()&&this.useNodeParentId)throw new Error("You cannot use edges array and parentKey simultaneously.");if(this.useEdgesArray()&&this.useNodeItems)throw new Error("You cannot use edges array and items array simultaneously.");if(this.useNodeParentId&&this.useNodeItems)throw new Error("You cannot use parentKey and items array simultaneously.");if(this.useNodeContainerId&&this.useNodeChildren)throw new Error("You cannot use containerKey and children array simultaneously.");this.nodeDataSource.forEach(function(Z){z.addNode(Z)}),this.useEdgesArray()?this.edgeDataSource.forEach(function(Z){z.addEdge(Z)}):this.nodes.forEach(function(Z){z.addNodeEdgesByParentId(Z)})},W.prototype.isContainer=function(z){var Z=this;return!this.containers&&this.useNodeContainerId&&(this.containers=this.nodeDataSource.map(function(se){return Z.nodeDataImporter.getContainerKey(se)}).filter(function(se){return null!=se}).reduce(function(se,re){return se[re]=!0,se},{})),this.containers&&this.containers[z]},W.prototype.refetchData=function(z,Z){var se=this;this.nodeDataSource=z||this.nodeDataSource,this.edgeDataSource=Z||this.edgeDataSource;var re=this.nodes.slice(),Q=this.edges.slice();return this.fetchData(),{nodes:this.getItemChanges(re,this.nodes,function(G,ie){return G.key===ie.key||G.dataObj===ie.dataObj}),edges:this.getItemChanges(Q,this.edges,function(G,ie){return se.useNodeParentId||se.useNodeItems?G.key===ie.key||G.from===ie.from&&G.to===ie.to:G.key===ie.key||G.dataObj===ie.dataObj})}},W.prototype.getItemChanges=function(z,Z,se){var re=this,Q=z.filter(function(ae){return re.containsItem(Z,ae,se)}),G=z.filter(function(ae){return!re.containsItem(Z,ae,se)}),ie=Z.filter(function(ae){return!re.containsItem(z,ae,se)});return{remained:Q.map(function(ae){return ae.key}),remainedNewKeys:Q.map(function(ae){var me;return null===(me=Z.find(function(be){return se(ae,be)}))||void 0===me?void 0:me.key}),removed:G.map(function(ae){return ae.key}),added:ie.map(function(ae){return ae.key})}},W.prototype.containsItem=function(z,Z,se){var re=!1;return z.forEach(function(Q){!re&&se(Q,Z)&&(re=!0)}),re},W.prototype.useEdgesArray=function(){return Array.isArray(this.edgeDataSource)&&(this.edgeDataSource.length||!(this.useNodeParentId||this.useNodeItems))},W.prototype.addNode=function(z,Z,se,re){var Q=this,G=this.nodeDataImporter.getChildren&&this.nodeDataImporter.getChildren(z),ie=G&&Array.isArray(G)&&G.length,ae=ie||this.isContainer(this.nodeDataImporter.getKey(z)),me=this.nodeDataImporter.getType&&this.nodeDataImporter.getType(z)||ae&&k.ShapeTypes.VerticalContainer||k.ShapeTypes.Rectangle,be=this.nodeDataImporter.getText&&(this.nodeDataImporter.getText(z)||""),Ce=this.addNodeInternal(z,me,be,Z,se,re);if(this.assignNodeProperties(Ce,z),ie&&G.forEach(function(ee){Q.addNode(ee,void 0,Ce.key,z)}),this.useNodeItems){var ve=this.nodeDataImporter.getItems(z);Array.isArray(ve)&&ve.length&&ve.forEach(function(ee){var oe=Q.addNode(ee,z,se,re);Q.addEdgeInternal(void 0,Ce.key,oe.key)})}return Ce},W.prototype.addNodeEdgesByParentId=function(z){if(this.useNodeParentId){var Z=this.nodeDataImporter.getParentKey(z.dataObj);null!=Z&&this.findNode(Z)&&this.addEdgeInternal(void 0,this.getNodeKey(z.dataObj,this.nodeDataImporter.getParentKey),this.getNodeKey(z.dataObj,this.nodeDataImporter.getKey))}},W.prototype.addNodeInternal=function(z,Z,se,re,Q,G){var ie=this.nodeDataImporter.getKey(z),ae=ie??P.ModelUtils.getGuidItemKey(),me=new K.DataSourceNodeItem(this.key,ae,z,Z,se,re,Q,G);return this.nodes.push(me),null==ie&&(ie=ae,this.autoGeneratedDataKeys[ae]=!0),me},W.prototype.addEdge=function(z){var Z=this.addEdgeInternal(z,this.getNodeKey(z,this.edgeDataImporter.getFrom),this.getNodeKey(z,this.edgeDataImporter.getTo));return this.assignEdgeProperties(Z,z),Z},W.prototype.addEdgeInternal=function(z,Z,se){var re=z&&this.edgeDataImporter.getKey(z),Q=re??P.ModelUtils.getGuidItemKey(),G=new K.DataSourceEdgeItem(this.key,Q,z,Z,se);return this.edges.push(G),null==re&&(re=Q,this.autoGeneratedDataKeys[Q]=!0),G},W.prototype.assignItemProperties=function(z,Z,se){if(se.getCustomData&&(z.customData=R.ObjectUtils.cloneObject(se.getCustomData(Z))),se.getLocked&&(z.locked=se.getLocked(Z)),se.getStyle){var re=se.getStyle(Z);z.style="string"==typeof re?L.Data.cssTextToObject(re):re}se.getStyleText&&(re=se.getStyleText(Z),z.styleText="string"==typeof re?L.Data.cssTextToObject(re):re),se.getZIndex&&(z.zIndex=se.getZIndex(Z))},W.prototype.assignNodeProperties=function(z,Z){this.assignItemProperties(z,Z,this.nodeDataImporter),this.nodeDataImporter.getImage&&(z.image=this.nodeDataImporter.getImage(Z)),this.nodeDataImporter.getLeft&&(z.left=this.nodeDataImporter.getLeft(Z)),this.nodeDataImporter.getTop&&(z.top=this.nodeDataImporter.getTop(Z)),this.nodeDataImporter.getWidth&&(z.width=this.nodeDataImporter.getWidth(Z)),this.nodeDataImporter.getHeight&&(z.height=this.nodeDataImporter.getHeight(Z)),this.nodeDataImporter.getContainerKey&&(z.containerKey=this.nodeDataImporter.getContainerKey(Z))},W.prototype.assignEdgeProperties=function(z,Z){if(this.assignItemProperties(z,Z,this.edgeDataImporter),this.edgeDataImporter.getFromPointIndex&&(z.fromPointIndex=this.edgeDataImporter.getFromPointIndex(Z)),this.edgeDataImporter.getToPointIndex&&(z.toPointIndex=this.edgeDataImporter.getToPointIndex(Z)),this.edgeDataImporter.getPoints&&(z.points=this.edgeDataImporter.getPoints(Z)),this.edgeDataImporter.getText){var se=this.edgeDataImporter.getText(Z);if(z.texts={},"object"==typeof se){for(var re in se)if(Object.prototype.hasOwnProperty.call(se,re)){var Q=parseFloat(re),G=se[re];isNaN(Q)||"string"!=typeof G||""===G||(Q=Math.min(1,Math.max(0,Q)),z.texts[Q]=G)}}else"string"==typeof se&&""!==se&&(z.texts[w.CONNECTOR_DEFAULT_TEXT_POSITION]=se)}this.edgeDataImporter.getLineOption&&(z.lineOption=this.edgeDataImporter.getLineOption(Z)),this.edgeDataImporter.getStartLineEnding&&(z.startLineEnding=this.edgeDataImporter.getStartLineEnding(Z)),this.edgeDataImporter.getEndLineEnding&&(z.endLineEnding=this.edgeDataImporter.getEndLineEnding(Z))},W.prototype.findNode=function(z){return this.nodes.filter(function(Z){return void 0!==z&&Z.key===z})[0]},W.prototype.findEdge=function(z){return this.edges.filter(function(Z){return void 0!==z&&Z.key===z})[0]},W.prototype.getNodeKey=function(z,Z){return Z(z)},W.prototype.createModelItems=function(z,Z,se,re,Q,G,ie,ae){var me=this;this.beginChangesNotification(),z.clear(),z.beginTransaction(),P.ModelUtils.deleteAllItems(z,Z,re),Z.initializeKeyCounter();var be=G?Math.max(1,Math.floor(2e3/ie))*ie:2e3,Ce=0,ve=0,ee={},oe=[],te=[];this.nodes.forEach(function(ce){var fe=new b.Point(ve++*be,Ce*be),ye=me.createShapeByNode(z,Z,re,se,ce,fe,Q,G,ie,ae);void 0!==ce.key&&(ee[ce.key]=ye.key),ve>4&&(ve=0,Ce++),oe.push(ye)}),this.nodes.forEach(function(ce){if(null!=ce.containerKey){var ye=Z.findShape(ee[ce.key]),Se=Z.findShape(ee[ce.containerKey]);Se&&P.ModelUtils.insertToContainer(z,Z,ye,Se)}}),this.edges.forEach(function(ce){var fe=Z.findShape(ee[ce.to]),ye=Z.findShape(ee[ce.from]),xe=me.createConnectorByEdge(z,Z,re,ce,ye,fe);xe&&(te.push(xe),P.ModelUtils.updateConnectorContainer(z,Z,xe))}),Q.needAutoLayout&&this.applyLayout(z,Z,oe,te,Q,G,ie),P.ModelUtils.tryUpdateModelRectangle(z),z.endTransaction(!0),this.endChangesNotification(!0)},W.prototype.updateModelItems=function(z,Z,se,re,Q,G,ie,ae,me,be,Ce,ve){var ee=this;this.beginChangesNotification(),z.beginTransaction();var oe=[],te=[],ce=[],fe=me.nodes.removed.map(function(Se){return Z.findShapeByDataKey(Se)}).filter(function(Se){return Se});fe.forEach(function(Se){Se.attachedConnectors.forEach(function(we){we.beginItem&&we.beginItem!==Se&&te.push(we.beginItem),we.endItem&&we.endItem!==Se&&te.push(we.endItem)})}),P.ModelUtils.deleteItems(z,Z,re,fe,!0);var ye=me.edges.removed.map(function(Se){return Z.findConnectorByDataKey(Se)}).filter(function(Se){return Se});ye.forEach(function(Se){Se.beginItem&&te.push(Se.beginItem),Se.endItem&&te.push(Se.endItem)}),P.ModelUtils.deleteItems(z,Z,re,ye,!0),te=this.purgeLayoutShapes(te,fe),(ie||[]).forEach(function(Se){if(-1!==me.nodes.remained.indexOf(Se)){var we=ee.findNode(Se);if(we){var Fe=Z.findShapeByDataKey(Se);if(Fe){var Ge=Fe.position.clone();ee.changeShapeByDataItem(z,Z,Fe,we,Ge),ee.changeItemByDataItem(z,Fe,we)}else Fe=ee.createShapeByNode(z,Z,re,se,we,new b.Point(0,0),Q,be,Ce,ve);ee.updateShapeContainer(z,Z,Fe,we),te.push(Fe),oe.push(Fe)}}}),me.nodes.remained.forEach(function(Se,we){var Fe=Z.findShapeByDataKey(Se);Fe&&(Fe.dataKey=me.nodes.remainedNewKeys[we])}),me.nodes.added.forEach(function(Se){var we=ee.findNode(Se),Fe=ee.createShapeByNode(z,Z,re,se,we,new b.Point(0,0),Q,be,Ce,ve);ee.updateShapeContainer(z,Z,Fe,we),te.push(Fe)}),me.edges.added.forEach(function(Se){var we=ee.findEdge(Se),Fe=Z.findShapeByDataKey(we.from),Ge=Z.findShapeByDataKey(we.to),Ve=ee.createConnectorByEdge(z,Z,re,we,Fe,Ge);Ve&&(P.ModelUtils.updateConnectorContainer(z,Z,Ve),ce.push(Ve))});var xe=ie||[];me.edges.remained.forEach(function(Se){var we=ee.findEdge(Se);!we||-1===me.nodes.added.indexOf(we.from)&&-1===me.nodes.added.indexOf(we.to)||xe.push(Se)}),xe.forEach(function(Se){if(-1!==me.edges.remained.indexOf(Se)){var we=ee.findEdge(Se);if(we){var Fe=Z.findShapeByDataKey(we.from),Ge=Z.findShapeByDataKey(we.to),Ve=Z.findConnectorByDataKey(Se);Ve?(ee.changeConnectorPointsByDataItem(z,Ve,ee.getConnectorPointsByEdge(Z,we,Fe,Ge,!1)),ee.changeConnectorByDataItem(z,Z,Ve,Fe,Ge,we),ee.changeItemByDataItem(z,Ve,we)):Ve=ee.createConnectorByEdge(z,Z,re,we,Fe,Ge),Ve&&(P.ModelUtils.updateConnectorContainer(z,Z,Ve),ce.push(Ve),oe.push(Ve))}}}),me.edges.remained.forEach(function(Se,we){var Fe=Z.findConnectorByDataKey(Se);Fe&&(Fe.dataKey=me.edges.remainedNewKeys[we])}),oe.length&&ae&&oe.forEach(function(Se){Se.hasTemplate&&ae(Se)}),Q.needAutoLayout&&(te.length||ce.length)&&this.applyLayout(z,Z,te,ce,Q,be,Ce),P.ModelUtils.tryUpdateModelRectangle(z),z.endTransaction(!G),this.endChangesNotification(!1)},W.prototype.purgeLayoutShapes=function(z,Z){var se=Z.reduce(function(re,Q){return(re[Q.key]=!0)&&re},{});return z.reduce(function(re,Q){return void 0===re.keySet[Q.key]&&void 0===se[Q.key]&&(re.uniqueShapes.push(Q),re.keySet[Q.key]=!0),re},{uniqueShapes:[],keySet:{}}).uniqueShapes},W.prototype.applyShapeAutoSize=function(z,Z,se,re,Q,G){if(re.description.enableText){var ie=re.textRectangle.createSize(),ae=re.size,me=ie.width-ae.width,be=ie.height-ae.height,Ce=re.getMaxWidth(se.shapeMaxWidth),ve=re.getMaxHeight(se.shapeMaxHeight),ee=function(ce,fe){return"number"==typeof ce?m.UnitConverter.twipsToPixelsF(ce+(fe?me:be)):void 0},oe=j.getOptimalTextRectangle(re.text,re.styleText,A.TextOwner.Shape,Z,ie.clone().applyConverter(m.UnitConverter.twipsToPixelsF),re.description.keepRatioOnAutoSize,ee(re.getMinWidth(se.shapeMinWidth),!0),ee(Ce,!0),ee(re.getMinHeight(se.shapeMinHeight),!1),ee(ve,!1)).clone().applyConverter(m.UnitConverter.pixelsToTwips);if(!oe.equals(ie)){var te=re.description.getSizeByText(oe,re);Q&&G&&(te=new E.Size(Math.min(G*Math.ceil(te.width/G),Ce||Number.MAX_VALUE),Math.min(G*Math.ceil(te.height/G),ve||Number.MAX_VALUE))),z.addAndRedo(new a.ResizeShapeHistoryItem(re.key,re.position,te))}}},W.prototype.applyLayout=function(z,Z,se,re,Q,G,ie){P.ModelUtils.getGraphInfoByItems(Z,se,re).forEach(function(ae){var me=Q.getLayoutBuilder(ae.graph).build(),be=P.ModelUtils.getNonGraphItems(Z,ae.container,me.nodeToLayout,se,re);P.ModelUtils.applyLayout(z,Z,ae.container,ae.graph,me,be,Q.layoutSettings,G,ie,Q.skipPointIndices)})},W.prototype.changeItemByDataItem=function(z,Z,se){if(void 0===se.customData||R.ObjectUtils.compareObjects(se.customData,Z.customData)||z.addAndRedo(new h.ChangeCustomDataHistoryItem(Z.key,se.customData)),void 0!==se.zIndex&&se.zIndex!==Z.zIndex&&z.addAndRedo(new I.ChangeZindexHistoryItem(Z,se.zIndex)),void 0!==se.style)for(var re in se.style)Object.prototype.hasOwnProperty.call(se.style,re)&&(G=this.getPreparedStyleValue(se.style[re],H.isColorProperty(re)))!==Z.style[re]&&z.addAndRedo(new D.ChangeStyleHistoryItem(Z.key,re,G));var Q=Z.style.getDefaultInstance();if(Z.style.forEach(function(ae){se.style&&void 0===se.style[ae]&&Z.style[ae]!==Q[ae]&&z.addAndRedo(new D.ChangeStyleHistoryItem(Z.key,ae,Q[ae]))}),void 0!==se.styleText)for(var re in se.styleText){var G;Object.prototype.hasOwnProperty.call(se.styleText,re)&&(G=this.getPreparedStyleValue(se.styleText[re],H.isColorProperty(re)))!==Z.styleText[re]&&z.addAndRedo(new C.ChangeStyleTextHistoryItem(Z.key,re,G))}var ie=Z.styleText.getDefaultInstance();Z.styleText.forEach(function(ae){se.styleText&&void 0===se.styleText[ae]&&Z.styleText[ae]!==ie[ae]&&z.addAndRedo(new C.ChangeStyleTextHistoryItem(Z.key,ae,ie[ae]))}),void 0!==se.locked&&se.locked!==Z.locked&&z.addAndRedo(new f.ChangeLockedHistoryItem(Z,se.locked))},W.prototype.getPreparedStyleValue=function(z,Z){if(Z){var se=M.ColorUtils.stringToHash(z);null!==se&&(z=se)}return z},W.prototype.createShapeByNode=function(z,Z,se,re,Q,G,ie,ae,me,be){var Ce=new d.AddShapeHistoryItem(re.get(Q.type),G,"",Q.key);z.addAndRedo(Ce);var ve=Z.findShape(Ce.shapeKey);return P.ModelUtils.updateNewShapeProperties(z,se,Ce.shapeKey),this.changeShapeByDataItem(z,Z,ve,Q,G),this.changeItemByDataItem(z,ve,Q),be&&this.canUseAutoSize&&ie.autoSizeEnabled&&this.applyShapeAutoSize(z,be,ie.sizeSettings,ve,ae,me),ve},W.prototype.changeShapeByDataItem=function(z,Z,se,re,Q){var G=!1;void 0!==re.left&&(Q.x=P.ModelUtils.getTwipsValue(Z.units,re.left)),void 0!==re.top&&(Q.y=P.ModelUtils.getTwipsValue(Z.units,re.top)),G=P.ModelUtils.setShapePosition(z,Z,se,Q,!1)||G,void 0!==re.type&&(G=P.ModelUtils.changeShapeType(z,Z,se,re.type)||G);var ie=se.size.clone();void 0!==re.width&&(ie.width=P.ModelUtils.getTwipsValue(Z.units,re.width)),void 0!==re.height&&(ie.height=P.ModelUtils.getTwipsValue(Z.units,re.height)),(G=P.ModelUtils.setShapeSize(z,Z,se,Q,ie)||G)&&P.ModelUtils.updateShapeAttachedConnectors(z,Z,se),void 0!==re.text&&re.text!==se.text&&z.addAndRedo(new O.ChangeShapeTextHistoryItem(se,re.text)),void 0!==re.image&&re.image!==se.image.actualUrl&&z.addAndRedo(new g.ChangeShapeImageHistoryItem(se,re.image))},W.prototype.updateShapeContainer=function(z,Z,se,re){var Q=void 0!==re.containerKey?Z.findShapeByDataKey(re.containerKey):void 0;Q!==se.container&&(Q?P.ModelUtils.insertToContainer(z,Z,se,Q):P.ModelUtils.removeFromContainer(z,Z,se))},W.prototype.getConnectorPointsByEdge=function(z,Z,se,re,Q){var G=[],ie=this.createModelPointFromDataSourceEdgeItemPoints(z.units,Z);if(ie&&ie.length>1)for(var ae=ie.length-1,me=0;me<=ae;me++){var be=ie[me];if(null!==be)G.push(be);else{if(!se&&!re)return;0===me&&se?G.push(se.position.clone()):me===ae&&re&&G.push(re.position.clone())}}else Q&&(se&&G.push(se.position.clone()),re&&G.push(re.position.clone()));return G},W.prototype.createModelPointFromDataSourceEdgeItemPoints=function(z,Z){var se=this,re=[];if(Array.isArray(Z.points))return Z.points.forEach(function(Q){return re.push(se.isValidDataSourceEdgeItemPoint(Q)?se.createModelPoint(z,Q):null)}),re},W.prototype.createModelPoint=function(z,Z){return new b.Point(P.ModelUtils.getTwipsValue(z,Z.x),P.ModelUtils.getTwipsValue(z,Z.y))},W.prototype.isValidDataSourceEdgeItemPoint=function(z){return null!=z&&void 0!==z.x&&void 0!==z.y&&null!==z.x&&null!==z.y},W.prototype.createConnectorByEdge=function(z,Z,se,re,Q,G){var ie,ae=re.key,me=this.getConnectorPointsByEdge(Z,re,Q,G,!0);if(me&&me.length>1){var be=new p.AddConnectorHistoryItem(me,ae);z.addAndRedo(be),ie=Z.findConnector(be.connectorKey),P.ModelUtils.updateNewConnectorProperties(z,se,be.connectorKey),this.changeConnectorByDataItem(z,Z,ie,Q,G,re),this.changeItemByDataItem(z,ie,re)}return ie},W.prototype.changeConnectorByDataItem=function(z,Z,se,re,Q,G){var ie=void 0!==G.fromPointIndex?G.fromPointIndex:se.beginConnectionPointIndex;se.beginItem===re&&se.beginConnectionPointIndex===ie||(se.beginItem&&z.addAndRedo(new s.DeleteConnectionHistoryItem(se,w.ConnectorPosition.Begin)),re&&z.addAndRedo(new y.AddConnectionHistoryItem(se,re,ie,w.ConnectorPosition.Begin)));var ae=void 0!==G.toPointIndex?G.toPointIndex:se.endConnectionPointIndex;if(se.endItem===Q&&se.endConnectionPointIndex===ae||(se.endItem&&z.addAndRedo(new s.DeleteConnectionHistoryItem(se,w.ConnectorPosition.End)),Q&&z.addAndRedo(new y.AddConnectionHistoryItem(se,Q,ae,w.ConnectorPosition.End))),P.ModelUtils.updateConnectorAttachedPoints(z,Z,se),void 0!==G.texts&&!this.compareTexts(G,se))for(var me in se.texts.forEach(function(Ce){z.addAndRedo(new u.ChangeConnectorTextHistoryItem(se,Ce.position,void 0))}),G.texts)if(Object.prototype.hasOwnProperty.call(G.texts,me)){var be=parseFloat(me);z.addAndRedo(new u.ChangeConnectorTextHistoryItem(se,be,G.texts[me]))}void 0!==G.lineOption&&G.lineOption!==se.properties.lineOption&&z.addAndRedo(new l.ChangeConnectorPropertyHistoryItem(se.key,"lineOption",G.lineOption)),void 0!==G.startLineEnding&&G.startLineEnding!==se.properties.startLineEnding&&z.addAndRedo(new l.ChangeConnectorPropertyHistoryItem(se.key,"startLineEnding",G.startLineEnding)),void 0!==G.endLineEnding&&G.endLineEnding!==se.properties.endLineEnding&&z.addAndRedo(new l.ChangeConnectorPropertyHistoryItem(se.key,"endLineEnding",G.endLineEnding))},W.prototype.changeConnectorPointsByDataItem=function(z,Z,se){se&&se.length>1&&se.join(",")!==Z.points.join(",")&&z.addAndRedo(new q.ReplaceConnectorPointsHistoryItem(Z.key,se))},W.prototype.compareTexts=function(z,Z){var se=z.texts||{},re=Object.keys(se).length===Z.getTextCount();if(re)for(var Q in se)if(Object.prototype.hasOwnProperty.call(se,Q)){var G=parseFloat(Q);this.compareStrings(Z.getText(G),se[Q])||(re=!1)}return re},W.prototype.compareStrings=function(z,Z){return"string"==typeof z&&"string"==typeof Z?z===Z:this.isEmptyString(z)&&this.isEmptyString(Z)},W.prototype.isEmptyString=function(z){return""===z||null==z},W}();_.DataSource=Y},5558:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.DataSourceEdgeItem=_.DataSourceNodeItem=_.DataSourceItem=void 0;var E=x(7959),y=function(s,a,l){this.sourceKey=s,this.key=a,this.dataObj=l};_.DataSourceItem=y;var p=function(s){function a(l,u,h,f,g,O,I,D){var C=s.call(this,l,u,h)||this;return C.type=f,C.text=g,C.parentDataObj=O,C.containerKey=I,C.containerDataObj=D,C}return b(a,s),a}(y);_.DataSourceNodeItem=p;var d=function(s){function a(l,u,h,f,g){var O=s.call(this,l,u,h)||this;return O.sourceKey=l,O.from=f,O.to=g,O}return b(a,s),Object.defineProperty(a.prototype,"text",{get:function(){return this.texts&&this.texts[E.CONNECTOR_DEFAULT_TEXT_POSITION]},enumerable:!1,configurable:!0}),a}(y);_.DataSourceEdgeItem=d},8717:function(J,_,x){var m,b=this&&this.__extends||(m=function(I,D){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var P in w)w.hasOwnProperty(P)&&(C[P]=w[P])})(I,D)},function(I,D){function C(){this.constructor=I}m(I,D),I.prototype=null===D?Object.create(D):(C.prototype=D.prototype,new C)});Object.defineProperty(_,"__esModule",{value:!0}),_.DocumentDataSource=_.UpdateNodeKeyRelatedObjectsStackAction=_.UpdateNodeKeyRelatedObjectsStackItem=void 0;var E=x(2259),y=x(5503),p=x(7959),d=x(4225),s=x(4867),a=x(4914),l=x(8675),u=x(49),h=x(8679),f=function(I,D){this.shape=I,this.nodeObj=D};_.UpdateNodeKeyRelatedObjectsStackItem=f;var g=function(I,D){this.kind=I,this.nodeObj=D};_.UpdateNodeKeyRelatedObjectsStackAction=g;var O=function(I){function D(C,w,P,k,A,R){var M=I.call(this,"Document",w,P,k,A,R)||this;return M.changesListener=C,M.nodeInsertingLockCount=0,M.updateNodeKeyRelatedObjectsCount=0,M.updateNodeKeyRelatedObjectsStack=[],M.updateNodeKeyRelatedObjectsStackActions=[],M}return b(D,I),D.prototype.updateItemsByModel=function(C){var w=this;this.beginChangesNotification(),this.deleteNodes(C),this.deleteEdges(C),C.items.forEach(function(P){P instanceof y.Shape&&w.updateNode(C,P)}),C.items.forEach(function(P){P instanceof p.Connector&&w.updateEdge(C,P)}),this.endChangesNotification(!1)},D.prototype.isItemObjectModified=function(C,w,P){var k=P.setLocked&&w.locked!==C.locked||P.setZIndex&&w.zIndex!==C.zIndex||P.setCustomData&&!l.ObjectUtils.compareObjects(w.customData,C.customData);if(!k&&P.setStyle){var A=C.style.getDefaultInstance();C.style.forEach(function(M){C.style[M]!==A[M]&&C.style[M]!==(w.style&&w.style[M])&&(k=!0)})}if(!k&&P.setStyleText){var R=C.styleText.getDefaultInstance();C.styleText.forEach(function(M){C.styleText[M]!==R[M]&&C.styleText[M]!==(w.styleText&&w.styleText[M])&&(k=!0)})}return k},D.prototype.setDataObjectKeyRelatedProperty=function(C,w,P,k){(k||void 0===this.autoGeneratedDataKeys[P])&&C(w,P)},D.prototype.updateItemObjectProperties=function(C,w,P){if(P.setCustomData&&(C.customData=l.ObjectUtils.cloneObject(w.customData),C.dataObj&&void 0!==C.customData&&P.setCustomData(C.dataObj,w.customData)),P.setLocked&&(C.locked=w.locked,C.dataObj&&void 0!==C.locked&&P.setLocked(C.dataObj,w.locked)),P.setStyle){var k=w.style.toObject();C.style=k,C.dataObj&&void 0!==C.style&&P.setStyle(C.dataObj,a.Data.objectToCssText(k))}if(P.setStyleText){var A=w.styleText.toObject();C.styleText=A,C.dataObj&&void 0!==C.styleText&&P.setStyleText(C.dataObj,a.Data.objectToCssText(A))}P.setZIndex&&(C.zIndex=w.zIndex,C.dataObj&&void 0!==C.zIndex&&P.setZIndex(C.dataObj,w.zIndex))},D.prototype.deleteItems=function(C,w,P,k){C.slice().forEach(function(A){if(null!=A.key&&!w(A.key)){var R=P(A),M=R.indexOf(A.dataObj);R.splice(M,1),k(A,M>-1)}})},D.prototype.updateNode=function(C,w){var P=this,k=this.findNode(w.dataKey);if(k)this.isNodeObjectModified(w,k,C.units)?(this.updateNodeObjectProperties(w,k,C.units),this.updateNodeObjectConnectedProperties(w,k),this.beginChangesNotification(),this.changesListener.notifyNodeUpdated.call(this.changesListener,this.nodeDataImporter.getKey(k.dataObj||k.key),k.dataObj,function(R,M){P.endChangesNotification(!1)},function(R){P.endChangesNotification(!1)})):this.updateNodeObjectConnectedProperties(w,k,this.changesListener);else{var A={};null!=w.dataKey&&this.nodeDataImporter.setKey(A,w.dataKey),k=this.addNodeInternal(A,w.description.key,w.text),this.nodeDataSource.push(k.dataObj),this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setKey,A,k.key,this.addInternalKeyOnInsert),this.updateNodeObjectProperties(w,k,C.units),this.updateNodeObjectConnectedProperties(w,k),this.updateNodeObjectKey(w,k,k.dataObj),this.beginChangesNotification(),this.beginNodeInserting(),this.changesListener.notifyNodeInserted.call(this.changesListener,k.dataObj,function(R){P.updateNodeObjectKey(w,k,R),P.endNodeInserting(),P.endChangesNotification(!1)},function(R){P.endNodeInserting(),P.endChangesNotification(!1)})}},D.prototype.areImageUrlsEqual=function(C,w){return C===w||u.StringUtils.isNullOrEmpty(C)&&u.StringUtils.isNullOrEmpty(w)},D.prototype.isNodeObjectModified=function(C,w,P){return this.isItemObjectModified(C,w,this.nodeDataImporter)||w.type!==C.description.key&&!(void 0===w.type&&C.description.key===E.ShapeTypes.Rectangle)||!this.compareStrings(w.text,C.text)||this.nodeDataImporter.setImage&&!this.areImageUrlsEqual(w.image,C.image.actualUrl)||this.nodeDataImporter.setLeft&&!h.MathUtils.numberCloseTo(w.left,s.ModelUtils.getlUnitValue(P,C.position.x))||this.nodeDataImporter.setTop&&!h.MathUtils.numberCloseTo(w.top,s.ModelUtils.getlUnitValue(P,C.position.y))||this.nodeDataImporter.setWidth&&!h.MathUtils.numberCloseTo(w.width,s.ModelUtils.getlUnitValue(P,C.size.width))||this.nodeDataImporter.setHeight&&!h.MathUtils.numberCloseTo(w.height,s.ModelUtils.getlUnitValue(P,C.size.height))},D.prototype.updateNodeObjectProperties=function(C,w,P){if(this.updateItemObjectProperties(w,C,this.nodeDataImporter),this.nodeDataImporter.setType&&(w.type=C.description.key,this.nodeDataImporter.setType(w.dataObj,C.description.key)),this.nodeDataImporter.setText&&(w.text=C.text,this.nodeDataImporter.setText(w.dataObj,C.text)),this.nodeDataImporter.setImage&&(w.image=C.image.actualUrl,this.nodeDataImporter.setImage(w.dataObj,void 0===C.image.actualUrl?null:C.image.actualUrl)),this.nodeDataImporter.setLeft){var k=s.ModelUtils.getlUnitValue(P,C.position.x);w.left=k,this.nodeDataImporter.setLeft(w.dataObj,k)}if(this.nodeDataImporter.setTop){var A=s.ModelUtils.getlUnitValue(P,C.position.y);w.top=A,this.nodeDataImporter.setTop(w.dataObj,A)}if(this.nodeDataImporter.setWidth){var R=s.ModelUtils.getlUnitValue(P,C.size.width);w.width=R,this.nodeDataImporter.setWidth(w.dataObj,R)}if(this.nodeDataImporter.setHeight){var M=s.ModelUtils.getlUnitValue(P,C.size.height);w.height=M,this.nodeDataImporter.setHeight(w.dataObj,M)}},D.prototype.updateNodeObjectConnectedProperties=function(C,w,P){if(this.useNodeParentId&&void 0!==this.nodeDataImporter.setParentKey){var k=this.getParentItemKey(C),A=this.findNode(k);this.updateNodeObjectParentKey(w,A,P)}if(this.useNodeContainerId&&void 0!==this.nodeDataImporter.setContainerKey){var R=this.getContainerShapeKey(C),M=this.findNode(R);this.updateNodeObjectContainerKey(w,M,P)}this.useNodeItems&&void 0!==this.nodeDataImporter.setItems&&(k=this.getParentItemKey(C),A=this.findNode(k),this.updateNodeObjectItems(w,A,P)),this.useNodeChildren&&void 0!==this.nodeDataImporter.setChildren&&(R=this.getContainerShapeKey(C),M=this.findNode(R),this.updateNodeObjectChildren(w,M,P))},D.prototype.IsNodeParentIdMode=function(){return this.useNodeParentId&&void 0!==this.nodeDataImporter.setParentKey},D.prototype.IsNodeItemsMode=function(){return this.useNodeItems&&void 0!==this.nodeDataImporter.setItems},D.prototype.updateNodeObjectParentKey=function(C,w,P){var k=this.nodeDataImporter.getParentKey(C.dataObj),A=w?this.nodeDataImporter.getKey(w.dataObj):void 0;k===A||this.isRootParentKey(k)&&this.isRootParentKey(A)||(this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setParentKey,C.dataObj,A,!1),P&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("shape",C):this.updateNodeObjectContainerOrParentKeyInternal(C,P)))},D.prototype.updateNodeObjectParentKeyInternal=function(C,w){var P=this;this.beginChangesNotification(),w.notifyNodeUpdated.call(w,this.nodeDataImporter.getKey(C.dataObj)||C.key,C.dataObj,function(k,A){P.endChangesNotification(!1)},function(k){P.endChangesNotification(!1)})},D.prototype.updateNodeObjectContainerKey=function(C,w,P){var k=this.nodeDataImporter.getContainerKey(C.dataObj),A=w?this.nodeDataImporter.getKey(w.dataObj):void 0;k===A||this.isRootParentKey(k)&&this.isRootParentKey(A)||(this.setDataObjectKeyRelatedProperty(this.nodeDataImporter.setContainerKey,C.dataObj,A,!1),P&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("shape",C):this.updateNodeObjectContainerOrParentKeyInternal(C,P)))},D.prototype.updateNodeObjectContainerOrParentKeyInternal=function(C,w){var P=this;this.beginChangesNotification(),w.notifyNodeUpdated.call(w,this.nodeDataImporter.getKey(C.dataObj)||C.key,C.dataObj,function(k,A){P.endChangesNotification(!1)},function(k){P.endChangesNotification(!1)})},D.prototype.isRootParentKey=function(C){return null==C||!this.findNode(C)},D.prototype.updateNodeObjectItems=function(C,w,P){var k=this;if((w&&C.parentDataObj!==w.dataObj||!w&&C.parentDataObj)&&(!w||!this.checkNodeCyrcleItems(C.dataObj,w.dataObj))){var A=C.parentDataObj?this.nodeDataImporter.getItems(C.parentDataObj):this.nodeDataSource,R=A.indexOf(C.dataObj);A.splice(R,1);var M=w?this.nodeDataImporter.getItems(w.dataObj):this.nodeDataSource;M?M.push(C.dataObj):this.nodeDataImporter.setItems(w.dataObj,[C.dataObj]),C.parentDataObj=w&&w.dataObj,P&&(this.beginChangesNotification(),P.notifyNodeUpdated.call(P,this.nodeDataImporter.getKey(C.dataObj)||C.key,C.dataObj,function(L,H){k.endChangesNotification(!1)},function(L){k.endChangesNotification(!1)}))}},D.prototype.updateNodeObjectChildren=function(C,w,P){var k=this;if(w&&C.containerDataObj!==w.dataObj||!w&&C.containerDataObj){var A=C.containerDataObj?this.nodeDataImporter.getChildren(C.containerDataObj):this.nodeDataSource,R=A.indexOf(C.dataObj);A.splice(R,1);var M=w?this.nodeDataImporter.getChildren(w.dataObj):this.nodeDataSource;M?M.push(C.dataObj):this.nodeDataImporter.setChildren(w.dataObj,[C.dataObj]),C.containerDataObj=w&&w.dataObj,P&&(this.beginChangesNotification(),P.notifyNodeUpdated.call(P,this.nodeDataImporter.getKey(C.dataObj)||C.key,C.dataObj,function(L,H){k.endChangesNotification(!1)},function(L){k.endChangesNotification(!1)}))}},D.prototype.checkNodeCyrcleItems=function(C,w){var P=this,k=!1,A=this.nodeDataImporter.getItems(C);return A&&A.forEach(function(R){k=k||R===w||P.checkNodeCyrcleItems(R,w)}),k},D.prototype.updateNodeObjectKey=function(C,w,P){var k=this.nodeDataImporter.getKey(P),A=!1;if(null!=k&&k!==w.key&&(delete this.autoGeneratedDataKeys[w.key],w.key=k,A=!0),C.dataKey=w.key,w.dataObj!==P){var R=this.getNodeArray(w),M=R.indexOf(w.dataObj);R.splice(M,1,P),w.dataObj=P}A&&this.updateNodeKeyRelatedObjects(C,w)},D.prototype.updateNodeKeyRelatedObjects=function(C,w){var P=this;this.isInNodeInserting()?this.addToUpdateNodeKeyRelatedObjectsStack(C,w):(this.useNodeParentId&&void 0!==this.nodeDataImporter.setParentKey&&this.getChildItems(C).forEach(function(k){var A=P.findNode(k.dataKey);A&&P.updateNodeObjectParentKey(A,w,P.changesListener)}),this.useNodeContainerId&&void 0!==this.nodeDataImporter.setContainerKey&&C.children.forEach(function(k){var A=k instanceof y.Shape?P.findNode(k.dataKey):void 0;A&&P.updateNodeObjectContainerKey(A,w,P.changesListener)}),this.useEdgesArray()&&C.attachedConnectors.forEach(function(k){var A=P.findEdge(k.dataKey);A&&(C===k.beginItem&&P.updateEdgeObjectFromProperty(w,A,P.changesListener),C===k.endItem&&P.updateEdgeObjectToProperty(w,A,P.changesListener))}))},D.prototype.deleteNodes=function(C){var w=this;this.deleteItems(this.nodes,function(P){return C.findShapeByDataKey(P)},function(P){return w.getNodeArray(P)},function(P,k){var A=P.dataObj&&w.nodeDataImporter.getKey(P.dataObj)||P.key,R=w.findNode(A);R&&w.nodes.splice(w.nodes.indexOf(R),1),k&&(w.beginChangesNotification(),w.changesListener.notifyNodeRemoved.call(w.changesListener,A,P.dataObj,function(M,L){w.endChangesNotification(!1)},function(M){w.endChangesNotification(!1)}))})},D.prototype.getParentItem=function(C){for(var w=0;w<C.attachedConnectors.length;w++)if(C.attachedConnectors[w].endItem===C)return C.attachedConnectors[w].beginItem},D.prototype.getParentItemKey=function(C){var w=this.getParentItem(C);return w&&w.dataKey},D.prototype.getNodeArray=function(C){var w;return this.useNodeItems&&C.parentDataObj?w=this.nodeDataImporter.getItems(C.parentDataObj):C.containerDataObj&&(w=this.nodeDataImporter.getChildren(C.containerDataObj)),w||this.nodeDataSource},D.prototype.getContainerShapeKey=function(C){return C.container&&C.container.dataKey},D.prototype.getChildItems=function(C){for(var w=[],P=0;P<C.attachedConnectors.length;P++)C.attachedConnectors[P].beginItem===C&&C.attachedConnectors[P].endItem&&w.push(C.attachedConnectors[P].endItem);return w},D.prototype.updateEdge=function(C,w){var P=this,k=w.beginItem?w.beginItem.dataKey:void 0,A=w.endItem?w.endItem.dataKey:void 0,R=this.findEdge(w.dataKey);if(R)this.isEdgeObjectModified(w,R,C.units)&&(this.updateEdgeObjectProperties(w,R,C.units),R.dataObj&&(this.beginChangesNotification(),this.changesListener.notifyEdgeUpdated.call(this.changesListener,this.edgeDataImporter.getKey(R.dataObj)||R.key,R.dataObj,function(L,H){P.endChangesNotification(!1)},function(L){P.endChangesNotification(!1)})));else{var M=this.useEdgesArray()&&this.canUpdateEdgeDataSource?{}:void 0;M&&null!=w.dataKey&&this.edgeDataImporter.setKey(M,w.dataKey),R=this.addEdgeInternal(M,k,A),M&&(this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setKey,M,R.key,this.addInternalKeyOnInsert),this.edgeDataSource.push(R.dataObj)),this.updateEdgeObjectProperties(w,R,C.units),this.updateEdgeObjectKey(w,R,R.dataObj),M&&(this.beginChangesNotification(),this.beginNodeInserting(),this.changesListener.notifyEdgeInserted.call(this.changesListener,R.dataObj,function(L){P.updateEdgeObjectKey(w,R,L),P.endNodeInserting(),P.endChangesNotification(!1)},function(L){P.endNodeInserting(),P.endChangesNotification(!1)}))}},D.prototype.isEdgeObjectModified=function(C,w,P){return this.isItemObjectModified(C,w,this.edgeDataImporter)||(null!==w.from?w.from:void 0)!==(C.beginItem?C.beginItem.dataKey:void 0)||(null===w.to?void 0:w.to)!==(C.endItem?C.endItem.dataKey:void 0)||this.edgeDataImporter.setFromPointIndex&&w.fromPointIndex!==C.beginConnectionPointIndex||this.edgeDataImporter.setToPointIndex&&w.toPointIndex!==C.endConnectionPointIndex||this.edgeDataImporter.setPoints&&(!w.points||!this.pointsAreEqual(w.points.map(function(k){return k.x}),C.points.map(function(k){return s.ModelUtils.getlUnitValue(P,k.x)}))||!this.pointsAreEqual(w.points.map(function(k){return k.y}),C.points.map(function(k){return s.ModelUtils.getlUnitValue(P,k.y)})))||this.edgeDataImporter.setText&&!this.compareTexts(w,C)||this.edgeDataImporter.setLineOption&&w.lineOption!==C.properties.lineOption||this.edgeDataImporter.setStartLineEnding&&w.startLineEnding!==C.properties.startLineEnding||this.edgeDataImporter.setEndLineEnding&&w.endLineEnding!==C.properties.endLineEnding},D.prototype.pointsAreEqual=function(C,w){var P=C.length;if(P!==C.length)return!1;for(var k=0;k<P;k++)if(!h.MathUtils.numberCloseTo(C[k],w[k]))return!1;return!0},D.prototype.updateEdgeObjectFromProperty=function(C,w,P){if(w.from=C&&C.key,w.dataObj){var k=C&&C.dataObj&&this.nodeDataImporter.getKey(C.dataObj);this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setFrom,w.dataObj,k,!1),P&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("edge",w):this.updateEdgeObjectFromOrToPropertyInternal(w,P))}},D.prototype.updateEdgeObjectFromOrToPropertyInternal=function(C,w){var P=this;this.beginChangesNotification(),w.notifyEdgeUpdated.call(w,this.nodeDataImporter.getKey(C.dataObj)||C.key,C.dataObj,function(k,A){P.endChangesNotification(!1)},function(k){P.endChangesNotification(!1)})},D.prototype.updateEdgeObjectToProperty=function(C,w,P){if(w.to=C&&C.key,w.dataObj){var k=C&&C.dataObj&&this.nodeDataImporter.getKey(C.dataObj);this.setDataObjectKeyRelatedProperty(this.edgeDataImporter.setTo,w.dataObj,k,!1),P&&(this.isInUpdateNodeKeyRelatedObjects()?this.addToUpdateNodeKeyRelatedObjectsStackAction("edge",w):this.updateEdgeObjectFromOrToPropertyInternal(w,P))}},D.prototype.updateEdgeObjectProperties=function(C,w,P){if(this.updateItemObjectProperties(w,C,this.edgeDataImporter),this.edgeDataImporter.setFrom){var k=this.findNode(C.beginItem&&C.beginItem.dataKey);this.updateEdgeObjectFromProperty(k,w)}if(this.edgeDataImporter.setTo){var A=this.findNode(C.endItem&&C.endItem.dataKey);this.updateEdgeObjectToProperty(A,w)}if(this.edgeDataImporter.setFromPointIndex&&(w.fromPointIndex=C.beginConnectionPointIndex,w.dataObj&&this.edgeDataImporter.setFromPointIndex(w.dataObj,C.beginConnectionPointIndex)),this.edgeDataImporter.setToPointIndex&&(w.toPointIndex=C.endConnectionPointIndex,w.dataObj&&this.edgeDataImporter.setToPointIndex(w.dataObj,C.endConnectionPointIndex)),this.edgeDataImporter.setPoints){var R=C.points.map(function(j){return{x:s.ModelUtils.getlUnitValue(P,j.x),y:s.ModelUtils.getlUnitValue(P,j.y)}});w.points=R,w.dataObj&&this.edgeDataImporter.setPoints(w.dataObj,R)}if(this.edgeDataImporter.setText){var M=void 0;1===C.getTextCount()&&C.getText()&&(M=C.getText());var L={};if(C.texts.forEach(function(j){L[j.position]=j.value}),w.texts=L,w.dataObj){var H="";M?H=M:L&&Object.keys(L).length&&(H=L),this.edgeDataImporter.setText(w.dataObj,H)}}this.edgeDataImporter.setLineOption&&(w.lineOption=C.properties.lineOption,w.dataObj&&this.edgeDataImporter.setLineOption(w.dataObj,C.properties.lineOption)),this.edgeDataImporter.setStartLineEnding&&(w.startLineEnding=C.properties.startLineEnding,w.dataObj&&this.edgeDataImporter.setStartLineEnding(w.dataObj,C.properties.startLineEnding)),this.edgeDataImporter.setEndLineEnding&&(w.endLineEnding=C.properties.endLineEnding,w.dataObj&&this.edgeDataImporter.setEndLineEnding(w.dataObj,C.properties.endLineEnding))},D.prototype.updateEdgeObjectKey=function(C,w,P){var k=P&&this.edgeDataImporter.getKey(P);if(null!=k&&k!==w.key&&(delete this.autoGeneratedDataKeys[w.key],w.key=k),C.dataKey=w.key,w.dataObj!==P){var A=this.edgeDataSource,R=A.indexOf(w.dataObj);A.splice(R,1,P),w.dataObj=P}},D.prototype.deleteEdges=function(C){var w=this;this.deleteItems(this.edges,function(P){return C.findConnectorByDataKey(P)},function(P){return w.edgeDataSource},function(P,k){var A=P.dataObj&&w.edgeDataImporter.getKey(P.dataObj)||P.key,R=w.findEdge(A);R&&w.edges.splice(w.edges.indexOf(R),1),k&&(w.beginChangesNotification(),w.changesListener.notifyEdgeRemoved.call(w.changesListener,A,P.dataObj,function(M,L){w.endChangesNotification(!1)},function(M){w.endChangesNotification(!1)}))})},D.prototype.beginNodeInserting=function(){this.nodeInsertingLockCount++},D.prototype.endNodeInserting=function(){this.nodeInsertingLockCount--,0===this.nodeInsertingLockCount&&this.raiseNodeInsertingStack()},D.prototype.isInNodeInserting=function(){return this.nodeInsertingLockCount>0},D.prototype.addToUpdateNodeKeyRelatedObjectsStack=function(C,w){var P=new f(C,w);this.updateNodeKeyRelatedObjectsStack.push(P)},D.prototype.raiseNodeInsertingStack=function(){for(this.beginUpdateNodeKeyRelatedObjects();this.updateNodeKeyRelatedObjectsStack.length>0;){var C=this.updateNodeKeyRelatedObjectsStack[0];this.updateNodeKeyRelatedObjects(C.shape,C.nodeObj),this.updateNodeKeyRelatedObjectsStack.splice(0,1),C.shape.description.hasTemplate&&C.nodeObj&&this.changesListener.reloadInsertedItem(C.nodeObj.key)}this.endUpdateNodeKeyRelatedObjects()},D.prototype.beginUpdateNodeKeyRelatedObjects=function(){this.updateNodeKeyRelatedObjectsCount++},D.prototype.endUpdateNodeKeyRelatedObjects=function(){this.updateNodeKeyRelatedObjectsCount--,0===this.updateNodeKeyRelatedObjectsCount&&this.raiseUpdateNodeKeyRelatedObjectsStack()},D.prototype.isInUpdateNodeKeyRelatedObjects=function(){return this.updateNodeKeyRelatedObjectsCount>0},D.prototype.addToUpdateNodeKeyRelatedObjectsStackAction=function(C,w){for(var P=new g(C,w),k=0;k<this.updateNodeKeyRelatedObjectsStackActions.length;k++)if(this.updateNodeKeyRelatedObjectsStackActions[k].kind===C&&this.updateNodeKeyRelatedObjectsStackActions[k].nodeObj===w)return;this.updateNodeKeyRelatedObjectsStackActions.push(P)},D.prototype.raiseUpdateNodeKeyRelatedObjectsStack=function(){for(;this.updateNodeKeyRelatedObjectsStackActions.length>0;){var C=this.updateNodeKeyRelatedObjectsStackActions[0];switch(C.kind){case"shape":this.updateNodeObjectContainerOrParentKeyInternal(C.nodeObj,this.changesListener);break;case"edge":this.updateEdgeObjectFromOrToPropertyInternal(C.nodeObj,this.changesListener)}this.updateNodeKeyRelatedObjectsStackActions.splice(0,1)}},D.prototype.beginChangesNotification=function(){this.changesListener.beginChangesNotification()},D.prototype.endChangesNotification=function(C){this.changesListener.endChangesNotification(C)},D}(d.DataSource);_.DocumentDataSource=O},9463:(J,_)=>{var x,b;Object.defineProperty(_,"__esModule",{value:!0}),_.Diagnostics=void 0,(b=x||(x={}))[b.Disabled=0]="Disabled",b[b.Console=1]="Console",b[b.Document=2]="Document";var m=function(){function b(){}return b.beginAverage=function(E){this.enableLogsAndTimers&&(this.lastAverageGroupName=E)},b.endAverage=function(){this.enableLogsAndTimers&&(this.lastAverageGroupName=null)},b.tryLogAverage=function(E){var y=this;if(this.lastAverageGroupName!==E){var p=Object.keys(this.timers).map(function(s){return y.timers[s]}).filter(function(s){return s.groupName===E});if(!p.filter(function(s){return!s.endTime}).length){var d=p.reduce(function(s,a){return s+(a.endTime-a.startTime)},0)/p.length;this.log("average: "+d)}}},b.timer=function(E){this.enableLogsAndTimers&&(this.lastCreatedTimer={message:E,startTime:performance.now(),groupName:this.lastAverageGroupName})},b.endTimer=function(){var E=this;if(this.enableLogsAndTimers){var y=this.lastCreatedTimer,p=setTimeout(function(){y.endTime=performance.now(),E.showMessage('timer "'+y.message+'": '+(y.endTime-y.startTime)),y.groupName&&E.tryLogAverage(y.groupName)},0);this.timers[p]=y,this.lastCreatedTimer=null}},b.logPerfInfo=function(){var E=document.querySelector(".dxdi-control > svg").querySelectorAll("*").length,y=performance.memory;this.log("nodes: "+E.toLocaleString()+(y?" memory: ":"")+(y?y.usedJSHeapSize.toLocaleString():""))},b.log=function(E){this.showMessage(E)},b.showMessage=function(E){switch(b.mode){case x.Console:console.log(E);break;case x.Document:var y=this.getElement().value;if(this.lastMessage===E){var p=y.indexOf("\r\n");p<0&&(p=y.indexOf("\n"));var d=y.substr(0,p);/( \()([0-9]+)(\))$/.test(d)?d=d.replace(/( \()([0-9]+)(\))$/,function(s,a,l,u){return a+ ++l+u}):d+=" (1)",this.getElement().value=d+y.substr(p)}else this.getElement().value=E+"\r\n"+y,this.lastMessage=E}},b.getElement=function(){var E=this;if(!this.el){this.el=document.createElement("textarea"),this.el.style.top="0px",this.el.style.right="0px",this.el.style.position="fixed",this.el.style.background="transparent",this.el.style.fontSize="11px",this.el.style.fontFamily="monospace",this.el.style.overflow="auto",this.el.style.width="400px",document.body.appendChild(this.el);var y=document.createElement("button");y.innerHTML="x",y.addEventListener("click",function(){E.el.value="",E.lastMessage=""}),y.style.top="0px",y.style.right="400px",y.style.position="fixed",y.style.opacity="0.1",document.body.appendChild(y)}return this.el},b.mode=x.Document,b.optimizeUsingRAF=!0,b.optimizeLayers=!0,b.timers={},b.enableLogsAndTimers=!1,b}();_.Diagnostics=m},2106:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramControl=void 0;var m=x(8900),b=x(1118),E=x(7156),y=x(82),p=x(6613),d=x(9021),s=x(1864),a=x(2230),l=x(8098),u=x(8397),h=x(8717),f=x(240),g=x(6879),O=x(6734),I=x(4867),D=x(3298),C=x(8675),w=x(5656),P=x(7176),k=x(2883),A=x(5714),R=x(1733),M=x(7959),L=x(3503),H=x(6214),j=x(3500),U=x(3607),K=x(8679),q=function(){function Y(){this.updateLockCount=0,this.shouldUpdateItemsByModel=!1,this.reloadContentNeeded=!1,this.reloadContentParameters=new H.ReloadContentParameters,this.reloadContentByExternalChangesParameters=new H.ReloadContentParameters,this.instanceId=K.MathUtils.generateGuid(),this.settings=new f.DiagramSettings,this.shapeDescriptionManager=new u.ShapeDescriptionManager,this.shapeDescriptionManager.onShapeDecriptionChanged.add(this),this.model=new p.DiagramModel,this.selection=new d.Selection(this.model),this.onNativeAction=new C.EventDispatcher,this.apiController=new w.ApiController(this.onNativeAction,this.selection,this.model),this.permissionsProvider=new k.PermissionsProvider(this.apiController),this.permissionsProvider.onRequestOperation.add(this),this.routingModel=new A.ConnectorRoutingModel,this.modelManipulator=new b.ModelManipulator(this.model,this.routingModel,this.permissionsProvider,this.shapeDescriptionManager),this.modelManipulator.onModelChanged.add(this.permissionsProvider),this.history=new s.History(this.modelManipulator,this),this.barManager=new a.BarManager(this),this.view=new O.ViewController(this.settings,this.barManager),this.commandManager=new E.CommandManager(this),this.eventManager=new y.EventManager(this),this.settings.onReadOnlyChanged.add(this.eventManager.mouseHandler),this.settings.onReadOnlyChanged.add(this.eventManager.visualizersManager),this.selection.onChanged.add(this.barManager),this.selection.onChanged.add(this.apiController),this.selection.onChanged.add(this.permissionsProvider),this.modelManipulator.commitItemsCreateChanges(),this.history.onChanged.add(this),this.toolboxManager=new D.ToolboxManager(this.shapeDescriptionManager),this.settings.onConnectorRoutingModeChanged.add(this.routingModel),P.ImageCache.instance.onReadyStateChanged.add(this)}return Object.defineProperty(Y.prototype,"operationSettings",{get:function(){return this.permissionsProvider.operationSettings},enumerable:!1,configurable:!0}),Y.prototype.cleanMarkup=function(W){this.toolboxManager.clean(W=W||function(z){j.RenderUtils.removeElement(z)}),this.barManager.clean(),this.render&&(this.settings.onZoomChanged.remove(this.render.view),this.settings.onViewChanged.remove(this.render.page),this.settings.onViewChanged.remove(this.render.view),this.settings.onReadOnlyChanged.remove(this.render),this.settings.onReadOnlyChanged.remove(this.render.selection),this.eventManager.cleanToolboxes(this.settings.onReadOnlyChanged),this.eventManager.onTextInputOperation.remove(this.render.input),this.eventManager.onTextInputOperation.remove(this.render.items),this.eventManager.onTextInputOperation.remove(this.render.selection),this.eventManager.onMouseOperation.remove(this.render.items),this.eventManager.onMouseOperation.remove(this.render.selection),this.eventManager.onMouseOperation.remove(this.render.view),this.eventManager.onMouseOperation.remove(this.render),this.eventManager.onVisualizersUpdate.remove(this.render.selection),this.modelManipulator.onModelSizeChanged.remove(this.render.view),this.modelManipulator.onModelSizeChanged.remove(this.render.page),this.modelManipulator.onModelChanged.remove(this.render.items),this.modelManipulator.onModelChanged.remove(this.render.page),this.modelManipulator.onModelChanged.remove(this.render.selection),this.selection.onChanged.remove(this.render.selection),this.selection.onChanged.remove(this.render.items),this.render.clean(W),this.render=void 0),this.measurer&&this.measurer instanceof R.TextMeasurer&&this.measurer.clean()},Y.prototype.dispose=function(){P.ImageCache.instance.onReadyStateChanged.remove(this)},Y.prototype.createDocument=function(W,z,Z){this.measurer||this.initMeasurer(W),this.render?this.render.replaceParent(W,z):(this.render=new l.RenderManager(W,this.eventManager,this.measurer,{pageColor:this.model.pageColor,modelSize:this.model.size,pageLandscape:this.model.pageLandscape,pageSize:this.model.pageSize,simpleView:this.settings.simpleView,readOnly:this.settings.readOnly,contextMenuEnabled:this.settings.contextMenuEnabled,gridSize:this.settings.gridSize,gridVisible:this.settings.showGrid,zoomLevel:this.settings.zoomLevel,autoZoom:this.settings.autoZoom,rectangle:this.model.getRectangle(!0)},this.instanceId,z,Z),this.settings.onZoomChanged.add(this.render.view),this.settings.onViewChanged.add(this.render.page),this.settings.onViewChanged.add(this.render.view),this.settings.onReadOnlyChanged.add(this.render),this.settings.onReadOnlyChanged.add(this.render.selection),this.eventManager.onTextInputOperation.add(this.render.input),this.eventManager.onTextInputOperation.add(this.render.items),this.eventManager.onTextInputOperation.add(this.render.selection),this.eventManager.onTextInputOperation.add(this),this.eventManager.onMouseOperation.add(this.render.items),this.eventManager.onMouseOperation.add(this.render.selection),this.eventManager.onMouseOperation.add(this.render.view),this.eventManager.onMouseOperation.add(this.render),this.eventManager.onVisualizersUpdate.add(this.render.selection),this.modelManipulator.onModelSizeChanged.add(this.render.view),this.modelManipulator.onModelSizeChanged.add(this.render.page),this.modelManipulator.onModelChanged.add(this.render.items),this.modelManipulator.onModelChanged.add(this.render.page),this.modelManipulator.onModelChanged.add(this.render.selection),this.selection.onChanged.add(this.render.selection),this.selection.onChanged.add(this.render.items),this.render.update(!1),this.render.onNewModel(this.model.items),this.modelManipulator.commitItemsCreateChanges(),this.view.initialize(this.render.view),this.settings.zoomLevelWasChanged&&this.raiseCanvasViewActualZoomChanged(),this.selection.raiseSelectionChanged())},Y.prototype.createToolbox=function(W,z,Z,se){var re=this.toolboxManager.create(W,this.settings.readOnly,!0,z,Z,this.getToolboxAllowedShapeTypes.bind(this),this.instanceId,se);this.settings.onReadOnlyChanged.add(re),re.onDragOperation.add(this),re.onDragOperation.add(this.apiController),this.eventManager.registerToolbox(re)},Y.prototype.createContextToolbox=function(W,z,Z,se,re){this.cleanContextToolbox(),this.contextToolbox=this.toolboxManager.create(W,this.settings.readOnly,!1,z,Z,this.getToolboxAllowedShapeTypes.bind(this),this.instanceId,se),this.contextToolbox.onClickOperation.add(this),this.contextToolboxOnClick=re},Y.prototype.getToolboxAllowedShapeTypes=function(W){var z=this,Z=[];return this.permissionsProvider.beginUpdateUI(),W.forEach(function(se){z.permissionsProvider.canAddShapeFromToolbox(se)&&Z.push(se)}),this.permissionsProvider.endUpdateUI(),Z},Y.prototype.cleanContextToolbox=function(){this.contextToolbox&&(this.toolboxManager.clean(void 0,this.contextToolbox),this.contextToolbox=void 0,this.contextToolboxOnClick=void 0)},Y.prototype.refreshToolbox=function(W){this.permissionsProvider.clearCache(g.DiagramModelOperation.AddShapeFromToolbox),this.toolboxManager.refresh(W)},Y.prototype.applyToolboxFilter=function(W,z){return this.toolboxManager.applyFilter(W,z)},Y.prototype.notifyToolboxClick=function(W){this.contextToolboxOnClick&&this.contextToolboxOnClick(W)},Y.prototype.initMeasurer=function(W){this.measurer=new R.TextMeasurer(W)},Y.prototype.onDimensionChanged=function(){U.Browser.TouchUI||this.updateLayout(!0)},Y.prototype.updateLayout=function(W){void 0===W&&(W=!1),this.render&&this.render.update(!W)},Y.prototype.captureFocus=function(){this.render&&this.render.input.captureFocus()},Y.prototype.isFocused=function(){return!this.render||this.render.input.isFocused()},Y.prototype.registerBar=function(W){this.barManager.registerBar(W)},Y.prototype.updateBarItemsState=function(W,z){this.barManager.updateBarItemsState(W,z)},Y.prototype.getCommand=function(W){return this.commandManager.getCommand(W)},Y.prototype.getNativeItemByKey=function(W){var z=this.model.findItem(W);return z&&this.apiController.createNativeItem(z)},Y.prototype.getNativeItemByDataKey=function(W){var z=this.model.findItemByDataKey(W);return z&&this.apiController.createNativeItem(z)},Y.prototype.getNativeItems=function(){var W=this;return this.model.items.map(function(z){return W.apiController.createNativeItem(z)})},Y.prototype.getNativeSelectedItems=function(){var W=this;return this.selection.getKeys().map(function(z){return W.apiController.createNativeItem(W.model.findItem(z))})},Y.prototype.setSelectedItems=function(W){this.selection.set(W)},Y.prototype.scrollToItems=function(W){var z=this,Z=C.GeometryUtils.getCommonRectangle(W.map(function(se){return z.model.findItem(se).rectangle}));this.view.scrollIntoView(Z)},Y.prototype.setInitialStyleProperties=function(W){this.selection.inputPosition.setInitialStyleProperties(W)},Y.prototype.setInitialTextStyleProperties=function(W){this.selection.inputPosition.setInitialTextStyleProperties(W)},Y.prototype.setInitialConnectorProperties=function(W){this.selection.inputPosition.setInitialConnectorProperties(W)},Y.prototype.addCustomShapes=function(W){var z=this;W.forEach(function(Z){Z.apiController=z.apiController,Z.defaultWidth&&(Z.defaultWidth=I.ModelUtils.getTwipsValue(z.model.units,Z.defaultWidth)),Z.defaultHeight&&(Z.defaultHeight=I.ModelUtils.getTwipsValue(z.model.units,Z.defaultHeight)),Z.minWidth&&(Z.minWidth=I.ModelUtils.getTwipsValue(z.model.units,Z.minWidth)),Z.minHeight&&(Z.minHeight=I.ModelUtils.getTwipsValue(z.model.units,Z.minHeight)),Z.maxWidth&&(Z.maxWidth=I.ModelUtils.getTwipsValue(z.model.units,Z.maxWidth)),Z.maxHeight&&(Z.maxHeight=I.ModelUtils.getTwipsValue(z.model.units,Z.maxHeight)),z.shapeDescriptionManager.registerCustomShape(Z)})},Y.prototype.removeCustomShapes=function(W){var z=this;W.forEach(function(Z){z.shapeDescriptionManager.unregisterCustomShape(Z)})},Y.prototype.removeAllCustomShapes=function(){this.shapeDescriptionManager.unregisterAllCustomShapes()},Y.prototype.importModel=function(W){W.units=this.model.units,this.model=W,this.model.initializeKeyCounter(),this.apiController.model=W,this.onImportData()},Y.prototype.importItemsData=function(){this.onImportData()},Y.prototype.onImportData=function(){this.render&&(this.render.clear(),this.render.onNewModel(this.model.items)),this.permissionsProvider.clearCache(),this.selection.initialize(this.model),this.modelManipulator.initialize(this.model,this.routingModel),this.history.clear(),this.eventManager.initialize(),this.modelManipulator.commitPageChanges(),this.modelManipulator.commitItemsCreateChanges(),this.notifyViewChanged(),this.notifyHistoryChanged()},Y.prototype.createDocumentDataSource=function(W,z,Z,se,re){return this.documentDataSource=new h.DocumentDataSource(this,W,z,Z,se,re),this.apiController.setDataSource(this.documentDataSource),this.documentDataSource},Y.prototype.deleteDocumentDataSource=function(){this.apiController.setDataSource(null),delete this.documentDataSource},Y.prototype.applyShapeSizeSettings=function(W){this.settings.applyShapeSizeSettings(W,this.model.units)},Y.prototype.applyOperationSettings=function(W){this.permissionsProvider.operationSettings.applySettings(W)},Y.prototype.beginUpdateCanvas=function(){this.render&&(this.render.items.beginUpdate(),this.render.selection.beginUpdate())},Y.prototype.endUpdateCanvas=function(){this.render&&(this.render.items.endUpdate(),this.render.selection.endUpdate())},Y.prototype.beginUpdate=function(){this.barManager.beginUpdate(),this.apiController.beginUpdate(),this.eventManager.beginUpdate()},Y.prototype.endUpdate=function(){this.barManager.endUpdate(),this.apiController.endUpdate(),this.eventManager.endUpdate()},Y.prototype.notifyEdgeInserted=function(W,z,Z){this.onEdgeInserted?this.onEdgeInserted(W,z,Z):z(W)},Y.prototype.notifyEdgeUpdated=function(W,z,Z,se){this.onEdgeUpdated?this.onEdgeUpdated(W,z,Z,se):Z(W,z)},Y.prototype.notifyEdgeRemoved=function(W,z,Z,se){this.onEdgeUpdated?this.onEdgeRemoved(W,z,Z,se):Z(W,z)},Y.prototype.notifyNodeInserted=function(W,z,Z){this.onNodeInserted?this.onNodeInserted(W,z,Z):z(W)},Y.prototype.notifyNodeUpdated=function(W,z,Z,se){this.onNodeUpdated?this.onNodeUpdated(W,z,Z,se):Z(W,z)},Y.prototype.notifyNodeRemoved=function(W,z,Z,se){this.onNodeRemoved?this.onNodeRemoved(W,z,Z,se):Z(W,z)},Y.prototype.reloadInsertedItem=function(W){this.settings.reloadInsertedItemRequired&&this.reloadContent(W)},Y.prototype.reloadContent=function(W,z,Z,se){if(this.documentDataSource){this.isChangesLocked()&&(this.reloadContentNeeded=!0);var re=!0===se||void 0===se&&!this.reloadContentNeeded,Q=re?this.reloadContentByExternalChangesParameters:this.reloadContentParameters;Q.add(W,z,Z),this.isChangesLocked()||(this.reloadContentCore(Q,re),this.barManager.updateItemsState())}},Y.prototype.reloadContentCore=function(W,z){var Z=this,se=W.getData&&W.getData(),re=this.documentDataSource.refetchData(se&&se.nodeDataSource,se&&se.edgeDataSource);this.beginUpdateCanvas(),this.permissionsProvider.lockPermissions(),this.documentDataSource.updateModelItems(this.history,this.model,this.shapeDescriptionManager,this.selection,new L.DataLayoutParameters(this.settings,W.layoutParameters),z,W.dataKeys,function(Q){Z.modelManipulator.commitItemUpdateChanges(Q)},re,this.settings.snapToGrid,this.settings.gridSize,this.measurer),this.permissionsProvider.unlockPermissions(),this.endUpdateCanvas(),W.clear()},Y.prototype.notifyHistoryChanged=function(){this.documentDataSource?(this.shouldUpdateItemsByModel=!0,this.settings.readOnly||this.notifyDataChanges()):this.raiseOnChanged()},Y.prototype.notifyViewChanged=function(){this.settings.notifyViewChanged()},Y.prototype.notifyToolboxDragStart=function(W){this.render.notifyToolboxDragStart(W),this.onToolboxDragStart&&this.onToolboxDragStart()},Y.prototype.notifyToolboxDragEnd=function(W){this.render.notifyToolboxDragEnd(W),this.onToolboxDragEnd&&this.onToolboxDragEnd()},Y.prototype.notifyToolboxDraggingMouseMove=function(W){this.render&&this.render.notifyToolboxDraggingMouseMove(W)},Y.prototype.notifyTextInputStart=function(W,z,Z,se){this.onTextInputStart&&this.onTextInputStart()},Y.prototype.notifyTextInputEnd=function(W,z){this.onTextInputEnd&&this.onTextInputEnd()},Y.prototype.notifyTextInputPermissionsCheck=function(W,z){},Y.prototype.notifyToggleFullscreen=function(W){this.onToggleFullscreen&&this.onToggleFullscreen(W)},Y.prototype.notifyShowContextMenu=function(W,z){if(this.onShowContextMenu&&this.render){var Z=void 0;if(this.selection.getSelectedItems(!0).length>0){var se=I.ModelUtils.createRectangle(this.selection.getSelectedItems(!0)),re=this.render.getEventPointByModelPoint(se.createPosition()),Q=this.render.view.getAbsoluteSize(se.createSize());Z={x:re.x,y:re.y,width:Q.width,height:Q.height}}if(W)this.contextMenuPosition=new m.Point(W.x,W.y),this.onShowContextMenu(W.x,W.y,Z);else if(z){var G=this.render.getEventPointByModelPoint(z);this.contextMenuPosition=G.clone(),this.onShowContextMenu(G.x,G.y,Z)}}},Y.prototype.notifyHideContextMenu=function(){this.onHideContextMenu&&this.render&&this.onHideContextMenu()},Y.prototype.notifyShowContextToolbox=function(W,z,Z,se,re){if(this.onShowContextToolbox&&this.render){var Q=this.render.getEventPointByModelPoint(W);this.onShowContextToolbox(Q.x,Q.y,Z,se,re),this.render.view.notifyShowContextToolbox()}},Y.prototype.notifyHideContextToolbox=function(){this.onHideContextToolbox&&this.render&&(this.onHideContextToolbox(),this.render.view.notifyHideContextToolbox()),this.cleanContextToolbox()},Y.prototype.notifyShapeDescriptionChanged=function(W){this.modelManipulator.updateShapeDescription(W)},Y.prototype.notifyImageCacheReadyStateChanged=function(W){this.barManager.updateItemsState()},Y.prototype.raiseCanvasViewActualZoomChanged=function(){this.render.view.raiseActualZoomChanged()},Y.prototype.notifyRequestOperation=function(W,z){this.requestOperationByDataSource(W,z)||this.onRequestOperation&&this.onRequestOperation(W,z)},Y.prototype.requestOperationByDataSource=function(W,z){if(!this.documentDataSource||!this.documentDataSource.IsNodeParentIdMode()&&!this.documentDataSource.IsNodeItemsMode())return!1;if(W===g.DiagramModelOperation.ChangeConnection){var Z=z,se=Z.shape&&this.model.findItem(Z.shape.id),re=Z.connector&&this.model.findItem(Z.connector.id);if(!se||!re)return;if(Z.position===M.ConnectorPosition.End)for(var Q=0;Q<se.attachedConnectors.length;Q++){var G=se.attachedConnectors[Q];if(G!==re&&G.endItem&&G.endItem===se){Z.allowed=!1;break}}Z.allowed&&re.beginItem&&re.endItem&&this.isShapeParent(re.endItem,re.beginItem)&&(Z.allowed=!1)}return!z.allowed},Y.prototype.isShapeParent=function(W,z){if(W===z)return!0;for(var Z=0;Z<W.attachedConnectors.length;Z++){var se=W.attachedConnectors[Z];if(se.beginItem===W&&se.endItem){var re=se.endItem;if(re===z||this.isShapeParent(re,z))return!0}}return!1},Y.prototype.isChangesLocked=function(){return this.updateLockCount>0},Y.prototype.beginChangesNotification=function(){this.isChangesLocked()||this.changesLockChanged&&this.changesLockChanged(!0),this.updateLockCount++},Y.prototype.endChangesNotification=function(W){var z=this;this.updateLockCount--,this.isChangesLocked()||(this.changesLockChanged(!1),W||setTimeout(function(){z.notifyReloadContent(),z.notifyDataChanges()},0))},Y.prototype.changesLockChanged=function(W){W?this.lockedReadOnly=this.settings.readOnly:W=this.lockedReadOnly,this.commandManager.getCommand(E.DiagramCommand.ToggleReadOnly).execute(W)},Y.prototype.notifyDataChanges=function(){this.isChangesLocked()||(this.shouldUpdateItemsByModel&&(this.documentDataSource.updateItemsByModel(this.model),this.shouldUpdateItemsByModel=!1),this.raiseOnChanged())},Y.prototype.notifyReloadContent=function(){this.reloadContentNeeded&&(this.reloadContentParameters.empty||this.reloadContentCore(this.reloadContentParameters,!1),this.reloadContentByExternalChangesParameters.empty||this.reloadContentCore(this.reloadContentByExternalChangesParameters,!0),this.reloadContentNeeded=!1)},Y.prototype.raiseOnChanged=function(){this.onChanged&&this.onChanged()},Y}();_.DiagramControl=q},5383:(J,_)=>{var x;Object.defineProperty(_,"__esModule",{value:!0}),_.PageOrientation=_.DiagramUnit=void 0,(x=_.DiagramUnit||(_.DiagramUnit={}))[x.In=0]="In",x[x.Cm=1]="Cm",x[x.Px=2]="Px",function(x){x[x.Portrait=0]="Portrait",x[x.Landscape=1]="Landscape"}(_.PageOrientation||(_.PageOrientation={}))},9946:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ContextMenuHandler=void 0;var E=x(8675),y=x(6031),p=x(2153),d=x(1772),s=x(9279),a=function(l){function u(){var h=null!==l&&l.apply(this,arguments)||this;return h.contextMenuVisible=!1,h.textInputStarted=!1,h.canHideContextMenu=!0,h.onVisibilityChanged=new E.EventDispatcher,h}return b(u,l),u.prototype.onMouseDown=function(h){h.button===y.MouseButton.Left&&h.source.type!==y.MouseEventElementType.Undefined&&this.hideContextMenu()},u.prototype.onMouseUp=function(h){(!s.Browser.MacOSPlatform||s.Browser.MacOSPlatform&&this.canHideContextMenu)&&this.hideContextMenu(),this.canHideContextMenu=!0},u.prototype.onContextMenu=function(h){s.Browser.MacOSPlatform&&(this.canHideContextMenu=!1),this.showContextMenu(h.eventPoint,h.modelPoint)},u.prototype.onFocus=function(h){},u.prototype.onBlur=function(h){},u.prototype.onTextInputFocus=function(h){},u.prototype.onTextInputBlur=function(h){},u.prototype.onLongTouch=function(h){},u.prototype.onKeyDown=function(h){h.keyCode===p.KeyCode.Esc&&this.hideContextMenu()},u.prototype.onShortcut=function(h){this.hideContextMenu()},u.prototype.showContextMenu=function(h,f){var g=this;this.textInputStarted||window.setTimeout(function(){g.onVisibilityChanged.raise1(function(O){return O.notifyShowContextMenu(h,f)}),g.contextMenuVisible=!0},0)},u.prototype.hideContextMenu=function(){var h=this;this.contextMenuVisible&&window.setTimeout(function(){h.onVisibilityChanged.raise1(function(f){return f.notifyHideContextMenu()}),h.contextMenuVisible=!1},0)},u.prototype.notifyDragStart=function(h){},u.prototype.notifyDragEnd=function(h){},u.prototype.notifyDragScrollStart=function(){},u.prototype.notifyDragScrollEnd=function(){},u.prototype.notifyShowContextToolbox=function(h,f,g,O,I){},u.prototype.notifyHideContextToolbox=function(){},u.prototype.notifyTextInputStart=function(h,f,g,O){this.textInputStarted=!0},u.prototype.notifyTextInputEnd=function(h,f){this.textInputStarted=!1},u.prototype.notifyTextInputPermissionsCheck=function(h,f){},u.prototype.onUpdateUnlocked=function(h){},u}(d.BatchUpdatableObject);_.ContextMenuHandler=a},151:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ContextMenuTouchHandler=void 0;var E=x(6031),y=x(9946),p=x(4867),d=function(s){function a(l){var u=s.call(this)||this;return u.selection=l,u.contextToolboxVisible=!1,u.selection.onChanged.add(u),u}return b(a,s),a.prototype.onMouseDown=function(l){void 0===l.source.key&&this.hideContextMenu()},a.prototype.onMouseUp=function(l){},a.prototype.onFocus=function(l){var u=this;setTimeout(function(){u.showContextMenuAtSelection()},1)},a.prototype.onBlur=function(l){var u=this;setTimeout(function(){u.hideContextMenu()},1)},a.prototype.onTextInputFocus=function(l){var u=this;setTimeout(function(){u.hideContextMenu()},1)},a.prototype.onTextInputBlur=function(l){var u=this;setTimeout(function(){u.showContextMenuAtSelection()},1)},a.prototype.onLongTouch=function(l){l.source.type===E.MouseEventElementType.Document&&this.showContextMenuAtEmptySelection(l.modelPoint)},a.prototype.onKeyDown=function(l){},a.prototype.onShortcut=function(l){},a.prototype.getSelectedItems=function(){return this.selection.getSelectedItems(!0)},a.prototype.showContextMenuAtSelection=function(){if(!this.contextToolboxVisible){var l=this.getSelectedItems();0!==l.length&&this.showContextMenu(void 0,p.ModelUtils.createRectangle(l).createPosition())}},a.prototype.showContextMenuAtEmptySelection=function(l){this.contextToolboxVisible||0===this.getSelectedItems().length&&this.showContextMenu(void 0,l)},a.prototype.notifyDragStart=function(l){this.hideContextMenu()},a.prototype.notifyDragEnd=function(l){this.showContextMenuAtSelection()},a.prototype.notifySelectionChanged=function(l){this.isUpdateLocked()?this.registerOccurredEvent(1):this.raiseSelectionChanged()},a.prototype.raiseSelectionChanged=function(){0!==this.getSelectedItems().length?this.showContextMenuAtSelection():this.hideContextMenu()},a.prototype.onUpdateUnlocked=function(l){1&l&&this.raiseSelectionChanged()},a.prototype.notifyShowContextToolbox=function(l,u,h,f,g){this.contextToolboxVisible=!0,this.hideContextMenu()},a.prototype.notifyHideContextToolbox=function(){this.contextToolboxVisible=!1,this.showContextMenuAtSelection()},a}(y.ContextMenuHandler);_.ContextMenuTouchHandler=d},4426:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ContextToolboxHandler=void 0;var m=x(6031),b=x(8675),E=x(2153),y=x(9279),p=function(){function d(){this.contextToolboxVisible=!1,this.onVisibilityChanged=new b.EventDispatcher}return d.prototype.onMouseDown=function(s){s.source.type!==m.MouseEventElementType.Undefined&&this.hideContextToolbox()},d.prototype.onMouseUp=function(s){s.source.type===m.MouseEventElementType.Undefined&&y.Browser.TouchUI||this.hideContextToolbox()},d.prototype.onFocus=function(s){},d.prototype.onBlur=function(s){},d.prototype.onKeyDown=function(s){s.keyCode===E.KeyCode.Esc&&this.hideContextToolbox()},d.prototype.onShortcut=function(s){this.hideContextToolbox()},d.prototype.showContextToolbox=function(s,a,l,u,h,f){this.onVisibilityChanged.raise1(function(g){return g.notifyShowContextToolbox(s,a,l,u,h)}),this.contextToolboxVisible=!0,this.contextToolboxCancelCallback=f},d.prototype.hideContextToolbox=function(s){this.contextToolboxVisible&&(this.onVisibilityChanged.raise1(function(a){return a.notifyHideContextToolbox()}),this.contextToolboxCancelCallback&&(s||this.contextToolboxCancelCallback(),this.contextToolboxCancelCallback=void 0),this.contextToolboxVisible=!1)},d}();_.ContextToolboxHandler=p},6031:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramClipboardEvent=_.DiagramKeyboardEvent=_.DiagramContextMenuEvent=_.DiagramWheelEvent=_.DiagramMouseEvent=_.DiagramMouseEventBase=_.DiagramMouseEventTouch=_.DiagramFocusEvent=_.DiagramEvent=_.ResizeEventSource=_.MouseEventSource=_.MouseEventElementType=_.MouseButton=void 0;var O,E=x(2153);(O=_.MouseButton||(_.MouseButton={}))[O.None=0]="None",O[O.Left=1]="Left",O[O.Right=2]="Right",O[O.Middle=4]="Middle",function(O){O[O.Undefined=0]="Undefined",O[O.Background=1]="Background",O[O.Document=2]="Document",O[O.Connector=3]="Connector",O[O.ConnectorPoint=4]="ConnectorPoint",O[O.ConnectorSide=5]="ConnectorSide",O[O.ConnectorOrthogonalSide=6]="ConnectorOrthogonalSide",O[O.ConnectorText=7]="ConnectorText",O[O.Shape=8]="Shape",O[O.ShapeResizeBox=9]="ShapeResizeBox",O[O.ShapeParameterBox=10]="ShapeParameterBox",O[O.SelectionRect=11]="SelectionRect",O[O.ShapeConnectionPoint=12]="ShapeConnectionPoint",O[O.ShapeExpandButton=13]="ShapeExpandButton"}(_.MouseEventElementType||(_.MouseEventElementType={})),_.MouseEventSource=function(O,I,D){this.type=O,this.key=I,this.value=D},function(O){O[O.Undefined=0]="Undefined",O[O.ResizeBox_NW=1]="ResizeBox_NW",O[O.ResizeBox_NE=2]="ResizeBox_NE",O[O.ResizeBox_SE=3]="ResizeBox_SE",O[O.ResizeBox_SW=4]="ResizeBox_SW",O[O.ResizeBox_N=5]="ResizeBox_N",O[O.ResizeBox_E=6]="ResizeBox_E",O[O.ResizeBox_S=7]="ResizeBox_S",O[O.ResizeBox_W=8]="ResizeBox_W"}(_.ResizeEventSource||(_.ResizeEventSource={}));var p=function(O){this.modifiers=O};_.DiagramEvent=p;var d=function(O){function I(D){var C=O.call(this,E.ModifierKey.None)||this;return C.inputText=D,C}return b(I,O),I}(p);_.DiagramFocusEvent=d,_.DiagramMouseEventTouch=function(O,I){this.offsetPoint=O,this.modelPoint=I};var a=function(O){function I(D,C,w,P){var k=O.call(this,D)||this;return k.offsetPoint=C,k.modelPoint=w,k.source=P,k}return b(I,O),I}(p);_.DiagramMouseEventBase=a;var l=function(O){function I(D,C,w,P,k,A,R){void 0===A&&(A=[]);var M=O.call(this,D,w,P,k)||this;return M.button=C,M.touches=A,M.isTouchMode=R,M.scrollX=0,M.scrollY=0,M}return b(I,O),I}(a);_.DiagramMouseEvent=l;var u=function(O){function I(D,C,w,P,k,A){var R=O.call(this,D,P,k,A)||this;return R.deltaX=C,R.deltaY=w,R}return b(I,O),I}(a);_.DiagramWheelEvent=u;var h=function(O){function I(D,C,w){var P=O.call(this,D)||this;return P.eventPoint=C,P.modelPoint=w,P}return b(I,O),I}(p);_.DiagramContextMenuEvent=h;var f=function(O){function I(D,C,w){var P=O.call(this,D)||this;return P.keyCode=C,P.inputText=w,P}return b(I,O),I.prototype.getShortcutCode=function(){return this.modifiers|this.keyCode},I}(p);_.DiagramKeyboardEvent=f;var g=function(O){function I(D){var C=O.call(this,E.ModifierKey.None)||this;return C.clipboardData=D,C}return b(I,O),I}(p);_.DiagramClipboardEvent=g},82:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EventManager=void 0;var m=x(5689),b=x(8675),E=x(8376),y=x(9946),p=x(151),d=x(7733),s=x(7459),a=x(4426),l=x(9279),u=x(2153),h=function(){function f(g){this.onMouseOperation=new b.EventDispatcher,this.onTextInputOperation=new b.EventDispatcher,this.toolboxes=[],this.control=g,this.visualizersManager=b.EventUtils.isTouchMode()?new s.VisualizerTouchManager(g.selection,g.model,this,g.settings):new d.VisualizerManager(g.selection,g.model,this,g.settings),this.onMouseOperation.add(this.visualizersManager),this.contextMenuHandler=l.Browser.TouchUI?new p.ContextMenuTouchHandler(g.selection):new y.ContextMenuHandler,this.contextMenuHandler.onVisibilityChanged.add(g),this.onMouseOperation.add(this.contextMenuHandler),this.onTextInputOperation.add(this.contextMenuHandler),this.contextToolboxHandler=new a.ContextToolboxHandler,this.contextToolboxHandler.onVisibilityChanged.add(g),this.contextToolboxHandler.onVisibilityChanged.add(this.contextMenuHandler),this.mouseHandler=new m.MouseHandler(g.history,g.selection,g.model,this,g.settings.readOnly,g.view,this.visualizersManager,this.contextToolboxHandler,g.shapeDescriptionManager,g.settings,g.permissionsProvider),this.textInputHandler=new E.TextInputHandler(g),this.visualizersManager.onVisualizersUpdate.add(this.mouseHandler)}return Object.defineProperty(f.prototype,"onVisualizersUpdate",{get:function(){return this.visualizersManager.onVisualizersUpdate},enumerable:!1,configurable:!0}),f.prototype.registerToolbox=function(g){this.toolboxes.push(g)},f.prototype.cleanToolboxes=function(g){this.toolboxes.forEach(function(O){g.remove(O)}),this.toolboxes=[]},f.prototype.initialize=function(){this.visualizersManager.initialize(this.control.model),this.mouseHandler.initialize(this.control.model)},f.prototype.beginUpdate=function(g){this.contextMenuHandler.beginUpdate(),this.visualizersManager.beginUpdate()},f.prototype.endUpdate=function(){this.contextMenuHandler.endUpdate(),this.visualizersManager.endUpdate()},f.prototype.onMouseDown=function(g){this.mouseHandler.onMouseDown(g),this.contextMenuHandler.onMouseDown(g),this.visualizersManager.onMouseDown(g),this.contextToolboxHandler.onMouseDown(g)},f.prototype.onMouseMove=function(g){this.processDragging(g),this.mouseHandler.onMouseMove(g)},f.prototype.onMouseUp=function(g){this.contextToolboxHandler.onMouseUp(g),this.mouseHandler.onMouseUp(g),this.contextMenuHandler.onMouseUp(g),this.visualizersManager.onMouseUp(g),this.processDragging(g)},f.prototype.onMouseEnter=function(g){this.visualizersManager.onMouseEnter(g)},f.prototype.onMouseLeave=function(g){this.visualizersManager.onMouseLeave(g)},f.prototype.onDblClick=function(g){this.mouseHandler.onMouseDblClick(g),this.textInputHandler.onDblClick(g),this.control.apiController.notifyDblClick(g)},f.prototype.onClick=function(g){this.mouseHandler.onMouseClick(g),this.control.apiController.notifyClick(g)},f.prototype.onContextMenu=function(g){this.contextMenuHandler.onContextMenu(g)},f.prototype.onLongTouch=function(g){this.mouseHandler.onLongTouch(g),this.contextMenuHandler.onLongTouch(g)},f.prototype.onBlur=function(g){this.contextMenuHandler.onBlur(g),this.contextToolboxHandler.onBlur(g),this.visualizersManager.onBlur(g)},f.prototype.onFocus=function(g){this.contextMenuHandler.onFocus(g),this.contextToolboxHandler.onFocus(g),this.visualizersManager.onFocus(g)},f.prototype.onKeyDown=function(g){var O=g.getShortcutCode();this.onShortcut(O)?(this.visualizersManager.updateConnectionPoints(),this.contextMenuHandler.onShortcut(g),this.contextToolboxHandler.onShortcut(g),g.preventDefault=!0):this.isShortcutForFocusInput(O)&&(g.preventDefault=!0),this.contextMenuHandler.onKeyDown(g),this.contextToolboxHandler.onKeyDown(g),this.mouseHandler.onKeyDown(g)},f.prototype.onKeyUp=function(g){this.mouseHandler.onKeyUp(g)},f.prototype.onTextInputBlur=function(g){this.textInputHandler.onBlur(g),this.contextMenuHandler.onTextInputBlur(g)},f.prototype.onTextInputFocus=function(g){this.textInputHandler.onFocus(g),this.contextMenuHandler.onTextInputFocus(g)},f.prototype.onTextInputKeyDown=function(g){this.textInputHandler.onKeyDown(g)},f.prototype.onShortcut=function(g){return!!this.control.commandManager.processShortcut(g)||!!this.mouseHandler.onShortcut(g)||void 0},f.prototype.isShortcutForFocusInput=function(g){return g===u.KeyCode.Delete||g===(u.KeyCode.Delete|u.ModifierKey.Ctrl)||g===(u.KeyCode.Delete|u.ModifierKey.Meta)||g===u.KeyCode.Backspace||g===(u.KeyCode.Backspace|u.ModifierKey.Ctrl)||g===(u.KeyCode.Backspace|u.ModifierKey.Shift)||g===(u.KeyCode.Backspace|u.ModifierKey.Meta)||g===u.KeyCode.Home||g===u.KeyCode.End||g===u.KeyCode.Up||g===(u.KeyCode.Up|u.ModifierKey.Ctrl)||g===(u.KeyCode.Up|u.ModifierKey.Meta)||g===u.KeyCode.Down||g===(u.KeyCode.Down|u.ModifierKey.Ctrl)||g===(u.KeyCode.Down|u.ModifierKey.Meta)||g===u.KeyCode.Left||g===(u.KeyCode.Left|u.ModifierKey.Ctrl)||g===(u.KeyCode.Left|u.ModifierKey.Meta)||g===u.KeyCode.Right||g===(u.KeyCode.Right|u.ModifierKey.Ctrl)||g===(u.KeyCode.Right|u.ModifierKey.Meta)},f.prototype.onPaste=function(g){!this.textInputHandler.isTextInputActive()&&this.control.commandManager.processPaste(g.clipboardData)&&(this.visualizersManager.updateConnectionPoints(),g.preventDefault=!0)},f.prototype.onMouseWheel=function(g){this.mouseHandler.onWheel(g)&&(g.preventDefault=!0)},f.prototype.isFocused=function(){return this.control.isFocused()},f.prototype.processDragging=function(g){var O=this.getDraggingEvent();O&&this.draggingEvent!==O?(this.draggingEvent=O,this.mouseHandler.onDragStart(this.draggingEvent),this.control.captureFocus()):!O&&this.draggingEvent&&(delete this.draggingEvent,this.mouseHandler.onDragEnd(g))},f.prototype.getDraggingEvent=function(){return this.toolboxes.filter(function(g){return g.draggingObject}).map(function(g){return g.draggingObject.evt})[0]},f.prototype.onDocumentDragStart=function(g){this.control.beginUpdate(),this.control.captureFocus(),this.onMouseOperation.raise("notifyDragStart",g)},f.prototype.onDocumentDragEnd=function(g){this.onMouseOperation.raise("notifyDragEnd",g),this.control.endUpdate(),this.control.barManager.updateItemsState()},f.prototype.onDocumentDragScrollStart=function(){this.onMouseOperation.raise1(function(g){return g.notifyDragScrollStart()})},f.prototype.onDocumentDragScrollEnd=function(){this.onMouseOperation.raise1(function(g){return g.notifyDragScrollEnd()})},f.prototype.onDocumentClick=function(g){this.control.beginUpdate(),this.control.endUpdate(),this.control.barManager.updateItemsState()},f.prototype.raiseTextInputStart=function(g,O,I,D){this.onTextInputOperation.raise("notifyTextInputStart",g,O,I,D)},f.prototype.raiseTextInputEnd=function(g,O){this.onTextInputOperation.raise("notifyTextInputEnd",g,O)},f.prototype.raiseTextInputPermissionsCheck=function(g,O){this.onTextInputOperation.raise("notifyTextInputPermissionsCheck",g,O)},f.prototype.canFinishTextEditing=function(){return this.textInputHandler.canFinishTextEditing()},f}();_.EventManager=h},5689:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandler=void 0;var m=x(3250),b=x(6031),E=x(8900),y=x(4867),p=x(8032),d=x(7286),s=x(8502),a=x(2153),l=x(8675),u=function(){function h(f,g,O,I,D,C,w,P,k,A,R){this.history=f,this.selection=g,this.model=O,this.eventManager=I,this.readOnly=D,this.view=C,this.visualizerManager=w,this.contextToolboxHandler=P,this.shapeDescriptionManager=k,this.settings=A,this.permissionsProvider=R,this.finishStateLock=0,this.initialize(O),this.selection.onChanged.add(this)}return h.prototype.initialize=function(f){this.model=f,this.allowMultipleSelection=!0,this.allowCopyDiagramItems=!0,this.allowSnapToCellOnDragDiagramItem=!0,this.allowSnapToCellOnDragPoint=!0,this.allowSnapToCellOnResizeShape=!0,this.allowFixedDrag=!0,this.allowZoomOnWheel=!0,this.allowScrollPage=!0,this.shouldScrollPage=!1,this.copyDiagramItemsByCtrlAndShift=!1,this.startScrollingPageByCtrl=!1,this.initializeDefaultState()},h.prototype.initializeDefaultState=function(){this.defaultState=this.readOnly?l.EventUtils.isTouchMode()?new p.MouseHandlerDefaultReadOnlyTouchState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):new d.MouseHandlerDefaultReadOnlyState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):l.EventUtils.isTouchMode()?new s.MouseHandlerDefaultTouchState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings):new m.MouseHandlerDefaultState(this,this.history,this.selection,this.model,this.view,this.visualizerManager,this.shapeDescriptionManager,this.settings),this.switchToDefaultState()},h.prototype.onMouseDown=function(f){this.mouseDownEvent=f,this.state.onMouseDown(f)},h.prototype.onMouseMove=function(f){this.state.onMouseMove(f)},h.prototype.onMouseUp=function(f){this.state.onMouseUp(f)},h.prototype.onMouseDblClick=function(f){this.state.onMouseDblClick(f)},h.prototype.onMouseClick=function(f){this.state.onMouseClick(f)},h.prototype.onLongTouch=function(f){if(f.touches&&!(f.touches.length>1)){var g=f.source.key;void 0===g?this.selection.clear():this.selection.hasKey(g)?this.selection.remove(g):this.selection.add(g)}},h.prototype.onShortcut=function(f){return this.state.onShortcut(f)},h.prototype.onWheel=function(f){return this.state.onMouseWheel(f)},h.prototype.onDragStart=function(f){this.state.onDragStart(f)},h.prototype.onDragEnd=function(f){this.state.onDragEnd(f)},h.prototype.onKeyDown=function(f){this.state.onKeyDown(f)},h.prototype.onKeyUp=function(f){this.state.onKeyUp(f)},h.prototype.showContextToolbox=function(f,g,O,I,D,C){this.contextToolboxHandler.showContextToolbox(f,g,O,I,D,C)},h.prototype.hideContextToolbox=function(f){this.contextToolboxHandler.hideContextToolbox(f)},h.prototype.canScrollPage=function(f){return this.startScrollingPageByCtrl?!!this.hasCtrlModifier(f.modifiers)&&(!this.copyDiagramItemsByCtrlAndShift||f.source.type!==b.MouseEventElementType.Shape&&f.source.type!==b.MouseEventElementType.Connector):this.allowScrollPage&&this.shouldScrollPage},h.prototype.canMultipleSelection=function(f){return this.allowMultipleSelection&&this.hasCtrlOrShiftModifier(f.modifiers)},h.prototype.canCopySelectedItems=function(f){return!!this.allowCopyDiagramItems&&(this.copyDiagramItemsByCtrlAndShift?this.hasCtrlAndShiftModifier(f.modifiers):this.hasAltModifier(f.modifiers))},h.prototype.canCalculateFixedPosition=function(f){return!(!this.allowFixedDrag||!this.hasShiftModifier(f.modifiers)||this.copyDiagramItemsByCtrlAndShift&&this.hasCtrlModifier(f.modifiers))},h.prototype.canStartZoomOnWheel=function(f){return this.allowZoomOnWheel&&this.hasCtrlModifier(f.modifiers)},h.prototype.canFinishZoomOnWheel=function(f){return this.allowZoomOnWheel&&!this.hasCtrlModifier(f.modifiers)},h.prototype.onStartScrollPageByKeyboard=function(f){this.canStartScrollingPageByKeyboard(f)&&(this.raiseDragScrollStart(),this.shouldScrollPage=!0)},h.prototype.onFinishScrollPageByKeyboard=function(f){this.canEndScrollingPageByKeyboard(f)&&this.finishScrollingPage()},h.prototype.onFinishScrollPageByMouse=function(f){this.canEndScrollingPage(f)&&this.finishScrollingPage()},h.prototype.finishScrollingPage=function(){this.shouldScrollPage=!1,this.raiseDragScrollEnd(),this.switchToDefaultState()},h.prototype.hasCtrlOrShiftModifier=function(f){return this.hasCtrlModifier(f)||this.hasShiftModifier(f)},h.prototype.hasCtrlAndShiftModifier=function(f){return this.hasCtrlModifier(f)&&this.hasShiftModifier(f)},h.prototype.hasCtrlModifier=function(f){return(f&a.ModifierKey.Ctrl)>0},h.prototype.hasAltModifier=function(f){return(f&a.ModifierKey.Alt)>0},h.prototype.hasShiftModifier=function(f){return(f&a.ModifierKey.Shift)>0},h.prototype.canStartScrollingPageByKeyboard=function(f){return!this.startScrollingPageByCtrl&&!this.shouldScrollPage&&f.keyCode===a.KeyCode.Space},h.prototype.canEndScrollingPageByKeyboard=function(f){return!this.startScrollingPageByCtrl&&f.keyCode===a.KeyCode.Space},h.prototype.canEndScrollingPage=function(f){return!this.startScrollingPageByCtrl||this.hasCtrlModifier(f.modifiers)},h.prototype.getSnappedPointOnDragDiagramItem=function(f,g,O,I,D){var C=this.getSnapToCellOnDragDiagramItem(f);return new E.Point(this.getSnappedPos(this.getFixedXPosition(f,g,O,D),!0,C),this.getSnappedPos(this.getFixedYPosition(f,g,I,D),!1,C))},h.prototype.getSnappedPointOnDragPoint=function(f,g,O){var I=this.getSnapToCellOnDragPoint(f),D=this.getSnappedPos(g.x,!0,I),C=this.getSnappedPos(g.y,!1,I);return void 0===O||Math.pow(g.x-D,2)+Math.pow(g.y-C,2)<Math.pow(g.x-O.x,2)+Math.pow(g.y-O.y,2)?new E.Point(D,C):O},h.prototype.getSnappedOffsetOnDragPoint=function(f,g){var O=this.getSnapToCellOnDragPoint(f);return new E.Point(this.getSnappedPos(f.modelPoint.x-g.x,!0,O),this.getSnappedPos(f.modelPoint.y-g.y,!1,O))},h.prototype.lockAspectRatioOnShapeResize=function(f){return this.hasShiftModifier(f.modifiers)},h.prototype.getSnappedPositionOnResizeShape=function(f,g,O){return this.getSnapToCellOnResizeShape(f)?y.ModelUtils.getSnappedPos(this.model,this.settings.gridSize,g,O):g},h.prototype.getSnappedPos=function(f,g,O){return O?y.ModelUtils.getSnappedPos(this.model,this.settings.gridSize,f,g):f},h.prototype.getFixedXPosition=function(f,g,O,I){return O?g.x:g.x+f.modelPoint.x-I.x},h.prototype.getFixedYPosition=function(f,g,O,I){return O?g.y:g.y+f.modelPoint.y-I.y},h.prototype.getSnapToCellOnDragDiagramItem=function(f){return this.allowSnapToCellOnDragDiagramItem&&this.settings.snapToGrid&&!this.hasCtrlModifier(f.modifiers)},h.prototype.getSnapToCellOnDragPoint=function(f){return this.allowSnapToCellOnDragPoint&&this.settings.snapToGrid&&!this.hasCtrlModifier(f.modifiers)},h.prototype.getSnapToCellOnResizeShape=function(f){return this.allowSnapToCellOnResizeShape&&this.settings.snapToGrid&&!this.hasCtrlModifier(f.modifiers)},h.prototype.tryUpdateModelSize=function(f){this.lockPermissions(),y.ModelUtils.tryUpdateModelRectangle(this.history,f),this.unlockPermissions()},h.prototype.canAddDiagramItemToSelection=function(f){return f.source.key&&(f.button===b.MouseButton.Left||f.button===b.MouseButton.Right)},h.prototype.addDiagramItemToSelection=function(f){this.pressedDiagramItemKey=f.source.key,this.pressedDiagramItemInSelection=this.selection.hasKey(this.pressedDiagramItemKey),this.canMultipleSelection(f)?this.selection.add(f.source.key):this.changeSingleSelection(f.source.key)},h.prototype.canRemoveDiagramItemToSelection=function(f){return this.pressedDiagramItemKey&&f.source.key&&this.pressedDiagramItemKey===f.source.key&&(f.button===b.MouseButton.Left||f.button===b.MouseButton.Right)},h.prototype.removeDiagramItemFromSelection=function(f,g){this.pressedDiagramItemInSelection&&this.selection.getKeys().length>1&&f===b.MouseButton.Left&&this.selection.remove(g)},h.prototype.changeSingleSelection=function(f){this.selection.hasKey(f)||this.selection.set([f])},h.prototype.notifySelectionChanged=function(f){this.pressedDiagramItemKey&&!this.selection.hasKey(this.pressedDiagramItemKey)&&(this.pressedDiagramItemKey=void 0,this.pressedDiagramItemInSelection=!1)},h.prototype.raiseDragStart=function(f){this.eventManager.onDocumentDragStart(f)},h.prototype.raiseDragEnd=function(f){this.eventManager.onDocumentDragEnd(f)},h.prototype.raiseDragScrollStart=function(){this.eventManager.onDocumentDragScrollStart()},h.prototype.raiseDragScrollEnd=function(){this.eventManager.onDocumentDragScrollEnd()},h.prototype.raiseClick=function(f){this.eventManager.onDocumentClick(f)},h.prototype.beginStorePermissions=function(){this.permissionsProvider.beginStorePermissions()},h.prototype.endStorePermissions=function(){this.permissionsProvider.endStorePermissions()},h.prototype.isStoredPermissionsGranted=function(){return this.permissionsProvider.isStoredPermissionsGranted()},h.prototype.lockPermissions=function(){this.permissionsProvider.lockPermissions()},h.prototype.unlockPermissions=function(){this.permissionsProvider.unlockPermissions()},h.prototype.canPerformChangeConnection=function(f,g){var O=!0;return f?O=this.permissionsProvider.canChangeConnection(f,g.item,g.oldItem,g.position,g.connectionPointIndex):g.item&&(O=this.permissionsProvider.canChangeConnection(void 0,g.item,g.oldItem,g.position,g.connectionPointIndex)),O},h.prototype.canPerformChangeConnectionOnUpdateUI=function(f,g){this.permissionsProvider.beginUpdateUI();var O=this.canPerformChangeConnection(f,g);return this.permissionsProvider.endUpdateUI(),O},h.prototype.canFinishTextEditing=function(){return this.eventManager.canFinishTextEditing()},h.prototype.restartState=function(){this.state&&!this.finishStateLock&&(this.finishStateLock++,this.state.finish(),this.finishStateLock--),this.state.start()},h.prototype.switchToDefaultState=function(){this.switchState(this.defaultState)},h.prototype.switchState=function(f){this.newState=f,this.state&&!this.finishStateLock&&(this.finishStateLock++,this.state.finish(),this.finishStateLock--),this.newState&&(this.state=this.newState,this.state.start(),this.newState=void 0)},h.prototype.addInteractingItem=function(f,g){this.permissionsProvider.addInteractingItem(f,g)},h.prototype.clearInteractingItems=function(){this.permissionsProvider.clearInteractingItems()},h.prototype.notifyReadOnlyChanged=function(f){this.readOnly=f,this.initializeDefaultState()},h.prototype.notifySelectionRectShow=function(f){},h.prototype.notifySelectionRectHide=function(){},h.prototype.notifyResizeInfoShow=function(f,g){},h.prototype.notifyResizeInfoHide=function(){},h.prototype.notifyConnectionPointsShow=function(f,g,O,I){this.state.onConnectionPointsShow(f,g)},h.prototype.notifyConnectionPointsHide=function(){},h.prototype.notifyConnectionTargetShow=function(f,g){this.state.onConnectionTargetShow(f,g)},h.prototype.notifyConnectionTargetHide=function(){},h.prototype.notifyContainerTargetShow=function(f,g){},h.prototype.notifyContainerTargetHide=function(){},h.prototype.notifyExtensionLinesShow=function(f){},h.prototype.notifyExtensionLinesHide=function(){},h}();_.MouseHandler=u},5627:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerCreateConnectorState=void 0;var E=x(7959),y=x(3477),p=x(9603),d=x(3742),s=x(7060),a=x(4297),l=x(4145),u=x(4867),h=x(8930),f=x(9143),g=function(O){function I(D,C,w,P,k,A,R){var M=O.call(this,D,C,w,P)||this;return M.shapeDescriptionManager=k,M.selection=A,M.connectionPointIndex=R,M}return b(I,O),I.prototype.onMouseDown=function(D){void 0===this.connectionPointIndex&&(this.connectionPointIndex=parseInt(D.source.value)),this.connectedItem=this.model.findItem(D.source.key),this.pointIndex=1,this.pointPosition=E.ConnectorPosition.End,O.prototype.onMouseDown.call(this,D)},I.prototype.onMouseUp=function(D){this.connector&&!this.connector.endItem&&this.createNewShapeAtConnectorEnd(D),O.prototype.onMouseUp.call(this,D)},I.prototype.onApplyChanges=function(D){var C=this.getSnappedPoint(D,D.modelPoint);if(this.connector)O.prototype.onApplyChanges.call(this,D);else{var w=new p.AddConnectorHistoryItem([this.connectedItem.getConnectionPointPosition(this.connectionPointIndex,C),C]);this.history.addAndRedo(w),this.connector=this.model.findConnector(w.connectorKey),this.handler.addInteractingItem(this.connector),this.history.addAndRedo(new y.AddConnectionHistoryItem(this.connector,this.connectedItem,this.connectionPointIndex,E.ConnectorPosition.Begin)),u.ModelUtils.updateNewConnectorProperties(this.history,this.selection,this.connector.key)}},I.prototype.checkStoredPermissionsOnFinish=function(){this.connector&&this.connector.endItem&&O.prototype.checkStoredPermissionsOnFinish.call(this)},I.prototype.onFinishWithChanges=function(){O.prototype.onFinishWithChanges.call(this),this.history.addAndRedo(new a.SetSelectionHistoryItem(this.selection,[this.connector.key]))},I.prototype.createNewShapeAtConnectorEnd=function(D){var C=this,w=this.connector&&this.connector.beginItem;if(w)if(!this.connector||this.handler.canPerformChangeConnection(this.connector,{position:E.ConnectorPosition.End,connectionPointIndex:-1})){var P=this.getNewShapeSide(this.connector),k=this.getSnappedPoint(D,D.modelPoint),A=this.shapeDescriptionManager.getCategoryByDescription(w.description);this.handler.showContextToolbox(k,function(R){var M=R.clone();M.position=k.clone();var L=C.getNewShapePosition(M,P);return C.handler.getSnappedPointOnDragPoint(D,L)},P,A,function(R){if(R){C.handler.beginStorePermissions(),C.history.beginTransaction();var M=new l.AddShapeHistoryItem(C.shapeDescriptionManager.get(R),k);C.history.addAndRedo(M);var L=C.model.findShape(M.shapeKey),H=C.targetItem&&C.model.findNearestContainer(C.targetItem.key);H&&u.ModelUtils.insertToContainer(C.history,C.model,L,H);var j=C.getNewShapePosition(L,P);u.ModelUtils.setShapePosition(C.history,C.model,L,C.getSnappedPoint(D,j)),u.ModelUtils.updateNewShapeProperties(C.history,C.selection,L.key),C.history.addAndRedo(new y.AddConnectionHistoryItem(C.connector,L,L.getConnectionPointIndexForSide(P),E.ConnectorPosition.End)),H&&u.ModelUtils.updateConnectorContainer(C.history,C.model,C.connector),u.ModelUtils.updateShapeAttachedConnectors(C.history,C.model,L),C.handler.isStoredPermissionsGranted()?(C.handler.tryUpdateModelSize(),C.history.addAndRedo(new a.SetSelectionHistoryItem(C.selection,[L.key]))):(C.handler.lockPermissions(),C.history.undoTransaction(),C.handler.unlockPermissions(),C.checkNewConnectorPermissions()),C.history.endTransaction(),C.handler.endStorePermissions(),C.handler.hideContextToolbox(!0)}},function(){C.checkNewConnectorPermissions()})}else this.cancelChanges()},I.prototype.checkNewConnectorPermissions=function(){this.connector&&!this.handler.canPerformChangeConnection(this.connector,{position:E.ConnectorPosition.End,connectionPointIndex:-1})&&(this.handler.lockPermissions(),this.history.beginTransaction(),this.history.addAndRedo(new a.SetSelectionHistoryItem(this.selection,[])),this.connector.beginItem&&this.history.addAndRedo(new h.DeleteConnectionHistoryItem(this.connector,E.ConnectorPosition.Begin)),this.connector.endItem&&this.history.addAndRedo(new h.DeleteConnectionHistoryItem(this.connector,E.ConnectorPosition.End)),this.history.addAndRedo(new f.DeleteConnectorHistoryItem(this.connector.key)),this.history.endTransaction(),this.handler.unlockPermissions())},I.prototype.getNewShapePosition=function(D,C){switch(C){case d.ConnectionPointSide.North:return D.position.clone().offset(-D.size.width/2,0);case d.ConnectionPointSide.South:return D.position.clone().offset(-D.size.width/2,-D.size.height);case d.ConnectionPointSide.East:return D.position.clone().offset(-D.size.width,-D.size.height/2);case d.ConnectionPointSide.West:return D.position.clone().offset(0,-D.size.height/2)}},I.prototype.getNewShapeSide=function(D){var C=D.getRenderPoints();return I.getNewShapeSideByConnectorPoints(C[C.length-1],C[C.length-2])},I.prototype.getSourceItem=function(){return this.connectedItem},I.getNewShapeSideByConnectorPoints=function(D,C){return D.x===C.x?D.y>C.y?d.ConnectionPointSide.North:d.ConnectionPointSide.South:D.x>C.x?D.y===C.y?d.ConnectionPointSide.West:D.y>C.y?Math.abs(D.x-C.x)>Math.abs(D.y-C.y)?d.ConnectionPointSide.West:d.ConnectionPointSide.North:Math.abs(D.x-C.x)>Math.abs(D.y-C.y)?d.ConnectionPointSide.West:d.ConnectionPointSide.South:D.y===C.y?d.ConnectionPointSide.East:D.y>C.y?Math.abs(D.x-C.x)>Math.abs(D.y-C.y)?d.ConnectionPointSide.East:d.ConnectionPointSide.North:Math.abs(D.x-C.x)>Math.abs(D.y-C.y)?d.ConnectionPointSide.East:d.ConnectionPointSide.South},I}(s.MouseHandlerMoveConnectorPointStateBase);_.MouseHandlerCreateConnectorState=g},7286:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDefaultReadOnlyState=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.canDragObjectOnMouseDown=function(d){return!1},p.prototype.canExpandContainerOnMouseDown=function(d){return!1},p.prototype.canClearSelectionOnMouseDown=function(){return!1},p.prototype.canSelectOnMouseUp=function(d){return!0},p.prototype.canClearSelectionOnMouseUp=function(){return!0},p.prototype.updateConnectionsOnMouseMove=function(d){},p}(x(8213).MouseHandlerDefaultStateBase);_.MouseHandlerDefaultReadOnlyState=E},8032:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDefaultReadOnlyTouchState=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.canDragObjectOnMouseDown=function(d){return!1},p.prototype.canExpandContainerOnMouseDown=function(d){return!1},p.prototype.canClearSelectionOnMouseDown=function(){return!0},p.prototype.canSelectOnMouseUp=function(d){return!this.inSelection(d)},p.prototype.canClearSelectionOnMouseUp=function(){return!1},p}(x(7286).MouseHandlerDefaultReadOnlyState);_.MouseHandlerDefaultReadOnlyTouchState=E},3250:function(J,_,x){var m,b=this&&this.__extends||(m=function(C,w){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,k){P.__proto__=k}||function(P,k){for(var A in k)k.hasOwnProperty(A)&&(P[A]=k[A])})(C,w)},function(C,w){function P(){this.constructor=C}m(C,w),C.prototype=null===w?Object.create(w):(P.prototype=w.prototype,new P)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDefaultState=void 0;var E=x(6031),y=x(4402),p=x(5609),d=x(481),s=x(4908),a=x(5627),l=x(5209),u=x(6918),h=x(5391),f=x(8213),g=x(9979),O=x(7959),I=x(5168),D=function(C){function w(){return null!==C&&C.apply(this,arguments)||this}return b(w,C),w.prototype.finish=function(){this.visualizerManager.resetConnectionPoints(),C.prototype.finish.call(this)},w.prototype.onMouseDownCore=function(P){this.handler.canScrollPage(P)?this.startScrolling(P):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ConnectorText?(this.handler.changeSingleSelection(P.source.key),this.handler.switchState(new h.MouseHandlerMoveConnectorTextState(this.handler,this.history,this.model))):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ShapeResizeBox?this.handler.switchState(new p.MouseHandlerResizeShapeState(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.settings)):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ShapeParameterBox?this.handler.switchState(new s.MouseHandlerDragParameterPointState(this.handler,this.history,this.model)):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ConnectorPoint?this.handler.switchState(new y.MouseHandlerMoveConnectorPointState(this.handler,this.history,this.model,this.visualizerManager)):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ConnectorSide?this.handler.switchState(new d.MouseHandlerMoveConnectorSideState(this.handler,this.history,this.model)):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ConnectorOrthogonalSide?this.handler.switchState(new l.MouseHandlerMoveConnectorOrthogonalSideState(this.handler,this.history,this.model)):P.button===E.MouseButton.Left&&P.source.type===E.MouseEventElementType.ShapeConnectionPoint?this.handler.switchState(new a.MouseHandlerCreateConnectorState(this.handler,this.history,this.model,this.visualizerManager,this.shapeDescriptionManager,this.selection)):C.prototype.onMouseDownCore.call(this,P)},w.prototype.onDragDiagramItemOnMouseDown=function(P){this.handler.canAddDiagramItemToSelection(P)?P.source.type===E.MouseEventElementType.Shape?this.handler.switchState(new g.MouseHandlerMoveShapeState(this.handler,this.history,this.model,this.selection,this.visualizerManager)):P.source.type===E.MouseEventElementType.Connector&&this.handler.switchState(new I.MouseHandlerMoveConnectorState(this.handler,this.history,this.model,this.selection,this.visualizerManager)):C.prototype.onDragDiagramItemOnMouseDown.call(this,P)},w.prototype.onDragStart=function(P){this.handler.switchState(new u.MouseHandlerBeforeToolboxDraggingState(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.shapeDescriptionManager)),this.handler.state.onDragStart(P)},w.prototype.onMouseMoveCore=function(P){this.updateConnectionsOnMouseMove(P),C.prototype.onMouseMoveCore.call(this,P)},w.prototype.onMouseUp=function(P){this.handler.canRemoveDiagramItemToSelection(P)?this.handler.removeDiagramItemFromSelection(P.button,P.source.key):C.prototype.onMouseUp.call(this,P)},w.prototype.updateConnectionsOnMouseMove=function(P){var k=this.model.findItem(P.source.key);this.visualizerManager.updateConnections(k,P.source.type,P.source.value)},w.prototype.canDragObjectOnMouseDown=function(P){return!0},w.prototype.canExpandContainerOnMouseDown=function(P){return!0},w.prototype.canClearSelectionOnMouseDown=function(){return!1},w.prototype.canSelectOnMouseUp=function(P){return!1},w.prototype.canClearSelectionOnMouseUp=function(){return!0},w.prototype.onConnectionPointsShow=function(P,k){var A=this,R=this.model.findShape(P);R&&k.forEach(function(M,L){M.allowed=A.handler.canPerformChangeConnectionOnUpdateUI(void 0,{item:R,position:O.ConnectorPosition.Begin,connectionPointIndex:L})})},w}(f.MouseHandlerDefaultStateBase);_.MouseHandlerDefaultState=D},8213:function(J,_,x){var m,b=this&&this.__extends||(m=function(f,g){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,I){O.__proto__=I}||function(O,I){for(var D in I)I.hasOwnProperty(D)&&(O[D]=I[D])})(f,g)},function(f,g){function O(){this.constructor=f}m(f,g),f.prototype=null===g?Object.create(g):(O.prototype=g.prototype,new O)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDefaultStateBase=void 0;var E=x(5434),y=x(6031),p=x(5752),d=x(4869),s=x(7189),a=x(9582),l=x(9291),u=x(8461),h=function(f){function g(O,I,D,C,w,P,k,A){var R=f.call(this,O)||this;return R.history=I,R.selection=D,R.model=C,R.view=w,R.visualizerManager=P,R.shapeDescriptionManager=k,R.settings=A,R}return b(g,f),g.prototype.onKeyDown=function(O){this.handler.onStartScrollPageByKeyboard(O)},g.prototype.onKeyUp=function(O){this.handler.onFinishScrollPageByKeyboard(O)},g.prototype.onMouseDown=function(O){this.handler.canFinishTextEditing()&&(this.onMouseDownCore(O),this.handler.state!==this&&this.handler.state.onMouseDown(O))},g.prototype.onMouseDownCore=function(O){this.handler.canScrollPage(O)?this.startScrolling(O):this.hasDiagramItem(O)&&this.canDragObjectOnMouseDown(O.source.key)?this.onDragDiagramItemOnMouseDown(O):O.button===y.MouseButton.Left&&O.source.type===y.MouseEventElementType.ShapeExpandButton&&this.canExpandContainerOnMouseDown(O.source.key)?this.onShapeExpandBtnMouseDown(O):(!this.hasDiagramItem(O)&&this.canClearSelectionOnMouseDown()&&this.clearSelection(),this.startPoint=O.modelPoint)},g.prototype.onDragDiagramItemOnMouseDown=function(O){this.replaceSelection(O)},g.prototype.onMouseMove=function(O){this.onMouseMoveCore(O),this.handler.state!==this&&(this.handler.state.onMouseDown(this.handler.mouseDownEvent),this.handler.state.onMouseMove(O))},g.prototype.onMouseMoveCore=function(O){this.startPoint&&(Math.abs(this.startPoint.x-O.modelPoint.x)>g.startLimit||Math.abs(this.startPoint.y-O.modelPoint.y)>g.startLimit)&&(this.processOnMouseMoveAfterLimit(O),this.startPoint=void 0)},g.prototype.processOnMouseMoveAfterLimit=function(O){O.isTouchMode?O.touches.length>1?this.startZooming(O):this.startScrolling(O):this.startSelection(O)},g.prototype.onMouseUp=function(O){this.onMouseUpCore(O),this.handler.state!==this&&this.handler.state.onMouseUp(O)},g.prototype.onMouseUpCore=function(O){O.source.type===y.MouseEventElementType.Shape&&this.canSelectOnMouseUp(O.source.key)||O.source.type===y.MouseEventElementType.Connector&&this.canSelectOnMouseUp(O.source.key)||O.source.type===y.MouseEventElementType.ShapeExpandButton&&this.canSelectOnMouseUp(O.source.key)?this.replaceSelection(O):this.startPoint&&this.canClearSelectionOnMouseUp()&&this.clearSelection(),this.startPoint=void 0},g.prototype.onMouseWheel=function(O){return!!this.handler.canStartZoomOnWheel(O)&&(this.handler.switchState(new s.MouseHandlerZoomOnWheelState(this.handler,this.settings,this.view)),this.handler.state.onMouseWheel(O),!0)},g.prototype.onLongTouch=function(O){this.replaceMultipleSelection(O.source.key)},g.prototype.finish=function(){this.startPoint=void 0},g.prototype.startSelection=function(O){O.button===y.MouseButton.Left&&this.handler.switchState(new d.MouseHandlerSelectionState(this.handler,this.selection,this.visualizerManager))},g.prototype.startScrolling=function(O){O.button===y.MouseButton.Left&&(this.handler.raiseDragScrollStart(),this.handler.switchState(new a.MouseHandlerScrollingState(this.handler,this.view,this.selection)))},g.prototype.startZooming=function(O){this.handler.switchState(new u.MouseHandlerZoomOnPinchState(this.handler,this.selection,this.settings,this.view))},g.prototype.inSelection=function(O){return this.selection.hasKey(O)},g.prototype.hasDiagramItem=function(O){return O.source.type===y.MouseEventElementType.Shape||O.source.type===y.MouseEventElementType.Connector},g.prototype.onShapeExpandBtnMouseDown=function(O){this.handler.addDiagramItemToSelection(O),this.handler.switchState(new p.MouseHandlerToggleShapeExpandedState(this.handler,this.history,this.model,this.selection))},g.prototype.replaceSelection=function(O){this.handler.canMultipleSelection(O)?this.replaceMultipleSelection(O.source.key):this.handler.changeSingleSelection(O.source.key)},g.prototype.replaceMultipleSelection=function(O){this.selection.hasKey(O)?this.selection.remove(O):this.selection.add(O)},g.prototype.clearSelection=function(){this.selection.set([])},g.startLimit=l.UnitConverter.pixelsToTwips(1),g}(E.MouseHandlerStateBase);_.MouseHandlerDefaultStateBase=h},8502:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDefaultTouchState=void 0;var E=function(y){function p(){return null!==y&&y.apply(this,arguments)||this}return b(p,y),p.prototype.updateConnectionsOnMouseMove=function(d){},p.prototype.canDragObjectOnMouseDown=function(d){return this.inSelection(d)},p.prototype.canExpandContainerOnMouseDown=function(d){return!0},p.prototype.canClearSelectionOnMouseDown=function(){return!0},p.prototype.canSelectOnMouseUp=function(d){return!this.inSelection(d)},p.prototype.canClearSelectionOnMouseUp=function(){return!1},p}(x(3250).MouseHandlerDefaultState);_.MouseHandlerDefaultTouchState=E},1717:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDragDiagramItemStateBase=_.DraggingConnector=void 0;var E=x(4867),y=x(6879),p=x(6031),d=x(8816),s=x(4742);_.DraggingConnector=function(u){this.connector=u,this.startPoints=u.points.map(function(h){return h.clone()}),this.startRenderContext=u.tryCreateRenderPointsContext()};var l=function(u){function h(f,g,O,I,D){var C=u.call(this,f,g)||this;return C.model=O,C.selection=I,C.visualizerManager=D,C.startScrollLeft=0,C.startScrollTop=0,C}return b(h,u),h.prototype.finish=function(){this.visualizerManager.resetExtensionLines(),this.visualizerManager.resetContainerTarget(),this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),u.prototype.finish.call(this)},h.prototype.onMouseDown=function(f){this.handler.addDiagramItemToSelection(f),this.shouldClone=this.handler.canCopySelectedItems(f),this.startPoint=f.modelPoint,this.initDrag(),this.lockInitDrag=!1,u.prototype.onMouseDown.call(this,f)},h.prototype.onMouseMove=function(f){if(this.mouseMoveEvent=f,f.button!==p.MouseButton.Left)return this.cancelChanges(),void this.handler.switchToDefaultState();this.canApplyChangesOnMouseMove(this.startPoint,f.modelPoint)&&(this.handler.canCopySelectedItems(f)&&(this.lockInitDrag||(this.cancelChanges(),this.shouldClone=!0,this.copySelection(),this.initDrag(),this.lockInitDrag=!0)),this.onApplyChanges(f),this.onAfterApplyChanges(),this.updateContainers(f))},h.prototype.updateContainers=function(f){this.visualizerManager.setExtensionLines(this.selection.getSelectedShapes(!1,!0));var g=E.ModelUtils.findContainerByEventKey(this.model,this.selection,f.source.key);g&&this.allowInsertToContainer(f,g)?this.visualizerManager.setContainerTarget(g,f.source.type):this.visualizerManager.resetContainerTarget()},h.prototype.onMouseUp=function(f){u.prototype.onMouseUp.call(this,f),this.handler.canRemoveDiagramItemToSelection(f)&&this.handler.canMultipleSelection(f)&&this.handler.removeDiagramItemFromSelection(f.button,f.source.key)},h.prototype.onApplyChanges=function(f){var g=this;this.calculateFixedPosition(f),this.dragHelper.move(this.shouldClone,function(I){return g.getSnappedPoint(f,I)},function(){g.visualizerManager.resetConnectionTarget(),g.visualizerManager.resetConnectionPoints()},function(I,D){g.visualizerManager.setConnectionTarget(I,p.MouseEventElementType.Shape),g.visualizerManager.setConnectionPoints(I,p.MouseEventElementType.Shape,D,!0)});var O=E.ModelUtils.findContainerByEventKey(this.model,this.selection,f.source.key);O&&this.allowInsertToContainer(f,O)?E.ModelUtils.insertSelectionToContainer(this.history,this.model,this.selection,O):E.ModelUtils.removeSelectionFromContainer(this.history,this.model,this.selection),this.handler.tryUpdateModelSize(function(I,D){return g.dragHelper.onTryUpdateModelSize(I,D)})},h.prototype.getDraggingElementKeys=function(){return this.dragHelper.draggingShapes.map(function(f){return f.shape.key}).concat(this.dragHelper.draggingConnectors.map(function(f){return f.connector.key}))},h.prototype.getSnappedPoint=function(f,g){return this.handler.getSnappedPointOnDragDiagramItem(f,g,this.fixedX,this.fixedY,this.startPoint)},h.prototype.initDrag=function(){this.dragHelper=new s.SelectionDragHelper(this.history,this.model,this.handler.permissionsProvider,this.startPoint,this.selection.getSelectedItems(!0)),this.initDraggingShapes(),this.areValidDraggingShapes?(this.initDraggingConnectors(),this.areValidDraggingConnectors||this.handler.switchToDefaultState()):this.handler.switchToDefaultState()},h.prototype.initDraggingShapes=function(){this.dragHelper.initDraggingShapes(this.selection.getSelectedShapes(!1,!0),this.shouldClone)},h.prototype.initDraggingConnectors=function(){this.dragHelper.initDraggingConnectors(this.selection.getSelectedConnectors(!1,!0),this.shouldClone)},h.prototype.copySelection=function(){var f=this;E.ModelUtils.cloneSelectionToOffset(this.history,this.model,function(g){var O=f.model.findItem(g);O&&f.handler.addInteractingItem(O,y.DiagramModelOperation.AddShape)},this.selection,0,0)},h.prototype.calculateFixedPosition=function(f){this.fixedX=!1,this.fixedY=!1,this.handler.canCalculateFixedPosition(f)&&(Math.abs(this.startPoint.x-f.modelPoint.x)<Math.abs(this.startPoint.y-f.modelPoint.y)?this.fixedX=!0:this.fixedY=!0)},h.prototype.allowInsertToContainer=function(f,g){return!this.handler.canMultipleSelection(f)&&g&&g.expanded&&E.ModelUtils.canInsertSelectionToContainer(this.model,this.selection,g)},h}(d.MouseHandlerDraggingState);_.MouseHandlerDragDiagramItemStateBase=l},4908:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDragParameterPointState=void 0;var E=x(8816),y=x(329),p=function(d){function s(a,l,u){var h=d.call(this,a,l)||this;return h.model=u,h.startScrollLeft=0,h.startScrollTop=0,h}return b(s,d),s.prototype.onMouseDown=function(a){this.startPoint=a.modelPoint,this.shape=this.model.findShape(a.source.key),this.parameterPointKey=a.source.value,this.startParameters=this.shape.parameters.clone(),d.prototype.onMouseDown.call(this,a)},s.prototype.onApplyChanges=function(a){var l=this.handler.getSnappedOffsetOnDragPoint(a,this.startPoint),u=this.startParameters.clone();this.shape.description.modifyParameters(this.shape,u,l.x,l.y),this.history.addAndRedo(new y.ChangeShapeParametersHistoryItem(this.shape.key,u))},s.prototype.getDraggingElementKeys=function(){return[this.shape.key]},s}(E.MouseHandlerDraggingState);_.MouseHandlerDragParameterPointState=p},8816:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerDraggingState=void 0;var E=x(5434),y=x(6031),p=x(9291),d=function(s){function a(l,u){var h=s.call(this,l)||this;return h.history=u,h}return b(a,s),a.prototype.canApplyChangesOnMouseMove=function(l,u){return!l||!u||Math.abs(l.x-u.x)>a.dragStartLimit||Math.abs(l.y-u.y)>a.dragStartLimit},a.prototype.onAfterApplyChanges=function(){this.modified||this.handler.raiseDragStart(this.getDraggingElementKeys()),this.modified=!0,this.mouseDownPoint=void 0},a.prototype.onMouseDown=function(l){this.mouseDownPoint=l.modelPoint.clone()},a.prototype.onMouseMove=function(l){this.mouseMoveEvent=l,l.button!==y.MouseButton.Left?(this.cancelChanges(),this.handler.switchToDefaultState()):l.button===y.MouseButton.Left&&this.canApplyChangesOnMouseMove(this.mouseDownPoint,l.modelPoint)&&(this.onApplyChanges(l),this.onAfterApplyChanges())},a.prototype.onKeyDown=function(l){!this.mouseMoveEvent||16!==l.keyCode&&17!==l.keyCode&&18!==l.keyCode||this.performMouseMoveEvent(l.modifiers)},a.prototype.onKeyUp=function(l){!this.mouseMoveEvent||16!==l.keyCode&&17!==l.keyCode&&18!==l.keyCode||this.performMouseMoveEvent(l.modifiers)},a.prototype.onMouseUp=function(l){this.mouseDownPoint=void 0,this.mouseMoveEvent=void 0,this.handler.switchToDefaultState()},a.prototype.performMouseMoveEvent=function(l){this.mouseMoveEvent.modifiers=l,this.onMouseMove(this.mouseMoveEvent)},a.prototype.start=function(){this.handler.beginStorePermissions(),this.history.beginTransaction()},a.prototype.finish=function(){this.checkStoredPermissionsOnFinish(),this.modified?(this.onFinishWithChanges(),this.modified=!1,this.history.endTransaction(),this.handler.raiseDragEnd(this.getDraggingElementKeys())):this.history.endTransaction(),this.handler.endStorePermissions(),this.handler.clearInteractingItems()},a.prototype.checkStoredPermissionsOnFinish=function(){this.handler.isStoredPermissionsGranted()||(this.cancelChanges(),this.modified=!1)},a.prototype.onFinishWithChanges=function(){},a.prototype.cancelChanges=function(){this.handler.lockPermissions(),this.history.undoTransaction(),this.handler.unlockPermissions(),this.modified&&this.handler.raiseDragEnd(this.getDraggingElementKeys()),this.modified=!1},a.prototype.getSnappedPoint=function(l,u){return this.handler.getSnappedPointOnDragPoint(l,u)},a.dragStartLimit=p.UnitConverter.pixelsToTwips(4),a}(E.MouseHandlerCancellableState);_.MouseHandlerDraggingState=d},5209:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorOrthogonalSideState=void 0;var E=x(8900),y=x(7959),p=x(3742),d=x(4867),s=x(8816),a=x(8675),l=function(u){function h(f,g,O){var I=u.call(this,f,g)||this;return I.model=O,I.canCreatePoints=!0,I}return b(h,u),h.prototype.saveSidePoints=function(f,g){var O=this,I=this.connector.getRenderPoints(!0);this.isHorizontal=I[f].y===I[g].y,this.iterateRenderPoints(I,f,!1,function(D,C){-1!==D.pointIndex&&(O.leftPointIndex=D.pointIndex),O.leftRenderPointIndex=C},function(D){return!a.GeometryUtils.arePointsOfOrthogonalLine(I[f],D,O.isHorizontal)}),this.iterateRenderPoints(I,this.leftRenderPointIndex,!0,function(D,C){-1!==D.pointIndex&&(O.rightPointIndex=D.pointIndex),O.rightRenderPointIndex=C},function(D){return!a.GeometryUtils.arePointsOfOrthogonalLine(I[f],D,O.isHorizontal)})},h.prototype.iterateRenderPoints=function(f,g,O,I,D){for(var C=g;O?C<f.length:C>=0;O?C++:C--){var w=f[C];if(D&&D(w,C))break;I(w,C)}},h.prototype.onMouseDown=function(f){this.startPoint=f.modelPoint,this.connector=this.model.findConnector(f.source.key),this.handler.addInteractingItem(this.connector);var g=f.source.value.split("_");this.saveSidePoints(parseInt(g[0]),parseInt(g[1])),u.prototype.onMouseDown.call(this,f)},h.prototype.shouldCreatePoint=function(f){if(!this.canCreatePoints)return!1;if(f&&(void 0===this.leftPointIndex||0===this.leftPointIndex)||!f&&(void 0===this.rightPointIndex||this.rightPointIndex===this.connector.points.length-1))return!0;var g=this.connector.getRenderPoints(!0);return!(!f||this.connector.points[this.leftPointIndex].equals(g[this.leftRenderPointIndex]))||!f&&!this.connector.points[this.rightPointIndex].equals(g[this.rightRenderPointIndex])},h.prototype.onApplyChanges=function(f){var g=this;if(this.shouldCreatePoint(!0)||this.shouldCreatePoint(!1)){var O=this.connector.getRenderPoints(!0),I=O[this.leftRenderPointIndex],D=O[this.rightRenderPointIndex];if(this.shouldCreatePoint(!0)){var C=new E.Point(I.x,I.y);0===this.leftPointIndex?(this.leftPointIndex=1,this.correctEdgePoint(C,D,this.connector.beginItem,this.connector.beginConnectionPointIndex)):void 0===this.leftPointIndex&&this.iterateRenderPoints(O,this.leftRenderPointIndex,!0,function(k){-1!==k.pointIndex&&(g.leftPointIndex=k.pointIndex)},function(){return void 0!==g.leftPointIndex}),d.ModelUtils.addConnectorPoint(this.history,this.connector.key,this.leftPointIndex,C),void 0!==this.rightPointIndex&&this.rightPointIndex++}if(this.shouldCreatePoint(!1)){O=this.connector.getRenderPoints(!0);var w=new E.Point(D.x,D.y);this.rightPointIndex===this.connector.points.length-1?(this.correctEdgePoint(w,I,this.connector.endItem,this.connector.endConnectionPointIndex),this.rightPointIndex--):void 0===this.rightPointIndex&&this.iterateRenderPoints(O,this.rightRenderPointIndex,!1,function(k){-1!==k.pointIndex&&(g.rightPointIndex=k.pointIndex)},function(){return g.rightPointIndex===g.leftPointIndex}),this.rightPointIndex++,d.ModelUtils.addConnectorPoint(this.history,this.connector.key,this.rightPointIndex,w)}}this.canCreatePoints=!1;var P=this.getSnappedPoint(f,f.modelPoint);d.ModelUtils.moveConnectorRightAnglePoints(this.history,this.connector,this.leftPointIndex,this.rightPointIndex,this.isHorizontal?void 0:P.x,this.isHorizontal?P.y:void 0),this.handler.tryUpdateModelSize()},h.prototype.onFinishWithChanges=function(){d.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),d.ModelUtils.fixConnectorBeginEndConnectionIndex(this.history,this.connector),this.handler.tryUpdateModelSize()},h.prototype.correctEdgePoint=function(f,g,O,I){var D=0;if(O){var C=O.getConnectionPointSideByIndex(I),w=O.rectangle;switch(D=y.Connector.minOffset,C){case p.ConnectionPointSide.South:D+=w.bottom-f.y;break;case p.ConnectionPointSide.North:D+=f.y-w.y;break;case p.ConnectionPointSide.East:D+=w.right-f.x;break;case p.ConnectionPointSide.West:D+=f.x-w.x}}this.isHorizontal?f.x>g.x?f.x-=Math.min(D,f.x-g.x):f.x+=Math.min(D,g.x-f.x):f.y>g.y?f.y-=Math.min(D,f.y-g.y):f.y+=Math.min(D,g.y-f.y)},h.prototype.getDraggingElementKeys=function(){return[this.connector.key]},h}(s.MouseHandlerDraggingState);_.MouseHandlerMoveConnectorOrthogonalSideState=l},4402:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorPointState=void 0;var E=x(8900),y=x(7060),p=x(7959),d=x(4867),s=x(4612),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),u.prototype.onMouseDown=function(h){this.connector=this.model.findConnector(h.source.key),this.pointIndex=parseInt(h.source.value),0===this.pointIndex?this.pointPosition=p.ConnectorPosition.Begin:this.pointIndex===this.connector.points.length-1&&(this.pointPosition=p.ConnectorPosition.End),this.handler.addInteractingItem(this.connector),l.prototype.onMouseDown.call(this,h)},u.prototype.onApplyChanges=function(h){this.connector.properties.lineOption===s.ConnectorLineOption.Orthogonal&&0!==this.pointIndex&&this.pointIndex!==this.connector.points.length-1||l.prototype.onApplyChanges.call(this,h)},u.prototype.onFinishWithChanges=function(){l.prototype.onFinishWithChanges.call(this),d.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),this.handler.tryUpdateModelSize()},u.prototype.getSnappedPoint=function(h,f){var g=this.connector.points,O=this.pointIndex;if(0<O&&O<g.length-1){var D=f.x;return this.handler.getSnappedPointOnDragPoint(h,f,new E.Point(D,g[O+1].y-(g[O+1].y-g[O-1].y)/(g[O+1].x-g[O-1].x)*(g[O+1].x-D)))}return this.handler.getSnappedPointOnDragPoint(h,f)},u}(y.MouseHandlerMoveConnectorPointStateBase);_.MouseHandlerMoveConnectorPointState=a},7060:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorPointStateBase=void 0;var E=x(7959),y=x(6031),p=x(8816),d=x(8930),s=x(3477),a=x(4867),l=function(u){function h(f,g,O,I){var D=u.call(this,f,g)||this;return D.model=O,D.visualizerManager=I,D}return b(h,u),h.prototype.finish=function(){this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),u.prototype.finish.call(this)},h.prototype.onMouseDown=function(f){u.prototype.onMouseDown.call(this,f),this.connector&&this.handler.addInteractingItem(this.connector)},h.prototype.onMouseMove=function(f){if(u.prototype.onMouseMove.call(this,f),this.allowAttachToObjects(f,!1,!1)){if(this.connector){var g=this.connector.getExtremeItem(this.pointPosition);this.visualizerManager.setConnectionTarget(g,f.source.type);var O=this.connector.getExtremeConnectionPointIndex(this.pointPosition);(g||-1===this.oppositeConnectionPointIndex)&&this.allowAttachToObjects(f,!0,!1)||(g=this.model.findItem(f.source.key)),this.visualizerManager.setConnectionPoints(g,f.source.type,O,!0)}}else this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints()},h.prototype.onApplyChanges=function(f){var g=this.getSnappedPoint(f,f.modelPoint);if(void 0!==this.pointPosition){void 0===this.oppositePointPosition&&(this.oppositePointPosition=this.getOppositePointPosition(),this.oppositeItem=this.connector.getExtremeItem(this.oppositePointPosition),this.oppositeConnectionPointIndex=this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition)),this.targetItem=this.model.findItem(f.source.key);var O=this.allowAttachToObjects(f,!0,!0)?this.targetItem:void 0,I=-1;f.source.type===y.MouseEventElementType.ShapeConnectionPoint&&(I=parseInt(f.source.value)),!O||f.source.type!==y.MouseEventElementType.Shape&&f.source.type!==y.MouseEventElementType.ShapeConnectionPoint||this.connector.getExtremeItem(this.oppositePointPosition)===O&&(-1===I||-1===this.oppositeConnectionPointIndex||I===this.oppositeConnectionPointIndex)?this.connector.getExtremeItem(this.pointPosition)&&(this.history.addAndRedo(new d.DeleteConnectionHistoryItem(this.connector,this.pointPosition)),this.oppositeItem&&this.updateOppositeItemConnectionPointIndex(this.oppositeConnectionPointIndex)):(this.connector.getExtremeItem(this.pointPosition)===O&&this.connector.getExtremeConnectionPointIndex(this.pointPosition)===I||(this.connector.getExtremeItem(this.pointPosition)&&this.history.addAndRedo(new d.DeleteConnectionHistoryItem(this.connector,this.pointPosition)),this.history.addAndRedo(new s.AddConnectionHistoryItem(this.connector,O,I,this.pointPosition)),this.oppositeItem&&this.updateOppositeItemConnectionPointIndex(I)),g=O.getConnectionPointPosition(I,this.connector.points[this.pointIndex+(this.pointPosition===E.ConnectorPosition.End?-1:1)]),this.visualizerManager.setConnectionPointIndex(I))}a.ModelUtils.moveConnectorPoint(this.history,this.connector,this.pointIndex,g),a.ModelUtils.updateConnectorAttachedPoints(this.history,this.model,this.connector),this.handler.tryUpdateModelSize()},h.prototype.updateOppositeItemConnectionPointIndex=function(f){var g=-1===f?-1:this.oppositeConnectionPointIndex;g!==this.connector.getExtremeConnectionPointIndex(this.oppositePointPosition)&&(this.history.addAndRedo(new d.DeleteConnectionHistoryItem(this.connector,this.oppositePointPosition)),this.history.addAndRedo(new s.AddConnectionHistoryItem(this.connector,this.oppositeItem,g,this.oppositePointPosition)))},h.prototype.onFinishWithChanges=function(){a.ModelUtils.updateConnectorContainer(this.history,this.model,this.connector),a.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,this.connector),this.handler.tryUpdateModelSize()},h.prototype.getDraggingElementKeys=function(){return this.connector?[this.connector.key]:[]},h.prototype.getOppositePointPosition=function(){return this.pointPosition===E.ConnectorPosition.Begin?E.ConnectorPosition.End:E.ConnectorPosition.Begin},h.prototype.allowAttachToObjects=function(f,g,O){if(this.handler.canMultipleSelection(f))return!1;var I=this.connector;if(I&&f.source.type===y.MouseEventElementType.Shape){var D=this.model.findItem(f.source.key);if(g&&this.model.findItemContainerCore(I,function(C){return C===D})||g&&this.oppositeItem&&this.model.findItemContainerCore(this.oppositeItem,function(C){return C===D})||O&&this.oppositeItem===D&&-1===this.oppositeConnectionPointIndex)return!1}return!0},h.prototype.onConnectionPointsShow=function(f,g){var O=this;if(this.connector&&void 0!==this.pointPosition&&(this.connector.endItem&&this.connector.endItem.key===f||this.connector.beginItem&&this.connector.beginItem.key===f)){var I=this.connector.beginItem&&this.connector.beginItem.key===f?E.ConnectorPosition.Begin:E.ConnectorPosition.End;g.forEach(function(D,C){D.allowed=O.handler.canPerformChangeConnectionOnUpdateUI(O.connector,{item:O.connector.getExtremeItem(I),position:I,connectionPointIndex:C})})}},h.prototype.onConnectionTargetShow=function(f,g){if(this.connector&&void 0!==this.pointPosition&&(this.connector.endItem&&this.connector.endItem.key===f||this.connector.beginItem&&this.connector.beginItem.key===f)){var O=this.connector.beginItem&&this.connector.beginItem.key===f?E.ConnectorPosition.Begin:E.ConnectorPosition.End;g.allowed=this.handler.canPerformChangeConnectionOnUpdateUI(this.connector,{item:this.connector.getExtremeItem(O),position:O,connectionPointIndex:-1})}},h}(p.MouseHandlerDraggingState);_.MouseHandlerMoveConnectorPointStateBase=l},481:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorSideState=void 0;var E=x(8816),y=x(4867),p=function(d){function s(a,l,u){var h=d.call(this,a,l)||this;return h.model=u,h}return b(s,d),s.prototype.onMouseDown=function(a){this.startPoint=a.modelPoint,this.connectorKey=a.source.key,this.pointIndex=parseInt(a.source.value)+1,d.prototype.onMouseDown.call(this,a)},s.prototype.onApplyChanges=function(a){var l=this.getSnappedPoint(a,a.modelPoint),u=this.model.findConnector(this.connectorKey);this.pointCreated?y.ModelUtils.moveConnectorPoint(this.history,u,this.pointIndex,l):(this.handler.addInteractingItem(u),y.ModelUtils.addConnectorPoint(this.history,this.connectorKey,this.pointIndex,l.clone()),this.pointCreated=!0),this.handler.tryUpdateModelSize()},s.prototype.onFinishWithChanges=function(){var a=this.model.findConnector(this.connectorKey);y.ModelUtils.deleteConnectorUnnecessaryPoints(this.history,a),y.ModelUtils.fixConnectorBeginEndConnectionIndex(this.history,a),this.handler.tryUpdateModelSize()},s.prototype.getDraggingElementKeys=function(){return[this.connectorKey]},s}(E.MouseHandlerDraggingState);_.MouseHandlerMoveConnectorSideState=p},5168:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorState=void 0;var E=x(4867),y=function(p){function d(s,a,l,u,h){var f=p.call(this,s,a,l,u,h)||this;return f.model=l,f.selection=u,f.visualizerManager=h,f}return b(d,p),Object.defineProperty(d.prototype,"areValidDraggingShapes",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"areValidDraggingConnectors",{get:function(){var s=this;return this.shouldClone?this.dragHelper.draggingShapes.length>0||this.dragHelper.draggingConnectors.length>0:!!this.dragHelper.draggingConnectors.length&&(this.dragHelper.draggingShapes.length?E.ModelUtils.canMoveConnector(this.dragHelper.selectedItems,this.dragHelper.draggingConnectors[this.dragHelper.draggingConnectorsIndexByKey[this.handler.mouseDownEvent.source.key]].connector):!this.dragHelper.draggingConnectors.some(function(a){return!E.ModelUtils.canMoveConnector(s.dragHelper.selectedItems,a.connector)}))},enumerable:!1,configurable:!0}),d}(x(1717).MouseHandlerDragDiagramItemStateBase);_.MouseHandlerMoveConnectorState=y},5391:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveConnectorTextState=void 0;var E=x(8816),y=x(45),p=x(5144),d=function(s){function a(l,u,h){var f=s.call(this,l,u)||this;return f.model=h,f}return b(a,s),a.prototype.onMouseDown=function(l){this.connector=this.model.findConnector(l.source.key),this.position=parseFloat(l.source.value),this.text=this.connector.getText(this.position),this.savedText="",s.prototype.onMouseDown.call(this,l)},a.prototype.onApplyChanges=function(l){var u=this.connector.getTextPositionByPoint(l.modelPoint);if(u!==this.position){var h=this.connector.getText(u);""!==h&&h!==this.text&&(this.history.addAndRedo(new p.ChangeConnectorTextHistoryItem(this.connector,u,"")),this.savedText=h),this.history.addAndRedo(new y.ChangeConnectorTextPositionHistoryItem(this.connector,this.position,u)),""!==this.savedText&&this.savedText!==h&&(this.history.addAndRedo(new p.ChangeConnectorTextHistoryItem(this.connector,this.position,this.savedText)),this.savedText=""),this.position=u}},a.prototype.getDraggingElementKeys=function(){return[this.connector.key]},a}(E.MouseHandlerDraggingState);_.MouseHandlerMoveConnectorTextState=d},9979:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerMoveShapeState=void 0;var E=function(y){function p(d,s,a,l,u){var h=y.call(this,d,s,a,l,u)||this;return h.model=a,h.selection=l,h.visualizerManager=u,h}return b(p,y),Object.defineProperty(p.prototype,"areValidDraggingShapes",{get:function(){return this.shouldClone||this.dragHelper.draggingShapes.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"areValidDraggingConnectors",{get:function(){return!0},enumerable:!1,configurable:!0}),p}(x(1717).MouseHandlerDragDiagramItemStateBase);_.MouseHandlerMoveShapeState=E},5609:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerResizeShapeState=void 0;var E=x(6353),y=x(8900),p=x(6031),d=x(8816),s=x(4867),a=x(6794),l=x(6879),u=function(h){function f(g,O,I,D,C,w){var P=h.call(this,g,O)||this;return P.model=I,P.selection=D,P.visualizerManager=C,P.settings=w,P.startScrollLeft=0,P.startScrollTop=0,P.rotation=0,P}return b(f,h),f.prototype.finish=function(){this.visualizerManager.resetResizeInfo(),this.visualizerManager.resetExtensionLines(),h.prototype.finish.call(this)},f.prototype.onMouseDown=function(g){var O=this,I=parseInt(g.source.value);this.resizeEventSource=I,this.startPoint=g.modelPoint,this.lockH=I===p.ResizeEventSource.ResizeBox_S||I===p.ResizeEventSource.ResizeBox_N,this.lockV=I===p.ResizeEventSource.ResizeBox_E||I===p.ResizeEventSource.ResizeBox_W,this.sideH=I===p.ResizeEventSource.ResizeBox_E||I===p.ResizeEventSource.ResizeBox_NE||I===p.ResizeEventSource.ResizeBox_SE,this.sideV=I===p.ResizeEventSource.ResizeBox_SE||I===p.ResizeEventSource.ResizeBox_S||I===p.ResizeEventSource.ResizeBox_SW,this.shapes=this.selection.getSelectedShapes(),0!==this.shapes.length?(this.shapes.forEach(function(D){O.handler.addInteractingItem(D,l.DiagramModelOperation.ResizeShape),O.handler.addInteractingItem(D,l.DiagramModelOperation.MoveShape)}),this.connectors=this.selection.getSelectedConnectors(),this.startRectangle=s.ModelUtils.createRectangle(this.shapes),this.startShapeSizes=this.shapes.map(function(D){return D.size.clone()}),this.startShapePositions=this.shapes.map(function(D){return D.position.clone()}),this.startConnectorPoints=this.connectors.map(function(D){return D.points.map(function(C){return C.clone()})}),h.prototype.onMouseDown.call(this,g)):this.handler.switchToDefaultState()},f.prototype.onMouseMove=function(g){h.prototype.onMouseMove.call(this,g);var O=this.selection.getSelectedShapes();this.visualizerManager.setExtensionLines(O)},f.prototype.onApplyChanges=function(g){var O=this,I=s.ModelUtils.createRectangle(this.shapes),D=1===this.shapes.length?this.shapes[0].getMinWidth(this.settings.shapeMinWidth):a.ShapeMinDimension,C=1===this.shapes.length?this.shapes[0].getMinHeight(this.settings.shapeMinHeight):a.ShapeMinDimension,w=1===this.shapes.length?this.shapes[0].getMaxWidth(this.settings.shapeMaxWidth):void 0,P=1===this.shapes.length?this.shapes[0].getMaxHeight(this.settings.shapeMaxHeight):void 0,k=this.getSize(g,I.createPosition(),this.startRectangle.createSize(),D,C,w,P,this.handler.lockAspectRatioOnShapeResize(g)),A=this.getPosition(g,k,this.startRectangle.createSize(),this.startRectangle.createPosition()),R=k.width/this.startRectangle.width,M=k.height/this.startRectangle.height;this.shapes.forEach(function(L,H){var j=O.startShapeSizes[H].width*(L.allowResizeHorizontally?R:1);j=O.getNormalizedSize(j,L.getMinWidth(O.settings.shapeMinWidth),L.getMaxWidth(O.settings.shapeMaxWidth));var U=O.startShapeSizes[H].height*(L.allowResizeVertically?M:1);U=O.getNormalizedSize(U,L.getMinHeight(O.settings.shapeMinHeight),L.getMaxHeight(O.settings.shapeMaxHeight)),s.ModelUtils.setShapeSize(O.history,O.model,L,new y.Point(L.allowResizeHorizontally?A.x+(O.startShapePositions[H].x-O.startRectangle.x)*R:O.startShapePositions[H].x,L.allowResizeVertically?A.y+(O.startShapePositions[H].y-O.startRectangle.y)*M:O.startShapePositions[H].y),new E.Size(j,U))}),this.connectors.forEach(function(L,H){for(var U=L.endItem?L.points.length-2:L.points.length-1,K=L.beginItem?1:0;K<=U;K++){var q=new y.Point(A.x+(O.startConnectorPoints[H][K].x-O.startRectangle.x)*R,A.y+(O.startConnectorPoints[H][K].y-O.startRectangle.y)*M);s.ModelUtils.moveConnectorPoint(O.history,L,K,q)}}),this.selection.getSelectedShapes(!1,!0).forEach(function(L){s.ModelUtils.updateShapeAttachedConnectors(O.history,O.model,L)}),this.tryUpdateModelSize(),this.visualizerManager.setResizeInfo(this.shapes)},f.prototype.tryUpdateModelSize=function(){var g=this;this.handler.tryUpdateModelSize(function(O,I){g.startShapePositions.forEach(function(D){D.x+=O,D.y+=I}),g.startConnectorPoints.forEach(function(D){D.forEach(function(C){C.x+=O,C.y+=I})}),g.startRectangle.x+=O,g.startRectangle.y+=I,g.startPoint.x+=O,g.startPoint.y+=I})},f.prototype.getDraggingElementKeys=function(){return this.shapes.map(function(g){return g.key})},f.prototype.getNormalizedSize=function(g,O,I){return void 0!==O&&(g=Math.max(g,O)),void 0!==I&&(g=Math.min(g,I)),g},f.prototype.getSize=function(g,O,I,D,C,w,P,k){var A,R,M=g.modelPoint.x-(this.startScrollLeft-g.scrollX)-this.startPoint.x,L=g.modelPoint.y-(this.startScrollTop-g.scrollY)-this.startPoint.y,H=M*Math.cos(this.rotation)- -L*Math.sin(this.rotation),j=-(M*Math.sin(this.rotation)+-L*Math.cos(this.rotation));return j=!this.sideV&&j>0?Math.min(I.height+1,j):j,H=!this.sideH&&H>0?Math.min(I.width+1,H):H,this.lockH||this.lockV||!k?(H=this.lockH?0:H,j=this.lockV?0:j,A=this.getNormalizedSize(this.sideH?I.width+H:I.width-H,D,w),R=this.getNormalizedSize(this.sideV?I.height+j:I.height-j,C,P)):Math.abs(H)>Math.abs(j)?(A=this.getNormalizedSize(this.sideH?I.width+H:I.width-H,D,w),R=I.height*(A/I.width)):(R=this.getNormalizedSize(this.sideV?I.height+j:I.height-j,C,P),A=I.width*(R/I.height)),this.lockH||(A=this.getSnappedPosition(g,O.x+A,!0)-O.x),this.lockV||(R=this.getSnappedPosition(g,O.y+R,!1)-O.y),new E.Size(A,R)},f.prototype.getPosition=function(g,O,I,D){var C=D.x,w=D.y;if(this.resizeEventSource===p.ResizeEventSource.ResizeBox_N||this.resizeEventSource===p.ResizeEventSource.ResizeBox_NE||this.resizeEventSource===p.ResizeEventSource.ResizeBox_NW){var P=this.getSnappedPosition(g,w+=I.height-O.height,!1);O.height+=w-P,w=P}if(this.resizeEventSource===p.ResizeEventSource.ResizeBox_W||this.resizeEventSource===p.ResizeEventSource.ResizeBox_NW||this.resizeEventSource===p.ResizeEventSource.ResizeBox_SW){var k=this.getSnappedPosition(g,C+=I.width-O.width,!0);O.width+=C-k,C=k}return new y.Point(C,w)},f.prototype.getSnappedPosition=function(g,O,I){return this.handler.getSnappedPositionOnResizeShape(g,O,I)},f}(d.MouseHandlerDraggingState);_.MouseHandlerResizeShapeState=u},9582:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerScrollingState=void 0;var E=x(5434),y=x(6031),p=x(8900),d=function(s){function a(l,u,h){var f=s.call(this,l)||this;return f.view=u,f.selection=h,f.lastOffset=new p.Point(0,0),f}return b(a,s),a.prototype.onKeyUp=function(l){this.handler.onFinishScrollPageByKeyboard(l)},a.prototype.onMouseDown=function(l){l.preventDefault=!0,this.startPoint=this.getPointByEvent(l)},a.prototype.onMouseMove=function(l){if(l.button===y.MouseButton.Left){var u=this.currentPoint||this.startPoint;l.preventDefault=!0;var h=this.getPointByEvent(l),f=this.view.scrollBy(new p.Point(h.x-u.x,h.y-u.y));this.lastOffset=this.lastOffset.clone().offset(f.x,f.y),this.currentPoint=h}else this.handler.onFinishScrollPageByMouse(l)},a.prototype.onMouseUp=function(l){l.button===y.MouseButton.Left&&this.handler.onFinishScrollPageByMouse(l),this.handler.switchToDefaultState()},a.prototype.cancelChanges=function(){this.currentPoint&&this.view.scrollBy(this.lastOffset.clone().multiply(-1,-1))},a.prototype.finish=function(){this.currentPoint&&this.startPoint&&!this.currentPoint.equals(this.startPoint)||this.selection.set([]),s.prototype.finish.call(this)},a.prototype.getPointByEvent=function(l){return l.offsetPoint},a}(E.MouseHandlerCancellableState);_.MouseHandlerScrollingState=d},4869:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerSelectionState=void 0;var E=x(6031),y=x(8011),p=function(d){function s(a,l,u){var h=d.call(this,a)||this;return h.selection=l,h.visualizerManager=u,h}return b(s,d),s.prototype.finish=function(){this.handler.raiseDragEnd([]),this.visualizerManager.resetSelectionRectangle(),d.prototype.finish.call(this)},s.prototype.cancelChanges=function(){},s.prototype.onMouseDown=function(a){this.startPoint=a.modelPoint,this.handler.raiseDragStart([])},s.prototype.onMouseMove=function(a){a.button!==E.MouseButton.Left?this.handler.switchToDefaultState():(this.rectangle=y.Rectangle.fromPoints(this.startPoint,a.modelPoint),this.visualizerManager.setSelectionRectangle(this.rectangle))},s.prototype.onMouseUp=function(a){void 0!==this.rectangle?this.selection.selectRect(this.rectangle):this.selection.set([]),this.rectangle=void 0,this.handler.switchToDefaultState()},s}(x(5434).MouseHandlerCancellableState);_.MouseHandlerSelectionState=p},5434:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerCancellableState=_.MouseHandlerStateBase=void 0;var E=x(2153),y=function(){function d(s){this.handler=s}return d.prototype.start=function(){},d.prototype.finish=function(){},d.prototype.onMouseClick=function(s){},d.prototype.onMouseDblClick=function(s){this.handler.switchToDefaultState()},d.prototype.onMouseDown=function(s){},d.prototype.onMouseUp=function(s){},d.prototype.onMouseMove=function(s){},d.prototype.onMouseWheel=function(s){return!1},d.prototype.onDragStart=function(s){},d.prototype.onDragEnd=function(s){},d.prototype.onShortcut=function(s){return!1},d.prototype.onKeyDown=function(s){},d.prototype.onKeyUp=function(s){},d.prototype.onConnectionPointsShow=function(s,a){},d.prototype.onConnectionTargetShow=function(s,a){},d}();_.MouseHandlerStateBase=y;var p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.onShortcut=function(a){return a===E.KeyCode.Esc&&(this.cancelChanges(),this.handler.switchToDefaultState(),!0)},s}(y);_.MouseHandlerCancellableState=p},5752:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerToggleShapeExpandedState=void 0;var E=x(5434),y=x(442),p=x(4867),d=function(s){function a(l,u,h,f){var g=s.call(this,l)||this;return g.history=u,g.model=h,g.selection=f,g}return b(a,s),a.prototype.onMouseUp=function(l){var u=this.model.findShape(l.source.key);u&&!u.isLocked&&(this.history.beginTransaction(),this.history.addAndRedo(new y.ToggleShapeExpandedHistoryItem(u)),p.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,u),p.ModelUtils.updateContainerConnectorsAttachedPoints(this.history,this.model,u),p.ModelUtils.updateSelection(this.history,this.selection),this.handler.tryUpdateModelSize(),this.history.endTransaction(),this.handler.raiseClick([u.key])),this.handler.switchToDefaultState()},a}(E.MouseHandlerStateBase);_.MouseHandlerToggleShapeExpandedState=d},6918:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerToolboxDraggingState=_.MouseHandlerBeforeToolboxDraggingState=void 0;var E=x(6031),y=x(8900),p=x(4145),d=x(4297),s=x(8816),a=x(1704),l=x(4867),u=x(5434),h=x(6879),f=function(O){function I(D,C,w,P,k,A){var R=O.call(this,D)||this;return R.history=C,R.model=w,R.selection=P,R.visualizerManager=k,R.shapeDescriptionManager=A,R.isModelEmpty=0===w.items.length,R}return b(I,O),I.prototype.cancelChanges=function(){this.tryRemoveTimer()},I.prototype.onDragStart=function(D){this.dragging=D},I.prototype.onDragEnd=function(D){this.cancelChanges(),this.handler.switchToDefaultState()},I.prototype.onMouseMove=function(D){var C=this;D.source.type>E.MouseEventElementType.Background?(this.tryRemoveTimer(),this.switchToDraggingState(D,!1)):D.source.type!==E.MouseEventElementType.Background||this.isModelEmpty?void 0!==this.nonPageAreaTimer&&this.tryRemoveTimer():(this.savedEvt=D,void 0===this.nonPageAreaTimer&&(this.nonPageAreaTimer=setTimeout(function(){return C.switchToDraggingState(C.savedEvt,!0)},500)))},I.prototype.switchToDraggingState=function(D,C){this.handler.switchState(new g(this.handler,this.history,this.model,this.selection,this.visualizerManager,this.shapeDescriptionManager,C)),this.handler.state.onDragStart(this.dragging),this.handler.state.onMouseMove(D)},I.prototype.tryRemoveTimer=function(){void 0!==this.nonPageAreaTimer&&(clearTimeout(this.nonPageAreaTimer),delete this.nonPageAreaTimer)},I.prototype.finish=function(){this.tryRemoveTimer()},I}(u.MouseHandlerCancellableState);_.MouseHandlerBeforeToolboxDraggingState=f;var g=function(O){function I(D,C,w,P,k,A,R){var M=O.call(this,D,C)||this;return M.model=w,M.selection=P,M.visualizerManager=k,M.shapeDescriptionManager=A,R||(M.updatePageSizeTimer=setTimeout(function(){M.processAndRemoveUpdatePageSizeTimer()},300)),M}return b(I,O),I.prototype.cancelChanges=function(){this.tryRemoveUpdatePageSizeTimer(),O.prototype.cancelChanges.call(this)},I.prototype.tryRemoveUpdatePageSizeTimer=function(){void 0!==this.updatePageSizeTimer&&(clearTimeout(this.updatePageSizeTimer),delete this.updatePageSizeTimer)},I.prototype.processAndRemoveUpdatePageSizeTimer=function(){void 0!==this.updatePageSizeTimer&&(this.handler.tryUpdateModelSize(),delete this.updatePageSizeTimer)},I.prototype.onMouseMove=function(D){O.prototype.onMouseMove.call(this,D);var C=this.model.findShape(this.shapeKey);if(C){this.visualizerManager.setExtensionLines([C]);var w=l.ModelUtils.findContainerByEventKey(this.model,this.selection,D.source.key);w&&this.allowInsertToContainer(D,C,w)?this.visualizerManager.setContainerTarget(w,D.source.type):this.visualizerManager.resetContainerTarget()}},I.prototype.getDraggingElementKeys=function(){return void 0===this.shapeKey?[]:[this.shapeKey]},I.prototype.onApplyChanges=function(D){var C=this;if(D.source.type===E.MouseEventElementType.Undefined){if(this.dragging.onCaptured(!1),void 0!==this.shapeKey&&!this.deleteHistoryItem){var w=this.model.findShape(this.shapeKey);l.ModelUtils.detachConnectors(this.history,w),l.ModelUtils.removeFromContainer(this.history,this.model,w),this.deleteHistoryItem=new a.DeleteShapeHistoryItem(this.shapeKey,!0),this.history.addAndRedo(this.deleteHistoryItem)}}else{if(this.dragging.onCaptured(!0),void 0===this.shapeKey){this.startPoint=D.modelPoint,this.shapeKey=this.insertToolboxItem(D);var P=this.model.findShape(this.shapeKey);P&&this.handler.addInteractingItem(P,h.DiagramModelOperation.AddShape)}this.deleteHistoryItem&&(this.history.undoTransactionTo(this.deleteHistoryItem),delete this.deleteHistoryItem);var k=this.getPosition(D,this.startShapePosition);w=this.model.findShape(this.shapeKey),l.ModelUtils.setShapePosition(this.history,this.model,w,k),l.ModelUtils.updateMovingShapeConnections(this.history,w,this.connectorsWithoutBeginItemInfo,this.connectorsWithoutEndItemInfo,function(){C.visualizerManager.resetConnectionTarget(),C.visualizerManager.resetConnectionPoints()},function(R,M){C.visualizerManager.setConnectionTarget(R,E.MouseEventElementType.Shape),C.visualizerManager.setConnectionPoints(R,E.MouseEventElementType.Shape,M,!0)},function(R){return C.handler.addInteractingItem(R)}),l.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,w);var A=l.ModelUtils.findContainerByEventKey(this.model,this.selection,D.source.key);w&&A&&this.allowInsertToContainer(D,w,A)?l.ModelUtils.insertToContainer(this.history,this.model,w,A):l.ModelUtils.removeFromContainer(this.history,this.model,w),void 0===this.updatePageSizeTimer&&this.handler.tryUpdateModelSize(function(R,M){C.connectorsWithoutBeginItemInfo.forEach(function(L){L.point.x+=R,L.point.y+=M}),C.connectorsWithoutEndItemInfo.forEach(function(L){L.point.x+=R,L.point.y+=M})})}},I.prototype.onFinishWithChanges=function(){this.deleteHistoryItem||this.history.addAndRedo(new d.SetSelectionHistoryItem(this.selection,[this.shapeKey]))},I.prototype.onDragStart=function(D){this.dragging=D,this.connectorsWithoutBeginItemInfo=l.ModelUtils.getConnectorsWithoutBeginItemInfo(this.model),this.connectorsWithoutEndItemInfo=l.ModelUtils.getConnectorsWithoutEndItemInfo(this.model)},I.prototype.onDragEnd=function(D){void 0!==this.shapeKey&&D.source.type===E.MouseEventElementType.Undefined&&this.cancelChanges(),this.handler.switchToDefaultState()},I.prototype.finish=function(){this.visualizerManager.resetExtensionLines(),this.visualizerManager.resetContainerTarget(),this.visualizerManager.resetConnectionTarget(),this.visualizerManager.resetConnectionPoints(),this.processAndRemoveUpdatePageSizeTimer(),this.dragging.onFinishDragging(),O.prototype.finish.call(this)},I.prototype.insertToolboxItem=function(D){var C=this.shapeDescriptionManager.get(this.dragging.data);this.startShapePosition=this.getSnappedPoint(D,new y.Point(D.modelPoint.x-C.defaultSize.width/2,D.modelPoint.y-C.defaultSize.height/2));var w=new p.AddShapeHistoryItem(C,this.startShapePosition);return this.history.addAndRedo(w),l.ModelUtils.updateNewShapeProperties(this.history,this.selection,w.shapeKey),w.shapeKey},I.prototype.allowInsertToContainer=function(D,C,w){return!this.handler.canMultipleSelection(D)&&w&&w.expanded&&l.ModelUtils.canInsertToContainer(this.model,C,w)},I.prototype.getPosition=function(D,C){return this.getSnappedPoint(D,new y.Point(C.x+D.modelPoint.x-this.startPoint.x,C.y+D.modelPoint.y-this.startPoint.y))},I}(s.MouseHandlerDraggingState);_.MouseHandlerToolboxDraggingState=g},8461:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerZoomOnPinchState=void 0;var E=x(240),y=x(8900),p=x(9582),d=x(5596),s=function(a){function l(u,h,f,g){var O=a.call(this,u,g,h)||this;return O.selection=h,O.settings=f,O.view=g,O}return b(l,a),l.prototype.onMouseDown=function(u){a.prototype.onMouseDown.call(this,u),u.touches.length>1&&(this.startDistance=this.getTouchDistance(u),this.startZoomLevel=this.settings.zoomLevel,this.prevDistance=this.startDistance)},l.prototype.onMouseMove=function(u){if(u.touches.length>1){var h=this.getTouchDistance(u);Math.abs(this.prevDistance-h)>1&&(this.settings.zoomLevel=this.startZoomLevel*(h/this.startDistance),this.view.scrollTo(this.getMiddleLayoutPoint(u),this.getMiddleAbsPoint(u)),this.view.normalize(),this.prevDistance=h)}a.prototype.onMouseMove.call(this,u)},l.prototype.onMouseUp=function(u){0===u.touches.length&&setTimeout(function(){this.handler.switchToDefaultState()}.bind(this),1)},l.prototype.start=function(){a.prototype.start.call(this),this.settings.zoomLevel=this.view.getZoom(),this.settings.autoZoom=E.AutoZoomMode.Disabled},l.prototype.getTouchDistance=function(u){var h=new y.Point(u.touches[0].offsetPoint.x,u.touches[0].offsetPoint.y),f=new y.Point(u.touches[1].offsetPoint.x,u.touches[1].offsetPoint.y);return d.Metrics.euclideanDistance(h,f)},l.prototype.getPointByEvent=function(u){return this.getMiddleAbsPoint(u)},l.prototype.getMiddleAbsPoint=function(u){return u.touches.length>1?l.getMiddlePointByEvent(u,function(h){return h.offsetPoint}):u.offsetPoint},l.prototype.getMiddleLayoutPoint=function(u){return u.touches.length>1?l.getMiddlePointByEvent(u,function(h){return h.modelPoint}):u.modelPoint},l.getMiddlePointByEvent=function(u,h){if(u.touches.length>1)return new y.Point((h(u.touches[0]).x+h(u.touches[1]).x)/2,(h(u.touches[0]).y+h(u.touches[1]).y)/2)},l}(p.MouseHandlerScrollingState);_.MouseHandlerZoomOnPinchState=s},7189:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MouseHandlerZoomOnWheelState=void 0;var E=x(5434),y=x(6031),p=x(240),d=function(s){function a(l,u,h){var f=s.call(this,l)||this;return f.settings=u,f.view=h,f}return b(a,s),a.prototype.onMouseWheel=function(l){return this.trySwitchToDefault(l)?this.handler.state.onMouseWheel(l):(this.settings.zoomLevel=this.view.getNextStepZoom(l.deltaY<0),l.source.type===y.MouseEventElementType.Background?this.view.resetScroll():(this.view.scrollTo(l.modelPoint,l.offsetPoint),this.view.normalize()),l.preventDefault=!0,!0)},a.prototype.onMouseUp=function(l){this.handler.switchToDefaultState(),this.handler.state.onMouseUp(l)},a.prototype.onMouseDown=function(l){this.handler.switchToDefaultState(),this.handler.state.onMouseDown(l)},a.prototype.onMouseMove=function(l){this.trySwitchToDefault(l)&&this.handler.state.onMouseMove(l)},a.prototype.trySwitchToDefault=function(l){return!!this.handler.canFinishZoomOnWheel(l)&&(this.handler.switchToDefaultState(),!0)},a.prototype.start=function(){s.prototype.start.call(this),this.settings.zoomLevel=this.view.getZoom(),this.settings.autoZoom=p.AutoZoomMode.Disabled},a}(E.MouseHandlerStateBase);_.MouseHandlerZoomOnWheelState=d},8376:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextInputHandler=void 0;var m=x(6516),b=x(6031),E=x(2153),y=x(5503),p=x(7959),d=x(5144),s=function(){function a(l){this.control=l}return a.prototype.startTextInput=function(l,u){if(!l.isLocked&&l.enableText&&l.allowEditText&&!this.control.settings.readOnly&&this.canFinishTextEditing()){this.control.beginUpdate(),this.textInputItem=l;var h=!0;if(this.textInputItem instanceof y.Shape){var f=this.textInputItem.textEditRectangle;(h=this.control.permissionsProvider.canChangeShapeText(this.textInputItem))&&this.control.eventManager.raiseTextInputStart(this.textInputItem,this.textInputItem.text,f.createPosition(),f.createSize())}else this.textInputItem instanceof p.Connector&&(this.textInputPosition=u,(h=this.control.permissionsProvider.canChangeConnectorText(this.textInputItem,this.textInputPosition))&&this.control.eventManager.raiseTextInputStart(this.textInputItem,this.textInputItem.getText(this.textInputPosition),this.textInputItem.getTextPoint(this.textInputPosition)));h||(delete this.textInputItem,this.control.endUpdate())}},a.prototype.endTextInput=function(l){var u=this.textInputItem;delete this.textInputItem,this.control.eventManager.raiseTextInputEnd(u,l),this.control.endUpdate(),this.control.barManager.updateItemsState()},a.prototype.raiseTextInputPermissionsCheck=function(l){this.control.eventManager.raiseTextInputPermissionsCheck(this.textInputItem,l)},a.prototype.applyTextInput=function(l,u){if(this.canFinishTextEditing(l)){var h=this.textInputItem,f=this.textInputPosition;this.endTextInput(u),h instanceof y.Shape?h.text!==l&&this.control.history.addAndRedo(new m.ChangeShapeTextHistoryItem(h,l)):h instanceof p.Connector&&h.getText(f)!==l&&this.control.history.addAndRedo(new d.ChangeConnectorTextHistoryItem(h,f,l))}},a.prototype.canFinishTextEditing=function(l){var u=!0;if(this.isTextInputActive()){var h=l||this.getTextInputElementValue();this.textInputItem instanceof y.Shape?u=this.control.permissionsProvider.canApplyShapeTextChange(this.textInputItem,h):this.textInputItem instanceof p.Connector&&(u=this.control.permissionsProvider.canApplyConnectorTextChange(this.textInputItem,this.textInputPosition,h)),this.raiseTextInputPermissionsCheck(u)}return u},a.prototype.getTextInputElementValue=function(){return this.control.render?this.control.render.input.getTextInputElementValue():""},a.prototype.cancelTextInput=function(){this.raiseTextInputPermissionsCheck(!0),this.endTextInput(!0)},a.prototype.isTextInputActive=function(){return void 0!==this.textInputItem},a.prototype.processDblClick=function(l){if(l.source.type===b.MouseEventElementType.Shape){var u=this.control.model.findShape(l.source.key);this.startTextInput(u)}else if(l.source.type===b.MouseEventElementType.Connector){var h=(f=this.control.model.findConnector(l.source.key)).getTextPositionByPoint(l.modelPoint);this.startTextInput(f,h)}else if(l.source.type===b.MouseEventElementType.ConnectorText){var f=this.control.model.findConnector(l.source.key);h=parseFloat(l.source.value),this.startTextInput(f,h)}},a.prototype.onDblClick=function(l){var u=this;setTimeout(function(){u.processDblClick(l)},10)},a.prototype.onKeyDown=function(l){this.isTextInputActive()&&(13===l.keyCode&&this.hasCtrlModifier(l.modifiers)&&(l.preventDefault=!0,this.applyTextInput(l.inputText,!0)),27===l.keyCode&&this.cancelTextInput())},a.prototype.onBlur=function(l){this.isTextInputActive()&&this.applyTextInput(l.inputText)},a.prototype.onFocus=function(l){},a.prototype.hasCtrlModifier=function(l){return(l&E.ModifierKey.Ctrl)>0},a}();_.TextInputHandler=s},3541:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectionPointsVisualizer=_.ConnectionPointInfo=void 0,_.ConnectionPointInfo=function(b,E){this.point=b,this.side=E,this.allowed=!0};var m=function(){function b(E){this.dispatcher=E}return b.prototype.getKey=function(){return this.key},b.prototype.setPoints=function(E,y,p,d){this.key===E&&this.pointIndex===p||(this.key=E,this.points=y,this.pointIndex=p,this.outsideRectangle=d,this.raiseShow())},b.prototype.setPointIndex=function(E){0<=E&&E<this.points.length&&this.pointIndex!==E&&(this.pointIndex=E,this.raiseShow())},b.prototype.update=function(){this.raiseShow()},b.prototype.reset=function(){"-1"!==this.key&&(this.key="-1",this.points=[],this.pointIndex=-1,this.outsideRectangle=void 0,this.raiseHide())},b.prototype.raiseShow=function(){var E=this;this.dispatcher.raise1(function(y){return y.notifyConnectionPointsShow(E.key,E.points,E.pointIndex,E.outsideRectangle)})},b.prototype.raiseHide=function(){this.dispatcher.raise1(function(E){return E.notifyConnectionPointsHide()})},b}();_.ConnectionPointsVisualizer=m},3702:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectionTargetVisualizer=_.ConnectionTargetInfo=void 0;var E=x(3785),y=function(d,s){this.rect=d,this.strokeWidth=s,this.allowed=!0};_.ConnectionTargetInfo=y;var p=function(d){function s(a){return d.call(this,a)||this}return b(s,d),s.prototype.raiseShow=function(){var a=this,l=new y(this.targetRect,this.targetStrokeWidth);this.dispatcher.raise1(function(u){return u.notifyConnectionTargetShow(a.key,l)})},s.prototype.raiseHide=function(){this.dispatcher.raise1(function(a){return a.notifyConnectionTargetHide()})},s}(E.TargetVisualizerBase);_.ConnectionTargetVisualizer=p},9198:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ContainerTargetVisualizer=_.ContainerTargetInfo=void 0;var E=x(3785),y=function(d,s){this.rect=d,this.strokeWidth=s};_.ContainerTargetInfo=y;var p=function(d){function s(a){return d.call(this,a)||this}return b(s,d),s.prototype.raiseShow=function(){var a=this,l=new y(this.targetRect,this.targetStrokeWidth);this.dispatcher.raise1(function(u){return u.notifyContainerTargetShow(a.key,l)})},s.prototype.raiseHide=function(){this.dispatcher.raise1(function(a){return a.notifyContainerTargetHide()})},s}(E.TargetVisualizerBase);_.ContainerTargetVisualizer=p},371:(J,_)=>{var b;Object.defineProperty(_,"__esModule",{value:!0}),_.ExtensionLinesVisualizer=_.ExtensionLine=_.ExtensionLineType=void 0,(b=_.ExtensionLineType||(_.ExtensionLineType={}))[b.LeftToLeftAbove=0]="LeftToLeftAbove",b[b.LeftToLeftBelow=1]="LeftToLeftBelow",b[b.RightToRightAbove=2]="RightToRightAbove",b[b.RightToRightBelow=3]="RightToRightBelow",b[b.LeftToRightAbove=4]="LeftToRightAbove",b[b.LeftToRightBelow=5]="LeftToRightBelow",b[b.RightToLeftAbove=6]="RightToLeftAbove",b[b.RightToLeftBelow=7]="RightToLeftBelow",b[b.TopToTopBefore=8]="TopToTopBefore",b[b.TopToTopAfter=9]="TopToTopAfter",b[b.BottomToBottomBefore=10]="BottomToBottomBefore",b[b.BottomToBottomAfter=11]="BottomToBottomAfter",b[b.TopToBottomBefore=12]="TopToBottomBefore",b[b.TopToBottomAfter=13]="TopToBottomAfter",b[b.BottomToTopBefore=14]="BottomToTopBefore",b[b.BottomToTopAfter=15]="BottomToTopAfter",b[b.HorizontalCenterAbove=16]="HorizontalCenterAbove",b[b.HorizontalCenterBelow=17]="HorizontalCenterBelow",b[b.VerticalCenterBefore=18]="VerticalCenterBefore",b[b.VerticalCenterAfter=19]="VerticalCenterAfter",b[b.VerticalCenterToPageCenter=20]="VerticalCenterToPageCenter",b[b.HorizontalCenterToPageCenter=21]="HorizontalCenterToPageCenter",b[b.LeftToPageCenter=22]="LeftToPageCenter",b[b.RightToPageCenter=23]="RightToPageCenter",b[b.TopToPageCenter=24]="TopToPageCenter",b[b.BottomToPageCenter=25]="BottomToPageCenter";var x=function(b,E,y){this.type=b,this.segment=E,this.text=y};_.ExtensionLine=x;var m=function(){function b(E){this.dispatcher=E,this.lines=[],this.lineIndexByType={}}return b.prototype.addSegment=function(E,y,p){var d=this.lineIndexByType[E];if(void 0===d){var s=new x(E,y,p),a=this.lines.push(s);this.lineIndexByType[s.type]=a-1,this.raiseShow()}else y.length<this.lines[d].segment.length&&(s=new x(E,y,p),this.lines.splice(d,1,s),this.raiseShow())},b.prototype.update=function(){this.raiseShow()},b.prototype.reset=function(){this.lines.length&&(this.lines=[],this.lineIndexByType={},this.raiseHide())},b.prototype.raiseShow=function(){var E=this;this.dispatcher.raise1(function(y){return y.notifyExtensionLinesShow(E.lines)})},b.prototype.raiseHide=function(){this.dispatcher.raise1(function(E){return E.notifyExtensionLinesHide()})},b}();_.ExtensionLinesVisualizer=m},6569:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ResizeInfoVisualizer=void 0;var x=function(){function m(b){this.dispatcher=b}return m.prototype.set=function(b,E){this.point=b,this.text=E,this.raiseShow()},m.prototype.reset=function(){void 0!==this.point&&(this.point=void 0,this.text=void 0,this.raiseHide())},m.prototype.raiseShow=function(){var b=this;this.dispatcher.raise1(function(E){return E.notifyResizeInfoShow(b.point,b.text)})},m.prototype.raiseHide=function(){this.dispatcher.raise1(function(b){return b.notifyResizeInfoHide()})},m}();_.ResizeInfoVisualizer=x},4753:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionRectVisualizer=void 0;var x=function(){function m(b){this.dispatcher=b}return m.prototype.setRectangle=function(b){this.rect=b,this.raiseShow()},m.prototype.reset=function(){this.rect=void 0,this.raiseHide()},m.prototype.raiseShow=function(){var b=this;this.dispatcher.raise1(function(E){return E.notifySelectionRectShow(b.rect)})},m.prototype.raiseHide=function(){this.dispatcher.raise1(function(b){return b.notifySelectionRectHide()})},m}();_.SelectionRectVisualizer=x},3785:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TargetVisualizerBase=void 0;var x=function(){function m(b){this.dispatcher=b}return m.prototype.getKey=function(){return this.key},m.prototype.setTargetRect=function(b,E,y){this.key!==b&&(this.key=b,this.targetRect=E,this.targetStrokeWidth=y,this.raiseShow())},m.prototype.reset=function(){"-1"!==this.key&&(this.key="-1",this.targetRect=void 0,this.targetStrokeWidth=0,this.raiseHide())},m}();_.TargetVisualizerBase=x},7733:function(J,_,x){var m,b=this&&this.__extends||(m=function(P,k){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,R){A.__proto__=R}||function(A,R){for(var M in R)R.hasOwnProperty(M)&&(A[M]=R[M])})(P,k)},function(P,k){function A(){this.constructor=P}m(P,k),P.prototype=null===k?Object.create(k):(A.prototype=k.prototype,new A)});Object.defineProperty(_,"__esModule",{value:!0}),_.VisualizerManager=void 0;var E=x(3702),y=x(9198),p=x(371),d=x(6031),s=x(3541),a=x(5503),l=x(8675),u=x(1335),h=x(8900),f=x(4e3),g=x(4867),O=x(6569),I=x(4753),D=x(1772),C=x(6224),w=function(P){function k(A,R,M,L,H){void 0===H&&(H=L.readOnly);var j=P.call(this)||this;return j.selection=A,j.model=R,j.eventManager=M,j.settings=L,j.readOnly=H,j.onVisualizersUpdate=new l.EventDispatcher,j.connectionPointsVisualizer=new s.ConnectionPointsVisualizer(j.onVisualizersUpdate),j.connectionPointsVisualizer=new s.ConnectionPointsVisualizer(j.onVisualizersUpdate),j.connectionTargetVisualizer=new E.ConnectionTargetVisualizer(j.onVisualizersUpdate),j.containerTargetVisualizer=new y.ContainerTargetVisualizer(j.onVisualizersUpdate),j.extensionLinesVisualizer=new p.ExtensionLinesVisualizer(j.onVisualizersUpdate),j.resizeInfoVisualizer=new O.ResizeInfoVisualizer(j.onVisualizersUpdate),j.selectionRectangleVisualizer=new I.SelectionRectVisualizer(j.onVisualizersUpdate),j}return b(k,P),k.prototype.initialize=function(A){this.model=A},k.prototype.onMouseDown=function(A){},k.prototype.onMouseUp=function(A){},k.prototype.onMouseEnter=function(A){},k.prototype.onMouseLeave=function(A){this.resetConnectionPoints(),this.resetConnectionTarget(),this.resetExtensionLines(),this.resetContainerTarget(),this.resetResizeInfo(),this.resetSelectionRectangle()},k.prototype.onBlur=function(A){},k.prototype.onFocus=function(A){},k.prototype.updateConnections=function(A,R,M){var L=-1;M&&R===d.MouseEventElementType.ShapeConnectionPoint&&(L=parseInt(M)),this.setConnectionPoints(A,R,L,A&&(!A.allowResizeHorizontally&&!A.allowResizeVertically||A.isLocked))},k.prototype.setConnectionPoints=function(A,R,M,L){if(this.eventManager.isFocused())if(!A||R!==d.MouseEventElementType.Shape&&R!==d.MouseEventElementType.ShapeResizeBox&&R!==d.MouseEventElementType.ShapeConnectionPoint||void 0===A)this.connectionPointsVisualizer.reset();else{var H=A.key,j=this.selection.hasKey(H),U=A.getConnectionPoints();this.connectionPointsVisualizer.setPoints(H,U.map(function(K){return new s.ConnectionPointInfo(K,A.getConnectionPointSide(K))}),M,j&&!L&&A.rectangle)}},k.prototype.setConnectionPointIndex=function(A){this.connectionPointsVisualizer.setPointIndex(A)},k.prototype.updateConnectionPoints=function(){void 0!==this.model.findItem(this.connectionPointsVisualizer.getKey())?this.connectionPointsVisualizer.update():this.connectionPointsVisualizer.reset()},k.prototype.resetConnectionPoints=function(){this.connectionPointsVisualizer.reset()},k.prototype.setConnectionTarget=function(A,R){!A||R!==d.MouseEventElementType.Shape&&R!==d.MouseEventElementType.ShapeConnectionPoint?this.connectionTargetVisualizer.reset():this.connectionTargetVisualizer.setTargetRect(A.key,A.rectangle,A.strokeWidth)},k.prototype.resetConnectionTarget=function(){this.connectionTargetVisualizer.reset()},k.prototype.setContainerTarget=function(A,R){A&&!A.isLocked&&R===d.MouseEventElementType.Shape&&A.enableChildren?this.containerTargetVisualizer.setTargetRect(A.key,A.rectangle,A.strokeWidth):this.containerTargetVisualizer.reset()},k.prototype.resetContainerTarget=function(){this.containerTargetVisualizer.reset()},k.prototype.setExtensionLines=function(A){var R=this;if(this.eventManager.isFocused()){this.extensionLinesVisualizer.reset();var M=g.ModelUtils.createRectangle(A.filter(function(L){return L}));this.addPageExtensionLines(M),this.model.items.forEach(function(L){A.indexOf(L)>-1||L instanceof a.Shape&&R.addShapeExtensionLines(L,M)})}},k.prototype.addPageExtensionLines=function(A){for(var R=Math.round(this.model.size.width/this.model.pageWidth),M=Math.round(this.model.size.height/this.model.pageHeight),L=0;L<R;L++)for(var H=0;H<M;H++){var j=new h.Point(L*this.model.pageWidth+this.model.pageWidth/2,H*this.model.pageHeight+this.model.pageHeight/2);if(Math.abs(A.center.x-j.x)<this.settings.gridSize/2){var U=new u.Segment(new h.Point(A.center.x,0),new h.Point(A.center.x,this.model.size.height));this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.HorizontalCenterToPageCenter,U,"")}Math.abs(A.center.y-j.y)<this.settings.gridSize/2&&(U=new u.Segment(new h.Point(0,A.center.y),new h.Point(this.model.size.width,A.center.y)),this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.VerticalCenterToPageCenter,U,"")),Math.abs(A.x-j.x)<this.settings.gridSize/2&&(U=new u.Segment(new h.Point(A.x,0),new h.Point(A.x,this.model.size.height)),this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.LeftToPageCenter,U,"")),Math.abs(A.y-j.y)<this.settings.gridSize/2&&(U=new u.Segment(new h.Point(0,A.y),new h.Point(this.model.size.width,A.y)),this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.TopToPageCenter,U,"")),Math.abs(A.right-j.x)<this.settings.gridSize/2&&(U=new u.Segment(new h.Point(A.right,0),new h.Point(A.right,this.model.size.height)),this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.RightToPageCenter,U,"")),Math.abs(A.bottom-j.y)<this.settings.gridSize/2&&(U=new u.Segment(new h.Point(0,A.bottom),new h.Point(this.model.size.width,A.bottom)),this.extensionLinesVisualizer.addSegment(p.ExtensionLineType.BottomToPageCenter,U,""))}},k.prototype.addShapeExtensionLines=function(A,R){var M,L,H,j,U,K,q,Y,W=A.rectangle,z=A.strokeWidth-f.CanvasSelectionManager.extensionLineWidth,Z=!0;if(R.right<W.x?(U=(M=R.right)+z+f.CanvasSelectionManager.extensionLineOffset,q=(H=W.x)-f.CanvasSelectionManager.extensionLineOffset):R.x>W.right&&(U=(M=R.x)-f.CanvasSelectionManager.extensionLineOffset,q=(H=W.right)+z+f.CanvasSelectionManager.extensionLineOffset),R.bottom<W.y?(K=(L=R.bottom)+z+f.CanvasSelectionManager.extensionLineOffset,Y=(j=W.y)-f.CanvasSelectionManager.extensionLineOffset):R.y>W.bottom&&(K=(L=R.y)-f.CanvasSelectionManager.extensionLineOffset,Y=(j=W.bottom)+z+f.CanvasSelectionManager.extensionLineOffset),void 0!==U&&void 0!==q){var se=this.getViewUnitText(Math.abs(M-H));if(R.center.y===W.center.y){var re=new u.Segment(new h.Point(U,R.center.y),new h.Point(q,W.center.y));this.extensionLinesVisualizer.addSegment(U>q?p.ExtensionLineType.VerticalCenterAfter:p.ExtensionLineType.VerticalCenterBefore,re,Z?se:""),Z=!1}R.y===W.y&&(re=new u.Segment(new h.Point(U,R.y),new h.Point(q,W.y)),this.extensionLinesVisualizer.addSegment(U>q?p.ExtensionLineType.TopToTopAfter:p.ExtensionLineType.TopToTopBefore,re,Z?se:"")),R.bottom===W.bottom&&(re=new u.Segment(new h.Point(U,R.bottom+z),new h.Point(q,W.bottom+z)),this.extensionLinesVisualizer.addSegment(U>q?p.ExtensionLineType.BottomToBottomAfter:p.ExtensionLineType.BottomToBottomBefore,re,Z?se:"")),R.y===W.bottom&&(re=new u.Segment(new h.Point(U,R.y),new h.Point(q,W.bottom+z)),this.extensionLinesVisualizer.addSegment(U>q?p.ExtensionLineType.TopToBottomAfter:p.ExtensionLineType.TopToBottomBefore,re,Z?se:"")),R.bottom===W.y&&(re=new u.Segment(new h.Point(U,R.bottom+z),new h.Point(q,W.y)),this.extensionLinesVisualizer.addSegment(U>q?p.ExtensionLineType.BottomToTopAfter:p.ExtensionLineType.BottomToTopBefore,re,Z?se:""))}void 0!==K&&void 0!==Y&&(se=this.getViewUnitText(Math.abs(L-j)),R.center.x===W.center.x&&(re=new u.Segment(new h.Point(R.center.x,K),new h.Point(W.center.x,Y)),this.extensionLinesVisualizer.addSegment(K>Y?p.ExtensionLineType.HorizontalCenterBelow:p.ExtensionLineType.HorizontalCenterAbove,re,Z?se:""),Z=!1),R.x===W.x&&(re=new u.Segment(new h.Point(R.x,K),new h.Point(W.x,Y)),this.extensionLinesVisualizer.addSegment(K>Y?p.ExtensionLineType.LeftToLeftBelow:p.ExtensionLineType.LeftToLeftAbove,re,Z?se:"")),R.right===W.right&&(re=new u.Segment(new h.Point(R.right+z,K),new h.Point(W.right+z,Y)),this.extensionLinesVisualizer.addSegment(K>Y?p.ExtensionLineType.RightToRightBelow:p.ExtensionLineType.RightToRightAbove,re,Z?se:"")),R.x===W.right&&(re=new u.Segment(new h.Point(R.x,K),new h.Point(W.right+z,Y)),this.extensionLinesVisualizer.addSegment(K>Y?p.ExtensionLineType.LeftToRightBelow:p.ExtensionLineType.LeftToRightAbove,re,Z?se:"")),R.right===W.x&&(re=new u.Segment(new h.Point(R.right+z,K),new h.Point(W.x,Y)),this.extensionLinesVisualizer.addSegment(K>Y?p.ExtensionLineType.RightToLeftBelow:p.ExtensionLineType.RightToLeftAbove,re,Z?se:"")))},k.prototype.resetExtensionLines=function(){this.extensionLinesVisualizer.reset()},k.prototype.setResizeInfo=function(A){var R=g.ModelUtils.createRectangle(A),M=new h.Point(R.center.x,R.bottom+f.CanvasSelectionManager.resizeInfoOffset),L=this.getViewUnitText(R.width)+" x "+this.getViewUnitText(R.height);this.resizeInfoVisualizer.set(M,L)},k.prototype.resetResizeInfo=function(){this.resizeInfoVisualizer.reset()},k.prototype.setSelectionRectangle=function(A){this.selectionRectangleVisualizer.setRectangle(A)},k.prototype.resetSelectionRectangle=function(){this.selectionRectangleVisualizer.reset()},k.prototype.getViewUnitText=function(A){return g.ModelUtils.getUnitText(this.settings.viewUnits,C.DiagramLocalizationService.unitItems,C.DiagramLocalizationService.formatUnit,A)},k.prototype.notifyReadOnlyChanged=function(A){this.readOnly=A,this.readOnly&&(this.resetConnectionPoints(),this.resetConnectionTarget(),this.resetExtensionLines(),this.resetContainerTarget(),this.resetResizeInfo(),this.resetSelectionRectangle())},k.prototype.notifyDragStart=function(A){},k.prototype.notifyDragEnd=function(A){},k.prototype.notifyDragScrollStart=function(){},k.prototype.notifyDragScrollEnd=function(){},k.prototype.onUpdateUnlocked=function(A){},k}(D.BatchUpdatableObject);_.VisualizerManager=w},7459:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.VisualizerTouchManager=void 0;var E=x(7733),y=x(6031),p=function(d){function s(a,l,u,h,f){void 0===f&&(f=h.readOnly);var g=d.call(this,a,l,u,h,f)||this;return a.onChanged.add(g),g}return b(s,d),s.prototype.onBlur=function(a){var l=this;setTimeout(function(){l.hideConnections()},1)},s.prototype.onFocus=function(a){var l=this;setTimeout(function(){l.showConnections()},1)},s.prototype.hideConnections=function(){this.readOnly||this.resetConnectionPoints()},s.prototype.showConnections=function(){if(!this.readOnly&&this.needShowConnections()){var a=this.selection.getSelectedShapes();1===a.length&&this.setConnectionPoints(a[0],y.MouseEventElementType.ShapeConnectionPoint,-1,!a[0].allowResizeHorizontally&&!a[0].allowResizeVertically||a[0].isLocked)}},s.prototype.needShowConnections=function(){var a=this.selection.getSelectedItems(),l=this.selection.getSelectedShapes();return 1===a.length&&1===l.length},s.prototype.notifySelectionChanged=function(a){this.isUpdateLocked()?this.registerOccurredEvent(1):this.raiseSelectionChanged()},s.prototype.raiseSelectionChanged=function(){this.needShowConnections()?this.showConnections():this.hideConnections()},s.prototype.onUpdateUnlocked=function(a){1&a&&this.raiseSelectionChanged()},s.prototype.notifyDragStart=function(a){this.hideConnections()},s.prototype.notifyDragEnd=function(a){this.showConnections()},s}(E.VisualizerManager);_.VisualizerTouchManager=p},3477:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.SetConnectionPointIndexHistoryItem=_.AddConnectionHistoryItem=void 0;var E=x(4412),y=x(7959),p=function(s){function a(l,u,h,f){var g=s.call(this)||this;return g.connectorKey=l.key,g.itemKey=u.key,g.connectionPointIndex=h,g.position=f,g}return b(a,s),a.prototype.redo=function(l){var u=l.model.findConnector(this.connectorKey),h=l.model.findItem(this.itemKey);l.addConnection(u,h,this.connectionPointIndex,this.position)},a.prototype.undo=function(l){var u=l.model.findConnector(this.connectorKey);l.deleteConnection(u,this.position)},a}(E.HistoryItem);_.AddConnectionHistoryItem=p;var d=function(s){function a(l,u,h){var f=s.call(this)||this;return f.connectorKey=l.key,f.connectionPointIndex=u,f.position=h,f}return b(a,s),a.prototype.redo=function(l){var u=l.model.findConnector(this.connectorKey);this.oldConnectionPointIndex=this.position===y.ConnectorPosition.Begin?u.beginConnectionPointIndex:u.endConnectionPointIndex,l.setConnectionPointIndex(u,this.connectionPointIndex,this.position)},a.prototype.undo=function(l){var u=l.model.findConnector(this.connectorKey);l.setConnectionPointIndex(u,this.oldConnectionPointIndex,this.position)},a}(E.HistoryItem);_.SetConnectionPointIndexHistoryItem=d},9603:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.AddConnectorHistoryItem=void 0;var E=x(4412),y=x(7959),p=function(d){function s(a,l,u){var h=d.call(this)||this;return h.points=a,h.dataKey=l,h.renderPointsContext=u,h}return b(s,d),s.prototype.redo=function(a){var l=new y.Connector(this.points);void 0!==this.dataKey&&(l.dataKey=this.dataKey),void 0!==this.renderPointsContext&&l.replaceRenderPoints(this.renderPointsContext),a.addConnector(l,this.connectorKey),this.connectorKey=l.key},s.prototype.undo=function(a){var l=a.model.findConnector(this.connectorKey);a.deleteConnector(l)},s}(E.HistoryItem);_.AddConnectorHistoryItem=p},4430:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.AddConnectorPointHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.connectorKey=d,l.pointIndex=s,l.point=a,l}return b(p,y),p.prototype.redo=function(d){var s=this,a=d.model.findConnector(this.connectorKey);this.renderContext=a.tryCreateRenderPointsContext(),d.addDeleteConnectorPoint(a,function(l){l.addPoint(s.pointIndex,s.point),l.onAddPoint(s.pointIndex,s.point)})},p.prototype.undo=function(d){var s=this,a=d.model.findConnector(this.connectorKey);d.addDeleteConnectorPoint(a,function(l){l.deletePoint(s.pointIndex),l.replaceRenderPoints(s.renderContext)})},p}(x(4412).HistoryItem);_.AddConnectorPointHistoryItem=E},4145:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.AddShapeHistoryItem=void 0;var E=x(4412),y=x(5503),p=function(d){function s(a,l,u,h){var f=d.call(this)||this;return f.shapeDescription=a,f.position=l,f.text=u,f.dataKey=h,f}return b(s,d),s.prototype.redo=function(a){var l=new y.Shape(this.shapeDescription,this.position);"string"==typeof this.text&&(l.text=this.text),void 0!==this.dataKey&&(l.dataKey=this.dataKey),a.addShape(l,this.shapeKey),this.shapeKey=l.key},s.prototype.undo=function(a){a.deleteShape(a.model.findShape(this.shapeKey),!0)},s}(E.HistoryItem);_.AddShapeHistoryItem=p},58:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ReplaceConnectorPointsHistoryItem=_.ChangeConnectorPointsHistoryItem=_.UpdateConnectorPointsHistoryItem=void 0;var E=function(d){function s(a,l){var u=d.call(this)||this;return u.connectorKey=a,u.newPoints=l,u}return b(s,d),s.prototype.redo=function(a){var l=this,u=a.model.findConnector(this.connectorKey);this.oldRenderContext=u.tryCreateRenderPointsContext(),this.oldPoints=u.points.map(function(h){return h.clone()}),a.changeConnectorPoints(u,function(h){h.points=l.newPoints,l.updateRenderPoints(h)})},s.prototype.undo=function(a){var l=this,u=a.model.findConnector(this.connectorKey);a.changeConnectorPoints(u,function(h){h.points=l.oldPoints,h.replaceRenderPoints(l.oldRenderContext)})},s}(x(4412).HistoryItem);_.UpdateConnectorPointsHistoryItem=E;var y=function(d){function s(a,l,u){var h=d.call(this,a,l)||this;return h.connectorKey=a,h.newPoints=l,h.newRenderContext=u,h}return b(s,d),s.prototype.updateRenderPoints=function(a){a.replaceRenderPoints(this.newRenderContext)},s}(E);_.ChangeConnectorPointsHistoryItem=y;var p=function(d){function s(a,l){var u=d.call(this,a,l)||this;return u.connectorKey=a,u.newPoints=l,u}return b(s,d),s.prototype.updateRenderPoints=function(a){a.clearRenderPoints()},s}(E);_.ReplaceConnectorPointsHistoryItem=p},329:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShapeParametersHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.shapeKey=d,a.parameters=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);this.oldParameters=s.parameters.clone(),d.changeShapeParameters(s,this.parameters)},p.prototype.undo=function(d){var s=d.model.findShape(this.shapeKey);d.changeShapeParameters(s,this.oldParameters)},p}(x(4412).HistoryItem);_.ChangeShapeParametersHistoryItem=E},56:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShapeTypeHistoryItem=void 0;var E=x(6629),y=function(p){function d(s,a){var l=p.call(this)||this;return l.shapeKey=s.key,l.newType=a,l}return b(d,p),d.prototype.redo=function(s){var a=s.model.findShape(this.shapeKey);this.oldType=a.description.key,this.oldParameters=a.parameters.clone(),s.updateShapeType(a,this.newType,new E.ShapeParameters)},d.prototype.undo=function(s){var a=s.model.findShape(this.shapeKey);s.updateShapeType(a,this.oldType,this.oldParameters)},d}(x(4412).HistoryItem);_.ChangeShapeTypeHistoryItem=y},8930:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteConnectionHistoryItem=void 0;var E=x(4412),y=x(7959),p=function(d){function s(a,l){var u=d.call(this)||this;return u.connectorKey=a.key,u.position=l,u.itemKey=a.getExtremeItem(u.position).key,u}return b(s,d),s.prototype.redo=function(a){var l=a.model.findConnector(this.connectorKey);this.oldConnectionPointIndex=this.position===y.ConnectorPosition.Begin?l.beginConnectionPointIndex:l.endConnectionPointIndex,a.deleteConnection(l,this.position)},s.prototype.undo=function(a){var l=a.model.findConnector(this.connectorKey),u=a.model.findItem(this.itemKey);a.addConnection(l,u,this.oldConnectionPointIndex,this.position)},s}(E.HistoryItem);_.DeleteConnectionHistoryItem=p},9143:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteConnectorHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.connectorKey=d,s}return b(p,y),p.prototype.redo=function(d){var s=d.model.findConnector(this.connectorKey);this.connector=s.clone(),d.deleteConnector(s)},p.prototype.undo=function(d){d.addConnector(this.connector,this.connector.key)},p}(x(4412).HistoryItem);_.DeleteConnectorHistoryItem=E},1704:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteShapeHistoryItem=void 0;var E=function(y){function p(d,s){void 0===s&&(s=!0);var a=y.call(this)||this;return a.shapeKey=d,a.allowed=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);this.shape=s.clone(),d.deleteShape(s,this.allowed)},p.prototype.undo=function(d){d.addShape(this.shape,this.shape.key)},p}(x(4412).HistoryItem);_.DeleteShapeHistoryItem=E},3849:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImportConnectorHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.connector=d,s}return b(p,y),p.prototype.redo=function(d){this.connectorKey=this.connector.key,d.insertConnector(this.connector)},p.prototype.undo=function(d){var s=d.model.findConnector(this.connectorKey);d.removeConnector(s)},p}(x(4412).HistoryItem);_.ImportConnectorHistoryItem=E},4383:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImportShapeHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.shape=d,s}return b(p,y),p.prototype.redo=function(d){this.shapeKey=this.shape.key,d.insertShape(this.shape)},p.prototype.undo=function(d){d.removeShape(d.model.findShape(this.shapeKey),!0)},p}(x(4412).HistoryItem);_.ImportShapeHistoryItem=E},9310:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.InsertToContainerHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.containerKey=s.key,a.itemKey=d.key,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey),a=d.model.findShape(this.containerKey);d.insertToContainer(s,a)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.removeFromContainer(s)},p}(x(4412).HistoryItem);_.InsertToContainerHistoryItem=E},8338:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MoveConnectorRightAnglePointsHistoryItem=_.MoveConnectorPointHistoryItem=void 0;var E=x(8900),y=x(4412),p=function(s){function a(l,u,h){var f=s.call(this)||this;return f.connectorKey=l,f.pointIndex=u,f.newPoint=h,f}return b(a,s),a.prototype.redo=function(l){var u=this,h=l.model.findConnector(this.connectorKey);this.oldPoint=h.points[this.pointIndex].clone(),this.renderContext=h.tryCreateRenderPointsContext(),l.moveConnectorPoint(h,this.pointIndex,function(f){f.movePoint(u.pointIndex,u.newPoint),f.onMovePoint(u.pointIndex,u.newPoint)})},a.prototype.undo=function(l){var u=this,h=l.model.findConnector(this.connectorKey);l.moveConnectorPoint(h,this.pointIndex,function(f){f.movePoint(u.pointIndex,u.oldPoint),f.replaceRenderPoints(u.renderContext)})},a}(y.HistoryItem);_.MoveConnectorPointHistoryItem=p;var d=function(s){function a(l,u,h,f,g){var O=s.call(this)||this;return O.connectorKey=l,O.beginPointIndex=u,O.lastPointIndex=h,O.newX=f,O.newY=g,O.oldPoints=[],O}return b(a,s),a.prototype.redo=function(l){var u=this,h=l.model.findConnector(this.connectorKey);this.renderContext=h.tryCreateRenderPointsContext(),this.oldPoints=h.points.slice(this.beginPointIndex,this.lastPointIndex+1).map(function(g){return g.clone()});var f=[];l.changeConnectorPoints(h,function(g){for(var O=u.beginPointIndex;O<=u.lastPointIndex;O++){var I=new E.Point(void 0===u.newX?g.points[O].x:u.newX,void 0===u.newY?g.points[O].y:u.newY);f.push(I),g.movePoint(O,I)}g.onMovePoints(u.beginPointIndex,u.lastPointIndex,f)})},a.prototype.undo=function(l){var u=this,h=l.model.findConnector(this.connectorKey);l.changeConnectorPoints(h,function(f){for(var g=u.beginPointIndex;g<=u.lastPointIndex;g++)f.movePoint(g,u.oldPoints[g-u.beginPointIndex]);f.replaceRenderPoints(u.renderContext)})},a}(y.HistoryItem);_.MoveConnectorRightAnglePointsHistoryItem=d},4160:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.MoveShapeHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.shapeKey=d,a.position=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);this.oldPosition=s.position.clone(),d.moveShape(s,this.position)},p.prototype.undo=function(d){var s=d.model.findShape(this.shapeKey);d.moveShape(s,this.oldPosition)},p}(x(4412).HistoryItem);_.MoveShapeHistoryItem=E},9753:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.RemoveFromContainerHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.itemKey=d.key,s}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.containerKey=s.container&&s.container.key,d.removeFromContainer(s)},p.prototype.undo=function(d){var s=d.model.findContainer(this.containerKey),a=d.model.findItem(this.itemKey);d.insertToContainer(a,s)},p}(x(4412).HistoryItem);_.RemoveFromContainerHistoryItem=E},4629:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ResizeShapeHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.shapeKey=d,l.position=s,l.size=a,l}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);this.oldPosition=s.position.clone(),this.oldSize=s.size.clone(),d.resizeShape(s,this.position,this.size)},p.prototype.undo=function(d){var s=d.model.findShape(this.shapeKey);d.resizeShape(s,this.oldPosition,this.oldSize)},p}(x(4412).HistoryItem);_.ResizeShapeHistoryItem=E},7626:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ScrollIntoViewOnUndoHistoryItem=_.ScrollIntoViewOnRedoHistoryItem=void 0;var E=x(4412),y=function(d){function s(a,l){var u=d.call(this)||this;return u.view=a,u.rectangle=l,u.view=a,u.rectangle=l.clone(),u}return b(s,d),s.prototype.redo=function(a){this.view.scrollIntoView(this.rectangle)},s.prototype.undo=function(a){},s}(E.HistoryItem);_.ScrollIntoViewOnRedoHistoryItem=y;var p=function(d){function s(a,l){var u=d.call(this)||this;return u.view=a,u.rectangle=l,u.view=a,u.rectangle=l.clone(),u}return b(s,d),s.prototype.redo=function(a){},s.prototype.undo=function(a){this.view.scrollIntoView(this.rectangle)},s}(E.HistoryItem);_.ScrollIntoViewOnUndoHistoryItem=p},4297:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.SetSelectionHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.selectedKeys=s,l.selection=d,l.forceChange=a,l}return b(p,y),p.prototype.redo=function(){this.oldSelection=this.selection.getKeys().slice(0),this.selection.set(this.selectedKeys,this.forceChange)},p.prototype.undo=function(){this.selection.set(this.oldSelection,this.forceChange)},p}(x(4412).HistoryItem);_.SetSelectionHistoryItem=E},1864:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.History=void 0;var m=x(4412),b=x(8675),E=function(){function y(p,d){this.modelManipulator=p,this.diagram=d,this.historyItems=[],this.currentIndex=-1,this.incrementalId=-1,this.transactionLevel=-1,this.unmodifiedIndex=-1,this.currTransactionId=0,this.onChanged=new b.EventDispatcher}return y.prototype.isModified=function(){if(this.unmodifiedIndex===this.currentIndex)return!1;for(var p=Math.min(this.unmodifiedIndex,this.currentIndex),d=Math.max(this.unmodifiedIndex,this.currentIndex),s=p+1;s<=d;s++)if(this.historyItems[s].changeModified())return!0;return!1},y.prototype.undo=function(){this.canUndo()&&(this.historyItems[this.currentIndex].undo(this.modelManipulator),this.currentIndex--,this.raiseChanged())},y.prototype.redo=function(){this.canRedo()&&(this.startDataSyncItem&&(this.startDataSyncItem.undo(this.modelManipulator),this.startDataSyncItem=void 0),this.currentIndex++,this.historyItems[this.currentIndex].redo(this.modelManipulator),this.raiseChanged())},y.prototype.canUndo=function(){return this.currentIndex>=0},y.prototype.canRedo=function(){return this.currentIndex<this.historyItems.length-1},y.prototype.beginTransaction=function(){return this.transactionLevel++,0===this.transactionLevel&&(this.transaction=new m.CompositionHistoryItem),this.currTransactionId++},y.prototype.endTransaction=function(p){if(!(--this.transactionLevel>=0)){var d=this.transaction.historyItems.length;if(d>0){var s=d>1?this.transaction:this.transaction.historyItems.pop();p?this.addDataSyncItem(s):this.addInternal(s)}d>0&&!p&&this.raiseChanged(),delete this.transaction}},y.prototype.addAndRedo=function(p){this.add(p),p.redo(this.modelManipulator),this.raiseChanged()},y.prototype.add=function(p){this.transactionLevel>=0?this.transaction.add(p):this.addInternal(p)},y.prototype.addInternal=function(p){this.currentIndex<this.historyItems.length-1&&(this.historyItems.splice(this.currentIndex+1),this.unmodifiedIndex=Math.min(this.unmodifiedIndex,this.currentIndex)),this.historyItems.push(p),this.currentIndex++,this.deleteOldItems()},y.prototype.addDataSyncItem=function(p){var d=this.historyItems[this.currentIndex];if(d){var s=void 0;d instanceof m.CompositionHistoryItem?s=d:(this.historyItems.splice(this.currentIndex,1),s=new m.CompositionHistoryItem,this.historyItems.push(s),s.historyItems.push(d)),s.dataSyncItems.push(p)}else this.historyItems.length&&(this.startDataSyncItem=p)},y.prototype.deleteOldItems=function(){var p=this.historyItems.length-y.MAX_HISTORY_ITEM_COUNT;p>0&&this.currentIndex>p&&(this.historyItems.splice(0,p),this.currentIndex-=p)},y.prototype.getNextId=function(){return this.incrementalId++,this.incrementalId},y.prototype.clear=function(){this.currentIndex=-1,this.unmodifiedIndex=-1,this.incrementalId=-1,this.historyItems=[],delete this.transaction,this.transactionLevel=-1},y.prototype.resetModified=function(){this.unmodifiedIndex=this.currentIndex},y.prototype.getCurrentItemId=function(){if(-1===this.currentIndex)return-1;var p=this.historyItems[this.currentIndex];return-1===p.uniqueId&&(p.uniqueId=this.getNextId()),p.uniqueId},y.prototype.undoTransaction=function(){this.diagram.beginUpdateCanvas();for(var p=this.transaction.historyItems;p.length;)p.pop().undo(this.modelManipulator);this.diagram.endUpdateCanvas()},y.prototype.undoTransactionTo=function(p){this.diagram.beginUpdateCanvas();for(var d=this.transaction.historyItems;d.length;){var s=d.pop();if(s.undo(this.modelManipulator),s===p)break}this.diagram.endUpdateCanvas()},y.prototype.raiseChanged=function(){-1===this.transactionLevel&&this.onChanged.raise("notifyHistoryChanged")},y.MAX_HISTORY_ITEM_COUNT=100,y}();_.History=E},4412:function(J,_){var x,m=this&&this.__extends||(x=function(y,p){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}x(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.CompositionHistoryItem=_.HistoryItem=void 0;var b=function(){function y(){this.uniqueId=-1}return y.prototype.changeModified=function(){return!0},y.prototype.getName=function(){return this.constructor.name},y}();_.HistoryItem=b;var E=function(y){function p(){var d=null!==y&&y.apply(this,arguments)||this;return d.historyItems=[],d.dataSyncItems=[],d}return m(p,y),p.prototype.changeModified=function(){for(var d,s=0;d=this.historyItems[s];s++)if(d.changeModified())return!0;return!1},p.prototype.redo=function(d){for(var s,a=0;s=this.historyItems[a];a++)s.redo(d)},p.prototype.undo=function(d){for(var s,a=this.dataSyncItems.length-1;s=this.dataSyncItems[a];a--)s.undo(d);for(this.dataSyncItems=[],a=this.historyItems.length-1;s=this.historyItems[a];a--)s.undo(d)},p.prototype.add=function(d){if(null==d)throw new Error("cannot be null");this.historyItems.push(d)},p}(b);_.CompositionHistoryItem=E},7195:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageColorHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.value=d,s}return b(p,y),p.prototype.redo=function(d){this.oldValue=d.model.pageColor,d.changePageColor(this.value)},p.prototype.undo=function(d){d.changePageColor(this.oldValue)},p}(x(4412).HistoryItem);_.ChangePageColorHistoryItem=E},1380:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageLandscapeHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.value=d,s}return b(p,y),p.prototype.redo=function(d){this.oldValue=d.model.pageLandscape,d.changePageLandscape(this.value)},p.prototype.undo=function(d){d.changePageLandscape(this.oldValue)},p}(x(4412).HistoryItem);_.ChangePageLandscapeHistoryItem=E},1044:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangePageSizeHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.size=d,s}return b(p,y),p.prototype.redo=function(d){this.oldSize=d.model.pageSize,d.changePageSize(this.size)},p.prototype.undo=function(d){d.changePageSize(this.oldSize)},p}(x(4412).HistoryItem);_.ChangePageSizeHistoryItem=E},7479:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeUnitsHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.units=d,s}return b(p,y),p.prototype.redo=function(d){this.oldUnits=d.model.units,d.model.units=this.units},p.prototype.undo=function(d){d.model.units=this.oldUnits},p}(x(4412).HistoryItem);_.ChangeUnitsHistoryItem=E},1729:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ModelResizeHistoryItem=void 0;var E=x(4412),y=x(4125),p=x(6353),d=function(s){function a(l){var u=s.call(this)||this;return u.offset=l,u}return b(a,s),a.prototype.redo=function(l){this.oldSize=l.model.size.clone(),this.backOffset=new y.Offsets(-this.offset.left,-this.offset.right,-this.offset.top,-this.offset.bottom);var u=Math.max(this.oldSize.width+this.offset.left+this.offset.right,l.model.pageWidth),h=Math.max(this.oldSize.height+this.offset.top+this.offset.bottom,l.model.pageHeight);l.changeModelSize(new p.Size(u,h),this.offset)},a.prototype.undo=function(l){l.changeModelSize(this.oldSize,this.backOffset)},a}(E.HistoryItem);_.ModelResizeHistoryItem=d},4518:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.UpdatePositionsOnPageResizeHistoryItem=void 0;var E=x(7959),y=x(5503),p=function(d){function s(a){var l=d.call(this)||this;return l.offset=a,l}return b(s,d),s.prototype.redo=function(a){var l=this;a.model.iterateItems(function(u){u instanceof y.Shape&&a.moveShape(u,l.applyOffset(u.position,l.offset.x,l.offset.y)),u instanceof E.Connector&&a.changeConnectorPoints(u,function(h){return h.updatePointsOnPageResize(l.offset.x,l.offset.y)})})},s.prototype.undo=function(a){var l=this;a.model.iterateItems(function(u){u instanceof y.Shape&&a.moveShape(u,l.applyOffset(u.position,-l.offset.x,-l.offset.y)),u instanceof E.Connector&&a.changeConnectorPoints(u,function(h){return h.updatePointsOnPageResize(-l.offset.x,-l.offset.y)})})},s.prototype.applyOffset=function(a,l,u){return a.clone().offset(l,u)},s}(x(4412).HistoryItem);_.UpdatePositionsOnPageResizeHistoryItem=p},8236:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorPropertyHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.connectorKey=d,l.propertyName=s,l.value=a,l}return b(p,y),p.prototype.redo=function(d){var s=d.model.findConnector(this.connectorKey);this.oldValue=s.properties[this.propertyName],d.changeConnectorProperty(s,this.propertyName,this.value)},p.prototype.undo=function(d){var s=d.model.findConnector(this.connectorKey);d.changeConnectorProperty(s,this.propertyName,this.oldValue)},p}(x(4412).HistoryItem);_.ChangeConnectorPropertyHistoryItem=E},5144:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorTextHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.connectorKey=d.key,l.text=a,l.position=s,l}return b(p,y),p.prototype.redo=function(d){var s=d.model.findConnector(this.connectorKey);this.oldText=s.getText(this.position),d.changeConnectorText(s,this.text,this.position)},p.prototype.undo=function(d){var s=d.model.findConnector(this.connectorKey);d.changeConnectorText(s,this.oldText,this.position)},p}(x(4412).HistoryItem);_.ChangeConnectorTextHistoryItem=E},45:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorTextPositionHistoryItem=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.connectorKey=d.key,l.position=s,l.newPosition=a,l}return b(p,y),p.prototype.redo=function(d){var s=d.model.findConnector(this.connectorKey);d.changeConnectorTextPosition(s,this.position,this.newPosition)},p.prototype.undo=function(d){var s=d.model.findConnector(this.connectorKey);d.changeConnectorTextPosition(s,this.newPosition,this.position)},p}(x(4412).HistoryItem);_.ChangeConnectorTextPositionHistoryItem=E},9559:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeCustomDataHistoryItem=void 0;var E=x(4412),y=x(8675),p=function(d){function s(a,l){var u=d.call(this)||this;return u.itemKey=a,u.customData=y.ObjectUtils.cloneObject(l),u}return b(s,d),s.prototype.redo=function(a){var l=a.model.findItem(this.itemKey);this.oldCustomData=y.ObjectUtils.cloneObject(l.customData),a.changeCustomData(l,this.customData)},s.prototype.undo=function(a){var l=a.model.findItem(this.itemKey);a.changeCustomData(l,this.oldCustomData)},s}(E.HistoryItem);_.ChangeCustomDataHistoryItem=p},7443:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeLockedHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.itemKey=d.key,a.locked=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.oldLocked=s.locked,d.changeLocked(s,this.locked)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.changeLocked(s,this.oldLocked)},p}(x(4412).HistoryItem);_.ChangeLockedHistoryItem=E},8210:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShapeImageHistoryItem=void 0;var E=x(4412),y=x(6617),p=function(d){function s(a,l){var u=d.call(this)||this;return u.shapeKey=a.key,u.imageUrl=l,u}return b(s,d),s.prototype.redo=function(a){var l=a.model.findShape(this.shapeKey);this.oldImage=l.image,a.changeShapeImage(l,new y.ImageInfo(this.imageUrl))},s.prototype.undo=function(a){var l=a.model.findShape(this.shapeKey);a.changeShapeImage(l,this.oldImage)},s}(E.HistoryItem);_.ChangeShapeImageHistoryItem=p},6516:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShapeTextHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.shapeKey=d.key,a.text=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);this.oldText=s.text,d.changeShapeText(s,this.text)},p.prototype.undo=function(d){var s=d.model.findShape(this.shapeKey);d.changeShapeText(s,this.oldText)},p}(x(4412).HistoryItem);_.ChangeShapeTextHistoryItem=E},5982:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeZindexHistoryItem=void 0;var E=function(y){function p(d,s){var a=y.call(this)||this;return a.itemKey=d.key,a.zIndex=s,a}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.oldZIndex=s.zIndex,d.changeZIndex(s,this.zIndex)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.changeZIndex(s,this.oldZIndex)},p}(x(4412).HistoryItem);_.ChangeZindexHistoryItem=E},442:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ToggleShapeExpandedHistoryItem=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.shapeKey=d.key,s.expanded=d.expanded,s}return b(p,y),p.prototype.redo=function(d){var s=d.model.findShape(this.shapeKey);d.changeShapeExpanded(s,!this.expanded)},p.prototype.undo=function(d){var s=d.model.findShape(this.shapeKey);d.changeShapeExpanded(s,this.expanded)},p}(x(4412).HistoryItem);_.ToggleShapeExpandedHistoryItem=E},4634:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStyleHistoryItem=void 0;var E=function(y){function p(d,s,a){return y.call(this,d,s,a)||this}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.oldStyleValue=s.style[this.styleProperty],d.changeStyle(s,this.styleProperty,this.styleValue)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.changeStyle(s,this.styleProperty,this.oldStyleValue)},p}(x(3259).ChangeStyleHistoryItemBase);_.ChangeStyleHistoryItem=E},3259:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStyleHistoryItemBase=void 0;var E=function(y){function p(d,s,a){var l=y.call(this)||this;return l.itemKey=d,l.styleProperty=s,l.styleValue=a,l}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.oldStyleValue=s.style[this.styleProperty],d.changeStyle(s,this.styleProperty,this.styleValue)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.changeStyle(s,this.styleProperty,this.oldStyleValue)},p}(x(4412).HistoryItem);_.ChangeStyleHistoryItemBase=E},926:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeStyleTextHistoryItem=void 0;var E=function(y){function p(d,s,a){return y.call(this,d,s,a)||this}return b(p,y),p.prototype.redo=function(d){var s=d.model.findItem(this.itemKey);this.oldStyleValue=s.styleText[this.styleProperty],d.changeStyleText(s,this.styleProperty,this.styleValue)},p.prototype.undo=function(d){var s=d.model.findItem(this.itemKey);d.changeStyleText(s,this.styleProperty,this.oldStyleValue)},p}(x(3259).ChangeStyleHistoryItemBase);_.ChangeStyleTextHistoryItem=E},7176:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ImageCache=_.CacheImageInfo=void 0;var m=x(6477),b=x(6617),E=x(8675),y=function(){function d(s,a,l,u,h){this._base64=void 0!==s?m.Base64Utils.normalizeToDataUrl(s,"image/png"):void 0,this.actualId=a,this._referenceInfo=u,this._isLoaded=void 0!==h&&h,this.imageUrl=l}return Object.defineProperty(d.prototype,"isLoaded",{get:function(){return this._referenceInfo?this._referenceInfo._isLoaded:this._isLoaded},set:function(s){this._isLoaded=s},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"base64",{get:function(){return this._base64},set:function(s){this._base64=m.Base64Utils.normalizeToDataUrl(s,"image/png")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"referenceInfo",{get:function(){return this._referenceInfo},set:function(s){this._referenceInfo=s,this._base64=void 0,this._isLoaded=void 0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isLoading",{get:function(){return this._referenceInfo?this.referenceInfo._isLoading:this._isLoading},enumerable:!1,configurable:!0}),d.prototype.startLoading=function(){this._referenceInfo?this._referenceInfo.startLoading():this._isLoading=!0},d.prototype.finalizeLoading=function(){this._referenceInfo?this._referenceInfo.finalizeLoading():this._isLoading=!1},d}();_.CacheImageInfo=y;var p=function(){function d(){this.emptyImageId=0,this.lastActualId=0,this.onReadyStateChanged=new E.EventDispatcher,this.cache=[],this.nonLoadedImages=[],this.createUnloadedInfoByBase64(b.ImageInfo.transparentOnePixelImage).isLoaded=!0}return d.prototype.reset=function(){this.cache.splice(1),this.nonLoadedImages=[],this.lastActualId=1},Object.defineProperty(d.prototype,"emptyImage",{get:function(){return this.cache[this.emptyImageId]},enumerable:!1,configurable:!0}),d.prototype.getImageData=function(s){return this.cache[s]},d.prototype.createUnloadedInfoByUrl=function(s){return this.findInfoByUrl(s)||this.registerImageData(new y(void 0,this.getNextActualId(),s))},d.prototype.createUnloadedInfoByBase64=function(s){return this.findInfoByBase64(s)||this.registerImageData(new y(s,this.getNextActualId()))},d.prototype.createUnloadedInfoByShapeImageInfo=function(s){var a=s.exportUrl;return m.Base64Utils.checkPrependDataUrl(a)?this.createUnloadedInfoByBase64(a):this.createUnloadedInfoByUrl(a)},d.prototype.registerImageData=function(s){var a=this.cache[s.actualId];return a||(a=s),void 0!==s.actualId&&(this.cache[s.actualId]=a),0!==s.actualId&&(this.nonLoadedImages.push(s),1===this.nonLoadedImages.length&&this.raiseReadyStateChanged(!1)),a},d.prototype.loadAllImages=function(s){var a=this;this.cache.forEach(function(l){a.emptyImageId===l.actualId||l.isLoaded||l.isLoading||s.load(l)})},d.prototype.finalizeLoading=function(s,a){s.finalizeLoading(),s.isLoaded=!0;var l=this.nonLoadedImages.indexOf(s);if(this.nonLoadedImages.splice(l,1),0===this.nonLoadedImages.length&&this.raiseReadyStateChanged(!0),!s.referenceInfo&&a.base64){var u=m.Base64Utils.normalizeToDataUrl(a.base64,"image/png");this.cache.forEach(function(h){var f=h.base64===u&&h!==s&&h.isLoaded;return f&&(s.referenceInfo=h.referenceInfo?h.referenceInfo:h),f}),s.base64=u}},d.prototype.hasNonLoadedImages=function(){return 0!==this.nonLoadedImages.length},d.prototype.getNextActualId=function(){return this.lastActualId++},d.prototype.findInfoByBase64=function(s){return s=m.Base64Utils.normalizeToDataUrl(s,"image/png"),this.findInfoCore(function(a){return a.base64===s})},d.prototype.findInfoByUrl=function(s){return this.findInfoCore(function(a){return a.imageUrl===s})},d.prototype.findInfoCore=function(s){var a;return this.cache.forEach(function(l){s(l)&&(a=l)}),a},d.prototype.raiseReadyStateChanged=function(s){this.onReadyStateChanged.raise1(function(a){return a.notifyImageCacheReadyStateChanged(s)})},d.instance=new d,d}();_.ImageCache=p},6617:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ImageInfo=void 0;var m=x(6477),b=function(){function E(y){this.url=void 0,this.base64=void 0,y&&(m.Base64Utils.checkPrependDataUrl(y)?this.base64=y:this.url=y),this.loadFailed=!1}return E.prototype.clone=function(){var y=new E;return y.url=this.url,y.base64=this.base64,y},Object.defineProperty(E.prototype,"isEmpty",{get:function(){return void 0===this.url&&void 0===this.base64},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"unableToLoad",{get:function(){return this.loadFailed},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"renderUrl",{get:function(){return this.base64||""},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"exportUrl",{get:function(){return this.base64?this.base64:this.url},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"actualUrl",{get:function(){return this.url?this.url:this.base64},enumerable:!1,configurable:!0}),Object.defineProperty(E,"transparentOnePixelImage",{get:function(){return this.transparentWhiteImage1_1},enumerable:!1,configurable:!0}),E.prototype.loadBase64Content=function(y){this.base64=m.Base64Utils.normalizeToDataUrl(y,"image/png")},E.prototype.setUnableToLoadFlag=function(){this.loadFailed=!0},E.transparentWhiteImage1_1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAANSURBVBhXY/j///9/AAn7A/0FQ0XKAAAAAElFTkSuQmCC",E}();_.ImageInfo=b},590:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ImageLoader=void 0;var m=x(7176),b=function(){function E(y){this.loadedCallback=y}return E.prototype.load=function(y){y.isLoaded?this.loadedCallback(y):y.isLoading||this.loadInner(y)},E.prototype.loadInner=function(y){var p=this;return y.imageUrl?this.loadPictureByUrl(y,function(){return p.finalizeLoading(y,y)}):y.base64&&this.loadPictureByBase64(y,function(){return p.finalizeLoading(y,y)}),y},E.prototype.finalizeLoading=function(y,p){p||(p=m.ImageCache.instance.getImageData(y.actualId)),p.isLoaded||m.ImageCache.instance.finalizeLoading(p,y),this.loadedCallback(p)},E.prototype.loadPictureByBase64=function(y,p){var d=new Image;d.onload=function(){p(y)},d.src=y.base64},E.prototype.loadPictureByUrl=function(y,p){var d=this,s=new XMLHttpRequest;try{s.onload=function(){var a=new FileReader;a.onloadend=function(){y.base64=a.result,d.loadPictureByBase64(y,function(l){return p(l)})},a.readAsDataURL(s.response)},s.onerror=function(){return p(y)},s.onloadend=function(){404===s.status&&p(y)},s.open("GET",y.imageUrl,!0),s.responseType="blob",y.startLoading(),s.send()}catch{}},E}();_.ImageLoader=b},5941:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.BPMNNode=_.BPMNImporter=void 0;var E=x(213),y=x(2259),p=x(8217),d=x(6572),s=function(){function u(h){this.doc=d.ImportUtils.createDocument(h),this.graph=new E.Graph([],[])}return u.prototype.import=function(){for(var h=void 0,f=0;h=this.doc.children[f];f++)"DEFINITIONS"===h.nodeName.toUpperCase()&&this.onDefinitionsElement(h);return this.validate(),this.graph},u.prototype.validate=function(){var h={};this.graph.nodes.forEach(function(O){return h[O]=!0});for(var f=0,g=void 0;g=this.graph.edges[f];f++)h[g.from]&&h[g.to]||(this.graph.edges.splice(f,1),f--)},u.prototype.onDefinitionsElement=function(h){this.dataSourceKey=h.getAttribute("id");for(var f=void 0,g=0;f=h.children[g];g++)"PROCESS"===f.nodeName.toUpperCase()&&this.onProcessElement(f)},u.prototype.onProcessElement=function(h){for(var f=void 0,g=0;f=h.children[g];g++)switch(f.nodeName.toUpperCase()){case"STARTEVENT":this.onStartEventElement(f);break;case"SEQUENCEFLOW":this.onSequenceFlowElement(f);break;case"SCRIPTTASK":this.onScriptTaskElement(f);break;case"USERTASK":this.onUserTaskElement(f);break;case"SERVICETASK":this.onServiceTaskElement(f);break;case"SENDTASK":this.onSendTaskElement(f);break;case"EXCLUSIVEGATEWAY":this.onExclusiveGateway(f);break;case"ENDEVENT":this.onEndEventGateway(f)}},u.prototype.onStartEventElement=function(h){var f=this.createNode(h);f.type=y.ShapeTypes.Ellipse,f.text=h.getAttribute("name"),this.graph.addNode(f)},u.prototype.onSequenceFlowElement=function(h){var f=h.getAttribute("sourceRef"),g=h.getAttribute("targetRef"),O=this.createEdge(h,f,g);h.hasAttribute("name")&&(O.text=h.getAttribute("name")),this.graph.addEdge(O)},u.prototype.onScriptTaskElement=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),this.graph.addNode(f)},u.prototype.onUserTaskElement=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),this.graph.addNode(f)},u.prototype.onServiceTaskElement=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),this.graph.addNode(f)},u.prototype.onSendTaskElement=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),this.graph.addNode(f)},u.prototype.onExclusiveGateway=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),f.type=y.ShapeTypes.Decision,this.graph.addNode(f)},u.prototype.onEndEventGateway=function(h){var f=this.createNode(h);f.text=h.getAttribute("name"),f.type=y.ShapeTypes.Ellipse,this.graph.addNode(f)},u.prototype.createNode=function(h){return new a(this.dataSourceKey,h.getAttribute("id"))},u.prototype.createEdge=function(h,f,g){return new l(this.dataSourceKey,h.getAttribute("id"),f,g)},u}();_.BPMNImporter=s;var a=function(u,h){this.sourceKey=u,this.key=h,this.type=y.ShapeTypes.Rectangle};_.BPMNNode=a;var l=function(u){function h(f,g,O,I){var D=u.call(this,g,O,I)||this;return D.sourceKey=f,D}return b(h,u),h}(p.Edge)},5885:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Exporter=void 0;var m=x(5503),b=x(7959),E=x(8675),y=function(){function p(){}return p.prototype.export=function(d){var s={page:{},connectors:[],shapes:[]};return s.page={width:d.size.width,height:d.size.height,pageColor:d.pageColor,pageWidth:d.pageSize.width,pageHeight:d.pageSize.height,pageLandscape:d.pageLandscape},this.exportItemsCore(d.items,s),JSON.stringify(s)},p.prototype.exportItems=function(d){var s={connectors:[],shapes:[]};return this.exportItemsCore(d,s),JSON.stringify(s)},p.prototype.exportItemsCore=function(d,s){var a=this;d.forEach(function(l){if(l instanceof m.Shape)s.shapes.push(a.exportShape(l));else if(l instanceof b.Connector){var u=a.exportConnector(l);l.beginItem&&(u.beginItemKey=l.beginItem.key,u.beginConnectionPointIndex=l.beginConnectionPointIndex),l.endItem&&(u.endItemKey=l.endItem.key,u.endConnectionPointIndex=l.endConnectionPointIndex),s.connectors.push(u)}})},p.prototype.exportItem=function(d){return{key:d.key,dataKey:d.dataKey,customData:E.ObjectUtils.cloneObject(d.customData),locked:d.locked,zIndex:d.zIndex}},p.prototype.exportShape=function(d){var s=this.exportItem(d);s.type=d.description.key,s.text=d.text,d.image.isEmpty||(s.imageUrl=d.image.exportUrl),s.x=d.position.x,s.y=d.position.y,s.width=d.size.width,s.height=d.size.height;var a=d.parameters.toObject();a&&(s.parameters=a);var l=d.style.toObject();l&&(s.style=l);var u=d.styleText.toObject();return u&&(s.styleText=u),d.children.length&&(s.childKeys=d.children.map(function(h){return h.key})),d.expanded||(s.expanded=!1),d.expandedSize&&(s.expandedWidth=d.expandedSize.width,s.expandedHeight=d.expandedSize.height),s},p.prototype.exportConnector=function(d){var s=this.exportItem(d);s.points=d.points.map(function(g){return{x:g.x,y:g.y}});var a=d.texts.toObject();a&&(s.texts=a);var l=d.properties.toObject();l&&(s.properties=l);var u=d.style.toObject();u&&(s.style=u);var h=d.styleText.toObject();h&&(s.styleText=h);var f=d.tryCreateRenderPointsContext();return f&&(s.context=f.toObject()),s},p.prototype.exportSvg=function(d,s,a,l){a.exportSvgImage(d,s,l)},p.prototype.exportPng=function(d,s,a,l,u){a.exportPngImage(d,s,l,u)},p.prototype.exportJpg=function(d,s,a,l,u){a.exportJpgImage(d,s,l,u)},p}();_.Exporter=y},6572:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ImportUtils=void 0;var x=function(){function m(){}return m.parseJSON=function(b){if(!b||""===b)return{};try{return JSON.parse(b)}catch{return{}}},m.createDocument=function(b){return(new DOMParser).parseFromString(b,"application/xml")},m}();_.ImportUtils=x},2406:function(J,_,x){var m,b=this&&this.__extends||(m=function(I,D){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var P in w)w.hasOwnProperty(P)&&(C[P]=w[P])})(I,D)},function(I,D){function C(){this.constructor=I}m(I,D),I.prototype=null===D?Object.create(D):(C.prototype=D.prototype,new C)});Object.defineProperty(_,"__esModule",{value:!0}),_.Importer=void 0;var E=x(5503),y=x(8675),p=x(6353),d=x(8900),s=x(8397),a=x(7959),l=x(6617),u=x(8577),h=x(6572),f=x(13),g=x(1510),O=function(I){function D(C,w){var P=I.call(this,C)||this;return P.obj=h.ImportUtils.parseJSON(w),P}return b(D,I),D.prototype.getObject=function(){return this.obj},D.prototype.getPageObject=function(C){return C.page},D.prototype.getShapeObjects=function(C){return C.shapes},D.prototype.getConnectorObjects=function(C){return C.connectors},D.prototype.importPageSettings=function(C,w){w&&(this.assert(w.width,"number"),this.assert(w.height,"number"),"number"==typeof w.width&&(C.size.width=w.width),"number"==typeof w.height&&(C.size.height=w.height),"number"==typeof w.pageColor?C.pageColor=w.pageColor:"string"==typeof w.pageColor&&(C.pageColor=f.ColorUtils.fromString(w.pageColor)),"number"==typeof w.pageWidth&&(C.pageSize.width=w.pageWidth),"number"==typeof w.pageHeight&&(C.pageSize.height=w.pageHeight),"boolean"==typeof w.pageLandscape&&(C.pageLandscape=w.pageLandscape))},D.prototype.importShape=function(C){this.assert(C.key,"string"),this.assert(C.x,"number"),this.assert(C.y,"number"),this.assert(C.type,"string");var P=this.shapeDescriptionManager.get(C.type),k=new d.Point(C.x,C.y),A=new E.Shape(P||s.ShapeDescriptionManager.default,k);return A.key=C.key,"string"!=typeof C.dataKey&&"number"!=typeof C.dataKey||(A.dataKey=C.dataKey),"object"==typeof C.customData&&(A.customData=y.ObjectUtils.cloneObject(C.customData)),"boolean"==typeof C.locked&&(A.locked=C.locked),"number"==typeof C.width&&(A.size.width=C.width),"number"==typeof C.height&&(A.size.height=C.height),"string"==typeof C.text&&(A.text=C.text),"string"==typeof C.imageUrl&&(A.image=new l.ImageInfo(C.imageUrl)),C.parameters&&(A.parameters.fromObject(C.parameters),A.description.normalizeParameters(A,A.parameters)),C.style&&A.style.fromObject(C.style),C.styleText&&A.styleText.fromObject(C.styleText),"number"==typeof C.zIndex&&(A.zIndex=C.zIndex),Array.isArray(C.childKeys)&&(A.childKeys=C.childKeys.slice()),"boolean"==typeof C.expanded&&(A.expanded=C.expanded),"number"==typeof C.expandedWidth&&"number"==typeof C.expandedHeight&&(A.expandedSize=new p.Size(C.expandedWidth,C.expandedHeight)),A},D.prototype.importShapeChildren=function(C,w){return[]},D.prototype.importConnector=function(C){var w=this;if(this.assert(C.key,"string"),!Array.isArray(C.points))throw Error("Invalid Format");var P=C.points.map(function(A){return w.assert(A.x,"number"),w.assert(A.y,"number"),new d.Point(A.x,A.y)}),k=new a.Connector(P);return k.key=C.key,"string"!=typeof C.dataKey&&"number"!=typeof C.dataKey||(k.dataKey=C.dataKey),"object"==typeof C.customData&&(k.customData=y.ObjectUtils.cloneObject(C.customData)),"boolean"==typeof C.locked&&(k.locked=C.locked),k.endConnectionPointIndex="number"==typeof C.endConnectionPointIndex?C.endConnectionPointIndex:-1,k.beginConnectionPointIndex="number"==typeof C.beginConnectionPointIndex?C.beginConnectionPointIndex:-1,void 0!==C.endItemKey&&this.assert(C.endItemKey,"string"),void 0!==C.beginItemKey&&this.assert(C.beginItemKey,"string"),k.endItemKey=C.endItemKey,k.beginItemKey=C.beginItemKey,C.texts&&k.texts.fromObject(C.texts),C.properties&&k.properties.fromObject(C.properties),C.style&&k.style.fromObject(C.style),C.styleText&&k.styleText.fromObject(C.styleText),"number"==typeof C.zIndex&&(k.zIndex=C.zIndex),void 0!==C.context&&k.replaceRenderPoints(g.ConnectorRenderPointsContext.fromObject(C.context),!1),k},D}(u.ImporterBase);_.Importer=O},8577:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ImporterBase=void 0;var m=x(6613),b=x(5503),E=function(){function y(p){this.shapeDescriptionManager=p}return y.prototype.import=function(){var p=new m.DiagramModel,d=this.getObject();this.importPageSettings(p,this.getPageObject(d));for(var s=this.importShapes(this.getShapeObjects(d)),a=0;a<s.length;a++){var l=s[a];if(p.findItem(l.key))throw Error("Item key is duplicated");p.pushItem(l)}var u=this.importConnectors(this.getConnectorObjects(d));for(a=0;a<u.length;a++){var h=u[a];if(h.endItem=p.findItem(h.endItemKey)||void 0,delete h.endItemKey,h.beginItem=p.findItem(h.beginItemKey)||void 0,delete h.beginItemKey,p.findItem(h.key))throw Error("Item key is duplicated");p.pushItem(h),this.updateConnections(h)}return this.updateChildren(p.items,function(f){return p.findItem(f)}),p},y.prototype.importItems=function(p){for(var d,s=[],a=this.getObject(),l={},u=this.importShapes(this.getShapeObjects(a)),h=0;h<u.length;h++){var f=u[h],g=f.key;d=p.getNextKey(),f.key=d,l[g]=f,void 0!==f.dataKey&&(f.dataKey=void 0),s.push(f)}var O=this.importConnectors(this.getConnectorObjects(a));for(h=0;h<O.length;h++){var I=O[h];g=I.key,d=p.getNextKey(),I.key=d,l[g]=I,void 0!==I.dataKey&&(I.dataKey=void 0),I.endItem=l[I.endItemKey],delete I.endItemKey,I.beginItem=l[I.beginItemKey],delete I.beginItemKey,s.push(I),this.updateConnections(I)}return this.updateChildren(s,function(w){return l[w]}),s},y.prototype.importItemsData=function(p){for(var d=this.getObject(),s=this.importShapes(this.getShapeObjects(d)),a={},l=0;l<s.length;l++){var u=s[l],h=void 0;void 0!==u.dataKey&&(h=p.findShapeByDataKey(u.dataKey)),h&&(h.dataKey=u.dataKey,a[u.key]=u.dataKey,h.locked=u.locked,h.position=u.position.clone(),h.expanded=u.expanded,u.expandedSize&&(h.expandedSize=u.expandedSize.clone()),h.size=u.size.clone(),h.parameters=u.parameters.clone(),h.style=u.style.clone(),h.styleText=u.styleText.clone(),h.zIndex=u.zIndex,h.text=u.text,h.description=u.description,h.image=u.image.clone())}var f=this.importConnectors(this.getConnectorObjects(d));for(l=0;l<f.length;l++){var g=f[l],O=void 0;void 0!==g.dataKey&&(O=p.findConnectorByDataKey(g.dataKey)),O||(O=p.findConnectorByBeginEndDataKeys(a[g.beginItemKey],a[g.endItemKey])),O&&(O.dataKey=g.dataKey,O.locked=g.locked,O.points=g.points.slice(),O.properties=g.properties.clone(),O.style=g.style.clone(),O.endConnectionPointIndex=g.endConnectionPointIndex,O.beginConnectionPointIndex=g.beginConnectionPointIndex,O.texts=g.texts.clone(),O.styleText=g.styleText.clone(),O.zIndex=g.zIndex)}},y.prototype.importShapes=function(p){var d=[];if(!p)return d;if(!Array.isArray(p))throw Error("Invalid Format");for(var s=0;s<p.length;s++){var a=p[s],l=this.importShape(a);d.push(l),d=d.concat(this.importShapeChildren(a,l))}return d},y.prototype.importConnectors=function(p){var d=[];if(!p)return d;if(!Array.isArray(p))throw Error("Invalid Format");for(var s=0;s<p.length;s++)d.push(this.importConnector(p[s]));return d},y.prototype.updateChildren=function(p,d){p.forEach(function(s){s instanceof b.Shape&&s.childKeys&&(s.childKeys.forEach(function(a){var l=d(a);l&&(-1===s.children.indexOf(l)&&s.children.push(l),l.container=s)}),delete s.childKeys)})},y.prototype.updateConnections=function(p){p.endItem&&(p.endItem instanceof b.Shape?(p.endItem.attachedConnectors.push(p),p.points[p.points.length-1]=p.endItem.getConnectionPointPosition(p.endConnectionPointIndex,p.points[p.points.length-2])):(p.endItem=void 0,p.endConnectionPointIndex=-1)),p.beginItem&&(p.beginItem instanceof b.Shape?(p.beginItem.attachedConnectors.push(p),p.points[0]=p.beginItem.getConnectionPointPosition(p.beginConnectionPointIndex,p.points[1])):(p.beginItem=void 0,p.beginConnectionPointIndex=-1))},y.prototype.assert=function(p,d){if(void 0===p||void 0!==d&&typeof p!==d)throw Error("Invalid Format")},y}();_.ImporterBase=E},780:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.XmlImporter=void 0;var E=x(7959),y=x(5503),p=x(8577),d=x(2259),s=x(8397),a=x(6353),l=x(8900),u=x(6572),h=x(13),f=x(9291),g=function(O){function I(D,C){var w=O.call(this,D)||this;return w.doc=u.ImportUtils.createDocument(C),w}return b(I,O),I.prototype.getObject=function(){return this.doc},I.prototype.getPageObject=function(D){var C=this.doc.querySelectorAll("[ItemKind='DiagramRoot']");return C&&C[0]},I.prototype.getShapeObjects=function(D){var C=[];return this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramShape']").forEach(function(w){C.push(w)}),this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramContainer']").forEach(function(w){C.push(w)}),C},I.prototype.getConnectorObjects=function(D){var C=[];return this.doc.querySelectorAll("[ItemKind='DiagramRoot'] > Children > [ItemKind='DiagramConnector']").forEach(function(w){C.push(w)}),C},I.prototype.importPageSettings=function(D,C){if(C){var w=C.getAttribute("PageSize"),P=this.getSize(w);P&&(D.size=P.clone(),D.pageSize=P.clone())}},I.prototype.importShape=function(D){var C=D.getAttribute("Position"),w=this.getPoint(C),P=D.getAttribute("Shape"),k=this.getShapeType(P),A=this.shapeDescriptionManager.get(k),R=new y.Shape(A||s.ShapeDescriptionManager.default,w);R.key=this.getItemKey(D);var M=D.getAttribute("Size"),L=this.getSize(M);L&&(R.size=L);var H=D.getAttribute("Content");if("string"==typeof H)R.text=H;else{var j=D.getAttribute("Header");"string"==typeof j&&(R.text=j)}return this.importStyle(D,R),R},I.prototype.importShapeChildren=function(D,C){var w=[];D.setAttribute("dxDiagram",""),this.doc.querySelectorAll("[dxDiagram] > Children > [ItemKind='DiagramShape']").forEach(function(L){w.push(L)}),this.doc.querySelectorAll("[dxDiagram] > Children > [ItemKind='DiagramContainer']").forEach(function(L){w.push(L)}),D.removeAttribute("dxDiagram");var P=[];if(!w)return P;for(var k=0;k<w.length;k++){var A=w[k],R=this.importShape(A);R.key=C.key+","+R.key;var M=C.clientRectangle;R.position=R.position.clone().offset(M.x,M.y),C.childKeys||(C.childKeys=[]),C.childKeys.push(R.key),P.push(R),P=P.concat(this.importShapeChildren(A,R))}return P},I.prototype.importConnector=function(D){var C=this,w=[],P=D.getAttribute("BeginPoint"),k=this.getPoint(P);k&&w.push(k),D.getAttribute("Points").split(" ").forEach(function(W){var z=C.getPoint(W);z&&w.push(z)});var A=D.getAttribute("EndPoint"),R=this.getPoint(A);R&&w.push(R);var M=new E.Connector(w);M.key=this.getItemKey(D);var L=D.getAttribute("EndItemPointIndex"),H=parseInt(L);M.endConnectionPointIndex=isNaN(H)?-1:H;var j=D.getAttribute("BeginItemPointIndex"),U=parseInt(j);M.beginConnectionPointIndex=isNaN(U)?-1:U;var K=D.getAttribute("EndItem");void 0!==K&&this.assert(K,"string");var q=D.getAttribute("BeginItem");void 0!==q&&this.assert(q,"string"),M.endItemKey=K,M.beginItemKey=q;var Y=D.getAttribute("Content");return"string"==typeof Y&&M.setText(Y),this.importStyle(D,M),M},I.prototype.importStyle=function(D,C){var w=D.getAttribute("Background");"string"==typeof w&&(C.style.fill=this.getColor(w));var P=D.getAttribute("Stroke");"string"==typeof P&&(C.style.stroke=this.getColor(P));var k=D.getAttribute("Foreground");"string"==typeof k&&(C.styleText.fill=this.getColor(k));var A=D.getAttribute("FontFamily");"string"==typeof A&&(C.styleText["font-family"]=A);var R=D.getAttribute("FontSize");"string"==typeof R&&(C.styleText["font-size"]=R),"Bold"===D.getAttribute("FontWeight")&&(C.styleText["font-weight"]="bold"),"Italic"===D.getAttribute("FontStyle")&&(C.styleText["font-style"]="italic"),"Underline"===D.getAttribute("TextDecorations")&&(C.styleText["text-decoration"]="underline");var M=D.getAttribute("TextAlignment");"Left"===M?C.styleText["text-anchor"]="start":"Right"===M?C.styleText["text-anchor"]="end":"Center"===M&&(C.styleText["text-anchor"]="middle")},I.prototype.getShapeType=function(D){return I.shapeTypes[D]?I.shapeTypes[D]:D&&D.toLowerCase().indexOf("container")>-1?d.ShapeTypes.VerticalContainer:d.ShapeTypes.Rectangle},I.prototype.getItemKey=function(D){return(parseInt(D.tagName.replace("Item",""))-1).toString()},I.prototype.getNumbers=function(D){var C=D.split(",");return C&&C.length?C.map(function(w){return+w}):[]},I.prototype.getSize=function(D){if(D){var C=this.getNumbers(D);if(C.length>=2)return this.assert(C[0],"number"),this.assert(C[1],"number"),new a.Size(f.UnitConverter.pixelsToTwips(C[0]),f.UnitConverter.pixelsToTwips(C[1]))}},I.prototype.getPoint=function(D){if(D){var C=this.getNumbers(D);if(C.length>=2)return this.assert(C[0],"number"),this.assert(C[1],"number"),new l.Point(f.UnitConverter.pixelsToTwips(C[0]),f.UnitConverter.pixelsToTwips(C[1]))}},I.prototype.getColor=function(D){D="#"===D.charAt(0)?D.substr(1):D;var C=parseInt(D,16);return isNaN(C)?void 0:h.ColorUtils.colorToHash(C)},I.shapeTypes={"BasicShapes.Rectangle":d.ShapeTypes.Rectangle,"BasicShapes.Ellipse":d.ShapeTypes.Ellipse,"BasicShapes.Triangle":d.ShapeTypes.Triangle,"BasicShapes.Pentagon":d.ShapeTypes.Pentagon,"BasicShapes.Hexagon":d.ShapeTypes.Hexagon,"BasicShapes.Octagon":d.ShapeTypes.Octagon,"BasicShapes.Diamond":d.ShapeTypes.Diamond,"BasicShapes.Cross":d.ShapeTypes.Cross,"BasicShapes.Star5":d.ShapeTypes.Star,"BasicFlowchartShapes.StartEnd":d.ShapeTypes.Terminator,"BasicFlowchartShapes.Data":d.ShapeTypes.Data,"BasicFlowchartShapes.Database":d.ShapeTypes.Database,"BasicFlowchartShapes.ExternalData":d.ShapeTypes.StoredData,"BasicFlowchartShapes.Process":d.ShapeTypes.Process,"BasicFlowchartShapes.Decision":d.ShapeTypes.Decision,"BasicFlowchartShapes.Subprocess":d.ShapeTypes.PredefinedProcess,"BasicFlowchartShapes.Document":d.ShapeTypes.Document,"BasicFlowchartShapes.Custom1":d.ShapeTypes.ManualInput,"BasicFlowchartShapes.Custom2":d.ShapeTypes.ManualOperation,"ArrowShapes.SimpleArrow":d.ShapeTypes.ArrowLeft,"ArrowShapes.SimpleDoubleArrow":d.ShapeTypes.ArrowLeftRight},I}(p.ImporterBase);_.XmlImporter=g},5227:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.LayoutBuilder=void 0;var m=x(8710),b=function(){function E(y,p){this.settings=y,this.graph=p}return E.prototype.getBreadthNodeSizeCore=function(y,p){var d=this.settings.orientation===m.DataLayoutOrientation.Vertical?y.size.width:y.size.height;return p||(d+=this.settings.orientation===m.DataLayoutOrientation.Vertical?y.margin.left+y.margin.right:y.margin.top+y.margin.bottom),d},E.prototype.getDepthNodeSizeCore=function(y){return this.settings.orientation===m.DataLayoutOrientation.Horizontal?y.size.width+y.margin.left+y.margin.right:y.size.height+y.margin.top+y.margin.bottom},E.prototype.chooseDirectionValue=function(y,p){return this.settings.direction===m.LogicalDirectionKind.Forward?y:p},E.prototype.getDirectionValue=function(y){return this.settings.direction===m.LogicalDirectionKind.Forward?y:-y},E.prototype.getComponentOffset=function(y){var p=y.getRectangle(!0);return(this.settings.orientation===m.DataLayoutOrientation.Vertical?p.width:p.height)+this.settings.componentSpacing},E.prototype.setComponentOffset=function(y,p){return this.settings.orientation===m.DataLayoutOrientation.Vertical?y.offsetNodes(p):y.offsetNodes(0,p)},E}();_.LayoutBuilder=b},1256:function(J,_,x){var m,b=this&&this.__extends||(m=function(A,R){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,L){M.__proto__=L}||function(M,L){for(var H in L)L.hasOwnProperty(H)&&(M[H]=L[H])})(A,R)},function(A,R){function M(){this.constructor=A}m(A,R),A.prototype=null===R?Object.create(R):(M.prototype=R.prototype,new M)});Object.defineProperty(_,"__esModule",{value:!0}),_.EdgeOnLayer=_.NodeOnLayer=_.SugiyamaNodesOrderer=_.SugiyamaLayerDistributor=_.SugiyamaLayoutBuilder=void 0;var E=x(5227),y=x(213),p=x(617),d=x(8217),s=x(701),a=x(2400),l=x(8900),u=x(8710),h=x(8119),f=x(7959),g=x(7309),O=function(A){function R(){return null!==A&&A.apply(this,arguments)||this}return b(R,A),R.prototype.build=function(){var M=this,L=0,H=new h.GraphLayout,j=new D;return this.graph.getConnectedComponents().forEach(function(U){var K=g.CycleRemover.removeCycles(U),q=I.getLayers(K.graph),Y=j.orderNodes(K.graph,q),W=Object.keys(K.removedEdges).map(function(se){return U.getEdge(se)}),z=j.assignAbsCoordinates(Y),Z=M.createInfoGraphLayout(z,K.reversedEdges,W);H.extend(M.setComponentOffset(Z,L)),L+=M.getComponentOffset(Z)}),H},R.prototype.createInfoGraphLayout=function(M,L,H){for(var j=this,U=new l.Point(0,0),K=M.items,q=new s.HashSet(K.map(function(ae){return ae.layer}).sort(function(ae,me){return ae-me})),Y=this.getAbsOffsetInfo(M.items),W={},z=0,Z=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,se=Number.MIN_SAFE_INTEGER||Number.MAX_VALUE,re=function(ae){var me=q.item(ae),be=0;K.filter(function(Ce){return Ce.layer===me}).sort(function(Ce,ve){return Ce.position-ve.position}).forEach(function(Ce){var ve=j.getDepthNodeSize(Ce),ee=j.chooseDirectionValue(0,ve),oe=j.getAbsPosition(Ce.position,j.getBreadthNodeSize(Ce),Y);U=j.setBreadth(U,oe);var te=j.setDepthOffset(U,-ee);if(W[Ce.key]=te,!Ce.isDummy){var ce=j.settings.orientation===u.DataLayoutOrientation.Horizontal?te.y:te.x;Z=Math.min(Z,ce),se=Math.max(se,ce+j.getBreadthNodeSize(Ce)),be=Math.max(be,j.getDepthNodeSize(Ce))}}),z+=be,U=Q.setBreadth(U,0),U=Q.setDepthOffset(U,Q.getDirectionValue(be+Q.settings.layerSpacing))},Q=this,G=0;G<q.length;G++)re(G);z+=(q.length-1)*this.settings.layerSpacing;var ie=new h.GraphLayout;return this.createNodesLayout(M,ie,Z,z,W),this.createEdgesLayout(M,ie,L,H),ie},R.prototype.createNodesLayout=function(M,L,H,j,U){var K=this,q=this.settings.orientation===u.DataLayoutOrientation.Vertical?new l.Point(-H,this.chooseDirectionValue(0,j)):new l.Point(this.chooseDirectionValue(0,j),-H);M.items.forEach(function(Y){if(!Y.isDummy){var W=K.graph.getNode(Y.key);L.addNode(new p.NodeLayout(W,U[Y.key].clone().offset(q.x,q.y)))}})},R.prototype.createEdgesLayout=function(M,L,H,j){var U=this.getDirectEdgeLayout(),K=this.getDiffLevelEdgeLayout(!0),q=this.getDiffLevelEdgeLayout(!1),Y=this.getSameLevelEdgeLayout(!0),W=this.getSameLevelEdgeLayout(!1),z={};M.edges.filter(function(Z){return!Z.isDummy}).concat(j.map(function(Z){return new P(Z.key,!1,Z.from,Z.to)})).sort(function(Z,se){return M.getNode(Z.originFrom).layer-M.getNode(se.originFrom).layer||M.getNode(Z.to).layer-M.getNode(se.to).layer}).forEach(function(Z){var se=H[Z.key],re=M.getNode(se?Z.to:Z.originFrom),Q=M.getNode(se?Z.originFrom:Z.to);if(Q.layer-re.layer==1)L.addEdge(new p.EdgeLayout(Z.key,U.from,U.to));else{var G=[];if(Q.position-re.position>=1)G.push(K),G.push({from:U.from,to:K.to}),G.push({from:K.from,to:U.to});else if(Q.position-re.position<=-1)G.push(q),G.push({from:U.from,to:q.to}),G.push({from:q.from,to:U.to});else{var ie=re.position===Q.position&&0===Q.position?[Y,W]:[W,Y];ie.forEach(function(ve){return G.push(ve)}),ie.forEach(function(ve){G.push({from:ve.from,to:U.to}),G.push({from:U.from,to:ve.to})})}G.push(U);for(var ae=0,me=void 0;me=G[ae];ae++){var be=re.key+"_"+me.from,Ce=Q.key+"_"+me.to;if(z[be]!==f.ConnectorPosition.End&&z[Ce]!==f.ConnectorPosition.Begin){L.addEdge(new p.EdgeLayout(Z.key,me.from,me.to)),z[be]=f.ConnectorPosition.Begin,z[Ce]=f.ConnectorPosition.End;break}}}})},R.prototype.getDirectEdgeLayout=function(){return this.settings.orientation===u.DataLayoutOrientation.Horizontal?this.settings.direction===u.LogicalDirectionKind.Forward?{from:1,to:3}:{from:3,to:1}:this.settings.direction===u.LogicalDirectionKind.Forward?{from:2,to:0}:{from:0,to:2}},R.prototype.getDiffLevelEdgeLayout=function(M){return this.settings.orientation===u.DataLayoutOrientation.Horizontal?M?{from:2,to:0}:{from:0,to:2}:M?{from:3,to:1}:{from:1,to:3}},R.prototype.getSameLevelEdgeLayout=function(M){return this.settings.orientation===u.DataLayoutOrientation.Horizontal?M?{from:0,to:0}:{from:2,to:2}:M?{from:3,to:3}:{from:1,to:1}},R.prototype.getAbsOffsetInfo=function(M){var L=this,H={},j=function(q,Y){void 0===H[Y]&&(H[Y]=L.getBreadthNodeSize(q)),H[Y]=Math.max(H[Y],L.getBreadthNodeSize(q))};M.forEach(function(q){var Y=k(q.position);j(q,Y),H[Y]%1!=0&&j(q,Y+1)});var U={},K=0;return Object.keys(H).sort(function(q,Y){return parseFloat(q)-parseFloat(Y)}).forEach(function(q){U[q]={leftOffset:K,width:H[q]},K+=H[q]+L.settings.columnSpacing}),U},R.prototype.setBreadth=function(M,L){return this.settings.orientation===u.DataLayoutOrientation.Vertical?new l.Point(L,M.y):new l.Point(M.x,L)},R.prototype.setDepthOffset=function(M,L){return this.settings.orientation===u.DataLayoutOrientation.Horizontal?new l.Point(M.x+L,M.y):new l.Point(M.x,M.y+L)},R.prototype.getAbsPosition=function(M,L,H){var j=k(M),U=H[j].leftOffset,K=H[j].width;return M%1==0?U+(K-L)/2:U+K-(L-this.settings.columnSpacing)/2},R.prototype.getBreadthNodeSize=function(M){return M.isDummy?0:this.getBreadthNodeSizeCore(this.graph.getNode(M.key))},R.prototype.getDepthNodeSize=function(M){return M.isDummy?0:this.getDepthNodeSizeCore(this.graph.getNode(M.key))},R}(E.LayoutBuilder);_.SugiyamaLayoutBuilder=O;var I=function(){function A(){}return A.getLayers=function(R){var M=this.getFeasibleTree(R);return this.calcNodesLayers(M)},A.getFeasibleTree=function(R){var M=this.initLayerAssignment(R);return R.getSpanningGraph(R.nodes[0],d.ConnectionMode.OutgoingAndIncoming,function(L){return M[L.to]-M[L.from]})},A.initLayerAssignment=function(R){for(var M={},L=0,H={},j=R.nodes.filter(function(K){return!R.getAdjacentEdges(K,d.ConnectionMode.Incoming).length}),U=function(){j.forEach(function(q){M[q]=L,H[q]=!0}),Object.keys(H).forEach(function(q){0===R.getAdjacentEdges(q,d.ConnectionMode.Outgoing).filter(function(Y){return void 0===M[Y.to]}).length&&delete H[q]});var K={};Object.keys(H).forEach(function(q){R.getAdjacentEdges(q,d.ConnectionMode.Outgoing).map(function(Y){return Y.to}).filter(function(Y){return void 0===M[Y]&&R.getAdjacentEdges(Y,d.ConnectionMode.Incoming).reduce(function(W,z){return W&&void 0!==M[z.from]},!0)}).forEach(function(Y){return K[Y]=!0})}),j=Object.keys(K),L++};j.length;)U();return M},A.calcNodesLayers=function(R){var M={},L=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,H=0,j=R.createIterator(d.ConnectionMode.OutgoingAndIncoming);for(var U in j.visitEachEdgeOnce=!1,j.onNode=function(K){M[K.key]=H,L=Math.min(L,H)},j.skipNode=function(K){return void 0!==M[K.key]},j.skipEdge=function(K){return void 0!==M[K.from]&&void 0!==M[K.to]},j.onEdge=function(K,q){H=q?M[K.from]+1:M[K.to]-1},j.iterate(R.nodes[0]),M)Object.prototype.hasOwnProperty.call(M,U)&&(M[U]-=L);return M},A}();_.SugiyamaLayerDistributor=I;var D=function(){function A(){this.idCounter=-1e4}return A.prototype.orderNodes=function(R,M){for(var L=1,H=this.initGraphInfo(R,M),j=H.items,U=this.initOrder(j),K=this.getNodeToPositionMap(j),q=this.getCrossCount(U,H),Y=!0;L<14&&0!==q;){U=this.getNodesOrder(U,H,Y);var W=this.getCrossCount(U,H);W<q&&(K=this.getNodeToPositionMap(H.items),q=W),Y=!Y,L++}return H.items.forEach(function(z){return z.position=K[z.key]}),H},A.prototype.getNodesOrder=function(R,M,L){var H=this,j={},U=function(Y){if(!Object.prototype.hasOwnProperty.call(R,Y))return"continue";var W={},z=[];R[Y].forEach(function(Z){var se=(L?M.getChildren(Z.key):M.getParents(Z.key)).map(function(re){return M.getNode(re).position});z.push(Z.key),W[Z.key]=H.getNodePosition(se)}),j[Y]=K.sortNodes(z,W,M)},K=this;for(var q in R)U(q);return j},A.prototype.sortNodes=function(R,M,L){return R.sort(function(H,j){return M[H]-M[j]}).map(function(H,j){var U=L.getNode(H);return U.position=j,U})},A.prototype.getNodePosition=function(R){if(!(R=R.sort(function(j,U){return j-U})).length)return 0;var M=Math.floor(R.length/2);if(2===R.length||R.length%2==1)return R[M];var L=R[M-1]-R[0],H=R[R.length-1]-R[M];return Math.floor((R[M-1]*H+R[M]*L)/(L+H))},A.prototype.initOrder=function(R){var M={};return R.forEach(function(L){return(M[L.layer]||(M[L.layer]=[])).push(L)}),M},A.prototype.getCrossCount=function(R,M){var L=0,H=function(U){if(!Object.prototype.hasOwnProperty.call(R,U))return"continue";var K=[];R[U].forEach(function(q){var Y=M.getChildren(q.key).map(function(W){return M.getNode(W).position});Y.forEach(function(W){L+=K.filter(function(z){return W<z}).length}),K=K.concat(Y)})};for(var j in R)H(j);return L},A.prototype.initGraphInfo=function(R,M){var L=this,H={},j={},U=[],K=[];return R.nodes.forEach(function(q){var Y=M[q];void 0===H[Y]&&(H[Y]=0);var W=new C(q,!1,Y,H[Y]++);j[q]=W,U.push(W)}),R.edges.forEach(function(q){var Y=M[q.to]-M[q.from];if(Y>1){for(var W=j[q.from],z=1;z<Y;z++){var Z=new C(L.createDummyID(),!0,M[q.from]+z,H[M[q.from]+z]++);K.push(new P(L.createDummyID(),!0,W.key,Z.key)),U.push(Z),W=Z}K.push(new P(q.key,!1,W.key,j[q.to].key,j[q.from].key))}else K.push(new P(q.key,!1,j[q.from].key,j[q.to].key))}),new y.FastGraph(U,K)},A.prototype.createDummyID=function(){return"dummy_"+--this.idCounter},A.prototype.getNodeToPositionMap=function(R){return R.reduce(function(M,L){return M[L.key]=L.position,M},{})},A.prototype.assignAbsCoordinates=function(R){var M=this.getAbsCoodinate(R);return new y.FastGraph(R.items.map(function(L){return new C(L.key,L.isDummy,L.layer,M[L.key])}),R.edges.slice(0))},A.prototype.getAbsCoodinate=function(R){var M=this,L=R.items.reduce(function(U,K){U[K.layer]=U[K.layer]||[];var q=a.SearchUtils.binaryIndexOf(U[K.layer],function(Y){return Y.position-K.position});return U[K.layer].splice(q<0?~q:q,0,K),U},{}),H=[w.TopLeft,w.TopRight,w.BottomLeft,w.BottomRight].map(function(U){return M.getPositionByMedian(R,U,L)}),j={};return R.items.forEach(function(U){var K=H.map(function(q){return q[U.key]}).sort(function(q,Y){return q-Y});j[U.key]=(K[1]+K[2])/2}),j},A.prototype.getPositionByMedian=function(R,M,L){var H=R.items,j=this.getNodeToPositionMap(H),U=this.getMedians(R,H,M);return U=this.resolveMedianConflicts(R,L,U,M),this.getSortedBlocks(R,H,U,M).forEach(function(K){var q=K.reduce(function(Y,W){return j[W.key]>Y?j[W.key]:Y},-2);K.forEach(function(Y){var W=q-j[Y.key];W>0&&L[Y.layer].filter(function(z){return z.position>Y.position}).forEach(function(z){return j[z.key]+=W}),j[Y.key]=q})}),j},A.prototype.getSortedBlocks=function(R,M,L,H){for(var j=[],U=H===w.BottomLeft||H===w.BottomRight,K=new s.HashSet(M.slice(0).sort(function(W,z){return U?W.layer-z.layer:z.layer-W.layer}),function(W){return W.key});K.length;){var q=K.item(0),Y=this.getBlock(R,q,L,H);j.push(Y),Y.forEach(function(W){return K.remove(W)})}return j.sort(function(W,z){var Z=W.reduce(function(G,ie){return ie.position<G.position?ie:G},W[0]),se=z.filter(function(G){return G.layer===Z.layer})[0];if(se)return Z.position>se.position?1:-1;var re=z.reduce(function(G,ie){return ie.position<G.position?ie:G},z[0]),Q=W.filter(function(G){return G.layer===re.layer})[0];return Q?Q.position>re.position?1:-1:Z.layer>re.layer?1:-1}),j},A.prototype.getBlock=function(R,M,L,H){var j=[],U=null;do{U&&(M=R.getNode(H===w.TopLeft||H===w.TopRight?U.from:U.to)),j.push(M),U=L[M.key]}while(U);return j},A.prototype.resolveMedianConflicts=function(R,M,L,H){var j=this,U={},K=function(Y){if(!Object.prototype.hasOwnProperty.call(M,Y))return"continue";var W,z,Z=M[Y];H!==w.TopRight&&H!==w.BottomRight||(Z=Z.slice(0).sort(function(se,re){return re.position-se.position})),Z.forEach(function(se){var re=L[se.key];if(re){var G=R.getNode(H===w.TopLeft||H===w.TopRight?re.from:re.to).position;j.checkMedianConfict(W,z,G,H)?U[se.key]=null:(W=void 0===W?G:Math.min(W,G),z=void 0===z?G:Math.max(z,G),U[se.key]=re)}else U[se.key]=null})};for(var q in M)K(q);return U},A.prototype.checkMedianConfict=function(R,M,L,H){return void 0!==R&&void 0!==M&&(H===w.TopLeft||H===w.BottomLeft?M>=L:R<=L)},A.prototype.getMedians=function(R,M,L){var H=this,j={};return M.forEach(function(U){var K=H.getActualAdjacentEdges(R,U,L),q=H.getMedianPosition(K.length,L);j[U.key]=K[q]}),j},A.prototype.getMedianPosition=function(R,M){if(0===R)return-1;if(R%2!=0)return Math.floor(R/2);if(M===w.TopLeft||M===w.BottomLeft)return Math.floor(R/2)-1;if(M===w.TopRight||M===w.BottomRight)return Math.floor(R/2);throw new Error("Invalid Operation")},A.prototype.getActualAdjacentEdges=function(R,M,L){return L===w.TopLeft||L===w.TopRight?R.getAdjacentEdges(M.key,d.ConnectionMode.Incoming).sort(function(H,j){return R.getNode(H.from).position-R.getNode(j.from).position}):R.getAdjacentEdges(M.key,d.ConnectionMode.Outgoing).sort(function(H,j){return R.getNode(H.to).position-R.getNode(j.to).position})},A}();_.SugiyamaNodesOrderer=D;var C=function(){function A(R,M,L,H){this.key=R,this.isDummy=M,this.layer=L,this.position=H}return A.prototype.getHashCode=function(){return this.key.toString()},A}();_.NodeOnLayer=C;var w,A,P=function(){function A(R,M,L,H,j){this.key=R,this.isDummy=M,this.from=L,this.to=H,this._originFrom=j}return A.prototype.getHashCode=function(){return this.from+"-"+this.to},Object.defineProperty(A.prototype,"originFrom",{get:function(){return void 0!==this._originFrom?this._originFrom:this.from},enumerable:!1,configurable:!0}),A}();function k(A){return Math.trunc?Math.trunc(A):isFinite(A)?A-A%1||(A<0?-0:0===A?A:0):A}_.EdgeOnLayer=P,(A=w||(w={}))[A.TopLeft=0]="TopLeft",A[A.TopRight=1]="TopRight",A[A.BottomLeft=2]="BottomLeft",A[A.BottomRight=3]="BottomRight"},9533:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.TreeLayoutBuilder=void 0;var E=x(8119),y=x(5148),p=x(617),d=x(8675),s=x(8900),a=x(5227),l=x(8217),u=x(3742),h=x(8710),f=x(213),g=function(O){function I(){var D=null!==O&&O.apply(this,arguments)||this;return D.nodeToLevel={},D.levelDepthSize={},D}return b(I,O),I.prototype.build=function(){var D=this,C=new E.GraphLayout,w=0;return this.graph.getConnectedComponents().forEach(function(P){for(var k=y.Tree.createSpanningTree(P),A=D.processTree(k),R=D.getComponentOffset(A);A.nodeKeys.length<P.nodes.length;){var M=new f.Graph(P.nodes.filter(function(j){return!A.nodeToLayout[j]}).map(function(j){return P.getNode(j)}),P.edges.filter(function(j){return!A.edgeToPosition[j.key]})),L=y.Tree.createSpanningTree(M),H=D.processTree(L);A.extend(D.setComponentOffset(H,R)),R+=D.getComponentOffset(H)}C.extend(D.setComponentOffset(A,w)),w+=D.getComponentOffset(A)}),C},I.prototype.preProcessTree=function(D,C,w){var P=this;if((C=C.filter(function(A){return(void 0===P.nodeToLevel[A.key]?P.nodeToLevel[A.key]=w:-1)>=0})).length){var k=this.getMaxDepthSize(C);this.levelDepthSize[w]=k,this.preProcessTree(D,[].concat.apply([],C.map(function(A){return D.getChildren(A)})),w+1)}},I.prototype.loadNodes=function(D,C,w){return w?D.getChildren(w.info).map(function(P){return C.hasNode(P.key)?void 0:C.addNode(new p.NodeLayout(P,s.Point.zero()))}).filter(function(P){return P}):[C.addNode(new p.NodeLayout(D.root,s.Point.zero()))]},I.prototype.processTree=function(D){var C=this,w=new E.GraphLayout;if(this.preProcessTree(D,[D.root],0),this.processLevel(D,w,0,new d.Range(0),0),this.settings.direction===h.LogicalDirectionKind.Backward){var P=Object.keys(this.levelDepthSize).map(function(A){return C.levelDepthSize[A]}),k=P.reduce(function(A,R){return A+R},0)+(P.length-1)*this.settings.layerSpacing;w.forEachNode(function(A){return C.setDepthPos(A,C.getDepthPos(A)+k)})}return w},I.prototype.processLevel=function(D,C,w,P,k,A){var R,M=this,L=this.addNodes(D,C,k,A),H=A?this.graph.getAdjacentEdges(A.key,l.ConnectionMode.Outgoing):[],j=this.getDirectionValue(this.levelDepthSize[k]),U=this.getDirectionValue(this.settings.layerSpacing);if(L.forEach(function(Y){var W=d.Range.fromLength(R?R.to+M.settings.columnSpacing:P.from,M.getBreadthNodeSizeCore(Y.info));Y.position=M.getNodePosition(W.from,w,j).clone().offset(Y.info.margin.left,Y.info.margin.top),M.processLevel(D,C,w+j+U,W,k+1,Y),M.updateEdgeConnections(C,H,Y),P.extend(W),R=W}),A&&L.length){var K=L[L.length-1],q=new d.Range(this.getBreadthPos(L[0]),this.getBreadthPos(K)+this.getBreadthNodeSizeCore(K.info,!0));this.alignParent(A,q,P)}},I.prototype.addNodes=function(D,C,w,P){var k=this;return 0===w?[C.addNode(new p.NodeLayout(D.root,s.Point.zero()))]:D.getChildren(P.info).reduce(function(A,R){return k.nodeToLevel[R.key]!==w||C.hasNode(R.key)||A.push(C.addNode(new p.NodeLayout(R,s.Point.zero()))),A},[])},I.prototype.getMaxDepthSize=function(D){var C=this;return D.reduce(function(w,P){return Math.max(w,C.getDepthNodeSizeCore(P))},0)},I.prototype.getNodePosition=function(D,C,w){return this.settings.direction===h.LogicalDirectionKind.Forward?this.settings.orientation===h.DataLayoutOrientation.Vertical?new s.Point(D,C):new s.Point(C,D):this.settings.orientation===h.DataLayoutOrientation.Vertical?new s.Point(D,C+w):new s.Point(C+w,D)},I.prototype.updateEdgeConnections=function(D,C,w){var P=this;C.filter(function(k){return k.to===w.key}).forEach(function(k){var A=P.getBeginEdgeIndex(),R=P.getEndEdgeIndex();D.addEdge(new p.EdgeLayout(k.key,A,R))})},I.prototype.getBeginEdgeIndex=function(){return this.settings.direction===h.LogicalDirectionKind.Forward?this.isVertical()?u.ConnectionPointSide.South:u.ConnectionPointSide.East:this.isVertical()?u.ConnectionPointSide.North:u.ConnectionPointSide.West},I.prototype.getEndEdgeIndex=function(){return this.settings.direction===h.LogicalDirectionKind.Forward?this.isVertical()?u.ConnectionPointSide.North:u.ConnectionPointSide.West:this.isVertical()?u.ConnectionPointSide.South:u.ConnectionPointSide.East},I.prototype.alignParent=function(D,C,w){if(this.settings.alignment===h.Alignment.Center){var P=C.from+C.length/2-this.getBreadthNodeSizeCore(D.info,!0)/2;this.settings.orientation===h.DataLayoutOrientation.Vertical?(D.position.x=Math.max(w.from+D.info.margin.left,P),D.position.x=Math.min(w.to-D.info.size.width-D.info.margin.right,D.position.x)):(D.position.y=Math.max(w.from+D.info.margin.top,P),D.position.y=Math.min(w.to-D.info.size.height-D.info.margin.bottom,D.position.y))}},I.prototype.getDepthPos=function(D){return this.settings.orientation===h.DataLayoutOrientation.Vertical?D.position.y:D.position.x},I.prototype.getBreadthPos=function(D){return this.settings.orientation===h.DataLayoutOrientation.Vertical?D.position.x:D.position.y},I.prototype.setDepthPos=function(D,C){this.settings.orientation===h.DataLayoutOrientation.Vertical?D.position.y=C:D.position.x=C},I.prototype.isVertical=function(){return this.settings.orientation===h.DataLayoutOrientation.Vertical},I}(a.LayoutBuilder);_.TreeLayoutBuilder=g},213:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.GraphIterator=_.FastGraph=_.Graph=void 0;var E=x(8217),y=x(5503),p=x(2400),d=x(701),s=function(){function h(f,g){this.nodeMap={},this.edgeMap={},this.nodes=[],this.edges=[],this.onInit(),f.forEach(this.addNode.bind(this)),g.forEach(this.addEdge.bind(this))}return Object.defineProperty(h.prototype,"items",{get:function(){return this.nodes.map(this.getNode.bind(this))},enumerable:!1,configurable:!0}),h.prototype.onInit=function(){},h.prototype.addEdge=function(f){this.edgeMap[f.key]=f,this.edges.push(f)},h.prototype.addNode=function(f){this.nodeMap[f.key]=f,this.nodes.push(f.key)},h.prototype.getNode=function(f){return this.nodeMap[f]},h.prototype.getEdge=function(f){return this.edgeMap[f]},h.prototype.isEmpty=function(){return!this.nodes.length&&!this.edges.length},h.prototype.getAdjacentEdges=function(f,g){return void 0===g&&(g=E.ConnectionMode.OutgoingAndIncoming),this.edges.filter(function(O){return g&E.ConnectionMode.Incoming&&O.to===f||g&E.ConnectionMode.Outgoing&&O.from===f})},h}(),a=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return b(f,h),f.prototype.cast=function(g,O){var I=this;return new f(this.nodes.map(function(D){return g(I.getNode(D))}),this.edges.map(function(D){return O?O(D):D}))},f.prototype.getConnectedComponents=function(){var g=this.createIterator(E.ConnectionMode.OutgoingAndIncoming);g.visitEachEdgeOnce=!0;for(var O=[],I=function(w){var P=[],k=[];g.onNode=function(A){return P.push(A)},g.onEdge=function(A){return k.push(A)},g.iterate(D.nodes[w]),P.length&&O.push(new f(P,k))},D=this,C=0;C<this.nodes.length;C++)I(C);return O},f.prototype.createIterator=function(g){var O=new u(this,g);return O.comparer=function(I,D){return I.weight-D.weight},O},f.prototype.getSpanningGraph=function(g,O,I){var D=this;if(void 0===I&&(I=void 0),!this.nodes.length)return new f([],[]);I||(I=function(R){return R.weight});var C=[],w=new d.HashSet,P=new d.HashSet([],function(R){return R.getHashKey()});for(this.addNodeToSpanningGraph(g,O,C,w,P,I);C.length&&w.length!==this.nodes.length;){var k=C.shift();P.tryPush(k);var A=w.contains(k.from)?k.to:k.from;this.addNodeToSpanningGraph(A,O,C,w,P,I),C=C.filter(function(R){return!w.contains(R.from)||!w.contains(R.to)})}return new f(w.list().map(function(R){return D.getNode(R)}),P.list())},f.prototype.addNodeToSpanningGraph=function(g,O,I,D,C,w){D.tryPush(g),this.getAdjacentEdges(g,O).filter(function(P){return!C.contains(P)}).forEach(function(P){var k=w(P),A=p.SearchUtils.binaryIndexOf(I,function(R){return R.weight-k});for(A=A<0?~A:A;A<I.length&&w(I[A])===k;)A++;I.splice(A,0,new E.Edge(P.key,P.from,P.to,k))})},f.create=function(g,O){return new f(g,O.filter(function(I){return I.beginItem&&I.endItem instanceof y.Shape&&I.endItem&&I.endItem instanceof y.Shape&&I.beginItem!==I.endItem}).map(function(I){return new E.Edge(I.key,I.beginItem&&I.beginItem.key,I.endItem&&I.endItem.key)}))},f}(s);_.Graph=a;var l=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return b(f,h),f.prototype.onInit=function(){this.parentToChildren={},this.childToParents={}},f.prototype.addEdge=function(g){h.prototype.addEdge.call(this,g),(this.parentToChildren[g.from]||(this.parentToChildren[g.from]=[])).push(g.to),(this.childToParents[g.to]||(this.childToParents[g.to]=[])).push(g.from)},f.prototype.getChildren=function(g){return this.parentToChildren[g]||[]},f.prototype.getParents=function(g){return this.childToParents[g]||[]},f.prototype.createIterator=function(g){return new u(this,g)},f}(s);_.FastGraph=l;var u=function(){function h(f,g){void 0===g&&(g=E.ConnectionMode.OutgoingAndIncoming),this.graph=f,this.connectionMode=g,this.visitEachEdgeOnce=!0,this.visitEachNodeOnce=!0,this.visitedNodes={},this.visitedEdges={}}return h.prototype.iterate=function(f){if(!this.visitEachNodeOnce&&!this.visitEachEdgeOnce&&!this.skipNode)throw"skipNode or visitEachNodeOnce or visitEachEdgeOnce must be set to avoid SOF";this.iterateCore(f)},h.prototype.iterateCore=function(f){var g=this,O=this.graph.getNode(f);if(!(!O||this.skipNode&&this.skipNode(O)||this.visitEachNodeOnce&&this.isNodeVisited(f))){this.visitedNodes[f]=!0,this.onNode&&this.onNode(O);var I=this.graph.getAdjacentEdges(f,this.connectionMode);if(this.skipEdge&&(I=I.filter(function(w){return!g.skipEdge(w)})),this.connectionMode&E.ConnectionMode.Outgoing){var D=I.filter(function(w){return w.from===f});this.comparer&&D.sort(this.comparer),D.forEach(function(w){g.visitEachEdgeOnce&&g.visitedEdges[w.key]||(g.visitedEdges[w.key]=!0,g.onEdge&&g.onEdge(w,!0),g.iterateCore(w.to),g.onAfterEdge&&g.onAfterEdge(w,!0))})}if(this.onAllEdges&&this.onAllEdges(O,!0),this.connectionMode&E.ConnectionMode.Incoming){var C=I.filter(function(w){return w.to===f});this.comparer&&C.sort(this.comparer),C.forEach(function(w){g.visitEachEdgeOnce&&g.visitedEdges[w.key]||(g.visitedEdges[w.key]=!0,g.onEdge&&g.onEdge(w,!1),g.iterateCore(w.from),g.onAfterEdge&&g.onAfterEdge(w,!1))})}this.onAllEdges&&this.onAllEdges(O,!1)}},h.prototype.isNodeVisited=function(f){return!!this.visitedNodes[f]},h.prototype.isEdgeVisited=function(f){return!!this.visitedEdges[f]},h}();_.GraphIterator=u},7819:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GraphInfo=void 0;var m=x(1755),b=function(){function E(y,p){this.container=y,this.sourceGraph=p}return Object.defineProperty(E.prototype,"graph",{get:function(){return this._graph||(this._graph=this.getNodeInfoGraph())},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"level",{get:function(){return void 0!==this._level?this._level:this._level=this.getLevel()},enumerable:!1,configurable:!0}),E.prototype.getNodeInfoGraph=function(){return this.sourceGraph.cast(m.LayoutUtils.shapeToLayout)},E.prototype.getLevel=function(){var y=0;return this.container&&(y=this.getContainerLevel(this.container)),y},E.prototype.getContainerLevel=function(y){var p=1,d=y.container;return d&&(p+=this.getContainerLevel(d)),p},E}();_.GraphInfo=b},8119:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GraphLayout=void 0;var m=x(8675),b=x(617),E=function(){function y(){this.nodeKeys=[],this.nodeToLayout={},this.edgeToPosition={}}return y.prototype.forEachNode=function(p){var d=this;this.nodeKeys.forEach(function(s){return p(d.nodeToLayout[s],s)})},y.prototype.reduce=function(p,d){var s=this;return this.nodeKeys.reduce(function(a,l,u){return p(a,s.nodeToLayout[l],u)},d)},y.prototype.addNode=function(p){if(this.nodeToLayout[p.key])throw Error("Node layout is already registered");return this.nodeKeys.push(p.key),this.nodeToLayout[p.key]=p,p},y.prototype.hasNode=function(p){return!!this.nodeToLayout[p]},y.prototype.addEdge=function(p){if(this.edgeToPosition[p.key])throw Error("Edge layout is already registered");this.edgeToPosition[p.key]=p},y.prototype.getRectangle=function(p){var d=this;return m.GeometryUtils.getCommonRectangle(this.nodeKeys.map(function(s){return d.nodeToLayout[s].rectangle}))},y.prototype.offsetNodes=function(p,d){var s=this;void 0===p&&(p=0),void 0===d&&(d=0);var a=new y;return this.nodeKeys.forEach(function(l){var u=s.nodeToLayout[l];a.addNode(new b.NodeLayout(u.info,u.position.clone().offset(p,d)))}),a.copyEdges(this),a},y.prototype.extend=function(p){var d=this;p.forEachNode(function(s){return d.addNode(s)}),this.copyEdges(p)},y.prototype.copyEdges=function(p){var d=this;Object.keys(p.edgeToPosition).forEach(function(s){var a=p.edgeToPosition[s];d.addEdge(new b.EdgeLayout(a.key,a.beginIndex,a.endIndex))})},y}();_.GraphLayout=E},8710:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.Alignment=_.DataLayoutOrientation=_.LogicalDirectionKind=_.TreeLayoutSettings=_.LayoutSettings=void 0;var E=x(7959),y=function(l){this.orientation=d.Vertical,this.direction=p.Forward;var u=l&&2*l>E.Connector.minOffset?2*l:E.Connector.minOffset;this.columnSpacing=u,this.layerSpacing=2*u,this.containerPadding=2*u,this.componentSpacing=2*u};_.LayoutSettings=y;var p,d,s,l,a=function(l){function u(h){var f=l.call(this,h)||this;return f.alignment=s.Center,f.subTreeColumnSpacing=f.componentSpacing/2,f}return b(u,l),u}(y);_.TreeLayoutSettings=a,(l=p=_.LogicalDirectionKind||(_.LogicalDirectionKind={}))[l.Backward=0]="Backward",l[l.Forward=1]="Forward",function(l){l[l.Horizontal=0]="Horizontal",l[l.Vertical=1]="Vertical"}(d=_.DataLayoutOrientation||(_.DataLayoutOrientation={})),function(l){l[l.Left=0]="Left",l[l.Center=1]="Center"}(s=_.Alignment||(_.Alignment={}))},1755:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.LayoutUtils=void 0;var m=x(617),b=function(){function E(){}return E.shapeToLayout=function(y){var p=new m.Margin(0),d=y.rectangle;y.attachedConnectors.filter(function(a){return!a.beginItem||!a.endItem}).forEach(function(a){var l=a.rectangle;p.left=Math.max(p.left,d.x-l.x),p.right=Math.max(p.right,l.right-d.right),p.top=Math.max(p.top,d.y-l.y),p.bottom=Math.max(p.bottom,l.bottom-d.bottom)});var s=new m.NodeInfo(y.key,p,y.size.clone());return s.connectionPoints=y.description.getConnectionPoints(),s},E}();_.LayoutUtils=b},617:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Margin=_.EdgeLayout=_.NodeLayout=_.NodeInfo=void 0;var m=x(8011);_.NodeInfo=function(d,s,a,l){void 0===l&&(l=[]),this.key=d,this.margin=s,this.size=a,this.connectionPoints=l};var E=function(){function d(s,a){this.info=s,this.position=a}return Object.defineProperty(d.prototype,"key",{get:function(){return this.info.key},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"rectangle",{get:function(){return m.Rectangle.fromGeometry(this.position,this.info.size)},enumerable:!1,configurable:!0}),d}();_.NodeLayout=E,_.EdgeLayout=function(d,s,a){this.key=d,this.beginIndex=s,this.endIndex=a};var p=function(){function d(s,a,l,u){void 0===a&&(a=s),void 0===l&&(l=s),void 0===u&&(u=s),this.top=s,this.right=a,this.bottom=l,this.left=u}return d.empty=function(){return new d(0)},d}();_.Margin=p},8217:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectionMode=_.PositionInfo=_.Edge=void 0;var b,x=function(){function b(E,y,p,d){void 0===d&&(d=1),this.weight=d,this.key=E,this.from=y,this.to=p}return b.prototype.getHashKey=function(){return this.from+"_"+this.to},b.prototype.reverse=function(){return new b(this.key,this.to,this.from,this.weight)},b}();_.Edge=x,_.PositionInfo=function(b,E){this.item=b,this.position=E},(b=_.ConnectionMode||(_.ConnectionMode={}))[b.Outgoing=1]="Outgoing",b[b.Incoming=2]="Incoming",b[b.OutgoingAndIncoming=3]="OutgoingAndIncoming"},5148:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Tree=void 0;var m=x(8217),b=function(){function E(y,p){var d=this;this.childToParent={},this.root=y,this.parentToChildren=p;var s=function(l){if(!Object.prototype.hasOwnProperty.call(p,l))return"continue";p[l].forEach(function(u){return d.childToParent[u.key]=l})};for(var a in p)s(a)}return E.prototype.getChildren=function(y){return y&&this.parentToChildren[y.key]?this.parentToChildren[y.key]:[]},E.prototype.hasChildren=function(y){return this.parentToChildren[y.key]&&this.parentToChildren[y.key].length>0},E.prototype.iterate=function(y){this.iterateCore(this.root,0,y)},E.createSpanningTree=function(y){var p=E.findRoot(y),d=y.createIterator(m.ConnectionMode.Outgoing),s={};return d.skipEdge=function(a){return void 0===a.to||d.isNodeVisited(a.to)},d.onNode=function(a){return s[a.key]=[]},d.onEdge=function(a){var l=y.getNode(a.to);l&&s[a.from].push(l)},d.iterate(p),new E(y.getNode(p),s)},E.prototype.iterateCore=function(y,p,d){var s=this;d(y,p),this.getChildren(y).forEach(function(a){return s.iterateCore(a,p+1,d)})},E.findRoot=function(y){return y.nodes.reduce(function(p,d){var s=y.getAdjacentEdges(d),a=s.filter(function(u){return u.to===d}).length,l=s.filter(function(u){return u.from===d}).length;return(void 0===p.candidate||0===a&&p.inc>0||0!==p.inc&&p.out-p.inc<l-a)&&(p.candidate=d,p.inc=a,p.out=l),p},{inc:-1,out:-1,candidate:void 0}).candidate},E}();_.Tree=b},7309:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CycleRemover=void 0;var m=x(213),b=x(8217),E=x(701),y=function(){function p(){}return p.removeCycles=function(d){var s=this.getFeedbackSet(d);return this.reverseEdges(d,s)},p.getFeedbackSet=function(d){for(var s=this,a={},l=this.getNonTrivialStronglyConnectedComponents(d);l.length;)l.forEach(function(u){var h=s.getMaxCyclicEdges(u);h.forEach(function(f){return delete a[f.reverse().getHashKey()]}),h.forEach(function(f){return a[f.getHashKey()]=!0})}),l=this.getNonTrivialStronglyConnectedComponents(this.reverseEdges(d,a).graph);return a},p.getMaxCyclicEdges=function(d){var s={},a={},l={},u=[],h=[],f=d.createIterator(b.ConnectionMode.Outgoing);f.visitEachEdgeOnce=!1,f.onNode=function(O){a[O.key]=!0},f.skipNode=function(O){if(a[O.key]){for(var I=[],D=0;D<u.length;D++){var C=u[D];if(void 0===l[C.key]&&(l[C.key]=0),l[C.key]++,I.push(C),C.from===O.key)break}h.push(I)}return a[O.key]||s[O.key]},f.skipEdge=function(O){return!1},f.onEdge=function(O){u.splice(0,0,O)},f.onAfterEdge=function(O){u.splice(0,1)},f.onAllEdges=function(O){s[O.key]=!0,a[O.key]=!1},f.iterate(d.nodes[0]);var g=new E.HashSet([],function(O){return O.key});return h.forEach(function(O){g.tryPush(O.reduce(function(I,D){return l[D.key]>l[I.key]?D:I},O[0]))}),g.list()},p.reverseEdges=function(d,s){var a=new E.HashSet([],function(h){return h.getHashKey()}),l={},u={};return d.edges.forEach(function(h){s[h.getHashKey()]&&(h=h.reverse(),l[h.key]=!0),a.tryPush(h)||(u[h.key]=!0,delete l[h.key])}),{graph:new m.Graph(d.nodes.map(function(h){return d.getNode(h)}),a.list()),reversedEdges:l,removedEdges:u}},p.getNonTrivialStronglyConnectedComponents=function(d){return this.getStronglyConnectedComponents(d).filter(function(s){return s.edges.length})},p.getStronglyConnectedComponents=function(d){for(var s=this,a=[],l=0,u={},h={},f={},g=[],O={},I=0;I<d.nodes.length;I++){var D=d.nodes[I],C=d.createIterator(b.ConnectionMode.Outgoing);C.visitEachEdgeOnce=!1,C.visitEachNodeOnce=!1,C.onNode=function(w){O[w.key]=!0,a.push(w),f[w.key]=!0,h[w.key]=l,u[w.key]=l,l++},C.skipNode=function(w){return O[w.key]},C.skipEdge=function(w){var P=O[w.to];return P&&f[w.to]&&(h[w.from]=Math.min(h[w.from],u[w.to])),P},C.onAfterEdge=function(w){h[w.from]=Math.min(h[w.from],h[w.to])},C.onAllEdges=function(w,P){P&&h[w.key]===u[w.key]&&g.push(s.getStronglyConnectedComponent(d,w,a,f))},C.iterate(D)}return g},p.getStronglyConnectedComponent=function(d,s,a,l){var u,h={},f=[],g=[];do{u=a.pop(),h[u.key]||f.push(u),h[u.key]=!0,l[u.key]=!1}while(u!==s);return f.forEach(function(O){var I=d.getAdjacentEdges(O.key,b.ConnectionMode.Outgoing);g=g.concat(I.filter(function(D){return!h[D.key]&&h[D.to]})),I.forEach(function(D){return h[D.key]=!0})}),new m.Graph(f,g)},p}();_.CycleRemover=y},701:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.HashSet=void 0;var x=function(){function m(b,E){var y=this;void 0===b&&(b=[]),void 0===E&&(E=function(p){return p.toString()}),this.items=[],this.map={},this.getHashCode=E,b.forEach(function(p){return y.tryPush(p)})}return m.prototype.tryPush=function(b){var E=this.getHashCode(b);return void 0===this.map[E]&&(this.map[E]=this.items.push(b)-1,!0)},m.prototype.contains=function(b){return void 0!==this.map[this.getHashCode(b)]},m.prototype.forEach=function(b){this.items.forEach(b)},m.prototype.filter=function(b){return this.items.filter(b)},m.prototype.list=function(){return this.items.slice(0)},m.prototype.item=function(b){return this.items[b]},m.prototype.first=function(){return this.items[0]},m.prototype.remove=function(b){var E=this.getHashCode(b),y=this.map[E];if("number"!=typeof y)throw"Item not found";delete this.map[E],this.items.splice(y,1);for(var p=y;p<this.items.length;p++)this.map[this.getHashCode(this.items[p])]--},Object.defineProperty(m.prototype,"length",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),m}();_.HashSet=x},6224:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramLocalizationService=void 0;var m=x(2259),b=x(5383),E=function(){function y(){}return y.unitItems={},y.formatUnit=function(p){return p.toString()},y.shapeTexts={},y}();_.DiagramLocalizationService=E,E.unitItems[b.DiagramUnit.In]="in",E.unitItems[b.DiagramUnit.Cm]="cm",E.unitItems[b.DiagramUnit.Px]="px",E.shapeTexts[m.ShapeTypes.Text]="Text",E.shapeTexts[m.ShapeTypes.Rectangle]="Rectangle",E.shapeTexts[m.ShapeTypes.Ellipse]="Ellipse",E.shapeTexts[m.ShapeTypes.Cross]="Cross",E.shapeTexts[m.ShapeTypes.Triangle]="Triangle",E.shapeTexts[m.ShapeTypes.Diamond]="Diamond",E.shapeTexts[m.ShapeTypes.Heart]="Heart",E.shapeTexts[m.ShapeTypes.Pentagon]="Pentagon",E.shapeTexts[m.ShapeTypes.Hexagon]="Hexagon",E.shapeTexts[m.ShapeTypes.Octagon]="Octagon",E.shapeTexts[m.ShapeTypes.Star]="Star",E.shapeTexts[m.ShapeTypes.ArrowLeft]="Left Arrow",E.shapeTexts[m.ShapeTypes.ArrowUp]="Up Arrow",E.shapeTexts[m.ShapeTypes.ArrowRight]="Right Arrow",E.shapeTexts[m.ShapeTypes.ArrowDown]="Down Arrow",E.shapeTexts[m.ShapeTypes.ArrowUpDown]="Up Down Arrow",E.shapeTexts[m.ShapeTypes.ArrowLeftRight]="Left Right Arrow",E.shapeTexts[m.ShapeTypes.Process]="Process",E.shapeTexts[m.ShapeTypes.Decision]="Decision",E.shapeTexts[m.ShapeTypes.Terminator]="Terminator",E.shapeTexts[m.ShapeTypes.PredefinedProcess]="Predefined Process",E.shapeTexts[m.ShapeTypes.Document]="Document",E.shapeTexts[m.ShapeTypes.MultipleDocuments]="Multiple Documents",E.shapeTexts[m.ShapeTypes.ManualInput]="Manual Input",E.shapeTexts[m.ShapeTypes.Preparation]="Preparation",E.shapeTexts[m.ShapeTypes.Data]="Data",E.shapeTexts[m.ShapeTypes.Database]="Database",E.shapeTexts[m.ShapeTypes.HardDisk]="Hard Disk",E.shapeTexts[m.ShapeTypes.InternalStorage]="Internal Storage",E.shapeTexts[m.ShapeTypes.PaperTape]="Paper Tape",E.shapeTexts[m.ShapeTypes.ManualOperation]="Manual Operation",E.shapeTexts[m.ShapeTypes.Delay]="Delay",E.shapeTexts[m.ShapeTypes.StoredData]="Stored Data",E.shapeTexts[m.ShapeTypes.Display]="Display",E.shapeTexts[m.ShapeTypes.Merge]="Merge",E.shapeTexts[m.ShapeTypes.Connector]="Connector",E.shapeTexts[m.ShapeTypes.Or]="Or",E.shapeTexts[m.ShapeTypes.SummingJunction]="Summing Junction",E.shapeTexts[m.ShapeTypes.Container]="Container",E.shapeTexts[m.ShapeTypes.VerticalContainer]="Vertical Container",E.shapeTexts[m.ShapeTypes.HorizontalContainer]="Horizontal Container",E.shapeTexts[m.ShapeTypes.Card]="Person's Name",E.shapeTexts[m.ShapeTypes.CardWithImageOnLeft]="Card with Image on the Left",E.shapeTexts[m.ShapeTypes.CardWithImageOnTop]="Card with Image on the Top",E.shapeTexts[m.ShapeTypes.CardWithImageOnRight]="Card with Image on the Right"},6879:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramModelOperation=_.ModelOperationSettings=void 0;var m,x=function(){function m(){this._addShape=!0,this._addShapeFromToolbox=!0,this._deleteShape=!0,this._deleteConnector=!0,this._changeConnection=!0,this._changeConnectorPoints=!0,this._changeShapeText=!0,this._changeConnectorText=!0,this._resizeShape=!0,this._moveShape=!0}return Object.defineProperty(m.prototype,"addShape",{get:function(){return this._addShape},set:function(b){b!==this._addShape&&(this._addShape=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"addShapeFromToolbox",{get:function(){return this._addShapeFromToolbox},set:function(b){b!==this._addShapeFromToolbox&&(this._addShapeFromToolbox=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"deleteShape",{get:function(){return this._deleteShape},set:function(b){b!==this._deleteShape&&(this._deleteShape=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"deleteConnector",{get:function(){return this._deleteConnector},set:function(b){b!==this._deleteConnector&&(this._deleteConnector=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"changeConnection",{get:function(){return this._changeConnection},set:function(b){b!==this._changeConnection&&(this._changeConnection=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"changeConnectorPoints",{get:function(){return this._changeConnectorPoints},set:function(b){b!==this._changeConnectorPoints&&(this._changeConnectorPoints=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"changeShapeText",{get:function(){return this._changeShapeText},set:function(b){b!==this._changeShapeText&&(this._changeShapeText=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"changeConnectorText",{get:function(){return this._changeConnectorText},set:function(b){b!==this._changeConnectorText&&(this._changeConnectorText=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"resizeShape",{get:function(){return this._resizeShape},set:function(b){b!==this._resizeShape&&(this._resizeShape=b)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"moveShape",{get:function(){return this._moveShape},set:function(b){b!==this._moveShape&&(this._moveShape=b)},enumerable:!1,configurable:!0}),m.prototype.applySettings=function(b){b&&("boolean"==typeof b.addShape&&(this.addShape=b.addShape),"boolean"==typeof b.addShapeFromToolbox&&(this.addShapeFromToolbox=b.addShapeFromToolbox),"boolean"==typeof b.deleteShape&&(this.deleteShape=b.deleteShape),"boolean"==typeof b.deleteConnector&&(this.deleteConnector=b.deleteConnector),"boolean"==typeof b.changeConnection&&(this.changeConnection=b.changeConnection),"boolean"==typeof b.changeConnectorPoints&&(this.changeConnectorPoints=b.changeConnectorPoints),"boolean"==typeof b.changeShapeText&&(this.changeShapeText=b.changeShapeText),"boolean"==typeof b.changeConnectorText&&(this.changeConnectorText=b.changeConnectorText),"boolean"==typeof b.resizeShape&&(this.resizeShape=b.resizeShape),"boolean"==typeof b.moveShape&&(this.moveShape=b.moveShape))},m}();_.ModelOperationSettings=x,(m=_.DiagramModelOperation||(_.DiagramModelOperation={}))[m.AddShape=0]="AddShape",m[m.AddShapeFromToolbox=1]="AddShapeFromToolbox",m[m.DeleteShape=2]="DeleteShape",m[m.DeleteConnector=3]="DeleteConnector",m[m.ChangeConnection=4]="ChangeConnection",m[m.ChangeConnectorPoints=5]="ChangeConnectorPoints",m[m.BeforeChangeShapeText=6]="BeforeChangeShapeText",m[m.ChangeShapeText=7]="ChangeShapeText",m[m.BeforeChangeConnectorText=8]="BeforeChangeConnectorText",m[m.ChangeConnectorText=9]="ChangeConnectorText",m[m.ResizeShape=10]="ResizeShape",m[m.MoveShape=11]="MoveShape"},7228:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectionPoint=void 0;var E=x(8900),y=x(3742),p=function(d){function s(a,l,u){void 0===u&&(u=y.ConnectionPointSide.Undefined);var h=d.call(this,a,l)||this;return h.side=u,h}return b(s,d),s.prototype.offset=function(a,l){return d.prototype.offset.call(this,a,l),this.side=y.ConnectionPointSide.Undefined,this},s.prototype.multiply=function(a,l){return d.prototype.multiply.call(this,a,l),this.side=y.ConnectionPointSide.Undefined,this},s.prototype.clone=function(){return new s(this.x,this.y,this.side)},s.prototype.toPoint=function(){return new E.Point(this.x,this.y)},s}(E.Point);_.ConnectionPoint=p},5800:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsCalculator=void 0;var E=x(7595),y=x(4717),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.getPoints=function(){return this.connector.points.map(function(a,l){return new y.ConnectorRenderPoint(a.x,a.y,l)})},s}(E.ConnectorPointsCalculatorBase);_.ConnectorPointsCalculator=p},7595:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsCalculatorBase=void 0,_.ConnectorPointsCalculatorBase=function(m){this.connector=m}},2342:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalCalculator=void 0;var E=x(8011),y=x(3742),p=x(7595),d=x(1686),s=x(1774),a=x(993),l=x(2290),u=x(7369),h=x(4717),f=x(4867),g=function(O){function I(D){var C=O.call(this,D)||this;return C.sideCalculators={},C.sideCalculators[y.ConnectionPointSide.Undefined]=new d.ConnectorPointsOrthogonalUndefinedSideCalculator(C),C.sideCalculators[y.ConnectionPointSide.South]=new s.ConnectorPointsOrthogonalSouthSideCalculator(C),C.sideCalculators[y.ConnectionPointSide.North]=new a.ConnectorPointsOrthogonalNorthSideCalculator(C),C.sideCalculators[y.ConnectionPointSide.East]=new l.ConnectorPointsOrthogonalEastSideCalculator(C),C.sideCalculators[y.ConnectionPointSide.West]=new u.ConnectorPointsOrthogonalWestSideCalculator(C),C}return b(I,O),Object.defineProperty(I.prototype,"beginRect",{get:function(){return this.connector.beginItem?this.connector.beginItem.rectangle:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"endRect",{get:function(){return this.connector.endItem?this.connector.endItem.rectangle:void 0},enumerable:!1,configurable:!0}),I.prototype.getPoints=function(){var D=this.connector.points.map(function(q,Y){return new h.ConnectorRenderPoint(q.x,q.y,Y)});f.ModelUtils.skipUnnecessaryRenderPoints(D,!0);var C=0,w=D.length-1,P=this.getPointSide(D,0),k=this.getPointSide(D,1),A=this.getPointSide(D,D.length-1),R=this.getPointSide(D,D.length-1-1),M=this.getSideCalculator(P),L=this.getSideCalculator(A),j=M.getCorrectOriginPoint(D[C],this.beginRect),U=D[C+1];if(2===D.length&&M.isOnSidePoint(j,U)&&M.isDirectConnectionAllowed(k,j,U))M.getDirectConnectionPoints(j,U).forEach(function(q){D.splice(C+1,0,q),C++,w++});else{var K=M.getBeginOffsetPoints(k,D[C],D[C+1],this.beginRect);K.forEach(function(q){D.splice(C+1,0,q)}),C+=K.length,L.getEndOffsetPoints(R,D[w+=K.length],D[w-1],this.endRect).forEach(function(q,Y){D.splice(w+Y,0,q)}),this.addMiddlePoints(D,C,w)}return f.ModelUtils.skipUnnecessaryRenderPoints(D,!0),D},I.prototype.getSideCalculator=function(D){return this.sideCalculators[D]},I.prototype.getPointSide=function(D,C){if(0===C&&this.connector.beginItem){var w=this.connector.beginConnectionPointIndex;return this.connector.beginItem.getConnectionPointSideByIndex(w,D[1])}return C===D.length-1&&this.connector.endItem?this.connector.endItem.getConnectionPointSideByIndex(w=this.connector.endConnectionPointIndex,D[D.length-2]):y.ConnectionPointSide.Undefined},I.prototype.addMiddlePoints=function(D,C,w){for(var P=C;P<w;P++){var k=P+1,A=this.getMiddlePoint(D[P],D[P-1],P-1==0,D[k],D[k+1],k+1===D.length-1);void 0!==A&&(D.splice(P+1,0,A),P++,w++)}},I.prototype.getMiddlePoints=function(D,C){return D.x===C.x||D.y===C.y?[]:[new h.ConnectorRenderPoint(D.x,C.y),new h.ConnectorRenderPoint(C.x,D.y)]},I.prototype.getMiddlePoint=function(D,C,w,P,k,A){var R,M=this,L=this.getMiddlePoints(D,P);return L.forEach(function(H){var j=M.createPointsRect(D,H),U=M.createPointsRect(H,P),K=M.connector.beginItem?M.connector.beginItem.rectangle:void 0,q=M.connector.endItem?M.connector.endItem.rectangle:void 0;K&&(E.Rectangle.areIntersected(K,j)||E.Rectangle.areIntersected(K,U))||q&&(E.Rectangle.areIntersected(q,j)||E.Rectangle.areIntersected(q,U))||M.isReturnPoint(H,D,C)&&!M.isIntermediatePoints(D,C)||M.isReturnPoint(H,P,k)&&!M.isIntermediatePoints(P,k)||(void 0===R||M.isPriorMiddlePoint(H,D,C,P,k))&&(R=H)}),void 0===R&&L.length>0&&(R=L[0]),R},I.prototype.createPointsRect=function(D,C){var w=E.Rectangle.fromPoints(D,C);return w.width>0&&(w=w.clone().inflate(-1,0)),w.height>0&&(w=w.clone().inflate(0,-1)),w},I.prototype.isPriorMiddlePoint=function(D,C,w,P,k){return!(!w||D.x!==w.x&&D.y!==w.y)||!(!k||D.x!==k.x&&D.y!==k.y)},I.prototype.isReturnPoint=function(D,C,w){return void 0!==C&&void 0!==w&&(D.x===w.x&&(C.y<D.y&&D.y<w.y||C.y>D.y&&D.y>w.y)||D.y===w.y&&(C.x<D.x&&D.x<w.x||C.x>D.x&&D.x>w.x))},I.prototype.isIntermediatePoints=function(D,C){return 0<D.pointIndex&&D.pointIndex<this.connector.points.length-1&&0<C.pointIndex&&C.pointIndex<this.connector.points.length-1},I}(p.ConnectorPointsCalculatorBase);_.ConnectorPointsOrthogonalCalculator=g},2290:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalEastSideCalculator=void 0;var E=x(3742),y=x(1816),p=x(4717),d=function(s){function a(l){return s.call(this,l)||this}return b(a,s),a.prototype.getCorrectOriginPoint=function(l,u){return l.x<u.right&&(l=l.clone().offset(u.right-l.x,0)),l},a.prototype.getSameShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.North:case E.ConnectionPointSide.South:case E.ConnectionPointSide.East:return[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.West:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset())}},a.prototype.getOverlappedPointsOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.West:return[u.clone().offset(-this.getMinOffset(),0)]}return[]},a.prototype.getBeginOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.North:return u.x<h.x?u.y<h.y?[]:[u.clone().offset(this.getMinOffset(),0)]:u.x>this.endRect.right?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.South:return u.x<h.x?u.y>h.y?[]:[u.clone().offset(this.getMinOffset(),0)]:u.x>this.endRect.right?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.East:return[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.West:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),u.y<h.y)}},a.prototype.getEndOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.West:var g=this.getMinOffset();return this.beginRect.right>u.x&&(g+=this.beginRect.right-u.x),[u.clone().offset(g,0)];case E.ConnectionPointSide.North:return h.x<u.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):u.y>h.y?[u.clone().offset(this.getMinOffset(),0)]:[];case E.ConnectionPointSide.South:return h.x<u.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):u.y<h.y?[u.clone().offset(this.getMinOffset(),0)]:[]}},a.prototype.getBeginOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(this.getScaleableOffsetX(u,h,!1),0)]},a.prototype.getEndOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(this.getScaleableOffsetX(u,h,!0),0)]},a.prototype.getBeginOffSideOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.South:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!1);break;case E.ConnectionPointSide.North:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!0);break;case E.ConnectionPointSide.East:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1);break;case E.ConnectionPointSide.Undefined:case E.ConnectionPointSide.West:return this.getScaleableAsideOffsetPoints(u,h,f,!1)}return[u.clone().offset(this.getScaleableOffsetX(u,h,!1),0)]},a.prototype.getEndOffSideOffsetPoints=function(l,u,h,f){return l===E.ConnectionPointSide.Undefined?this.getScaleableAsideOffsetPoints(u,h,f,!0):this.isBeginEndOverlappedY()?this.getScaleableAsideOffsetPoints(u,h,f,!0,this.beginRect.center.y>this.endRect.center.y):[u.clone().offset(this.getScaleableOffsetX(u,h,!0),0)]},a.prototype.getAsideOffsetPoints=function(l,u,h,f,g,O){var I=[];return void 0!==h&&(void 0===O&&(O=u.y<l.y),I.push(O?l.clone().offset(f,-(l.y-h.y+g)):l.clone().offset(f,h.bottom-l.y+g))),I.push(l.clone().offset(f,0)),I},a.prototype.getScaleableAsideOffsetPoints=function(l,u,h,f,g){var O=this.getScaleableOffsetX(l,u,f),I=this.getScaleableOffsetY(l,u,f);return this.getAsideOffsetPoints(l,u,h,O,I,g)},a.prototype.getScaleableOffsetX=function(l,u,h){if(this.beginRect&&this.endRect){var f=h?this.beginRect.x-l.x:this.endRect.x-l.x;if(f>0&&f<2*this.getMinOffset())return f/2}return this.getMinOffset()},a.prototype.getScaleableOffsetY=function(l,u,h){var f;return this.beginRect&&this.endRect&&!h&&!this.isBeginEndOverlappedY()&&(f=u.y<l.y?this.beginRect.y-this.endRect.bottom:this.endRect.y-this.beginRect.bottom)<2*this.getMinOffset()?f/2:this.getMinOffset()},a.prototype.isOnSidePoint=function(l,u){return u.x>l.x},a.prototype.isDirectConnectionAllowed=function(l,u,h){return l===E.ConnectionPointSide.West||l===E.ConnectionPointSide.Undefined},a.prototype.getDirectConnectionPoints=function(l,u){var h=l.x+(u.x-l.x)/2;return[new p.ConnectorRenderPoint(h,l.y),new p.ConnectorRenderPoint(h,u.y)]},a}(y.ConnectorPointsOrthogonalSideCalculatorBase);_.ConnectorPointsOrthogonalEastSideCalculator=d},993:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalNorthSideCalculator=void 0;var E=x(3742),y=x(1816),p=x(4717),d=function(s){function a(l){return s.call(this,l)||this}return b(a,s),a.prototype.getCorrectOriginPoint=function(l,u){return l.y>u.y&&(l=l.clone().offset(0,u.y-l.y)),l},a.prototype.getSameShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:case E.ConnectionPointSide.West:case E.ConnectionPointSide.North:return[u.clone().offset(0,-this.getMinOffset())];case E.ConnectionPointSide.South:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset())}},a.prototype.getOverlappedPointsOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.South:return[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.North:return[u.clone().offset(0,-this.getMinOffset())]}return[]},a.prototype.getBeginOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return u.y>h.y?u.x>h.x?[]:[u.clone().offset(0,-this.getMinOffset())]:u.y<this.endRect.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):[u.clone().offset(0,-this.getMinOffset())];case E.ConnectionPointSide.West:return u.y>h.y?u.x<h.x?[]:[u.clone().offset(0,-this.getMinOffset())]:u.y<this.endRect.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):[u.clone().offset(0,-this.getMinOffset())];case E.ConnectionPointSide.North:return[u.clone().offset(0,-this.getMinOffset())];case E.ConnectionPointSide.South:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),u.x<h.x)}},a.prototype.getEndOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return h.y>u.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):u.x<h.x?[u.clone().offset(0,-this.getMinOffset())]:[];case E.ConnectionPointSide.West:return h.y>u.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):u.x>h.x?[u.clone().offset(0,-this.getMinOffset())]:[];case E.ConnectionPointSide.North:return[u.clone().offset(0,-this.getMinOffset())];case E.ConnectionPointSide.South:var g=-this.getMinOffset();return this.beginRect.y<u.y&&(g-=u.y-this.beginRect.y),[u.clone().offset(0,g)]}},a.prototype.getBeginOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(0,-this.getScaleableOffsetY(u,h,!1))]},a.prototype.getEndOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(0,-this.getScaleableOffsetY(u,h,!0))]},a.prototype.getBeginOffSideOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!1);break;case E.ConnectionPointSide.West:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!0);break;case E.ConnectionPointSide.North:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1);break;case E.ConnectionPointSide.Undefined:case E.ConnectionPointSide.South:return this.getScaleableAsideOffsetPoints(u,h,f,!1)}return[u.clone().offset(0,-this.getScaleableOffsetY(u,h,!1))]},a.prototype.getEndOffSideOffsetPoints=function(l,u,h,f){return l===E.ConnectionPointSide.Undefined?this.getScaleableAsideOffsetPoints(u,h,f,!0):this.isBeginEndOverlappedX()?this.getScaleableAsideOffsetPoints(u,h,f,!0,this.beginRect.center.x>this.endRect.center.x):[u.clone().offset(0,-this.getScaleableOffsetY(u,h,!0))]},a.prototype.getAsideOffsetPoints=function(l,u,h,f,g,O){var I=[];return void 0!==h&&(void 0===O&&(O=u.x<l.x),I.push(O?l.clone().offset(-(l.x-h.x+g),-f):l.clone().offset(h.right-l.x+g,-f))),I.push(l.clone().offset(0,-f)),I},a.prototype.getScaleableAsideOffsetPoints=function(l,u,h,f,g){var O=this.getScaleableOffsetY(l,u,f),I=this.getScaleableOffsetX(l,u,f);return this.getAsideOffsetPoints(l,u,h,O,I,g)},a.prototype.getScaleableOffsetX=function(l,u,h){var f;return this.beginRect&&this.endRect&&!h&&!this.isBeginEndOverlappedX()&&(f=u.x<l.x?this.beginRect.x-this.endRect.right:this.endRect.x-this.beginRect.right)<2*this.getMinOffset()?f/2:this.getMinOffset()},a.prototype.getScaleableOffsetY=function(l,u,h){if(this.beginRect&&this.endRect){var f=h?l.y-this.beginRect.bottom:l.y-this.endRect.bottom;if(f>0&&f<2*this.getMinOffset())return f/2}return this.getMinOffset()},a.prototype.isOnSidePoint=function(l,u){return u.y<l.y},a.prototype.isDirectConnectionAllowed=function(l,u,h){return l===E.ConnectionPointSide.South||l===E.ConnectionPointSide.Undefined},a.prototype.getDirectConnectionPoints=function(l,u){var h=u.y+(l.y-u.y)/2;return[new p.ConnectorRenderPoint(l.x,h),new p.ConnectorRenderPoint(u.x,h)]},a}(y.ConnectorPointsOrthogonalSideCalculatorBase);_.ConnectorPointsOrthogonalNorthSideCalculator=d},1816:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalSideCalculatorBase=void 0;var m=x(8011),b=x(3742),E=x(7959),y=function(){function p(d){this.parent=d}return Object.defineProperty(p.prototype,"connector",{get:function(){return this.parent.connector},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"beginRect",{get:function(){return this.parent.beginRect},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"endRect",{get:function(){return this.parent.endRect},enumerable:!1,configurable:!0}),p.prototype.getBeginOffsetPoints=function(d,s,a,l){if(s=this.getCorrectOriginPoint(s,l),d!==b.ConnectionPointSide.Undefined){if(this.isBeginEndSame())return this.getSameShapeOffsetPoints(d,s,a,l);if(this.isBeginEndOverlappedPoints(s,a))return this.getOverlappedPointsOffsetPoints(d,s,a,l);if(this.isBeginEndOverlapped())return this.getBeginOverlappedShapeOffsetPoints(d,s,a,l)}else if(this.isOriginRectContainsTargetPoint(l,a))return this.getOverlappedPointsOffsetPoints(d,s,a,l);return this.isOnSidePoint(s,a)?this.getBeginOnSideOffsetPoints(d,s,a,l):this.getBeginOffSideOffsetPoints(d,s,a,l)},p.prototype.getEndOffsetPoints=function(d,s,a,l){if(s=this.getCorrectOriginPoint(s,l),d!==b.ConnectionPointSide.Undefined){if(this.isBeginEndSame())return this.getSameShapeOffsetPoints(d,s,a,l);if(this.isBeginEndOverlappedPoints(a,s))return this.getOverlappedPointsOffsetPoints(d,s,a,l);if(this.isBeginEndOverlapped())return this.getEndOverlappedShapeOffsetPoints(d,s,a,l)}else if(this.isOriginRectContainsTargetPoint(l,a))return this.getOverlappedPointsOffsetPoints(d,s,a,l);return this.isOnSidePoint(s,a)?this.getEndOnSideOffsetPoints(d,s,a,l):this.getEndOffSideOffsetPoints(d,s,a,l)},p.prototype.getSide=function(d,s){return Math.abs(s.x-d.x)>Math.abs(s.y-d.y)?s.x>d.x?b.ConnectionPointSide.East:b.ConnectionPointSide.West:s.y>d.y?b.ConnectionPointSide.South:b.ConnectionPointSide.North},p.prototype.getSideCalculator=function(d,s){return this.parent.getSideCalculator(this.getSide(d,s))},p.prototype.getMinOffset=function(){return E.Connector.minOffset},p.prototype.isBeginEndSame=function(){return this.connector.beginItem===this.connector.endItem},p.prototype.isBeginEndOverlapped=function(){return this.beginRect&&this.endRect&&m.Rectangle.areIntersected(this.beginRect,this.endRect)},p.prototype.isBeginEndOverlappedX=function(){return this.beginRect&&this.endRect&&!!m.Rectangle.getHorizIntersection(this.beginRect,this.endRect)},p.prototype.isBeginEndOverlappedY=function(){return this.beginRect&&this.endRect&&!!m.Rectangle.getVertIntersection(this.beginRect,this.endRect)},p.prototype.isBeginEndOverlappedPoints=function(d,s){return this.beginRect&&this.endRect&&(this.beginRect.containsPoint(s)||this.endRect.containsPoint(d))},p.prototype.isOriginRectContainsTargetPoint=function(d,s){return d&&s&&d.containsPoint(s)},p}();_.ConnectorPointsOrthogonalSideCalculatorBase=y},1774:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalSouthSideCalculator=void 0;var E=x(3742),y=x(1816),p=x(4717),d=function(s){function a(l){return s.call(this,l)||this}return b(a,s),a.prototype.getCorrectOriginPoint=function(l,u){return l.y<u.bottom&&(l=l.clone().offset(0,u.bottom-l.y)),l},a.prototype.getSameShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:case E.ConnectionPointSide.West:case E.ConnectionPointSide.South:return[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.North:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset())}},a.prototype.getOverlappedPointsOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.South:return[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.North:return[u.clone().offset(0,-this.getMinOffset())]}return[]},a.prototype.getBeginOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return u.y<h.y?u.x>h.x?[]:[u.clone().offset(0,this.getMinOffset())]:u.y>this.endRect.bottom?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.West:return u.y<h.y?u.x<h.x?[]:[u.clone().offset(0,this.getMinOffset())]:u.y>this.endRect.bottom?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.South:return[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.North:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),u.x<h.x)}},a.prototype.getEndOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return h.y<u.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):u.x<h.x?[u.clone().offset(0,this.getMinOffset())]:[];case E.ConnectionPointSide.West:return h.y<u.y?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):u.x>h.x?[u.clone().offset(0,this.getMinOffset())]:[];case E.ConnectionPointSide.South:return[u.clone().offset(0,this.getMinOffset())];case E.ConnectionPointSide.North:var g=this.getMinOffset();return this.beginRect.bottom>u.y&&(g+=this.beginRect.bottom-u.y),[u.clone().offset(0,g)]}},a.prototype.getBeginOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(0,this.getScaleableOffsetY(u,h,!1))]},a.prototype.getEndOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(0,this.getScaleableOffsetY(u,h,!0))]},a.prototype.getBeginOffSideOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!1);break;case E.ConnectionPointSide.West:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!0);break;case E.ConnectionPointSide.South:if(this.isBeginEndOverlappedX())return this.getScaleableAsideOffsetPoints(u,h,f,!1);break;case E.ConnectionPointSide.Undefined:case E.ConnectionPointSide.North:return this.getScaleableAsideOffsetPoints(u,h,f,!1)}return[u.clone().offset(0,this.getScaleableOffsetY(u,h,!1))]},a.prototype.getEndOffSideOffsetPoints=function(l,u,h,f){return l===E.ConnectionPointSide.Undefined?this.getScaleableAsideOffsetPoints(u,h,f,!0):this.isBeginEndOverlappedX()?this.getScaleableAsideOffsetPoints(u,h,f,!0,this.beginRect.center.x>this.endRect.center.x):[u.clone().offset(0,this.getScaleableOffsetY(u,h,!0))]},a.prototype.getAsideOffsetPoints=function(l,u,h,f,g,O){var I=[];return void 0!==h&&(void 0===O&&(O=u.x<l.x),I.push(O?l.clone().offset(-(l.x-h.x+g),f):l.clone().offset(h.right-l.x+g,f))),I.push(l.clone().offset(0,f)),I},a.prototype.getScaleableAsideOffsetPoints=function(l,u,h,f,g){var O=this.getScaleableOffsetY(l,u,f),I=this.getScaleableOffsetX(l,u,f);return this.getAsideOffsetPoints(l,u,h,O,I,g)},a.prototype.getScaleableOffsetX=function(l,u,h){var f;return this.beginRect&&this.endRect&&!h&&!this.isBeginEndOverlappedX()&&(f=u.x<l.x?this.beginRect.x-this.endRect.right:this.endRect.x-this.beginRect.right)<2*this.getMinOffset()?f/2:this.getMinOffset()},a.prototype.getScaleableOffsetY=function(l,u,h){if(this.beginRect&&this.endRect){var f=h?this.beginRect.y-l.y:this.endRect.y-l.y;if(f>0&&f<2*this.getMinOffset())return f/2}return this.getMinOffset()},a.prototype.isOnSidePoint=function(l,u){return u.y>l.y},a.prototype.isDirectConnectionAllowed=function(l,u,h){return l===E.ConnectionPointSide.North||l===E.ConnectionPointSide.Undefined},a.prototype.getDirectConnectionPoints=function(l,u){var h=l.y+(u.y-l.y)/2;return[new p.ConnectorRenderPoint(l.x,h),new p.ConnectorRenderPoint(u.x,h)]},a}(y.ConnectorPointsOrthogonalSideCalculatorBase);_.ConnectorPointsOrthogonalSouthSideCalculator=d},1686:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalUndefinedSideCalculator=void 0;var E=x(1816),y=x(4717),p=function(d){function s(a){return d.call(this,a)||this}return b(s,d),s.prototype.getCorrectOriginPoint=function(a,l){return a},s.prototype.getSameShapeOffsetPoints=function(a,l,u,h){return[]},s.prototype.getOverlappedPointsOffsetPoints=function(a,l,u,h){return[]},s.prototype.getBeginOverlappedShapeOffsetPoints=function(a,l,u,h){return[]},s.prototype.getEndOverlappedShapeOffsetPoints=function(a,l,u,h){return[]},s.prototype.getBeginOnSideOffsetPoints=function(a,l,u,h){return[]},s.prototype.getEndOnSideOffsetPoints=function(a,l,u,h){return[]},s.prototype.getBeginOffSideOffsetPoints=function(a,l,u,h){return[]},s.prototype.getEndOffSideOffsetPoints=function(a,l,u,h){return[]},s.prototype.isOnSidePoint=function(a,l){return!0},s.prototype.isDirectConnectionAllowed=function(a,l,u){var h=this.getSideCalculator(l,u);return void 0===h||h.isDirectConnectionAllowed(a,l,u)},s.prototype.getDirectConnectionPoints=function(a,l){var u=Math.abs(l.x-a.x),h=Math.abs(l.y-a.y);if(u>h){var f=Math.min(a.x,l.x)+u/2;return[new y.ConnectorRenderPoint(f,a.y),new y.ConnectorRenderPoint(f,l.y)]}var g=Math.min(a.y,l.y)+h/2;return[new y.ConnectorRenderPoint(a.x,g),new y.ConnectorRenderPoint(l.x,g)]},s}(E.ConnectorPointsOrthogonalSideCalculatorBase);_.ConnectorPointsOrthogonalUndefinedSideCalculator=p},7369:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorPointsOrthogonalWestSideCalculator=void 0;var E=x(3742),y=x(1816),p=x(4717),d=function(s){function a(l){return s.call(this,l)||this}return b(a,s),a.prototype.getCorrectOriginPoint=function(l,u){return l.x>u.x&&(l=l.clone().offset(u.x-l.x,0)),l},a.prototype.getSameShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.North:case E.ConnectionPointSide.South:case E.ConnectionPointSide.West:return[u.clone().offset(-this.getMinOffset(),0)];case E.ConnectionPointSide.East:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset())}},a.prototype.getOverlappedPointsOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:return[u.clone().offset(this.getMinOffset(),0)];case E.ConnectionPointSide.West:return[u.clone().offset(-this.getMinOffset(),0)]}return[]},a.prototype.getBeginOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.North:return u.x>h.x?u.y<h.y?[]:[u.clone().offset(-this.getMinOffset(),0)]:u.x<this.endRect.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):[u.clone().offset(-this.getMinOffset(),0)];case E.ConnectionPointSide.South:return u.x>h.x?u.y>h.y?[]:[u.clone().offset(-this.getMinOffset(),0)]:u.x<this.endRect.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):[u.clone().offset(-this.getMinOffset(),0)];case E.ConnectionPointSide.West:return[u.clone().offset(-this.getMinOffset(),0)];case E.ConnectionPointSide.East:return this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),u.y<h.y)}},a.prototype.getEndOverlappedShapeOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.East:var g=-this.getMinOffset();return this.beginRect.x<u.x&&(g-=u.x-this.beginRect.x),[u.clone().offset(g,0)];case E.ConnectionPointSide.West:return[u.clone().offset(-this.getMinOffset(),0)];case E.ConnectionPointSide.North:return h.x>u.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!0):u.y>h.y?[u.clone().offset(-this.getMinOffset(),0)]:[];case E.ConnectionPointSide.South:return h.x>u.x?this.getAsideOffsetPoints(u,h,f,this.getMinOffset(),this.getMinOffset(),!1):u.y<h.y?[u.clone().offset(-this.getMinOffset(),0)]:[]}},a.prototype.getBeginOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(-this.getScaleableOffsetX(u,!1),0)]},a.prototype.getEndOnSideOffsetPoints=function(l,u,h,f){return[u.clone().offset(-this.getScaleableOffsetX(u,!0),0)]},a.prototype.getBeginOffSideOffsetPoints=function(l,u,h,f){switch(l){case E.ConnectionPointSide.South:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!1);break;case E.ConnectionPointSide.North:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1,!0);break;case E.ConnectionPointSide.West:if(this.isBeginEndOverlappedY())return this.getScaleableAsideOffsetPoints(u,h,f,!1);break;case E.ConnectionPointSide.Undefined:case E.ConnectionPointSide.East:return this.getScaleableAsideOffsetPoints(u,h,f,!1)}return[u.clone().offset(-this.getScaleableOffsetX(u,!1),0)]},a.prototype.getEndOffSideOffsetPoints=function(l,u,h,f){return l===E.ConnectionPointSide.Undefined?this.getScaleableAsideOffsetPoints(u,h,f,!0):this.isBeginEndOverlappedY()?this.getScaleableAsideOffsetPoints(u,h,f,!0,this.beginRect.center.y>this.endRect.center.y):[u.clone().offset(-this.getScaleableOffsetX(u,!0),0)]},a.prototype.getAsideOffsetPoints=function(l,u,h,f,g,O){var I=[];return void 0!==h&&(void 0===O&&(O=u.y<l.y),I.push(O?l.clone().offset(-f,-(l.y-h.y+g)):l.clone().offset(-f,h.bottom-l.y+g))),I.push(l.clone().offset(-f,0)),I},a.prototype.getScaleableAsideOffsetPoints=function(l,u,h,f,g){var O=this.getScaleableOffsetX(l,f),I=this.getScaleableOffsetY(l,u,f);return this.getAsideOffsetPoints(l,u,h,O,I,g)},a.prototype.getScaleableOffsetX=function(l,u){if(this.beginRect&&this.endRect){var h=u?l.x-this.beginRect.right:l.x-this.endRect.right;if(h>0&&h<2*this.getMinOffset())return h/2}return this.getMinOffset()},a.prototype.getScaleableOffsetY=function(l,u,h){var f;return this.beginRect&&this.endRect&&!h&&!this.isBeginEndOverlappedY()&&(f=u.y<l.y?this.beginRect.y-this.endRect.bottom:this.endRect.y-this.beginRect.bottom)<2*this.getMinOffset()?f/2:this.getMinOffset()},a.prototype.isOnSidePoint=function(l,u){return u.x<l.x},a.prototype.isDirectConnectionAllowed=function(l,u,h){return l===E.ConnectionPointSide.East||l===E.ConnectionPointSide.Undefined},a.prototype.getDirectConnectionPoints=function(l,u){var h=u.x+(l.x-u.x)/2;return[new p.ConnectorRenderPoint(h,l.y),new p.ConnectorRenderPoint(h,u.y)]},a}(y.ConnectorPointsOrthogonalSideCalculatorBase);_.ConnectorPointsOrthogonalWestSideCalculator=d},7959:function(J,_,x){var m,b=this&&this.__extends||(m=function(j,U){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,q){K.__proto__=q}||function(K,q){for(var Y in q)q.hasOwnProperty(Y)&&(K[Y]=q[Y])})(j,U)},function(j,U){function K(){this.constructor=j}m(j,U),j.prototype=null===U?Object.create(U):(K.prototype=U.prototype,new K)});Object.defineProperty(_,"__esModule",{value:!0}),_.Connector=_.CONNECTOR_DEFAULT_TEXT_POSITION=_.ConnectorPosition=void 0;var E,j,y=x(9291),p=x(8011),d=x(1335),s=x(6353),a=x(7716),l=x(7185),u=x(6031),h=x(4246),f=x(7724),g=x(9416),O=x(3500),I=x(240),D=x(8675),C=x(3742),w=x(4867),P=x(5800),k=x(2342),A=x(5454),R=x(4612),M=x(4351),L=x(1510);(j=E=_.ConnectorPosition||(_.ConnectorPosition={}))[j.Begin=0]="Begin",j[j.End=1]="End",_.CONNECTOR_DEFAULT_TEXT_POSITION=.5;var H=function(j){function U(K){var q=j.call(this)||this;if(q.beginConnectionPointIndex=-1,q.endConnectionPointIndex=-1,q.properties=new R.ConnectorProperties,q.points=K.map(function(Y){return Y.clone()}),K.length<2)throw Error("Points count should be greater than 1");return q.texts=new M.ConnectorTexts,q}return b(U,j),Object.defineProperty(U.prototype,"rectangle",{get:function(){return D.GeometryUtils.createRectagle(this.getRenderPoints(!0))},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"skippedRenderPoints",{get:function(){return this.renderPoints?this.renderPoints.filter(function(K){return K.skipped}):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"shouldChangeRenderPoints",{get:function(){return void 0!==this.renderPoints&&void 0!==this.routingStrategy},enumerable:!1,configurable:!0}),U.prototype.assign=function(K){j.prototype.assign.call(this,K),K.beginItem=this.beginItem,K.beginConnectionPointIndex=this.beginConnectionPointIndex,K.endItem=this.endItem,K.endConnectionPointIndex=this.endConnectionPointIndex,K.properties=this.properties.clone(),K.texts=this.texts.clone(),void 0!==this.routingStrategy&&(K.routingStrategy=this.routingStrategy.clone()),void 0!==this.renderPoints&&(K.renderPoints=this.renderPoints.map(function(q){return q.clone()})),void 0!==this.renderPointsWithoutSkipped&&(K.renderPointsWithoutSkipped=this.renderPointsWithoutSkipped.map(function(q){return q.clone()})),void 0!==this.actualRoutingMode&&(K.actualRoutingMode=this.actualRoutingMode),void 0!==this.lockCreateRenderPoints&&(K.lockCreateRenderPoints=this.lockCreateRenderPoints),void 0!==this.shouldInvalidateRenderPoints&&(K.shouldInvalidateRenderPoints=this.shouldInvalidateRenderPoints)},U.prototype.clone=function(){var K=new U(this.points);return this.assign(K),K},U.prototype.getTextCount=function(){return this.texts.count()},U.prototype.getText=function(K){void 0===K&&(K=_.CONNECTOR_DEFAULT_TEXT_POSITION);var q=this.texts.get(K);return q?q.value:""},U.prototype.setText=function(K,q){void 0===q&&(q=_.CONNECTOR_DEFAULT_TEXT_POSITION),K&&""!==K?this.texts.set(q,new M.ConnectorText(q,K)):this.texts.remove(q)},U.prototype.getTextPoint=function(K){var q=this.getRenderPoints();return D.GeometryUtils.getPathPointByPosition(q,K)[0]},U.prototype.getTextPositionByPoint=function(K){var q=this.getRenderPoints(),Y=D.GeometryUtils.getPathLength(q),W=D.GeometryUtils.getPathPositionByPoint(q,K),z=y.UnitConverter.pointsToTwips(parseInt(this.styleText["font-size"]));return z>W*Y?z/Y:z>Y-W*Y?(Y-z)/Y:W},U.prototype.getTextRectangle=function(K){return p.Rectangle.fromGeometry(this.getTextPoint(K),new s.Size(0,0))},U.prototype.changeRoutingStrategy=function(K){this.routingStrategy=K,this.invalidateRenderPoints()},U.prototype.clearRoutingStrategy=function(){delete this.routingStrategy,delete this.renderPoints,delete this.renderPointsWithoutSkipped,delete this.lockCreateRenderPoints,delete this.actualRoutingMode,delete this.shouldInvalidateRenderPoints,this.invalidateRenderPoints()},U.prototype.getCustomRenderPoints=function(K){void 0===K&&(K=!1);var q=this.getRenderPoints(K),Y=[];return q.forEach(function(W,z){z>0&&z<q.length-1&&Y.push(W)}),Y},U.prototype.getRenderPoints=function(K){if(void 0===K&&(K=!1),(void 0===this.shouldInvalidateRenderPoints||this.shouldInvalidateRenderPoints)&&(this.shouldInvalidateRenderPoints=!1,this.routingStrategy&&this.lockCreateRenderPoints||this.changeRenderPoints(this.getCalculator().getPoints()),this.routingStrategy&&!this.lockCreateRenderPoints&&this.actualRoutingMode!==I.ConnectorRoutingMode.None&&this.points&&this.renderPoints)&&!this.points[0].equals(this.points[this.points.length-1])){var W=this.routingStrategy.createRenderPoints(this.points,this.renderPoints,this.beginItem,this.endItem,this.beginConnectionPointIndex,this.endConnectionPointIndex,w.ModelUtils.getConnectorContainer(this));W?(this.changeRenderPoints(W),this.actualRoutingMode=I.ConnectorRoutingMode.AllShapesOnly):this.actualRoutingMode=I.ConnectorRoutingMode.None}return K?this.renderPoints:this.renderPointsWithoutSkipped},U.prototype.tryCreateRenderPointsContext=function(K){return K||this.shouldChangeRenderPoints?new L.ConnectorRenderPointsContext(this.renderPoints.map(function(q){return q.clone()}),this.lockCreateRenderPoints,this.actualRoutingMode):void 0},U.prototype.updatePointsOnPageResize=function(K,q){this.points=this.points.map(function(Y){return Y.clone().offset(K,q)}),this.renderPoints&&this.changeRenderPoints(this.renderPoints.map(function(Y){var W=Y.clone().offset(K,q);return W.pointIndex=Y.pointIndex,W.skipped=Y.skipped,W}))},U.prototype.addPoint=function(K,q){this.points.splice(K,0,q)},U.prototype.deletePoint=function(K){this.points.splice(K,1)},U.prototype.movePoint=function(K,q){this.points[K]=q},U.prototype.onAddPoint=function(K,q){this.shouldChangeRenderPoints?this.replaceRenderPointsCore(this.routingStrategy.onAddPoint(this.points,K,q,this.renderPoints),!0,I.ConnectorRoutingMode.AllShapesOnly):this.invalidateRenderPoints()},U.prototype.onDeletePoint=function(K){this.shouldChangeRenderPoints?this.replaceRenderPointsCore(this.routingStrategy.onDeletePoint(this.points,K,this.renderPoints),this.points.length>2,I.ConnectorRoutingMode.AllShapesOnly):this.invalidateRenderPoints()},U.prototype.onMovePoint=function(K,q){this.shouldChangeRenderPoints?(0!==K&&K!==this.points.length-1||(this.lockCreateRenderPoints=!1),this.replaceRenderPointsCore(this.routingStrategy.onMovePoint(this.points,K,q,this.renderPoints),this.lockCreateRenderPoints,I.ConnectorRoutingMode.AllShapesOnly)):this.invalidateRenderPoints()},U.prototype.onMovePoints=function(K,q,Y){this.shouldChangeRenderPoints?(0!==K&&q!==this.points.length-1||(this.lockCreateRenderPoints=!1),this.replaceRenderPointsCore(this.routingStrategy.onMovePoints(this.points,K,q,Y,this.renderPoints),this.lockCreateRenderPoints,I.ConnectorRoutingMode.AllShapesOnly)):this.invalidateRenderPoints()},U.prototype.replaceRenderPoints=function(K,q){void 0!==K?(this.replaceRenderPointsCore(K.renderPoints,K.lockCreateRenderPoints,K.actualRoutingMode),void 0!==q&&(this.shouldInvalidateRenderPoints=q)):this.invalidateRenderPoints()},U.prototype.clearRenderPoints=function(){this.changeRenderPoints(void 0),this.lockCreateRenderPoints=!1,this.actualRoutingMode=void 0,this.invalidateRenderPoints()},U.prototype.replaceRenderPointsCore=function(K,q,Y){this.changeRenderPoints(K),this.lockCreateRenderPoints=q,this.actualRoutingMode=Y,this.invalidateRenderPoints()},U.prototype.changeRenderPoints=function(K){this.renderPoints=K,this.renderPointsWithoutSkipped=K?this.renderPoints.filter(function(q){return!q.skipped}):void 0},U.prototype.getCalculator=function(){return this.properties.lineOption===R.ConnectorLineOption.Straight?new P.ConnectorPointsCalculator(this):new k.ConnectorPointsOrthogonalCalculator(this)},U.prototype.invalidateRenderPoints=function(){this.shouldInvalidateRenderPoints=!0},U.prototype.createPrimitives=function(K){var q=[],Y=this.getRenderPoints(),W=new f.PathPrimitive(Y.map(function(z,Z){return 0===Z?new f.PathPrimitiveMoveToCommand(z.x,z.y):new f.PathPrimitiveLineToCommand(z.x,z.y)}),this.style);return q.push(W),(q=q.concat(this.createLineEndingPrimitives(Y,W))).concat(this.createTextPrimitives(K))},U.prototype.createLineEndingPrimitives=function(K,q){var Y=[];return K.length>1&&[{strategy:this.createLineEndingStrategy(this.properties.startLineEnding),point1:K[0],point2:K[1]},{strategy:this.createLineEndingStrategy(this.properties.endLineEnding),point1:K[K.length-1],point2:K[K.length-2]}].forEach(function(W){var z=W.strategy;if(z.hasCommands()){var Z=q;z.needCreateSeparatePrimitive()&&Y.push(Z=z.createPrimitive()),Z.commands=Z.commands.concat(z.createCommands(W.point1,W.point2))}}),Y},U.prototype.createLineEndingStrategy=function(K){switch(K){case R.ConnectorLineEnding.None:return new A.ConnectorLineEndingNoneStrategy(this.style);case R.ConnectorLineEnding.Arrow:return new A.ConnectorLineEndingArrowStrategy(this.style);case R.ConnectorLineEnding.OutlinedTriangle:return new A.ConnectorLineEndingOutlinedTriangleStrategy(this.style);case R.ConnectorLineEnding.FilledTriangle:return new A.ConnectorLineEndingFilledTriangleStrategy(this.style);default:return new A.ConnectorLineEndingStrategy(this.style)}},U.prototype.createSelectorPrimitives=function(){var K=[],q=this.getRenderPoints();return K.push(new f.PathPrimitive(q.map(function(Y,W){return 0===W?new f.PathPrimitiveMoveToCommand(Y.x,Y.y):new f.PathPrimitiveLineToCommand(Y.x,Y.y)}),null,"selector")),K},U.prototype.createTextPrimitives=function(K){var q=this;if(!this.enableText)return[];var Y=[];return this.texts.forEach(function(W){var z=q.getText(W.position);if(z&&""!==z){var Z=q.getTextPoint(W.position);Y=Y.concat([new g.TextPrimitive(Z.x,Z.y,z,h.TextOwner.Connector,void 0,void 0,void 0,q.styleText,!0,null,a.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+K,void 0,function(se){O.RenderUtils.setElementEventData(se,u.MouseEventElementType.ConnectorText,q.key,W.position)})])}}),Y},U.prototype.getExtremeItem=function(K){return K===E.Begin?this.beginItem:K===E.End?this.endItem:null},U.prototype.getExtremeConnectionPointIndex=function(K){return K===E.Begin?this.beginConnectionPointIndex:K===E.End?this.endConnectionPointIndex:-1},U.prototype.getMinX=function(){return this.getRenderPoints().map(function(K){return K.x}).reduce(function(K,q){return Math.min(K,q)},Number.MAX_VALUE)},U.prototype.getMinY=function(){return this.getRenderPoints().map(function(K){return K.y}).reduce(function(K,q){return Math.min(K,q)},Number.MAX_VALUE)},U.prototype.getConnectionPoints=function(){return[]},U.prototype.getConnectionPointSide=function(K,q){return C.ConnectionPointSide.Undefined},U.prototype.getSegments=function(){var K=[],q=this.getRenderPoints();return q.forEach(function(Y,W){W>0&&K.push(new d.Segment(q[W-1],Y))}),K},U.prototype.intersectedByRect=function(K){return this.getSegments().some(function(q){return q.isIntersectedByRect(K)})},U.prototype.toNative=function(K){var q=new l.NativeConnector(this.key,this.dataKey);return q.fromKey=this.beginItem&&this.beginItem.dataKey,q.toKey=this.endItem&&this.endItem.dataKey,q.texts=this.texts.map(function(Y){return Y}).sort(function(Y,W){return Y.position-W.position}).map(function(Y){return Y.value}),q.fromId=this.beginItem&&this.beginItem.key,q.fromPointIndex=this.beginConnectionPointIndex,q.toId=this.endItem&&this.endItem.key,q.toPointIndex=this.endConnectionPointIndex,q.points=this.points.map(function(Y){return Y.clone()}),q.applyUnits(K),q},U.minOffset=y.UnitConverter.pixelsToTwips(24),U.minTextHeight=y.UnitConverter.pixelsToTwips(12),U}(C.DiagramItem);_.Connector=H},5454:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorLineEndingFilledTriangleStrategy=_.ConnectorLineEndingOutlinedTriangleStrategy=_.ConnectorLineEndingArrowStrategy=_.ConnectorLineEndingNoneStrategy=_.ConnectorLineEndingStrategy=void 0;var E=x(8675),y=x(7724),p=function(){function u(h){this.style=h}return u.prototype.hasCommands=function(){return!0},u.prototype.needCreateSeparatePrimitive=function(){return!1},u.prototype.createPrimitive=function(){return new y.PathPrimitive([],this.getStyle(),this.getCssClass())},u.prototype.createCommands=function(h,f){return[]},u.prototype.getStyle=function(){var h=this.style.clone();return h.resetStrokeDashArray(),h},u.prototype.getCssClass=function(){},u}();_.ConnectorLineEndingStrategy=p;var d=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),h.prototype.hasCommands=function(){return!1},h}(p);_.ConnectorLineEndingNoneStrategy=d;var s=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"arrowHeight",{get:function(){return 6*this.style.strokeWidth},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"arrowWidth",{get:function(){return 2*this.style.strokeWidth},enumerable:!1,configurable:!0}),h.prototype.needCreateSeparatePrimitive=function(){return!this.style.isDefaultStrokeDashArray()},h.prototype.createCommands=function(f,g){var O=this.getArrowPoints(f,g),I=[new y.PathPrimitiveMoveToCommand(O.point1.x,O.point1.y),new y.PathPrimitiveLineToCommand(f.x,f.y),new y.PathPrimitiveLineToCommand(O.point2.x,O.point2.y)];return this.style.isDefaultStrokeDashArray()||(I=I.concat([new y.PathPrimitiveMoveToCommand(f.x,f.y),new y.PathPrimitiveLineToCommand(O.point3.x,O.point3.y)])),I},h.prototype.getArrowPoints=function(f,g){var O,I=this.arrowHeight;return f.x===g.x&&(O=Math.abs(f.y-g.y))<I&&(I=O),f.y===g.y&&(O=Math.abs(f.x-g.x))<I&&(I=O),E.GeometryUtils.getArrowPoints(f,g,I,this.arrowWidth)},h}(p);_.ConnectorLineEndingArrowStrategy=s;var a=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),h.prototype.needCreateSeparatePrimitive=function(){return!0},h.prototype.createCommands=function(f,g){var O=this.getArrowPoints(f,g);return[new y.PathPrimitiveMoveToCommand(O.point1.x,O.point1.y),new y.PathPrimitiveLineToCommand(f.x,f.y),new y.PathPrimitiveLineToCommand(O.point2.x,O.point2.y),new y.PathPrimitiveClosePathCommand]},h.prototype.getCssClass=function(){return"outlined-line-ending"},h}(s);_.ConnectorLineEndingOutlinedTriangleStrategy=a;var l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),h.prototype.getStyle=function(){var f=u.prototype.getStyle.call(this);return f.fill=f.stroke,f},h.prototype.getCssClass=function(){return"filled-line-ending"},h}(a);_.ConnectorLineEndingFilledTriangleStrategy=l},4612:(J,_)=>{var x,m,E;Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorProperties=_.DEFAULT_CONNECTOR_ENDLINEENDING=_.DEFAULT_CONNECTOR_STARTLINEENDING=_.DEFAULT_CONNECTOR_LINEOPTION=_.ConnectorLineEnding=_.ConnectorLineOption=void 0,(E=x=_.ConnectorLineOption||(_.ConnectorLineOption={}))[E.Straight=0]="Straight",E[E.Orthogonal=1]="Orthogonal",function(E){E[E.None=0]="None",E[E.Arrow=1]="Arrow",E[E.OutlinedTriangle=2]="OutlinedTriangle",E[E.FilledTriangle=3]="FilledTriangle"}(m=_.ConnectorLineEnding||(_.ConnectorLineEnding={})),_.DEFAULT_CONNECTOR_LINEOPTION=x.Orthogonal,_.DEFAULT_CONNECTOR_STARTLINEENDING=m.None,_.DEFAULT_CONNECTOR_ENDLINEENDING=m.Arrow;var b=function(){function E(){this.lineOption=_.DEFAULT_CONNECTOR_LINEOPTION,this.startLineEnding=_.DEFAULT_CONNECTOR_STARTLINEENDING,this.endLineEnding=_.DEFAULT_CONNECTOR_ENDLINEENDING}return E.prototype.clone=function(){var y=new E;return y.lineOption=this.lineOption,y.startLineEnding=this.startLineEnding,y.endLineEnding=this.endLineEnding,y},E.prototype.forEach=function(y){for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&y(p)},E.prototype.toObject=function(){var y={},p=!1;return this.lineOption!==_.DEFAULT_CONNECTOR_LINEOPTION&&(y.lineOption=this.lineOption,p=!0),this.startLineEnding!==_.DEFAULT_CONNECTOR_STARTLINEENDING&&(y.startLineEnding=this.startLineEnding,p=!0),this.endLineEnding!==_.DEFAULT_CONNECTOR_ENDLINEENDING&&(y.endLineEnding=this.endLineEnding,p=!0),p?y:null},E.prototype.fromObject=function(y){"number"==typeof y.lineOption&&(this.lineOption=y.lineOption),"number"==typeof y.startLineEnding&&(this.startLineEnding=y.startLineEnding),"number"==typeof y.endLineEnding&&(this.endLineEnding=y.endLineEnding)},E}();_.ConnectorProperties=b},4717:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorRenderPoint=void 0;var E=function(y){function p(d,s,a,l){void 0===a&&(a=-1),void 0===l&&(l=!1);var u=y.call(this,d,s)||this;return u.pointIndex=a,u.skipped=l,u}return b(p,y),p.prototype.offset=function(d,s){return y.prototype.offset.call(this,d,s),this.pointIndex=-1,this.skipped=!1,this},p.prototype.multiply=function(d,s){return y.prototype.multiply.call(this,d,s),this.pointIndex=-1,this.skipped=!1,this},p.prototype.clone=function(){return new p(this.x,this.y,this.pointIndex,this.skipped)},p.equal=function(d,s){return d.equals(s)&&d.pointIndex===s.pointIndex&&d.skipped===s.skipped},p.prototype.toObject=function(){return{x:this.x,y:this.y,pointIndex:this.pointIndex,skipped:this.skipped}},p.fromObject=function(d){return new p(d.x,d.y,d.pointIndex,d.skipped)},p}(x(8900).Point);_.ConnectorRenderPoint=E},4351:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorTexts=_.ConnectorText=void 0;var x=function(b,E){this.position=b,this.value=E};_.ConnectorText=x;var m=function(){function b(){this.items={}}return b.prototype.get=function(E){return this.items[E]},b.prototype.set=function(E,y){this.items[E]=y},b.prototype.remove=function(E){delete this.items[E]},b.prototype.map=function(E){var y=[];return this.forEach(function(p){return y.push(E(p))}),y},b.prototype.forEach=function(E){for(var y in this.items)Object.prototype.hasOwnProperty.call(this.items,y)&&E(this.items[y])},b.prototype.count=function(){return Object.keys(this.items).length},b.prototype.clone=function(){var E=new b;return this.forEach(function(y){E.set(y.position,new x(y.position,y.value))}),E},b.prototype.toObject=function(){var E={},y=!1;return this.forEach(function(p){E[p.position]=p.value,y=!0}),y?E:null},b.prototype.fromObject=function(E){for(var y in E)if(Object.prototype.hasOwnProperty.call(E,y)){var p=parseFloat(y);isNaN(p)||"string"!=typeof E[y]||this.set(p,new x(p,E[y]))}},b}();_.ConnectorTexts=m},3975:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AStarCalculator=void 0;var x=function(){function m(){}return m.calculate=function(b){if(b)for(var E=this.start(b);E;)E=E(b)},m.start=function(b){return b.start(),b.shouldStartContinue?m.startContinue:m.finishWithPath},m.startContinue=function(b){return b.startContinue(),b.shouldFinish?m.finishWithPath:m.endContinue},m.endContinue=function(b){return b.endContinue(),b.shouldStartContinue?m.startContinue:m.finishWithoutPath},m.finishWithPath=function(b){b.finishWithPath()},m.finishWithoutPath=function(b){b.finishWithoutPath()},m}();_.AStarCalculator=x},2180:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.AStarContext=_.AStarContextBase=void 0;var E=x(3225),y=x(1039),p=x(684),d=x(1335),s=x(5074),a=x(8675),l=function(){function h(f,g,O){this.startPosition=f,this.targetPosition=g,this.maxStepsCount=O,this.prohibitedPoints={}}return Object.defineProperty(h.prototype,"shouldStartContinue",{get:function(){return this.updatableSet.count>0&&this.stepsCount<this.maxStepsCount},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"shouldFinish",{get:function(){return this.currentNode.position.equals(this.targetPosition)},enumerable:!1,configurable:!0}),h.prototype.start=function(){this.generalSet=new E.SortedQueues(function(g){return g.key}),this.updatableSet=new y.UniqueAStarNodePositions;var f=new p.AStarNode(this.startPosition,this.getDistance(this.startPosition,this.targetPosition));this.currentNode=f,this.generalSet.enqueue(f),this.updatableSet.add(f.position,f),this.stepsCount=0,this.openNode=void 0},h.prototype.startContinue=function(){this.currentNode=this.generalSet.dequeueMin()},h.prototype.endContinue=function(){var f=this,g=this.currentNode.position;this.updatableSet.remove(g),this.addProhibitedPoint(g),this.getNeighborPoints(g).forEach(function(O){var I=f.getPenalty(f.currentNode,O),D=f.updatableSet.getNode(O);if(void 0===D)(D=new p.AStarNode(O,f.getDistance(O,f.targetPosition))).parent=f.currentNode,D.penalty=I,f.generalSet.enqueue(D),f.updatableSet.add(O,D);else if(D.penalty>I){var C=f.generalSet;C.remove(D),D.parent=f.currentNode,D.penalty=I,C.enqueue(D)}f.openNode=D}),this.stepsCount++},h.prototype.finishWithPath=function(){this.path=this.currentNode.getPath()},h.prototype.finishWithoutPath=function(){this.path=[]},h}();_.AStarContextBase=l;var u=function(h){function f(g,O,I,D,C,w){var P=h.call(this,O,I,1e4)||this;return P.routingContext=g,P.startPosition=O,P.targetPosition=I,P.prohibitedSegments=D,P.grid=C,P.metrics=w,P}return b(f,h),f.prototype.addProhibitedPoint=function(g){this.prohibitedPoints[g.toString()]=g},f.prototype.getNeighborPoints=function(g){var O=this;return this.grid.getNeighborPoints(g).filter(function(I){return O.allowPoint(I)})},f.prototype.getDistance=function(g,O){return this.metrics.distance(g,O)},f.prototype.getPenalty=function(g,O){var I=g.parent,D=g.position,C=this.getTurnDirection(I?a.GeometryUtils.createAngle(I.position,D,O):0),w=this.getDistance(D,O),P=new d.Segment(D,O).center;return g.penalty+this.metrics.penalty(w,P,C,this.getIntersectedItems(P))},f.prototype.allowPoint=function(g){return void 0===this.prohibitedPoints[g.toString()]&&(!this.prohibitedSegments||this.prohibitedSegments.allowPoint(g))},f.prototype.getTurnDirection=function(g){return s.RightAngleConnectorRoutingMathOperations.getTurnDirection(g)},f.prototype.getIntersectedItems=function(g){var O=this,I=this.routingContext.shapeMargins;return this.routingContext.getIntersectedItems(g,function(D,C){return O.hasIntersectedItem(D,C,I)})},f.prototype.hasIntersectedItem=function(g,O,I){return!(!this.isIntersectedWithExtendedRectangle(g,O,I)||!this.hasOneShapeConnection(O)&&this.itemContainsConnectionPoints(O))},f.prototype.isIntersectedWithExtendedRectangle=function(g,O,I){return O.rectangle.clone().inflate(I).containsPoint(g)},f.prototype.itemContainsConnectionPoints=function(g){var O=g.rectangle;return O.containsPoint(this.routingContext.beginPoint)&&O.containsPoint(this.routingContext.endPoint)},f.prototype.hasOneShapeConnection=function(g){var O=g.getConnectionPoints();return this.isConnectionPoint(O,this.routingContext.beginPoint)&&this.isConnectionPoint(O,this.routingContext.endPoint)},f.prototype.isConnectionPoint=function(g,O){return g.filter(function(I){return I.equals(O)}).length>0},f}(l);_.AStarContext=u},9927:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.IntersectedShapeZone=_.AStarMetrics=_.IntersectedShapesMetrics=_.TurnDirectionMetrics=_.IntersectedShapeMetrics=_.RightAngleTurnDirection=void 0;var m,a,b=x(8900),E=x(5596);(a=m=_.RightAngleTurnDirection||(_.RightAngleTurnDirection={}))[a.Straight=0]="Straight",a[a.Left=1]="Left",a[a.Right=2]="Right",a[a.Backwards=3]="Backwards";var y=function(){function a(l,u){this.description=l,this.shapeMargin=u}return a.prototype.penalty=function(l,u,h,f){var g=f.rectangle;if(g.containsPoint(h))return l+this.description.shape*u;var O=this.createRelativeMarginPenalty(h,g,this.shapeMargin);return O>0?l+this.description.margin*O*u:l},a.prototype.createRelativeMarginPenalty=function(l,u,h){var f=this.isTopPosition(l,u,h),g=this.isLeftPosition(l,u,h),O=this.isBottomPosition(l,u,h),I=this.isRightPosition(l,u,h);if(f){if(g){var D=(P=u.clone().inflate(h)).createPosition(),C=u.createPosition(),w=E.Metrics.euclideanDistance(C,D);return 1-E.Metrics.euclideanDistance(C,l)/w}if(I){var P=u.clone().inflate(h),k=new b.Point(P.right,P.y),A=new b.Point(u.right,u.y),R=E.Metrics.euclideanDistance(A,k);return 1-E.Metrics.euclideanDistance(A,l)/R}return 1-(u.y-l.y)/h}if(O){if(g){P=u.clone().inflate(h);var M=new b.Point(P.x,P.bottom),L=new b.Point(u.x,u.bottom),H=E.Metrics.euclideanDistance(L,M);return 1-E.Metrics.euclideanDistance(L,l)/H}if(I){P=u.clone().inflate(h);var j=new b.Point(P.right,P.bottom),U=new b.Point(u.right,u.bottom),K=E.Metrics.euclideanDistance(U,j);return 1-E.Metrics.euclideanDistance(U,l)/K}return 1-(l.y-u.bottom)/h}return g?1-(u.x-l.x)/h:I?1-(l.x-u.right)/h:0},a.prototype.isTopPosition=function(l,u,h){return l.x>u.x-h&&l.x<u.right+h&&l.y>u.y-h&&l.y<u.y},a.prototype.isBottomPosition=function(l,u,h){return l.x>u.x-h&&l.x<u.right+h&&l.y>u.bottom&&l.y<u.bottom+h},a.prototype.isLeftPosition=function(l,u,h){return l.x>u.x-h&&l.x<u.x&&l.y>u.y-h&&l.y<u.bottom+h},a.prototype.isRightPosition=function(l,u,h){return l.x>u.right&&l.x<u.right+h&&l.y>u.y-h&&l.y<u.bottom+h},a}();_.IntersectedShapeMetrics=y;var p=function(){function a(l){this.description=l}return a.prototype.penalty=function(l,u){switch(u){case m.Backwards:return l*this.description.turnBack;case m.Left:return l*this.description.turnLeft;case m.Right:return l*this.description.turnRight}return l},a}();_.TurnDirectionMetrics=p;var d=function(){function a(l){this.shapeMetrics=l}return a.prototype.penalty=function(l,u,h,f){var g=this;if(!f||!f.length)return l;var O=l;return f.forEach(function(I){return O=g.shapeMetrics.penalty(O,u,h,I)}),O},a}();_.IntersectedShapesMetrics=d;var s=function(){function a(l,u){this.turnDirectionMetrics=l,this.shapesMetrics=u}return a.prototype.distance=function(l,u){return E.Metrics.manhattanDistance(l,u)},a.prototype.penalty=function(l,u,h,f){var g=l;return g=this.shapesMetrics.penalty(g,l,u,f),this.turnDirectionMetrics.penalty(g,h)},a}();_.AStarMetrics=s,function(a){a[a.None=0]="None",a[a.Shape=1]="Shape",a[a.Margin=2]="Margin"}(_.IntersectedShapeZone||(_.IntersectedShapeZone={}))},684:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AStarNode=void 0;var x=function(){function m(b,E){this.position=b,this.distance=E,this.penalty=0}return Object.defineProperty(m.prototype,"key",{get:function(){return this.distance+this.penalty},enumerable:!1,configurable:!0}),m.prototype.getPath=function(){for(var b=[],E=this;void 0!==E;)b.splice(0,0,E.position),E=E.parent;return b},m}();_.AStarNode=x},3225:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SortedQueues=void 0;var m=x(2400),b=function(){function E(y){this.getKey=y,this._itemsArrays={},this._sortedKeys=[]}return Object.defineProperty(E.prototype,"sortedKeys",{get:function(){return this._sortedKeys},enumerable:!1,configurable:!0}),E.prototype.getQueue=function(y){return this._itemsArrays[y]},E.prototype.enqueue=function(y){var p=this.getKey(y);void 0===this._itemsArrays[p]?(this._itemsArrays[p]=[y],this.addSortedKey(p)):this._itemsArrays[p].push(y)},E.prototype.remove=function(y){var p=this.getKey(y),d=this._itemsArrays[p];void 0!==d&&(d.length?d[0]===y?(d.shift(),d.length||this.removeCore(p)):this._itemsArrays[p]=d.filter(function(s){return s!==y}):this.removeCore(p))},E.prototype.dequeueMin=function(){if(this._sortedKeys.length){var y=this._sortedKeys[0],p=this._itemsArrays[y],d=p.shift();return p.length||this.removeCore(y),d}},E.prototype.removeCore=function(y){delete this._itemsArrays[y],this.removeSortedKey(y)},E.prototype.removeSortedKey=function(y){var p=m.SearchUtils.binaryIndexOf(this._sortedKeys,function(d){return d-y});p>=0&&this.sortedKeys.splice(p,1)},E.prototype.addSortedKey=function(y){var p=m.SearchUtils.binaryIndexOf(this._sortedKeys,function(d){return d-y});p<0&&this._sortedKeys.splice(-(p+1),0,y)},E}();_.SortedQueues=b},1039:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UniqueAStarNodePositions=void 0;var x=function(){function m(b){void 0===b&&(b=function(E){return E.toString()}),this.getKey=b,this.items={}}return Object.defineProperty(m.prototype,"count",{get:function(){return Object.keys(this.items).length},enumerable:!1,configurable:!0}),m.prototype.getNode=function(b){var E=this.items[this.getKey(b)];return void 0!==E?E.node:void 0},m.prototype.add=function(b,E){var y=this.getKey(b);void 0===this.items[y]&&(this.items[y]={position:b,node:E})},m.prototype.remove=function(b){var E=this.getKey(b);void 0!==this.items[E]&&delete this.items[E]},m}();_.UniqueAStarNodePositions=x},1768:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorProhibitedSegments=void 0;var x=function(){function m(){this.segments=[],this.exludedPoints={}}return m.prototype.addSegment=function(b){this.segments.push(b)},m.prototype.addExludedPoint=function(b){this.exludedPoints[b.toString()]=b},m.prototype.allowPoint=function(b){if(void 0===this.exludedPoints[b.toString()])for(var E=0;E<this.segments.length;E++)if(this.segments[E].containsPoint(b))return!1;return!0},m}();_.ConnectorProhibitedSegments=x},1510:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorRenderPointsContext=void 0;var m=x(4717),b=function(){function E(y,p,d){this.renderPoints=y,this.lockCreateRenderPoints=p,this.actualRoutingMode=d}return E.prototype.toObject=function(){return{actualRoutingMode:this.actualRoutingMode,lockCreateRenderPoints:this.lockCreateRenderPoints,renderPoints:this.renderPoints.map(function(y){return y.toObject()})}},E.fromObject=function(y){return new E(y.renderPoints.map(function(p){return m.ConnectorRenderPoint.fromObject(p)}),y.lockCreateRenderPoints,y.actualRoutingMode)},E}();_.ConnectorRenderPointsContext=b},2868:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorRenderSegment=void 0;var m=x(1335),b=x(1768),E=function(){function y(p,d,s,a){this.startInfo=p,this.endInfo=d,this.startPointIndex=s,this.previousCustomSegment=a}return Object.defineProperty(y.prototype,"startPathPoint",{get:function(){return this.startInfo instanceof m.Segment?this.startInfo.endPoint:this.startInfo},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endPathPoint",{get:function(){return this.endInfo instanceof m.Segment?this.endInfo.startPoint:this.endInfo},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"startPoint",{get:function(){return this.startInfo instanceof m.Segment?this.startInfo.startPoint:this.startInfo},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"endPoint",{get:function(){return this.endInfo instanceof m.Segment?this.endInfo.endPoint:this.endInfo},enumerable:!1,configurable:!0}),y.prototype.createGridPoints=function(){var p=[];return this.endInfo instanceof m.Segment?(p.push(this.endInfo.startPoint),p.push(this.endInfo.endPoint)):p.push(this.endInfo),p},y.prototype.createProhibitedSegments=function(){if(this.startInfo instanceof m.Segment){var p=this.createProhibitedSegmentsCore(this.startInfo);return this.endInfo instanceof m.Segment&&(p.addSegment(this.endInfo),p.addExludedPoint(this.endInfo.startPoint)),this.previousCustomSegment&&p.addSegment(this.previousCustomSegment),p}return this.endInfo instanceof m.Segment?((p=this.createProhibitedSegmentsCore(this.endInfo)).addExludedPoint(this.endInfo.startPoint),this.previousCustomSegment&&p.addSegment(this.previousCustomSegment),p):this.previousCustomSegment?this.createProhibitedSegmentsCore(this.previousCustomSegment):void 0},y.prototype.createProhibitedSegmentsCore=function(p){var d=new b.ConnectorProhibitedSegments;return d.addSegment(p),d},y}();_.ConnectorRenderSegment=E},5714:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorRoutingModel=_.ConnectorRoutingPenaltyDescription=void 0;var m=x(240),b=x(5503),E=x(7959),y=x(4612),p=x(3597),d=function(){this.shape=20,this.margin=2,this.turnBack=20,this.turnLeft=3.1,this.turnRight=3};_.ConnectorRoutingPenaltyDescription=d;var s=function(){function a(){this.connectorRoutingMode=m.ConnectorRoutingMode.AllShapesOnly,this.shapeMargins=E.Connector.minOffset,this.shouldReverseConnections=!0,this.shouldResizeConnections=!0,this.penaltyDescription=new d}return a.prototype.initialize=function(l){this.model=l},a.prototype.createStrategy=function(l){if(void 0!==this.model&&this.connectorRoutingMode!==m.ConnectorRoutingMode.None&&l===y.ConnectorLineOption.Orthogonal)return new p.RightAngleConnectorRoutingStrategy(this)},a.prototype.getItems=function(l,u){return this.getShapes(l,u)},a.prototype.notifyConnectorRoutingModeChanged=function(l){this.connectorRoutingMode=l},a.prototype.getShapes=function(l,u){return void 0===this.model||void 0===this.connectorRoutingMode||this.connectorRoutingMode===m.ConnectorRoutingMode.None?[]:this.connectorRoutingMode===m.ConnectorRoutingMode.AllShapesOnly?this.model.items.filter(function(h){return h instanceof b.Shape}):this.getConnectorShapes(l,u)},a.prototype.getConnectorShapes=function(l,u){var h=[];return l&&h.push(l),u&&l!==u&&h.push(u),h},a}();_.ConnectorRoutingModel=s},1254:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RoutingGrid=void 0;var m=x(2400),b=function(){function E(y,p,d){this.verticalGridLines=y,this.horizontalGridLines=p,this.createPoint=d}return E.create=function(y,p,d){var s=this,a=[],l=[],u={},h={};return p.forEach(function(f){s.addLine(f.x,a,u),s.addLine(f.right,a,u),s.addLine(f.y,l,h),s.addLine(f.bottom,l,h)}),y.forEach(function(f){s.addLine(f.x,a,u),s.addLine(f.y,l,h)}),a.sort(function(f,g){return f-g}),l.sort(function(f,g){return f-g}),new E(a,l,d)},E.addLine=function(y,p,d){d[y]||(p.push(y),d[y]=!0)},E.prototype.getNeighborPoints=function(y){var p=[];if(!(this.horizontalGridLines&&this.horizontalGridLines.length&&this.verticalGridLines&&this.verticalGridLines.length))return p;var d=m.SearchUtils.binaryIndexOf(this.verticalGridLines,function(a){return a-y.x});d<0?this.isValidArrayIndex(this.verticalGridLines,d=~d)&&p.push(this.createPoint(this.verticalGridLines[d],y.y)):this.isValidArrayIndex(this.verticalGridLines,d+1)&&p.push(this.createPoint(this.verticalGridLines[d+1],y.y)),this.isValidArrayIndex(this.verticalGridLines,d-1)&&p.push(this.createPoint(this.verticalGridLines[d-1],y.y));var s=m.SearchUtils.binaryIndexOf(this.horizontalGridLines,function(a){return a-y.y});return s<0?this.isValidArrayIndex(this.horizontalGridLines,s=~s)&&p.push(this.createPoint(y.x,this.horizontalGridLines[s])):this.isValidArrayIndex(this.horizontalGridLines,s+1)&&p.push(this.createPoint(y.x,this.horizontalGridLines[s+1])),this.isValidArrayIndex(this.horizontalGridLines,s-1)&&p.push(this.createPoint(y.x,this.horizontalGridLines[s-1])),p},E.prototype.isValidArrayIndex=function(y,p){return y&&p>=0&&p<y.length},E}();_.RoutingGrid=b},1794:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RightAngleConnectorRoutingContext=_.IntersectingItemsByPointsContext=_.CuttingItemsContext=void 0;var m=x(8900),b=x(1335),E=x(9716),y=x(3742),p=x(5074),d=x(2868),s=x(1254),a=x(4867),l=x(9927),u=x(2180),h=x(3975),f=x(8675),g=function(){function D(){this.cuttingItemKeys=[]}return Object.defineProperty(D.prototype,"isEmpty",{get:function(){return 0===this.cuttingItemKeys.length},enumerable:!1,configurable:!0}),D.prototype.registerShape=function(C,w,P){return!!f.GeometryUtils.areSegmentsCutRectangle(P,w)&&(this.cuttingItemKeys.push(C),!0)},D}();_.CuttingItemsContext=g;var O=function(){function D(){this.items={}}return D.prototype.getOrAddItems=function(C,w){if(C){var P=C.toString(),k=this.items[P];if(void 0!==k)return k.items;if(w){var A=w(C);return this.items[P]={point:C,items:A},A}}},D}();_.IntersectingItemsByPointsContext=O;var I=function(){function D(C,w,P,k,A,R,M){this.routingModel=C,this.points=w,this.supportRenderPoints=P,this.beginConnectionShape=k,this.endConnectionShape=A,this.beginConnectionSide=this.getConnectionSide(this.beginConnectionShape,R,this.beginPoint),this.endConnectionSide=this.getConnectionSide(this.endConnectionShape,M,this.endPoint),this.ignorableItemKeys={},this.cuttingShapesContext=new g,this.intersectedItemsByPointsContext=new O,this.isInvalidRenderSegments=!0}return Object.defineProperty(D.prototype,"shapeMargins",{get:function(){return this.routingModel.shapeMargins},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"beginPoint",{get:function(){return this.points[0]},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"endPoint",{get:function(){return this.points[this.points.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"hasIntersecting",{get:function(){return!this.cuttingShapesContext.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"shouldCreateRenderPoints",{get:function(){return this.isInvalidRenderSegments||!this.isSmallPath&&(this.hasIntersecting||this.isReversedStartConnection||this.isReversedEndConnection)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"beginPathPoint",{get:function(){return this.beginConnectionSegment instanceof b.Segment?this.beginConnectionSegment.startPoint:this.beginConnectionSegment},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"endPathPoint",{get:function(){return this.endConnectionSegment instanceof b.Segment?this.endConnectionSegment.endPoint:this.endConnectionSegment},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"isReversedStartConnection",{get:function(){if(!this.beginConnectionShape||this.beginConnectionSide===y.ConnectionPointSide.Undefined)return!1;var C=this.beginConnectionSegment;return!(C instanceof m.Point)&&this.isReversedConnectionSegment(this.supportSegments[0],C)},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"isReversedEndConnection",{get:function(){if(!this.endConnectionShape||this.endConnectionSide===y.ConnectionPointSide.Undefined)return!1;var C=this.endConnectionSegment;return!(C instanceof m.Point)&&this.isReversedConnectionSegment(this.supportSegments[this.supportSegments.length-1],C)},enumerable:!1,configurable:!0}),D.prototype.isReversedConnectionSegment=function(C,w){return E.Vector.scalarProduct(E.Vector.fromSegment(C),E.Vector.fromPoints(w.startPoint,w.endPoint))<=0},Object.defineProperty(D.prototype,"isSmallPath",{get:function(){var C=2*this.routingModel.shapeMargins;return Math.abs(this.beginPathPoint.x-this.endPathPoint.x)<C&&Math.abs(this.beginPathPoint.y-this.endPathPoint.y)<C},enumerable:!1,configurable:!0}),D.prototype.initialize=function(C){this.processContainers(C),this.processSupportSegments(),this.processIntersection(),this.processConnections(),this.processRenderSegments()},D.prototype.setup=function(){this.processRoutingGrid(),this.processRoutingMetrics()},D.prototype.createRoutedPoints=function(C,w,P){var R=this.createAStarContext(C instanceof m.Point?C:C.endPoint,w instanceof m.Point?w:w.startPoint,P);h.AStarCalculator.calculate(R);var M=R.path;return this.addConnectionRoutedPoints(M,C,w),p.RightAngleConnectorRoutingMathOperations.unionPoints(M),M},D.prototype.getIntersectedItems=function(C,w){var P=this;return this.intersectedItemsByPointsContext.getOrAddItems(C,function(k){return P.routingModel.getItems(P.beginConnectionShape,P.endConnectionShape).filter(function(A){return!P.isIgnorableItem(A)&&w(k,A)})})},D.prototype.validateRenderPoints=function(C){this.isInvalidRenderSegments&&(p.RightAngleConnectorRoutingMathOperations.unionPoints(C),a.ModelUtils.validateRenderPointIndexes(this.points,C,0)),a.ModelUtils.skipUnnecessaryRightAngleRenderPoints(C)},D.prototype.processContainers=function(C){if(C&&this.registerIgnorableShape(C),this.beginConnectionShape){var w=this.beginConnectionShape.container;w&&this.registerIgnorableShape(w)}if(this.endConnectionShape){var P=this.endConnectionShape.container;P&&this.registerIgnorableShape(P)}},D.prototype.processSupportSegments=function(){this.supportSegments=this.createSupportSegments()},D.prototype.processIntersection=function(){var C=this,w=this.routingModel.getItems(this.beginConnectionShape,this.endConnectionShape);w&&w.forEach(function(P){var k=P.key,A=P.rectangle;C.cuttingShapesContext.registerShape(k,A,C.supportSegments)?void 0!==C.ignorableItemKeys[k]&&delete C.ignorableItemKeys[k]:(!C.isConnectedByStart(P)&&A.containsPoint(C.beginPoint)||!C.isConnectedByEnd(P)&&A.containsPoint(C.endPoint))&&C.registerIgnorableShape(P)})},D.prototype.processConnections=function(){var C=!1,w=!1;this.beginConnectionShape!==this.endConnectionShape&&(C=this.shapeContainsOtherConnection(this.beginConnectionShape,this.endConnectionShape,this.endPoint),w=this.shapeContainsOtherConnection(this.endConnectionShape,this.beginConnectionShape,this.beginPoint),C&&this.registerIgnorableShape(this.beginConnectionShape),w&&this.registerIgnorableShape(this.endConnectionShape));var P=this.routingModel.shapeMargins;this.beginConnectionSegment=this.createBeginConnectionSegment(P,C),this.endConnectionSegment=this.createEndConnectionSegment(P,w)},D.prototype.processRenderSegments=function(){this.isInvalidRenderSegments=!1,this.renderSegments=this.createRenderSegments();for(var C=0;C<this.renderSegments.length-1;C++)if(this.renderSegments[C].endPoint.equals(this.renderSegments[C+1].startPoint))return void(this.isInvalidRenderSegments=!0)},D.prototype.createGridPoints=function(){var C=[];return this.renderSegments.forEach(function(w){return w.createGridPoints().forEach(function(P){return C.push(P)})}),C},D.prototype.processRoutingGrid=function(){this.routingGrid=this.createGrid()},D.prototype.processRoutingMetrics=function(){this.metrics=this.createAStarMetrics()},D.prototype.createAStarMetrics=function(){return new l.AStarMetrics(new l.TurnDirectionMetrics(this.routingModel.penaltyDescription),new l.IntersectedShapesMetrics(new l.IntersectedShapeMetrics(this.routingModel.penaltyDescription,this.routingModel.shapeMargins)))},D.prototype.createAStarContext=function(C,w,P){return new u.AStarContext(this,C,w,P,this.routingGrid,this.metrics)},D.prototype.addConnectionRoutedPoints=function(C,w,P){w instanceof b.Segment&&C.splice(0,0,w.startPoint),P instanceof b.Segment&&C.push(P.endPoint)},D.prototype.createSupportSegments=function(){var C=this;return this.supportRenderPoints.length<=1?[]:f.GeometryUtils.createSegments(this.supportRenderPoints).filter(function(w){return!C.isCustomSegment(w,C.supportRenderPoints[0],C.supportRenderPoints[C.supportRenderPoints.length-1])})},D.prototype.isCustomSegment=function(C,w,P){var k=C.startPoint;if(k.equals(w))return!1;var A=C.endPoint;return!A.equals(P)&&A.pointIndex-k.pointIndex==1},D.prototype.createRenderSegments=function(){var C=this,w=p.RightAngleConnectorRoutingMathOperations.createUnionSegments(this.supportSegments,function(k,A){return C.shouldCreateSegment(k,A)}),P=w.length-1;return w.map(function(k,A){return new d.ConnectorRenderSegment(A>0?new m.Point(k.startPoint.x,k.startPoint.y):C.beginConnectionSegment,A<P?new m.Point(k.endPoint.x,k.endPoint.y):C.endConnectionSegment,k.startPoint.pointIndex,C.createPreviousCustomSegment(k.startPoint))})},D.prototype.createPreviousCustomSegment=function(C){var w=C.pointIndex-1;return w>=0?new b.Segment(this.points[w].clone(),new m.Point(C.x,C.y)):void 0},D.prototype.shouldCreateSegment=function(C,w){return!C.equals(w)||w.pointIndex>0},D.prototype.isPathNormal=function(C){return C===y.ConnectionPointSide.Undefined||p.RightAngleConnectorRoutingMathOperations.isSegmentNormal(new b.Segment(this.beginPoint,this.endPoint),C===y.ConnectionPointSide.East||C===y.ConnectionPointSide.West)},D.prototype.registerIgnorableShape=function(C){this.ignorableItemKeys[C.key]=!0},D.prototype.isConnectedByStart=function(C){return this.beginConnectionShape&&this.beginConnectionShape.key===C.key&&this.beginConnectionSide!==y.ConnectionPointSide.Undefined},D.prototype.isConnectedByEnd=function(C){return this.endConnectionShape&&this.endConnectionShape.key===C.key&&this.endConnectionSide!==y.ConnectionPointSide.Undefined},D.prototype.getConnectionSide=function(C,w,P){return C?C.getConnectionPointSideByIndex(w,P):y.ConnectionPointSide.Undefined},D.prototype.shapeContainsOtherConnection=function(C,w,P){if(!C)return!1;var k=C.rectangle;return k.containsPoint(P)&&(!w||!w.rectangle.equals(k))},D.prototype.createBeginConnectionSegment=function(C,w){if(this.beginConnectionSide===y.ConnectionPointSide.Undefined)return this.createBeginConnectionSegmentCore(C);if(!w||!this.routingModel.shouldReverseConnections){var P=this.createBeginConnectionSegmentCore(C);if(P instanceof m.Point||!this.routingModel.shouldResizeConnections)return P;for(var k=P.startPoint,A=P.endPoint,R=C;this.hasIntersectedItemsByPoint(A,k,this.beginConnectionShape);)A=(P=this.createBeginConnectionSegmentCore(R/=2)).endPoint;return P}if(!this.endConnectionShape)return this.createBeginConnectionSegmentCore(-C);if(this.isPathNormal(this.endConnectionSide))return this.createBeginConnectionSegmentCore(-C);var M=this.createBeginConnectionSegmentCore(-2*C);return this.isEndConnectionRectanleLineIntersected(M,!1,!0)?this.createBeginConnectionSegmentCore(C):this.createBeginConnectionSegmentCore(-C)},D.prototype.hasIntersectedItemsByPoint=function(C,w,P){var k=this.getIntersectedItems(C,function(A,R){return R.rectangle.containsPoint(A)&&!R.rectangle.containsPoint(w)&&R.key!==P.key});return void 0!==k&&k.length>0},D.prototype.createEndConnectionSegment=function(C,w){if(this.endConnectionSide===y.ConnectionPointSide.Undefined)return this.createEndConnectionSegmentCore(C);if(!w||!this.routingModel.shouldReverseConnections){var P=this.createEndConnectionSegmentCore(C);if(P instanceof m.Point||!this.routingModel.shouldResizeConnections)return P;for(var k=P.endPoint,A=P.startPoint,R=C;this.hasIntersectedItemsByPoint(A,k,this.endConnectionShape);)A=(P=this.createEndConnectionSegmentCore(R/=2)).startPoint;return P}if(!this.beginConnectionShape)return this.createEndConnectionSegmentCore(-C);if(this.isPathNormal(this.beginConnectionSide))return this.createEndConnectionSegmentCore(-C);var M=this.createEndConnectionSegmentCore(-2*C);return this.isBeginConnectionRectanleLineIntersected(M,!0,!1)?this.createEndConnectionSegmentCore(C):this.createEndConnectionSegmentCore(-C)},D.prototype.createBeginConnectionSegmentCore=function(C){return p.RightAngleConnectorRoutingMathOperations.createBeginConnectionSegment(this.beginConnectionSide,this.beginPoint,C,function(w,P){return new m.Point(w,P)})},D.prototype.createEndConnectionSegmentCore=function(C){return p.RightAngleConnectorRoutingMathOperations.createEndConnectionSegment(this.endConnectionSide,this.endPoint,C,function(w,P){return new m.Point(w,P)})},D.prototype.isBeginConnectionRectanleLineIntersected=function(C,w,P){return p.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.beginConnectionShape.rectangle,C,this.beginConnectionSide,w,P,function(k,A){return new m.Point(k,A)})},D.prototype.isEndConnectionRectanleLineIntersected=function(C,w,P){return p.RightAngleConnectorRoutingMathOperations.isConnectionRectanleLineIntersected(this.endConnectionShape.rectangle,C,this.endConnectionSide,w,P,function(k,A){return new m.Point(k,A)})},D.prototype.isIgnorableItem=function(C){return void 0!==this.ignorableItemKeys[C.key]},D.prototype.createExtendedShapesBounds=function(){var C=this;return this.routingModel.getItems(this.beginConnectionShape,this.endConnectionShape).map(function(w){return w.rectangle.clone().inflate(C.routingModel.shapeMargins)})},D.prototype.createGrid=function(){return s.RoutingGrid.create(this.createGridPoints(),this.createExtendedShapesBounds(),function(C,w){return new m.Point(C,w)})},D}();_.RightAngleConnectorRoutingContext=I},5074:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RightAngleConnectorRoutingMathOperations=void 0;var m=x(1335),b=x(8679),E=x(9927),y=x(8675),p=x(3742),d=function(){function s(){}return s.createUnionSegments=function(a,l){for(var u=[],h=a[0].startPoint,f=a[0].endPoint,g=1;g<a.length;g++){var O=a[g];l(f,O.startPoint)&&(u.push(new m.Segment(h.clone(),f.clone())),h=O.startPoint),f=O.endPoint}return u.push(new m.Segment(h,f)),u},s.unionPoints=function(a){for(var l=0;l<a.length-2;)y.GeometryUtils.isCorner(a[l],a[l+1],a[l+2])?l++:(a.splice(l+1,1),l=Math.max(0,l-1))},s.getTurnDirection=function(a){return b.MathUtils.numberCloseTo(a,0)?E.RightAngleTurnDirection.Straight:b.MathUtils.numberCloseTo(a,Math.PI)?E.RightAngleTurnDirection.Backwards:a<Math.PI?E.RightAngleTurnDirection.Left:E.RightAngleTurnDirection.Right},s.isSegmentNormal=function(a,l){return l?b.MathUtils.numberCloseTo(a.startPoint.y,a.endPoint.y):b.MathUtils.numberCloseTo(a.startPoint.x,a.endPoint.x)},s.isConnectionRectanleLineIntersected=function(a,l,u,h,f,g){switch(u){case p.ConnectionPointSide.North:return y.GeometryUtils.isLineIntersected(g(a.x,a.y),g(a.right,a.y),l,h,f);case p.ConnectionPointSide.South:return y.GeometryUtils.isLineIntersected(g(a.right,a.bottom),g(a.x,a.bottom),l,h,f);case p.ConnectionPointSide.West:return y.GeometryUtils.isLineIntersected(g(a.x,a.y),g(a.x,a.bottom),l,h,f);case p.ConnectionPointSide.East:return y.GeometryUtils.isLineIntersected(g(a.right,a.y),g(a.right,a.bottom),l,h,f);default:return!1}},s.createBeginConnectionSegment=function(a,l,u,h){switch(a){case p.ConnectionPointSide.North:return new m.Segment(l,h(l.x,l.y-u));case p.ConnectionPointSide.South:return new m.Segment(l,h(l.x,l.y+u));case p.ConnectionPointSide.West:return new m.Segment(l,h(l.x-u,l.y));case p.ConnectionPointSide.East:return new m.Segment(l,h(l.x+u,l.y));default:return l}},s.createEndConnectionSegment=function(a,l,u,h){switch(a){case p.ConnectionPointSide.North:return new m.Segment(h(l.x,l.y-u),l);case p.ConnectionPointSide.South:return new m.Segment(h(l.x,l.y+u),l);case p.ConnectionPointSide.West:return new m.Segment(h(l.x-u,l.y),l);case p.ConnectionPointSide.East:return new m.Segment(h(l.x+u,l.y),l);default:return l}},s}();_.RightAngleConnectorRoutingMathOperations=d},3597:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RightAngleConnectorRoutingStrategy=void 0;var m=x(1335),b=x(4717),E=x(1794),y=x(4867),p=function(){function d(s){this.model=s}return d.prototype.createRenderPoints=function(s,a,l,u,h,f,g){if(a.length>1){var O=new E.RightAngleConnectorRoutingContext(this.model,s,a,l,u,h,f);if(O.initialize(g),O.shouldCreateRenderPoints)return this.createRenderPointsCore(O)}},d.prototype.clone=function(){return new d(this.model)},d.prototype.onAddPoint=function(s,a,l,u){var h=u.map(function(C){return new b.ConnectorRenderPoint(C.x,C.y,C.pointIndex)}),f=y.ModelUtils.findFirstPointIndex(h,function(C){return C.equals(l)});if(0===f)return h.splice(1,0,new b.ConnectorRenderPoint(l.x,l.y,a)),y.ModelUtils.validateRenderPointIndexes(s,h,2);var g=h.length-1;if(f===g)return h.splice(g,0,new b.ConnectorRenderPoint(l.x,l.y,a)),h[g+1].pointIndex=a+1,h;if(f>0){var O=h[f];return h[f]=new b.ConnectorRenderPoint(O.x,O.y,a,O.skipped),y.ModelUtils.validateRenderPointIndexes(s,h,f+1)}var I=new m.Segment(h[0],h[1]),D=new b.ConnectorRenderPoint(l.x,l.y);return I.containsPoint(D)?(h.splice(1,0,new b.ConnectorRenderPoint(D.x,D.y,-1)),h.splice(2,0,new b.ConnectorRenderPoint(D.x,D.y,a)),y.ModelUtils.validateRenderPointIndexes(s,h,3)):new m.Segment(h[g-1],h[g]).containsPoint(D)?(h.splice(g,0,new b.ConnectorRenderPoint(D.x,D.y,a)),h.splice(g+1,0,new b.ConnectorRenderPoint(D.x,D.y,-1)),h[g+2].pointIndex=a+1,h):u},d.prototype.onDeletePoint=function(s,a,l){var u=l.map(function(k){return new b.ConnectorRenderPoint(k.x,k.y,k.pointIndex)}),h=this.getRenderPointIndexByPointIndex(u,a);if(1===h){var f=u[0],g=u[1];return f.equals(g)?(u.splice(1,1),y.ModelUtils.validateRenderPointIndexes(s,u,1)):(u[1]=new b.ConnectorRenderPoint(g.x,g.y,-1,g.skipped),y.ModelUtils.validateRenderPointIndexes(s,u,2))}if(2===h){var O=u[2];return(f=u[1]).equals(O)?(u.splice(1,2),y.ModelUtils.validateRenderPointIndexes(s,u,1)):(u[2]=new b.ConnectorRenderPoint(O.x,O.y,-1,O.skipped),y.ModelUtils.validateRenderPointIndexes(s,u,3))}var I=u.length-1;if(h===I-1){var D=u[I-1],C=u[I];return D.equals(C)?(u.splice(I-1,1),y.ModelUtils.validateRenderPointIndexes(s,u,I-1)):(u[I-1]=new b.ConnectorRenderPoint(D.x,D.y,-1,D.skipped),y.ModelUtils.validateRenderPointIndexes(s,u,I))}if(h===I-2){var w=u[I-2];return w.equals(C=u[I-1])?(u.splice(I-2,2),y.ModelUtils.validateRenderPointIndexes(s,u,I-2)):(u[I-2]=new b.ConnectorRenderPoint(w.x,w.y,-1,w.skipped),y.ModelUtils.validateRenderPointIndexes(s,u,I-1))}var P=u[h];return u[h]=new b.ConnectorRenderPoint(P.x,P.y,-1,P.skipped),y.ModelUtils.validateRenderPointIndexes(s,u,h+1)},d.prototype.onMovePoint=function(s,a,l,u){if(0===a||a===s.length-1)return u;var h=u.map(function(f){return new b.ConnectorRenderPoint(f.x,f.y,f.pointIndex)});return this.onMovePointCore(h,a,l),y.ModelUtils.skipUnnecessaryRightAngleRenderPoints(h),h},d.prototype.onMovePoints=function(s,a,l,u,h){if(0===a||l===s.length-1)return h;for(var f=h.map(function(O){return new b.ConnectorRenderPoint(O.x,O.y,O.pointIndex)}),g=a;g<=l;g++)this.onMovePointCore(f,g,u[g-a]);return y.ModelUtils.skipUnnecessaryRightAngleRenderPoints(f),f},d.prototype.onMovePointCore=function(s,a,l){var u=this.getRenderPointIndexByPointIndex(s,a);u>=0&&(s[u]=new b.ConnectorRenderPoint(l.x,l.y,a,s[u].skipped))},d.prototype.createRenderPointsCore=function(s){var a,l=[],u=-1,h=-1;s.setup();var f=s.renderSegments,g=f[f.length-1].endPoint,O=s.points;do{this.registerCustomPoints(l,O,h+2,f[u+1].startPointIndex-1),h=(a=f[++u]).startPointIndex,this.registerRenderPoints(l,s.createRoutedPoints(a.startInfo,a.endInfo,a.createProhibitedSegments()),h)}while(!a.endPoint.equals(g));return s.validateRenderPoints(l),l},d.prototype.getRenderPointIndexByPointIndex=function(s,a){return y.ModelUtils.findFirstPointIndex(s,function(l){return l.pointIndex===a})},d.prototype.registerRenderPoints=function(s,a,l){var u=this;a.forEach(function(h,f){u.registerPoint(s,h,0===f?l:f===a.length-1?l+1:-1)})},d.prototype.registerCustomPoints=function(s,a,l,u){for(var h=l;h<=u;h++)this.registerPoint(s,a[h],h)},d.prototype.registerPoint=function(s,a,l){s.push(new b.ConnectorRenderPoint(a.x,a.y,l))},d}();_.RightAngleConnectorRoutingStrategy=p},3742:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramItem=_.DEFAULT_ZINDEX=_.ConnectionPointSide=void 0;var m,s,b=x(8011),E=x(5596),y=x(8675),p=x(1552);(s=m=_.ConnectionPointSide||(_.ConnectionPointSide={}))[s.Undefined=-1]="Undefined",s[s.North=0]="North",s[s.East=1]="East",s[s.South=2]="South",s[s.West=3]="West",_.DEFAULT_ZINDEX=0;var d=function(){function s(){this.key=void 0,this.dataKey=void 0,this.customData=void 0,this.attachedConnectors=[],this.zIndex=_.DEFAULT_ZINDEX,this.locked=!1,this.container=void 0,this.style=new p.Style,this.styleText=new p.TextStyle}return s.prototype.assign=function(a){a.key=this.key,a.dataKey=this.dataKey,a.customData=y.ObjectUtils.cloneObject(this.customData),a.locked=this.locked,a.attachedConnectors=this.attachedConnectors.slice(),a.style=this.style.clone(),a.styleText=this.styleText.clone(),a.zIndex=this.zIndex,a.container=this.container},s.prototype.getConnectionPointPosition=function(a,l){return this.getConnectionPoint(a,l).toPoint()},s.prototype.getConnectionPoint=function(a,l){a<0&&l&&(a=this.getNearestConnectionPoint(l));var u=this.getConnectionPoints();return u[a]||u[0]},s.prototype.getNearestConnectionPoint=function(a){var l,u=Number.MAX_VALUE;return this.getConnectionPoints().forEach(function(h,f){var g=E.Metrics.euclideanDistance(h,a);g<u&&(u=g,l=f)}),l},s.prototype.getConnectionPointIndex=function(a){var l=this.getConnectionPoints();return l.reduce(function(u,h,f){return a===m.North&&h.y<l[u].y||a===m.South&&h.y>l[u].y||a===m.West&&h.x<l[u].x||a===m.East&&h.x>l[u].x?f:u},0)},s.prototype.getConnectionPointSideByIndex=function(a,l){var u=this.getConnectionPoint(a,l);return this.getConnectionPointSide(u,l)},s.prototype.getConnectionPointIndexForSide=function(a){return a},Object.defineProperty(s.prototype,"enableText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"allowEditText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasTemplate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enableChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isLocked",{get:function(){return this.locked||this.container&&this.container.isLocked},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"allowResizeHorizontally",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"allowResizeVertically",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"strokeWidth",{get:function(){return this.style.strokeWidth},enumerable:!1,configurable:!0}),s.prototype.intersectedByRect=function(a){return b.Rectangle.areIntersected(this.rectangle,a)},s}();_.DiagramItem=d},4742:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DraggingConnector=_.SelectionDragHelper=void 0;var m=x(9716),b=x(58),E=x(1510),y=x(4867),p=x(4717),d=x(6879),s=function(){function u(h,f,g,O,I){var D=this;this.history=h,this.model=f,this.permissionsProvider=g,this.startPoint=O,this.draggingShapes=[],this.draggingConnectors=[],this.selectedItems={},this.draggingConnectorsIndexByKey={},I.forEach(function(C){return D.selectedItems[C.key]=C})}return u.prototype.initDraggingShapes=function(h,f){var g=this;this.draggingShapes=h.map(function(O){return new l(O)}),f||this.draggingShapes.forEach(function(O){return g.permissionsProvider.addInteractingItem(O.shape,d.DiagramModelOperation.MoveShape)})},u.prototype.initDraggingConnectors=function(h,f){var g=this;this.draggingConnectors=[],this.draggingConnectorsIndexByKey={},h.forEach(function(O){return g.registerConnector(O)}),f||this.draggingShapes.forEach(function(O){var I=O.shape.attachedConnectors;I&&I.forEach(function(D){g.containsDraggingConnectorByKey(D.key)||g.registerConnector(D)})}),this.modelConnectorsWithoutBeginItemInfo=this.createModelConnectorsWithoutBeginItemInfo(),this.modelConnectorsWithoutEndItemInfo=this.createModelConnectorsWithoutEndItemInfo()},u.prototype.move=function(h,f,g,O){var I=this;if(this.draggingShapes.length){var D=this.draggingShapes.map(function(P){return P.shape});this.draggingShapes.forEach(function(P){for(var k=P.shape;k.container;){if(-1!==D.indexOf(k.container))return!1;k=k.container}I.moveShape(P,f,g,O)});var C=this.draggingShapes[0],w=m.Vector.fromPoints(C.startPosition.clone(),C.shape.position.clone());(w.x||w.y)&&this.draggingConnectors.forEach(function(P){return I.moveConnectorCore(P.connector,P.startPoints,P.startRenderContext,w,h)})}else this.draggingConnectors.forEach(function(P){return I.moveConnector(P,h,f)})},u.prototype.containsDraggingConnectorByKey=function(h){return void 0!==this.draggingConnectorsIndexByKey[h]},u.prototype.onTryUpdateModelSize=function(h,f){this.modelConnectorsWithoutBeginItemInfo.forEach(function(g){g.point.x+=h,g.point.y+=f}),this.modelConnectorsWithoutEndItemInfo.forEach(function(g){g.point.x+=h,g.point.y+=f})},u.prototype.moveConnector=function(h,f,g){var O=h.startPoints,I=m.Vector.fromPoints(O[0].clone(),g(O[0]).clone());(I.x||I.y)&&this.moveConnectorCore(h.connector,O,h.startRenderContext,I,f)},u.prototype.moveConnectorCore=function(h,f,g,O,I){I||y.ModelUtils.canMoveConnector(this.selectedItems,h)?this.offsetConnector(h,f,g,O):this.changeConnector(h)},u.prototype.moveShape=function(h,f,g,O){var I=this,D=h.shape,C=f(h.startPosition);y.ModelUtils.setShapePosition(this.history,this.model,D,C),y.ModelUtils.updateMovingShapeConnections(this.history,D,this.modelConnectorsWithoutBeginItemInfo,this.modelConnectorsWithoutEndItemInfo,g,O,function(w){return I.permissionsProvider.addInteractingItem(w)}),this.draggingConnectors.filter(function(w){return!!I.selectedItems[w.connector.key]}).length||y.ModelUtils.updateShapeAttachedConnectors(this.history,this.model,D)},u.prototype.offsetConnector=function(h,f,g,O){var I=this,D=f.map(function(C){return I.offsetPoint(C,O)});D[0].equals(h.points[0])||this.history.addAndRedo(new b.ChangeConnectorPointsHistoryItem(h.key,D,this.offsetRenderContext(g,O)))},u.prototype.offsetRenderContext=function(h,f){var g=this;if(void 0!==h)return new E.ConnectorRenderPointsContext(h.renderPoints.map(function(O){var I=g.offsetPoint(O,f);return new p.ConnectorRenderPoint(I.x,I.y,O.pointIndex,O.skipped)}),!0,h.actualRoutingMode)},u.prototype.offsetPoint=function(h,f){var g=m.Vector.fromPoints(h,this.startPoint);return this.startPoint.clone().offset(f.x-g.x,f.y-g.y)},u.prototype.changeConnector=function(h){y.ModelUtils.tryRemoveConnectorIntermediatePoints(this.history,h),y.ModelUtils.updateConnectorAttachedPoints(this.history,this.model,h)},u.prototype.registerConnector=function(h){this.draggingConnectorsIndexByKey[h.key]=this.draggingConnectors.push(new a(h))-1},u.prototype.createModelConnectorsWithoutBeginItemInfo=function(){var h=this;return this.model.findConnectorsCore(function(f){return!f.beginItem&&!h.containsDraggingConnectorByKey(f.key)}).map(function(f){return{connector:f,point:f.points[0].clone()}})},u.prototype.createModelConnectorsWithoutEndItemInfo=function(){var h=this;return this.model.findConnectorsCore(function(f){return!f.endItem&&!h.containsDraggingConnectorByKey(f.key)}).map(function(f){return{connector:f,point:f.points[f.points.length-1].clone()}})},u}();_.SelectionDragHelper=s;var a=function(u){this.connector=u,this.startPoints=u.points.map(function(h){return h.clone()}),this.startRenderContext=u.tryCreateRenderPointsContext()};_.DraggingConnector=a;var l=function(u){this.shape=u,this.startPosition=u.position.clone()}},6613:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramModel=void 0;var m=x(5503),b=x(7959),E=x(8675),y=x(8011),p=x(6353),d=x(8900),s=x(7176),a=x(13),l=x(5383),u=x(4867),h=function(){function f(g){void 0===g&&(g=new p.Size(8391,11906)),this.items=[],this.itemIndexByKey={},this.keyCounter=0,this.pageSize=new p.Size(8391,11906),this.pageLandscape=!1,this.pageColor=f.defaultPageColor,this.units=l.DiagramUnit.In,this.snapStartPoint=new d.Point(0,0),this.pageSize=g,this.size=this.pageSize.clone(),this.rectangle=y.Rectangle.fromGeometry(new d.Point(0,0),new p.Size(0,0)),this.initializeKeyCounter()}return Object.defineProperty(f.prototype,"pageWidth",{get:function(){return this.pageLandscape?this.pageSize.height:this.pageSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"pageHeight",{get:function(){return this.pageLandscape?this.pageSize.width:this.pageSize.height},enumerable:!1,configurable:!0}),f.prototype.getRectangle=function(g){return g&&(this.rectangle=u.ModelUtils.createRectangle(this.items)),this.rectangle},f.prototype.pushItem=function(g){var O=this.items.push(g);this.itemIndexByKey[g.key]=O-1,g instanceof m.Shape&&!g.image.isEmpty&&this.cacheShapeImage(g)},f.prototype.removeItem=function(g){var O=this.getItemIndex(g);delete this.itemIndexByKey[g.key],this.items.splice(O,1),this.updateIndicesHash(O)},f.prototype.updateIndicesHash=function(g){for(var O=g;O<this.items.length;O++)this.itemIndexByKey[this.items[O].key]=O},f.prototype.getItemIndex=function(g){return this.itemIndexByKey[g.key]},f.prototype.findShape=function(g){var O=this.findItem(g);return O instanceof m.Shape?O:void 0},f.prototype.findShapesCore=function(g){var O=[];return this.items.forEach(function(I){I instanceof m.Shape&&g(I)&&O.push(I)}),O},f.prototype.findShapeCore=function(g){for(var O=0;O<this.items.length;O++){var I=this.items[O];if(I instanceof m.Shape&&g(I))return I}},f.prototype.findShapeAtPosition=function(g){return this.findShapeCore(function(O){return O.position.equals(g)})},f.prototype.findShapeByDataKey=function(g){return this.findShapeCore(function(O){return O.dataKey===g})},f.prototype.findShapesByImageUrl=function(g){return this.findShapesCore(function(O){return O.image.url===g})},f.prototype.findShapesByDescription=function(g){return this.findShapesCore(function(O){return O.description.key===g.key})},f.prototype.cacheShapeImage=function(g){var O=s.ImageCache.instance.createUnloadedInfoByShapeImageInfo(g.image);O.isLoaded&&g.image.loadBase64Content(O.base64)},f.prototype.loadAllImages=function(g){s.ImageCache.instance.loadAllImages(g)},f.prototype.findContainer=function(g){var O=this.findShape(g);return O&&O.enableChildren?O:void 0},f.prototype.findNearestContainer=function(g){var O=this.findShape(g);return O?O.enableChildren?O:O.container:void 0},f.prototype.getChildren=function(g){var O=this;return g.children.map(function(I){return O.findItem(I.key)}).filter(function(I){return I})},f.prototype.findChild=function(g,O,I){var D,C=this;return void 0===I&&(I=!0),g.children.forEach(function(w){D||(w.key!==O?I&&w instanceof m.Shape&&(D=C.findChild(w,O,I)):D=w)}),D},f.prototype.findItemContainerCore=function(g,O){for(var I=g.container;I&&O&&!O(I);)I=I.container;return I},f.prototype.findItemContainer=function(g){return this.findItemContainerCore(g)},f.prototype.findItemCollapsedContainer=function(g){return this.findItemContainerCore(g,function(O){return!O.expanded})},f.prototype.findItemTopCollapsedContainer=function(g){for(var O,I=g.container;I;)I.expanded||(O=I),I=I.container;return O},f.prototype.isContainerItem=function(g,O){return void 0!==this.findItemContainerCore(O,function(I){return I.key===g.key})},f.prototype.findConnector=function(g){var O=this.findItem(g);return O instanceof b.Connector?O:void 0},f.prototype.findConnectorCore=function(g){for(var O=0;O<this.items.length;O++){var I=this.items[O];if(I instanceof b.Connector&&g(I))return I}},f.prototype.findConnectorAtPoints=function(g){return this.findConnectorCore(function(O){return E.GeometryUtils.arePointsEqual(O.points,g)})},f.prototype.findConnectorByDataKey=function(g){return this.findConnectorCore(function(O){return O.dataKey===g})},f.prototype.findConnectorByBeginEndDataKeys=function(g,O){return this.findConnectorCore(function(I){return I.beginItem&&I.beginItem.dataKey===g&&I.endItem&&I.endItem.dataKey===O})},f.prototype.findConnectorsCore=function(g){var O=[];return this.items.forEach(function(I){I instanceof b.Connector&&g(I)&&O.push(I)}),O},f.prototype.findConnectorsWithoutBeginItem=function(){return this.findConnectorsCore(function(g){return!g.beginItem})},f.prototype.findConnectorsWithoutEndItem=function(){return this.findConnectorsCore(function(g){return!g.endItem})},f.prototype.findItem=function(g){return this.items[this.itemIndexByKey[g]]},f.prototype.findItemByDataKey=function(g){return this.findItemCore(function(O){return O.dataKey===g})},f.prototype.findItemCore=function(g){for(var O=0;O<this.items.length;O++)if(g(this.items[O]))return this.items[O]},f.isIntersectedItems=function(g,O){var I=!1;return g instanceof m.Shape?I=O.intersectedByRect(g.rectangle):g instanceof b.Connector&&g.getSegments().forEach(function(D){O instanceof m.Shape?I=I||D.isIntersectedByRect(O.rectangle):O instanceof b.Connector&&O.getSegments().forEach(function(C){I=I||D.isIntersected(C)})}),I},f.prototype.getIntersectItems=function(g){var O=[];return this.items.forEach(function(I){I.container===g.container&&(g===I||I instanceof b.Connector&&-1!==g.attachedConnectors.indexOf(I)||!f.isIntersectedItems(I,g)||O.push(I))}),O},f.prototype.getIntersectItemsMinZIndex=function(g){return this.getIntersectItems(g).map(function(O){return O.zIndex}).reduce(function(O,I){return Math.min(O,I)},Number.MAX_VALUE)},f.prototype.getIntersectItemsMaxZIndex=function(g){return this.getIntersectItems(g).map(function(O){return O.zIndex}).reduce(function(O,I){return Math.max(O,I)},-Number.MAX_VALUE)},f.prototype.iterateItems=function(g){this.items.forEach(g)},f.prototype.getNextKey=function(){return(this.keyCounter++).toString()},f.prototype.initializeKeyCounter=function(){this.keyCounter=this.items.reduce(function(g,O){var I=parseInt(O.key);return Math.max(g,isNaN(I)?0:I+1)},this.items.length)},f.defaultPageColor=a.ColorUtils.LIGHT_COLOR,f}();_.DiagramModel=h},2004:(J,_)=>{var m;Object.defineProperty(_,"__esModule",{value:!0}),_.ItemChange=_.ItemChangeType=void 0,(m=_.ItemChangeType||(_.ItemChangeType={}))[m.Create=0]="Create",m[m.UpdateProperties=1]="UpdateProperties",m[m.UpdateStructure=2]="UpdateStructure",m[m.Update=3]="Update",m[m.Remove=4]="Remove",m[m.UpdateClassName=5]="UpdateClassName";var x=function(){function m(b,E,y){void 0===y&&(y=!0),this.item=b,this.type=E,this.isValid=y}return Object.defineProperty(m.prototype,"key",{get:function(){return this.item.key},enumerable:!1,configurable:!0}),m}();_.ItemChange=x},1118:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ModelManipulator=void 0;var m=x(4125),b=x(6353),E=x(9463),y=x(7176),p=x(590),d=x(6879),s=x(8675),a=x(7959),l=x(2004),u=x(4867),h=function(){function f(g,O,I,D){this.onModelChanged=new s.EventDispatcher,this.onModelSizeChanged=new s.EventDispatcher,this.initializeCore(g,O),this.permissionsProvider=I,this.descriptionManager=D,this.imageLoader=new p.ImageLoader(this.updateShapeImage.bind(this))}return f.prototype.initialize=function(g,O){this.initializeCore(g,O),this.model.loadAllImages(this.imageLoader),this.updateModelSize()},f.prototype.initializeCore=function(g,O){var I=this;this.model=g,this.routingModel=O,this.routingModel&&(this.routingModel.initialize(g),g.iterateItems(function(D){if(D instanceof a.Connector){var C=I.routingModel.createStrategy(D.properties.lineOption);C?D.changeRoutingStrategy(C):D.invalidateRenderPoints()}}))},f.prototype.commitPageChanges=function(){this.raisePageSizeChanged(this.model.pageSize.clone(),this.model.pageLandscape),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageColorChanged(this.model.pageColor),this.raiseModelRectangleChanged(u.ModelUtils.createRectangle(this.model.items))},f.prototype.commitItemsCreateChanges=function(){E.Diagnostics.timer("new model: model changes"),this.commitItemsChangesCore(l.ItemChangeType.Create,this.model.items),E.Diagnostics.endTimer()},f.prototype.commitItemUpdateChanges=function(g){this.commitItemsChangesCore(l.ItemChangeType.UpdateStructure,[g])},f.prototype.commitItemsChangesCore=function(g,O){var I=[];O.forEach(function(D){I.push(new l.ItemChange(D,g))}),I.length&&this.raiseModelChanged(I)},f.prototype.insertToContainer=function(g,O){if(g.container&&O&&g.container.key!==O.key)throw Error("To insert an item to a container it's necessary to remove it from the current container.");O&&(-1===O.children.indexOf(g)&&O.children.push(g),g.container=O,this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Update)]))},f.prototype.removeFromContainer=function(g){if(g.container){var O=g.container.children.indexOf(g);g.container.children.splice(O,1),g.container=void 0,this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Update)])}},f.prototype.changeStyle=function(g,O,I){this.changeStyleCore(g,g.style,O,I)},f.prototype.changeStyleText=function(g,O,I){this.changeStyleCore(g,g.styleText,O,I)},f.prototype.changeStyleCore=function(g,O,I,D){void 0!==D?O[I]=D:delete O[I],this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties)])},f.prototype.changeZIndex=function(g,O){g.zIndex=O,this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Update)])},f.prototype.changeLocked=function(g,O){g.locked=O,this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateClassName)])},f.prototype.changeCustomData=function(g,O){g.customData=s.ObjectUtils.cloneObject(O),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.addShape=function(g,O){if(g.attachedConnectors.length)throw Error("A creating shape should not contain existing connectors.");return g.key=void 0!==O?O:this.model.getNextKey(),this.insertShape(g)},f.prototype.insertShape=function(g){this.model.pushItem(g);var O=this.permissionsProvider.canAddItems([g]);return this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Create,O)]),this.model.loadAllImages(this.imageLoader),g},f.prototype.resizeShape=function(g,O,I){g.position=O,g.size=I;var D=this.permissionsProvider.isStoredPermissionsGranted(),C=this.getInteractingItem(g,d.DiagramModelOperation.ResizeShape);if(C){var w=C.size.clone(),P=g.size.clone();P.equals(w)||(D=this.permissionsProvider.canResizeShapes([{shape:g,size:P,oldSize:w}]))}var k=this.getInteractingItem(g,d.DiagramModelOperation.MoveShape);if(k){var A=k.position.clone(),R=g.position.clone();R.equals(A)||(D=this.permissionsProvider.canMoveShapes([{shape:g,position:R,oldPosition:A}]))}this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,D)])},f.prototype.moveShape=function(g,O){g.position=O;var I=this.permissionsProvider.isStoredPermissionsGranted();this.getInteractingItem(g,d.DiagramModelOperation.AddShape)&&(I=this.permissionsProvider.canAddItems([g]));var D=this.getInteractingItem(g,d.DiagramModelOperation.MoveShape);if(D){var C=D.position.clone(),w=g.position.clone();w.equals(C)||(I=this.permissionsProvider.canMoveShapes([{shape:g,position:w,oldPosition:C}]))}this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,I)])},f.prototype.changeShapeParameters=function(g,O){g.parameters.forEach(function(I){var D=O.get(I.key);D&&(I.value=D.value)}),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties)])},f.prototype.changeShapeText=function(g,O){g.text=O,this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.changeShapeImage=function(g,O){g.image=O;var I=y.ImageCache.instance.createUnloadedInfoByShapeImageInfo(O);this.imageLoader.load(I),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.changeShapeExpanded=function(g,O){g.expanded=O,g.toggleExpandedSize(),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.deleteShape=function(g,O){if(g.attachedConnectors.length)throw Error("A removing shape should not contain existing connectors.");this.removeShape(g,O)},f.prototype.removeShape=function(g,O){this.model.removeItem(g),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Remove,O)])},f.prototype.updateShapeImage=function(g){if(g.imageUrl){var O=this.model.findShapesByImageUrl(g.imageUrl);O.forEach(function(I){g.base64?I.image.loadBase64Content(g.base64):I.image.setUnableToLoadFlag()}),this.commitItemsChangesCore(l.ItemChangeType.UpdateStructure,O)}},f.prototype.updateShapeDescription=function(g){var O=this.model.findShapesByDescription(g);this.commitItemsChangesCore(l.ItemChangeType.UpdateProperties,O)},f.prototype.updateShapeType=function(g,O,I){var D=this.descriptionManager.get(O);g.description=D,g.parameters=I,D.createParameters(I),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.addConnector=function(g,O){if(g.beginItem||g.endItem)throw Error("Creating connector should not contain begin/end items");return g.key=void 0!==O?O:this.model.getNextKey(),this.insertConnector(g)},f.prototype.insertConnector=function(g){this.model.pushItem(g);var O=this.routingModel.createStrategy(g.properties.lineOption);O?g.changeRoutingStrategy(O):g.clearRoutingStrategy();var I=this.permissionsProvider.canAddItems([g]);return this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Create,I)]),g},f.prototype.deleteConnector=function(g){if(g.beginItem||g.endItem)throw Error("Creating connector should not contain begin/end items");this.removeConnector(g)},f.prototype.removeConnector=function(g){this.model.removeItem(g);var O=this.permissionsProvider.canDeleteItems([g]);this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.Remove,O)])},f.prototype.addDeleteConnectorPoint=function(g,O){var I=this.getConnectorInteractingPoints(g);O(g),this.addDeleteConnectorPointCore(g,I)},f.prototype.moveConnectorPoint=function(g,O,I){I(g),this.moveConnectorPointCore(g,O)},f.prototype.changeConnectorPoints=function(g,O){var I=this;O(g),g.points.forEach(function(D,C){return I.moveConnectorPointCore(g,C)})},f.prototype.moveConnectorPointCore=function(g,O){var I=this.getInteractingItem(g),D=this.permissionsProvider.isStoredPermissionsGranted();if(I){var C=0<O&&O<g.points.length-1;if(C=(C=C||0===O&&!g.beginItem)||O===g.points.length-1&&!g.endItem){var w=I.points.map(function(k){return k.clone()}),P=g.points.map(function(k){return k.clone()});s.GeometryUtils.arePointsEqual(w,P)||(D=this.permissionsProvider.canChangeConnectorPoints(g,w,P))}}this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,D)])},f.prototype.getConnectorInteractingPoints=function(g){var O=this.getInteractingItem(g);return O?O.points.map(function(I){return I.clone()}):g.points.map(function(I){return I.clone()})},f.prototype.addDeleteConnectorPointCore=function(g,O){var I=this.permissionsProvider.isStoredPermissionsGranted(),D=g.points.map(function(C){return C.clone()});s.GeometryUtils.arePointsEqual(O,D)||(I=this.permissionsProvider.canChangeConnectorPoints(g,O,D)),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,I)])},f.prototype.addConnection=function(g,O,I,D){var C=g.getExtremeItem(D),w=g.getExtremeConnectionPointIndex(D);if(C!==O||w!==I){if(C)throw Error("Connector is already connected");O.attachedConnectors.push(g),D===a.ConnectorPosition.Begin?(g.beginItem=O,g.beginConnectionPointIndex=I):(g.endItem=O,g.endConnectionPointIndex=I),g.invalidateRenderPoints();var P=this.permissionsProvider.canChangeConnection(g,O,void 0,D,I);this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,P)])}},f.prototype.setConnectionPointIndex=function(g,O,I){if(!g.getExtremeItem(I))throw Error("Connection should be connected");I===a.ConnectorPosition.Begin?g.beginConnectionPointIndex=O:g.endConnectionPointIndex=O,g.invalidateRenderPoints();var D=g.getExtremeItem(I),C=this.permissionsProvider.canChangeConnection(g,D,D,I,O);this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,C)])},f.prototype.deleteConnection=function(g,O){var I=g.getExtremeItem(O);if(I){I.attachedConnectors.splice(I.attachedConnectors.indexOf(g),1),O===a.ConnectorPosition.Begin?(g.beginItem=null,g.beginConnectionPointIndex=-1):(g.endItem=null,g.endConnectionPointIndex=-1),g.invalidateRenderPoints();var D=this.permissionsProvider.canChangeConnection(g,void 0,I,O,-1);this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties,D)])}},f.prototype.changeConnectorProperty=function(g,O,I){if(g.properties[O]=I,"lineOption"===O){var D=this.routingModel?this.routingModel.createStrategy(g.properties.lineOption):void 0;D?g.changeRoutingStrategy(D):g.clearRoutingStrategy()}else g.invalidateRenderPoints();this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties)])},f.prototype.changeConnectorText=function(g,O,I){g.setText(O,I),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateStructure)])},f.prototype.changeConnectorTextPosition=function(g,O,I){var D=g.getText(O);g.setText(null,O),g.setText(D,I),this.raiseModelChanged([new l.ItemChange(g,l.ItemChangeType.UpdateProperties)])},f.prototype.changeModelSize=function(g,O){this.model.size.width=g.width,this.model.size.height=g.height,this.raiseModelSizeChanged(this.model.size.clone(),O),(O.left||O.top)&&(this.model.snapStartPoint=this.model.snapStartPoint.clone().offset(O.left,O.top),this.raiseSnapPointChange(this.model.snapStartPoint))},f.prototype.changePageSize=function(g){this.model.pageSize.equals(g)||(this.model.pageSize=g,this.model.size=new b.Size(this.model.pageWidth,this.model.pageHeight),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageSizeChanged(this.model.pageSize,this.model.pageLandscape))},f.prototype.changePageLandscape=function(g){this.model.pageLandscape!==g&&(this.model.pageLandscape=g,this.model.pageSize.width!==this.model.pageSize.height&&(this.model.size=new b.Size(this.model.pageWidth,this.model.pageHeight),this.raiseModelSizeChanged(this.model.size.clone()),this.raisePageSizeChanged(this.model.pageSize,this.model.pageLandscape)))},f.prototype.changePageColor=function(g){this.model.pageColor!==g&&(this.model.pageColor=g,this.raisePageColorChanged(g))},f.prototype.updateModelSize=function(){var g=this.getModelSizeUpdateOffset();if(!g.isEmpty()){var O=Math.max(this.model.size.width+g.left+g.right,this.model.pageWidth),I=Math.max(this.model.size.height+g.top+g.bottom,this.model.pageHeight);this.model.size=new b.Size(O,I)}},f.prototype.getModelSizeUpdateOffset=function(){var g=this.model.getRectangle(!1),O=this.model.getRectangle(!0);return O.equals(g)||this.raiseModelRectangleChanged(O),this.createModelRectangleOffset(O)},f.prototype.createModelRectangleOffset=function(g){var O=this.model.pageWidth,I=this.model.pageHeight,D=this.model.size;return new m.Offsets(-Math.floor(g.x/O)*O,-Math.floor((D.width-g.right)/O)*O,-Math.floor(g.y/I)*this.model.pageHeight,-Math.floor((D.height-g.bottom)/I)*I)},f.prototype.raiseModelChanged=function(g){this.onModelChanged.raise1(function(O){return O.notifyModelChanged(g)})},f.prototype.raisePageColorChanged=function(g){this.onModelChanged.raise1(function(O){return O.notifyPageColorChanged(g)})},f.prototype.raisePageSizeChanged=function(g,O){this.onModelChanged.raise1(function(I){return I.notifyPageSizeChanged(g,O)})},f.prototype.raiseModelSizeChanged=function(g,O){this.onModelSizeChanged.raise1(function(I){return I.notifyModelSizeChanged(g,O)})},f.prototype.raiseModelRectangleChanged=function(g){this.onModelSizeChanged.raise1(function(O){return O.notifyModelRectangleChanged(g)})},f.prototype.raiseSnapPointChange=function(g){this.onModelSizeChanged.raise1(function(O){return O.notifySnapPointPositionChanged(g)})},f.prototype.getInteractingItem=function(g,O){return this.permissionsProvider.getInteractingItem(g,O)},f}();_.ModelManipulator=h},4867:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ModelUtils=void 0;var m=x(9291),b=x(5596),E=x(8900),y=x(8011),p=x(6353),d=x(9716),s=x(8679),a=x(5383),l=x(3477),u=x(9603),h=x(4430),f=x(4145),g=x(58),O=x(329),I=x(8930),D=x(9143),C=x(1704),w=x(9310),P=x(8338),k=x(4160),A=x(9753),R=x(4629),M=x(4297),L=x(1729),H=x(4518),j=x(8236),U=x(5144),K=x(9559),q=x(7443),Y=x(4634),W=x(926),z=x(213),Z=x(7819),se=x(8217),re=x(8675),Q=x(7959),G=x(4612),ie=x(4717),ae=x(1510),me=x(5503),be=x(56),Ce=function(){function ve(){}return ve.setShapePosition=function(ee,oe,te,ce,fe){if(void 0===fe&&(fe=!0),!te.position.equals(ce)){var ye=ce.clone().offset(-te.position.x,-te.position.y);return ee.addAndRedo(new k.MoveShapeHistoryItem(te.key,ce)),fe&&te.children.forEach(function(xe){if(xe instanceof me.Shape){var Se=xe.position.clone().offset(ye.x,ye.y);ve.setShapePosition(ee,oe,xe,Se)}}),!0}return!1},ve.setShapeSize=function(ee,oe,te,ce,fe){return!(te.size.equals(fe)&&te.position.equals(ce)||(ee.addAndRedo(new R.ResizeShapeHistoryItem(te.key,ce,fe)),0))},ve.addConnectorPoint=function(ee,oe,te,ce){ee.addAndRedo(new h.AddConnectorPointHistoryItem(oe,te,ce))},ve.deleteConnectorCustomPoints=function(ee,oe){if(oe.points.length>2){var te=oe.tryCreateRenderPointsContext();if(oe.properties.lineOption!==G.ConnectorLineOption.Straight&&te){var ce=oe.points[0].clone(),fe=oe.points[oe.points.length-1].clone();ee.addAndRedo(new g.ChangeConnectorPointsHistoryItem(oe.key,[ce,fe],new ae.ConnectorRenderPointsContext([new ie.ConnectorRenderPoint(ce.x,ce.y,0),new ie.ConnectorRenderPoint(fe.x,fe.y,1)],!1,te.actualRoutingMode)))}else ee.addAndRedo(new g.ReplaceConnectorPointsHistoryItem(oe.key,[oe.points[0].clone(),oe.points[oe.points.length-1].clone()]))}},ve.deleteConnectorUnnecessaryPoints=function(ee,oe){var te=oe.getRenderPoints(!0).map(function(we){return we.clone()});if(oe.properties.lineOption===G.ConnectorLineOption.Straight){var ce=ve.createUnnecessaryRenderPoints(te.filter(function(we){return!we.skipped}).map(function(we){return we.clone()}),oe.skippedRenderPoints,function(we){return ve.findFirstPointIndex(te,function(Fe){return ie.ConnectorRenderPoint.equal(Fe,we)})});Object.keys(ce).length&&ee.addAndRedo(new g.ReplaceConnectorPointsHistoryItem(oe.key,ve.createNecessaryPoints(oe.points.map(function(we){return we.clone()}),ce)))}else{var fe=oe.tryCreateRenderPointsContext(!0),ye=te.filter(function(we){return!we.skipped}).map(function(we){return we.clone()});if(ce=ve.createUnnecessaryRightAngleRenderPoints(ye,oe.skippedRenderPoints,function(we){return ve.findFirstPointIndex(te,function(Fe){return ie.ConnectorRenderPoint.equal(Fe,we)})}),Object.keys(ce).length){var xe=ve.createNecessaryPoints(oe.points.map(function(we){return we.clone()}),ce),Se=new ae.ConnectorRenderPointsContext(ve.validateRenderPointIndexes(xe,ye,0),fe.lockCreateRenderPoints,fe.actualRoutingMode);ee.addAndRedo(new g.ChangeConnectorPointsHistoryItem(oe.key,xe,Se))}}},ve.fixConnectorBeginEndConnectionIndex=function(ee,oe){if(oe.beginItem&&-1===oe.beginConnectionPointIndex){var te=oe.beginItem.getNearestConnectionPoint(oe.points[0]);ee.addAndRedo(new l.SetConnectionPointIndexHistoryItem(oe,te,Q.ConnectorPosition.Begin))}if(oe.endItem&&-1===oe.endConnectionPointIndex){var ce=oe.endItem.getNearestConnectionPoint(oe.points[oe.points.length-1]);ee.addAndRedo(new l.SetConnectionPointIndexHistoryItem(oe,ce,Q.ConnectorPosition.End))}},ve.skipUnnecessaryRenderPoints=function(ee,oe){re.GeometryUtils.removeUnnecessaryPoints(ee,function(te,ce){return ve.removeUnnecessaryPoint(ee,te,ce,oe)},function(te){return void 0!==te&&!te.skipped}),ee[0].skipped=!1,ee[ee.length-1].skipped=!1},ve.skipUnnecessaryRightAngleRenderPoints=function(ee,oe){re.GeometryUtils.removeUnnecessaryRightAnglePoints(ee,function(te,ce){return ve.removeUnnecessaryPoint(ee,te,ce,oe)},function(te){return void 0!==te&&!te.skipped}),ee[0].skipped=!1,ee[ee.length-1].skipped=!1},ve.createUnnecessaryRenderPoints=function(ee,oe,te,ce){void 0===ce&&(ce=function(ye){return!0});var fe={};return re.GeometryUtils.removeUnnecessaryPoints(ee,function(ye,xe){return ve.collectNotSkippedRenderPoints(fe,ee,ye,xe,te,ce)}),ve.collectSkippedRenderPoints(fe,oe,te,ce),fe},ve.createUnnecessaryRightAngleRenderPoints=function(ee,oe,te,ce){void 0===ce&&(ce=function(ye){return!0});var fe={};return re.GeometryUtils.removeUnnecessaryRightAnglePoints(ee,function(ye,xe){return ve.collectNotSkippedRenderPoints(fe,ee,ye,xe,te,ce)}),ve.collectSkippedRenderPoints(fe,oe,te,ce),fe},ve.createNecessaryPoints=function(ee,oe){var te=this,ce=[],fe=ee.length-1;return ee.forEach(function(ye,xe){(0===xe||xe===fe||te.isNecessaryPoint(ye,xe,oe))&&ce.push(ye.clone())}),ce},ve.isNecessaryPoint=function(ee,oe,te){return!Object.keys(te).some(function(ce){var fe=te[ce];return fe.pointIndex===oe&&re.GeometryUtils.areDuplicatedPoints(ee,fe)})},ve.collectSkippedRenderPoints=function(ee,oe,te,ce){void 0===ce&&(ce=function(fe){return!0}),oe&&oe.forEach(function(fe){if(ce(fe)){var ye=te(fe);void 0===ee[ye]&&(ee[ye]=fe)}})},ve.collectNotSkippedRenderPoints=function(ee,oe,te,ce,fe,ye){if(void 0===ye&&(ye=function(Se){return!0}),ye(te)){var xe=fe(te);if(void 0===ee[xe])return ee[xe]=te,te.skipped=!0,oe.splice(ce,1),!0}return!1},ve.removeUnnecessaryPoint=function(ee,oe,te,ce){return ce&&-1===oe.pointIndex?(ee.splice(te,1),!0):(oe.skipped=!0,!1)},ve.validateRenderPointIndexes=function(ee,oe,te){var ce=this,fe=oe.map(function(ye,xe){return new ie.ConnectorRenderPoint(ye.x,ye.y,xe>=te&&ye.pointIndex>=0?ce.findFirstPointIndex(ee,function(Se){return Se.equals(ye)}):ye.pointIndex,ye.skipped)});return fe[0].skipped=!1,fe[fe.length-1].skipped=!1,fe},ve.findFirstPointIndex=function(ee,oe){if(!ee||!oe)return-1;for(var te=0;te<ee.length;te++)if(oe(ee[te]))return te;return-1},ve.moveConnectorRightAnglePoints=function(ee,oe,te,ce,fe,ye){oe.points.slice(te,ce+1).some(function(xe){return!re.GeometryUtils.areDuplicatedPoints(xe,new E.Point(void 0===fe?xe.x:fe,void 0===ye?xe.y:ye))})&&ee.addAndRedo(new P.MoveConnectorRightAnglePointsHistoryItem(oe.key,te,ce,fe,ye))},ve.moveConnectorPoint=function(ee,oe,te,ce){return!oe.points[te].equals(ce)&&(ee.addAndRedo(new P.MoveConnectorPointHistoryItem(oe.key,te,ce)),!0)},ve.updateConnectorAttachedPoints=function(ee,oe,te){ee.beginTransaction();var ce=te.beginItem&&oe.findItemCollapsedContainer(te.beginItem),fe=ce&&(!te.endItem||!oe.isContainerItem(ce,te.endItem)),ye=te.endItem&&oe.findItemCollapsedContainer(te.endItem),xe=ye&&(!te.beginItem||!oe.isContainerItem(ye,te.beginItem)),Se=!1;return Se=fe?this.updateConnectorBeginPoint(ee,te,ce,xe&&ye||te.endItem,function(we){return ce.getConnectionPointIndexForItem(te.beginItem,we)})||Se:this.updateConnectorBeginPoint(ee,te,te.beginItem,xe&&ye||te.endItem)||Se,Se=xe?this.updateConnectorEndPoint(ee,te,ye,function(we){return ye.getConnectionPointIndexForItem(te.beginItem,we)})||Se:this.updateConnectorEndPoint(ee,te,te.endItem)||Se,ee.endTransaction(),Se},ve.updateConnectorBeginPoint=function(ee,oe,te,ce,fe){if(te){var ye=void 0!==fe?fe(oe.beginConnectionPointIndex):oe.beginConnectionPointIndex,xe=oe.points[1];ce&&2===oe.points.length&&(xe=-1!==oe.endConnectionPointIndex?ce.getConnectionPointPosition(oe.endConnectionPointIndex,E.Point.zero()):ce.rectangle.center);var Se=te.getConnectionPointPosition(ye,xe);return this.moveConnectorPoint(ee,oe,0,Se.clone())}},ve.updateConnectorEndPoint=function(ee,oe,te,ce){if(te){var fe=void 0!==ce?ce(oe.endConnectionPointIndex):oe.endConnectionPointIndex,ye=te.getConnectionPointPosition(fe,oe.points[oe.points.length-2]);return this.moveConnectorPoint(ee,oe,oe.points.length-1,ye)}},ve.updateContainerConnectorsAttachedPoints=function(ee,oe,te,ce){var fe=this;void 0===ce&&(ce=te),ee.beginTransaction(),oe.getChildren(ce).forEach(function(ye){ye instanceof me.Shape&&(ye.attachedConnectors.forEach(function(xe){var Se=xe.beginItem&&oe.isContainerItem(ce,xe.beginItem),we=xe.endItem&&oe.isContainerItem(ce,xe.endItem);if(Se&&!we){var Fe=oe.findItemTopCollapsedContainer(xe.beginItem),Ge=xe.endItem&&oe.findItemTopCollapsedContainer(xe.endItem);Fe?fe.updateConnectorBeginPoint(ee,xe,Fe,Ge||xe.endItem,function(Ve){return te.getConnectionPointIndexForItem(xe.beginItem,Ve)}):fe.updateConnectorBeginPoint(ee,xe,xe.beginItem,Ge||xe.endItem)}we&&!Se&&((Fe=oe.findItemTopCollapsedContainer(xe.endItem))?fe.updateConnectorEndPoint(ee,xe,Fe,function(Ve){return te.getConnectionPointIndexForItem(xe.endItem,Ve)}):fe.updateConnectorEndPoint(ee,xe,xe.endItem))}),fe.updateContainerConnectorsAttachedPoints(ee,oe,te,ye))}),ee.endTransaction()},ve.getConnectorsWithoutBeginItemInfo=function(ee){return ee.findConnectorsWithoutBeginItem().map(function(oe){return{connector:oe,point:oe.points[0].clone()}})},ve.getConnectorsWithoutEndItemInfo=function(ee){return ee.findConnectorsWithoutEndItem().map(function(oe){return{connector:oe,point:oe.points[oe.points.length-1].clone()}})},ve.updateShapeAttachedConnectors=function(ee,oe,te){var ce=this;te.attachedConnectors.forEach(function(fe){ce.tryRemoveConnectorIntermediatePoints(ee,fe),ce.updateConnectorAttachedPoints(ee,oe,fe)})},ve.updateMovingShapeConnections=function(ee,oe,te,ce,fe,ye,xe){var Se=this;fe(),te.forEach(function(we){var Fe=Se.getMovingShapeConnectionPointIndex(oe,we.point);oe.rectangle.containsPoint(we.point)||Fe>-1?(ye(oe,Fe),Fe!==we.connector.beginConnectionPointIndex&&we.connector.beginItem&&ee.addAndRedo(new I.DeleteConnectionHistoryItem(we.connector,Q.ConnectorPosition.Begin)),xe(we.connector),ee.addAndRedo(new l.AddConnectionHistoryItem(we.connector,oe,Fe,Q.ConnectorPosition.Begin))):we.connector.beginItem&&(ee.addAndRedo(new I.DeleteConnectionHistoryItem(we.connector,Q.ConnectorPosition.Begin)),ee.addAndRedo(new P.MoveConnectorPointHistoryItem(we.connector.key,0,we.point)))}),ce.forEach(function(we){var Fe=Se.getMovingShapeConnectionPointIndex(oe,we.point);oe.rectangle.containsPoint(we.point)||Fe>-1?(ye(oe,Fe),Fe!==we.connector.endConnectionPointIndex&&we.connector.endItem&&ee.addAndRedo(new I.DeleteConnectionHistoryItem(we.connector,Q.ConnectorPosition.End)),xe(we.connector),ee.addAndRedo(new l.AddConnectionHistoryItem(we.connector,oe,Fe,Q.ConnectorPosition.End))):we.connector.endItem&&(ee.addAndRedo(new I.DeleteConnectionHistoryItem(we.connector,Q.ConnectorPosition.End)),ee.addAndRedo(new P.MoveConnectorPointHistoryItem(we.connector.key,we.connector.points.length-1,we.point)))})},ve.getMovingShapeConnectionPointIndex=function(ee,oe){var te=this,ce=-1;return ee.getConnectionPoints().forEach(function(fe,ye){b.Metrics.euclideanDistance(oe,fe)<te.connectionPointActionSize&&(ce=ye)}),ce},ve.shouldRemoveConnectorIntermediatePoints=function(ee,oe){if(ee.properties.lineOption!==G.ConnectorLineOption.Orthogonal||2===ee.points.length||!oe||!oe.length)return!1;for(var te,ce=0;te=oe[ce];){if(this.isShapeIntersectConnectorCustomPoints(te,ee))return!0;ce++}return!1},ve.tryRemoveConnectorIntermediatePoints=function(ee,oe){this.shouldRemoveConnectorIntermediatePoints(oe,[oe.beginItem,oe.endItem])&&this.deleteConnectorCustomPoints(ee,oe)},ve.isShapeIntersectConnectorCustomPoints=function(ee,oe){if(!ee)return!1;var te=oe.getCustomRenderPoints(!0);if(!te.length)return!1;var ce=Q.Connector.minOffset-m.UnitConverter.pixelsToTwips(1);return re.GeometryUtils.areIntersectedSegments(re.GeometryUtils.createSegments(te),re.GeometryUtils.createSegmentsFromRectangle(ee.rectangle.clone().inflate(ce,ce)))},ve.getSnappedPos=function(ee,oe,te,ce){var fe=ce?ee.snapStartPoint.x:ee.snapStartPoint.y;return Math.round((te-fe)/oe)*oe+fe},ve.tryUpdateModelRectangle=function(ee,oe){var te=ee.modelManipulator.getModelSizeUpdateOffset();te.isEmpty()||(ee.addAndRedo(new L.ModelResizeHistoryItem(te)),(te.left||te.top)&&(ee.addAndRedo(new H.UpdatePositionsOnPageResizeHistoryItem(new d.Vector(te.left,te.top))),void 0!==oe&&oe(te.left,te.top)),ee.modelManipulator.raiseModelRectangleChanged(ee.modelManipulator.model.getRectangle(!0)))},ve.deleteItems=function(ee,oe,te,ce,fe){ee.beginTransaction();var ye={};ce.forEach(function(Se){return ye[Se.key]=Se});var xe=te.getKeys().filter(function(Se){return!ye[Se]});ee.addAndRedo(new M.SetSelectionHistoryItem(te,xe)),this.deleteItemsCore(ee,oe,ce,fe),this.tryUpdateModelRectangle(ee),ee.endTransaction()},ve.deleteItemsCore=function(ee,oe,te,ce){var fe=this;te.sort(function(ye,xe){return(ye instanceof Q.Connector?0:1)-(xe instanceof Q.Connector?0:1)}),te.forEach(function(ye){if(ye.container&&fe.removeFromContainer(ee,oe,ye),ye instanceof me.Shape){var xe=oe.getChildren(ye);xe.length&&(xe.forEach(function(Se){ee.addAndRedo(new A.RemoveFromContainerHistoryItem(Se)),fe.updateAttachedConnectorsContainer(ee,oe,Se)}),fe.deleteItemsCore(ee,oe,xe.filter(function(Se){return!Se.locked||ce}),ce)),oe.findItem(ye.key)&&fe.deleteShape(ee,ye)}ye instanceof Q.Connector&&oe.findItem(ye.key)&&fe.deleteConnector(ee,ye)})},ve.detachConnectors=function(ee,oe){for(ee.beginTransaction();oe.attachedConnectors.length>0;){var te=oe.attachedConnectors[0];ee.addAndRedo(new I.DeleteConnectionHistoryItem(te,te.beginItem===oe?Q.ConnectorPosition.Begin:Q.ConnectorPosition.End))}ee.endTransaction()},ve.deleteShape=function(ee,oe){var te=ee.modelManipulator.permissionsProvider.canDeleteItems([oe]);ee.beginTransaction(),this.detachConnectors(ee,oe),ee.addAndRedo(new C.DeleteShapeHistoryItem(oe.key,te)),ee.endTransaction()},ve.deleteConnector=function(ee,oe){ee.beginTransaction(),oe.beginItem&&ee.addAndRedo(new I.DeleteConnectionHistoryItem(oe,Q.ConnectorPosition.Begin)),oe.endItem&&ee.addAndRedo(new I.DeleteConnectionHistoryItem(oe,Q.ConnectorPosition.End)),ee.addAndRedo(new D.DeleteConnectorHistoryItem(oe.key)),ee.endTransaction()},ve.deleteAllItems=function(ee,oe,te){this.deleteItems(ee,oe,te,oe.items.slice(),!0)},ve.deleteSelection=function(ee,oe,te){this.deleteItems(ee,oe,te,te.getSelectedItems())},ve.changeSelectionLocked=function(ee,oe,te,ce){ee.beginTransaction(),te.getSelectedItems(!0).forEach(function(fe){ee.addAndRedo(new q.ChangeLockedHistoryItem(fe,ce))}),ve.updateSelection(ee,te),ee.endTransaction()},ve.copyStylesToItem=function(ee,oe,te,ce){var fe=oe.findItem(ce);te.styleText.forEach(function(ye){te.styleText[ye]!==fe.styleText[ye]&&ee.addAndRedo(new W.ChangeStyleTextHistoryItem(ce,ye,te.styleText[ye]))}),te.style.forEach(function(ye){te.style[ye]!==fe.style[ye]&&ee.addAndRedo(new Y.ChangeStyleHistoryItem(ce,ye,te.style[ye]))})},ve.updateSelection=function(ee,oe){ee.addAndRedo(new M.SetSelectionHistoryItem(oe,oe.getKeys(),!0))},ve.cloneShapeToOffset=function(ee,oe,te,ce,fe){ee.beginTransaction();var ye=te.position.clone().offset(ce,fe),xe=new f.AddShapeHistoryItem(te.description,ye,te.text);ee.addAndRedo(xe);var Se=xe.shapeKey;return ee.addAndRedo(new R.ResizeShapeHistoryItem(Se,ye,te.size.clone())),ee.addAndRedo(new K.ChangeCustomDataHistoryItem(Se,re.ObjectUtils.cloneObject(te.customData))),ee.addAndRedo(new O.ChangeShapeParametersHistoryItem(Se,te.parameters.clone())),this.copyStylesToItem(ee,oe,te,Se),ee.endTransaction(),Se},ve.applyOffsetToConnectorRenderPointsContext=function(ee,oe,te){return ee&&ee.renderPoints?new ae.ConnectorRenderPointsContext(ee.renderPoints.map(function(ce){return ce.clone().offset(oe,te)}),!0,ee.actualRoutingMode):void 0},ve.cloneConnectorToOffset=function(ee,oe,te,ce,fe,ye,xe){ee.beginTransaction();var Se=te.points.map(function(Gt){return Gt.clone().offset(ye,xe)}),we=new u.AddConnectorHistoryItem(Se,void 0,this.applyOffsetToConnectorRenderPointsContext(te.tryCreateRenderPointsContext(),ye,xe));ee.addAndRedo(we);var Fe=we.connectorKey,Ge=oe.findConnector(Fe);if(te.properties.forEach(function(Gt){te.properties[Gt]!==Ge.properties[Gt]&&ee.addAndRedo(new j.ChangeConnectorPropertyHistoryItem(Fe,Gt,te.properties[Gt]))}),ce){var Ve=oe.findShape(ce);ee.addAndRedo(new l.AddConnectionHistoryItem(Ge,Ve,te.beginConnectionPointIndex,Q.ConnectorPosition.Begin))}if(fe){var Rt=oe.findShape(fe);ee.addAndRedo(new l.AddConnectionHistoryItem(Ge,Rt,te.endConnectionPointIndex,Q.ConnectorPosition.End))}return te.texts.clone().forEach(function(Gt){ee.addAndRedo(new U.ChangeConnectorTextHistoryItem(Ge,Gt.position,Gt.value))}),this.copyStylesToItem(ee,oe,te,Fe),ee.endTransaction(),Fe},ve.cloneSelectionToOffset=function(ee,oe,te,ce,fe,ye){var xe=this;ee.beginTransaction();var Se={},we=[];ce.getSelectedShapes().forEach(function(Fe){var Ge=xe.cloneShapeToOffset(ee,oe,Fe,fe,ye);Se[Fe.key]=Ge,we.push(Ge),te&&te(Ge)}),ce.getSelectedConnectors().forEach(function(Fe){var Rt=xe.cloneConnectorToOffset(ee,oe,Fe,Fe.beginItem?Se[Fe.beginItem.key]:null,Fe.endItem?Se[Fe.endItem.key]:null,fe,ye);we.push(Rt),te&&te(Rt)}),ee.addAndRedo(new M.SetSelectionHistoryItem(ce,we)),ve.tryUpdateModelRectangle(ee),ee.endTransaction()},ve.findContainerByEventKey=function(ee,oe,te){var ce=ee.findContainer(te);if(ce&&!ce.isLocked)return ce;var fe=ee.findShape(te);return fe&&fe.container&&!oe.hasKey(fe.key)?ve.findContainerByEventKey(ee,oe,fe.container.key):void 0},ve.canInsertToContainer=function(ee,oe,te){return oe!==te&&!(oe instanceof me.Shape&&ee.findChild(oe,te.key))},ve.canInsertSelectionToContainer=function(ee,oe,te){var ce=!0;return oe.getSelectedItems().forEach(function(fe){fe!==te?fe instanceof me.Shape&&ee.findChild(fe,te.key)&&(ce=!1):ce=!1}),ce},ve.insertToContainer=function(ee,oe,te,ce){if(!ce.enableChildren)throw Error("Inpossible to add children to non-container shape.");if(this.canInsertToContainer(oe,te,ce)){var fe=te.container;fe!==ce&&(ee.beginTransaction(),fe&&(ee.addAndRedo(new A.RemoveFromContainerHistoryItem(te)),te.attachedConnectors.forEach(function(ye){ye.container&&ee.addAndRedo(new A.RemoveFromContainerHistoryItem(ye))})),ee.addAndRedo(new w.InsertToContainerHistoryItem(te,ce)),this.updateAttachedConnectorsContainer(ee,oe,te),ee.endTransaction())}},ve.removeFromContainer=function(ee,oe,te){te.container&&(ee.beginTransaction(),ee.addAndRedo(new A.RemoveFromContainerHistoryItem(te)),this.updateAttachedConnectorsContainer(ee,oe,te),ee.endTransaction())},ve.insertSelectionToContainer=function(ee,oe,te,ce){var fe=this;ee.beginTransaction();var ye=te.getSelectedItems();ye.filter(function(xe){return!xe.container||-1===ye.indexOf(xe.container)}).forEach(function(xe){fe.insertToContainer(ee,oe,xe,ce)}),ee.endTransaction()},ve.removeSelectionFromContainer=function(ee,oe,te){var ce=this;ee.beginTransaction(),te.getSelectedItems().forEach(function(fe){fe.container&&!te.hasKey(fe.container.key)&&(ee.addAndRedo(new A.RemoveFromContainerHistoryItem(fe)),ce.updateAttachedConnectorsContainer(ee,oe,fe))}),ee.endTransaction()},ve.getConnectorContainer=function(ee){if(ee.beginItem&&ee.endItem){for(var oe={},te=ee.beginItem.container;te;)oe[te.key]=!0,te=te.container;for(var ce=ee.endItem.container;ce;){if(void 0!==oe[ce.key])return ce;ce=ce.container}}},ve.updateAttachedConnectorsContainer=function(ee,oe,te){var ce=this;ee.beginTransaction(),te.attachedConnectors.forEach(function(fe){ce.updateConnectorContainer(ee,oe,fe)}),ee.endTransaction()},ve.updateConnectorContainer=function(ee,oe,te){var ce=this.getConnectorContainer(te);ce?ee.addAndRedo(new w.InsertToContainerHistoryItem(te,ce)):te.container&&ee.addAndRedo(new A.RemoveFromContainerHistoryItem(te))},ve.updateNewShapeProperties=function(ee,oe,te){oe.inputPosition.getDefaultStyle().forEach(function(ce){ee.addAndRedo(new Y.ChangeStyleHistoryItem(te,ce,oe.inputPosition.getDefaultStylePropertyValue(ce)))}),oe.inputPosition.getDefaultTextStyle().forEach(function(ce){ee.addAndRedo(new W.ChangeStyleTextHistoryItem(te,ce,oe.inputPosition.getDefaultTextStylePropertyValue(ce)))})},ve.updateNewConnectorProperties=function(ee,oe,te){oe.inputPosition.getDefaultConnectorProperties().forEach(function(ce){ee.addAndRedo(new j.ChangeConnectorPropertyHistoryItem(te,ce,oe.inputPosition.getDefaultConnectorPropertyValue(ce)))}),oe.inputPosition.getDefaultStyle().forEach(function(ce){ee.addAndRedo(new Y.ChangeStyleHistoryItem(te,ce,oe.inputPosition.getDefaultStylePropertyValue(ce)))}),oe.inputPosition.getDefaultTextStyle().forEach(function(ce){ee.addAndRedo(new W.ChangeStyleTextHistoryItem(te,ce,oe.inputPosition.getDefaultTextStylePropertyValue(ce)))})},ve.applyLayout=function(ee,oe,te,ce,fe,ye,xe,Se,we,Fe){ee.beginTransaction();var Ge=this.getOccupiedRectangles(ye,te);return fe=this.offsetLayoutToFreeSpace(fe,te&&te.clientRectangle,Ge,xe.containerPadding),Se&&this.adjustLayoutToSnapGrid(oe,fe,we),te&&this.resizeContainerOnLayout(ee,oe,fe,te,xe.containerPadding),this.applyLayoutToNodes(ee,oe,fe,ce.edges.map(function(Ve){return oe.findConnector(Ve.key)})),this.applyLayoutToConnectors(ee,oe,fe,ce.edges.map(function(Ve){return oe.findConnector(Ve.key)}),Fe),ee.endTransaction(),fe.getRectangle(!0)},ve.getNonGraphItems=function(ee,oe,te,ce,fe){return(oe?ee.getChildren(oe):ee.items.filter(function(ye){return!ye.container})).filter(function(ye){return ye instanceof Q.Connector?!(ye.beginItem&&te[ye.beginItem.key]||ye.endItem&&te[ye.endItem.key]||-1!==fe.indexOf(ye)):ye instanceof me.Shape?!te[ye.key]&&-1===ce.indexOf(ye):void 0})},ve.getOccupiedRectangles=function(ee,oe){var te=ee.map(function(fe){return fe.rectangle});if(oe&&te.length){var ce=oe.clientRectangle;te.push(new y.Rectangle(ce.right,ce.y,1,1)),te.push(new y.Rectangle(ce.right,ce.bottom,1,1))}return te},ve.offsetLayoutToFreeSpace=function(ee,oe,te,ce){var fe=ee.getRectangle(!0),ye=re.GeometryUtils.findFreeSpace(te,fe.createSize().offset(ce,ce).nonNegativeSize(),!1,oe);if(ye)return ee.offsetNodes(ye.x+ce,ye.y+ce);var we=te&&te.length?te.reduce(function(Ge,Ve){return Ve.right>Ge?Ve.right:Ge},0):oe?oe.x:0,Fe=oe?oe.y:Math.max(0,fe.y);return ee.offsetNodes(we+ce,Fe+ce)},ve.resizeContainerOnLayout=function(ee,oe,te,ce,fe){var ye=te.getRectangle(!0),xe=ce.children.filter(function(Ve){return Ve instanceof me.Shape?-1===te.nodeKeys.indexOf(Ve.key):!!(Ve instanceof Q.Connector&&Ve.beginItem&&Ve.endItem)&&-1===te.nodeKeys.indexOf(Ve.beginItem.key)&&-1===te.nodeKeys.indexOf(Ve.endItem.key)}).map(function(Ve){return Ve.rectangle}),Se=xe.map(function(Ve){return Ve.right}).reduce(function(Ve,Rt){return Math.max(Ve,Rt)},ye.right),we=xe.map(function(Ve){return Ve.bottom}).reduce(function(Ve,Rt){return Math.max(Ve,Rt)},ye.bottom);ve.setShapeSize(ee,oe,ce,ce.position,new p.Size(ce.rectangle.width+Se+fe-ce.rectangle.right,ce.rectangle.height+we+fe-ce.rectangle.bottom)),ve.updateShapeAttachedConnectors(ee,oe,ce)},ve.applyLayoutToNodes=function(ee,oe,te,ce){var fe=this,ye=ce.reduce(function(xe,Se){return xe[Se.key]=xe},{});te.forEachNode(function(xe,Se){var we=oe.findShape(Se);fe.applyLayoutToNode(ee,oe,we,xe.position,ye)})},ve.applyLayoutToNode=function(ee,oe,te,ce,fe){var ye=this,xe=ce.clone().offset(-te.position.x,-te.position.y);ve.setShapePosition(ee,oe,te,ce,!1),0===xe.x&&0===xe.y||(te.attachedConnectors.filter(function(Se){return!fe[Se.key]}).forEach(function(Se){ye.updateConnectorAttachedPoints(ee,oe,Se);for(var Fe=Se.endItem?Se.points.length-2:Se.points.length-1,Ge=Se.beginItem?1:0;Ge<=Fe;Ge++)ye.moveConnectorPoint(ee,Se,Ge,Se.points[Ge].offset(xe.x,xe.y))}),oe.getChildren(te).forEach(function(Se){if(Se instanceof me.Shape){var we=Se.position.clone().offset(xe.x,xe.y);ye.applyLayoutToNode(ee,oe,Se,we,fe)}}))},ve.applyLayoutToConnectors=function(ee,oe,te,ce,fe){var ye=this;ce.filter(function(xe){return xe.beginItem||xe.endItem}).forEach(function(xe){var Se=te.edgeToPosition[xe.key];if(xe.beginItem&&xe.endItem&&!fe&&Se){var we=xe.beginItem.getConnectionPointIndexForSide(Se.beginIndex);we!==xe.beginConnectionPointIndex&&ee.addAndRedo(new l.SetConnectionPointIndexHistoryItem(xe,we,Q.ConnectorPosition.Begin));var Fe=xe.endItem.getConnectionPointIndexForSide(Se.endIndex);Fe!==xe.endConnectionPointIndex&&ee.addAndRedo(new l.SetConnectionPointIndexHistoryItem(xe,Fe,Q.ConnectorPosition.End))}ye.updateConnectorAttachedPoints(ee,oe,xe),Se&&ye.deleteConnectorCustomPoints(ee,xe)})},ve.adjustLayoutToSnapGrid=function(ee,oe,te){var ce=this;oe.nodeKeys.forEach(function(fe){oe.nodeToLayout[fe].position.x=ce.getSnappedPos(ee,te,oe.nodeToLayout[fe].position.x,!0),oe.nodeToLayout[fe].position.y=ce.getSnappedPos(ee,te,oe.nodeToLayout[fe].position.y,!1)})},ve.getGraphInfoByItems=function(ee,oe,te,ce){void 0===ce&&(ce=!0);var fe={};[].concat(oe).concat(te).forEach(function(Ve){var Rt=Ve.container&&Ve.container.key;fe[Rt]||(fe[Rt]=[]),fe[Rt].push(Ve)});var ye=[];for(var xe in fe)if(Object.prototype.hasOwnProperty.call(fe,xe)){var Se=xe&&ee.findContainer(xe);if(!Se||Se.expanded&&!ee.findItemCollapsedContainer(Se)){var Fe=this.getGraphByItems(ee,fe[xe],Se&&Se.key,!ce),Ge=!1;(Fe.nodes.length>1||Fe.nodes.length&&(ce||Se&&fe[Se.container&&Se.container.key]))&&(Ge=!0),Ge&&ye.push(new Z.GraphInfo(Se,Fe))}}return ye.sort(function(Ve,Rt){return Rt.level-Ve.level})},ve.getGraphByItems=function(ee,oe,te,ce){var fe=this,ye=new z.Graph([],[]),xe={};return oe.forEach(function(Se){fe.extendByConnectedComponents(Se,ye,te,xe,ce)}),ye.nodes.sort(function(Se,we){return ee.getItemIndex(ee.findItem(Se))-ee.getItemIndex(ee.findItem(we))}),ye.edges.sort(function(Se,we){return ee.getItemIndex(ee.findItem(Se.key))-ee.getItemIndex(ee.findItem(we.key))}),ye.edges=ye.edges.filter(function(Se){return ye.getNode(Se.from)&&ye.getNode(Se.to)}),ye},ve.extendByConnectedComponents=function(ee,oe,te,ce,fe){var ye=this;!ee||fe&&ee.locked||ce[ee.key]||(ce[ee.key]=!0,!(ee instanceof Q.Connector&&(ee.container&&ee.container.key)===te&&ee.beginItem)||ee.beginItem.locked&&fe||!ee.endItem||ee.endItem.locked&&fe||ee.beginItem===ee.endItem?ee instanceof me.Shape&&(ee.container&&ee.container.key)===te&&(oe.addNode(ee),ee.attachedConnectors.forEach(function(xe){return ye.extendByConnectedComponents(xe,oe,te,ce,fe)})):(oe.addEdge(new se.Edge(ee.key,ee.beginItem&&ee.beginItem.key,ee.endItem&&ee.endItem.key)),this.extendByConnectedComponents(ee.beginItem,oe,te,ce,fe),this.extendByConnectedComponents(ee.endItem,oe,te,ce,fe)))},ve.getlUnitValue=function(ee,oe){switch(ee){case a.DiagramUnit.Cm:return m.UnitConverter.twipsToCentimeters(oe);case a.DiagramUnit.In:return m.UnitConverter.twipsToInches(oe);case a.DiagramUnit.Px:return m.UnitConverter.twipsToPixels(oe)}},ve.getUnitText=function(ee,oe,te,ce,fe){void 0===fe&&(fe=2);var ye=oe[ee]?" "+oe[ee]:"",xe=this.getlUnitValue(ee,ce);switch(ee){case a.DiagramUnit.Cm:case a.DiagramUnit.In:return te(+xe.toFixed(fe))+ye;case a.DiagramUnit.Px:return te(+xe.toFixed(0))+ye}},ve.getTwipsValue=function(ee,oe){switch(ee){case a.DiagramUnit.Cm:return m.UnitConverter.centimetersToTwips(oe);case a.DiagramUnit.In:return m.UnitConverter.inchesToTwips(oe);case a.DiagramUnit.Px:return m.UnitConverter.pixelsToTwips(oe)}},ve.getGuidItemKey=function(){return s.MathUtils.generateGuid()},ve.createSelectedItems=function(ee){var oe={};return ee.getSelectedItems(!0).forEach(function(te){return oe[te.key]=te}),oe},ve.canMoveConnector=function(ee,oe){var te=oe.beginItem,ce=oe.endItem;return te||ce?!(!ee[oe.key]||!(te===ce?ee[te.key]:te?ce?ee[te.key]&&ee[ce.key]:ee[te.key]:ee[ce.key])):!oe.isLocked},ve.createRectangle=function(ee){return re.GeometryUtils.getCommonRectangle(ee.map(function(oe){return oe.rectangle}))},ve.changeShapeType=function(ee,oe,te,ce){if(te.description.key===ce)return!1;ee.beginTransaction();var fe=te.getConnectionPoints(),ye=fe.map(function(Ge){return te.getConnectionPointSide(Ge)});ee.addAndRedo(new be.ChangeShapeTypeHistoryItem(te,ce));for(var xe=te.getConnectionPoints(),Se=xe.map(function(Ge){return te.getConnectionPointSide(Ge)}),we=0,Fe=void 0;Fe=te.attachedConnectors[we];we++)Fe.beginItem===te&&this.updateConnectionIndexByNewShapeType(ee,Fe,Q.ConnectorPosition.Begin,Fe.beginConnectionPointIndex,fe,ye,xe,Se),Fe.endItem===te&&this.updateConnectionIndexByNewShapeType(ee,Fe,Q.ConnectorPosition.End,Fe.endConnectionPointIndex,fe,ye,xe,Se),this.updateConnectorAttachedPoints(ee,oe,Fe);return ee.endTransaction(),!0},ve.updateConnectionIndexByNewShapeType=function(ee,oe,te,ce,fe,ye,xe,Se){if(!(ce<0)){var we=ye[ce],Fe=fe[ce];if(!(ce<xe.length&&we===Se[ce])){var Ge=this.findNearestPointIndex(xe,Fe,function(Ve){return Se[Ve]===we});-1===Ge&&(Ge=this.findNearestPointIndex(xe,Fe,function(){return!0})),Ge!==ce&&ee.addAndRedo(new l.SetConnectionPointIndexHistoryItem(oe,Ge,te))}}},ve.findNearestPointIndex=function(ee,oe,te){return ee.reduce(function(ce,fe,ye){if(te(ye)){var xe=b.Metrics.euclideanDistance(oe,ee[ye]);(-1===ce.index||ce.distance>xe)&&(ce.index=ye,ce.distance=xe)}return ce},{distance:Number.MAX_SAFE_INTEGER,index:-1}).index},ve.connectionPointActionSize=m.UnitConverter.pixelsToTwips(8),ve}();_.ModelUtils=Ce},6469:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AddShapeEventArgs=_.AddShapeRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u){var h=s.call(this,l)||this;return h.shape=u,h}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.AddShape},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape),this.apiController.convertPoint(this.shape.position))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"addShape"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape&&this.shape.position.equals(l.shape.position)},a}(y.RequestedEntity);_.AddShapeRequestedEntity=p;var d=function(s){function a(l,u){var h=s.call(this)||this;return h.shape=l,h.position=u,h}return b(a,s),a}(y.PermissionRequestEventArgs);_.AddShapeEventArgs=d},1110:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AddShapeFromToolboxEventArgs=_.AddShapeFromToolboxRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u){var h=s.call(this,l)||this;return h.shapeType=u,h}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.AddShapeFromToolbox},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.shapeType)},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"addShapeFromToolbox"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+this.shapeType},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shapeType===l.shapeType},a}(y.RequestedEntity);_.AddShapeFromToolboxRequestedEntity=p;var d=function(s){function a(l){var u=s.call(this)||this;return u.shapeType=l,u}return b(a,s),a}(y.PermissionRequestEventArgs);_.AddShapeFromToolboxEventArgs=d},4829:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.BeforeChangeConnectorTextEventArgs=_.BeforeChangeConnectorTextRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h){var f=s.call(this,l)||this;return f.connector=u,f.position=h,f}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.BeforeChangeConnectorText},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeConnector(this.connector),this.position,this.connector.texts.map(function(l){return l}).sort(function(l,u){return l.position-u.position}).indexOf(this.connector.texts.get(this.position)))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"changeConnectorText"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return"before"+this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.connector===l.connector&&this.position===l.position&&this.connector.texts.get(this.position)===l.connector.texts.get(l.position)},a}(y.RequestedEntity);_.BeforeChangeConnectorTextRequestedEntity=p;var d=function(s){function a(l,u,h){var f=s.call(this)||this;return f.connector=l,f.position=u,f.index=h,f}return b(a,s),a}(y.PermissionRequestEventArgs);_.BeforeChangeConnectorTextEventArgs=d},2345:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.BeforeChangeShapeTextEventArgs=_.BeforeChangeShapeTextRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u){var h=s.call(this,l)||this;return h.shape=u,h}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.BeforeChangeShapeText},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"changeShapeText"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return"before"+this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape&&this.shape.text===l.shape.text},a}(y.RequestedEntity);_.BeforeChangeShapeTextRequestedEntity=p;var d=function(s){function a(l){var u=s.call(this)||this;return u.shape=l,u}return b(a,s),a}(y.PermissionRequestEventArgs);_.BeforeChangeShapeTextEventArgs=d},6466:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectionEventArgs=_.ChangeConnectionRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h,f,g,O){var I=s.call(this,l)||this;return I.connector=u,I.shape=h,I.oldShape=f,I.position=g,I.connectionPointIndex=O,I}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.ChangeConnection},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeConnector(this.connector),this.apiController.createNativeShape(this.shape),this.apiController.createNativeShape(this.oldShape),this.position,this.connectionPointIndex)},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"changeConnection"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)+"_"+this.position},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&(!this.shape&&!l.shape||this.shape&&l.shape&&this.shape===l.shape)&&(!this.oldShape&&!l.oldShape||this.oldShape&&l.oldShape&&this.oldShape===l.oldShape)&&(!this.connector&&!l.connector||this.connector&&l.connector&&this.connector===l.connector)&&this.position===l.position&&this.connectionPointIndex===l.connectionPointIndex},a}(y.RequestedEntity);_.ChangeConnectionRequestedEntity=p;var d=function(s){function a(l,u,h,f,g){var O=s.call(this)||this;return O.connector=l,O.shape=u,O.oldShape=h,O.position=f,O.connectionPointIndex=g,O}return b(a,s),a}(y.PermissionRequestEventArgs);_.ChangeConnectionEventArgs=d},6354:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorPointsEventArgs=_.ChangeConnectorPointsRequestedEntity=void 0;var E=x(6879),y=x(8532),p=x(8675),d=function(a){function l(u,h,f,g){var O=a.call(this,u)||this;return O.connector=h,O.oldPoints=f,O.points=g,O}return b(l,a),Object.defineProperty(l.prototype,"operation",{get:function(){return E.DiagramModelOperation.ChangeConnectorPoints},enumerable:!1,configurable:!0}),l.prototype.createEventArgs=function(){var u=this;return new s(this.apiController.createNativeConnector(this.connector),this.oldPoints.map(function(h){return u.apiController.convertPoint(h)}),this.points.map(function(h){return u.apiController.convertPoint(h)}))},Object.defineProperty(l.prototype,"settingsKey",{get:function(){return"changeConnectorPoints"},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),l.prototype.equals=function(u){return u instanceof l&&this.connector===u.connector&&p.GeometryUtils.arePointsEqual(this.oldPoints,u.oldPoints)&&p.GeometryUtils.arePointsEqual(this.points,u.points)},l}(y.RequestedEntity);_.ChangeConnectorPointsRequestedEntity=d;var s=function(a){function l(u,h,f){var g=a.call(this)||this;return g.connector=u,g.oldPoints=h,g.points=f,g}return b(l,a),l}(y.PermissionRequestEventArgs);_.ChangeConnectorPointsEventArgs=s},2249:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeConnectorTextEventArgs=_.ChangeConnectorTextRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h,f){var g=s.call(this,l)||this;return g.connector=u,g.position=h,g.text=f,g}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.ChangeConnectorText},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeConnector(this.connector),this.position,this.connector.texts.map(function(l){return l}).sort(function(l,u){return l.position-u.position}).indexOf(this.connector.texts.get(this.position)),this.text)},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"changeConnectorText"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.connector===l.connector&&this.position===l.position&&this.text===l.text},a}(y.RequestedEntity);_.ChangeConnectorTextRequestedEntity=p;var d=function(s){function a(l,u,h,f){var g=s.call(this)||this;return g.connector=l,g.position=u,g.index=h,g.text=f,g}return b(a,s),a}(y.PermissionRequestEventArgs);_.ChangeConnectorTextEventArgs=d},5560:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ChangeShapeTextEventArgs=_.ChangeShapeTextRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h){var f=s.call(this,l)||this;return f.shape=u,f.text=h,f}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.ChangeShapeText},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape),this.text)},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"changeShapeText"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape&&this.text===l.text},a}(y.RequestedEntity);_.ChangeShapeTextRequestedEntity=p;var d=function(s){function a(l,u){var h=s.call(this)||this;return h.shape=l,h.text=u,h}return b(a,s),a}(y.PermissionRequestEventArgs);_.ChangeShapeTextEventArgs=d},6580:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteConnectorEventArgs=_.DeleteConnectorRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u){var h=s.call(this,l)||this;return h.connector=u,h}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.DeleteConnector},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeConnector(this.connector))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"deleteConnector"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.connector&&this.connector.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.connector===l.connector},a}(y.RequestedEntity);_.DeleteConnectorRequestedEntity=p;var d=function(s){function a(l){var u=s.call(this)||this;return u.connector=l,u}return b(a,s),a}(y.PermissionRequestEventArgs);_.DeleteConnectorEventArgs=d},8825:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.DeleteShapeEventArgs=_.DeleteShapeRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u){var h=s.call(this,l)||this;return h.shape=u,h}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.DeleteShape},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"deleteShape"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape},a}(y.RequestedEntity);_.DeleteShapeRequestedEntity=p;var d=function(s){function a(l){var u=s.call(this)||this;return u.shape=l,u}return b(a,s),a}(y.PermissionRequestEventArgs);_.DeleteShapeEventArgs=d},4864:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.MoveShapeEventArgs=_.MoveShapeRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h,f){var g=s.call(this,l)||this;return g.shape=u,g.oldPosition=h,g.position=f,g}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.MoveShape},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape),this.apiController.convertPoint(this.oldPosition),this.apiController.convertPoint(this.position))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"moveShape"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape&&this.oldPosition.equals(l.oldPosition)&&this.position.equals(l.position)},a}(y.RequestedEntity);_.MoveShapeRequestedEntity=p;var d=function(s){function a(l,u,h){var f=s.call(this)||this;return f.shape=l,f.oldPosition=u,f.position=h,f}return b(a,s),a}(y.PermissionRequestEventArgs);_.MoveShapeEventArgs=d},8532:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PermissionRequestEventArgs=_.RequestedEntity=void 0;var x=function(){function b(E){this.apiController=E}return Object.defineProperty(b.prototype,"allowed",{get:function(){return this.eventArgs.allowed},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"updateUI",{get:function(){return this.eventArgs.updateUI},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"eventArgs",{get:function(){return this._eventArgs||(this._eventArgs=this.createEventArgs()),this._eventArgs},enumerable:!1,configurable:!0}),b}();_.RequestedEntity=x,_.PermissionRequestEventArgs=function(){this.allowed=!0,this.updateUI=!1}},3214:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ResizeShapeEventArgs=_.ResizeShapeRequestedEntity=void 0;var E=x(6879),y=x(8532),p=function(s){function a(l,u,h,f){var g=s.call(this,l)||this;return g.shape=u,g.oldSize=h,g.size=f,g}return b(a,s),Object.defineProperty(a.prototype,"operation",{get:function(){return E.DiagramModelOperation.ResizeShape},enumerable:!1,configurable:!0}),a.prototype.createEventArgs=function(){return new d(this.apiController.createNativeShape(this.shape),this.apiController.convertSize(this.oldSize),this.apiController.convertSize(this.size))},Object.defineProperty(a.prototype,"settingsKey",{get:function(){return"resizeShape"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"storageKey",{get:function(){return this.settingsKey+"_"+(this.shape&&this.shape.key)},enumerable:!1,configurable:!0}),a.prototype.equals=function(l){return l instanceof a&&this.shape===l.shape&&this.oldSize.equals(l.oldSize)&&this.size.equals(l.size)},a}(y.RequestedEntity);_.ResizeShapeRequestedEntity=p;var d=function(s){function a(l,u,h){var f=s.call(this)||this;return f.shape=l,f.oldSize=u,f.size=h,f}return b(a,s),a}(y.PermissionRequestEventArgs);_.ResizeShapeEventArgs=d},2883:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PermissionsProvider=void 0;var m=x(5503),b=x(8675),E=x(6879),y=x(7959),p=x(6469),d=x(8825),s=x(6580),a=x(1110),l=x(6466),u=x(6354),h=x(2345),f=x(4829),g=x(5560),O=x(2249),I=x(9187),D=x(3214),C=x(4864),w=function(){function P(k){this.onRequestOperation=new b.EventDispatcher,this.cache=[],this.permissionsLockCount=0,this.requestDeleteItems={},this.updateUICount=0,this.apiController=k,this.operationSettings=new E.ModelOperationSettings,this.storage=new I.PermissionsProviderStorage}return P.prototype.notifySelectionChanged=function(k){this.clearCache()},P.prototype.notifyModelChanged=function(k){this.clearCache()},P.prototype.notifyPageColorChanged=function(k){},P.prototype.notifyPageSizeChanged=function(k,A){},P.prototype.clearCache=function(k){this.cache=void 0!==k?this.cache.filter(function(A){return A.operation!==k}):[]},P.prototype.canDeleteItems=function(k){var A=this,R=!0;return k.forEach(function(M){var L;M instanceof m.Shape&&(L=new d.DeleteShapeRequestedEntity(A.apiController,M)),M instanceof y.Connector&&(L=new s.DeleteConnectorRequestedEntity(A.apiController,M)),R=R&&A.requestOperation(L)}),R},P.prototype.canAddItems=function(k){var A=this,R=!0;return k.forEach(function(M){M instanceof m.Shape&&(R=R&&A.requestOperation(new p.AddShapeRequestedEntity(A.apiController,M))),M instanceof y.Connector&&(R=(R=R&&A.canChangeConnection(M,M.beginItem,void 0,y.ConnectorPosition.Begin,M.beginConnectionPointIndex))&&A.canChangeConnection(M,M.endItem,void 0,y.ConnectorPosition.End,M.endConnectionPointIndex))}),R},P.prototype.canAddShapeFromToolbox=function(k){return this.requestOperation(new a.AddShapeFromToolboxRequestedEntity(this.apiController,k))},P.prototype.canChangeConnection=function(k,A,R,M,L){return!(!k||!this.requestDeleteItems[k.key])||!(null==A||A instanceof m.Shape)||this.requestOperation(new l.ChangeConnectionRequestedEntity(this.apiController,k,A,R,M,L))},P.prototype.canChangeConnectorPoints=function(k,A,R){return!(!k||!this.requestDeleteItems[k.key])||this.requestOperation(new u.ChangeConnectorPointsRequestedEntity(this.apiController,k,A,R))},P.prototype.canChangeShapeText=function(k){return this.requestOperation(new h.BeforeChangeShapeTextRequestedEntity(this.apiController,k))},P.prototype.canChangeConnectorText=function(k,A){return this.requestOperation(new f.BeforeChangeConnectorTextRequestedEntity(this.apiController,k,A))},P.prototype.canApplyShapeTextChange=function(k,A){return this.requestOperation(new g.ChangeShapeTextRequestedEntity(this.apiController,k,A))},P.prototype.canApplyConnectorTextChange=function(k,A,R){return this.requestOperation(new O.ChangeConnectorTextRequestedEntity(this.apiController,k,A,R))},P.prototype.canResizeShapes=function(k){var A=this,R=!0;return k.forEach(function(M){R=R&&A.requestOperation(new D.ResizeShapeRequestedEntity(A.apiController,M.shape,M.oldSize,M.size))}),R},P.prototype.canMoveShapes=function(k){var A=this,R=!0;return k.forEach(function(M){R=R&&A.requestOperation(new C.MoveShapeRequestedEntity(A.apiController,M.shape,M.oldPosition,M.position))}),R},P.prototype.requestOperation=function(k){var A,R=!0;return!this.permissionsLockCount&&(this.updateUICount>0&&this.cache.forEach(function(M){M.equals(k)&&(A=M)}),A?R=A.allowed:(this.requestOperationCore(k),this.updateUICount>0&&this.cache.push(k),R=k.allowed),0===this.updateUICount&&this.storage.needStorePermissions())?(this.storage.storePermission(k.storageKey,R),this.storage.isStoredPermissionsGranted()):R},P.prototype.requestOperationCore=function(k){k.eventArgs.allowed=this.operationSettings[k.settingsKey],k.eventArgs.updateUI=this.updateUICount>0,k.allowed&&this.onRequestOperation.raise("notifyRequestOperation",k.operation,k.eventArgs)},P.prototype.lockPermissions=function(){this.permissionsLockCount++},P.prototype.unlockPermissions=function(){this.permissionsLockCount--},P.prototype.beginDeleteItems=function(k){var A=this;k.forEach(function(R){return A.requestDeleteItems[R.key]=R})},P.prototype.endDeleteItems=function(){this.requestDeleteItems={}},P.prototype.beginUpdateUI=function(){this.updateUICount++},P.prototype.endUpdateUI=function(){this.updateUICount--},P.prototype.addInteractingItem=function(k,A){this.storage.addInteractingItem(k,A)},P.prototype.getInteractingItem=function(k,A){return this.storage.getInteractingItem(k,A)},P.prototype.getInteractingItemCount=function(){return this.storage.getInteractingItemCount()},P.prototype.clearInteractingItems=function(){this.storage.clearInteractingItems()},P.prototype.beginStorePermissions=function(){this.storage.beginStorePermissions()},P.prototype.endStorePermissions=function(){this.storage.endStorePermissions()},P.prototype.isStoredPermissionsGranted=function(){return this.permissionsLockCount>0||this.storage.isStoredPermissionsGranted()},P}();_.PermissionsProvider=w},9187:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PermissionsProviderStorage=void 0;var m=x(5503),b=x(7959),E=function(){function y(){this.interactingItems={},this.storedPermissions={}}return y.prototype.addInteractingItem=function(p,d){var s=this.getInteractingItemKey(p,d);void 0===this.interactingItems[s]&&(p instanceof m.Shape||p instanceof b.Connector)&&(this.interactingItems[s]=p.clone())},y.prototype.getInteractingItem=function(p,d){var s=this.getInteractingItemKey(p,d);return this.interactingItems[s]},y.prototype.getInteractingItemCount=function(){return Object.keys(this.interactingItems).length},y.prototype.clearInteractingItems=function(){this.interactingItems={}},y.prototype.getInteractingItemKey=function(p,d){return p.key+(void 0!==d?"_"+d.toString():"")},y.prototype.needStorePermissions=function(){return this.storePermissions},y.prototype.beginStorePermissions=function(){this.storePermissions=!0},y.prototype.endStorePermissions=function(){this.storePermissions=!1,this.storedPermissions={}},y.prototype.isStoredPermissionsGranted=function(){for(var p=Object.keys(this.storedPermissions),d=!0,s=0;s<p.length;s++)d=d&&this.storedPermissions[p[s]];return d},y.prototype.storePermission=function(p,d){this.storedPermissions[p]=d},y}();_.PermissionsProviderStorage=E},7255:function(J,_,x){var m,b=this&&this.__extends||(m=function(I,D){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var P in w)w.hasOwnProperty(P)&&(C[P]=w[P])})(I,D)},function(I,D){function C(){this.constructor=I}m(I,D),I.prototype=null===D?Object.create(D):(C.prototype=D.prototype,new C)});Object.defineProperty(_,"__esModule",{value:!0}),_.ContainerDescription=_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO=_.CONTAINER_EXPAND_BUTTON_RECT_RATIO=_.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO=_.CONTAINER_HEADER_SIZE=void 0;var E=x(6794),y=x(6353),p=x(2259),d=x(4716),s=x(7724),a=x(3500),l=x(6031),u=x(5329),h=x(7228),f=x(3742),g=x(6224);_.CONTAINER_HEADER_SIZE=360,_.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO=.2,_.CONTAINER_EXPAND_BUTTON_RECT_RATIO=.5,_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO=.3;var O=function(I){function D(C){return void 0===C&&(C=new y.Size(2*E.ShapeDefaultDimension,1.5*E.ShapeDefaultDimension)),I.call(this,C,!0)||this}return b(D,I),Object.defineProperty(D.prototype,"enableChildren",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),D.prototype.getDefaultText=function(){return g.DiagramLocalizationService.shapeTexts[p.ShapeTypes.Container]},D.prototype.createConnectionPoints=function(){return[new h.ConnectionPoint(.25,0,f.ConnectionPointSide.North),new h.ConnectionPoint(.5,0,f.ConnectionPointSide.North),new h.ConnectionPoint(.75,0,f.ConnectionPointSide.North),new h.ConnectionPoint(1,.25,f.ConnectionPointSide.East),new h.ConnectionPoint(1,.5,f.ConnectionPointSide.East),new h.ConnectionPoint(1,.75,f.ConnectionPointSide.East),new h.ConnectionPoint(.75,1,f.ConnectionPointSide.South),new h.ConnectionPoint(.5,1,f.ConnectionPointSide.South),new h.ConnectionPoint(.25,1,f.ConnectionPointSide.South),new h.ConnectionPoint(0,.75,f.ConnectionPointSide.West),new h.ConnectionPoint(0,.5,f.ConnectionPointSide.West),new h.ConnectionPoint(0,.25,f.ConnectionPointSide.West)]},D.prototype.getConnectionPointIndexForItem=function(C,w){return 4===(C&&C.getConnectionPoints()).length?3*w+1:w},D.prototype.getConnectionPointIndexForSide=function(C){return 3*C+1},D.prototype.createShapePrimitives=function(C,w){var P=C.rectangle,L=[];return C.expanded&&(L=L.concat([new d.RectanglePrimitive(P.x,P.y,P.width,P.height,C.style)])),L.concat(this.createHeaderPrimitives(C,w))},D.prototype.createExpandButtonPrimitives=function(C,w){var P=[new s.PathPrimitiveMoveToCommand(w.x+w.width*((1-_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2),w.center.y),new s.PathPrimitiveLineToCommand(w.x+w.width*((1-_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2+_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO),w.center.y)];C.expanded||(P=P.concat([new s.PathPrimitiveMoveToCommand(w.center.x,w.y+w.height*((1-_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2)),new s.PathPrimitiveLineToCommand(w.center.x,w.y+w.height*((1-_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO)/2+_.CONTAINER_EXPAND_BUTTON_SIGN_RATIO))]));var k=w.clone().inflate(-w.width*(1-_.CONTAINER_EXPAND_BUTTON_RECT_RATIO)/2,-w.height*(1-_.CONTAINER_EXPAND_BUTTON_RECT_RATIO)/2);return[new u.GroupPrimitive([new d.RectanglePrimitive(k.x,k.y,k.width,k.height,C.style),new s.PathPrimitive(P,C.style)],"shape-expand-btn",null,null,function(A){a.RenderUtils.setElementEventData(A,l.MouseEventElementType.ShapeExpandButton,C.key)})]},D}(E.ShapeDescription);_.ContainerDescription=O},944:function(J,_,x){var m,b=this&&this.__extends||(m=function(f,g){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,I){O.__proto__=I}||function(O,I){for(var D in I)I.hasOwnProperty(D)&&(O[D]=I[D])})(f,g)},function(f,g){function O(){this.constructor=f}m(f,g),f.prototype=null===g?Object.create(g):(O.prototype=g.prototype,new O)});Object.defineProperty(_,"__esModule",{value:!0}),_.HorizontalContainerDescription=void 0;var E=x(6794),y=x(8011),p=x(6353),d=x(8900),s=x(2259),a=x(7255),l=x(4716),u=x(9416),h=function(f){function g(){return f.call(this,new p.Size(2*E.ShapeDefaultDimension,1.5*E.ShapeDefaultDimension))||this}return b(g,f),Object.defineProperty(g.prototype,"key",{get:function(){return s.ShapeTypes.HorizontalContainer},enumerable:!1,configurable:!0}),g.prototype.getExpandedSize=function(O){return new p.Size(O.expandedSize.width,O.size.height)},g.prototype.getCollapsedSize=function(O){return new p.Size(a.CONTAINER_HEADER_SIZE+2*O.strokeWidth,O.size.height)},g.prototype.allowResizeHorizontally=function(O){return O.expanded},g.prototype.createHeaderPrimitives=function(O,I){var D=O.rectangle,C=D.x,w=D.y,P=D.height,k=this.getHeaderSize(O,I),A=[];return A=A.concat([new l.RectanglePrimitive(C,w,k,P,O.style)]),I||(A=A.concat(this.createExpandButtonPrimitives(O,new y.Rectangle(C,w,k,k)))),A},g.prototype.getClientRectangle=function(O){var I=O.rectangle,D=this.getHeaderSize(O);return y.Rectangle.fromGeometry(new d.Point(I.x+D,I.y),new p.Size(I.width-D,I.height))},g.prototype.getTextRectangle=function(O){var I=O.rectangle,D=this.getHeaderSize(O);return y.Rectangle.fromGeometry(new d.Point(I.x,I.y+D),new p.Size(D,I.height-D)).nonNegativeSize()},g.prototype.getSizeByText=function(O,I){var D=this.getHeaderSize(I);return new p.Size(I.size.width,Math.max(I.size.height,Math.max(O.width+D,I.size.height)))},g.prototype.getTextEditRectangle=function(O){var I=this.getTextRectangle(O);return y.Rectangle.fromGeometry(new d.Point(I.x,I.y+I.height),new p.Size(I.height,I.width))},g.prototype.getTextAngle=function(){return u.TextAngle.Angle270deg},g.prototype.getHeaderSize=function(O,I){return I?O.rectangle.height*a.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO:a.CONTAINER_HEADER_SIZE+2*O.strokeWidth},g}(a.ContainerDescription);_.HorizontalContainerDescription=h},5759:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.VerticalContainerDescription=void 0;var E=x(8900),y=x(6353),p=x(4716),d=x(8011),s=x(2259),a=x(6794),l=x(7255),u=function(h){function f(){return h.call(this,new y.Size(2*a.ShapeDefaultDimension,1.5*a.ShapeDefaultDimension))||this}return b(f,h),Object.defineProperty(f.prototype,"key",{get:function(){return s.ShapeTypes.VerticalContainer},enumerable:!1,configurable:!0}),f.prototype.getExpandedSize=function(g){return new y.Size(g.size.width,g.expandedSize.height)},f.prototype.getCollapsedSize=function(g){return new y.Size(g.size.width,l.CONTAINER_HEADER_SIZE+2*g.strokeWidth)},f.prototype.allowResizeVertically=function(g){return g.expanded},f.prototype.createHeaderPrimitives=function(g,O){var I=g.rectangle,D=I.x,C=I.y,w=I.width,P=this.getHeaderSize(g,O),k=[];return k=k.concat([new p.RectanglePrimitive(D,C,w,P,g.style)]),O||(k=k.concat(this.createExpandButtonPrimitives(g,new d.Rectangle(D,C,P,P)))),k},f.prototype.getClientRectangle=function(g){var O=g.rectangle,I=this.getHeaderSize(g);return d.Rectangle.fromGeometry(new E.Point(O.x,O.y+I),new y.Size(O.width,O.height-I))},f.prototype.getTextRectangle=function(g){var O=g.rectangle,I=this.getHeaderSize(g);return d.Rectangle.fromGeometry(new E.Point(O.x+I,O.y),new y.Size(O.width-I,I))},f.prototype.getSizeByText=function(g,O){var I=this.getHeaderSize(O);return new y.Size(Math.max(O.size.width,g.width+I),O.size.height)},f.prototype.getHeaderSize=function(g,O){return O?g.rectangle.height*l.CONTAINER_HEADER_TOOLBOX_SIZE_RATIO:l.CONTAINER_HEADER_SIZE+2*g.strokeWidth},f}(l.ContainerDescription);_.VerticalContainerDescription=u},6688:function(J,_,x){var m,b=this&&this.__extends||(m=function(D,C){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,P){w.__proto__=P}||function(w,P){for(var k in P)P.hasOwnProperty(k)&&(w[k]=P[k])})(D,C)},function(D,C){function w(){this.constructor=D}m(D,C),D.prototype=null===C?Object.create(C):(w.prototype=C.prototype,new w)});Object.defineProperty(_,"__esModule",{value:!0}),_.CustomShapeDescription=void 0;var E=x(1995),y=x(8011),p=x(6353),d=x(8900),s=x(7228),a=x(3742),l=x(4083),u=x(6794),h=x(6617),f=x(7176),g=x(590),O=x(1248),I=function(D){function C(w,P){var k=D.call(this,new p.Size(w.defaultWidth||P&&P.defaultSize.width||u.ShapeDefaultDimension,w.defaultHeight||P&&P.defaultSize.height||u.ShapeDefaultDimension))||this;if(k.properties=w,k.baseDescription=P,k.imageLoader=new g.ImageLoader(k.updateSvgImage.bind(k)),k.defaultText=void 0!==w.defaultText?w.defaultText:P&&P.getDefaultText(),k.defaultImageUrl=w.defaultImageUrl||P&&P.getDefaultImageUrl(),k.title=w.title||P&&P.getTitle()||k.defaultText||"",k.connectionPoints=k.createConnectionPoints(),w.svgUrl){k.svgImage=new h.ImageInfo(w.svgUrl);var A=f.ImageCache.instance.createUnloadedInfoByShapeImageInfo(k.svgImage);k.imageLoader.load(A)}return w.svgToolboxUrl&&(k.svgToolboxImage=new h.ImageInfo(w.svgToolboxUrl),A=f.ImageCache.instance.createUnloadedInfoByShapeImageInfo(k.svgToolboxImage),k.imageLoader.load(A)),k}return b(C,D),Object.defineProperty(C.prototype,"key",{get:function(){return this.properties.type},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"allowEditText",{get:function(){return!1!==this.properties.allowEditText},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"allowEditImage",{get:function(){return this.baseDescription?this.baseDescription.allowEditImage:!0===this.properties.allowEditImage},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"enableChildren",{get:function(){return this.baseDescription&&this.baseDescription.enableChildren},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"hasTemplate",{get:function(){return!!this.properties.createTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"minWidth",{get:function(){return this.properties.minWidth||this.baseDescription&&this.baseDescription.minWidth},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"minHeight",{get:function(){return this.properties.minHeight||this.baseDescription&&this.baseDescription.minHeight},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"maxWidth",{get:function(){return this.properties.maxWidth||this.baseDescription&&this.baseDescription.maxWidth},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"maxHeight",{get:function(){return this.properties.maxHeight||this.baseDescription&&this.baseDescription.maxHeight},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"keepRatioOnAutoSize",{get:function(){return this.properties.keepRatioOnAutoSize},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"toolboxSize",{get:function(){return this.properties.toolboxWidthToHeightRatio?new p.Size(this.defaultSize.width,this.defaultSize.width/this.properties.toolboxWidthToHeightRatio):this.defaultSize},enumerable:!1,configurable:!0}),C.prototype.getTextAngle=function(){return this.baseDescription&&this.baseDescription.getTextAngle()||D.prototype.getTextAngle.call(this)},C.prototype.getTitle=function(){return void 0!==this.title?this.title:D.prototype.getTitle.call(this)},C.prototype.getDefaultText=function(){return void 0!==this.defaultText?this.defaultText:D.prototype.getDefaultText.call(this)},C.prototype.getDefaultImageUrl=function(){return void 0!==this.defaultImageUrl?this.defaultImageUrl:D.prototype.getDefaultImageUrl.call(this)},C.prototype.allowResizeHorizontally=function(w){return!1!==this.properties.allowResize&&(this.baseDescription?this.baseDescription.allowResizeHorizontally(w):D.prototype.allowResizeHorizontally.call(this,w))},C.prototype.allowResizeVertically=function(w){return!1!==this.properties.allowResize&&(this.baseDescription?this.baseDescription.allowResizeVertically(w):D.prototype.allowResizeVertically.call(this,w))},C.prototype.createConnectionPoints=function(){return this.properties&&this.properties.connectionPoints&&this.properties.connectionPoints.length?this.properties.connectionPoints.map(function(w){if(w&&"number"==typeof w.x&&"number"==typeof w.y)return new s.ConnectionPoint(w.x,w.y,"number"==typeof w.side?w.side:a.ConnectionPointSide.Undefined)}).filter(function(w){return w}):D.prototype.createConnectionPoints.call(this)},C.prototype.getConnectionPointSides=function(){for(var w={},P=0;P<this.connectionPoints.length;P++){var k=u.ShapeDescription.getConnectionPointSideByGeometry(this.connectionPoints[P]);w[k]||(w[k]=[]),w[k].push(P)}return w},C.prototype.getConnectionPointIndexForSide=function(w){var P=this.getConnectionPointSides(),k=P[w];if(k){var A=Math.floor(k.length/2);return k.length%2==0&&A--,k[A]}return(k=P[(w+1)%4])?k[0]:(k=P[(w+3)%4])?k[k.length-1]:(k=P[(w+2)%4])?k[0]:w},C.prototype.createImagePrimitives=function(w,P){return this.baseDescription?this.baseDescription.createImagePrimitives(w,P):D.prototype.createImagePrimitives.call(this,w,P)},C.prototype.createShapePrimitives=function(w,P){var k=[],A=w.rectangle,R=A.x,M=A.y,L=A.width,H=A.height;if(this.baseDescription)k=this.baseDescription.createShapePrimitives(w,P);else{var j=P&&this.svgToolboxImage?this.svgToolboxImage:this.svgImage;j&&(k=k.concat([new E.ImagePrimitive(R+(this.properties.svgLeft&&!P?this.properties.svgLeft*L:0),M+(this.properties.svgTop&&!P?this.properties.svgTop*H:0),this.properties.svgWidth&&!P?this.properties.svgWidth*L:L,this.properties.svgHeight&&!P?this.properties.svgHeight*H:H,j.exportUrl)]))}var W=P&&this.properties.createToolboxTemplate||this.properties.createTemplate;if(W){var z=R+(this.properties.templateLeft&&!P?this.properties.templateLeft*L:0),Z=M+(this.properties.templateTop&&!P?this.properties.templateTop*H:0),se=this.properties.templateWidth&&!P?this.properties.templateWidth*L:L,re=this.properties.templateHeight&&!P?this.properties.templateHeight*H:H,Q=this.properties.apiController?this.properties.apiController.createNativeShape(w):w.toNative();k=k.concat([new O.SvgElementPrimitive(z,Z,se,re,W,this.properties.destroyTemplate,Q)])}return k},C.prototype.createParameters=function(w){return this.baseDescription?this.baseDescription.createParameters(w):D.prototype.createParameters.call(this,w)},C.prototype.normalizeParameters=function(w,P){this.baseDescription?this.baseDescription.normalizeParameters(w,P):D.prototype.normalizeParameters.call(this,w,P)},C.prototype.modifyParameters=function(w,P,k,A){this.baseDescription?this.baseDescription.modifyParameters(w,P,k,A):D.prototype.modifyParameters.call(this,w,P,k,A)},C.prototype.getParameterPoints=function(w){return this.baseDescription?this.baseDescription.getParameterPoints(w):D.prototype.getParameterPoints.call(this,w)},C.prototype.getTextRectangle=function(w){if(this.baseDescription)return this.baseDescription.getTextRectangle(w);var P=w.rectangle,R=P.width,M=P.height;return new y.Rectangle(P.x+(this.properties.textLeft?this.properties.textLeft*R:0),P.y+(this.properties.textTop?this.properties.textTop*M:0),this.properties.textWidth?this.properties.textWidth*R:R,this.properties.textHeight?this.properties.textHeight*M:M)},C.prototype.getSizeByText=function(w,P){if(this.baseDescription)return this.baseDescription.getSizeByText(w,P);var k=this.properties.textWidth;k||(k=1);var A=this.properties.textHeight;return A||(A=1),new p.Size(w.width/k,w.height/A)},C.prototype.getImageSize=function(w,P,k){return this.baseDescription?this.baseDescription instanceof l.ShapeWithImageDescription?this.baseDescription.getImageSize(w,P,k):p.Size.empty():new p.Size(this.properties.imageWidth?this.properties.imageWidth*w.width:w.width,this.properties.imageHeight?this.properties.imageHeight*w.height:w.height).nonNegativeSize()},C.prototype.getImagePlacementRectangle=function(w,P){if(this.baseDescription)return this.baseDescription instanceof l.ShapeWithImageDescription?this.baseDescription.getImagePlacementRectangle(w,P):y.Rectangle.fromGeometry(d.Point.zero(),p.Size.empty());var R=w.width,M=w.height;return new y.Rectangle(w.x+(this.properties.imageLeft&&!P?this.properties.imageLeft*R:0),w.y+(this.properties.imageTop&&!P?this.properties.imageTop*M:0),this.properties.imageWidth&&!P?this.properties.imageWidth*R:R,this.properties.imageHeight&&!P?this.properties.imageHeight*M:M)},C.prototype.updateSvgImage=function(w){var P=this.svgToolboxImage&&w.imageUrl&&w.imageUrl===this.properties.svgToolboxUrl,k=P?this.svgToolboxImage:this.svgImage;w.base64?k.loadBase64Content(w.base64):k.setUnableToLoadFlag(),P||this.raiseShapeDescriptionChanged(this)},C}(l.ShapeWithImageDescription);_.CustomShapeDescription=I},7552:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorShapeDescription=void 0;var E=x(2259),y=x(6353),p=x(6794),d=function(s){function a(){var l=s.call(this,!1)||this;return l.defaultSize=new y.Size(.5*p.ShapeDefaultDimension,.5*p.ShapeDefaultDimension),l}return b(a,s),Object.defineProperty(a.prototype,"key",{get:function(){return E.ShapeTypes.Connector},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),a}(x(7768).EllipseShapeDescription);_.ConnectorShapeDescription=d},4941:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.DataShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(3742),s=x(6794),a=function(l){function u(){return l.call(this,void 0,!0)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.Data},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.width,P=Math.min(Math.max(0,f.height/Math.tan(u.slopeAngle)),C),A=I-P;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(g+P,O),new p.PathPrimitiveLineToCommand(I,O),new p.PathPrimitiveLineToCommand(A,D),new p.PathPrimitiveLineToCommand(g,D),new p.PathPrimitiveClosePathCommand],h.style)]},u.prototype.processConnectionPoint=function(h,f){var g=h.size.height/Math.tan(u.slopeAngle),O=h.getConnectionPointSide(f);O===d.ConnectionPointSide.East?f.x-=g/2:O===d.ConnectionPointSide.West&&(f.x+=g/2)},u.prototype.getTextRectangle=function(h){var f=Math.min(Math.max(0,h.size.height/Math.tan(u.slopeAngle)),h.size.width);return h.rectangle.clone().moveRectangle(f,s.ShapeTextPadding).resize(2*-f,2*-s.ShapeTextPadding)},u.slopeAngle=81*Math.PI/180,u}(E.RectangleShapeDescription);_.DataShapeDescription=a},1034:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.DatabaseShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(418),s=function(a){function l(){var u=a.call(this,void 0,!0)||this;return u.defaultSize.width=u.defaultSize.height,u}return b(l,a),Object.defineProperty(l.prototype,"key",{get:function(){return y.ShapeTypes.Database},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createShapePrimitives=function(u){var h=u.rectangle,f=h.x,g=h.y,O=h.right,I=h.bottom,C=h.center.x,w=h.height*l.arcWidthRatio;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(O,g+w/2),new p.PathPrimitiveLineToCommand(O,I-w/2),new p.PathPrimitiveArcToCommand((O-f)/2,w/2,0,!1,!0,f,I-w/2),new p.PathPrimitiveLineToCommand(f,g+w/2)],u.style),new d.EllipsePrimitive(C,g+w/2,(O-f)/2,w/2,u.style)]},l.prototype.getTextRectangle=function(u){var h=u.rectangle,f=h.height*l.arcWidthRatio;return h.clone().resize(0,-f).clone().moveRectangle(0,f)},l.arcWidthRatio=.2,l}(E.RectangleShapeDescription);_.DatabaseShapeDescription=s},6825:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.DecisionShapeDescription=void 0;var E=x(5303),y=x(2259),p=x(6353),d=x(6794),s=function(a){function l(){return a.call(this,new p.Size(d.ShapeDefaultDimension,.75*d.ShapeDefaultDimension),!0)||this}return b(l,a),Object.defineProperty(l.prototype,"key",{get:function(){return y.ShapeTypes.Decision},enumerable:!1,configurable:!0}),l}(E.DiamondShapeDescription);_.DecisionShapeDescription=s},9229:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.DelayShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(8675),s=x(6794),a=x(6353),l=function(u){function h(){var f=u.call(this,void 0,!0)||this;return f.defaultSize.width=f.defaultSize.height,f}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.Delay},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,w=g.center.x;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(O,I),new p.PathPrimitiveLineToCommand(w,I),new p.PathPrimitiveArcToCommand((D-O)/2,(C-I)/2,0,!1,!0,w,C),new p.PathPrimitiveLineToCommand(O,C),new p.PathPrimitiveClosePathCommand],f.style)]},h.prototype.getTextRectangle=function(f){var g=d.GeometryUtils.getMaxRectangleEnscribedInEllipse(f.size);return f.rectangle.clone().moveRectangle(s.ShapeTextPadding,s.ShapeTextPadding).setSize({width:g.width/2+f.size.width/2-s.ShapeTextPadding,height:g.height/2+f.size.height/2-s.ShapeTextPadding}).nonNegativeSize()},h.prototype.getSizeByText=function(f,g){var O=d.GeometryUtils.getEllipseByEnscribedRectangle(f);return new a.Size(O.width/2+f.width/2+s.ShapeTextPadding,O.height/2+f.height/2+s.ShapeTextPadding)},h.arcWidthRatio=.2,h}(E.RectangleShapeDescription);_.DelayShapeDescription=l},2650:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.DisplayShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(6794),s=function(a){function l(){return a.call(this,void 0,!0)||this}return b(l,a),Object.defineProperty(l.prototype,"key",{get:function(){return y.ShapeTypes.Display},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createShapePrimitives=function(u){var h=u.rectangle,f=h.x,g=h.y,O=h.right,I=h.bottom,C=h.center.y,w=h.width*l.arcWidthRatio;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(O-w/2,g),new p.PathPrimitiveLineToCommand(f+w/2,g),new p.PathPrimitiveLineToCommand(f,C),new p.PathPrimitiveLineToCommand(f+w/2,I),new p.PathPrimitiveLineToCommand(O-w/2,I),new p.PathPrimitiveArcToCommand(w/2,(I-g)/2,0,!1,!1,O-w/2,g)],u.style)]},l.prototype.getTextRectangle=function(u){var h=u.size.width*l.arcWidthRatio;return u.rectangle.clone().moveRectangle(h/2,d.ShapeTextPadding).resize(-h,2*-d.ShapeTextPadding).nonNegativeSize()},l.arcWidthRatio=.2,l}(E.RectangleShapeDescription);_.DisplayShapeDescription=s},3525:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.DocumentShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(3742),s=function(a){function l(){return a.call(this,void 0,!0)||this}return b(l,a),Object.defineProperty(l.prototype,"key",{get:function(){return y.ShapeTypes.Document},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createShapePrimitives=function(u){return this.createDocumentPrimitives(u.rectangle,u.style)},l.prototype.createDocumentPrimitives=function(u,h){var f=u.x,g=u.y,O=u.right,I=u.bottom,D=u.width,w=u.center.x,P=u.height*l.curveOffsetRatio;return[].concat([new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(f,g),new p.PathPrimitiveLineToCommand(O,g),new p.PathPrimitiveLineToCommand(O,I),new p.PathPrimitiveQuadraticCurveToCommand(O-.25*D,I-2*P,w,I-P),new p.PathPrimitiveQuadraticCurveToCommand(f+.25*D,I+P,f,I-P),new p.PathPrimitiveClosePathCommand],h)])},l.prototype.processConnectionPoint=function(u,h){u.getConnectionPointSide(h)===d.ConnectionPointSide.South&&(h.y-=u.size.height*l.curveOffsetRatio)},l.prototype.getTextRectangle=function(u){var h=u.rectangle;return h.clone().resize(0,-h.height*l.curveOffsetRatio)},l.curveOffsetRatio=.1,l}(E.RectangleShapeDescription);_.DocumentShapeDescription=s},1314:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.HardDiskShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(418),s=x(6794),a=x(6353),l=function(u){function h(){return u.call(this,void 0,!0)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.HardDisk},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,P=g.center.y,k=g.width*h.arcWidthRatio;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(D-k/2,I),new p.PathPrimitiveLineToCommand(O+k/2,I),new p.PathPrimitiveArcToCommand(k/2,(C-I)/2,0,!1,!1,O+k/2,C),new p.PathPrimitiveLineToCommand(D-k/2,C)],f.style),new d.EllipsePrimitive(D-k/2,P,k/2,(C-I)/2,f.style)]},h.prototype.getTextRectangle=function(f){var g=f.rectangle,O=g.width*h.arcWidthRatio*1.5;return g.clone().resize(-O-2*s.ShapeTextPadding,-2*s.ShapeTextPadding).moveRectangle(s.ShapeTextPadding,s.ShapeTextPadding).nonNegativeSize()},h.prototype.getSizeByText=function(f,g){return new a.Size((f.width+2*s.ShapeTextPadding)/(1-1.5*h.arcWidthRatio),g.size.height+s.ShapeTextPadding)},h.arcWidthRatio=.2,h}(E.RectangleShapeDescription);_.HardDiskShapeDescription=l},2751:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.InternalStorageShapeDescription=_.InternalStorageVerticalEdgeParameterName=_.InternalStorageHorizontalEdgeParameterName=void 0;var E=x(1561),y=x(2259),p=x(6629),d=x(1852),s=x(8900),a=x(7724);_.InternalStorageHorizontalEdgeParameterName="he",_.InternalStorageVerticalEdgeParameterName="ve";var l=function(u){function h(){return u.call(this,void 0,!0)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.InternalStorage},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,w=O+f.parameters.get(_.InternalStorageHorizontalEdgeParameterName).value,P=I+f.parameters.get(_.InternalStorageVerticalEdgeParameterName).value;return u.prototype.createShapePrimitives.call(this,f).concat([new a.PathPrimitive([new a.PathPrimitiveMoveToCommand(w,I),new a.PathPrimitiveLineToCommand(w,C),new a.PathPrimitiveMoveToCommand(O,P),new a.PathPrimitiveLineToCommand(D,P)],f.style)])},h.prototype.createParameters=function(f){f.addRangeIfNotExists([new p.ShapeParameter(_.InternalStorageHorizontalEdgeParameterName,.1*this.defaultSize.width),new p.ShapeParameter(_.InternalStorageVerticalEdgeParameterName,.1*this.defaultSize.width)])},h.prototype.normalizeParameters=function(f,g){this.changeParameterValue(g,_.InternalStorageHorizontalEdgeParameterName,function(O){return Math.max(h.minEdge,Math.min(.3*f.size.width,O.value))}),this.changeParameterValue(g,_.InternalStorageVerticalEdgeParameterName,function(O){return Math.max(h.minEdge,Math.min(.3*f.size.height,O.value))})},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,_.InternalStorageHorizontalEdgeParameterName,function(D){return D.value+O}),this.changeParameterValue(g,_.InternalStorageVerticalEdgeParameterName,function(D){return D.value+I}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new d.ShapeParameterPoint("c",new s.Point(f.normalizeX(f.position.x+f.parameters.get(_.InternalStorageHorizontalEdgeParameterName).value),f.normalizeY(f.position.y+f.parameters.get(_.InternalStorageVerticalEdgeParameterName).value)))]},h.prototype.getTextRectangle=function(f){var g=f.rectangle,O=f.parameters.get(_.InternalStorageHorizontalEdgeParameterName).value;return g.clone().resize(-O,0).clone().moveRectangle(O,0)},h.minEdge=72,h}(E.RectangleShapeDescription);_.InternalStorageShapeDescription=l},9144:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ManualInputShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(3742),s=x(6794),a=function(l){function u(){return l.call(this,void 0,!0)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.ManualInput},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(g,O+f.height*u.slopeHeightRatio),new p.PathPrimitiveLineToCommand(I,O),new p.PathPrimitiveLineToCommand(I,D),new p.PathPrimitiveLineToCommand(g,D),new p.PathPrimitiveClosePathCommand],h.style)]},u.prototype.processConnectionPoint=function(h,f){h.getConnectionPointSide(f)===d.ConnectionPointSide.North&&(f.y+=u.slopeHeightRatio/2*h.size.height)},u.prototype.getTextRectangle=function(h){var f=h.size.height*u.slopeHeightRatio;return h.rectangle.clone().moveRectangle(s.ShapeTextPadding,f).resize(2*-s.ShapeTextPadding,-f-s.ShapeTextPadding).nonNegativeSize()},u.slopeHeightRatio=.1,u}(E.RectangleShapeDescription);_.ManualInputShapeDescription=a},1643:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ManualOperationShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(3742),s=x(6794),a=function(l){function u(){return l.call(this,void 0,!0)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.ManualOperation},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=h.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,w=g.width,k=Math.min(Math.max(0,g.height/Math.tan(u.slopeAngle)),w),A=f.center.x,R=Math.min(O+k,A),M=Math.max(D-k,A);return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(O,I),new p.PathPrimitiveLineToCommand(D,I),new p.PathPrimitiveLineToCommand(M,C),new p.PathPrimitiveLineToCommand(R,C),new p.PathPrimitiveClosePathCommand],h.style)]},u.prototype.processConnectionPoint=function(h,f){var g=h.size.height/Math.tan(u.slopeAngle),O=h.getConnectionPointSide(f);O===d.ConnectionPointSide.East?f.x-=g/2:O===d.ConnectionPointSide.West&&(f.x+=g/2)},u.prototype.getTextRectangle=function(h){var f=Math.min(Math.max(0,h.size.height/Math.tan(u.slopeAngle)),h.size.width);return h.rectangle.clone().moveRectangle(f,s.ShapeTextPadding).resize(2*-f,2*-s.ShapeTextPadding).nonNegativeSize()},u.slopeAngle=81*Math.PI/180,u}(E.RectangleShapeDescription);_.ManualOperationShapeDescription=a},3046:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.MergeShapeDescription=void 0;var E=x(2259),y=x(8011),p=x(2117),d=x(7724),s=x(6794),a=x(6353),l=function(u){function h(){return u.call(this,!0)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return E.ShapeTypes.Merge},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,I=g.y,D=g.right,C=g.bottom;return[new d.PathPrimitive([new d.PathPrimitiveMoveToCommand(g.x,I),new d.PathPrimitiveLineToCommand(D,I),new d.PathPrimitiveLineToCommand(g.center.x,C),new d.PathPrimitiveClosePathCommand],f.style)]},h.prototype.calculateHeight=function(f){return.75*f},h.prototype.getTextRectangle=function(f){return y.Rectangle.fromGeometry(f.position.clone().offset(f.size.width/4,s.ShapeTextPadding),new a.Size(f.size.width/2,f.size.height/2-s.ShapeTextPadding))},h.prototype.getSizeByText=function(f,g){return new a.Size(2*f.width,2*(f.height+s.ShapeTextPadding))},h}(p.TriangleShapeDescription);_.MergeShapeDescription=l},2850:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.MultipleDocumentsShapeDescription=void 0;var E=x(2259),y=x(7724),p=x(3525),d=x(4593),s=x(3500),a=x(6794),l=x(6353),u=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return b(f,h),Object.defineProperty(f.prototype,"key",{get:function(){return E.ShapeTypes.MultipleDocuments},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),f.prototype.createShapePrimitives=function(g,O){var I=g.rectangle,D=g.rectangle,w=D.height,P=O?f.documentsOffsetRatioForToolbox:f.documentsOffsetRatio,k=Math.ceil(D.width*P),A=Math.ceil(w*P),R=(I=I.clone().inflate(-k,-A).clone().moveRectangle(-k,-A)).clone().moveRectangle(k,A),M=R.clone().moveRectangle(k,A),L=s.RenderUtils.generateSvgElementId("clipRect");return[].concat(this.createDocumentPrimitives(I,g.style,L+"1",R)).concat(this.createDocumentPrimitives(R,g.style,L+"2",M)).concat(this.createDocumentPrimitives(M,g.style))},f.prototype.createDocumentPrimitives=function(g,O,I,D){var C=g.x,w=g.y,P=g.right,k=g.bottom,A=g.width,M=g.center.x,L=g.height*p.DocumentShapeDescription.curveOffsetRatio,H=[];return H=H.concat([new y.PathPrimitive([new y.PathPrimitiveMoveToCommand(C,w),new y.PathPrimitiveLineToCommand(P,w),new y.PathPrimitiveLineToCommand(P,k),new y.PathPrimitiveQuadraticCurveToCommand(P-.25*A,k-2*L,M,k-L),new y.PathPrimitiveQuadraticCurveToCommand(C+.25*A,k+L,C,k-L),new y.PathPrimitiveClosePathCommand],O,void 0,D&&I)]),D&&I&&(H=H.concat([new d.ClipPathPrimitive(I,[new y.PathPrimitive([new y.PathPrimitiveMoveToCommand(C-O.strokeWidth,w-O.strokeWidth),new y.PathPrimitiveLineToCommand(P+O.strokeWidth,w-O.strokeWidth),new y.PathPrimitiveLineToCommand(P+O.strokeWidth,D.y),new y.PathPrimitiveLineToCommand(D.x,D.y),new y.PathPrimitiveLineToCommand(D.x,k+O.strokeWidth),new y.PathPrimitiveLineToCommand(C-O.strokeWidth,k+O.strokeWidth),new y.PathPrimitiveClosePathCommand])])])),H},f.prototype.getTextRectangle=function(g){var O=g.rectangle,I=O.width*f.documentsOffsetRatio,D=O.height*f.documentsOffsetRatio;return(O=O.clone().inflate(-I,-D).clone().moveRectangle(-I,-D)).clone().moveRectangle(2*I+a.ShapeTextPadding,2*D+a.ShapeTextPadding).clone().resize(-2*a.ShapeTextPadding,-O.height*p.DocumentShapeDescription.curveOffsetRatio-2*a.ShapeTextPadding)},f.prototype.getSizeByText=function(g,O){return new l.Size((g.width+2*a.ShapeTextPadding)/(1-2*f.documentsOffsetRatio),(g.height+2*a.ShapeTextPadding)/((1-p.DocumentShapeDescription.curveOffsetRatio)*(1-f.documentsOffsetRatio))).nonNegativeSize()},f.documentsOffsetRatio=.1,f.documentsOffsetRatioForToolbox=.16,f}(p.DocumentShapeDescription);_.MultipleDocumentsShapeDescription=u},2019:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.OrShapeDescription=void 0;var E=x(2259),y=x(6353),p=x(6794),d=x(7768),s=x(7724),a=function(l){function u(){var h=l.call(this,!0)||this;return h.defaultSize=new y.Size(.5*p.ShapeDefaultDimension,.5*p.ShapeDefaultDimension),h}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return E.ShapeTypes.Or},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"enableText",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.center,w=C.x,P=C.y;return[].concat(l.prototype.createShapePrimitives.call(this,h)).concat([new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(w,O),new s.PathPrimitiveLineToCommand(w,D),new s.PathPrimitiveMoveToCommand(g,P),new s.PathPrimitiveLineToCommand(I,P)],h.style)])},u}(d.EllipseShapeDescription);_.OrShapeDescription=a},8110:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.PaperTapeShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(3742),s=x(6794),a=x(6353),l=function(u){function h(){return u.call(this,void 0,!0)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.PaperTape},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){return this.createDocumentPrimitives(f.rectangle,f.style)},h.prototype.createDocumentPrimitives=function(f,g){var O=f.x,I=f.y,D=f.right,C=f.bottom,w=f.width,k=f.center.x,A=f.height*h.curveOffsetRatio;return[].concat([new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(O,I),new p.PathPrimitiveQuadraticCurveToCommand(O+.25*w,I+2*A,k,I+A),new p.PathPrimitiveQuadraticCurveToCommand(D-.25*w,I-A,D,I+A),new p.PathPrimitiveLineToCommand(D,C),new p.PathPrimitiveQuadraticCurveToCommand(D-.25*w,C-2*A,k,C-A),new p.PathPrimitiveQuadraticCurveToCommand(O+.25*w,C+A,O,C-A),new p.PathPrimitiveClosePathCommand],g)])},h.prototype.processConnectionPoint=function(f,g){var O=f.getConnectionPointSide(g);O===d.ConnectionPointSide.North&&(g.y+=f.size.height*h.curveOffsetRatio),O===d.ConnectionPointSide.South&&(g.y-=f.size.height*h.curveOffsetRatio)},h.prototype.getTextRectangle=function(f){var g=f.rectangle;return g.clone().inflate(s.ShapeTextPadding,-g.height*h.curveOffsetRatio)},h.prototype.getSizeByText=function(f,g){return new a.Size(f.width+2*s.ShapeTextPadding,f.height/(1-2*h.curveOffsetRatio))},h.curveOffsetRatio=.1,h}(E.RectangleShapeDescription);_.PaperTapeShapeDescription=l},6508:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.PredefinedProcessShapeDescription=_.PredefinedProcessEdgeParameterName=void 0;var E=x(1561),y=x(2259),p=x(6629),d=x(1852),s=x(8900),a=x(7724);_.PredefinedProcessEdgeParameterName="e";var l=function(u){function h(){return u.call(this,void 0,!0)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.PredefinedProcess},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,I=g.y,D=g.right,C=g.bottom,w=g.x+f.parameters.get(_.PredefinedProcessEdgeParameterName).value,P=D-f.parameters.get(_.PredefinedProcessEdgeParameterName).value;return u.prototype.createShapePrimitives.call(this,f).concat([new a.PathPrimitive([new a.PathPrimitiveMoveToCommand(w,I),new a.PathPrimitiveLineToCommand(w,C),new a.PathPrimitiveMoveToCommand(P,I),new a.PathPrimitiveLineToCommand(P,C)],f.style)])},h.prototype.createParameters=function(f){f.addIfNotExists(new p.ShapeParameter(_.PredefinedProcessEdgeParameterName,.1*this.defaultSize.width))},h.prototype.normalizeParameters=function(f,g){this.changeParameterValue(g,_.PredefinedProcessEdgeParameterName,function(O){return Math.max(h.minEdge,Math.min(.3*f.size.width,O.value))})},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,_.PredefinedProcessEdgeParameterName,function(D){return D.value+O}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new d.ShapeParameterPoint("c",new s.Point(f.normalizeX(f.position.x+f.parameters.get(_.PredefinedProcessEdgeParameterName).value),f.position.y))]},h.prototype.getTextRectangle=function(f){var g=f.rectangle,O=f.parameters.get(_.PredefinedProcessEdgeParameterName).value;return g.clone().resize(-2*O,0).clone().moveRectangle(O,0)},h.minEdge=72,h}(E.RectangleShapeDescription);_.PredefinedProcessShapeDescription=l},4112:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.PreparationShapeDescription=void 0;var E=x(2259),y=x(6353),p=x(6794),d=function(s){function a(){var l=s.call(this,!0)||this;return l.defaultSize=new y.Size(p.ShapeDefaultDimension,.75*p.ShapeDefaultDimension),l}return b(a,s),Object.defineProperty(a.prototype,"key",{get:function(){return E.ShapeTypes.Preparation},enumerable:!1,configurable:!0}),a}(x(2953).HexagonShapeDescription);_.PreparationShapeDescription=d},5331:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ProcessShapeDescription=void 0;var E=x(1561),y=x(2259),p=function(d){function s(){return d.call(this,void 0,!0)||this}return b(s,d),Object.defineProperty(s.prototype,"key",{get:function(){return y.ShapeTypes.Process},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),s}(E.RectangleShapeDescription);_.ProcessShapeDescription=p},4810:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.StoredDataShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(6794),s=x(6353),a=function(l){function u(){return l.call(this,void 0,!0)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.StoredData},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.width*u.arcWidthRatio;return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(I,O),new p.PathPrimitiveLineToCommand(g+C/2,O),new p.PathPrimitiveArcToCommand(C/2,(D-O)/2,0,!1,!1,g+C/2,D),new p.PathPrimitiveLineToCommand(I,D),new p.PathPrimitiveArcToCommand(C/2,(D-O)/2,0,!1,!0,I,O)],h.style)]},u.prototype.getTextRectangle=function(h){var f=h.rectangle,g=f.width*u.arcWidthRatio/2;return f.clone().resize(-g-2*d.ShapeTextPadding,-2*d.ShapeTextPadding).moveRectangle(d.ShapeTextPadding,d.ShapeTextPadding).nonNegativeSize()},u.prototype.getSizeByText=function(h,f){return new s.Size((h.width+2*d.ShapeTextPadding)/(1-u.arcWidthRatio/2),h.height+2*d.ShapeTextPadding)},u.arcWidthRatio=.2,u}(E.RectangleShapeDescription);_.StoredDataShapeDescription=a},6182:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.SummingJunctionShapeDescription=void 0;var E=x(2259),y=x(6353),p=x(6794),d=x(7768),s=x(7724),a=function(l){function u(){var h=l.call(this,!0)||this;return h.defaultSize=new y.Size(.5*p.ShapeDefaultDimension,.5*p.ShapeDefaultDimension),h}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return E.ShapeTypes.SummingJunction},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"enableText",{get:function(){return!1},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,I=f.center,D=I.x,C=I.y,w=f.width/2,P=f.height/2,k=Math.atan(P/w),A=1/Math.sqrt(1/Math.pow(w,2)+Math.pow(Math.tan(k),2)/Math.pow(P,2)),R=A*Math.tan(k);return[].concat(l.prototype.createShapePrimitives.call(this,h)).concat([new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(D-A,C-R),new s.PathPrimitiveLineToCommand(D+A,C+R),new s.PathPrimitiveMoveToCommand(D-A,C+R),new s.PathPrimitiveLineToCommand(D+A,C-R)],h.style)])},u}(d.EllipseShapeDescription);_.SummingJunctionShapeDescription=a},6242:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.TerminatorShapeDescription=void 0;var E=x(1561),y=x(2259),p=x(7724),d=x(6353),s=x(6794),a=x(8011),l=x(8675),u=function(h){function f(){return h.call(this,new d.Size(s.ShapeDefaultDimension,.5*s.ShapeDefaultDimension),!0)||this}return b(f,h),Object.defineProperty(f.prototype,"key",{get:function(){return y.ShapeTypes.Terminator},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),f.prototype.createShapePrimitives=function(g){var O=g.rectangle,I=O.x,D=O.y,C=O.right,w=O.bottom,P=O.width,k=O.center.y,A=I+P*f.curveWidthRatio,R=I+P*(1-f.curveWidthRatio);return[new p.PathPrimitive([new p.PathPrimitiveMoveToCommand(A,D),new p.PathPrimitiveLineToCommand(R,D),new p.PathPrimitiveQuadraticCurveToCommand(C,D,C,k),new p.PathPrimitiveQuadraticCurveToCommand(C,w,R,w),new p.PathPrimitiveLineToCommand(A,w),new p.PathPrimitiveQuadraticCurveToCommand(I,w,I,k),new p.PathPrimitiveQuadraticCurveToCommand(I,D,A,D),new p.PathPrimitiveClosePathCommand],g.style)]},f.prototype.getTextRectangle=function(g){var O=l.GeometryUtils.getMaxRectangleEnscribedInEllipse(g.size);return a.Rectangle.fromGeometry(g.position.clone().offset((g.size.width-O.width)/2,(g.size.height-O.height)/2),O)},f.prototype.getSizeByText=function(g,O){return l.GeometryUtils.getEllipseByEnscribedRectangle(g)},f.curveWidthRatio=.3,f}(E.RectangleShapeDescription);_.TerminatorShapeDescription=u},4958:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowDownShapeDescription=void 0;var E=x(7724),y=x(1852),p=x(8900),d=x(731),s=x(2259),a=x(3742),l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return s.ShapeTypes.ArrowDown},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,P=g.height,k=g.center.x,A=(g.width-f.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2,R=P-f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value,M=f.normalizeX(O+A),L=f.normalizeY(I+R),H=f.normalizeX(D-A);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(M,I),new E.PathPrimitiveLineToCommand(H,I),new E.PathPrimitiveLineToCommand(H,L),new E.PathPrimitiveLineToCommand(D,L),new E.PathPrimitiveLineToCommand(k,C),new E.PathPrimitiveLineToCommand(O,L),new E.PathPrimitiveLineToCommand(M,L),new E.PathPrimitiveClosePathCommand],f.style)]},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,d.ArrowVerticalTriangleHeightParameterName,function(D){return D.value-I}),this.changeParameterValue(g,d.ArrowVerticalLineWidthParameterName,function(D){return D.value-2*O}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new y.ShapeParameterPoint("c",new p.Point(f.normalizeX(f.position.x+(f.size.width-f.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2),f.normalizeY(f.position.y+f.size.height-f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value)))]},h.prototype.processConnectionPoint=function(f,g){var O=f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value;if(g.y>f.position.y+f.size.height-O){var D=f.size.width/2/O*(g.y-(f.position.y+f.size.height-O)),C=f.getConnectionPointSide(g);C===a.ConnectionPointSide.East?g.x-=D:C===a.ConnectionPointSide.West&&(g.x+=D)}else u.prototype.processConnectionPoint.call(this,f,g)},h}(d.ArrowVerticalShapeDescription);_.ArrowDownShapeDescription=l},4493:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowHorizontalShapeDescription=_.ArrowVerticalLineHeightParameterName=_.ArrowVerticalTriangleWidthParameterName=void 0;var E=x(6794),y=x(6353),p=x(6629),d=x(3742);_.ArrowVerticalTriangleWidthParameterName="tw",_.ArrowVerticalLineHeightParameterName="lh";var s=function(a){function l(){return a.call(this,new y.Size(E.ShapeDefaultDimension,.375*E.ShapeDefaultDimension))||this}return b(l,a),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createParameters=function(u){u.addRangeIfNotExists([new p.ShapeParameter(_.ArrowVerticalTriangleWidthParameterName,Math.sqrt(Math.pow(this.defaultSize.height,2)-Math.pow(this.defaultSize.height/2,2))),new p.ShapeParameter(_.ArrowVerticalLineHeightParameterName,this.defaultSize.height/3)])},l.prototype.normalizeParameters=function(u,h){this.changeParameterValue(h,_.ArrowVerticalTriangleWidthParameterName,function(f){return Math.max(0,Math.min(u.size.width,f.value))}),this.changeParameterValue(h,_.ArrowVerticalLineHeightParameterName,function(f){return Math.max(0,Math.min(u.size.height,f.value))})},l.prototype.processConnectionPoint=function(u,h){var f=(u.size.height-u.parameters.get(_.ArrowVerticalLineHeightParameterName).value)/2,g=u.getConnectionPointSide(h);g===d.ConnectionPointSide.North?h.y+=f:g===d.ConnectionPointSide.South&&(h.y-=f)},l.prototype.getTextRectangle=function(u){return u.rectangle.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding)},l.prototype.getSizeByText=function(u,h){return u.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding)},l}(E.ShapeDescription);_.ArrowHorizontalShapeDescription=s},8800:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowLeftRightShapeDescription=void 0;var E=x(7724),y=x(4493),p=x(1852),d=x(8900),s=x(2259),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return s.ShapeTypes.ArrowLeftRight},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.height,w=f.center.y,P=h.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value,k=(C-h.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2,A=h.normalizeX(g+P),R=h.normalizeY(O+k),M=h.normalizeX(I-P),L=h.normalizeY(D-k);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(g,w),new E.PathPrimitiveLineToCommand(A,O),new E.PathPrimitiveLineToCommand(A,R),new E.PathPrimitiveLineToCommand(M,R),new E.PathPrimitiveLineToCommand(M,O),new E.PathPrimitiveLineToCommand(I,w),new E.PathPrimitiveLineToCommand(M,D),new E.PathPrimitiveLineToCommand(M,L),new E.PathPrimitiveLineToCommand(A,L),new E.PathPrimitiveLineToCommand(A,D),new E.PathPrimitiveClosePathCommand],h.style)]},u.prototype.normalizeParameters=function(h,f){this.changeParameterValue(f,y.ArrowVerticalTriangleWidthParameterName,function(g){return Math.max(0,Math.min(h.size.width/2-2*h.strokeWidth,g.value))}),this.changeParameterValue(f,y.ArrowVerticalLineHeightParameterName,function(g){return Math.max(0,Math.min(h.size.height,g.value))})},u.prototype.modifyParameters=function(h,f,g,O){this.changeParameterValue(f,y.ArrowVerticalTriangleWidthParameterName,function(I){return I.value+g}),this.changeParameterValue(f,y.ArrowVerticalLineHeightParameterName,function(I){return I.value-2*O}),this.normalizeParameters(h,f)},u.prototype.getParameterPoints=function(h){return[new p.ShapeParameterPoint("c",new d.Point(h.normalizeX(h.position.x+h.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value),h.normalizeY(h.position.y+(h.size.height-h.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2)))]},u}(y.ArrowHorizontalShapeDescription);_.ArrowLeftRightShapeDescription=a},6023:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowLeftShapeDescription=void 0;var E=x(7724),y=x(4493),p=x(1852),d=x(8900),s=x(2259),a=x(3742),l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return s.ShapeTypes.ArrowLeft},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,w=g.height,P=g.center.y,k=f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value,A=(w-f.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2,R=f.normalizeX(O+k),M=f.normalizeY(I+A),L=f.normalizeY(C-A);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(O,P),new E.PathPrimitiveLineToCommand(R,I),new E.PathPrimitiveLineToCommand(R,M),new E.PathPrimitiveLineToCommand(D,M),new E.PathPrimitiveLineToCommand(D,L),new E.PathPrimitiveLineToCommand(R,L),new E.PathPrimitiveLineToCommand(R,C),new E.PathPrimitiveClosePathCommand],f.style)]},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,y.ArrowVerticalTriangleWidthParameterName,function(D){return D.value+O}),this.changeParameterValue(g,y.ArrowVerticalLineHeightParameterName,function(D){return D.value-2*I}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new p.ShapeParameterPoint("c",new d.Point(f.normalizeX(f.position.x+f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value),f.normalizeY(f.position.y+(f.size.height-f.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2)))]},h.prototype.processConnectionPoint=function(f,g){var O=f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value;if(g.x<f.position.x+O){var D=f.size.height/2/O*(f.position.x+O-g.x),C=f.getConnectionPointSide(g);C===a.ConnectionPointSide.North?g.y+=D:C===a.ConnectionPointSide.South&&(g.y-=D)}else u.prototype.processConnectionPoint.call(this,f,g)},h}(y.ArrowHorizontalShapeDescription);_.ArrowLeftShapeDescription=l},6599:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowRightShapeDescription=void 0;var E=x(7724),y=x(4493),p=x(1852),d=x(8900),s=x(2259),a=x(3742),l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return s.ShapeTypes.ArrowRight},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,P=g.height,k=g.center.y,A=g.width-f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value,R=(P-f.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2,M=f.normalizeX(O+A),L=f.normalizeY(I+R),H=f.normalizeY(C-R);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(O,L),new E.PathPrimitiveLineToCommand(M,L),new E.PathPrimitiveLineToCommand(M,I),new E.PathPrimitiveLineToCommand(D,k),new E.PathPrimitiveLineToCommand(M,C),new E.PathPrimitiveLineToCommand(M,H),new E.PathPrimitiveLineToCommand(O,H),new E.PathPrimitiveClosePathCommand],f.style)]},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,y.ArrowVerticalTriangleWidthParameterName,function(D){return D.value-O}),this.changeParameterValue(g,y.ArrowVerticalLineHeightParameterName,function(D){return D.value-2*I}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new p.ShapeParameterPoint("c",new d.Point(f.normalizeX(f.position.x+f.size.width-f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value),f.normalizeY(f.position.y+(f.size.height-f.parameters.get(y.ArrowVerticalLineHeightParameterName).value)/2)))]},h.prototype.processConnectionPoint=function(f,g){var O=f.parameters.get(y.ArrowVerticalTriangleWidthParameterName).value;if(g.x>f.position.x+f.size.width-O){var D=f.size.height/2/O*(g.x-(f.position.x+f.size.width-O)),C=f.getConnectionPointSide(g);C===a.ConnectionPointSide.North?g.y+=D:C===a.ConnectionPointSide.South&&(g.y-=D)}else u.prototype.processConnectionPoint.call(this,f,g)},h}(y.ArrowHorizontalShapeDescription);_.ArrowRightShapeDescription=l},9089:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowUpDownShapeDescription=void 0;var E=x(7724),y=x(1852),p=x(8900),d=x(731),s=x(2259),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return s.ShapeTypes.ArrowUpDown},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,w=f.center.x,P=(f.width-h.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2,k=h.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value,A=h.normalizeX(g+P),R=h.normalizeY(O+k),M=h.normalizeX(I-P),L=h.normalizeY(D-k);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(w,O),new E.PathPrimitiveLineToCommand(I,R),new E.PathPrimitiveLineToCommand(M,R),new E.PathPrimitiveLineToCommand(M,L),new E.PathPrimitiveLineToCommand(I,L),new E.PathPrimitiveLineToCommand(w,D),new E.PathPrimitiveLineToCommand(g,L),new E.PathPrimitiveLineToCommand(A,L),new E.PathPrimitiveLineToCommand(A,R),new E.PathPrimitiveLineToCommand(g,R),new E.PathPrimitiveClosePathCommand],h.style)]},u.prototype.normalizeParameters=function(h,f){this.changeParameterValue(f,d.ArrowVerticalTriangleHeightParameterName,function(g){return Math.max(0,Math.min(h.size.height/2-2*h.strokeWidth,g.value))}),this.changeParameterValue(f,d.ArrowVerticalLineWidthParameterName,function(g){return Math.max(0,Math.min(h.size.width,g.value))})},u.prototype.modifyParameters=function(h,f,g,O){this.changeParameterValue(f,d.ArrowVerticalTriangleHeightParameterName,function(I){return I.value+O}),this.changeParameterValue(f,d.ArrowVerticalLineWidthParameterName,function(I){return I.value-2*g}),this.normalizeParameters(h,f)},u.prototype.getParameterPoints=function(h){return[new y.ShapeParameterPoint("c",new p.Point(h.normalizeX(h.position.x+(h.size.width-h.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2),h.normalizeY(h.position.y+h.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value)))]},u}(d.ArrowVerticalShapeDescription);_.ArrowUpDownShapeDescription=a},8327:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowUpShapeDescription=void 0;var E=x(7724),y=x(1852),p=x(8900),d=x(731),s=x(2259),a=x(3742),l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return s.ShapeTypes.ArrowUp},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,P=g.center.x,k=(g.width-f.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2,A=f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value,R=f.normalizeX(O+k),M=f.normalizeY(I+A),L=f.normalizeX(D-k);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(P,I),new E.PathPrimitiveLineToCommand(D,M),new E.PathPrimitiveLineToCommand(L,M),new E.PathPrimitiveLineToCommand(L,C),new E.PathPrimitiveLineToCommand(R,C),new E.PathPrimitiveLineToCommand(R,M),new E.PathPrimitiveLineToCommand(O,M),new E.PathPrimitiveClosePathCommand],f.style)]},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,d.ArrowVerticalTriangleHeightParameterName,function(D){return D.value+I}),this.changeParameterValue(g,d.ArrowVerticalLineWidthParameterName,function(D){return D.value-2*O}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new y.ShapeParameterPoint("c",new p.Point(f.normalizeX(f.position.x+(f.size.width-f.parameters.get(d.ArrowVerticalLineWidthParameterName).value)/2),f.normalizeY(f.position.y+f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value)))]},h.prototype.processConnectionPoint=function(f,g){var O=f.parameters.get(d.ArrowVerticalTriangleHeightParameterName).value;if(g.y<f.position.y+O){var D=f.size.width/2/O*(f.position.y+O-g.y),C=f.getConnectionPointSide(g);C===a.ConnectionPointSide.East?g.x-=D:C===a.ConnectionPointSide.West&&(g.x+=D)}else u.prototype.processConnectionPoint.call(this,f,g)},h}(d.ArrowVerticalShapeDescription);_.ArrowUpShapeDescription=l},731:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.ArrowVerticalShapeDescription=_.ArrowVerticalLineWidthParameterName=_.ArrowVerticalTriangleHeightParameterName=void 0;var E=x(6794),y=x(6353),p=x(6629),d=x(3742);_.ArrowVerticalTriangleHeightParameterName="th",_.ArrowVerticalLineWidthParameterName="lw";var s=function(a){function l(){return a.call(this,new y.Size(.375*E.ShapeDefaultDimension,E.ShapeDefaultDimension))||this}return b(l,a),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createParameters=function(u){u.addRangeIfNotExists([new p.ShapeParameter(_.ArrowVerticalTriangleHeightParameterName,Math.sqrt(Math.pow(this.defaultSize.width,2)-Math.pow(this.defaultSize.width/2,2))),new p.ShapeParameter(_.ArrowVerticalLineWidthParameterName,this.defaultSize.width/3)])},l.prototype.normalizeParameters=function(u,h){this.changeParameterValue(h,_.ArrowVerticalTriangleHeightParameterName,function(f){return Math.max(0,Math.min(u.size.height,f.value))}),this.changeParameterValue(h,_.ArrowVerticalLineWidthParameterName,function(f){return Math.max(0,Math.min(u.size.width,f.value))})},l.prototype.processConnectionPoint=function(u,h){var f=(u.size.width-u.parameters.get(_.ArrowVerticalLineWidthParameterName).value)/2,g=u.getConnectionPointSide(h);g===d.ConnectionPointSide.East?h.x-=f:g===d.ConnectionPointSide.West&&(h.x+=f)},l.prototype.getTextRectangle=function(u){return u.rectangle.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding)},l.prototype.getSizeByText=function(u,h){return u.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding)},l}(E.ShapeDescription);_.ArrowVerticalShapeDescription=s},2281:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.CrossShapeDescription=_.CrossVerticalWidthParameterName=_.CrossHorizontalWidthParameterName=void 0;var E=x(6794),y=x(8900),p=x(6629),d=x(1852),s=x(7724),a=x(2259);_.CrossHorizontalWidthParameterName="chw",_.CrossVerticalWidthParameterName="cvw";var l=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return a.ShapeTypes.Cross},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,P=g.height,k=(g.width-f.parameters.get(_.CrossHorizontalWidthParameterName).value)/2,A=(P-f.parameters.get(_.CrossVerticalWidthParameterName).value)/2,R=f.normalizeX(O+k),M=f.normalizeY(I+A),L=f.normalizeX(D-k),H=f.normalizeY(C-A);return[new s.PathPrimitive([new s.PathPrimitiveMoveToCommand(O,M),new s.PathPrimitiveLineToCommand(R,M),new s.PathPrimitiveLineToCommand(R,I),new s.PathPrimitiveLineToCommand(L,I),new s.PathPrimitiveLineToCommand(L,M),new s.PathPrimitiveLineToCommand(D,M),new s.PathPrimitiveLineToCommand(D,H),new s.PathPrimitiveLineToCommand(L,H),new s.PathPrimitiveLineToCommand(L,C),new s.PathPrimitiveLineToCommand(R,C),new s.PathPrimitiveLineToCommand(R,H),new s.PathPrimitiveLineToCommand(O,H),new s.PathPrimitiveClosePathCommand],f.style)]},h.prototype.createParameters=function(f){f.addRangeIfNotExists([new p.ShapeParameter(_.CrossHorizontalWidthParameterName,.2*this.defaultSize.width),new p.ShapeParameter(_.CrossVerticalWidthParameterName,.2*this.defaultSize.height)])},h.prototype.normalizeParameters=function(f,g){this.changeParameterValue(g,_.CrossHorizontalWidthParameterName,function(O){return Math.max(0,Math.min(f.size.width,O.value))}),this.changeParameterValue(g,_.CrossVerticalWidthParameterName,function(O){return Math.max(0,Math.min(f.size.height,O.value))})},h.prototype.modifyParameters=function(f,g,O,I){this.changeParameterValue(g,_.CrossHorizontalWidthParameterName,function(D){return D.value-2*O}),this.changeParameterValue(g,_.CrossVerticalWidthParameterName,function(D){return D.value-2*I}),this.normalizeParameters(f,g)},h.prototype.getParameterPoints=function(f){return[new d.ShapeParameterPoint("c",new y.Point(f.normalizeX(f.position.x+(f.size.width-f.parameters.get(_.CrossHorizontalWidthParameterName).value)/2),f.normalizeY(f.position.y+(f.size.height-f.parameters.get(_.CrossVerticalWidthParameterName).value)/2)))]},h.prototype.getTextRectangle=function(f){return f.rectangle.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding)},h.prototype.getSizeByText=function(f,g){return f.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding)},h}(E.ShapeDescription);_.CrossShapeDescription=l},5303:function(J,_,x){var m,b=this&&this.__extends||(m=function(s,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var h in u)u.hasOwnProperty(h)&&(l[h]=u[h])})(s,a)},function(s,a){function l(){this.constructor=s}m(s,a),s.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.DiamondShapeDescription=void 0;var E=x(6794),y=x(7724),p=x(2259),d=function(s){function a(l,u){return void 0===l&&(l=E.ShapeDefaultSize.clone()),s.call(this,l,u)||this}return b(a,s),Object.defineProperty(a.prototype,"key",{get:function(){return p.ShapeTypes.Diamond},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),a.prototype.createShapePrimitives=function(l){var u=l.rectangle,h=u.x,g=u.right,O=u.bottom,I=u.center,D=I.x,C=I.y;return[new y.PathPrimitive([new y.PathPrimitiveMoveToCommand(D,u.y),new y.PathPrimitiveLineToCommand(g,C),new y.PathPrimitiveLineToCommand(D,O),new y.PathPrimitiveLineToCommand(h,C),new y.PathPrimitiveClosePathCommand],l.style)]},a.prototype.getTextRectangle=function(l){return l.rectangle.clone().inflate(-l.size.width/4,-l.size.height/4)},a.prototype.getSizeByText=function(l,u){return l.clone().multiply(2,2)},a}(E.ShapeDescription);_.DiamondShapeDescription=d},7768:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.EllipseShapeDescription=void 0;var E=x(6794),y=x(6353),p=x(418),d=x(2259),s=x(8675),a=x(8011),l=function(u){function h(f){return u.call(this,new y.Size(E.ShapeDefaultDimension,.75*E.ShapeDefaultDimension),f)||this}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return d.ShapeTypes.Ellipse},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.getTextRectangle=function(f){var g=s.GeometryUtils.getMaxRectangleEnscribedInEllipse(f.size);return a.Rectangle.fromGeometry(f.position.clone().offset((f.size.width-g.width)/2,(f.size.height-g.height)/2),g)},h.prototype.getSizeByText=function(f,g){return s.GeometryUtils.getEllipseByEnscribedRectangle(f)},h.prototype.createShapePrimitives=function(f){var g=f.rectangle,D=g.center;return[new p.EllipsePrimitive(D.x,D.y,g.width/2,g.height/2,f.style)]},h}(E.ShapeDescription);_.EllipseShapeDescription=l},8628:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.HeartShapeDescription=void 0;var E=x(6794),y=x(7724),p=x(2259),d=x(7228),s=x(3742),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return p.ShapeTypes.Heart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),u.prototype.createConnectionPoints=function(){return[new d.ConnectionPoint(.5,.15,s.ConnectionPointSide.North),new d.ConnectionPoint(1,.25,s.ConnectionPointSide.East),new d.ConnectionPoint(.5,1,s.ConnectionPointSide.South),new d.ConnectionPoint(0,.25,s.ConnectionPointSide.West)]},u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.width,w=f.height;return[new y.PathPrimitive([new y.PathPrimitiveMoveToCommand(I-.25*C,O),new y.PathPrimitiveCubicCurveToCommand(I-.15*C,O,I,O+.1*w,I,O+.25*w),new y.PathPrimitiveCubicCurveToCommand(I,O+.3*w,I-.02*C,O+.35*w,I-.05*C,O+.4*w),new y.PathPrimitiveLineToCommand(f.center.x,D),new y.PathPrimitiveLineToCommand(g+.05*C,O+.4*w),new y.PathPrimitiveCubicCurveToCommand(g+.02*C,O+.35*w,g,O+.3*w,g,O+.25*w),new y.PathPrimitiveCubicCurveToCommand(g,O+.1*w,g+.15*C,O,g+.25*C,O),new y.PathPrimitiveCubicCurveToCommand(g+.3*C,O,g+.45*C,O+.03*w,g+.5*C,O+.15*w),new y.PathPrimitiveCubicCurveToCommand(I-.45*C,O+.03*w,I-.3*C,O,I-.25*C,O),new y.PathPrimitiveClosePathCommand],h.style)]},u.prototype.getTextRectangle=function(h){return h.rectangle.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding)},u.prototype.getSizeByText=function(h,f){return f.size.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding)},u}(E.ShapeDescription);_.HeartShapeDescription=a},2953:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.HexagonShapeDescription=void 0;var E=x(7724),y=x(2259),p=x(7314),d=x(8675),s=x(8011),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.Hexagon},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"angleCount",{get:function(){return 6},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.width,w=f.center.y,P=Math.PI-this.angle,k=C/(1+2*Math.cos(P)),A=g+(C-k)/2,R=A+k;return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(A,O),new E.PathPrimitiveLineToCommand(R,O),new E.PathPrimitiveLineToCommand(I,w),new E.PathPrimitiveLineToCommand(R,D),new E.PathPrimitiveLineToCommand(A,D),new E.PathPrimitiveLineToCommand(g,w),new E.PathPrimitiveClosePathCommand],h.style)]},u.prototype.calculateHeight=function(h){var f=Math.PI-this.angle;return h/(1+2*Math.cos(f))*2*Math.sin(f)},u.prototype.getTextRectangle=function(h){var f=d.GeometryUtils.getMaxRectangleEnscribedInEllipse(h.size);return s.Rectangle.fromGeometry(h.position.clone().offset((h.size.width-f.width)/2,(h.size.height-f.height)/2),f)},u.prototype.getSizeByText=function(h,f){return d.GeometryUtils.getEllipseByEnscribedRectangle(h)},u}(p.PolygonShapeDescription);_.HexagonShapeDescription=a},1412:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.OctagonShapeDescription=void 0;var E=x(7724),y=x(2259),p=x(7314),d=x(8675),s=x(8011),a=function(l){function u(){return null!==l&&l.apply(this,arguments)||this}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return y.ShapeTypes.Octagon},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"angleCount",{get:function(){return 8},enumerable:!1,configurable:!0}),u.prototype.createShapePrimitives=function(h){var f=h.rectangle,g=f.x,O=f.y,I=f.right,D=f.bottom,C=f.width,w=f.height,P=Math.PI-this.angle,k=C/(1+2*Math.cos(P)),A=w/(1+2*Math.cos(P)),R=g+(C-k)/2,M=R+k,L=O+(w-A)/2,H=L+A;return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(R,O),new E.PathPrimitiveLineToCommand(M,O),new E.PathPrimitiveLineToCommand(I,L),new E.PathPrimitiveLineToCommand(I,H),new E.PathPrimitiveLineToCommand(M,D),new E.PathPrimitiveLineToCommand(R,D),new E.PathPrimitiveLineToCommand(g,H),new E.PathPrimitiveLineToCommand(g,L),new E.PathPrimitiveClosePathCommand],h.style)]},u.prototype.calculateHeight=function(h){return h},u.prototype.getTextRectangle=function(h){var f=d.GeometryUtils.getMaxRectangleEnscribedInEllipse(h.size);return s.Rectangle.fromGeometry(h.position.clone().offset((h.size.width-f.width)/2,(h.size.height-f.height)/2),f)},u.prototype.getSizeByText=function(h,f){return d.GeometryUtils.getEllipseByEnscribedRectangle(h)},u}(p.PolygonShapeDescription);_.OctagonShapeDescription=a},8761:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.PentagonShapeDescription=void 0;var E=x(7724),y=x(2259),p=x(7314),d=x(3742),s=x(8675),a=x(8011),l=function(u){function h(f){var g=u.call(this,f)||this;return g.defaultRatio=g.defaultSize.height/g.defaultSize.width,g}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.Pentagon},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"angleCount",{get:function(){return 5},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f){var g=f.rectangle,O=g.x,I=g.y,D=g.right,C=g.bottom,w=g.width,P=g.height,k=g.center.x,A=P/w/this.defaultRatio,R=Math.PI-this.angle,M=w/2*Math.tan(R/2)*A,L=I+M,H=(P-M)/Math.tan(R)/A,j=O+H,U=D-H;return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(k,I),new E.PathPrimitiveLineToCommand(D,L),new E.PathPrimitiveLineToCommand(U,C),new E.PathPrimitiveLineToCommand(j,C),new E.PathPrimitiveLineToCommand(O,L),new E.PathPrimitiveClosePathCommand],f.style)]},h.prototype.processConnectionPoint=function(f,g){var O=f.getConnectionPointSide(g);if(O===d.ConnectionPointSide.East||O===d.ConnectionPointSide.West){var I=f.rectangle,C=I.width,w=I.height/C/this.defaultRatio,P=Math.PI-this.angle,k=I.y+C/2*Math.tan(P/2)*w;(O===d.ConnectionPointSide.East||O===d.ConnectionPointSide.West)&&(g.y=k)}},h.prototype.calculateHeight=function(f){var g=Math.PI-this.angle;return f/2*Math.tan(g/2)+f/2/Math.cos(g/2)*Math.sin(g)},h.prototype.getTextRectangle=function(f){var g=s.GeometryUtils.getMaxRectangleEnscribedInEllipse(f.size);return a.Rectangle.fromGeometry(f.position.clone().offset((f.size.width-g.width)/2,(f.size.height-g.height)/2),g)},h.prototype.getSizeByText=function(f,g){return s.GeometryUtils.getEllipseByEnscribedRectangle(f)},h}(p.PolygonShapeDescription);_.PentagonShapeDescription=l},7314:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.PolygonShapeDescription=void 0;var E=x(6794),y=function(p){function d(s){var a=p.call(this,void 0,s)||this;return a.defaultSize.height=a.calculateHeight(E.ShapeDefaultDimension),a}return b(d,p),Object.defineProperty(d.prototype,"keepRatioOnAutoSize",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"angle",{get:function(){return Math.PI*(this.angleCount-2)/this.angleCount},enumerable:!1,configurable:!0}),d}(E.ShapeDescription);_.PolygonShapeDescription=y},1561:function(J,_,x){var m,b=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var f in h)h.hasOwnProperty(f)&&(u[f]=h[f])})(a,l)},function(a,l){function u(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(u.prototype=l.prototype,new u)});Object.defineProperty(_,"__esModule",{value:!0}),_.RectangleShapeDescription=void 0;var E=x(6794),y=x(6353),p=x(4716),d=x(2259),s=function(a){function l(u,h){return void 0===u&&(u=new y.Size(E.ShapeDefaultDimension,.75*E.ShapeDefaultDimension)),a.call(this,u,h)||this}return b(l,a),Object.defineProperty(l.prototype,"key",{get:function(){return d.ShapeTypes.Rectangle},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),l.prototype.createShapePrimitives=function(u){var h=u.rectangle;return[new p.RectanglePrimitive(h.x,h.y,h.width,h.height,u.style)]},l.prototype.getTextRectangle=function(u){return u.rectangle.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding)},l.prototype.getSizeByText=function(u,h){return u.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding)},l}(E.ShapeDescription);_.RectangleShapeDescription=s},8772:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.StarShapeDescription=_.StarConvexParameterName=void 0;var E=x(7724),y=x(2259),p=x(8761),d=x(6629),s=x(1852),a=x(8900),l=x(3742);_.StarConvexParameterName="sc";var u=function(h){function f(){return null!==h&&h.apply(this,arguments)||this}return b(f,h),Object.defineProperty(f.prototype,"key",{get:function(){return y.ShapeTypes.Star},enumerable:!1,configurable:!0}),f.prototype.createShapePrimitives=function(g){var O=g.rectangle,I=O.x,D=O.y,C=O.right,w=O.width,P=O.height,k=this.getActualBottom(D,O.bottom,w,P),A=O.center.x,R=D+(k-D)/2,M=P/w,L=Math.PI-this.angle,H=w/2*Math.tan(L/2)*M,j=D+H,U=(P-H)/Math.tan(L)/M,K=I+U,q=C-U,Y=g.parameters.get(_.StarConvexParameterName).value,W=this.getInnerPointDistance(A,A,C,R,D,j);return[new E.PathPrimitive([new E.PathPrimitiveMoveToCommand(A,D),new E.PathPrimitiveLineToCommand(this.getInnerPointPos(A,A,C,Y,W),this.getInnerPointPos(R,D,j,Y,W)),new E.PathPrimitiveLineToCommand(C,j),new E.PathPrimitiveLineToCommand(this.getInnerPointPos(A,C,q,Y,W),this.getInnerPointPos(R,j,k,Y,W)),new E.PathPrimitiveLineToCommand(q,k),new E.PathPrimitiveLineToCommand(this.getInnerPointPos(A,q,K,Y,W),this.getInnerPointPos(R,k,k,Y,W)),new E.PathPrimitiveLineToCommand(K,k),new E.PathPrimitiveLineToCommand(this.getInnerPointPos(A,K,I,Y,W),this.getInnerPointPos(R,k,j,Y,W)),new E.PathPrimitiveLineToCommand(I,j),new E.PathPrimitiveLineToCommand(this.getInnerPointPos(A,I,A,Y,W),this.getInnerPointPos(R,j,D,Y,W)),new E.PathPrimitiveClosePathCommand],g.style)]},f.prototype.createParameters=function(g){g.addRangeIfNotExists([new d.ShapeParameter(_.StarConvexParameterName,300)])},f.prototype.normalizeParameters=function(g,O){var I=g.rectangle,D=I.y,C=I.right,w=I.width,P=I.height,k=this.getActualBottom(D,I.bottom,w,P),A=I.center.x,R=D+(k-D)/2,M=P/w,L=Math.PI-this.angle,H=D+w/2*Math.tan(L/2)*M,j=this.getInnerPointDistance(A,A,C,R,D,H);this.changeParameterValue(O,_.StarConvexParameterName,function(U){return Math.max(0,Math.min(j,U.value))})},f.prototype.modifyParameters=function(g,O,I,D){var C=Math.sqrt(Math.pow(I,2)+Math.pow(D,2));(I<0||D>0)&&(C=-C),this.changeParameterValue(O,_.StarConvexParameterName,function(w){return w.value+C}),this.normalizeParameters(g,O)},f.prototype.getParameterPoints=function(g){var O=g.rectangle,I=O.y,D=O.right,C=O.width,w=O.height,P=this.getActualBottom(I,O.bottom,C,w),k=O.center.x,A=I+(P-I)/2,R=w/C,M=Math.PI-this.angle,L=I+C/2*Math.tan(M/2)*R,H=g.parameters.get(_.StarConvexParameterName).value,j=this.getInnerPointDistance(k,k,D,A,I,L),U=this.getInnerPointPos(k,k,D,H,j),K=this.getInnerPointPos(A,I,L,H,j);return[new s.ShapeParameterPoint("c",new a.Point(U,K))]},f.prototype.processConnectionPoint=function(g,O){if(h.prototype.processConnectionPoint.call(this,g,O),g.getConnectionPointSide(O)===l.ConnectionPointSide.South){var I=g.rectangle,D=I.y,C=I.right,w=I.width,P=I.height,k=this.getActualBottom(D,I.bottom,w,P),A=I.center.x,R=D+(k-D)/2,M=P/w,L=Math.PI-this.angle,H=D+w/2*Math.tan(L/2)*M,j=g.parameters.get(_.StarConvexParameterName).value,U=this.getInnerPointDistance(A,A,C,R,D,H);O.y=this.getInnerPointPos(R,k,k,j,U)}},f.prototype.getInnerPointDistanceByAxis=function(g,O,I){return Math.min(O,I)+Math.abs(O-I)/2-g},f.prototype.getInnerPointPos=function(g,O,I,D,C){var w=Math.min(1,D/C);return g+this.getInnerPointDistanceByAxis(g,O,I)*w},f.prototype.getInnerPointDistance=function(g,O,I,D,C,w){var P=this.getInnerPointDistanceByAxis(g,O,I),k=this.getInnerPointDistanceByAxis(D,C,w);return Math.sqrt(Math.pow(P,2)+Math.pow(k,2))},f.prototype.getActualBottom=function(g,O,I,D){var C=g+h.prototype.calculateHeight.call(this,I)*D/I;return C<O?C:O},f.prototype.calculateHeight=function(g){return g},f}(p.PentagonShapeDescription);_.StarShapeDescription=u},1669:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.TextShapeDescription=void 0;var E=x(6794),y=x(6353),p=x(2259),d=x(4593),s=x(4716),a=x(3500),l=function(u){function h(){var f=u.call(this,new y.Size(E.ShapeDefaultDimension,.5*E.ShapeDefaultDimension),!0)||this;return f.textClipPathId=a.RenderUtils.generateSvgElementId("clipRect"),f}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return p.ShapeTypes.Text},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),h.prototype.createShapePrimitives=function(f,g){if(g){var O=f.rectangle,I=O.x,D=O.y,C=O.width,w=O.height;return[new d.ClipPathPrimitive(this.getTextClipPathId(g),[new s.RectanglePrimitive(I,D,C,w)])]}return[]},h.prototype.getTextClipPathId=function(f){return f?this.textClipPathId:void 0},h.prototype.getSizeByTextRectangle=function(f){return f},h.prototype.getSizeByText=function(f,g){return f.clone()},h.prototype.getTextRectangle=function(f){return f.rectangle},h}(E.ShapeDescription);_.TextShapeDescription=l},2117:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.TriangleShapeDescription=void 0;var E=x(6794),y=x(7724),p=x(2259),d=x(7228),s=x(3742),a=x(8011),l=x(6353),u=function(h){function f(g){var O=h.call(this,void 0,g)||this;return O.defaultSize.height=O.calculateHeight(E.ShapeDefaultDimension),O}return b(f,h),Object.defineProperty(f.prototype,"key",{get:function(){return p.ShapeTypes.Triangle},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),f.prototype.createConnectionPoints=function(){return[new d.ConnectionPoint(.5,0,s.ConnectionPointSide.North),new d.ConnectionPoint(.75,.5,s.ConnectionPointSide.East),new d.ConnectionPoint(.5,1,s.ConnectionPointSide.South),new d.ConnectionPoint(.25,.5,s.ConnectionPointSide.West)]},f.prototype.createShapePrimitives=function(g){var O=g.rectangle,I=O.x,C=O.right,w=O.bottom;return[new y.PathPrimitive([new y.PathPrimitiveMoveToCommand(O.center.x,O.y),new y.PathPrimitiveLineToCommand(C,w),new y.PathPrimitiveLineToCommand(I,w),new y.PathPrimitiveClosePathCommand],g.style)]},f.prototype.calculateHeight=function(g){return Math.sqrt(Math.pow(g,2)-Math.pow(g/2,2))},f.prototype.getTextRectangle=function(g){return new a.Rectangle(g.position.x+g.size.width/4,g.position.y+g.size.height/2,g.size.width/2,g.size.height/2-E.ShapeTextPadding).nonNegativeSize()},f.prototype.getSizeByText=function(g,O){return new l.Size(2*g.width,2*g.height+E.ShapeTextPadding)},f}(E.ShapeDescription);_.TriangleShapeDescription=u},3233:function(J,_,x){var m,b=this&&this.__extends||(m=function(D,C){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,P){w.__proto__=P}||function(w,P){for(var k in P)P.hasOwnProperty(k)&&(w[k]=P[k])})(D,C)},function(D,C){function w(){this.constructor=D}m(D,C),D.prototype=null===C?Object.create(C):(w.prototype=C.prototype,new w)});Object.defineProperty(_,"__esModule",{value:!0}),_.CardBaseDescription=void 0;var E=x(6794),y=x(8011),p=x(6353),d=x(4083),s=x(4538),a=x(7724),l=x(5329),u=x(6411),h=x(2259),f=x(6224),g=x(9291),O=x(8900),I=function(D){function C(w){return void 0===w&&(w=new p.Size(E.ShapeDefaultDimension,26/46*E.ShapeDefaultDimension)),D.call(this,w,!0)||this}return b(C,D),Object.defineProperty(C.prototype,"keepRatioOnAutoSize",{get:function(){return!1},enumerable:!1,configurable:!0}),C.prototype.getDefaultText=function(){return f.DiagramLocalizationService.shapeTexts[h.ShapeTypes.Card]},C.prototype.createShapePrimitives=function(w,P){var k=w.rectangle;return[new s.RoundedRectanglePrimitive(k.x,k.y,k.width,k.height,P?30:60,P?30:60,w.style)]},C.prototype.createImagePlaceholder=function(w){return[new s.RoundedRectanglePrimitive(w.x,w.y,w.width,w.height,g.UnitConverter.pixelsToTwips(2),g.UnitConverter.pixelsToTwips(2),void 0,d.SHAPE_IMAGE_CLASSNAMES.IMAGE_PLACEHOLDER)]},C.prototype.createEmptyImagePrimitive=function(w){return u.ShapeImageIndicator.createUserIconPrimitives(w.x,w.y,this.defaultIconSize,g.UnitConverter.pixelsToTwips(1),d.SHAPE_IMAGE_CLASSNAMES.USER_PIC)},C.prototype.createWarningPrimitive=function(w){return u.ShapeImageIndicator.createWarningIconPrimitives(w.x+this.defaultIconSize/2,w.y+this.defaultIconSize/2,this.defaultIconSize/2,d.SHAPE_IMAGE_CLASSNAMES.WARNING_MARK)},C.prototype.getTextRectangle=function(w){var P=w.rectangle,k=P.clone().inflate(-E.ShapeTextPadding,-E.ShapeTextPadding),A=this.getImageSize(P.createSize(),!0);return this.isTextAfterImage&&k.moveRectangle(this.isHorizontal?A.width:0,this.isHorizontal?0:A.height),k.resize(this.isHorizontal?-A.width:0,this.isHorizontal?0:-A.height),k.nonNegativeSize()},C.prototype.getSizeByText=function(w,P){var k=w.clone().offset(2*E.ShapeTextPadding,2*E.ShapeTextPadding),A=this.getImageSizeByTextBlockSize(k);return this.isHorizontal?k.width+=A.width:k.height+=A.height,k},C.prototype.createTextPrimitives=function(w,P){return P?this.createGraphicalTextRepresentation(w.rectangle):D.prototype.createTextPrimitives.call(this,w,P)},C.prototype.createGraphicalTextRepresentation=function(w){var P=new y.Rectangle(0,0,0,0),k=this.getImageSize(w.createSize(),!0,!0);if(this.isHorizontal){var A=this.isTextAfterImage?w.width/2-g.UnitConverter.pixelsToTwips(2):0;P.x=w.x+A+g.UnitConverter.pixelsToTwips(4),P.y=w.y+g.UnitConverter.pixelsToTwips(5),P.width=k.width-g.UnitConverter.pixelsToTwips(4),P.height=w.height-g.UnitConverter.pixelsToTwips(6)}else{var R=this.isTextAfterImage?w.height/2-g.UnitConverter.pixelsToTwips(2):0;P.x=w.x+w.width/4,P.y=w.y+R+g.UnitConverter.pixelsToTwips(4),P.width=w.width/2,P.height=k.height-g.UnitConverter.pixelsToTwips(2)}return this.createTextRepresentationPrimitives(P)},C.prototype.getImagePlacementRectangle=function(w,P){var k=this.getImageSize(w.createSize(),!1,P),A=y.Rectangle.fromGeometry(new O.Point(w.x,w.y),k),R=this.getImageSize(w.createSize(),!0,P);return this.isHorizontal&&this.isTextAfterImage?A.x+=this.getImageMargin(P):this.isHorizontal&&(A.x=w.right-R.width-this.getImageMargin(P)),this.isHorizontal||this.isTextAfterImage?A.y+=this.getImageMargin(P):A.y=w.bottom-R.height-this.getImageMargin(P),this.isHorizontal||(A.x+=(w.width-A.width)/2),A},C.prototype.createTextRepresentationPrimitives=function(w){var P=g.UnitConverter.pixelsToTwips(g.UnitConverter.twipsToPixels(w.height/3));return[new l.GroupPrimitive([new a.PathPrimitive([new a.PathPrimitiveMoveToCommand(w.x,w.y),new a.PathPrimitiveLineToCommand(w.x+w.width,w.y)]),new a.PathPrimitive([new a.PathPrimitiveMoveToCommand(w.x,w.y+P),new a.PathPrimitiveLineToCommand(w.x+w.width,w.y+P)]),new a.PathPrimitive([new a.PathPrimitiveMoveToCommand(w.x,w.y+2*P),new a.PathPrimitiveLineToCommand(w.x+.66*w.width,w.y+2*P)])],"dxdi-shape-text")]},C}(d.ShapeWithImageDescription);_.CardBaseDescription=I},3107:function(J,_,x){var m,b=this&&this.__extends||(m=function(u,h){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var O in g)g.hasOwnProperty(O)&&(f[O]=g[O])})(u,h)},function(u,h){function f(){this.constructor=u}m(u,h),u.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)});Object.defineProperty(_,"__esModule",{value:!0}),_.CardWithImageOnRightDescription=_.CardWithImageOnLeftDescription=void 0;var E=x(6794),y=x(2259),p=x(3233),d=x(6353),s=function(u){function h(){var f=u.call(this,new d.Size(1.5*E.ShapeDefaultDimension,.5*E.ShapeDefaultDimension))||this;return f.isHorizontal=!0,f}return b(h,u),h.prototype.getToolboxHeightToWidthRatio=function(f,g){return 26/46},h.prototype.getImageSize=function(f,g,O){var I=Math.min(f.height,f.width);return g||(I=Math.max(0,I-2*this.getImageMargin(O))),new d.Size(I,I)},h.prototype.getImageSizeByTextBlockSize=function(f){return this.getImageSize(new d.Size(Number.MAX_VALUE,f.height),!0)},h}(p.CardBaseDescription),a=function(u){function h(){var f=null!==u&&u.apply(this,arguments)||this;return f.isTextAfterImage=!0,f}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.CardWithImageOnLeft},enumerable:!1,configurable:!0}),h}(s);_.CardWithImageOnLeftDescription=a;var l=function(u){function h(){var f=null!==u&&u.apply(this,arguments)||this;return f.isTextAfterImage=!1,f}return b(h,u),Object.defineProperty(h.prototype,"key",{get:function(){return y.ShapeTypes.CardWithImageOnRight},enumerable:!1,configurable:!0}),h}(s);_.CardWithImageOnRightDescription=l},2816:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.CardWithImageOnTopDescription=void 0;var E=x(6794),y=x(6353),p=x(2259),d=x(3233),s=x(9291),a=function(l){function u(){var h=l.call(this,new y.Size(.8*E.ShapeDefaultDimension,E.ShapeDefaultDimension))||this;return h.isTextAfterImage=!0,h.isHorizontal=!1,h}return b(u,l),Object.defineProperty(u.prototype,"key",{get:function(){return p.ShapeTypes.CardWithImageOnTop},enumerable:!1,configurable:!0}),u.prototype.getImageSize=function(h,f,g){var O=h.width/2;s.UnitConverter.twipsToPixels(O)%2==1&&(O-=s.UnitConverter.pixelsToTwips(1));var I=Math.max(0,h.height-(f?0:2*this.getImageMargin(g)));return I=Math.min(O,I),new y.Size(I,I)},u.prototype.getImageSizeByTextBlockSize=function(h){return this.getImageSize(new y.Size(h.width,Number.MAX_VALUE),!0)},u}(d.CardBaseDescription);_.CardWithImageOnTopDescription=a},6794:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeDescription=_.ShapeTextPadding=_.ShapeDefaultSize=_.ShapeMinDimension=_.ShapeDefaultDimension=void 0;var m=x(9291),b=x(6353),E=x(6224),y=x(4246),p=x(4716),d=x(9416),s=x(8675),a=x(7228),l=x(3742);_.ShapeDefaultDimension=1440,_.ShapeMinDimension=360,_.ShapeDefaultSize=new b.Size(_.ShapeDefaultDimension,_.ShapeDefaultDimension),_.ShapeTextPadding=m.UnitConverter.pixelsToTwips(10);var u=function(){function h(f,g){void 0===f&&(f=_.ShapeDefaultSize.clone()),this.defaultSize=f,this.hasDefaultText=g,this.onChanged=new s.EventDispatcher,this.connectionPoints=this.createConnectionPoints()}return Object.defineProperty(h.prototype,"enableText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"allowEditText",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"enableImage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"allowEditImage",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hasTemplate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"enableChildren",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"minWidth",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"minHeight",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxWidth",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxHeight",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"toolboxSize",{get:function(){return this.defaultSize},enumerable:!1,configurable:!0}),h.prototype.getTitle=function(){return E.DiagramLocalizationService.shapeTexts[this.key]},h.prototype.getDefaultText=function(){return this.hasDefaultText?E.DiagramLocalizationService.shapeTexts[this.key]:""},h.prototype.getDefaultImageUrl=function(){return""},h.prototype.getConnectionPoints=function(){return this.connectionPoints},h.prototype.createConnectionPoints=function(){return[new a.ConnectionPoint(.5,0,l.ConnectionPointSide.North),new a.ConnectionPoint(1,.5,l.ConnectionPointSide.East),new a.ConnectionPoint(.5,1,l.ConnectionPointSide.South),new a.ConnectionPoint(0,.5,l.ConnectionPointSide.West)]},h.prototype.processConnectionPoint=function(f,g){},h.prototype.getConnectionPointIndexForItem=function(f,g){return g},h.prototype.getConnectionPointIndexForSide=function(f){return f},h.getConnectionPointSideByGeometry=function(f){return f.x>=f.y&&(f.x>0||f.y>0)?f.x<.5||1-f.x>=f.y?l.ConnectionPointSide.North:l.ConnectionPointSide.East:f.x>.5||1-f.x<=f.y?l.ConnectionPointSide.South:l.ConnectionPointSide.West},h.prototype.createParameters=function(f){},h.prototype.normalizeParameters=function(f,g){},h.prototype.modifyParameters=function(f,g,O,I){throw Error("Not implemented")},h.prototype.changeParameterValue=function(f,g,O){var I=f.get(g);I.value=O(I)},h.prototype.getParameterPoints=function(f){return[]},h.prototype.getExpandedSize=function(f){return f.size},h.prototype.getCollapsedSize=function(f){return f.size},h.prototype.getToolboxHeightToWidthRatio=function(f,g){return g/f},h.prototype.allowResizeHorizontally=function(f){return!0},h.prototype.allowResizeVertically=function(f){return!0},h.prototype.createPrimitives=function(f,g,O){var I=[];return I=I.concat(this.createShapePrimitives(f,O)),this.enableImage&&(I=I.concat(this.createImagePrimitives(f,O))),this.enableText&&(I=I.concat(this.createTextPrimitives(f,O))),I},h.prototype.createImagePrimitives=function(f,g){return[]},h.prototype.createTextPrimitives=function(f,g){if(void 0===f.text||""===f.text)return[];var O=this.getTextRectangle(f);return[new d.TextPrimitive(O.x,O.y,f.text,y.TextOwner.Shape,O.width,O.height,h.textSpacing,f.styleText,!1,this.getTextClipPathId(g),void 0,this.getTextAngle())]},h.prototype.getTextClipPathId=function(f){},h.prototype.getTextAngle=function(){return d.TextAngle.Angle0deg},h.prototype.getClientRectangle=function(f){return f.rectangle},h.prototype.getTextEditRectangle=function(f){return this.getTextRectangle(f)},h.prototype.createSelectorPrimitives=function(f){return[new p.RectanglePrimitive(f.position.x,f.position.y,f.size.width,f.size.height,null,"selector")]},h.prototype.raiseShapeDescriptionChanged=function(f){this.onChanged.raise1(function(g){return g.notifyShapeDescriptionChanged(f)})},h.textSpacing=m.UnitConverter.pixelsToTwips(2),h}();_.ShapeDescription=u},8397:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeDescriptionManager=void 0;var m=x(5331),b=x(6825),E=x(9144),y=x(4941),p=x(6242),d=x(6508),s=x(9089),a=x(6599),l=x(8327),u=x(2281),h=x(5303),f=x(7768),g=x(8628),O=x(1561),I=x(1669),D=x(8761),C=x(2953),w=x(1412),P=x(8772),k=x(4958),A=x(8800),R=x(6023),M=x(2117),L=x(3525),H=x(2850),j=x(4112),U=x(1314),K=x(1034),q=x(2751),Y=x(8110),W=x(1643),z=x(9229),Z=x(4810),se=x(3046),re=x(2650),Q=x(2019),G=x(6182),ie=x(6688),ae=x(5759),me=x(944),be=x(2816),Ce=x(2259),ve=x(7552),ee=x(8675),oe=x(3107),te=function(){function ce(){this.descriptions={},this.descriptionTypes={},this.descriptionCategories={},this.onShapeDecriptionChanged=new ee.EventDispatcher,this.register(new I.TextShapeDescription,Ce.ShapeCategories.General),this.register(new O.RectangleShapeDescription,Ce.ShapeCategories.General),this.register(new f.EllipseShapeDescription,Ce.ShapeCategories.General),this.register(new u.CrossShapeDescription,Ce.ShapeCategories.General),this.register(new M.TriangleShapeDescription,Ce.ShapeCategories.General),this.register(new h.DiamondShapeDescription,Ce.ShapeCategories.General),this.register(new g.HeartShapeDescription,Ce.ShapeCategories.General),this.register(new D.PentagonShapeDescription,Ce.ShapeCategories.General),this.register(new C.HexagonShapeDescription,Ce.ShapeCategories.General),this.register(new w.OctagonShapeDescription,Ce.ShapeCategories.General),this.register(new P.StarShapeDescription,Ce.ShapeCategories.General),this.register(new l.ArrowUpShapeDescription,Ce.ShapeCategories.General),this.register(new k.ArrowDownShapeDescription,Ce.ShapeCategories.General),this.register(new R.ArrowLeftShapeDescription,Ce.ShapeCategories.General),this.register(new a.ArrowRightShapeDescription,Ce.ShapeCategories.General),this.register(new s.ArrowUpDownShapeDescription,Ce.ShapeCategories.General),this.register(new A.ArrowLeftRightShapeDescription,Ce.ShapeCategories.General),this.register(new m.ProcessShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new b.DecisionShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new p.TerminatorShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new d.PredefinedProcessShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new L.DocumentShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new H.MultipleDocumentsShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new E.ManualInputShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new j.PreparationShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new y.DataShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new K.DatabaseShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new U.HardDiskShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new q.InternalStorageShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new Y.PaperTapeShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new W.ManualOperationShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new z.DelayShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new Z.StoredDataShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new re.DisplayShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new se.MergeShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new ve.ConnectorShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new Q.OrShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new G.SummingJunctionShapeDescription,Ce.ShapeCategories.Flowchart),this.register(new oe.CardWithImageOnLeftDescription,Ce.ShapeCategories.OrgChart),this.register(new oe.CardWithImageOnRightDescription,Ce.ShapeCategories.OrgChart),this.register(new be.CardWithImageOnTopDescription,Ce.ShapeCategories.OrgChart),this.register(new ae.VerticalContainerDescription,Ce.ShapeCategories.Containers),this.register(new me.HorizontalContainerDescription,Ce.ShapeCategories.Containers)}return Object.defineProperty(ce,"default",{get:function(){return ce.defaultInstance},enumerable:!1,configurable:!0}),Object.defineProperty(ce,"defaultContainer",{get:function(){return ce.defaultContainerInstance},enumerable:!1,configurable:!0}),ce.prototype.get=function(fe){return this.descriptions[fe]},ce.prototype.getTypesByCategory=function(fe){return this.descriptionTypes[fe]||[]},ce.prototype.getCategoryByType=function(fe){return this.descriptionCategories[fe]},ce.prototype.getCategoryByDescription=function(fe){return this.getCategoryByType(fe.key)},ce.prototype.register=function(fe,ye,xe){if(void 0===xe&&(xe=fe.key),void 0!==this.descriptions[xe])throw Error("Description key is duplicated");this.descriptions[xe]=fe,this.descriptionTypes[ye]||(this.descriptionTypes[ye]=[]),this.descriptionTypes[ye].push(xe),this.descriptionCategories[xe]=ye,fe.onChanged.add(this)},ce.prototype.registerCustomShape=function(fe){if(void 0===fe.type)throw Error("Custom shape type is not defined");if(void 0!==this.descriptions[fe.type])throw Error("Custom shape type is duplicated");var ye=fe.baseType&&this.descriptions[fe.baseType];fe.minWidth>fe.maxWidth&&(fe.maxWidth=fe.minWidth),fe.minHeight>fe.maxHeight&&(fe.maxHeight=fe.minHeight),this.register(new ie.CustomShapeDescription(fe,ye),fe.category||Ce.ShapeCategories.Custom)},ce.prototype.unregisterCustomShape=function(fe){var ye=this.descriptions[fe];if(ye instanceof ie.CustomShapeDescription){ye.onChanged.remove(this);var xe=this.descriptionCategories[fe];delete this.descriptions[fe],delete this.descriptionCategories[fe];var Se=this.descriptionTypes[xe].indexOf(fe);this.descriptionTypes[xe].splice(Se,1),0===this.descriptionTypes[xe].length&&delete this.descriptionTypes[xe]}},ce.prototype.unregisterAllCustomShapes=function(){var fe=this;Object.keys(this.descriptions).forEach(function(ye){fe.unregisterCustomShape(ye)})},ce.prototype.notifyShapeDescriptionChanged=function(fe){this.onShapeDecriptionChanged.raise1(function(ye){return ye.notifyShapeDescriptionChanged(fe)})},ce.defaultInstance=new O.RectangleShapeDescription,ce.defaultContainerInstance=new ae.VerticalContainerDescription,ce}();_.ShapeDescriptionManager=te},4083:function(J,_,x){var m,b=this&&this.__extends||(m=function(I,D){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var P in w)w.hasOwnProperty(P)&&(C[P]=w[P])})(I,D)},function(I,D){function C(){this.constructor=I}m(I,D),I.prototype=null===D?Object.create(D):(C.prototype=D.prototype,new C)});Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeWithImageDescription=_.SHAPE_IMAGE_CLASSNAMES=_.ShapeDefaultSize=_.ShapeDefaultDimension=void 0;var E=x(6794),y=x(8011),p=x(6353),d=x(8900),s=x(9291),a=x(1995),l=x(4716),u=x(5329),h=x(3500),f=x(4593),g=x(6411);_.ShapeDefaultDimension=1440,_.ShapeDefaultSize=new p.Size(_.ShapeDefaultDimension,_.ShapeDefaultDimension),_.SHAPE_IMAGE_CLASSNAMES={IMAGE:"dxdi-image",IMAGE_PLACEHOLDER:"dxdi-image-placeholder",LOADING_INDICATOR:"dxdi-spinner",USER_PIC:"dxdi-user",WARNING_MARK:"dxdi-warning"};var O=function(I){function D(C,w){void 0===C&&(C=_.ShapeDefaultSize.clone());var P=I.call(this,C,w)||this;return P.hasDefaultText=w,P.defaultIconSize=480,P}return b(D,I),Object.defineProperty(D.prototype,"enableImage",{get:function(){return!0},enumerable:!1,configurable:!0}),D.prototype.getImageMargin=function(C){return s.UnitConverter.pixelsToTwips(C?2:3)},D.prototype.createImagePrimitives=function(C,w){if(!this.enableImage)return[];var P=this.getImagePlacementRectangle(C.rectangle,w);if(w)return this.createImagePlaceholder(P);var k=[];if(k=k.concat(C.image.isEmpty||C.image.unableToLoad?this.createEmptyImagePrimitives(P,C.image.unableToLoad):""===C.image.renderUrl?this.createLoadingImagePrimitives(P):this.createLoadedImagePrimitives(P,C.image.renderUrl)),""===C.image.renderUrl){var A=h.RenderUtils.generateSvgElementId("clipImage");return[].concat([new u.GroupPrimitive(k,_.SHAPE_IMAGE_CLASSNAMES.IMAGE,void 0,A),new f.ClipPathPrimitive(A,[new l.RectanglePrimitive(P.x,P.y,P.width,P.height)])])}return k},D.prototype.createImagePlaceholder=function(C){return[]},D.prototype.createLoadedImagePrimitives=function(C,w){return[new a.ImagePrimitive(C.x,C.y,C.width,C.height,w,D.imageScalingRule,void 0,_.SHAPE_IMAGE_CLASSNAMES.IMAGE)]},D.prototype.createLoadingImagePrimitives=function(C){var w=this.getIconPlacementRectangle(C);return[g.ShapeImageIndicator.createLoadingIndicatorPrimitives(w.x,w.y,this.defaultIconSize,s.UnitConverter.pixelsToTwips(5),_.SHAPE_IMAGE_CLASSNAMES.LOADING_INDICATOR)]},D.prototype.createEmptyImagePrimitives=function(C,w){var P=this.getIconPlacementRectangle(C),k=[];return k=k.concat(this.createEmptyImagePrimitive(P)),w&&(k=k.concat(this.createWarningPrimitive(P))),k},D.prototype.createEmptyImagePrimitive=function(C){return new u.GroupPrimitive([])},D.prototype.createWarningPrimitive=function(C){return new u.GroupPrimitive([])},D.prototype.getIconPlacementRectangle=function(C){var w=y.Rectangle.fromGeometry(new d.Point(C.x,C.y),new p.Size(this.defaultIconSize,this.defaultIconSize));return w.width<C.width&&(w.x=C.x+(C.width-w.width)/2),w.height<C.height&&(w.y=C.y+(C.height-w.height)/2),w},D.imageScalingRule="xMidYMid meet",D}(E.ShapeDescription);_.ShapeWithImageDescription=O},5503:function(J,_,x){var m,b=this&&this.__extends||(m=function(h,f){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var I in O)O.hasOwnProperty(I)&&(g[I]=O[I])})(h,f)},function(h,f){function g(){this.constructor=h}m(h,f),h.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)});Object.defineProperty(_,"__esModule",{value:!0}),_.Shape=void 0;var E=x(8011),y=x(6794),p=x(6629),d=x(3742),s=x(7228),a=x(6617),l=x(7185),u=function(h){function f(g,O,I){var D=h.call(this)||this;if(D.description=g,D.children=[],D.expanded=!0,D.expandedSize=void 0,!g)throw Error("Shape type is incorrect");return D.position=O.clone(),D.size=(I?g.toolboxSize:g.defaultSize).clone(),D.text=g.getDefaultText(),D.image=new a.ImageInfo(g.getDefaultImageUrl()),D.parameters=new p.ShapeParameters,g.createParameters(D.parameters),D}return b(f,h),f.prototype.assign=function(g){h.prototype.assign.call(this,g),g.size=this.size.clone(),g.text=this.text,g.image=this.image.clone(),g.parameters=this.parameters.clone(),g.children=this.children.slice(),g.expanded=this.expanded,this.expandedSize&&(g.expandedSize=this.expandedSize.clone())},f.prototype.clone=function(){var g=new f(this.description,this.position.clone());return this.assign(g),g},Object.defineProperty(f.prototype,"enableText",{get:function(){return this.description.enableText},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"allowEditText",{get:function(){return this.description.allowEditText},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"hasTemplate",{get:function(){return this.description.hasTemplate},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"enableChildren",{get:function(){return this.description.enableChildren},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"enableImage",{get:function(){return this.description.enableImage},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"allowEditImage",{get:function(){return this.description.allowEditImage},enumerable:!1,configurable:!0}),f.prototype.getMinWidth=function(g){return"number"==typeof this.description.minWidth?this.description.minWidth:"number"==typeof g?g:y.ShapeMinDimension},f.prototype.getMinHeight=function(g){return"number"==typeof this.description.minHeight?this.description.minHeight:"number"==typeof g?g:y.ShapeMinDimension},f.prototype.getMaxWidth=function(g){return"number"==typeof this.description.maxWidth?this.description.maxWidth:"number"==typeof g?g:void 0},f.prototype.getMaxHeight=function(g){return"number"==typeof this.description.maxHeight?this.description.maxHeight:"number"==typeof g?g:void 0},f.prototype.createPrimitives=function(g){return this.description.createPrimitives(this,g)},f.prototype.createSelectorPrimitives=function(){return this.description.createSelectorPrimitives(this)},f.prototype.normalizeX=function(g){return Math.max(this.position.x,Math.min(g,this.position.x+this.size.width))},f.prototype.normalizeY=function(g){return Math.max(this.position.y,Math.min(g,this.position.y+this.size.height))},f.prototype.getConnectionPoints=function(){var g=this;return this.description.getConnectionPoints().map(function(O){var I=new s.ConnectionPoint(g.position.x+O.x*g.size.width,g.position.y+O.y*g.size.height,O.side);return g.description.processConnectionPoint(g,I),I})},f.prototype.getConnectionPointSide=function(g,O){return g.side!==d.ConnectionPointSide.Undefined?g.side:this.getConnectionPointSideByGeometry(g)},f.prototype.getConnectionPointSideByGeometry=function(g){var O=g.clone().offset(-this.position.x,-this.position.y).multiply(1/this.size.width,1/this.size.height);return y.ShapeDescription.getConnectionPointSideByGeometry(O)},f.prototype.getConnectionPointIndexForItem=function(g,O){return this.description.getConnectionPointIndexForItem(g,O)},f.prototype.getConnectionPointIndexForSide=function(g){return this.description.getConnectionPointIndexForSide(g)},f.prototype.toggleExpandedSize=function(){this.expanded?(this.size=this.getExpandedSize(),this.expandedSize=void 0):(this.expandedSize=this.size.clone(),this.size=this.getCollapsedSize())},f.prototype.getExpandedSize=function(){return this.description.getExpandedSize(this)},f.prototype.getCollapsedSize=function(){return this.description.getCollapsedSize(this)},f.prototype.getToolboxHeightToWidthRatio=function(){return this.description.getToolboxHeightToWidthRatio(this.size.width,this.size.height)},Object.defineProperty(f.prototype,"allowResizeHorizontally",{get:function(){return this.description.allowResizeHorizontally(this)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"allowResizeVertically",{get:function(){return this.description.allowResizeVertically(this)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"rectangle",{get:function(){return E.Rectangle.fromGeometry(this.position,this.size)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"clientRectangle",{get:function(){return this.description.getClientRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textRectangle",{get:function(){return this.description.getTextRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textEditRectangle",{get:function(){return this.description.getTextEditRectangle(this)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textAngle",{get:function(){return this.description.getTextAngle()},enumerable:!1,configurable:!0}),f.prototype.toNative=function(g){var O=new l.NativeShape(this.key,this.dataKey);return O.type=this.description.key,O.text=this.text,O.position=this.position.clone(),O.size=this.size.clone(),O.attachedConnectorIds=this.attachedConnectors.map(function(I){return I.key}),O.applyUnits(g),O.containerId=this.container?this.container.key:null,O.containerChildItemIds=this.children.map(function(I){return I.key}),O.containerExpanded=this.expanded,O},f}(d.DiagramItem);_.Shape=u},1852:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeParameterPoint=void 0,_.ShapeParameterPoint=function(m,b){this.key=m,this.point=b}},6629:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeParameters=_.ShapeParameter=void 0;var x=function(b,E){this.key=b,this.value=E};_.ShapeParameter=x;var m=function(){function b(){this.items={}}return b.prototype.addIfNotExists=function(E){E.key in this.items||this.set(E)},b.prototype.set=function(E){this.items[E.key]=E},b.prototype.addRangeIfNotExists=function(E){for(var y=0;y<E.length;y++)this.addIfNotExists(E[y])},b.prototype.get=function(E){return this.items[E]},b.prototype.forEach=function(E){for(var y in this.items)Object.prototype.hasOwnProperty.call(this.items,y)&&E(this.items[y])},b.prototype.clone=function(){var E=new b;return this.forEach(function(y){E.addIfNotExists(new x(y.key,y.value))}),E},b.prototype.toObject=function(){var E={},y=!1;return this.forEach(function(p){E[p.key]={value:p.value},y=!0}),y?E:null},b.prototype.fromObject=function(E){this.forEach(function(y){var p=E[y.key];p&&"number"==typeof p.value&&(y.value=p.value)})},b}();_.ShapeParameters=m},2259:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeType=_.ShapeTypes=_.ShapeCategories=void 0;var x=function(){function b(){}return b.General="general",b.Flowchart="flowchart",b.OrgChart="orgChart",b.Containers="containers",b.Custom="custom",b}();_.ShapeCategories=x;var b,m=function(){function b(){}return b.Text="text",b.Rectangle="rectangle",b.Ellipse="ellipse",b.Cross="cross",b.Triangle="triangle",b.Diamond="diamond",b.Heart="heart",b.Pentagon="pentagon",b.Hexagon="hexagon",b.Octagon="octagon",b.Star="star",b.ArrowLeft="arrowLeft",b.ArrowUp="arrowTop",b.ArrowRight="arrowRight",b.ArrowDown="arrowBottom",b.ArrowUpDown="arrowNorthSouth",b.ArrowLeftRight="arrowEastWest",b.Process="process",b.Decision="decision",b.Terminator="terminator",b.PredefinedProcess="predefinedProcess",b.Document="document",b.MultipleDocuments="multipleDocuments",b.ManualInput="manualInput",b.Preparation="preparation",b.Data="data",b.Database="database",b.HardDisk="hardDisk",b.InternalStorage="internalStorage",b.PaperTape="paperTape",b.ManualOperation="manualOperation",b.Delay="delay",b.StoredData="storedData",b.Display="display",b.Merge="merge",b.Connector="connector",b.Or="or",b.SummingJunction="summingJunction",b.Container="container",b.VerticalContainer="verticalContainer",b.HorizontalContainer="horizontalContainer",b.Card="card",b.CardWithImageOnLeft="cardWithImageOnLeft",b.CardWithImageOnTop="cardWithImageOnTop",b.CardWithImageOnRight="cardWithImageOnRight",b}();_.ShapeTypes=m,(b=_.ShapeType||(_.ShapeType={}))[b.text=0]="text",b[b.rectangle=1]="rectangle",b[b.ellipse=2]="ellipse",b[b.cross=3]="cross",b[b.triangle=4]="triangle",b[b.diamond=5]="diamond",b[b.heart=6]="heart",b[b.pentagon=7]="pentagon",b[b.hexagon=8]="hexagon",b[b.octagon=9]="octagon",b[b.star=10]="star",b[b.arrowLeft=11]="arrowLeft",b[b.arrowTop=12]="arrowTop",b[b.arrowRight=13]="arrowRight",b[b.arrowBottom=14]="arrowBottom",b[b.arrowNorthSouth=15]="arrowNorthSouth",b[b.arrowEastWest=16]="arrowEastWest",b[b.process=17]="process",b[b.decision=18]="decision",b[b.terminator=19]="terminator",b[b.predefinedProcess=20]="predefinedProcess",b[b.document=21]="document",b[b.multipleDocuments=22]="multipleDocuments",b[b.manualInput=23]="manualInput",b[b.preparation=24]="preparation",b[b.data=25]="data",b[b.database=26]="database",b[b.hardDisk=27]="hardDisk",b[b.internalStorage=28]="internalStorage",b[b.paperTape=29]="paperTape",b[b.manualOperation=30]="manualOperation",b[b.delay=31]="delay",b[b.storedData=32]="storedData",b[b.display=33]="display",b[b.merge=34]="merge",b[b.connector=35]="connector",b[b.or=36]="or",b[b.summingJunction=37]="summingJunction",b[b.verticalContainer=38]="verticalContainer",b[b.horizontalContainer=39]="horizontalContainer",b[b.cardWithImageOnLeft=40]="cardWithImageOnLeft",b[b.cardWithImageOnTop=41]="cardWithImageOnTop",b[b.cardWithImageOnRight=42]="cardWithImageOnRight"},1552:function(J,_,x){var m,b=this&&this.__extends||(m=function(f,g){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,I){O.__proto__=I}||function(O,I){for(var D in I)I.hasOwnProperty(D)&&(O[D]=I[D])})(f,g)},function(f,g){function O(){this.constructor=f}m(f,g),f.prototype=null===g?Object.create(g):(O.prototype=g.prototype,new O)});Object.defineProperty(_,"__esModule",{value:!0}),_.EmptyStyle=_.StrokeStyle=_.TextAlignment=_.TextStyle=_.Style=_.DEFAULT_STROKE_DASHARRAY=_.DEFAULT_STROKE_WIDTH=_.StyleBase=void 0;var E=x(13),y=x(8396),p=x(9291),d=function(){function f(){this.createDefaultProperties()}return f.prototype.clone=function(){var g=this,O=this.createInstance();return this.forEach(function(I){O[I]=g[I]}),O},f.prototype.forEach=function(g){for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&g(O)},Object.defineProperty(f.prototype,"strokeWidthPx",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"strokeWidth",{get:function(){return p.UnitConverter.pixelsToTwips(this.strokeWidthPx)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"strokeOffset",{get:function(){return.5},enumerable:!1,configurable:!0}),f.prototype.toHash=function(){var g=this.toObject();return g?Object.keys(g).map(function(O){return O+"|"+g[O]}).join(""):""},f.prototype.toObject=function(){var g=this,O={},I=!1,D=this.getDefaultInstance();return this.forEach(function(C){g[C]!==D[C]&&(O[C]=g[C],I=!0)}),I?O:null},f.prototype.fromObject=function(g){for(var O in g)if(Object.prototype.hasOwnProperty.call(g,O)){var I=y.isColorProperty(O)?E.ColorUtils.stringToHash(g[O]):g[O];this[O]=I}},f}();_.StyleBase=d,_.DEFAULT_STROKE_WIDTH=2,_.DEFAULT_STROKE_DASHARRAY="";var s=function(f){function g(){return null!==f&&f.apply(this,arguments)||this}return b(g,f),g.prototype.createInstance=function(){return new g},g.prototype.createDefaultProperties=function(){this.fill="#ffffff",this.stroke="#000000",this["stroke-width"]=_.DEFAULT_STROKE_WIDTH.toString(),this["stroke-dasharray"]=_.DEFAULT_STROKE_DASHARRAY},g.prototype.getDefaultInstance=function(){return g.defaultInstance},g.prototype.isDefaultStrokeDashArray=function(){return this["stroke-dasharray"]===_.DEFAULT_STROKE_DASHARRAY},g.prototype.resetStrokeDashArray=function(){this["stroke-dasharray"]=_.DEFAULT_STROKE_DASHARRAY},Object.defineProperty(g.prototype,"strokeWidthPx",{get:function(){return parseInt(this["stroke-width"])},enumerable:!1,configurable:!0}),g.defaultInstance=new g,g}(d);_.Style=s;var a,f,l=function(f){function g(){return null!==f&&f.apply(this,arguments)||this}return b(g,f),g.prototype.createInstance=function(){return new g},g.prototype.createDefaultProperties=function(){this.fill="#000000",this["font-family"]="Arial",this["font-size"]="10pt",this["font-weight"]="",this["font-style"]="",this["text-decoration"]="",this["text-anchor"]="middle"},g.prototype.getDefaultInstance=function(){return g.defaultInstance},g.prototype.getAlignment=function(){switch(this["text-anchor"]){case"left":return a.Left;case"right":return a.Right;default:return a.Center}},g.defaultInstance=new g,g}(d);_.TextStyle=l,(f=a=_.TextAlignment||(_.TextAlignment={}))[f.Left=0]="Left",f[f.Right=1]="Right",f[f.Center=2]="Center";var u=function(f){function g(O,I){var D=f.call(this)||this;return D._strokeWidthPx=O,D._strokeOffset=I,D}return b(g,f),g.prototype.createInstance=function(){return new g},g.prototype.createDefaultProperties=function(){},g.prototype.getDefaultInstance=function(){return l.defaultInstance},Object.defineProperty(g.prototype,"strokeWidthPx",{get:function(){return this._strokeWidthPx||0},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"strokeOffset",{get:function(){return this._strokeOffset||0},enumerable:!1,configurable:!0}),g.default1pxInstance=new g(1,.5),g.default1pxNegativeOffsetInstance=new g(1,-.5),g.default2pxInstance=new g(2),g}(s);_.StrokeStyle=u;var h=function(f){function g(O){var I=f.call(this)||this;return O&&Object.keys(O).forEach(function(D){return I[D]=O[D]}),I}return b(g,f),g.prototype.createInstance=function(){return new g},g.prototype.createDefaultProperties=function(){},g.prototype.getDefaultInstance=function(){return l.defaultInstance},g.defaultInstance=new g,g}(s);_.EmptyStyle=h},6214:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ReloadContentParameters=void 0;var x=function(){function m(){this.isEmpty=!0}return m.prototype.add=function(b,E,y){void 0!==b&&(void 0===this._dataKeys&&(this._dataKeys=[]),Array.isArray(b)?this._dataKeys=this._dataKeys.concat(b):this._dataKeys.push(b)),this._getData=this._getData||E,this._layoutParameters=this._layoutParameters||y,this.isEmpty=!1},m.prototype.clear=function(){this.isEmpty=!0,this._dataKeys=void 0,this._getData=void 0,this._layoutParameters=void 0},Object.defineProperty(m.prototype,"empty",{get:function(){return this.isEmpty},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"dataKeys",{get:function(){return this._dataKeys},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"getData",{get:function(){return this._getData},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"layoutParameters",{get:function(){return this._layoutParameters},enumerable:!1,configurable:!0}),m}();_.ReloadContentParameters=x},6557:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AutoScrollController=void 0;var m=x(1114),b=x(6907),E=x(6353),y=x(8675),p=function(){function d(s,a,l,u){this.scroll=s,this.svgElement=a,this.view=l,this.dom=u,this.leftButtonPressed=!1,this.scrollDragging=!1,this.scrollTimer=-1,this.scrollBarWidth=b.DomUtils.getVerticalScrollBarWidth()}return d.prototype.onMouseMove=function(s,a){this.clearScrollTimer(),y.EventUtils.isLeftButtonPressed(s)||(this.leftButtonPressed=!1),this.canAutoScroll()&&this.changeScrollPosition(s,a,!1)},d.prototype.onMouseDown=function(s){this.leftButtonPressed=!!y.EventUtils.isLeftButtonPressed(s)},d.prototype.onMouseUp=function(s){this.clearScrollTimer(),this.leftButtonPressed=!1},d.prototype.onMouseEnter=function(s){var a=this;y.EventUtils.isLeftButtonPressed(s)&&setTimeout(function(){a.leftButtonPressed=!0},500)},d.prototype.onDragScrollStart=function(){this.scrollDragging=!0},d.prototype.onDragScrollEnd=function(){this.scrollDragging=!1},d.prototype.canAutoScroll=function(){return this.leftButtonPressed&&!this.scrollDragging},d.prototype.changeScrollPosition=function(s,a,l){var u=this,h=!1;if(!this.view.isAutoScrollLocked()){var f=this.scroll.getScrollContainer(),g=s.pageX-b.DomUtils.getAbsolutePositionX(f),O=s.pageY-b.DomUtils.getAbsolutePositionY(f),I=this.scroll.getSize(),D=new E.Size(parseFloat(this.svgElement.style.width),parseFloat(this.svgElement.style.height)),C=I.width;I.width<D.width&&(C-=this.scrollBarWidth);var w=I.height;I.height<D.height&&(w-=this.scrollBarWidth),g<=40?(this.dom.changeByFunc(null,function(){u.view.isAutoScrollLocked()||u.scroll.offsetScroll(-u.getScrollingOffset(g),0)}),h=!0):C-40<=g&&(this.dom.changeByFunc(null,function(){u.view.isAutoScrollLocked()||u.scroll.offsetScroll(u.getScrollingOffset(C-g),0)}),h=!0),O<=40?(this.dom.changeByFunc(null,function(){u.view.isAutoScrollLocked()||u.scroll.offsetScroll(0,-u.getScrollingOffset(O))}),h=!0):w-40<=O&&(this.dom.changeByFunc(null,function(){u.view.isAutoScrollLocked()||u.scroll.offsetScroll(0,u.getScrollingOffset(w-O))}),h=!0)}(h||this.view.isAutoScrollLocked())&&(this.scrollTimer=window.setTimeout(function(){return u.changeScrollPosition(s,a,h)},50)),l&&a()},d.prototype.clearScrollTimer=function(){this.scrollTimer>-1&&(window.clearTimeout(this.scrollTimer),this.scrollTimer=-1)},d.prototype.getScrollingOffset=function(s){var a=Math.pow((40-s)/5,2);return Math.round(Math.min(a,5))},d.createMainElement=function(s){var a=document.createElement("div");return a.setAttribute("class","dxdi-control"),s.appendChild(a),a},d.createSvgElement=function(s,a){void 0===a&&(a=!1);var l=document.createElementNS(m.svgNS,"svg");return l.className.baseVal="dxdi-canvas"+(a?" export":""),s.appendChild(l),l},d}();_.AutoScrollController=p},3872:function(J,_,x){var m,b=this&&this.__extends||(m=function(g,O){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var C in D)D.hasOwnProperty(C)&&(I[C]=D[C])})(g,O)},function(g,O){function I(){this.constructor=g}m(g,O),g.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)}),E=this&&this.__awaiter||function(g,O,I,D){return new(I||(I=Promise))(function(C,w){function P(R){try{A(D.next(R))}catch(M){w(M)}}function k(R){try{A(D.throw(R))}catch(M){w(M)}}function A(R){var M;R.done?C(R.value):(M=R.value,M instanceof I?M:new I(function(L){L(M)})).then(P,k)}A((D=D.apply(g,O||[])).next())})},y=this&&this.__generator||function(g,O){var I,D,C,w,P={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return w={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w;function k(A){return function(R){return function(M){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,D&&(C=2&M[0]?D.return:M[0]?D.throw||((C=D.return)&&C.call(D),0):D.next)&&!(C=C.call(D,M[1])).done)return C;switch(D=0,C&&(M=[2&M[0],C.value]),M[0]){case 0:case 1:C=M;break;case 4:return P.label++,{value:M[1],done:!1};case 5:P.label++,D=M[1],M=[0];continue;case 7:M=P.ops.pop(),P.trys.pop();continue;default:if(!((C=(C=P.trys).length>0&&C[C.length-1])||6!==M[0]&&2!==M[0])){P=0;continue}if(3===M[0]&&(!C||M[1]>C[0]&&M[1]<C[3])){P.label=M[1];break}if(6===M[0]&&P.label<C[1]){P.label=C[1],C=M;break}if(C&&P.label<C[2]){P.label=C[2],P.ops.push(M);break}C[2]&&P.ops.pop(),P.trys.pop();continue}M=O.call(g,P)}catch(L){M=[6,L],D=0}finally{I=C=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}([A,R])}}};Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasExportManager=void 0;var p=x(9291),d=x(9279),s=x(3500),a=x(7716),l=x(1114),u=x(6078),h=x(13),f=function(g){function O(I,D,C){var w=g.call(this,1,new u.ExportDOMManipulator(D),C)||this;return w.itemsContainer=I,w}return b(O,g),O.prototype.getSvgImage=function(I,D,C,w){var P=l.RenderHelper.createSvgElement(void 0,!0),k=I.clone().applyConverter(p.UnitConverter.twipsToPixelsF).clone().applyConverter(Math.ceil);s.RenderUtils.updateSvgElementSize(P,k.width,k.height,!0),P.style.backgroundColor=h.ColorUtils.colorToHash(D),this.createTextFloodFilter(this.instanceId,void 0,P,D);var A=!C&&!d.Browser.IE&&this.getExportCssRules();if(A){var R=document.createElementNS(l.svgNS,"style");R.innerHTML=A,P.appendChild(R)}if(w){var M=document.createElementNS(l.svgNS,"rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"height",k.height.toString()),M.setAttributeNS(null,"width",k.width.toString()),M.setAttributeNS(null,"fill",P.style.backgroundColor),P.appendChild(M)}for(var L=0;L<this.itemsContainer.childNodes.length;L++){var H=this.itemsContainer.childNodes[L].cloneNode(!0);A||this.inlineStyle(H,this.itemsContainer.childNodes[L]),P.appendChild(H)}return P},O.prototype.getSvgImageUrl=function(I,D,C){var w=this.getSvgImage(I,D,C,!1);return this.getSvgBase64String(w)},O.prototype.getSvgString=function(I){return(new XMLSerializer).serializeToString(I)},O.prototype.getSvgBase64String=function(I){var D=this.getSvgString(I);return O.base64Start+this.getBase64EncodeUnicode(D)},O.prototype.getBase64EncodeUnicode=function(I){return btoa(encodeURIComponent(I).replace(/%([0-9A-F]{2})/g,function(D,C){return String.fromCharCode(parseInt("0x"+C,16))}))},O.prototype.getExportCssRules=function(){for(var I=0;I<document.styleSheets.length;I++){var D=this.getRules(document.styleSheets[I]);if(D){for(var C="",w=0;w<D.length;w++){var P=D[w],k=this.isCSSStyleRule(P)?P.selectorText:null;k&&this.checkSelector(k)&&(C+=P.cssText+"\n")}if(C.length>0)return"\n"+C}}},O.prototype.checkSelector=function(I){for(var D=0;D<O.exportStyleRules.length;D++)if(0===I.indexOf(O.exportStyleRules[D]))return!0;return!1},O.prototype.getRules=function(I){try{return this.isCSSStyleSheet(I)?I.rules||I.cssRules:null}catch{}},O.prototype.isCSSStyleSheet=function(I){return void 0!==I.rules},O.prototype.isCSSStyleRule=function(I){return void 0!==I.selectorText},O.prototype.inlineStyle=function(I,D){for(var C=0;C<I.childNodes.length;C++){var w=I.childNodes[C];if(w.tagName)if("g"===w.tagName)this.inlineStyle(w,D.childNodes[C]);else if(w.style){var P=window.getComputedStyle(D.childNodes[C]);if(void 0!==P)for(var k=0;k<O.exportStyleAttributes.length;k++){var A=O.exportStyleAttributes[k];w.style.setProperty(A,P.getPropertyValue(A))}this.inlineStyle(w,D.childNodes[C])}}},O.prototype.exportSvgImage=function(I,D,C){C(this.getSvgImageUrl(I,D,!0))},O.prototype.exportBinaryImage=function(I,D,C,w,P){var k=this.getAbsoluteSize(I).clone().applyConverter(Math.ceil),A=document.createElement("canvas");A.width=k.width,A.height=k.height;var R=A.getContext("2d");if(R.fillStyle=h.ColorUtils.colorToHash(D),R.fillRect(0,0,k.width,k.height),(P||d.Browser.IE)&&"object"==typeof canvg)this.exportBinaryImageCanvgAsync(I,D,A,R,C).then(function(L){return w(L)});else if(d.Browser.IE&&"function"==typeof canvg)this.exportBinaryImageCanvgOld(I,D,A,R,C,w);else{var M=new Image;M.width=k.width,M.height=k.height,M.setAttribute("crossOrigin","anonymous"),M.onload=function(){R.drawImage(M,0,0),w(A.toDataURL(C,1))},M.src=this.getSvgImageUrl(I,D,!0)}},O.prototype.exportBinaryImageCanvgOld=function(I,D,C,w,P,k){var A=this.getSvgImage(I,D,!0,!1),R=this.getSvgString(A);w.drawSvg(R,0,0,null,null,{renderCallback:function(){k(C.toDataURL(P,1))}})},O.prototype.exportBinaryImageCanvgAsync=function(I,D,C,w,P){return E(this,void 0,void 0,function(){var k,A;return y(this,function(R){switch(R.label){case 0:return k=this.getSvgImage(I,D,!0,!0),A=this.getSvgString(k),[4,canvg.Canvg.fromString(w,A).render()];case 1:return R.sent(),[2,C.toDataURL(P,1)]}})})},O.prototype.exportPngImage=function(I,D,C,w){this.exportBinaryImage(I,D,"image/png",C,w)},O.prototype.exportJpgImage=function(I,D,C,w){this.exportBinaryImage(I,D,"image/jpeg",C,w)},O.prototype.notifyModelChanged=function(I){},O.prototype.notifyPageColorChanged=function(I){},O.prototype.notifyPageSizeChanged=function(I,D){},O.base64Start="data:image/svg+xml;base64,",O.exportStyleRules=[".dxdi-canvas .shape ",".dxdi-canvas .connector ",".dxdi-canvas text",".dxdi-canvas.export"],O.exportStyleAttributes=["fill","stroke","stroke-width","stroke-linejoin","font-family","font-size","font-weight","font-style","text-decoration","text-anchor"],O}(a.CanvasManagerBase);_.CanvasExportManager=f},8693:function(J,_,x){var m,b=this&&this.__extends||(m=function(g,O){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var C in D)D.hasOwnProperty(C)&&(I[C]=D[C])})(g,O)},function(g,O){function I(){this.constructor=g}m(g,O),g.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)});Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasItemsManager=_.CONNECTOR_CAN_MOVE=_.NOT_VALID_CSSCLASS=void 0;var E=x(2004),y=x(6031),p=x(5329),d=x(3500),s=x(5503),a=x(7959),l=x(6907),u=x(916),h=x(4867);_.NOT_VALID_CSSCLASS="not-valid",_.CONNECTOR_CAN_MOVE="can-move";var f=function(g){function O(I,D,C,w){var P=g.call(this,D,C,w)||this;return P.itemSelectorGroupContainers={},P.itemSelectorElements={},P.itemGroupContainers={},P.itemElements={},P.itemChildElements={},P.primitives={},P.selectorPrimitives={},P.selectedItems={},P.initializeContainerElements(I),P}return b(O,g),O.prototype.initializeContainerElements=function(I){this.itemSelectorsContainer=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null),I),this.itemsContainer=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null),I)},O.prototype.clear=function(){this.primitives={},this.selectorPrimitives={},d.RenderUtils.removeContent(this.itemSelectorsContainer),d.RenderUtils.removeContent(this.itemsContainer),this.itemSelectorGroupContainers={},this.itemSelectorElements={},this.itemGroupContainers={},this.itemElements={},this.itemChildElements={},this.selectedItems={}},O.prototype.applyChange=function(I){var D=I.item;return!!this.getItemParent(D.zIndex,D.container&&D.container.key)&&(D instanceof s.Shape?this.applyShapeChange(D,I.type,I.isValid):D instanceof a.Connector&&this.applyConnectorChange(D,I.type,I.isValid),!0)},O.prototype.setPointerEventsNone=function(I,D){var C=I.style;void 0!==C&&void 0!==C.pointerEvents&&(C.pointerEvents=D?"none":"");for(var w=I.childNodes,P=0;P<w.length;P++)this.setPointerEventsNone(w[P],D)},O.prototype.notifyDragStart=function(I){var D=this;I.forEach(function(C){D.itemElements[C]&&D.setPointerEventsNone(D.itemElements[C],!0),D.itemChildElements[C]&&D.setPointerEventsNone(D.itemChildElements[C],!0),D.itemSelectorElements[C]&&D.setPointerEventsNone(D.itemSelectorElements[C],!0)})},O.prototype.notifyDragEnd=function(I){var D=this;I.forEach(function(C){D.itemElements[C]&&D.setPointerEventsNone(D.itemElements[C],!1),D.itemChildElements[C]&&D.setPointerEventsNone(D.itemChildElements[C],!1),D.itemSelectorElements[C]&&D.setPointerEventsNone(D.itemSelectorElements[C],!1)})},O.prototype.notifyDragScrollStart=function(){},O.prototype.notifyDragScrollEnd=function(){},O.prototype.notifyTextInputStart=function(I,D,C,w){l.DomUtils.addClassName(this.itemElements[I.key],"text-input")},O.prototype.notifyTextInputEnd=function(I,D){l.DomUtils.removeClassName(this.itemElements[I.key],"text-input")},O.prototype.notifyTextInputPermissionsCheck=function(I,D){var C=this.itemElements[I.key];D?l.DomUtils.removeClassName(C,_.NOT_VALID_CSSCLASS):l.DomUtils.addClassName(C,_.NOT_VALID_CSSCLASS)},O.prototype.notifyActualZoomChanged=function(I){var D="scale("+I+")";this.dom.changeByFunc(this.itemsContainer,function(C){return C.setAttribute("transform",D)}),this.dom.changeByFunc(this.itemSelectorsContainer,function(C){return C.setAttribute("transform",D)}),this.actualZoom=I},O.prototype.notifyViewAdjusted=function(I){},O.prototype.invalidatePrimitives=function(I){this.primitives[I.key]&&(this.primitives[I.key].forEach(function(D){D.dispose()}),delete this.primitives[I.key]),this.selectorPrimitives[I.key]&&(this.selectorPrimitives[I.key].forEach(function(D){D.dispose()}),delete this.selectorPrimitives[I.key])},O.prototype.getPrimitives=function(I,D){return this.primitives[I.key]||(this.primitives[I.key]=I.createPrimitives(D)),this.primitives[I.key]},O.prototype.getSelectorPrimitives=function(I){return this.selectorPrimitives[I.key]||(this.selectorPrimitives[I.key]=I.createSelectorPrimitives()),this.selectorPrimitives[I.key]},O.prototype.getShapeSelectorClassName=function(I){var D="shape";return I.enableChildren&&(D+=" container"),I.isLocked&&(D+=" locked"),D},O.prototype.getShapeClassName=function(I,D){var C=this.getShapeSelectorClassName(I);return D?C:C+" "+_.NOT_VALID_CSSCLASS},O.prototype.applyShapeChange=function(I,D,C){var w=I.key,P=I.container&&I.container.key,k=this.getItemSelectorGroupContainer(I.zIndex,P),A=this.getItemGroupContainer(I.zIndex,P),R=this.getShapeClassName(I,C);switch(D){case E.ItemChangeType.Create:this.itemSelectorElements[w]=this.createItemElements(w,this.getSelectorPrimitives(I),k,this.getShapeSelectorClassName(I),y.MouseEventElementType.Shape),this.itemElements[w]=this.createItemElements(w,this.getPrimitives(I,this.instanceId),A,R,y.MouseEventElementType.Shape),I.enableChildren&&(this.itemChildElements[w]=this.createItemElements(w,[],A,"container-children",y.MouseEventElementType.Undefined),this.changeItemChildrenVisibility(this.itemChildElements[w],I.expanded));break;case E.ItemChangeType.Remove:this.removeItemCustomContent(this.itemSelectorElements[w],this.getSelectorPrimitives(I)),this.removeItemCustomContent(this.itemElements[w],this.getPrimitives(I,this.instanceId)),this.invalidatePrimitives(I),this.removeItemElements(this.itemSelectorElements[w]),delete this.itemSelectorElements[w],this.removeItemElements(this.itemElements[w]),delete this.itemElements[w],this.itemChildElements[w]&&(this.removeItemElements(this.itemChildElements[w]),delete this.itemChildElements[w],delete this.itemGroupContainers[w],delete this.itemSelectorGroupContainers[w]);break;case E.ItemChangeType.UpdateStructure:case E.ItemChangeType.UpdateProperties:case E.ItemChangeType.Update:D!==E.ItemChangeType.Update&&(D===E.ItemChangeType.UpdateStructure&&(this.removeItemCustomContent(this.itemSelectorElements[w],this.getSelectorPrimitives(I)),this.removeItemCustomContent(this.itemElements[w],this.getPrimitives(I,this.instanceId))),this.invalidatePrimitives(I)),this.changeItemElements(this.getSelectorPrimitives(I),this.itemSelectorElements[w],D===E.ItemChangeType.UpdateStructure),this.changeItemElements(this.getPrimitives(I,this.instanceId),this.itemElements[w],D===E.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemElements[w],R),this.itemChildElements[w]&&this.changeItemChildrenVisibility(this.itemChildElements[w],I.expanded),k!==(this.itemSelectorElements[w]&&this.itemSelectorElements[w].parentNode)&&this.moveItemElements(k,this.itemSelectorElements[w]),A!==(this.itemElements[w]&&this.itemElements[w].parentNode)&&this.moveItemElements(A,this.itemElements[w]),this.itemChildElements[w]&&A!==this.itemChildElements[w].parentNode&&this.moveItemElements(A,this.itemChildElements[w]);break;case E.ItemChangeType.UpdateClassName:this.changeItemClassName(this.itemElements[w],R)}},O.prototype.getConnectorSelectorClassName=function(I){var D="connector";return h.ModelUtils.canMoveConnector(this.selectedItems,I)?D+" "+_.CONNECTOR_CAN_MOVE:D},O.prototype.getConnectorClassName=function(I,D){var C=this.getConnectorSelectorClassName(I);return D?C:C+" "+_.NOT_VALID_CSSCLASS},O.prototype.applyConnectorChange=function(I,D,C){var w=I.key,P=I.container&&I.container.key,k=this.getItemSelectorGroupContainer(I.zIndex,P),A=this.getItemGroupContainer(I.zIndex,P),R=this.getConnectorClassName(I,C);switch(D){case E.ItemChangeType.Create:this.itemSelectorElements[w]=this.createItemElements(w,this.getSelectorPrimitives(I),k,this.getConnectorSelectorClassName(I),y.MouseEventElementType.Connector),this.itemElements[w]=this.createItemElements(w,this.getPrimitives(I,this.instanceId),A,R,y.MouseEventElementType.Connector);break;case E.ItemChangeType.Remove:this.removeItemCustomContent(this.itemSelectorElements[w],this.getSelectorPrimitives(I)),this.removeItemCustomContent(this.itemElements[w],this.getPrimitives(I,this.instanceId)),this.invalidatePrimitives(I),this.removeItemElements(this.itemSelectorElements[w]),delete this.itemSelectorElements[w],this.removeItemElements(this.itemElements[w]),delete this.itemElements[w];break;case E.ItemChangeType.UpdateStructure:case E.ItemChangeType.UpdateProperties:case E.ItemChangeType.Update:D!==E.ItemChangeType.Update&&(D===E.ItemChangeType.UpdateStructure&&(this.removeItemCustomContent(this.itemSelectorElements[w],this.getSelectorPrimitives(I)),this.removeItemCustomContent(this.itemElements[w],this.getPrimitives(I,this.instanceId))),this.invalidatePrimitives(I)),this.changeItemElements(this.getSelectorPrimitives(I),this.itemSelectorElements[w],D===E.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemSelectorElements[w],this.getConnectorSelectorClassName(I)),this.changeItemElements(this.getPrimitives(I,this.instanceId),this.itemElements[w],D===E.ItemChangeType.UpdateStructure),this.changeItemClassName(this.itemElements[w],R),k!==(this.itemSelectorElements[w]&&this.itemSelectorElements[w].parentNode)&&this.moveItemElements(k,this.itemSelectorElements[w]),A!==(this.itemElements[w]&&this.itemElements[w].parentNode)&&this.moveItemElements(A,this.itemElements[w]);break;case E.ItemChangeType.UpdateClassName:this.changeItemClassName(this.itemSelectorElements[w],this.getConnectorSelectorClassName(I)),this.changeItemClassName(this.itemElements[w],R)}},O.prototype.createItemElements=function(I,D,C,w,P){var k=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],w,void 0,void 0,function(A){return d.RenderUtils.setElementEventData(A,P,I)}),C);return this.createAndChangePrimitivesElements(D,k),k},O.prototype.changeItemElements=function(I,D,C){C||I.length!==D.childNodes.length?(d.RenderUtils.removeContent(D),this.createAndChangePrimitivesElements(I,D)):this.dom.changeChildrenByPrimitives(I,D)},O.prototype.changeItemClassName=function(I,D){D&&I&&this.changePrimitiveElement(new p.GroupPrimitive([],D),I)},O.prototype.removeItemElements=function(I){I&&I.parentNode&&I.parentNode.removeChild(I)},O.prototype.removeItemCustomContent=function(I,D){I&&D&&D.length===I.childNodes.length&&D.forEach(function(C,w){C.destroyCustomContent(I.childNodes[w])})},O.prototype.moveItemElements=function(I,D,C){D&&I&&(C?I.insertBefore(D,C):I.appendChild(D))},O.prototype.changeItemChildrenVisibility=function(I,D){I.style.display=D?"":"none"},O.prototype.getItemGroupContainerKey=function(I,D){return void 0!==D?I+"_"+D:I.toString()},O.prototype.getItemGroupContainer=function(I,D){var C=void 0!==D?this.getItemParent(I,D):this.itemsContainer,w=D||"Main";if(void 0===this.itemGroupContainers[w]||void 0===this.itemGroupContainers[w][I]){void 0===this.itemGroupContainers[w]&&(this.itemGroupContainers[w]=[]);var P=Object.keys(this.itemGroupContainers[w]).map(function(k){return+k}).sort().filter(function(k){return k>I})[0];this.itemGroupContainers[w][I]=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null,I),C,this.itemGroupContainers[w][P])}return this.itemGroupContainers[w][I]},O.prototype.getItemSelectorGroupContainer=function(I,D){var C=void 0!==D?this.getItemSelectorParent(I,D):this.itemSelectorsContainer,w=D||"Main";if(void 0===this.itemSelectorGroupContainers[w]||void 0===this.itemSelectorGroupContainers[w][I]){void 0===this.itemSelectorGroupContainers[w]&&(this.itemSelectorGroupContainers[w]=[]);var P=Object.keys(this.itemSelectorGroupContainers[w]).map(function(k){return+k}).sort().filter(function(k){return k>I})[0];this.itemSelectorGroupContainers[w][I]=this.createAndChangePrimitiveElement(new p.GroupPrimitive([],null,I),C,this.itemSelectorGroupContainers[w][P])}return this.itemSelectorGroupContainers[w][I]},O.prototype.getItemParent=function(I,D){return void 0!==D?this.itemChildElements[D]:this.getItemGroupContainer(I)},O.prototype.getItemSelectorParent=function(I,D){return void 0!==D?this.itemChildElements[D]:this.getItemSelectorGroupContainer(I)},O.prototype.notifySelectionChanged=function(I){var D=this,C=h.ModelUtils.createSelectedItems(I),w=[];this.populateItems(w,C,this.selectedItems),this.populateItems(w,this.selectedItems,C),this.selectedItems=C,w.forEach(function(P){P instanceof a.Connector&&!D.pendingRemoveChanges[P.key]&&D.applyOrPostponeChanges([new E.ItemChange(P,E.ItemChangeType.UpdateClassName,!0)])})},O.prototype.populateItems=function(I,D,C){Object.keys(D).forEach(function(w){C[w]||I.push(D[w])})},O}(u.CanvasManager);_.CanvasItemsManager=f},916:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasManager=void 0;var E=x(2004),y=function(p){function d(){var s=null!==p&&p.apply(this,arguments)||this;return s.pendingChanges={},s.pendingRemoveChanges={},s.updatesLock=0,s}return b(d,p),d.prototype.beginUpdate=function(){this.updatesLock++},d.prototype.endUpdate=function(){this.updatesLock--,0===this.updatesLock&&this.applyPendingChanges()},d.prototype.getPendingChanges=function(){var s=this;return Object.keys(this.pendingChanges).map(function(a){return s.pendingChanges[a]})},d.prototype.getPendingRemoveChanges=function(){var s=this;return Object.keys(this.pendingRemoveChanges).map(function(a){return s.pendingRemoveChanges[a]})},d.prototype.applyPendingChanges=function(){var s=this.getPendingRemoveChanges();s.length&&(this.applyChangesCore(s),this.pendingRemoveChanges={});var a=this.getPendingChanges();a.length&&(this.applyChangesCore(a),this.pendingChanges={})},d.prototype.applyChangesCore=function(s){var a=this,l=[];s.forEach(function(u){a.applyChange(u)||l.push(u)}),l.length&&l.length!==s.length&&this.applyChangesCore(l)},d.prototype.postponeChanges=function(s){var a=this;s.forEach(function(l){if(l.type===E.ItemChangeType.Remove)a.pendingRemoveChanges[l.key]=l,delete a.pendingChanges[l.key];else if(a.pendingChanges[l.key])l.type===E.ItemChangeType.Create?a.pendingChanges[l.key]=l:l.type===E.ItemChangeType.UpdateStructure?a.pendingChanges[l.key].type===E.ItemChangeType.UpdateProperties&&(a.pendingChanges[l.key]=l):l.type===E.ItemChangeType.UpdateProperties?a.pendingChanges[l.key].type===E.ItemChangeType.Update&&(a.pendingChanges[l.key]=l):l.type===E.ItemChangeType.UpdateClassName&&a.pendingChanges[l.key].type===E.ItemChangeType.UpdateClassName&&(a.pendingChanges[l.key]=l);else{if(a.pendingRemoveChanges[l.key]&&l.type!==E.ItemChangeType.Create)throw new Error("Incorrect model changes sequence.");a.pendingChanges[l.key]=l}})},d.prototype.applyOrPostponeChanges=function(s){0===this.updatesLock?this.applyChangesCore(s):this.postponeChanges(s)},d.prototype.notifyModelChanged=function(s){this.applyOrPostponeChanges(s)},d.prototype.notifyPageColorChanged=function(s){},d.prototype.notifyPageSizeChanged=function(s,a){},d}(x(7716).CanvasManagerBase);_.CanvasManager=y},7716:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasManagerBase=_.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX=void 0;var m=x(3360),b=x(9291);_.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX="page-text-flood";var E=function(){function y(p,d,s){this.elements={},this.instanceId=s,this.actualZoom=p,this.dom=d}return y.prototype.createAndChangePrimitivesElements=function(p,d){var s=this;p.forEach(function(a){s.createAndChangePrimitiveElement(a,d)})},y.prototype.createPrimitiveElement=function(p,d,s){return this.dom.createElement(p,d,s)},y.prototype.createAndChangePrimitiveElement=function(p,d,s){var a=this.createPrimitiveElement(p,d,s);return this.dom.changeByPrimitive(a,p),a},y.prototype.changePrimitiveElement=function(p,d){this.dom.changeByPrimitive(d,p)},y.prototype.getOrCreateElement=function(p,d,s,a){var l=p&&this.elements[p]||(this.elements[p]=this.createPrimitiveElement(d,s,a));return this.changePrimitiveElement(d,l),l},y.prototype.createTextFloodFilter=function(p,d,s,a){this.getOrCreateElement(d,new m.TextFloodFilterPrimitive(_.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+p,a),s)},y.prototype.getAbsoluteSize=function(p){return p.clone().applyConverter(b.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom,this.actualZoom)},y}();_.CanvasManagerBase=E},6043:function(J,_,x){var m,b=this&&this.__extends||(m=function(I,D){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var P in w)w.hasOwnProperty(P)&&(C[P]=w[P])})(I,D)},function(I,D){function C(){this.constructor=I}m(I,D),I.prototype=null===D?Object.create(D):(C.prototype=D.prototype,new C)});Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasPageManager=void 0;var E=x(1552),y=x(4716),p=x(7724),d=x(1932),s=x(4593),a=x(7716),l=x(6353),u=x(8900),h=x(3500),f=x(13),g=x(9291),O=function(I){function D(C,w,P,k){var A=I.call(this,w.zoomLevel,P,k)||this;return A.snapPoint=new u.Point(0,0),A.gridPatternId=h.RenderUtils.generateSvgElementId("gridPattern"),A.pagesGridPatternId=h.RenderUtils.generateSvgElementId("pagesGridPattern"),A.pagesGridClipId=h.RenderUtils.generateSvgElementId("pagesGridClip"),A.pageColor=w.pageColor,A.modelSize=w.modelSize,A.simpleView=w.simpleView,A.gridSize=w.gridSize,A.gridVisible=w.gridVisible,A.pageSize=w.pageLandscape?new l.Size(w.pageSize.height,w.pageSize.width):w.pageSize,A.canvasViewOffset=new u.Point(0,0),A.initContainers(C),A}return b(D,I),D.prototype.initContainers=function(C){this.backgroundContainer=C},D.prototype.redraw=function(){this.redrawPage(this.pageColor),this.redrawGrid()},D.prototype.redrawPage=function(C){var w=new E.Style;w.fill=f.ColorUtils.colorToHash(C),this.getOrCreateElement("page-bg",new y.RectanglePrimitive(0,0,"100%","100%",w,"page"),this.backgroundContainer),this.createTextFloodFilter(this.instanceId,"page-bg-textflood-filter",this.backgroundContainer,C)},D.prototype.redrawGrid=function(){this.updateGridElements(),this.updatePagesGridElements()},D.prototype.getGridRectElement=function(C){return void 0===this.gridRectElement&&(this.gridRectElement=this.createPrimitiveElement(C,this.backgroundContainer)),this.gridRectElement},D.prototype.getGridPatternElement=function(C){return void 0===this.gridPatternElement&&(this.gridPatternElement=this.createPrimitiveElement(C,this.backgroundContainer)),this.gridPatternElement},D.prototype.updateGridElements=function(){var C=this,w=new y.RectanglePrimitive("0","0","100%","100%",null,"grid",null,function(K){K.style.setProperty("fill",h.RenderUtils.getUrlPathById(C.gridPatternId))}),P=this.getGridRectElement(w);if(this.gridVisible){P.style.display="",this.changePrimitiveElement(w,P);for(var k=g.UnitConverter.twipsToPixelsF(this.gridSize)*this.actualZoom,A=[0,1,2,3,4].map(function(K){return Math.round(k*K)}),R=[new p.PathPrimitiveMoveToCommand(A[4].toString(),"0"),new p.PathPrimitiveLineToCommand(A[4].toString(),A[4].toString()),new p.PathPrimitiveLineToCommand("0",A[4].toString())],M=[],L=1;L<=3;L++)M.push(new p.PathPrimitiveMoveToCommand(A[L].toString(),"0")),M.push(new p.PathPrimitiveLineToCommand(A[L].toString(),A[4].toString()));for(L=1;L<=3;L++)M.push(new p.PathPrimitiveMoveToCommand("0",A[L].toString())),M.push(new p.PathPrimitiveLineToCommand(A[4].toString(),A[L].toString()));var H=4*k,j=this.simpleView?this.canvasViewOffset:u.Point.zero(),U=new d.PatternPrimitive(this.gridPatternId,[this.createGridPathPrimitive(R,"grid-outer-line"),this.createGridPathPrimitive(M,"grid-inner-line")],this.createGridPatternPrimitivePosition(j.x,this.snapPoint.x,H),this.createGridPatternPrimitivePosition(j.y,this.snapPoint.y,H),H.toString(),H.toString());this.changePrimitiveElement(U,this.getGridPatternElement(U))}else P.style.display="none"},D.prototype.createGridPatternPrimitivePosition=function(C,w,P){return(((C+w*this.actualZoom)%P-P)%P).toString()},D.prototype.createGridPathPrimitive=function(C,w){return new p.PathPrimitive(C,E.StrokeStyle.default1pxNegativeOffsetInstance,w)},D.prototype.getPagesGridRectElement=function(C){return this.getOrCreateElement("grid-pages-rect",C,this.backgroundContainer)},D.prototype.getPagesGridClipPathElement=function(C){return void 0===this.pagesGridClipPathElement&&(this.pagesGridClipPathElement=this.createPrimitiveElement(C,this.backgroundContainer)),this.pagesGridClipPathElement},D.prototype.getPagesGridPatternElement=function(C){return void 0===this.pagesGridPatternElement&&(this.pagesGridPatternElement=this.createPrimitiveElement(C,this.backgroundContainer)),this.pagesGridPatternElement},D.prototype.updatePagesGridElements=function(){var C=this,w=this.getAbsoluteSize(this.pageSize),P=new y.RectanglePrimitive("0","0","100%","100%",null,"grid-page",this.pagesGridClipId,function(L){L.style.setProperty("fill",h.RenderUtils.getUrlPathById(C.pagesGridPatternId)),L.style.setProperty("display",C.simpleView?"none":"")});if(this.getPagesGridRectElement(P),!this.simpleView){var k=this.modelSize.clone().multiply(this.actualZoom,this.actualZoom),A=[new p.PathPrimitiveMoveToCommand((w.width-1).toString(),"0"),new p.PathPrimitiveLineToCommand((w.width-1).toString(),(w.height-1).toString()),new p.PathPrimitiveLineToCommand("0",(w.height-1).toString())],R=new d.PatternPrimitive(this.pagesGridPatternId,[new p.PathPrimitive(A,null,"pages-grid-line")],0,0,w.width.toString(),w.height.toString());this.changePrimitiveElement(R,this.getPagesGridPatternElement(R));var M=new s.ClipPathPrimitive(this.pagesGridClipId,[new y.RectanglePrimitive(0,0,(g.UnitConverter.twipsToPixelsF(k.width)-4).toString(),(g.UnitConverter.twipsToPixelsF(k.height)-4).toString())]);this.changePrimitiveElement(M,this.getPagesGridClipPathElement(M))}},D.prototype.notifyModelSizeChanged=function(C,w){this.modelSize=C.clone(),this.redraw()},D.prototype.notifyModelRectangleChanged=function(C){},D.prototype.notifySnapPointPositionChanged=function(C){this.snapPoint=C.clone().applyConverter(g.UnitConverter.twipsToPixelsF),this.redrawGrid()},D.prototype.notifyPageColorChanged=function(C){this.pageColor=C,this.redrawPage(this.pageColor)},D.prototype.notifyModelChanged=function(C){},D.prototype.notifyPageSizeChanged=function(C,w){this.pageSize=w?new l.Size(C.height,C.width):C.clone(),this.redraw()},D.prototype.notifyActualZoomChanged=function(C){this.actualZoom=C,this.redraw()},D.prototype.notifyViewAdjusted=function(C){this.canvasViewOffset.equals(C)||(this.canvasViewOffset=C,this.simpleView&&this.redraw())},D.prototype.notifyViewChanged=function(C){this.simpleView=C,this.redraw()},D.prototype.notifyGridChanged=function(C,w){this.gridVisible=C,this.gridSize=w,this.redraw()},D}(a.CanvasManagerBase);_.CanvasPageManager=O},4e3:function(J,_,x){var m,b=this&&this.__extends||(m=function(re,Q){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,ie){G.__proto__=ie}||function(G,ie){for(var ae in ie)ie.hasOwnProperty(ae)&&(G[ae]=ie[ae])})(re,Q)},function(re,Q){function G(){this.constructor=re}m(re,Q),re.prototype=null===Q?Object.create(Q):(G.prototype=Q.prototype,new G)});Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasSelectionManager=_.ACTIVE_SELECTION_CSSCLASS=_.SELECTION_ELEMENT_CLASSNAMES=void 0;var E=x(7716),y=x(5329),p=x(3500),d=x(6031),s=x(3742),a=x(8675),l=x(8900),u=x(371),h=x(5503),f=x(7959),g=x(4612),O=x(4716),I=x(7724),D=x(9416),C=x(418),w=x(1552),P=x(9291),k=x(4246),A=x(9279),R=x(6907),M=x(8693),L=x(916),H=x(5596),j=x(8679),U=x(4867),K="-1";_.SELECTION_ELEMENT_CLASSNAMES={SELECTION_RECTANGLE:"selection-rect",CONNECTION_POINT:"connection-point",ACTIVE:"active",CONTAINER_TARGET:"container-target",CONNECTION_TARGET:"connection-target",EXTENSION_LINE:"extension-line",CONNECTION_MARK:"connection-mark",SELECTION_MARK:"selection-mark",LOCKED_SELECTION_MARK:"locked-selection-mark",ITEMS_SELECTION_RECT:"items-selection-rect",CONNECTOR_MULTI_SELECTION:"connector-multi-selection",CONNECTOR_SELECTION:"connector-selection",CONNECTOR_POINT_MARK:"connector-point-mark",CONNECTOR_SELECTION_MASK:"connector-selection-mask",CONNECTOR_SIDE_MARK:"connector-side-mark",ITEM_SELECTION_RECT:"item-selection-rect",ITEM_MULTI_SELECTION:"item-multi-selection-rect"},_.ACTIVE_SELECTION_CSSCLASS="dxdi-active-selection";var q=function(re){function Q(G,ie,ae,me,be){var Ce=re.call(this,ie,me,be)||this;return Ce.readOnly=ae,Ce.connectionPointElements=[],Ce.extensionLineElements=[],Ce.selectionMap={},Ce.parentContainer=G,Ce.initializeContainerElements(G),Ce}return b(Q,re),Q.prototype.initializeContainerElements=function(G){this.itemSelectionContainer=this.createAndChangePrimitiveElement(new y.GroupPrimitive([],null),G),this.visualizersContainer=this.createAndChangePrimitiveElement(new y.GroupPrimitive([],null),G),this.selectionMarksContainer=this.createAndChangePrimitiveElement(new y.GroupPrimitive([],null),G)},Q.prototype.clear=function(){p.RenderUtils.removeContent(this.itemSelectionContainer),p.RenderUtils.removeContent(this.selectionMarksContainer),p.RenderUtils.removeContent(this.visualizersContainer),this.selectionRectElement=void 0,this.resizeInfoElement=void 0,this.connectionPointElements=[],this.connectionTargetElement=void 0,this.containerTargetElement=void 0,this.extensionLineElements=[],this.selectionMap={}},Q.prototype.showSelectionRect=function(G){R.DomUtils.addClassName(this.parentContainer,_.ACTIVE_SELECTION_CSSCLASS);var ie=new O.RectanglePrimitive(G.x,G.y,G.width,G.height,w.StrokeStyle.default1pxInstance,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_RECTANGLE),ae=this.getSelectionRectElement(ie);this.changePrimitiveElement(ie,ae)},Q.prototype.hideSelectionRect=function(){R.DomUtils.removeClassName(this.parentContainer,_.ACTIVE_SELECTION_CSSCLASS),void 0!==this.selectionRectElement&&this.dom.changeByFunc(this.selectionRectElement,function(G){return G.style.display="none"})},Q.prototype.getSelectionRectElement=function(G){return void 0!==this.selectionRectElement?this.dom.changeByFunc(this.selectionRectElement,function(ie){return ie.style.display=""}):this.selectionRectElement=this.createPrimitiveElement(G,this.visualizersContainer),this.selectionRectElement},Q.prototype.showResizeInfo=function(G,ie){var ae=new O.RectanglePrimitive(G.x,G.y,0,0,w.StrokeStyle.default1pxInstance),me=new y.GroupPrimitive([ae,new D.TextPrimitive(G.x,G.y,ie,k.TextOwner.Resize)],"resize-info"),be=this.getResizeInfoElement(me);this.changePrimitiveElement(me,be);var Ce=this.dom.measurer.measureTextLine(ie,null,k.TextOwner.Resize).applyConverter(P.UnitConverter.pixelsToTwips);ae.width=Ce.width+2*Q.resizeInfoTextOffset,ae.height=Ce.height+2*Q.resizeInfoTextOffset,ae.x=G.x-Ce.width/2-Q.resizeInfoTextOffset,ae.y=G.y-Ce.height/2-Q.resizeInfoTextOffset,this.changePrimitiveElement(me,be)},Q.prototype.hideResizeInfo=function(){void 0!==this.resizeInfoElement&&this.dom.changeByFunc(this.resizeInfoElement,function(G){return G.style.display="none"})},Q.prototype.getResizeInfoElement=function(G){return void 0!==this.resizeInfoElement?this.dom.changeByFunc(this.resizeInfoElement,function(ie){return ie.style.display=""}):this.resizeInfoElement=this.createPrimitiveElement(G,this.visualizersContainer),this.resizeInfoElement},Q.prototype.getConnectionPointClassName=function(G,ie){var ae=_.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT;return G&&(ae+=" "+_.SELECTION_ELEMENT_CLASSNAMES.ACTIVE),ie||(ae+=" "+M.NOT_VALID_CSSCLASS),ae},Q.prototype.showConnectionPoint=function(G,ie,ae,me,be,Ce){this.showConnectionPointCore(2*G,ie.x,ie.y,Q.connectionPointLargeSize,Q.connectionPointLargeSize,d.MouseEventElementType.ShapeConnectionPoint,ae,me,_.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_POINT+" selector"+(Ce?"":" "+M.NOT_VALID_CSSCLASS)),this.showConnectionPointCore(2*G+1,ie.x,ie.y,Q.connectionPointSmallSize,Q.connectionPointSmallSize,d.MouseEventElementType.ShapeConnectionPoint,ae,me,this.getConnectionPointClassName(be,Ce))},Q.prototype.showConnectionPointCore=function(G,ie,ae,me,be,Ce,ve,ee,oe){var te=new C.EllipsePrimitive(ie,ae,me,be,null,oe,function(fe){return p.RenderUtils.setElementEventData(fe,Ce,ve,ee)}),ce=this.getConnectionPointElement(te,G);this.changePrimitiveElement(te,ce)},Q.prototype.hideConnectionPoints=function(){for(var G=0;G<this.connectionPointElements.length;G++)this.dom.changeByFunc(this.connectionPointElements[G],function(ie){return ie.style.display="none"})},Q.prototype.getConnectionPointElement=function(G,ie){var ae=this.connectionPointElements[ie];return void 0!==ae?this.dom.changeByFunc(ae,function(me){return me.style.display=""}):(ae=this.createPrimitiveElement(G,this.visualizersContainer),this.connectionPointElements[ie]=ae),ae},Q.prototype.showContainerTarget=function(G,ie){var ae=new O.RectanglePrimitive(ie.x,ie.y,ie.width,ie.height,null,_.SELECTION_ELEMENT_CLASSNAMES.CONTAINER_TARGET),me=this.getContainerTargetElement(ae);this.changePrimitiveElement(ae,me)},Q.prototype.hideContainerTarget=function(){this.containerTargetElement&&this.dom.changeByFunc(this.containerTargetElement,function(G){return G.style.display="none"})},Q.prototype.getContainerTargetElement=function(G){return void 0!==this.containerTargetElement?this.dom.changeByFunc(this.containerTargetElement,function(ie){return ie.style.display=""}):this.containerTargetElement=this.createPrimitiveElement(G,this.itemSelectionContainer),this.containerTargetElement},Q.prototype.showConnectionTarget=function(G,ie){var ae=new O.RectanglePrimitive(ie.x,ie.y,ie.width,ie.height,null,_.SELECTION_ELEMENT_CLASSNAMES.CONNECTION_TARGET),me=this.getConnectionTargetElement(ae);this.changePrimitiveElement(ae,me)},Q.prototype.hideConnectionTarget=function(){this.connectionTargetElement&&this.dom.changeByFunc(this.connectionTargetElement,function(G){return G.style.display="none"})},Q.prototype.getConnectionTargetElement=function(G){return void 0!==this.connectionTargetElement?this.dom.changeByFunc(this.connectionTargetElement,function(ie){return ie.style.display=""}):this.connectionTargetElement=this.createPrimitiveElement(G,this.itemSelectionContainer),this.connectionTargetElement},Q.prototype.showExtensionLine=function(G,ie,ae,me,be){var Ce=_.SELECTION_ELEMENT_CLASSNAMES.EXTENSION_LINE;ie!==u.ExtensionLineType.VerticalCenterAfter&&ie!==u.ExtensionLineType.VerticalCenterBefore&&ie!==u.ExtensionLineType.HorizontalCenterAbove&&ie!==u.ExtensionLineType.HorizontalCenterBelow||(Ce+=" center"),ie!==u.ExtensionLineType.VerticalCenterToPageCenter&&ie!==u.ExtensionLineType.HorizontalCenterToPageCenter&&ie!==u.ExtensionLineType.LeftToPageCenter&&ie!==u.ExtensionLineType.RightToPageCenter&&ie!==u.ExtensionLineType.TopToPageCenter&&ie!==u.ExtensionLineType.BottomToPageCenter||(Ce+=" page");var ve=0,ee=0,oe=0,te=0,ce=0,fe=0,ye=0,xe=0;ae.y===me.y?(ve=ae.x-Q.extensionLineWidth,ee=ae.y-Q.extensionLineEndingSize,oe=ae.x-Q.extensionLineWidth,te=ae.y+Q.extensionLineEndingSize,ce=me.x-Q.extensionLineWidth,fe=ae.y-Q.extensionLineEndingSize,ye=me.x-Q.extensionLineWidth,xe=ae.y+Q.extensionLineEndingSize):ae.x===me.x&&(ve=ae.x-Q.extensionLineEndingSize,ee=ae.y-Q.extensionLineWidth,oe=ae.x+Q.extensionLineEndingSize,te=ae.y-Q.extensionLineWidth,ce=ae.x-Q.extensionLineEndingSize,fe=me.y-Q.extensionLineWidth,ye=ae.x+Q.extensionLineEndingSize,xe=me.y-Q.extensionLineWidth);var Se=0,we=0;ie!==u.ExtensionLineType.RightToRightAbove&&ie!==u.ExtensionLineType.RightToRightBelow||(Se-=Q.extensionLineWidth),ie!==u.ExtensionLineType.BottomToBottomAfter&&ie!==u.ExtensionLineType.BottomToBottomBefore||(we-=Q.extensionLineWidth);var Fe=[new I.PathPrimitive([I.PathPrimitiveMoveToCommand.fromPoint(ae.clone().offset(Se,we)),I.PathPrimitiveLineToCommand.fromPoint(me.clone().offset(Se,we))],w.StrokeStyle.default1pxInstance,"size-line"),new I.PathPrimitive([new I.PathPrimitiveMoveToCommand(ve,ee),new I.PathPrimitiveLineToCommand(oe,te),new I.PathPrimitiveMoveToCommand(ce,fe),new I.PathPrimitiveLineToCommand(ye,xe)],w.StrokeStyle.default1pxInstance),new D.TextPrimitive((me.x+ae.x)/2,(me.y+ae.y)/2,be,k.TextOwner.ExtensionLine,void 0,void 0,void 0,null,void 0,null,E.PAGE_BG_TEXTFLOOR_FILTER_IDPREFIX+this.instanceId)],Ge=new y.GroupPrimitive(Fe,Ce),Ve=this.getExtensionLineElement(Ge,G);this.changePrimitiveElement(Ge,Ve)},Q.prototype.hideExtensionLines=function(){for(var G=0;G<this.extensionLineElements.length;G++)this.extensionLineElements[G]&&this.dom.changeByFunc(this.extensionLineElements[G],function(ie){return ie.style.display="none"})},Q.prototype.getExtensionLineElement=function(G,ie){var ae=this.extensionLineElements[ie];return void 0!==ae?this.dom.changeByFunc(ae,function(me){return me.style.display=""}):(ae=this.createPrimitiveElement(G,this.visualizersContainer),this.extensionLineElements[ie]=ae),ae},Q.prototype.getOrCreateShapeSelection=function(G,ie){var ae=this.selectionMap[G.key];return ae||(ae=new Z(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom,G.key,G.isLocked,G.rectangle,G.style,G.allowResizeHorizontally,G.allowResizeVertically,G.description.getParameterPoints(G)),this.selectionMap[G.key]=ae),ie&&(ie[G.key]=!0),ae},Q.prototype.getOrCreateConnectorSelection=function(G,ie){var ae=this.selectionMap[G.key],me=G.getRenderPoints(!0),be=G.getRenderPoints(!1);return ae||(ae=new se(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom,G.key,G.isLocked,G.rectangle,me,G.style,G.styleText,G.enableText,G.texts.map(function(Ce){var ve=a.GeometryUtils.getPathPointByPosition(be,Ce.position);return{text:G.getText(Ce.position),point:ve[0],pointIndex:ve[1],pos:Ce.position}}).sort(function(Ce,ve){return Ce.pos-ve.pos}),G.points,G.properties.lineOption),this.selectionMap[G.key]=ae),ie&&(ie[G.key]=!0),ae},Q.prototype.getOrCreateMultipleSelection=function(G){var ie=this.selectionMap[K];return ie||(ie=new z(this.itemSelectionContainer,this.selectionMarksContainer,this.actualZoom,this.readOnly,this.dom),this.selectionMap[K]=ie),G[K]=!0,ie},Q.prototype.getMultipleSelection=function(){return this.selectionMap[K]},Q.prototype.updateShapeSelection=function(G,ie){G.key in this.selectionMap&&(this.getOrCreateShapeSelection(G).onModelChanged(G.isLocked,G.rectangle,G.style,G.allowResizeHorizontally,G.allowResizeVertically,G.description.getParameterPoints(G)),ie&&ie.onModelItemChanged(G.key,G.rectangle))},Q.prototype.updateConnectorSelection=function(G,ie){if(G.key in this.selectionMap){var ae=G.getRenderPoints(!0),me=G.getRenderPoints(!1);this.getOrCreateConnectorSelection(G).onModelChanged(G.isLocked,G.rectangle,ae,G.style,G.styleText,G.enableText,G.texts.map(function(be){var Ce=a.GeometryUtils.getPathPointByPosition(me,be.position);return{text:G.getText(be.position),pointIndex:Ce[1],pos:be.position,point:Ce[0]}}).sort(function(be,Ce){return be.pos-Ce.pos}),G.points,G.properties.lineOption),ie&&ie.onModelItemChanged(G.key,G.rectangle)}},Q.prototype.hideOutdatedSelection=function(G){var ie=this;Object.keys(this.selectionMap).filter(function(ae){return!G[ae]}).forEach(function(ae){ie.selectionMap[ae].destroy(),delete ie.selectionMap[ae]})},Q.prototype.selectionCanBeDrawn=function(G){return!G.container||G.container.expanded&&this.selectionCanBeDrawn(G.container)},Q.prototype.notifySelectionChanged=function(G){var ie=this,ae=G.getSelectedItems(!0).filter(function(te){return ie.selectionCanBeDrawn(te)}),me={},be=ae.length>1,Ce=G.getSelectedShapes(!0).filter(function(te){return ie.selectionCanBeDrawn(te)}),ve=G.getSelectedConnectors(!0).filter(function(te){return ie.selectionCanBeDrawn(te)});if(Ce.forEach(function(te){return ie.getOrCreateShapeSelection(te,me).onSelectionChanged(be)}),ve.forEach(function(te){return ie.getOrCreateConnectorSelection(te,me).onSelectionChanged(be)}),be){var ee=ae.length>0?ae[0].strokeWidth:0,oe={};ae.filter(function(te){return!te.isLocked}).forEach(function(te){return oe[te.key]=te.rectangle}),this.getOrCreateMultipleSelection(me).onSelectionChanged(!!Ce.filter(function(te){return!te.isLocked}).length,ee,oe)}this.hideOutdatedSelection(me)},Q.prototype.applyChangesCore=function(G){re.prototype.applyChangesCore.call(this,G);var ie=this.getMultipleSelection();ie&&ie.onModelChanged()},Q.prototype.applyChange=function(G){var ie=this.getMultipleSelection();G.item instanceof h.Shape?this.updateShapeSelection(G.item,ie):G.item instanceof f.Connector&&this.updateConnectorSelection(G.item,ie)},Q.prototype.notifyPageColorChanged=function(G){},Q.prototype.notifyPageSizeChanged=function(G,ie){},Q.prototype.notifyActualZoomChanged=function(G){var ie=this;Object.keys(this.selectionMap).forEach(function(ae){return ie.selectionMap[ae].notifyZoomChanged(G)}),this.actualZoom=G},Q.prototype.notifyViewAdjusted=function(G){},Q.prototype.notifyReadOnlyChanged=function(G){var ie=this;this.readOnly=G,Object.keys(this.selectionMap).forEach(function(ae){return ie.selectionMap[ae].notifyReadOnlyChanged(G)})},Q.prototype.notifySelectionRectShow=function(G){this.showSelectionRect(G.clone().multiply(this.actualZoom,this.actualZoom))},Q.prototype.notifySelectionRectHide=function(){this.hideSelectionRect()},Q.prototype.notifyResizeInfoShow=function(G,ie){this.showResizeInfo(G.clone().multiply(this.actualZoom,this.actualZoom),ie)},Q.prototype.notifyResizeInfoHide=function(){this.hideResizeInfo()},Q.prototype.notifyConnectionPointsShow=function(G,ie,ae,me){var be=this;this.hideConnectionPoints(),ie.forEach(function(Ce,ve){var ee=Ce.point.clone().multiply(be.actualZoom,be.actualZoom);if(me)switch(Ce.side){case s.ConnectionPointSide.North:ee.y=me.y*be.actualZoom-Q.connectionPointShift;break;case s.ConnectionPointSide.South:ee.y=me.bottom*be.actualZoom+Q.connectionPointShift;break;case s.ConnectionPointSide.West:ee.x=me.x*be.actualZoom-Q.connectionPointShift;break;case s.ConnectionPointSide.East:ee.x=me.right*be.actualZoom+Q.connectionPointShift}be.showConnectionPoint(ve,ee,G,ve,ve===ae,Ce.allowed)})},Q.prototype.notifyConnectionPointsHide=function(){this.hideConnectionPoints()},Q.prototype.notifyConnectionTargetShow=function(G,ie){if(ie.allowed){var ae=Q.correctSelectionRect(ie.rect.clone().multiply(this.actualZoom,this.actualZoom),ie.strokeWidth,Q.connectionTargetBorderWidth,this.actualZoom,0);this.showConnectionTarget(0,ae)}},Q.prototype.notifyConnectionTargetHide=function(){this.hideConnectionTarget()},Q.prototype.notifyContainerTargetShow=function(G,ie){var ae=Q.correctSelectionRect(ie.rect.clone().multiply(this.actualZoom,this.actualZoom),ie.strokeWidth,Q.connectionTargetBorderWidth,this.actualZoom,0);this.showContainerTarget(0,ae)},Q.prototype.notifyContainerTargetHide=function(){this.hideContainerTarget()},Q.prototype.notifyExtensionLinesShow=function(G){var ie=this;this.hideExtensionLines(),G.forEach(function(ae,me){ie.showExtensionLine(me,ae.type,ae.segment.startPoint.clone().multiply(ie.actualZoom,ie.actualZoom),ae.segment.endPoint.clone().multiply(ie.actualZoom,ie.actualZoom),ae.text)})},Q.prototype.notifyExtensionLinesHide=function(){this.hideExtensionLines()},Q.prototype.notifyDragStart=function(G){this.dom.changeByFunc(this.selectionMarksContainer,function(ie){return ie.style.display="none"})},Q.prototype.notifyDragEnd=function(G){this.dom.changeByFunc(this.selectionMarksContainer,function(ie){return ie.style.display=""})},Q.prototype.notifyDragScrollStart=function(){},Q.prototype.notifyDragScrollEnd=function(){},Q.prototype.notifyTextInputStart=function(G,ie,ae,me){this.dom.changeByFunc(this.visualizersContainer,function(be){return be.style.display="none"})},Q.prototype.notifyTextInputEnd=function(G,ie){this.dom.changeByFunc(this.visualizersContainer,function(ae){return ae.style.display=""})},Q.prototype.notifyTextInputPermissionsCheck=function(G,ie){},Q.correctSelectionRect=function(G,ie,ae,me,be){void 0===be&&(be=Q.selectionOffset);var Ce=P.UnitConverter.twipsToPixels(ie)%2!=P.UnitConverter.twipsToPixels(ae)%2,ve=Math.ceil(ie/2*me);G=G.clone().inflate(ve,ve);var ee=Math.floor(ae/2);if(G.x-=ee,G.y-=ee,G.width+=ae,G.height+=ae,Ce){var oe=Q.evenOddSelectionCorrection*(P.UnitConverter.twipsToPixels(ae)%2==1?-1:1);G=G.clone().moveRectangle(oe,oe)}return G.clone().inflate(be,be)},Q.selectionMarkSize=P.UnitConverter.pixelsToTwips(10),Q.lockedSelectionMarkSize=P.UnitConverter.pixelsToTwips(8),Q.selectionOffset=P.UnitConverter.pixelsToTwips(2),Q.selectionRectLineWidth=P.UnitConverter.pixelsToTwips(1),Q.multiSelectionRectLineWidth=P.UnitConverter.pixelsToTwips(1),Q.connectionPointSmallSize=P.UnitConverter.pixelsToTwips(5),Q.connectionPointLargeSize=P.UnitConverter.pixelsToTwips(12),Q.connectionPointShift=P.UnitConverter.pixelsToTwips(16),Q.connectionTargetBorderWidth=P.UnitConverter.pixelsToTwips(2),Q.geomertyMarkSize=P.UnitConverter.pixelsToTwips(8),Q.connectorPointMarkSize=P.UnitConverter.pixelsToTwips(6),Q.connectorSideMarkSize=P.UnitConverter.pixelsToTwips(6),Q.extensionLineWidth=P.UnitConverter.pixelsToTwips(1),Q.extensionLineOffset=P.UnitConverter.pixelsToTwips(1),Q.extensionLineEndingSize=P.UnitConverter.pixelsToTwips(6),Q.resizeInfoOffset=P.UnitConverter.pixelsToTwips(16),Q.resizeInfoTextOffset=P.UnitConverter.pixelsToTwips(2),Q.resizeInfoLineWidth=P.UnitConverter.pixelsToTwips(1),Q.evenOddSelectionCorrection=P.UnitConverter.pixelsToTwips(1),Q}(L.CanvasManager);_.CanvasSelectionManager=q;var Y=function(){function re(Q,G,ie,ae,me,be){this.rectsContainer=Q,this.marksContainer=G,this.key=ie,this.zoomLevel=ae,this.readOnly=me,this.dom=be,this.elements={},this.updatedElements={}}return re.prototype.notifyZoomChanged=function(Q){this.zoomLevel!==Q&&(this.zoomLevel=Q,this.redraw())},re.prototype.notifyReadOnlyChanged=function(Q){this.readOnly=Q,this.redraw()},re.prototype.destroy=function(){var Q=this;Object.keys(this.elements).forEach(function(G){Q.elements[G].parentNode.removeChild(Q.elements[G]),delete Q.elements[G]})},re.prototype.redraw=function(){var Q=this;this.updatedElements={},this.redrawCore(),Object.keys(this.elements).filter(function(G){return!Q.updatedElements[G]}).forEach(function(G){Q.elements[G].parentNode.removeChild(Q.elements[G]),delete Q.elements[G]}),this.updatedElements={}},re.prototype.drawSelectionMarks=function(Q,G,ie){if(!this.readOnly){var ae=G&&Q.height>3*q.selectionMarkSize,me=ie&&Q.width>3*q.selectionMarkSize,be=G||ie;be&&this.drawSelectionMark(0,new l.Point(Q.x,Q.y),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_NW,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),me&&!A.Browser.TouchUI&&this.drawSelectionMark(1,new l.Point(Q.x+Q.width/2,Q.y),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_N,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),be&&this.drawSelectionMark(2,new l.Point(Q.right,Q.y),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_NE,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),ae&&!A.Browser.TouchUI&&this.drawSelectionMark(3,new l.Point(Q.right,Q.y+Q.height/2),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_E,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),be&&this.drawSelectionMark(4,new l.Point(Q.right,Q.bottom),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_SE,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),me&&!A.Browser.TouchUI&&this.drawSelectionMark(5,new l.Point(Q.x+Q.width/2,Q.bottom),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_S,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),be&&this.drawSelectionMark(6,new l.Point(Q.x,Q.bottom),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_SW,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK),ae&&!A.Browser.TouchUI&&this.drawSelectionMark(7,new l.Point(Q.x,Q.y+Q.height/2),q.selectionMarkSize,d.MouseEventElementType.ShapeResizeBox,d.ResizeEventSource.ResizeBox_W,_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK)}},re.prototype.drawSelectionMark=function(Q,G,ie,ae,me,be){var Ce=this;this.getOrCreateElement("SM"+Q,new O.RectanglePrimitive(G.x-ie/2,G.y-ie/2,ie,ie,null,be,void 0,function(ve){p.RenderUtils.setElementEventData(ve,ae,Ce.key,me)}),this.marksContainer)},re.prototype.drawSelectionRect=function(Q,G,ie){var ae=new O.RectanglePrimitive(Q.x,Q.y,Q.width,Q.height,w.StrokeStyle.default1pxInstance,ie,void 0,function(me){p.RenderUtils.setElementEventData(me,G,"-1",-1)});this.getOrCreateElement("shapeSelection",ae,this.rectsContainer)},re.prototype.getOrCreateElement=function(Q,G,ie){var ae=this.elements[Q];return ae||(ae=G.createElement(function(me){return ie.appendChild(me)}),this.elements[Q]=ae),this.updatedElements[Q]=!0,this.dom.changeByPrimitive(ae,G),ae},re}(),W=function(re){function Q(G,ie,ae,me,be,Ce,ve,ee){var oe=re.call(this,G,ie,ae,me,be,Ce)||this;return oe.isLocked=ve,oe.rectangle=ee,oe}return b(Q,re),Q.prototype.onSelectionChanged=function(G){this.isMultipleSelection!==G&&(this.isMultipleSelection=G,this.redraw())},Q.prototype.isLockedRender=function(){return this.isLocked&&!this.readOnly},Q.prototype.drawLockedSelectionMark=function(G,ie,ae,me){var be=new I.PathPrimitive([new I.PathPrimitiveMoveToCommand(ie.x-ae/2,ie.y-ae/2),new I.PathPrimitiveLineToCommand(ie.x+ae/2,ie.y+ae/2),new I.PathPrimitiveMoveToCommand(ie.x+ae/2,ie.y-ae/2),new I.PathPrimitiveLineToCommand(ie.x-ae/2,ie.y+ae/2)],null,me);this.getOrCreateElement("LSM"+G,be,this.marksContainer)},Q}(Y),z=function(re){function Q(G,ie,ae,me,be){var Ce=re.call(this,G,ie,"-1",ae,me,be)||this;return Ce.rectangles={},Ce}return b(Q,re),Q.prototype.onModelItemChanged=function(G,ie){G in this.rectangles&&(this.rectangles[G]=ie)},Q.prototype.onModelChanged=function(){this.redraw()},Q.prototype.onSelectionChanged=function(G,ie,ae){this.needDrawSelectionMarks=G,this.strokeWidth=ie,this.rectangles=ae,this.redraw()},Q.prototype.redrawCore=function(){var G=this,ie=Object.keys(this.rectangles);if(ie.length){var ae=a.GeometryUtils.getCommonRectangle(ie.map(function(be){return G.rectangles[be]})).clone().multiply(this.zoomLevel,this.zoomLevel),me=q.correctSelectionRect(ae,this.strokeWidth,q.selectionRectLineWidth,this.zoomLevel);this.drawSelectionRect(me,d.MouseEventElementType.SelectionRect,_.SELECTION_ELEMENT_CLASSNAMES.ITEMS_SELECTION_RECT),this.needDrawSelectionMarks&&this.drawSelectionMarks(ae,!0,!0)}},Q}(Y),Z=function(re){function Q(G,ie,ae,me,be,Ce,ve,ee,oe,te,ce,fe){var ye=re.call(this,G,ie,Ce,ae,me,be,ve,ee)||this;return ye.style=oe,ye.allowResizeHorizontally=te,ye.allowResizeVertically=ce,ye.shapeParameterPoints=fe,ye}return b(Q,re),Q.prototype.onModelChanged=function(G,ie,ae,me,be,Ce){this.isLocked=G,this.rectangle=ie,this.style=ae,this.allowResizeHorizontally=me,this.allowResizeVertically=be,this.shapeParameterPoints=Ce,this.redraw()},Q.prototype.redrawCore=function(){var G=this.rectangle.clone().multiply(this.zoomLevel,this.zoomLevel);this.isLockedRender()?this.drawLockedSelection(G):this.drawUnlockedSelection(G)},Q.prototype.drawLockedSelection=function(G){this.drawLockedSelectionMark(0,new l.Point(G.x,G.y),q.lockedSelectionMarkSize,_.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(1,new l.Point(G.right,G.y),q.lockedSelectionMarkSize,_.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(2,new l.Point(G.right,G.bottom),q.lockedSelectionMarkSize,_.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK),this.drawLockedSelectionMark(3,new l.Point(G.x,G.bottom),q.lockedSelectionMarkSize,_.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK)},Q.prototype.drawUnlockedSelection=function(G){var ie=q.correctSelectionRect(G,this.style.strokeWidth,q.selectionRectLineWidth,this.zoomLevel);this.drawSelectionRect(ie,d.MouseEventElementType.SelectionRect,this.isMultipleSelection?_.SELECTION_ELEMENT_CLASSNAMES.ITEM_MULTI_SELECTION:_.SELECTION_ELEMENT_CLASSNAMES.ITEM_SELECTION_RECT),this.isMultipleSelection||this.drawSelectionMarks(G,this.allowResizeHorizontally,this.allowResizeVertically),this.drawShapeParameterPoints()},Q.prototype.drawShapeParameterPoints=function(){var G=this;this.readOnly||this.shapeParameterPoints.forEach(function(ie,ae){var me=ie.point.clone().multiply(G.zoomLevel,G.zoomLevel);G.drawShapeParameterPoint(me,ae,ie.key)})},Q.prototype.drawShapeParameterPoint=function(G,ie,ae){var me=this,be=q.geomertyMarkSize,Ce=new O.RectanglePrimitive(G.x-be/2,G.y-be/2,be,be,null,"geometry-mark",void 0,function(ve){p.RenderUtils.setElementEventData(ve,d.MouseEventElementType.ShapeParameterBox,me.key,ae)});this.getOrCreateElement("pp"+ie.toString(),Ce,this.marksContainer)},Q}(W),se=function(re){function Q(G,ie,ae,me,be,Ce,ve,ee,oe,te,ce,fe,ye,xe,Se){var we=re.call(this,G,ie,Ce,ae,me,be,ve,ee)||this;return we.renderPoints=oe,we.style=te,we.styleText=ce,we.enableText=fe,we.texts=ye,we.points=xe,we.lineType=Se,we}return b(Q,re),Q.prototype.onModelChanged=function(G,ie,ae,me,be,Ce,ve,ee,oe){this.isLocked=G,this.rectangle=ie,this.renderPoints=ae,this.style=me,this.styleText=be,this.enableText=Ce,this.texts=ve,this.points=ee,this.lineType=oe,this.redraw()},Q.prototype.redrawCore=function(){this.isLockedRender()?this.drawLockedSelection():this.drawUnlockedSelection()},Q.prototype.drawLockedSelection=function(){var G=this;this.renderPoints.forEach(function(ie,ae){G.drawLockedSelectionMark(ae,ie,q.lockedSelectionMarkSize,_.SELECTION_ELEMENT_CLASSNAMES.LOCKED_SELECTION_MARK)})},Q.prototype.drawUnlockedSelection=function(){this.drawConnectorSelection(),this.isMultipleSelection||this.readOnly||this.drawConnectorSelectionMarks()},Q.prototype.drawConnectorSelection=function(){var G=[],ie=[],ae=this.isMultipleSelection?_.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_MULTI_SELECTION:_.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SELECTION;this.populateSelectionPrimitiveCommands(G,ie);var me=new I.PathPrimitive(G.concat(ie.reverse()),w.StrokeStyle.default1pxInstance,ae);this.getOrCreateElement("CS",me,this.rectsContainer)},Q.prototype.populateSelectionPrimitiveCommands=function(G,ie){for(var ae,me,be,Ce,ve=this.texts,ee=this.styleText.getAlignment(),oe=this.createNotSkippedRenderPoints(),te=this.zoomLevel,ce=this.style.strokeWidthPx,fe=this.getSelectionOffset(ce),ye=ce%2==0,xe=oe[0],Se=0,we=1,Fe=void 0;Fe=oe[we];we++){var Ge=oe[we+1];if(void 0===ae){if(me=H.Metrics.euclideanDistance(xe,Fe),j.MathUtils.numberCloseTo(me,0))continue;ae=a.GeometryUtils.getSelectionOffsetPoint(xe,Fe,me).multiply(fe,fe)}if(Ge){if(Ce=H.Metrics.euclideanDistance(Fe,Ge),j.MathUtils.numberCloseTo(Ce,0))continue;be=a.GeometryUtils.getSelectionOffsetPoint(Fe,Ge,Ce).multiply(fe,fe)}var Ve=ae.x,Rt=ae.y,Gt=-Ve,ci=-Rt,gs=be&&be.x,ms=be&&be.y,_s=be&&-be.x,ui=be&&-be.y;for(ye&&(Gt>0?Gt-=q.evenOddSelectionCorrection:Ve>0&&(Ve-=q.evenOddSelectionCorrection),ci>0?ci-=q.evenOddSelectionCorrection:Rt>0&&(Rt-=q.evenOddSelectionCorrection),_s>0?_s-=q.evenOddSelectionCorrection:gs>0&&(gs-=q.evenOddSelectionCorrection),ui>0?ui-=q.evenOddSelectionCorrection:ms>0&&(ms-=q.evenOddSelectionCorrection));ve[Se]&&ve[Se].pointIndex<=we;){var ge=ve[Se],Re=this.getConnectorSelectionTextSize(ge.text,fe),xn=a.GeometryUtils.getSelectionTextStartEndPoints(xe,Fe,me,ge.point,Re,ee);ve[Se].pointIndex<we?(G.push(I.PathPrimitiveMoveToCommand.fromPoint((xe=xn[1]).clone().offset(Ve,Rt).multiply(te,te))),ie.push(I.PathPrimitiveLineToCommand.fromPoint(xe.clone().offset(Gt,ci).multiply(te,te)))):(G.length||(G.push(I.PathPrimitiveMoveToCommand.fromPoint(xe.clone().offset(Ve,Rt).multiply(te,te))),ie.push(I.PathPrimitiveLineToCommand.fromPoint(xe.clone().offset(Gt,ci).multiply(te,te)))),G.push(I.PathPrimitiveLineToCommand.fromPoint(xn[0].clone().offset(Ve,Rt).multiply(te,te))),G.push(I.PathPrimitiveMoveToCommand.fromPoint(xn[1].clone().offset(Ve,Rt).multiply(te,te))),ie.push(I.PathPrimitiveMoveToCommand.fromPoint(xn[0].clone().offset(Gt,ci).multiply(te,te))),ie.push(I.PathPrimitiveLineToCommand.fromPoint(xn[1].clone().offset(Gt,ci).multiply(te,te))),xe=xn[1]),Se++}G.length||(G.push(I.PathPrimitiveMoveToCommand.fromPoint(xe.clone().offset(Ve,Rt).multiply(te,te))),ie.push(I.PathPrimitiveLineToCommand.fromPoint(xe.clone().offset(Gt,ci).multiply(te,te)))),Ge?(a.GeometryUtils.addSelectedLinesTo(xe,Fe,Ge,Ve,Rt,Gt,ci,gs,ms,_s,ui,function(vs,Jo){return G.push(new I.PathPrimitiveLineToCommand(vs*te,Jo*te))},function(vs,Jo){return ie.push(new I.PathPrimitiveLineToCommand(vs*te,Jo*te))}),ae=be,me=Ce):(G.push(I.PathPrimitiveLineToCommand.fromPoint(Fe.clone().offset(Ve,Rt).multiply(te,te))),ie.push(I.PathPrimitiveMoveToCommand.fromPoint(Fe.clone().offset(Gt,ci).multiply(te,te)))),xe=Fe}},Q.prototype.createNotSkippedRenderPoints=function(){var G=this.renderPoints.map(function(ie){return ie.clone()});return this.lineType===g.ConnectorLineOption.Straight?U.ModelUtils.skipUnnecessaryRenderPoints(G):U.ModelUtils.skipUnnecessaryRightAngleRenderPoints(G),G.filter(function(ie){return!ie.skipped})},Q.prototype.getSelectionOffset=function(G){return q.selectionOffset+P.UnitConverter.pixelsToTwips(Math.round(G/2)+(G+1)%2)},Q.prototype.getConnectorSelectionTextSize=function(G,ie){return this.dom.measurer.measureTextLine(G,this.styleText,k.TextOwner.Connector).applyConverter(P.UnitConverter.pixelsToTwips).clone().offset(ie,ie).nonNegativeSize()},Q.prototype.drawConnectorSelectionMarks=function(){var G=this,ie=this.points.length-1;this.points.forEach(function(ae,me){var be=0===me||me===ie,Ce=be?_.SELECTION_ELEMENT_CLASSNAMES.SELECTION_MARK:_.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_POINT_MARK,ve=be?q.selectionMarkSize:q.connectorPointMarkSize;be||G.lineType===g.ConnectorLineOption.Straight?G.drawSelectionMark(me,ae.clone().multiply(G.zoomLevel,G.zoomLevel),ve,d.MouseEventElementType.ConnectorPoint,me,Ce):G.drawSelectionMark(me,ae.clone().multiply(G.zoomLevel,G.zoomLevel),ve,d.MouseEventElementType.Undefined,-1,Ce+" disabled")}),this.drawConnectorSideMarks()},Q.prototype.drawConnectorSideMarks=function(){var G,ie,ae=this,me=this.lineType===g.ConnectorLineOption.Straight?d.MouseEventElementType.ConnectorSide:d.MouseEventElementType.ConnectorOrthogonalSide;this.renderPoints.forEach(function(be,Ce){if(!be.skipped){if(void 0!==G&&ae.canDrawConnectorSideMark(be,G)){var ve=ae.lineType===g.ConnectorLineOption.Orthogonal?be.x-G.x==0?"vertical":"horizontal":"";ae.drawSelectionMark(ae.points.length+Ce-1,new l.Point(G.x+(be.x-G.x)/2,G.y+(be.y-G.y)/2).clone().multiply(ae.zoomLevel,ae.zoomLevel),q.connectorSideMarkSize,me,ie+"_"+Ce,_.SELECTION_ELEMENT_CLASSNAMES.CONNECTOR_SIDE_MARK+" "+ve)}G=be,ie=Ce}})},Q.prototype.canDrawConnectorSideMark=function(G,ie){if(this.lineType===g.ConnectorLineOption.Straight){var ae=q.selectionMarkSize+q.connectorSideMarkSize;return H.Metrics.euclideanDistance(G,ie)>ae}if(this.lineType===g.ConnectorLineOption.Orthogonal){var me=0===ie.pointIndex,be=a.GeometryUtils.areDuplicatedPoints(this.points[this.points.length-1],G);return me&&be?H.Metrics.euclideanDistance(G,ie)>2*f.Connector.minOffset:!me&&be||me&&!be?H.Metrics.euclideanDistance(G,ie)>f.Connector.minOffset:(ae=q.selectionMarkSize+q.connectorSideMarkSize,H.Metrics.euclideanDistance(G,ie)>ae)}return!1},Q}(W)},9757:function(J,_,x){var m,b=this&&this.__extends||(m=function(k,A){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,M){R.__proto__=M}||function(R,M){for(var L in M)M.hasOwnProperty(L)&&(R[L]=M[L])})(k,A)},function(k,A){function R(){this.constructor=k}m(k,A),k.prototype=null===A?Object.create(A):(R.prototype=A.prototype,new R)});Object.defineProperty(_,"__esModule",{value:!0}),_.CanvasViewManager=_.CROP_OFFSET=_.CANVAS_SCROLL_PADDING=_.CANVAS_MIN_PADDING=void 0;var E=x(7716),y=x(240),p=x(8675),d=x(4125),s=x(6353),a=x(8900),l=x(5329),u=x(4593),h=x(4716),f=x(3500),g=x(3281),O=x(1552),I=x(6907),D=x(9291);_.CANVAS_MIN_PADDING=8,_.CANVAS_SCROLL_PADDING=18,_.CROP_OFFSET=40;var C="dxdi-drag-scroll",w="dxdi-drag-item",P=function(k){function A(R,M,L,H,j,U,K,q,Y){var W=k.call(this,H,q,Y)||this;return W.svgElement=M,W.paddings=new d.Offsets(0,0,0,0),W.scroll=new a.Point(0,0),W.crop=d.Offsets.empty(),W.lockAutoZoom=!1,W.autoScrollLocker=0,W.pageClipPathId=f.RenderUtils.generateSvgElementId("page-clip"),W.pageShadowId=f.RenderUtils.generateSvgElementId("page-shadow"),W.onViewChanged=new p.EventDispatcher,R.onScroll.add(W),L=L.clone().applyConverter(D.UnitConverter.twipsToPixelsF),W.scrollView=R,W.modelSize=L,W.simpleView=U,W.fixedZoomLevel=H,W.autoZoom=j,W.crop=W.rectangleToCrop(K,L),W.updateElements(L.clone().multiply(H,H),a.Point.zero(),U),W.getOrCreateElement("shadow",new g.ShadowFilterPrimitive(W.pageShadowId),W.svgElement),W.containerSize=R.getSize(),W}return b(A,k),A.prototype.adjust=function(R,M){var L;R||(R={vertical:!1,horizontal:!1},L=d.Offsets.empty()),this.containerSize=this.scrollView.getSize(),this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,this.simpleView,this.crop,R,this.containerSize,L,M),this.tryNormalizePaddings()},A.prototype.notifyModelSizeChanged=function(R,M){R=R.clone().applyConverter(D.UnitConverter.twipsToPixelsF),this.adjustCore(R,this.fixedZoomLevel,this.autoZoom,this.simpleView,this.crop,{horizontal:!M,vertical:!M},this.containerSize,M&&M.clone().applyConverter(D.UnitConverter.twipsToPixelsF)),this.modelSize=R},A.prototype.notifyModelRectangleChanged=function(R){var M=this.rectangleToCrop(R,this.modelSize);this.crop&&this.crop.equals(M)||(this.simpleView&&this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,this.simpleView,M,{horizontal:!1,vertical:!1},this.containerSize,d.Offsets.empty()),this.crop=M)},A.prototype.notifySnapPointPositionChanged=function(R){},A.prototype.notifyZoomChanged=function(R,M){this.adjustCore(this.modelSize,R,M,this.simpleView,this.crop,{horizontal:!1,vertical:!1},this.containerSize),this.fixedZoomLevel=R,this.autoZoom=M},A.prototype.notifyViewChanged=function(R){this.adjustCore(this.modelSize,this.fixedZoomLevel,this.autoZoom,R,this.crop,{vertical:!0,horizontal:!0},this.containerSize),this.simpleView=R},A.prototype.notifyGridChanged=function(R,M){},A.prototype.notifyDragStart=function(R){this.lockAutoZoom=!0,I.DomUtils.addClassName(this.svgElement,w)},A.prototype.notifyDragEnd=function(R){this.lockAutoZoom=!1,I.DomUtils.removeClassName(this.svgElement,w),this.adjustAfterDragEnd()},A.prototype.adjustAfterDragEnd=function(){this.autoZoom&&!this.autoZoomLocked&&this.adjust({horizontal:!0,vertical:this.autoZoom===y.AutoZoomMode.FitContent},this.autoZoom===y.AutoZoomMode.FitToWidth)},A.prototype.notifyShowContextToolbox=function(){this.autoZoomLocked=!0},A.prototype.notifyHideContextToolbox=function(){this.autoZoomLocked=!1,this.adjustAfterDragEnd()},A.prototype.notifyDragScrollStart=function(){I.DomUtils.addClassName(this.svgElement,C)},A.prototype.notifyDragScrollEnd=function(){I.DomUtils.removeClassName(this.svgElement,C)},A.prototype.notifyScrollChanged=function(R){this.scroll=R()},A.prototype.checkFitToCanvas=function(R){R=R||this.containerSize;var M=this.scrollView.getScrollBarWidth();R=R.clone().offset(2*-_.CANVAS_MIN_PADDING,2*-_.CANVAS_MIN_PADDING).nonNegativeSize();var L=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),H=this.checkScrollBars(R,M,L,d.Offsets.empty());return{vertical:(R=R.clone().offset(H.vertical?-M:0,H.horizontal?-M:0).nonNegativeSize()).height>=L.height,horizontal:R.width>=L.width}},A.prototype.rectangleToCrop=function(R,M){var L=R.clone().applyConverter(D.UnitConverter.twipsToPixelsF);return new d.Offsets(this.correctCrop(L.x),this.correctCrop(M.width-L.right),this.correctCrop(L.y),this.correctCrop(M.height-L.bottom))},A.prototype.correctCrop=function(R){return _.CROP_OFFSET*Math.floor(R/_.CROP_OFFSET)},A.prototype.setActualZoom=function(R){this.actualZoom!==R&&(this.actualZoom=R,this.raiseActualZoomChanged())},A.prototype.getActualAutoZoomLevel=function(R){if(R===y.AutoZoomMode.Disabled)return this.actualZoom;var M=this.containerSize,L=this.scrollView.getScrollBarWidth(),H=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop);return this.getActualAutoZoom(M,L,H,R)},A.prototype.getActualZoom=function(R,M,L,H,j){return this.lockAutoZoom?this.actualZoom:j===y.AutoZoomMode.Disabled?H:this.getActualAutoZoom(R,M,L,j)},A.prototype.getActualAutoZoom=function(R,M,L,H){return 0===R.width||0===R.height?1:H===y.AutoZoomMode.FitContent?Math.min((R.width-2*_.CANVAS_MIN_PADDING)/L.width,(R.height-2*_.CANVAS_MIN_PADDING)/L.height,1):Math.min((R.width-2*_.CANVAS_MIN_PADDING-M)/L.width,1)},A.prototype.raiseActualZoomChanged=function(){var R=this;this.onViewChanged.raise1(function(M){return M.notifyActualZoomChanged(R.actualZoom)})},A.prototype.tryNormalizePaddings=function(){var R=this.scrollView.getScrollBarWidth(),M=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),L=new a.Point(this.paddings.left,this.paddings.top),H=new s.Size(this.paddings.right,this.paddings.bottom),j=this.getTailSpace(L,this.scroll,M,this.containerSize,R);j.equals(H)||this.applyChanges(new d.Offsets(L.x,j.width,L.y,j.height),M,this.simpleView,this.crop.clone().multiply(this.actualZoom))},A.prototype.scrollBy=function(R){var M,L,H,j=this.scroll,U=this.containerSize,K=this.scrollView.getScrollBarWidth(),q=this.getActualModelSizeWithoutZoom(this.modelSize,this.simpleView,this.crop).clone().multiply(this.actualZoom,this.actualZoom),Y=this.checkScrollBars(U,K,q,this.paddings),W=new a.Point(this.paddings.left,this.paddings.top),z=new s.Size(this.paddings.right,this.paddings.bottom);return j=(M=this.changeScrollByOffset(W,j,z,q,R,U,Y)).scroll,W=(L=this.changeTranslateByOffset(W,z,R=M.offset,Y)).translate,R=L.offset,W=(H=this.cropHiddenHead(W,j)).translate,z=this.getTailSpace(W,j=H.scroll,q,U,K),this.applyChanges(new d.Offsets(W.x,z.width,W.y,z.height),q,this.simpleView,this.crop.clone().multiply(this.actualZoom),j),R},A.prototype.changeScrollByOffset=function(R,M,L,H,j,U,K){var q=M.clone(),Y=j.clone();return j.x&&K.horizontal&&(q.x-=Y.x=-this.getScrollDeltaByOffset(j.x,M.x,R.x+H.width+L.width,U.width,K.vertical)),j.y&&K.vertical&&(q.y-=Y.y=-this.getScrollDeltaByOffset(j.y,M.y,R.y+H.height+L.height,U.height,K.horizontal)),{scroll:q,offset:Y}},A.prototype.changeTranslateByOffset=function(R,M,L,H){var j=R.clone(),U=L.clone();return L.x&&!H.horizontal&&(j.x+=U.x=this.getTranslateDeltaByOffset(L.x,j.x,M.width)),L.y&&!H.vertical&&(j.y+=U.y=this.getTranslateDeltaByOffset(L.y,j.y,M.height)),{translate:j,offset:U}},A.prototype.getScrollDeltaByOffset=function(R,M,L,H,j){if(R>0)return-Math.min(M,R);var U=L-(H-(j?this.scrollView.getScrollBarWidth():0));return Math.min(U-M,-R)},A.prototype.getTranslateDeltaByOffset=function(R,M,L){return R?R<0?-Math.min(M-_.CANVAS_MIN_PADDING,-R):Math.min(L-_.CANVAS_MIN_PADDING,R):0},A.prototype.getActualModelSizeWithoutZoom=function(R,M,L){return M&&L?R.clone().offset(-L.horizontal,-L.vertical).nonNegativeSize():R},A.prototype.setScrollTo=function(R,M){var L=this.containerSize,H=this.getVisibileAreaAbsShift(),j=R.clone().applyConverter(D.UnitConverter.twipsToPixelsF).clone().multiply(this.actualZoom,this.actualZoom).clone().offset(H.x,H.y),U=this.scroll;M?(U.x+=j.x-M.x,U.y+=j.y-M.y):(j.x<0&&(U.x+=j.x-_.CANVAS_MIN_PADDING),j.y<0&&(U.y+=j.y-_.CANVAS_MIN_PADDING),j.x>L.width&&(U.x+=j.x-L.width+_.CANVAS_MIN_PADDING),j.y>L.height&&(U.y+=j.y-L.height+_.CANVAS_MIN_PADDING)),this.setScroll(U)},A.prototype.scrollIntoView=function(R){R=R.clone().applyConverter(D.UnitConverter.twipsToPixelsF).multiply(this.actualZoom,this.actualZoom).moveRectangle(this.paddings.left,this.paddings.top);var M=this.scroll,L=this.containerSize;if(!(R.x>=M.x&&R.y>=M.y&&R.right<=M.x+L.width&&R.bottom<=M.y+L.height)){var H=M.clone();R.x<M.x?H.x=R.x-_.CANVAS_SCROLL_PADDING:R.right>M.x+L.width&&(H.x=Math.min(R.x-_.CANVAS_SCROLL_PADDING,R.right+_.CANVAS_SCROLL_PADDING-L.width)),H.y=R.y<M.y?R.y-_.CANVAS_SCROLL_PADDING:Math.min(R.y-_.CANVAS_SCROLL_PADDING,R.bottom+_.CANVAS_SCROLL_PADDING-L.height),this.setScroll(H)}},A.prototype.setScroll=function(R){var M=this,L=this.modelSize.clone().multiply(this.actualZoom,this.actualZoom);R.x=Math.max(0,Math.min(R.x,L.width+this.paddings.horizontal-this.containerSize.width)),R.y=Math.max(0,Math.min(R.y,L.height+this.paddings.vertical-this.containerSize.height)),this.dom.changeByFunc(null,function(){M.scrollView.setScroll(R.x,R.y)}),this.scroll=R.clone()},A.prototype.updateElements=function(R,M,L){this.updatePageElement(R,M,L),this.updateCanvasElement(M)},A.prototype.updateCanvasElement=function(R){this.canvasElement=this.getOrCreateElement("dxdi-main",new l.GroupPrimitive([],"dxdi-main",null,null,function(M){M.setAttribute("transform","translate("+Math.round(R.x)+", "+Math.round(R.y)+")")}),this.svgElement)},A.prototype.updatePageElement=function(R,M,L){if(L)this.updatePageElementCore("",0,0,R.width,R.height);else{var H=M.x,j=M.y,U=R.width,K=R.height;this.createPageShadow(H,j,U,K),this.updatePageElementCore(this.pageClipPathId,Math.round(H),Math.round(j),U,K)}},A.prototype.createPageShadow=function(R,M,L,H){this.getOrCreateElement("pageShadowRect",new h.RectanglePrimitive(R.toString(),M.toString(),L.toString(),H.toString(),new O.EmptyStyle({filter:f.RenderUtils.getUrlPathById(this.pageShadowId)}),"dxdi-page-shadow"),this.svgElement,this.svgElement.firstChild)},A.prototype.updatePageElementCore=function(R,M,L,H,j){this.pageElement=this.getOrCreateElement("page",new l.GroupPrimitive([],"dxdi-page",null,R,function(U){U.setAttribute("transform","translate("+M+", "+L+")")}),this.svgElement),this.getOrCreateElement("pageClip",this.createPageClipPathPrimitive(H,j),this.svgElement)},A.prototype.createPageClipPathPrimitive=function(R,M){return new u.ClipPathPrimitive(this.pageClipPathId,[new h.RectanglePrimitive(0,0,R.toString(),M.toString())])},A.prototype.adjustCore=function(R,M,L,H,j,U,K,q,Y){var W=this.getActualModelSizeWithoutZoom(R,H,j);if(this.lockAutoZoom||!L&&q&&this.modelSize)this.resizeView(W,this.actualZoom,K,H,j,q);else{var z=this.scrollView.getScrollBarWidth(),Z=this.getActualZoom(K,z,W,M,L);!L||Z!==this.actualZoom||U.horizontal&&(U.vertical||Y)?(this.resetView(W,Z,K,H,j,U),this.setActualZoom(Z)):this.resizeView(W,Z,K,H,j,q||d.Offsets.empty())}},A.prototype.resetView=function(R,M,L,H,j,U){var K=R.clone().multiply(M,M),q=d.Offsets.fromNumber(_.CANVAS_MIN_PADDING);!(U=U||{horizontal:!0,vertical:!0}).horizontal&&this.paddings&&(q.left=this.paddings.left,q.right=this.paddings.right),!U.vertical&&this.paddings&&(q.top=this.paddings.top,q.bottom=this.paddings.bottom);var Y=this.checkScrollBars(L,this.scrollView.getScrollBarWidth(),K,q),W=this.scrollView.getScrollBarWidth(),z=U.horizontal||U.vertical?this.scroll:void 0;if(U.horizontal){var Z=Math.max((L.width-(Y.vertical?W:0)-K.width)/2,_.CANVAS_MIN_PADDING);q.left=Z,q.right=Z,z.x=0}if(U.vertical){var se=Math.max((L.height-(Y.horizontal?W:0)-K.height)/2,_.CANVAS_MIN_PADDING);q.top=se,q.bottom=se,z.y=0}this.applyChanges(q,K,H,j.clone().multiply(M),z)},A.prototype.resizeView=function(R,M,L,H,j,U){var K,q,Y=this.actualZoom,W=this.simpleView&&this.crop?this.crop.clone().multiply(Y):d.Offsets.empty(),z=R.clone().multiply(M,M);U=U.clone().multiply(M);var Z=H&&j?j.clone().multiply(M):d.Offsets.empty(),se=new a.Point(this.paddings.left,this.paddings.top),re=this.scroll;se=(K=this.applyOffset(se,re,W,Z,U)).translate,se=(q=this.cropHiddenHead(se,re=K.scroll)).translate;var Q=this.getTailSpace(se,re=q.scroll,z,L,this.scrollView.getScrollBarWidth());if(!H){var G=L.width-_.CANVAS_SCROLL_PADDING,ie=L.height-_.CANVAS_SCROLL_PADDING;U.left<0&&se.x>G&&(se.x=G,re.x=0),U.right<0&&Q.width>G&&(Q.width=G,re.x>z.width&&(re.x=z.width)),U.top<0&&se.y>ie&&(se.y=ie,re.y=0),U.bottom<0&&Q.height>ie&&(Q.height=ie,re.y>z.height&&(re.y=z.height))}var ae=new d.Offsets(se.x,Q.width,se.y,Q.height);this.applyChanges(ae,z,H,Z,re)},A.prototype.applyChanges=function(R,M,L,H,j){var U=this,K=new a.Point(R.left,R.top);L&&H&&(K=K.clone().offset(-H.left,-H.top)),this.updateElements(M,K,L),this.setSvgSize(M.width+R.horizontal,M.height+R.vertical),this.onViewChanged.raise1(function(q){return q.notifyViewAdjusted(new a.Point(K.x,K.y))}),j&&(this.lockAutoScroll(),j&&this.dom.changeByFunc(this.scrollView,function(q){q.setScroll(j.x,j.y),U.unlockAutoScroll()}),this.scroll=j),this.paddings=R},A.prototype.isAutoScrollLocked=function(){return 0!==this.autoScrollLocker},A.prototype.lockAutoScroll=function(){this.autoScrollLocker++},A.prototype.unlockAutoScroll=function(){this.autoScrollLocker--},A.prototype.applyOffset=function(R,M,L,H,j){var U=R.clone(),K=M.clone(),q=this.getActualOffset(L,H,j);return q.left&&(U.x=Math.max(_.CANVAS_MIN_PADDING,U.x-q.left),K.x+=q.left-(R.x-U.x)),q.top&&(U.y=Math.max(_.CANVAS_MIN_PADDING,U.y-q.top),K.y+=q.top-(R.y-U.y)),{translate:U,scroll:K}},A.prototype.cropHiddenHead=function(R,M){var L=M.clone(),H=R.clone();if(L.x&&H.x>_.CANVAS_MIN_PADDING){var j=H.x-Math.max(_.CANVAS_MIN_PADDING,H.x-L.x);H.x-=j,L.x-=j}return L.y&&H.y>_.CANVAS_MIN_PADDING&&(j=H.y-Math.max(_.CANVAS_MIN_PADDING,H.y-L.y),H.y-=j,L.y-=j),{translate:H,scroll:L}},A.prototype.getTailSpace=function(R,M,L,H,j){var U=R.clone(),K=M.clone(),q=Math.max(H.width+K.x-(U.x+L.width),_.CANVAS_MIN_PADDING),Y=Math.max(H.height+K.y-(U.y+L.height),_.CANVAS_MIN_PADDING),W=this.checkScrollBars(H,j,L,new d.Offsets(U.x,q,U.y,Y));return W.vertical&&(q=Math.max(_.CANVAS_MIN_PADDING,q-j)),W.horizontal&&(Y=Math.max(_.CANVAS_MIN_PADDING,Y-j)),new s.Size(q,Y)},A.prototype.getActualOffset=function(R,M,L){return new d.Offsets(-(M.left-R.left)+L.left,-(M.right-R.right)+L.right,-(M.top-R.top)+L.top,-(M.bottom-R.bottom)+L.bottom)},A.prototype.checkScrollBars=function(R,M,L,H){var j=R.width<L.width+H.horizontal,U=R.height<L.height+H.vertical;return j&&!U&&(U=R.height-M<L.height+H.vertical),U&&!j&&(j=R.width-M<L.width+H.horizontal),{horizontal:j,vertical:U}},A.prototype.setSvgSize=function(R,M){R===this.lastWidth&&M===this.lastHeight||(this.dom.changeByFunc(this.svgElement,function(L){return f.RenderUtils.updateSvgElementSize(L,R,M)}),this.lastWidth=R,this.lastHeight=M)},A.prototype.getVisibileAreaAbsShift=function(R){var M=this.scroll,L=this.paddings.clone(),H=this.simpleView;return new a.Point(L.left-(H&&this.crop?this.crop.left*this.actualZoom:0)-(R?0:M.x),L.top-(H&&this.crop?this.crop.top*this.actualZoom:0)-(R?0:M.y))},A.prototype.getModelPoint=function(R,M){var L=this.getVisibileAreaAbsShift(),H=R.clone().offset(-L.x,-L.y).multiply(1/this.actualZoom,1/this.actualZoom);if(M){var j=this.containerSize;if(R.x<0||R.y<0||R.x>j.width||R.y>j.height||H.x<0||H.y<0||H.x>this.modelSize.width||H.y>this.modelSize.height)return null}return H.clone().applyConverter(D.UnitConverter.pixelsToTwips)},A.prototype.getAbsolutePoint=function(R,M,L){var H=this.getVisibileAreaAbsShift(M),j=R.clone().multiply(this.actualZoom,this.actualZoom).clone().applyConverter(D.UnitConverter.twipsToPixelsF).clone().offset(H.x,H.y);if(L){if(j.x<0||j.y<0)return null;var U=this.containerSize;if(j.x>U.width||j.y>U.height)return null}return j},A}(E.CanvasManagerBase);_.CanvasViewManager=P},6078:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ExportDOMManipulator=_.DOMManipulator=void 0;var E=x(9463),y=function(){function d(s){this.measurer=s,this.queue=[]}return d.prototype.createElement=function(s,a,l){return s.createElement(function(u){null!=a&&(void 0!==l?a.insertBefore(u,l):a.appendChild(u))})},d.prototype.changeChildrenByPrimitives=function(s,a){var l=this;s.forEach(function(u,h){l.changeByPrimitive(a.childNodes[h],u)})},d.prototype.changeByFunc=function(s,a){this.doChange(s,a)},d.prototype.changeByPrimitive=function(s,a){this.doChange(s,a)},d.prototype.cancelAnimation=function(){void 0!==this.rafId&&(cancelAnimationFrame(this.rafId),this.queue=[])},d.prototype.doChange=function(s,a){E.Diagnostics.optimizeUsingRAF?(this.queue.push([s,a]),this.requestAnimation()):this.doChangeSync(s,a)},d.prototype.doChangeSync=function(s,a){"function"==typeof a?a(s):a.applyElementProperties(s,this.measurer)},d.prototype.requestAnimation=function(){var s=this;if(!this.rafRequested){this.rafRequested=!0;var a=function(){s.queue.splice(0,2e3).forEach(function(l){return s.doChangeSync(l[0],l[1])}),s.queue.length?s.rafId=requestAnimationFrame(a):(s.rafRequested=!1,s.rafId=void 0)};this.rafId=requestAnimationFrame(a)}},d}();_.DOMManipulator=y;var p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.doChange=function(a,l){this.doChangeSync(a,l)},s}(y);_.ExportDOMManipulator=p},741:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.InputManager=void 0;var m=x(2153),b=x(6907),E=x(3500),y=x(6031),p=x(5503),d=x(7959),s=x(3714),a=x(4246),l=x(9279),u=x(9291),h=x(1114),f=x(3490),g=x(8675),O="dxdi-text-input",I=function(){function D(C,w,P,k,A,R){this.mainElement=C,this.layoutPointResolver=w,this.eventManager=P,this.textMeasurer=k,this.actualZoom=A,this.focusElementsParent=R,this.focused=!1,this.focusLocked=!1,this.createInputElements(this.mainElement,this.focusElementsParent)}return D.prototype.detachEvents=function(){this.detachInputElementEvents(),this.detachTextInputElementEvents()},D.prototype.isFocused=function(){return this.focused},D.prototype.captureFocus=function(C){C&&document.activeElement===this.textInputElement?g.HtmlFocusUtils.focusWithPreventScroll(this.textInputElement||this.inputElement):g.HtmlFocusUtils.focusWithPreventScroll(this.inputElement)},D.prototype.setClipboardData=function(C){this.clipboardInputElement.value=C,g.HtmlFocusUtils.focusWithPreventScroll(this.clipboardInputElement),this.clipboardInputElement.select(),document.execCommand("copy"),this.captureFocus()},D.prototype.getClipboardData=function(C){var w=this;navigator&&navigator.clipboard?navigator.clipboard.readText().then(function(P){C(P),w.captureFocus()}).catch(function(){C(""),w.captureFocus()}):l.Browser.IE&&(this.clipboardInputElement.value="",g.HtmlFocusUtils.focusWithPreventScroll(this.clipboardInputElement),this.clipboardInputElement.select(),document.execCommand("Paste"),C(this.clipboardInputElement.value),this.captureFocus())},D.prototype.isPasteSupportedByBrowser=function(){return l.Browser.IE||l.Browser.WebKitFamily&&navigator&&void 0!==navigator.clipboard},D.prototype.createInputElements=function(C,w){this.createFocusInputElement(w||C),this.createTextInputElement(C),this.createClipboardInputElement(w||C),this.attachInputElementEvents()},D.prototype.setInputElementFocusHandlerMode=function(C){this.textInputElementContainer.setAttribute("class","dxdi-text-input-container"),C&&this.captureFocus()},D.prototype.setInputElementTextInputMode=function(C,w,P,k,A,R){this.textInputElementContainer.setAttribute("class","dxdi-text-input-container "+A),this.textInputElement.value=C,this.setTextInputElementBounds(w,P,R),this.setTextInputElementStyle(k),this.updateTextInputPadding();var M=this.textInputElement||this.inputElement;g.HtmlFocusUtils.focusWithPreventScroll(M),M.select&&M.select()},D.prototype.setTextInputElementBounds=function(C,w,P){this.savedTextInputPosition=C,this.savedTextInputSize=w,this.savedTextInputAngle=P;var k=this.layoutPointResolver.getAbsolutePoint(C,!0);this.textInputElementContainer.style.left=k.x+"px",this.textInputElementContainer.style.top=k.y+"px",this.textInputElementContainer.style.width=w&&w.width+"px"||"0px",this.textInputElementContainer.style.height=w&&w.height+"px"||"0px";var A=[];this.textInputElementContainer.style.transform="",1!==this.actualZoom&&A.push("scale("+this.actualZoom+")"),P&&A.push("rotate("+P+"deg)"),this.textInputElementContainer.style.transform=A.join(" "),this.textInputElement.style.width=w&&w.width+"px"||"",this.textInputElement.style.height=w&&w.height+"px"||"auto"},D.prototype.setTextInputElementStyle=function(C){this.savedTextInputStyle=C,E.RenderUtils.applyStyleToElement(C,this.textInputElement)},D.prototype.createFocusInputElement=function(C){this.inputElement=document.createElement("textarea"),this.inputElement.readOnly=l.Browser.TouchUI,this.inputElement.setAttribute("class","dxdi-focus-input"),C.appendChild(this.inputElement)},D.prototype.attachInputElementEvents=function(){this.onInputBlurHandler=this.onInputBlur.bind(this),this.onInputFocusHandler=this.onInputFocus.bind(this),this.onInputKeyDownHandler=this.onInputKeyDown.bind(this),this.onInputKeyPressHandler=this.onInputKeyPress.bind(this),this.onInputKeyUpHandler=this.onInputKeyUp.bind(this),this.onPasteHandler=this.onPaste.bind(this),h.RenderHelper.addEventListener(this.inputElement,"blur",this.onInputBlurHandler),h.RenderHelper.addEventListener(this.inputElement,"focus",this.onInputFocusHandler),h.RenderHelper.addEventListener(this.inputElement,"keydown",this.onInputKeyDownHandler),h.RenderHelper.addEventListener(this.inputElement,"keypress",this.onInputKeyPressHandler),h.RenderHelper.addEventListener(this.inputElement,"keyup",this.onInputKeyUpHandler),h.RenderHelper.addEventListener(this.inputElement,"paste",this.onPasteHandler)},D.prototype.detachInputElementEvents=function(){h.RenderHelper.removeEventListener(this.inputElement,"blur",this.onInputBlurHandler),h.RenderHelper.removeEventListener(this.inputElement,"focus",this.onInputFocusHandler),h.RenderHelper.removeEventListener(this.inputElement,"keydown",this.onInputKeyDownHandler),h.RenderHelper.removeEventListener(this.inputElement,"keypress",this.onInputKeyPressHandler),h.RenderHelper.removeEventListener(this.inputElement,"keyup",this.onInputKeyUpHandler),h.RenderHelper.removeEventListener(this.inputElement,"paste",this.onPasteHandler)},D.prototype.createTextInputElement=function(C){this.textInputElementContainer=document.createElement("div"),this.textInputElementContainer.setAttribute("class","dxdi-text-input-container"),C.appendChild(this.textInputElementContainer),this.textInputElement=document.createElement("textarea"),this.textInputElement.setAttribute("class",O),this.attachTextInputElementEvents(),this.textInputElementContainer.appendChild(this.textInputElement)},D.prototype.attachTextInputElementEvents=function(){this.onTextInputBlurHandler=this.onTextInputBlur.bind(this),this.onTextInputFocusHandler=this.onTextInputFocus.bind(this),this.onTextInputKeyDownHandler=this.onTextInputKeyDown.bind(this),this.onTextInputMouseWheelHandler=this.onTextInputMouseWheel.bind(this),this.onTextInputMouseUpHandler=this.onTextInputMouseUp.bind(this),this.onTextInputKeyUpHandler=this.onTextInputKeyUp.bind(this),this.onTextInputChangeHandler=this.onTextInputChange.bind(this),h.RenderHelper.addEventListener(this.textInputElement,"mousewheel",this.onTextInputMouseWheelHandler),h.RenderHelper.addEventListener(this.textInputElement,"mouseup",this.onTextInputMouseUpHandler),h.RenderHelper.addEventListener(this.textInputElement,"blur",this.onTextInputBlurHandler),h.RenderHelper.addEventListener(this.textInputElement,"focus",this.onTextInputFocusHandler),h.RenderHelper.addEventListener(this.textInputElement,"keydown",this.onTextInputKeyDownHandler),h.RenderHelper.addEventListener(this.textInputElement,"keyup",this.onTextInputKeyUpHandler),h.RenderHelper.addEventListener(this.textInputElement,"change",this.onTextInputChangeHandler)},D.prototype.detachTextInputElementEvents=function(){h.RenderHelper.removeEventListener(this.textInputElement,"mousewheel",this.onTextInputMouseWheelHandler),h.RenderHelper.removeEventListener(this.textInputElement,"mouseup",this.onTextInputMouseUpHandler),h.RenderHelper.removeEventListener(this.textInputElement,"blur",this.onTextInputBlurHandler),h.RenderHelper.removeEventListener(this.textInputElement,"focus",this.onTextInputFocusHandler),h.RenderHelper.removeEventListener(this.textInputElement,"keydown",this.onTextInputKeyDownHandler),h.RenderHelper.removeEventListener(this.textInputElement,"keyup",this.onTextInputKeyUpHandler),h.RenderHelper.removeEventListener(this.textInputElement,"change",this.onTextInputChangeHandler)},D.prototype.createClipboardInputElement=function(C){this.clipboardInputElement=document.createElement("textarea"),this.clipboardInputElement.setAttribute("class","dxdi-clipboard-input"),C.appendChild(this.clipboardInputElement)},D.prototype.blurControl=function(){this.focusLocked||(this.focused=!1,b.DomUtils.removeClassName(this.mainElement,"focused"))},D.prototype.focusControl=function(){this.focused=!0,this.focusLocked=!1,b.DomUtils.addClassName(this.mainElement,"focused")},D.prototype.updateTextInputPadding=function(){var C=this.textInputElement.value;if(this.savedTextInputSize){P=this.textMeasurer.measureWords(C,this.savedTextInputStyle,a.TextOwner.Shape),k=f.getTextHeight(C,this.savedTextInputSize.width,P,!0);var w=Math.max(0,.5*(this.savedTextInputSize.height-k));this.textInputElement.style.paddingTop=Math.ceil(w)+"px",this.textInputElement.style.height=Math.floor(this.savedTextInputSize.height)+"px"}else{var P=this.textMeasurer.measureWords(" ",this.savedTextInputStyle,a.TextOwner.Connector),k=f.getLineHeight(P)*((f.textToParagraphs(C).length||1)+1);this.textInputElement.style.height=Math.ceil(k)+"px"}},D.prototype.onInputBlur=function(C){var w=this;this.blurControl(),E.raiseEvent(C,this.getDiagramFocusEvent(C),function(P){return w.eventManager.onBlur(P)})},D.prototype.onInputFocus=function(C){var w=this;this.focusControl(),E.raiseEvent(C,this.getDiagramFocusEvent(C),function(P){return w.eventManager.onFocus(P)})},D.prototype.onInputKeyDown=function(C){var w=this;E.raiseEvent(C,this.getDiagramKeyboardEvent(C),function(P){return w.eventManager.onKeyDown(P)})},D.prototype.onInputKeyPress=function(C){!C.preventDefault||l.Browser.Safari&&"KeyV"===C.code||C.preventDefault()},D.prototype.onInputKeyUp=function(C){var w=this;E.raiseEvent(C,this.getDiagramKeyboardEvent(C),function(P){return w.eventManager.onKeyUp(P)})},D.prototype.onTextInputBlur=function(C){var w=this;if(this.eventManager.canFinishTextEditing())this.blurControl(),E.raiseEvent(C,this.getDiagramFocusEvent(C),function(k){return w.eventManager.onTextInputBlur(k)});else{var P=s.EvtUtils.getEventSource(C);document.activeElement!==P&&P.focus()}},D.prototype.onTextInputFocus=function(C){var w=this;this.focusControl(),E.raiseEvent(C,this.getDiagramFocusEvent(C),function(P){return w.eventManager.onTextInputFocus(P)})},D.prototype.onTextInputKeyDown=function(C){var w=this;E.raiseEvent(C,this.getDiagramKeyboardEvent(C),function(P){return w.eventManager.onTextInputKeyDown(P)})},D.prototype.onTextInputKeyUp=function(C){this.updateTextInputPadding()},D.prototype.onTextInputChange=function(C){this.updateTextInputPadding()},D.prototype.onPaste=function(C){var w=this;E.raiseEvent(C,this.getDiagramClipboardEvent(C),function(P){return w.eventManager.onPaste(P)})},D.prototype.onTextInputMouseWheel=function(C){this.mouseWheelHandler&&this.mouseWheelHandler(C)},D.prototype.onTextInputMouseUp=function(C){C.stopPropagation&&C.stopPropagation(),s.EvtUtils.cancelBubble(C)},D.prototype.getDiagramKeyboardEvent=function(C){return new y.DiagramKeyboardEvent(m.KeyUtils.getKeyModifiers(C),m.KeyUtils.getEventKeyCode(C),this.textInputElement.value)},D.prototype.getTextInputElementValue=function(){return this.textInputElement.value},D.prototype.getDiagramFocusEvent=function(C){return new y.DiagramFocusEvent(C.target.value)},D.prototype.getDiagramClipboardEvent=function(C){var w,P=C.clipboardData||C.originalEvent&&C.originalEvent.clipboardData;return w=void 0!==P?P.getData("text/plain"):window.clipboardData.getData("Text"),new y.DiagramClipboardEvent(w)},D.prototype.isTextInputElement=function(C){return"string"==typeof C.className&&C.className.indexOf(O)>-1},D.prototype.lockFocus=function(){var C=this;this.focusLocked=!0,setTimeout(function(){return C.focusLocked=!1},10)},D.prototype.notifyViewAdjusted=function(C){},D.prototype.notifyActualZoomChanged=function(C){this.actualZoom=C,this.savedTextInputPosition&&this.savedTextInputSize&&this.setTextInputElementBounds(this.savedTextInputPosition,this.savedTextInputSize,this.savedTextInputAngle)},D.prototype.notifyTextInputStart=function(C,w,P,k){var A,R="";C instanceof p.Shape?(R="shape-text",A=C.textAngle):C instanceof d.Connector&&(R="connector-text"),k=k&&k.clone().applyConverter(u.UnitConverter.twipsToPixels),this.setInputElementTextInputMode(w,P,k,C.styleText,R,A)},D.prototype.notifyTextInputEnd=function(C,w){this.setInputElementFocusHandlerMode(w)},D.prototype.notifyTextInputPermissionsCheck=function(C,w){},D}();_.InputManager=I},4246:(J,_)=>{var x;Object.defineProperty(_,"__esModule",{value:!0}),_.TextOwner=void 0,(x=_.TextOwner||(_.TextOwner={}))[x.Shape=0]="Shape",x[x.Connector=1]="Connector",x[x.ExtensionLine=2]="ExtensionLine",x[x.Resize=3]="Resize"},1733:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TextMeasurer=void 0;var m=x(6353),b=x(3500),E=x(5503),y=x(7959),p=x(4246),d=x(1114),s=x(3490),a=function(){function l(u){this.cache={},this.fontSizeCache={},this.containers={},this.parent=u,this.createNodes()}return l.prototype.measureWords=function(u,h,f){var g=this,O={words:{},fontSize:-1},I="string"==typeof u?this.splitToWords(u,!1):u.reduce(function(P,k){return P.concat(g.splitToWords(k,!1))},[]);I.push(" ");var D=this.getStyleHash(h,f),C=this.tryLoadWordsToMeasurer(I,h,D,f,void 0,void 0,void 0,void 0,O);return C&&(this.putElementsInDOM(this.containers[f],C),this.beforeMeasureInDOM(),this.measureElementsInDOM(C,O),this.afterMeasureInDOM()),O},l.prototype.measureTextLine=function(u,h,f){var g=this.measureWords(u,h,f);return s.getTextLineSize(u,g)},l.prototype.onNewModel=function(u,h){var f=this;h.changeByFunc(null,function(){return f.onNewModelCore(u)})},l.prototype.onNewModelCore=function(u){var h=u.filter(function(I){return I instanceof E.Shape}),f=u.filter(function(I){return I instanceof y.Connector}),g=this.tryLoadShapeTexts(h),O=this.tryLoadConnectorTexts(f);(g||O)&&(g&&this.putElementsInDOM(this.containers[p.TextOwner.Shape],g),O&&this.putElementsInDOM(this.containers[p.TextOwner.Connector],O),this.beforeMeasureInDOM(),g&&this.measureElementsInDOM(g),O&&this.measureElementsInDOM(O),this.afterMeasureInDOM())},l.prototype.replaceParent=function(u){this.parent!==u&&(this.mainElement.parentNode&&u.appendChild(this.mainElement),this.parent=u)},l.prototype.clean=function(){b.RenderUtils.removeElement(this.mainElement)},l.prototype.tryLoadShapeTexts=function(u){var h=this,f={},g=[],O=[],I=[];return u.forEach(function(D){var C=h.getStyleHash(D.styleText,p.TextOwner.Shape);h.tryLoadWordsToMeasurer(h.splitToWords(D.text,!0),D.styleText,C,p.TextOwner.Shape,f,g,O,I)}),g.length?{elements:g,hashes:O,styleHashes:I}:null},l.prototype.tryLoadConnectorTexts=function(u){var h=this,f={},g=[],O=[],I=[];return u.forEach(function(D){var C=D.texts.map(function(P){return P.value}).reduce(function(P,k){return P.concat(h.splitToWords(k,!1))},[]);if(C.length){C.push(" ");var w=h.getStyleHash(D.styleText,p.TextOwner.Connector);h.tryLoadWordsToMeasurer(C,D.styleText,w,p.TextOwner.Connector,f,g,O,I)}}),g.length?{elements:g,hashes:O,styleHashes:I}:null},l.prototype.tryLoadWordsToMeasurer=function(u,h,f,g,O,I,D,C,w){var P=this,k=[];return I=I||[],D=D||[],C=C||[],O=O||{},u.forEach(function(A){return P.tryLoadWordToMeasurer(A,h,f,g,O,I,D,C,k,w)}),I.length?{elements:I,hashes:D,styleHashes:C,newWords:k}:null},l.prototype.putElementsInDOM=function(u,h){for(u.parentNode&&u.parentNode.removeChild(u);u.firstChild;)u.removeChild(u.firstChild);h.elements.forEach(function(f){return u.appendChild(f)}),this.svgElement.appendChild(u)},l.prototype.measureElementsInDOM=function(u,h){for(var f=u.hashes,g=u.elements,O=u.newWords,I=f.length,D=0;D<I;D++){var C=this.getDomElementSize(g[D]);C&&(C.isEmpty()||(this.cache[f[D]]=C),h&&(h.words[O[D]]=C));var w=u.styleHashes[D];void 0===this.fontSizeCache[w]&&(this.fontSizeCache[w]=this.getDomFontSize(g[D])),h&&h.fontSize<0&&(h.fontSize=this.fontSizeCache[w])}},l.prototype.beforeMeasureInDOM=function(){this.parent.appendChild(this.mainElement)},l.prototype.afterMeasureInDOM=function(){this.mainElement.parentNode&&this.mainElement.parentNode.removeChild(this.mainElement)},l.prototype.tryLoadWordToMeasurer=function(u,h,f,g,O,I,D,C,w,P){var k=this.getHash(u,h,g),A=this.cache[k];A||O[k]?A&&P&&(P.words[u]=A,P.fontSize=this.fontSizeCache[f]):(O[k]=!0,D.push(k),I.push(this.createElement(u,h)),C.push(f),w.push(u))},l.prototype.getHash=function(u,h,f){return f+"|"+(h&&h.toHash())+"|"+u},l.prototype.getStyleHash=function(u,h){return this.getHash(" ",u,h)},l.prototype.createElement=function(u,h){var f=document.createElementNS(d.svgNS,"text");return" "===u&&f.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),f.textContent=u,h&&b.RenderUtils.applyStyleToElement(h,f),f},l.prototype.splitToWords=function(u,h){var f=s.textToWords(u);return h&&f.push(" "),f},l.prototype.getDomFontSize=function(u){return parseFloat(window.getComputedStyle(u).fontSize)},l.prototype.getDomElementSize=function(u){var h;try{h=u.getBBox()}catch{}return h?new m.Size(h.width,h.height):new m.Size(0,0)},l.prototype.createNodes=function(){this.mainElement=d.RenderHelper.createMainElement(void 0,!0),this.svgElement=d.RenderHelper.createSvgElement(this.mainElement,!1),this.createContainer(p.TextOwner.Shape,"shape"),this.createContainer(p.TextOwner.Connector,"connector"),this.createContainer(p.TextOwner.ExtensionLine,"extension-line"),this.createContainer(p.TextOwner.Resize,"resize-info")},l.prototype.createContainer=function(u,h){var f=document.createElementNS(d.svgNS,"g");f.setAttribute("class",h),this.containers[u]=f},l}();_.TextMeasurer=a},4593:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ClipPathPrimitive=void 0;var E=x(1114),y=function(p){function d(s,a){var l=p.call(this)||this;return l.id=s,l.children=a,l}return b(d,p),d.prototype.createMainElement=function(){var s=document.createElementNS(E.svgNS,"clipPath");return s.setAttribute("id",this.id),s},d.prototype.applyElementProperties=function(s,a){this.id&&s.setAttribute("id",this.id),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.ClipPathPrimitive=y},418:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.EllipsePrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g){var O=p.call(this,h,f,void 0,g)||this;return O.cx=s,O.cy=a,O.rx=l,O.ry=u,O}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"ellipse")},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"cx",this.cx),this.setUnitAttribute(s,"cy",this.cy),this.setUnitAttribute(s,"rx",this.rx),this.setUnitAttribute(s,"ry",this.ry),this.setPositionCorrectionAttribute(s),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.EllipsePrimitive=y},4628:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.FilterPrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h){var f=p.call(this)||this;return f.id=s,f.x=a,f.y=l,f.width=u,f.height=h,f}return b(d,p),d.prototype.createMainElement=function(){var s=document.createElementNS(E.svgNS,"filter");return s.setAttribute("id",this.id),s},d.prototype.applyElementProperties=function(s,a){this.id&&s.setAttribute("id",this.id),this.setUnitAttribute(s,"x",this.x),this.setUnitAttribute(s,"y",this.y),this.setUnitAttribute(s,"width",this.width),this.setUnitAttribute(s,"height",this.height),this.setPositionCorrectionAttribute(s),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.FilterPrimitive=y},5329:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.GroupPrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f){var g=p.call(this,null,a,u,h)||this;return g.zIndex=l,g.onBeforeDispose=f,g.children=s,g}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"g")},d.prototype.applyElementProperties=function(s,a){(this.zIndex||0===this.zIndex)&&s.style.setProperty("z-index",this.zIndex.toString()),p.prototype.applyElementProperties.call(this,s,a)},d.prototype.dispose=function(){this.onBeforeDispose&&this.onBeforeDispose(),p.prototype.dispose.call(this)},d}(x(4178).SvgPrimitive);_.GroupPrimitive=y},1995:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.ImagePrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g,O){void 0===f&&(f="none");var I=p.call(this,g,O)||this;return I.x=s,I.y=a,I.width=l,I.height=u,I.url=h,I.preserveAspectRatio=f,I}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"image")},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"x",this.x),this.setUnitAttribute(s,"y",this.y),this.setUnitAttribute(s,"width",this.width),this.setUnitAttribute(s,"height",this.height),this.setPositionCorrectionAttribute(s),s.setAttribute("href",this.url),s.setAttribute("preserveAspectRatio",this.preserveAspectRatio),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.ImagePrimitive=y},7724:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.PathPrimitiveClosePathCommand=_.PathPrimitiveArcToCommand=_.PathPrimitiveQuadraticCurveToCommand=_.PathPrimitiveCubicCurveToCommand=_.PathPrimitiveLineToCommand=_.PathPrimitiveMoveToCommand=_.PathPrimitiveCommand=_.PathPrimitive=void 0;var E=x(1114),y=x(4178),p=x(9886),d=function(O){function I(D,C,w,P,k){var A=O.call(this,C,w,P,k)||this;return A.commands=D.map(function(R){return R.style=C,R}),A}return b(I,O),I.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"path")},I.prototype.applyElementProperties=function(D,C){D.setAttribute("d",this.commands.map(function(w){return w.toString()}).join(" ")),this.setPositionCorrectionAttribute(D),O.prototype.applyElementProperties.call(this,D,C)},I}(y.SvgPrimitive);_.PathPrimitive=d;var s=function(O){function I(){return null!==O&&O.apply(this,arguments)||this}return b(I,O),I}(p.PrimitiveObject);_.PathPrimitiveCommand=s;var a=function(O){function I(D,C){var w=O.call(this)||this;return w.x=D,w.y=C,w}return b(I,O),I.prototype.toString=function(){return"M "+this.getUnitVaue(this.x)+" "+this.getUnitVaue(this.y)},I.fromPoint=function(D){return new I(D.x,D.y)},I}(s);_.PathPrimitiveMoveToCommand=a;var l=function(O){function I(D,C){var w=O.call(this)||this;return w.x=D,w.y=C,w}return b(I,O),I.prototype.toString=function(){return"L "+this.getUnitVaue(this.x)+" "+this.getUnitVaue(this.y)},I.fromPoint=function(D){return new I(D.x,D.y)},I}(s);_.PathPrimitiveLineToCommand=l;var u=function(O){function I(D,C,w,P,k,A){var R=O.call(this)||this;return R.x1=D,R.y1=C,R.x2=w,R.y2=P,R.x3=k,R.y3=A,R}return b(I,O),I.prototype.toString=function(){return"C "+this.getUnitVaue(this.x1)+" "+this.getUnitVaue(this.y1)+","+this.getUnitVaue(this.x2)+" "+this.getUnitVaue(this.y2)+","+this.getUnitVaue(this.x3)+" "+this.getUnitVaue(this.y3)},I}(s);_.PathPrimitiveCubicCurveToCommand=u;var h=function(O){function I(D,C,w,P){var k=O.call(this)||this;return k.x1=D,k.y1=C,k.x2=w,k.y2=P,k}return b(I,O),I.prototype.toString=function(){return"Q "+this.getUnitVaue(this.x1)+" "+this.getUnitVaue(this.y1)+","+this.getUnitVaue(this.x2)+" "+this.getUnitVaue(this.y2)},I}(s);_.PathPrimitiveQuadraticCurveToCommand=h;var f=function(O){function I(D,C,w,P,k,A,R){var M=O.call(this)||this;return M.rx=D,M.ry=C,M.xAxisRotation=w,M.largeArcFlag=P,M.sweepFag=k,M.x=A,M.y=R,M}return b(I,O),I.prototype.toString=function(){return"A "+this.getUnitVaue(this.rx)+" "+this.getUnitVaue(this.ry)+" "+this.getUnitVaue(this.xAxisRotation)+" "+(this.largeArcFlag?"1":"0")+" "+(this.sweepFag?"1":"0")+this.getUnitVaue(this.x)+","+this.getUnitVaue(this.y)},I}(s);_.PathPrimitiveArcToCommand=f;var g=function(O){function I(){return O.call(this)||this}return b(I,O),I.prototype.toString=function(){return"z"},I}(s);_.PathPrimitiveClosePathCommand=g},1932:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.PatternPrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g){var O=p.call(this,g)||this;return O.id=s,O.x=l,O.y=u,O.width=h,O.height=f,O.children=a,O}return b(d,p),d.prototype.createMainElement=function(){var s=document.createElementNS(E.svgNS,"pattern");return s.setAttribute("patternUnits","userSpaceOnUse"),s.setAttribute("id",this.id),s},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"x",this.x),this.setUnitAttribute(s,"y",this.y),this.setUnitAttribute(s,"width",this.width),this.setUnitAttribute(s,"height",this.height),this.setPositionCorrectionAttribute(s),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.PatternPrimitive=y},4178:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.SvgPrimitive=void 0;var E=x(3500),y=function(p){function d(s,a,l,u){var h=p.call(this,s)||this;return h.className=a,h.clipPathId=l,h.onApplyProperties=u,h.children=[],h}return b(d,p),d.prototype.createElement=function(s){var a=this.createMainElement();return this.createChildElements(a),s(a),this.createCustomContent(a),a},d.prototype.createChildElements=function(s){for(var a=0;a<this.children.length;a++)this.children[a].createElement(function(l){return s.appendChild(l)})},d.prototype.applyElementProperties=function(s,a){this.applyElementStyleProperties(s),this.className&&s.setAttribute("class",this.className),"string"==typeof this.clipPathId&&(this.clipPathId?s.setAttribute("clip-path",E.RenderUtils.getUrlPathById(this.clipPathId)):s.removeAttribute("clip-path")),this.onApplyProperties&&this.onApplyProperties(s),this.applyChildrenProperties(s,a)},d.prototype.applyChildrenProperties=function(s,a){for(var l=0;l<this.children.length;l++)this.children[l].applyElementProperties(s.childNodes[l],a)},d.prototype.applyElementStyleProperties=function(s){this.applyElementStylePropertiesCore(s)},d.prototype.applyElementStylePropertiesCore=function(s,a){void 0===a&&(a=!1),this.style&&E.RenderUtils.applyStyleToElement(this.style,s,a)},d.prototype.createCustomContent=function(s){},d.prototype.destroyCustomContent=function(s){},d.prototype.dispose=function(){this.children&&this.children.forEach(function(s){return s.dispose()})},d}(x(9886).PrimitiveObject);_.SvgPrimitive=y},9886:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PrimitiveObject=void 0;var m=x(9291),b=function(){function E(y){this.style=y}return Object.defineProperty(E.prototype,"strokeWidthPx",{get:function(){return this.style?this.style.strokeWidthPx:0},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"strokeOffset",{get:function(){return this.style?this.style.strokeOffset:0},enumerable:!1,configurable:!0}),E.prototype.getUnitVaue=function(y){return"number"==typeof y?m.UnitConverter.twipsToPixels(y).toString():y},E.prototype.setUnitAttribute=function(y,p,d){null!=d&&y.setAttribute(p,this.getUnitVaue(d))},E.prototype.setPositionCorrectionAttribute=function(y){y.setAttribute("transform",this.strokeWidthPx%2==1?"translate("+this.strokeOffset+", "+this.strokeOffset+")":"")},E}();_.PrimitiveObject=b},4716:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.RectanglePrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g,O){var I=p.call(this,h,f,g,O)||this;return I.x=s,I.y=a,I.width=l,I.height=u,I}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"rect")},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"x",this.x),this.setUnitAttribute(s,"y",this.y),this.setUnitAttribute(s,"width",this.width),this.setUnitAttribute(s,"height",this.height),this.setPositionCorrectionAttribute(s),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4178).SvgPrimitive);_.RectanglePrimitive=y},4538:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.RoundedRectanglePrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g,O,I,D){void 0===h&&(h=0),void 0===f&&(f=0);var C=p.call(this,s,a,l,u,g,O,I,D)||this;return C.x=s,C.y=a,C.width=l,C.height=u,C.rx=h,C.ry=f,C}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"rect")},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"rx",this.rx),this.setUnitAttribute(s,"ry",this.ry),p.prototype.applyElementProperties.call(this,s,a)},d}(x(4716).RectanglePrimitive);_.RoundedRectanglePrimitive=y},3281:function(J,_,x){var m,b=this&&this.__extends||(m=function(d,s){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)l.hasOwnProperty(u)&&(a[u]=l[u])})(d,s)},function(d,s){function a(){this.constructor=d}m(d,s),d.prototype=null===s?Object.create(s):(a.prototype=s.prototype,new a)});Object.defineProperty(_,"__esModule",{value:!0}),_.ShadowFilterPrimitive=void 0;var E=x(4628),y=x(1114),p=function(d){function s(){return null!==d&&d.apply(this,arguments)||this}return b(s,d),s.prototype.createChildElements=function(a){var l=document.createElementNS(y.svgNS,"feGaussianBlur");l.setAttribute("in","SourceGraphic"),l.setAttribute("stdDeviation","4.6"),a.appendChild(l);var u=document.createElementNS(y.svgNS,"feOffset");u.setAttribute("dx","0"),u.setAttribute("dy","0"),a.appendChild(u);var h=document.createElementNS(y.svgNS,"feMerge");a.appendChild(h);var f=document.createElementNS(y.svgNS,"feMergeNode");h.appendChild(f);var g=document.createElementNS(y.svgNS,"feMergeNode");g.setAttribute("in","SourceGraphic"),h.appendChild(g)},s}(E.FilterPrimitive);_.ShadowFilterPrimitive=p},1248:function(J,_,x){var m,b=this&&this.__extends||(m=function(p,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l])})(p,d)},function(p,d){function s(){this.constructor=p}m(p,d),p.prototype=null===d?Object.create(d):(s.prototype=d.prototype,new s)});Object.defineProperty(_,"__esModule",{value:!0}),_.SvgElementPrimitive=void 0;var E=x(1114),y=function(p){function d(s,a,l,u,h,f,g,O,I){var D=p.call(this,null,O,void 0,I)||this;return D.x=s,D.y=a,D.width=l,D.height=u,D.createContent=h,D.destroyContent=f,D.data=g,D}return b(d,p),d.prototype.createMainElement=function(){return document.createElementNS(E.svgNS,"svg")},d.prototype.applyElementProperties=function(s,a){this.setUnitAttribute(s,"x",this.x),this.setUnitAttribute(s,"y",this.y),this.setUnitAttribute(s,"width",this.width),this.setUnitAttribute(s,"height",this.height),this.setPositionCorrectionAttribute(s),p.prototype.applyElementProperties.call(this,s,a)},d.prototype.createCustomContent=function(s){this.createContent&&this.createContent(s,this.data)},d.prototype.destroyCustomContent=function(s){this.destroyContent&&this.destroyContent(s)},d}(x(4178).SvgPrimitive);_.SvgElementPrimitive=y},3360:function(J,_,x){var m,b=this&&this.__extends||(m=function(l,u){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var g in f)f.hasOwnProperty(g)&&(h[g]=f[g])})(l,u)},function(l,u){function h(){this.constructor=l}m(l,u),l.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h)});Object.defineProperty(_,"__esModule",{value:!0}),_.TextFloodFilterPrimitive=_.TextFilterPrimitive=void 0;var E=x(1114),y=x(4628),p=x(6613),d=x(13),s=function(l){function u(h,f,g,O,I){void 0===f&&(f="-0.05"),void 0===g&&(g="-0.05"),void 0===O&&(O="1.1"),void 0===I&&(I="1.1");var D=l.call(this,h,f,g,O,I)||this;return D.id=h,D.x=f,D.y=g,D.width=O,D.height=I,D}return b(u,l),u.prototype.createChildElements=function(h){var f=document.createElementNS(E.svgNS,"feFlood");h.appendChild(f);var g=document.createElementNS(E.svgNS,"feComposite");g.setAttribute("in","SourceGraphic"),g.setAttribute("operator","atop"),h.appendChild(g)},u}(y.FilterPrimitive);_.TextFilterPrimitive=s;var a=function(l){function u(h,f,g,O,I,D){void 0===g&&(g="-0.05"),void 0===O&&(O="-0.05"),void 0===I&&(I="1.1"),void 0===D&&(D="1.1");var C=l.call(this,h,g,O,I,D)||this;return C.id=h,C.floodColor=f,C.x=g,C.y=O,C.width=I,C.height=D,C}return b(u,l),u.prototype.applyChildrenProperties=function(h){for(var f=void 0,g=0;f=h.childNodes[g];g++)if(f.nodeName&&"FEFLOOD"===f.nodeName.toUpperCase()){this.prepareFEFloodNode(f);break}},u.prototype.prepareFEFloodNode=function(h){var f=d.ColorUtils.colorToHash(this.floodColor);h.setAttribute("flood-color",f),h.setAttribute("class","text-filter-flood"),h.style.setProperty("flood-color",this.floodColor!==p.DiagramModel.defaultPageColor?f:"")},u}(s);_.TextFloodFilterPrimitive=a},9416:function(J,_,x){var m,b=this&&this.__extends||(m=function(O,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,C){D.__proto__=C}||function(D,C){for(var w in C)C.hasOwnProperty(w)&&(D[w]=C[w])})(O,I)},function(O,I){function D(){this.constructor=O}m(O,I),O.prototype=null===I?Object.create(I):(D.prototype=I.prototype,new D)});Object.defineProperty(_,"__esModule",{value:!0}),_.TextPrimitive270degRenderHelper=_.TextPrimitive180degRenderHelper=_.TextPrimitive90degRenderHelper=_.TextPrimitiveRenderHelper=_.TextPrimitive=_.TextAngle=void 0;var E,O,y=x(9291),p=x(1114),d=x(4178),s=x(3500),a=x(3490);(O=E=_.TextAngle||(_.TextAngle={}))[O.Angle0deg=0]="Angle0deg",O[O.Angle90deg=90]="Angle90deg",O[O.Angle180deg=180]="Angle180deg",O[O.Angle270deg=270]="Angle270deg";var l=function(O){function I(D,C,w,P,k,A,R,M,L,H,j,U,K){var q=O.call(this,M,"",H,K)||this;return q.x=D,q.y=C,q.text=w,q.owner=P,q.textWidth=k,q.textHeight=A,q.textSpacing=R,q.reverseTextAhchor=L,q.angle=U,q.filterId=j,q.textSegmens=a.textToParagraphs(q.text),q.renderHelper=q.createRenderHelper(),void 0!==q.textWidth&&void 0!==q.textWidth&&(q.x=q.renderHelper.getTextX(q.x),q.y=q.renderHelper.getTextY(q.y)),q}return b(I,O),I.prototype.createMainElement=function(){return document.createElementNS(p.svgNS,"text")},I.prototype.applyElementProperties=function(D,C){this.setUnitAttribute(D,"x",this.x),this.setUnitAttribute(D,"y",this.y),this.filterId&&D.setAttribute("filter",s.RenderUtils.getUrlPathById(this.filterId)),O.prototype.applyElementProperties.call(this,D,C),D.getAttribute("appliedText")!==this.text||D.getAttribute("appliedSize")!==(this.fitToSize&&this.fitToSize.toString())?(this.createTSpanElements(D,C),D.setAttribute("appliedText",this.text),D.setAttribute("appliedSize",this.fitToSize&&this.fitToSize.toString())):this.prepareTSpanElements(D),this.renderHelper.prepareMainElement(D,this.x,this.y)},I.prototype.createTSpanElements=function(D,C){var w=this;s.RenderUtils.removeContent(D),this.textSegmens.forEach(function(k,A){if(!k&&w.textSegmens.length>1)w.createTSpanElement(D).textContent=" ";else if(w.fitToSize){var R=a.textToWords(k),M=a.wordsByLines(y.UnitConverter.twipsToPixels(w.fitToSize),R,function(){return C.measureWords(R,w.style,w.owner)});M.forEach(function(L){w.createTSpanElement(D).textContent=L}),!M.length&&(w.createTSpanElement(D).textContent=" ")}else w.createTSpanElement(D).textContent=k});var P=D.firstChild;P&&this.prepareFirstTSpanElement(P,D.childNodes.length)},I.prototype.createTSpanElement=function(D){var C=document.createElementNS(p.svgNS,"tspan");return D.appendChild(C),this.prepareTSpanElement(C),C},I.prototype.prepareTSpanElements=function(D){for(var C=0;C<D.childNodes.length;C++)this.prepareTSpanElement(D.childNodes[C]);var P=D.firstChild;P&&this.prepareFirstTSpanElement(P,D.childNodes.length)},I.prototype.prepareTSpanElement=function(D){this.renderHelper.prepareTSpanElement(D,this.x,this.y)},I.prototype.prepareFirstTSpanElement=function(D,C){this.renderHelper.prepareFirstTSpanElement(D,C)},I.prototype.applyElementStyleProperties=function(D){this.applyElementStylePropertiesCore(D,this.reverseTextAhchor)},Object.defineProperty(I.prototype,"fitToSize",{get:function(){return this.renderHelper.fitToSize},enumerable:!1,configurable:!0}),I.prototype.createRenderHelper=function(){switch(this.angle){case E.Angle90deg:return new h(this);case E.Angle180deg:return new f(this);case E.Angle270deg:return new g(this);default:return new u(this)}},I.baselineCorrection=.35,I}(d.SvgPrimitive);_.TextPrimitive=l;var u=function(){function O(I){this.primitive=I}return Object.defineProperty(O.prototype,"textWidth",{get:function(){return this.primitive.textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"textHeight",{get:function(){return this.primitive.textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"fitToSize",{get:function(){return this.textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"textAnchor",{get:function(){return this.primitive.style["text-anchor"]},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"textSpacing",{get:function(){return this.primitive.textSpacing},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"angle",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"needRotation",{get:function(){return!1},enumerable:!1,configurable:!0}),O.prototype.prepareMainElement=function(I,D,C){this.needRotation&&I.setAttribute("transform","rotate("+this.angle+", "+y.UnitConverter.twipsToPixels(D)+", "+y.UnitConverter.twipsToPixels(C)+")")},O.prototype.prepareTSpanElement=function(I,D,C){this.primitive.setUnitAttribute(I,"x",D),I.setAttribute("dy",a.LINE_HEIGHT+"em")},O.prototype.prepareFirstTSpanElement=function(I,D){I.setAttribute("dy",(-(D-1)/2+l.baselineCorrection).toFixed(2)+"em")},O.prototype.getTextX=function(I){return this.textAnchor&&"middle"!==this.textAnchor?"end"===this.textAnchor?I+this.textWidth-this.textSpacing:"start"===this.textAnchor?I+this.textSpacing:I:I+this.textWidth/2},O.prototype.getTextY=function(I){return I+this.textHeight/2},O.prototype.setUnitAttribute=function(I,D,C){this.primitive.setUnitAttribute(I,D,C)},O}();_.TextPrimitiveRenderHelper=u;var h=function(O){function I(D){return O.call(this,D)||this}return b(I,O),Object.defineProperty(I.prototype,"fitToSize",{get:function(){return this.textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"angle",{get:function(){return 90},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"needRotation",{get:function(){return!0},enumerable:!1,configurable:!0}),I.prototype.getTextX=function(D){return D+this.textWidth/2},I.prototype.getTextY=function(D){return this.textAnchor&&"middle"!==this.textAnchor?"end"===this.textAnchor?D+this.textHeight-this.textSpacing:"start"===this.textAnchor?D+this.textSpacing:D:D+this.textHeight/2},I}(u);_.TextPrimitive90degRenderHelper=h;var f=function(O){function I(D){return O.call(this,D)||this}return b(I,O),Object.defineProperty(I.prototype,"angle",{get:function(){return 180},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"needRotation",{get:function(){return!0},enumerable:!1,configurable:!0}),I.prototype.getTextX=function(D){return this.textAnchor&&"middle"!==this.textAnchor?"start"===this.textAnchor?D+this.textWidth-this.textSpacing:"end"===this.textAnchor?D+this.textSpacing:D:D+this.textWidth/2},I}(u);_.TextPrimitive180degRenderHelper=f;var g=function(O){function I(D){return O.call(this,D)||this}return b(I,O),Object.defineProperty(I.prototype,"angle",{get:function(){return 270},enumerable:!1,configurable:!0}),I.prototype.getTextY=function(D){return this.textAnchor&&"middle"!==this.textAnchor?"start"===this.textAnchor?D+this.textHeight-this.textSpacing:"end"===this.textAnchor?D+this.textSpacing:D:D+this.textHeight/2},I}(h);_.TextPrimitive270degRenderHelper=g},1114:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RenderHelper=_.svgNS=void 0;var m=x(9463);_.svgNS="http://www.w3.org/2000/svg";var b=function(){function E(){}return E.createSvgElement=function(y,p){void 0===p&&(p=!1);var d=document.createElementNS(_.svgNS,"svg");return d.className.baseVal="dxdi-canvas"+(p?" export":""),y&&y.appendChild(d),d},E.createMainElement=function(y,p){void 0===p&&(p=!1);var d=document.createElement("div");return d.setAttribute("class","dxdi-control"+(p?" measurer":"")),m.Diagnostics.optimizeLayers&&(d.style.transform="translateZ(0)"),y&&y.appendChild(d),d},E.addEventListener=function(y,p,d){y.addEventListener(p,d)},E.removeEventListener=function(y,p,d){y.removeEventListener(p,d)},E}();_.RenderHelper=b},8098:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RenderManager=_.DBL_CLICK_TIMEOUT=_.LONG_TOUCH_TIMEOUT=void 0;var m=x(6031),b=x(3714),E=x(6907),y=x(8900),p=x(2153),d=x(9279),s=x(3500),a=x(8693),l=x(7376),u=x(240),h=x(741),f=x(6043),g=x(9757),O=x(4e3),I=x(6557),D=x(1733),C=x(1114),w=x(6078),P=x(8675),k="dxdi-touch-action";_.LONG_TOUCH_TIMEOUT=500,_.DBL_CLICK_TIMEOUT=500;var A=function(){function R(M,L,H,j,U,K,q){this.moveLocked=!1,this.lockMouseMoveTimer=-1,this.lastClickElement=void 0,this.longTouchTimer=void 0,this.dblTouchTimer=void 0,this.pointers={};var Y=C.RenderHelper.createMainElement(M),W=C.RenderHelper.createSvgElement(Y);this.instanceId=U,this.scroll=K||new l.NativeScrollView(M),this.measurer=H,this.dom=new w.DOMManipulator(this.measurer),this.view=new g.CanvasViewManager(this.scroll,W,j.modelSize,j.zoomLevel,j.autoZoom,j.simpleView,j.rectangle,this.dom,this.instanceId),this.input=new h.InputManager(Y,this.view,L,this.measurer,j.zoomLevel,q),this.items=new a.CanvasItemsManager(this.view.canvasElement,j.zoomLevel,this.dom,this.instanceId),this.page=new f.CanvasPageManager(this.view.pageElement,j,this.dom,this.instanceId),this.selection=new O.CanvasSelectionManager(this.view.canvasElement,j.zoomLevel,j.readOnly,this.dom,this.instanceId),this.contextMenuEnabled=j.contextMenuEnabled,this.view.onViewChanged.add(this.page),this.view.onViewChanged.add(this.items),this.view.onViewChanged.add(this.selection),this.view.onViewChanged.add(this.input),this.autoScroll=new I.AutoScrollController(this.scroll,W,this.view,this.dom),this.attachEvents(W),this.mainElement=Y,this.svgElement=W,this.events=L,this.notifyReadOnlyChanged(j.readOnly)}return R.prototype.clean=function(M){this.killLockMouseMoveTimer(),this.clearLastMouseDownEvent(),this.detachEvents(this.svgElement),this.scroll.detachEvents(),this.input.detachEvents(),this.dom.cancelAnimation(),M&&M(this.mainElement)},R.prototype.replaceParent=function(M,L){this.mainElement&&this.mainElement.parentNode!==M&&M.appendChild(this.mainElement),L&&L!==this.scroll&&(this.scroll&&this.scroll.detachEvents(),this.scroll=L),this.measurer instanceof D.TextMeasurer&&this.measurer.replaceParent(M)},R.prototype.update=function(M){this.view.adjust({horizontal:!M,vertical:!M}),this.page.redraw()},R.prototype.onNewModel=function(M){this.measurer.onNewModel(M,this.dom)},R.prototype.clear=function(){this.items.clear(),this.selection.clear()},R.prototype.attachPointerEvents=function(M){E.DomUtils.addClassName(M,k),C.RenderHelper.addEventListener(M,"pointerdown",this.onPointerDownHandler),C.RenderHelper.addEventListener(d.Browser.TouchUI?M:document,"pointerup",this.onPointerUpHandler),C.RenderHelper.addEventListener(d.Browser.TouchUI?M:document,"pointermove",this.onPointerMoveHandler),C.RenderHelper.addEventListener(M,"pointercancel",this.onPointerCancelHandler),C.RenderHelper.addEventListener(M,"pointerleave",this.onPointerLeaveHandler)},R.prototype.detachPointerEvents=function(M){C.RenderHelper.removeEventListener(M,"pointerdown",this.onPointerDownHandler),C.RenderHelper.removeEventListener(d.Browser.TouchUI?M:document,"pointerup",this.onPointerUpHandler),C.RenderHelper.removeEventListener(d.Browser.TouchUI?M:document,"pointermove",this.onPointerMoveHandler),C.RenderHelper.removeEventListener(M,"pointercancel",this.onPointerCancelHandler),C.RenderHelper.removeEventListener(M,"pointerleave",this.onPointerLeaveHandler),E.DomUtils.removeClassName(M,k)},R.prototype.attachMouseTouchEvents=function(M){C.RenderHelper.addEventListener(M,this.mouseDownEventName,this.onMouseDownHandler),C.RenderHelper.addEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),C.RenderHelper.addEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},R.prototype.detachMouseTouchEvents=function(M){C.RenderHelper.removeEventListener(M,this.mouseDownEventName,this.onMouseDownHandler),C.RenderHelper.removeEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),C.RenderHelper.removeEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},R.prototype.attachEvents=function(M){this.mouseDownEventName=d.Browser.TouchUI?"touchstart":"mousedown",this.mouseMoveEventName=d.Browser.TouchUI?"touchmove":"mousemove",this.mouseUpEventName=d.Browser.TouchUI?"touchend":"mouseup",this.onPointerDownHandler=this.onPointerDown.bind(this),this.onPointerUpHandler=this.onPointerUp.bind(this),this.onPointerMoveHandler=this.onPointerMove.bind(this),this.onPointerCancelHandler=this.onPointerCancel.bind(this),this.onPointerLeaveHandler=this.onPointerLeave.bind(this),this.onMouseDownHandler=this.onMouseDown.bind(this),this.onMouseEnterHandler=this.onMouseEnter.bind(this),this.onMouseLeaveHandler=this.onMouseLeave.bind(this),this.onMouseWheelHandler=this.onMouseWheel.bind(this),this.onMouseDblClickHandler=this.onMouseDblClick.bind(this),this.onContextMenuHandler=this.onContextMenu.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onWindowResizelHandler=this.onWindowResize.bind(this),this.onOrientationChangeHandler=this.onOrientationChange.bind(this),this.onMouseClickHandler=this.onMouseClick.bind(this),P.EventUtils.isPointerEvents()?this.attachPointerEvents(M):(this.attachMouseTouchEvents(M),C.RenderHelper.addEventListener(M,"mouseenter",this.onMouseEnterHandler),C.RenderHelper.addEventListener(M,"mouseleave",this.onMouseLeaveHandler)),C.RenderHelper.addEventListener(M,"wheel",this.onMouseWheelHandler),C.RenderHelper.addEventListener(M,"dblclick",this.onMouseDblClickHandler),C.RenderHelper.addEventListener(M,"click",this.onMouseClickHandler),C.RenderHelper.addEventListener(M,"contextmenu",this.onContextMenuHandler),C.RenderHelper.addEventListener(window,"resize",this.onWindowResizelHandler),C.RenderHelper.addEventListener(window,"orientationchange",this.onOrientationChangeHandler),this.input.mouseWheelHandler=this.onMouseWheelHandler},R.prototype.detachEvents=function(M){P.EventUtils.isPointerEvents()?this.detachPointerEvents(M):(this.detachMouseTouchEvents(M),C.RenderHelper.removeEventListener(M,"mouseenter",this.onMouseEnterHandler),C.RenderHelper.removeEventListener(M,"mouseleave",this.onMouseLeaveHandler)),C.RenderHelper.removeEventListener(M,"wheel",this.onMouseWheelHandler),C.RenderHelper.removeEventListener(M,"dblclick",this.onMouseDblClickHandler),C.RenderHelper.removeEventListener(M,"contextmenu",this.onContextMenuHandler),C.RenderHelper.removeEventListener(M,"click",this.onMouseClickHandler),C.RenderHelper.removeEventListener(window,"resize",this.onWindowResizelHandler),C.RenderHelper.removeEventListener(window,"orientationchange",this.onOrientationChangeHandler)},R.prototype.setPointerPosition=function(M){this.pointers[M.pointerId]={clientX:M.clientX,clientY:M.clientY}},R.prototype.clearPointerPosition=function(M){delete this.pointers[M.pointerId]},R.prototype.onPointerDown=function(M){this.setPointerPosition(M),this.getPointerCount()>2&&(this.pointers={}),this.onMouseDown(M)},R.prototype.onPointerUp=function(M){this.clearPointerPosition(M),this.onMouseUp(M)},R.prototype.onPointerMove=function(M){(d.Browser.TouchUI&&!P.EventUtils.isMousePointer(M)||P.EventUtils.isLeftButtonPressed(M))&&this.setPointerPosition(M),this.onMouseMove(M)},R.prototype.onPointerCancel=function(M){this.clearPointerPosition(M)},R.prototype.onPointerLeave=function(M){P.EventUtils.isMousePointer(M)&&this.onMouseLeave(M),this.clearPointerPosition(M)},R.prototype.onMouseDown=function(M){var L=this;this.lockMouseMove(),this.input.lockFocus(),this.autoScroll.onMouseDown(M),this.lastDownMouseEvent=this.createDiagramMouseEvent(M),s.raiseEvent(M,this.lastDownMouseEvent,function(U){return L.events.onMouseDown(U)}),this.events.canFinishTextEditing()&&this.input.captureFocus(),P.EventUtils.isTouchEvent(M)&&this.processTouchDown(M);var H=b.EvtUtils.getEventSource(M),j=H&&H.tagName;if(d.Browser.TouchUI||"img"===j.toLowerCase()||"image"===j.toLowerCase())return b.EvtUtils.preventEventAndBubble(M),!1},R.prototype.onMouseMove=function(M){var L=this;this.moveLocked||(this.autoScroll.onMouseMove(M,function(){return L.onMouseMoveCore(M)}),this.onMouseMoveCore(M),d.Browser.IE&&this.lockMouseMove(),P.EventUtils.isTouchEvent(M)&&this.processTouchMove(M))},R.prototype.onMouseMoveCore=function(M){var L=this;s.raiseEvent(M,this.createDiagramMouseEvent(M),function(H){return L.events.onMouseMove(H)})},R.prototype.onMouseUp=function(M){var L=this;this.lockMouseMove();var H=this.createDiagramMouseEvent(M);s.raiseEvent(M,H,function(j){return L.events.onMouseUp(j)}),this.autoScroll.onMouseUp(M),H.source.type!==m.MouseEventElementType.Undefined&&this.input.captureFocus(!0),P.EventUtils.isTouchEvent(M)&&this.processTouchUp(M)},R.prototype.onMouseEnter=function(M){var L=this;this.autoScroll.onMouseEnter(M),s.raiseEvent(M,this.createDiagramMouseEvent(M),function(H){return L.events.onMouseEnter(H)})},R.prototype.onMouseLeave=function(M){var L=this;s.raiseEvent(M,this.createDiagramMouseEvent(M),function(H){return L.events.onMouseLeave(H)})},R.prototype.onMouseDblClick=function(M){var L=this;s.raiseEvent(M,this.createDiagramMouseEvent(M),function(H){return L.events.onDblClick(H)})},R.prototype.onMouseClick=function(M){var L=this;P.EventUtils.isTouchEvent(M)?P.EventUtils.isMousePointer(M)||this.input.captureFocus():s.raiseEvent(M,this.createActualMouseClickEvent(M),function(H){return L.events.onClick(H)})},R.prototype.createActualMouseClickEvent=function(M){return this.lastDownMouseEvent?new m.DiagramMouseEvent(this.lastDownMouseEvent.modifiers,this.lastDownMouseEvent.button,this.lastDownMouseEvent.offsetPoint.clone(),this.lastDownMouseEvent.modelPoint.clone(),this.lastDownMouseEvent.source,this.createDiagramMouseEventTouches(M)):this.createDiagramMouseEvent(M)},R.prototype.onContextMenu=function(M){var L=this;if(this.contextMenuEnabled)return 1!==M.buttons&&s.raiseEvent(M,this.createDiagramContextMenuEvent(M),function(H){return L.events.onContextMenu(H)}),this.input.captureFocus(),b.EvtUtils.preventEventAndBubble(M)},R.prototype.processTouchDown=function(M){var L=this;this.touchDownPoint=this.getTouchPointFromEvent(M),this.resetLongTouch(),this.longTouchTimer=setTimeout(function(){s.raiseEvent(M,L.createDiagramMouseEvent(M),function(H){return L.events.onLongTouch(H)}),L.resetLongTouch(),L.resetDblClick()},_.LONG_TOUCH_TIMEOUT)},R.prototype.processTouchMove=function(M){var L=this.getTouchPointFromEvent(M);this.touchDownPoint&&L&&(Math.abs(this.touchDownPoint.x-L.x)>R.touchPositionLimit||Math.abs(this.touchDownPoint.y-L.y)>R.touchPositionLimit)&&(this.resetLongTouch(),this.resetDblClick())},R.prototype.getPointers=function(){var M=this;return Object.keys(this.pointers).map(function(L){return M.pointers[L]})},R.prototype.getPointerCount=function(){return Object.keys(this.pointers).length},R.prototype.getTouchPointFromEvent=function(M){var L,H=M.touches;if(H&&H.length>0)L=new y.Point(H[0].clientX,H[0].clientY);else{var j=this.getPointers();j.length&&(L=new y.Point(j[0].clientX,j[0].clientY))}return L},R.prototype.processTouchUp=function(M){var L=this;if(void 0!==this.longTouchTimer){s.raiseEvent(M,this.createDiagramMouseEvent(M),function(j){return L.events.onClick(j)});var H=b.EvtUtils.getEventSource(M);void 0!==this.dblTouchTimer&&this.lastClickElement===H?(s.raiseEvent(M,this.createDiagramMouseEvent(M),function(j){return L.events.onDblClick(j)}),this.resetDblClick()):(this.resetDblClick(),this.dblTouchTimer=setTimeout(function(){return L.dblTouchTimer=void 0},_.DBL_CLICK_TIMEOUT)),this.lastClickElement=H}this.resetLongTouch(),this.touchDownPoint=void 0},R.prototype.resetLongTouch=function(){void 0!==this.longTouchTimer&&clearTimeout(this.longTouchTimer),this.longTouchTimer=void 0},R.prototype.resetDblClick=function(){void 0!==this.dblTouchTimer&&clearTimeout(this.dblTouchTimer),this.dblTouchTimer=void 0},R.prototype.onOrientationChange=function(){var M=this;setTimeout(function(){return M.onWindowResize()},100)},R.prototype.onWindowResize=function(){var M={horizontal:!1,vertical:!1};if(this.view.autoZoom!==u.AutoZoomMode.Disabled)M.horizontal=!0,M.vertical=!0;else{var L=this.view.checkFitToCanvas(),H=this.view.checkFitToCanvas(this.scroll.getSize());M={horizontal:L.horizontal!==H.horizontal||H.horizontal,vertical:L.vertical!==H.vertical||H.vertical}}this.view.adjust(M)},R.prototype.onMouseWheel=function(M){var L=this;s.raiseEvent(M,this.createDiagramWheelEvent(M),function(H){return L.events.onMouseWheel(H)})},R.prototype.notifyModelSizeChanged=function(M,L){this.view.notifyModelSizeChanged(M,L)},R.prototype.notifyModelRectangleChanged=function(M){this.view.notifyModelRectangleChanged(M)},R.prototype.notifyReadOnlyChanged=function(M){E.DomUtils.toggleClassName(this.mainElement,"dxdi-read-only",M)},R.prototype.notifyDragStart=function(M){},R.prototype.notifyDragEnd=function(M){},R.prototype.notifyDragScrollStart=function(){this.autoScroll.onDragScrollStart()},R.prototype.notifyDragScrollEnd=function(){this.autoScroll.onDragScrollEnd()},R.prototype.notifyToolboxDragStart=function(M){this.onMouseEnter(M)},R.prototype.notifyToolboxDragEnd=function(M){M&&P.EventUtils.isPointerEvents()&&this.onMouseUp(M)},R.prototype.notifyToolboxDraggingMouseMove=function(M){this.onMouseMove(M)},R.prototype.createDiagramMouseEvent=function(M){var W,L=p.KeyUtils.getKeyModifiers(M),H=(W=M,(d.Browser.MSTouchUI?2!==W.button:P.EventUtils.isLeftButtonPressed(W))?m.MouseButton.Left:m.MouseButton.Right),j=this.getOffsetPointByEvent(M),U=this.getModelPoint(j),K=P.EventUtils.isTouchEvent(M),q=this.getEventSource(M,K),Y=this.createDiagramMouseEventTouches(M);return new m.DiagramMouseEvent(L,H,j,U,q,Y,K)},R.prototype.createDiagramMouseEventTouches=function(M){var L=[];if(M.touches)for(var H=0;H<M.touches.length;H++){var j=M.touches[H].clientX,U=M.touches[H].clientY,K=this.getOffsetPointByEventPoint(j,U),q=this.getModelPoint(K);L.push(new m.DiagramMouseEventTouch(K,q))}else{var Y=this.getPointers();for(H=0;H<Y.length;H++)K=this.getOffsetPointByEventPoint(j=Y[H].clientX,U=Y[H].clientY),q=this.getModelPoint(K),L.push(new m.DiagramMouseEventTouch(K,q))}return L},R.prototype.createDiagramContextMenuEvent=function(M){var L=p.KeyUtils.getKeyModifiers(M),H=new y.Point(M.pageX,M.pageY),j=this.getOffsetPointByEvent(M),U=this.getModelPoint(j);return new m.DiagramContextMenuEvent(L,H,U)},R.prototype.createDiagramWheelEvent=function(M){var L=p.KeyUtils.getKeyModifiers(M),H=this.getOffsetPointByEvent(M),j=this.view.getModelPoint(H),U=this.getEventSource(M);return new m.DiagramWheelEvent(L,M.deltaX||M.originalEvent&&M.originalEvent.deltaX,M.deltaY||M.originalEvent&&M.originalEvent.deltaY,H,j,U)},R.prototype.getEventSource=function(M,L){var H=L?b.EvtUtils.getEventSourceByPosition(M):b.EvtUtils.getEventSource(M);if(this.isDiagramControl(H))for(;H&&!this.isDocumentContainer(H);){var j=s.RenderUtils.getElementEventData(H);if(void 0!==j)return j;if(this.input.isTextInputElement(H))return new m.MouseEventSource(m.MouseEventElementType.Document);H=H.parentNode}var U=new m.MouseEventSource(m.MouseEventElementType.Undefined);return H&&this.isDocumentContainer(H)&&(U.type=m.MouseEventElementType.Background),U},R.prototype.isDiagramControl=function(M){for(;M;){if(this.isDocumentContainer(M))return!0;M=M.parentNode}return!1},R.prototype.isDocumentContainer=function(M){return M===this.mainElement},R.prototype.lockMouseMove=function(){var M=this;this.moveLocked=!0,this.lockMouseMoveTimer=setTimeout(function(){M.moveLocked=!1,M.lockMouseMoveTimer=-1},10)},R.prototype.killLockMouseMoveTimer=function(){-1!==this.lockMouseMoveTimer&&(clearTimeout(this.lockMouseMoveTimer),this.lockMouseMoveTimer=-1)},R.prototype.clearLastMouseDownEvent=function(){this.lastDownMouseEvent=void 0},R.prototype.getModelPoint=function(M){return this.view.getModelPoint(M)},R.prototype.getOffsetPointByEvent=function(M){var L=b.EvtUtils.getEventX(M),H=b.EvtUtils.getEventY(M);return this.getOffsetPointByEventPoint(L,H)},R.prototype.getOffsetPointByEventPoint=function(M,L){var H=this.scroll.getScrollContainer(),j=E.DomUtils.getAbsolutePositionX(H),U=E.DomUtils.getAbsolutePositionY(H);return new y.Point(M-j,L-U)},R.prototype.getModelPointByEventPoint=function(M,L){var H=this.getOffsetPointByEventPoint(M,L);return this.view.getModelPoint(H)},R.prototype.getEventPointByModelPoint=function(M){var L=this.view.getAbsolutePoint(M),H=this.scroll.getScrollContainer();return new y.Point(E.DomUtils.getAbsolutePositionX(H)+L.x,E.DomUtils.getAbsolutePositionY(H)+L.y)},R.touchPositionLimit=4,R}();_.RenderManager=A},7376:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.NativeScrollView=void 0;var m=x(8675),b=x(6353),E=x(8900),y=x(6907),p=x(1114),d=function(){function s(a){this.onScroll=new m.EventDispatcher,this.scrollBarWidth=y.DomUtils.getVerticalScrollBarWidth(),this.mainElement=a,this.attachEvents()}return s.prototype.attachEvents=function(){var a=this;this.onScrollHandler=function(){return a.onScroll.raise1(function(l){return l.notifyScrollChanged(function(){return a.getScroll()})})},p.RenderHelper.addEventListener(this.mainElement,"scroll",this.onScrollHandler)},s.prototype.detachEvents=function(){p.RenderHelper.removeEventListener(this.mainElement,"scroll",this.onScrollHandler)},s.prototype.getScrollContainer=function(){return this.mainElement},s.prototype.setScroll=function(a,l){var u=this;this.mainElement.style.overflow="scroll",this.mainElement.scrollLeft=a,this.mainElement.scrollTop=l,this.mainElement.style.overflow="",this.onScroll.raise1(function(h){return h.notifyScrollChanged(function(){return u.getScroll()})})},s.prototype.offsetScroll=function(a,l){var u=this;a&&(this.mainElement.scrollLeft+=a),l&&(this.mainElement.scrollTop+=l),this.onScroll.raise1(function(h){return h.notifyScrollChanged(function(){return u.getScroll()})})},s.prototype.getScroll=function(){return new E.Point(this.mainElement.scrollLeft,this.mainElement.scrollTop)},s.prototype.getSize=function(){var a=this.mainElement.getBoundingClientRect();return new b.Size(Math.floor(a.width),Math.floor(a.height))},s.prototype.getScrollBarWidth=function(){return this.scrollBarWidth},s}();_.NativeScrollView=d},6411:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ShapeImageIndicator=void 0;var m=x(418),b=x(7724),E=x(5329),y=x(9279),p=x(4716),d=x(9291),s=function(){function a(l,u,h,f,g){this.x=l,this.y=u,this.size=h,this.borderThickness=f,this.className=g,this.animationStarted=!1}return a.createLoadingIndicatorPrimitives=function(l,u,h,f,g){return new a(l,u,h,f,g).createLoadingIndicatorPrimitive()},a.createUserIconPrimitives=function(l,u,h,f,g){return new a(l,u,h,f,g).createUserIconPrimitive()},a.createWarningIconPrimitives=function(l,u,h,f){return new a(l,u,h,void 0,f).createWarningIconPrimitive()},a.prototype.rotate=function(l,u,h,f){if(this.animationStarted){var g="rotate("+Math.round(f)%1080/3+" "+u+" "+h+")";l.setAttribute("transform",g),this.animationRequestId=requestAnimationFrame(function(O){this.rotate(l,u,h,O)}.bind(this))}},a.prototype.onApplyLoadingIndicatorElementProperties=function(l){var u=[d.UnitConverter.twipsToPixelsF(this.x+this.size/2),d.UnitConverter.twipsToPixelsF(this.y+this.size/2)],h=u[0],f=u[1];y.Browser.IE?(this.animationRequestId=requestAnimationFrame(function(g){this.rotate(l,h,f,g)}.bind(this)),this.animationStarted=!0):l.style.setProperty("transform-origin",h+"px "+f+"px")},a.prototype.center=function(){return[d.UnitConverter.twipsToPixelsF(this.x+this.size/2),d.UnitConverter.twipsToPixelsF(this.y+this.size/2)]},a.prototype.createLoadingIndicatorPrimitive=function(){var l=this.center(),u=l[0],h=l[1],f=d.UnitConverter.twipsToPixelsF(this.size/2-this.borderThickness/2);return new E.GroupPrimitive([new m.EllipsePrimitive(u+"",h+"",f+"",f+""),new b.PathPrimitive([new b.PathPrimitiveMoveToCommand(u+f+"",h+""),new b.PathPrimitiveArcToCommand(f+"",f+"",0,!1,!1,u+"",h-f+"")])],this.className,void 0,void 0,this.onApplyLoadingIndicatorElementProperties.bind(this),this.onBeforeDispose.bind(this))},a.prototype.createUserIconPrimitive=function(){var l=this.center(),u=l[0],h=l[1],f=d.UnitConverter.twipsToPixelsF(this.size/2-this.borderThickness/2),g=d.UnitConverter.twipsToPixelsF(this.size);return new E.GroupPrimitive([new m.EllipsePrimitive(u+"",h+"",f+"",f+"",void 0,"dxdi-background"),new m.EllipsePrimitive(u+"",h-g/8+"",g/8+"",g/8+""),new b.PathPrimitive([new b.PathPrimitiveMoveToCommand(u+"",h+g/16+""),new b.PathPrimitiveCubicCurveToCommand(u+.1375*g+"",h+g/16+"",u+g/4+"",h+.11875*g+"",u+g/4+"",h+.1875*g+""),new b.PathPrimitiveLineToCommand(u+g/4+"",h+g/4+""),new b.PathPrimitiveLineToCommand(u-g/4+"",h+g/4+""),new b.PathPrimitiveLineToCommand(u-g/4+"",h+.1875*g+""),new b.PathPrimitiveCubicCurveToCommand(u-g/4+"",h+.11875*g+"",u-.1375*g+"",h+g/16+"",u+"",h+g/16+""),new b.PathPrimitiveClosePathCommand])],this.className)},a.prototype.createWarningIconPrimitive=function(){var l=this.center(),u=l[0],h=l[1],f=d.UnitConverter.twipsToPixelsF(this.size/2)-1,g=d.UnitConverter.twipsToPixelsF(this.size/8);return new E.GroupPrimitive([new m.EllipsePrimitive(u+"",h+"",f+"",f+""),new p.RectanglePrimitive(u-g/2+.5+"",h+f-d.UnitConverter.twipsToPixelsF(this.size/4)+"",g+"",g+""),new p.RectanglePrimitive(u-g/2+.5+"",h-f+d.UnitConverter.twipsToPixelsF(this.size/4)-g+"",g+"",f+"")],this.className)},a.prototype.onBeforeDispose=function(){this.animationRequestId&&cancelAnimationFrame(this.animationRequestId),this.animationStarted=!1},a}();_.ShapeImageIndicator=s},4724:function(J,_,x){var m,b=this&&this.__extends||(m=function(g,O){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,D){I.__proto__=D}||function(I,D){for(var C in D)D.hasOwnProperty(C)&&(I[C]=D[C])})(g,O)},function(g,O){function I(){this.constructor=g}m(g,O),g.prototype=null===O?Object.create(O):(I.prototype=O.prototype,new I)});Object.defineProperty(_,"__esModule",{value:!0}),_.IconToolbox=void 0;var E=x(4602),y=x(1114),p=x(5503),d=x(9291),s=x(8900),a=x(1669),l=x(1552),u=x(6688),h=x(4716),f=function(g){function O(I,D,C,w,P,k,A,R,M){var L=g.call(this,I,D,C,w,P,k)||this;return L.options=A,L.measurer=R,L.instanceId=M,L}return b(O,g),O.prototype.createElements=function(I,D){var C=document.createElementNS(y.svgNS,"svg");C.className.baseVal="dxdi-canvas",I.appendChild(C),this.drawShapeIcons(C,D,this.options.toolboxWidth||C.getBoundingClientRect().width)},O.prototype.drawShapeIcons=function(I,D,C){var w=this,P=l.DEFAULT_STROKE_WIDTH,k=C-2*P,A=this.options.shapeIconSize;!A&&this.options.shapeIconSpacing&&this.options.shapeIconCountInRow&&(A=Math.floor((k-(this.options.shapeIconCountInRow-1)*this.options.shapeIconSpacing)/this.options.shapeIconCountInRow)),A||(A=32);var R=A=Math.max(A,this.options.shapeIconSpacing/2),M=this.options.shapeIconCountInRow;if(!M)for(M=1;R<k;)(R+=this.options.shapeIconSpacing+A)<k&&M++;var L=M>1?(k-A*M)/(M-1):0,H=P,j=P,U=d.UnitConverter.pixelsToTwips(A);D.forEach(function(K,q){q>0&&q%M==0&&(H=P,j+=A+L);var Y=w.shapeDescriptionManager.get(K),W=w.createShape(Y,H,j,A<26);w.updateShapeIconBounds(W,A);var z=w.drawShape(I,W);w.drawSelector(z,d.UnitConverter.pixelsToTwips(H),d.UnitConverter.pixelsToTwips(j),U),H+=A+L}),I.style.height=j+A+P+"px",I.style.width=C+"px"},O.prototype.drawShape=function(I,D){var C=this,w=D.description.createPrimitives(D,this.instanceId,!0),P=document.createElementNS(y.svgNS,"g");if(P.setAttribute("data-tb-type",D.description.key.toString()),P.setAttribute("class","toolbox-item"),P.setAttribute("title",D.description.getTitle()),this.options.shapeIconAttributes)for(var k in this.options.shapeIconAttributes)Object.prototype.hasOwnProperty.call(this.options.shapeIconAttributes,k)&&P.setAttribute(k,this.options.shapeIconAttributes[k]);return I.appendChild(P),w.forEach(function(A){var R=A.createElement(function(M){return P.appendChild(M)});A.applyElementProperties(R,C.measurer)}),P},O.prototype.drawSelector=function(I,D,C,w){var P=this,k=new h.RectanglePrimitive(D,C,w,w,void 0,"selector");k.createElement(function(A){k.applyElementProperties(A,P.measurer),I.appendChild(A)})},O.prototype.createShape=function(I,D,C,w){var P=d.UnitConverter.pixelsToTwips(D),k=d.UnitConverter.pixelsToTwips(C),A=new p.Shape(I,new s.Point(P,k),!0);return this.needResetShapeText(I)?A.text="":w&&(A.text="T"),A},O.prototype.needResetShapeText=function(I){return!(I instanceof a.TextShapeDescription||I instanceof u.CustomShapeDescription&&I.baseDescription instanceof a.TextShapeDescription)},O.prototype.updateShapeIconBounds=function(I,D){var C=d.UnitConverter.pixelsToTwips(D);if(I.size.height=I.size.width*I.getToolboxHeightToWidthRatio(),I.size.width>I.size.height){var w=I.size.height/I.size.width;I.size.width=C,I.size.height=C*w,I.position.y=I.position.y+(C-I.size.height)/2,I.parameters.forEach(function(P){P.value=P.value*C/I.description.defaultSize.width})}else I.size.width<I.size.height?(w=I.size.width/I.size.height,I.size.height=C,I.size.width=C*w,I.position.x=I.position.x+(C-I.size.width)/2,I.parameters.forEach(function(P){P.value=P.value*C/I.description.defaultSize.height})):(I.size.width=C,I.size.height=C,I.parameters.forEach(function(P){P.value=P.value*C/I.description.defaultSize.width}))},O.prototype.createDraggingElement=function(I){var D=document.createElement("DIV");D.setAttribute("class","dxdi-toolbox-drag-item"),document.body.appendChild(D);var C=document.createElementNS(y.svgNS,"svg");C.className.baseVal="dxdi-canvas",D.appendChild(C);var w=this.shapeDescriptionManager.get(I.evt.data),P=this.createShape(w,l.DEFAULT_STROKE_WIDTH,l.DEFAULT_STROKE_WIDTH);return this.drawShape(C,P),D.style.width=d.UnitConverter.twipsToPixels(P.size.width)+2*l.DEFAULT_STROKE_WIDTH+"px",D.style.height=d.UnitConverter.twipsToPixels(P.size.height)+2*l.DEFAULT_STROKE_WIDTH+"px",D},O}(E.Toolbox);_.IconToolbox=f},5947:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.TextToolbox=void 0;var E=function(y){function p(d,s,a,l,u,h){return y.call(this,d,s,a,l,u,h)||this}return b(p,y),p.prototype.createElements=function(d,s){var a=this;s.forEach(function(l){var u=a.shapeDescriptionManager.get(l),h=document.createElement("div");h.setAttribute("class","toolbox-text-item"),h.setAttribute("data-tb-type",l),h.textContent=u.getDefaultText()||u.getTitle(),d.appendChild(h)})},p.prototype.createDraggingElement=function(d){var s=document.createElement("DIV");s.setAttribute("class","dxdi-toolbox-drag-text-item");var a=this.shapeDescriptionManager.get(d.evt.data);return s.textContent=a.getDefaultText()||a.getTitle(),document.body.appendChild(s),s},p}(x(4602).Toolbox);_.TextToolbox=E},4602:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramDraggingEvent=_.ToolboxDraggingObject=_.Toolbox=void 0;var m,I,b=x(8675),E=x(8900),y=x(3714),p=x(4914),d=x(6907),s=x(9279),a=x(1114),l=x(8693),u="dxdi-toolbox",h="dxdi-tb-start-drag-flag",f=function(){function I(D,C,w,P,k,A){this.readOnly=C,this.allowDragging=w,this.shapeDescriptionManager=P,this.shapeTypes=k,this.getAllowedShapeTypes=A,this.dragPrepareTimeout=-1,this.dragState=m.None,this.emulateDragEvents=s.Browser.WebKitTouchUI,this.onDragOperation=new b.EventDispatcher,this.onClickOperation=new b.EventDispatcher,D&&(this.mainElement=this.createMainElement(D),this.attachHandlers(this.mainElement))}return I.prototype.clean=function(D){this.detachHandlers(this.mainElement),D&&D(this.mainElement)},I.prototype.createMainElement=function(D){var C=document.createElement("div");return C.setAttribute("class",u),C.draggable=!0,this.emulateDragEvents&&(C.tabIndex=0),D.appendChild(C),C},I.prototype.attachHandlers=function(D){this.onElementMouseDownHandler=this.onElementMouseDown.bind(this),this.onElementMouseUpHandler=this.onElementMouseUp.bind(this),this.onMouseDownHandler=this.onMouseDown.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onMouseUpHandler=this.onMouseUp.bind(this),this.onDragStartHandler=this.onDragStart.bind(this),this.onTouchMoveHandler=this.onTouchMove.bind(this),this.emulateDragEvents||a.RenderHelper.addEventListener(D,"dragstart",this.onDragStartHandler),b.EventUtils.isPointerEvents()?(this.mouseDownEventName="pointerdown",this.mouseMoveEventName="pointermove",this.mouseUpEventName="pointerup"):(this.mouseDownEventName=s.Browser.TouchUI?"touchstart":"mousedown",this.mouseMoveEventName=s.Browser.TouchUI?"touchmove":"mousemove",this.mouseUpEventName=s.Browser.TouchUI?"touchend":"mouseup"),a.RenderHelper.addEventListener(D,"touchmove",this.onTouchMoveHandler),a.RenderHelper.addEventListener(D,this.mouseDownEventName,this.onElementMouseDownHandler),a.RenderHelper.addEventListener(D,this.mouseUpEventName,this.onElementMouseUpHandler),a.RenderHelper.addEventListener(D,this.mouseDownEventName,this.onMouseDownHandler),a.RenderHelper.addEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),a.RenderHelper.addEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},I.prototype.detachHandlers=function(D){this.emulateDragEvents||a.RenderHelper.removeEventListener(D,"dragstart",this.onDragStartHandler),a.RenderHelper.removeEventListener(D,"touchmove",this.onTouchMoveHandler),a.RenderHelper.removeEventListener(D,this.mouseDownEventName,this.onElementMouseDownHandler),a.RenderHelper.removeEventListener(D,this.mouseUpEventName,this.onElementMouseUpHandler),a.RenderHelper.removeEventListener(D,this.mouseDownEventName,this.onMouseDownHandler),a.RenderHelper.removeEventListener(document,this.mouseMoveEventName,this.onMouseMoveHandler),a.RenderHelper.removeEventListener(document,this.mouseUpEventName,this.onMouseUpHandler)},I.prototype.render=function(D){this.mainElement.childNodes&&(this.mainElement.innerHTML="");var C=this.shapeTypes;return C=this.getAllowedShapeTypes?this.getAllowedShapeTypes(C):C,(C=D?C.filter(D):C).length&&this.createElements(this.mainElement,C),!!C.length},I.prototype.createDraggingObject=function(D){var C=new O;return C.data=D,C.onFinishDragging=this.resetDragState.bind(this),C.onCaptured=this.capture.bind(this),new g(C)},I.prototype.getDragShapeType=function(D){for(;D&&!d.DomUtils.hasClassName(D,u);){if(D.getAttribute&&D.getAttribute("data-tb-type"))return D.getAttribute("data-tb-type");D=D.parentNode}},I.prototype.getTouchPointFromEvent=function(D){var C,w=D.touches;return w&&w.length>0?C=new E.Point(w[0].clientX,w[0].clientY):D.clientX&&D.clientY&&(C=new E.Point(D.clientX,D.clientY)),C},I.prototype.onElementMouseDown=function(D){this.mouseDownShapeType=this.getDragShapeType(y.EvtUtils.getEventSource(D)),this.touchDownPoint=this.getTouchPointFromEvent(D)},I.prototype.onElementMouseUp=function(D){var C=this.getDragShapeType(y.EvtUtils.getEventSource(D));C&&C===this.mouseDownShapeType&&this.onClickOperation.raise("notifyToolboxClick",C),this.mouseDownShapeType=void 0,this.touchDownPoint=void 0},I.prototype.onMouseDown=function(D){this.setDragState(m.Prepare,D),s.Browser.TouchUI&&b.EventUtils.isMousePointer(D)&&this.setDragState(m.Start,D)},I.prototype.onDragStart=function(D){this.setDragState(m.Start,D),D.preventDefault()},I.prototype.onTouchMove=function(D){this.draggingObject&&D.preventDefault()},I.prototype.isLeftButtonPressed=function(D){return y.EvtUtils.isLeftButtonPressed(D)||"pointermove"===D.type&&s.Browser.TouchUI&&s.Browser.MacOSMobilePlatform&&b.EventUtils.isMousePointer(D)},I.prototype.onMouseMove=function(D){if(s.Browser.TouchUI&&s.Browser.MacOSMobilePlatform){var C=this.getTouchPointFromEvent(D);if(this.touchDownPoint&&C&&this.touchDownPoint.x===C.x&&this.touchDownPoint.y===C.y)return}this.setDragState(this.isLeftButtonPressed(D)?m.Dragging:m.None,D),b.EventUtils.isPointerEvents()&&this.raiseDraggingMouseMove(D)},I.prototype.onMouseUp=function(D){this.setDragState(m.None,D)},I.prototype.updateDraggingElementPosition=function(D,C){var w=this.draggingObject.element,k=C-w.offsetHeight/2;p.SetAbsoluteX(w,D-w.offsetWidth/2),p.SetAbsoluteY(w,k)},I.prototype.setDragState=function(D,C){if(!this.readOnly&&this.allowDragging&&!(D===m.None&&D===this.dragState||(this.dragPrepareTimeout>-1&&(clearTimeout(this.dragPrepareTimeout),this.dragPrepareTimeout=-1,this.dragPrepareEvent=void 0),D-this.dragState>1||D!==m.None&&D<this.dragState)))switch(this.dragState=D,D){case m.Prepare:this.prepareDragging(C)||this.setDragState(m.None,C),!this.emulateDragEvents&&b.EventUtils.isMousePointer(C)||(this.dragPrepareTimeout=setTimeout(this.onDragPrepareTimeout.bind(this),800),this.dragPrepareEvent=C);break;case m.Start:d.DomUtils.addClassName(document.body,"dxdi-dragging"),this.startDragging(C);break;case m.Dragging:this.doDragging(C);break;case m.None:this.finishDragging(C)}},I.prototype.resetDragState=function(){this.setDragState(m.None,void 0)},I.prototype.onDragPrepareTimeout=function(){this.dragPrepareTimeout=-1,this.dragState===m.Prepare&&this.setDragState(m.Start,this.dragPrepareEvent),this.dragPrepareEvent=void 0},I.prototype.prepareDragging=function(D){return this.dragStartPoint=new E.Point(y.EvtUtils.getEventX(D),y.EvtUtils.getEventY(D)),this.dragStartShapeType=this.getDragShapeType(y.EvtUtils.getEventSource(D)),b.EventUtils.isMousePointer(D)&&d.DomUtils.addClassName(this.mainElement,h),!this.emulateDragEvents&&b.EventUtils.isMousePointer(D)||b.HtmlFocusUtils.focusWithPreventScroll(this.mainElement),!!this.dragStartShapeType},I.prototype.startDragging=function(D){this.draggingObject=this.createDraggingObject(this.dragStartShapeType),this.dragStartShapeType?(this.raiseDragStart(D),this.draggingObject.element=this.createDraggingElement(this.draggingObject),void 0!==this.draggingObject.captured&&this.capture(this.draggingObject.captured,!0),this.updateDraggingElementPosition(this.dragStartPoint.x,this.dragStartPoint.y)):d.DomUtils.addClassName(document.body,l.NOT_VALID_CSSCLASS)},I.prototype.doDragging=function(D){this.draggingObject.element&&this.updateDraggingElementPosition(y.EvtUtils.getEventX(D),y.EvtUtils.getEventY(D))},I.prototype.finishDragging=function(D){if(this.draggingObject){this.raiseDragEnd(D);var C=this.draggingObject.element;C&&C.parentNode.removeChild(C),delete this.draggingObject}this.dragStartPoint=void 0,this.dragStartShapeType=void 0,d.DomUtils.removeClassName(this.mainElement,h),d.DomUtils.removeClassName(document.body,l.NOT_VALID_CSSCLASS),setTimeout(function(){return d.DomUtils.removeClassName(document.body,"dxdi-dragging")},500)},I.prototype.capture=function(D,C){this.draggingObject&&(this.draggingObject.captured!==D||C)&&(this.draggingObject.captured=D,this.draggingObject.element&&d.DomUtils.toggleClassName(this.draggingObject.element,"dxdi-tb-drag-captured",D))},I.prototype.raiseDragStart=function(D){this.onDragOperation.raise("notifyToolboxDragStart",D)},I.prototype.raiseDragEnd=function(D){this.onDragOperation.raise("notifyToolboxDragEnd",D)},I.prototype.raiseDraggingMouseMove=function(D){this.onDragOperation.raise("notifyToolboxDraggingMouseMove",D)},I.prototype.notifyReadOnlyChanged=function(D){this.readOnly=D},I}();_.Toolbox=f,(I=m||(m={}))[I.None=-1]="None",I[I.Prepare=0]="Prepare",I[I.Start=1]="Start",I[I.Dragging=2]="Dragging";var g=function(I){this.evt=I};_.ToolboxDraggingObject=g;var O=function(){};_.DiagramDraggingEvent=O},3298:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ToolboxManager=void 0;var m=x(5947),b=x(4724),E=x(1733),y=x(8679),p=function(){function d(s){this.shapeDescriptionManager=s,this.toolboxes=[],this.measurers={}}return d.prototype.create=function(s,a,l,u,h,f,g,O){var I=Array.isArray(h)?h:this.shapeDescriptionManager.getTypesByCategory(h),D=u?new m.TextToolbox(s,a,l,this.shapeDescriptionManager,I,f):new b.IconToolbox(s,a,l,this.shapeDescriptionManager,I,f,O,this.getOrCreateMeasurer(s),g);return D.render(),this.toolboxes.push(D),D},d.prototype.clean=function(s,a){var l=this;if(a)a.clean(s),this.toolboxes.splice(this.toolboxes.indexOf(a),1),Object.keys(this.measurers).forEach(function(h){l.measurers[h]===a.measurer&&delete l.measurers[h]});else{for(var u=0;u<this.toolboxes.length;u++)this.toolboxes[u].clean(s);this.toolboxes=[],this.measurers={}}},d.prototype.refresh=function(s){this.toolboxes.forEach(function(a,l){(!s||Array.isArray(s)&&s.indexOf(l)>-1||l===s)&&a.render()})},d.prototype.applyFilter=function(s,a){var l=this;return this.toolboxes.reduce(function(u,h,f){return(!a||Array.isArray(a)&&a.indexOf(f)>-1||f===a)&&h.render(function(g){return l.searchFilter(g,s,f)})&&u.push(f),u},[])},d.prototype.searchFilter=function(s,a,l,u){if(!a||u&&-1===u.indexOf(l))return!0;a=a.toLowerCase();var h=this.shapeDescriptionManager.get(s);return h.getTitle().toLowerCase().indexOf(a)>-1||h.getDefaultText().toLowerCase().indexOf(a)>-1},d.prototype.getOrCreateMeasurer=function(s){var a=s.getAttribute("data-dxdiMeasurerID");return a&&this.measurers[a]||(a=y.MathUtils.generateGuid(),this.measurers[a]=new E.TextMeasurer(s),s.setAttribute("data-dxdiMeasurerID",a)),this.measurers[a]},d}();_.ToolboxManager=p},3500:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.raiseEvent=_.RenderUtils=void 0;var m=x(6031),b=x(8679),E=function(){function y(){}return y.updateSvgElementSize=function(p,d,s,a){p.style.width=d+"px",p.style.height=s+"px",p.setAttribute("viewBox","0 0 "+d+" "+s),a&&(p.setAttribute("width",d.toString()),p.setAttribute("height",s.toString()))},y.removeElement=function(p){p&&p.parentNode&&p.parentNode.removeChild(p)},y.removeContent=function(p){for(;p&&p.firstChild;)p.removeChild(p.firstChild)},y.setElementEventData=function(p,d,s,a){d!==m.MouseEventElementType.Undefined&&(p.setAttribute("data-type",d.toString()),void 0!==s&&p.setAttribute("data-key",s.toString()),void 0!==a&&p.setAttribute("data-value",a.toString()))},y.getElementEventData=function(p){if(p.getAttribute&&p.getAttribute("data-type"))return new m.MouseEventSource(parseInt(p.getAttribute("data-type")),p.getAttribute("data-key"),p.getAttribute("data-value"));var d=p.getAttribute&&p.getAttribute("class");return"dxdi-page"===d||"dxdi-main"===d?new m.MouseEventSource(m.MouseEventElementType.Document):void 0},y.getHtmlElementStylePropertyName=function(p){switch(p){case"fill":return"color";case"text-anchor":return"text-align"}return p},y.getTextAnchorValue=function(p,d){if(void 0===d&&(d=!1),d){if("start"===p)return"end";if("end"===p)return"start"}return p},y.getStrokeDasharrayValue=function(p,d){if(d){var s=p&&p.toString();return(s?s.split(/[\s,]+/):[]).map(function(a){return parseInt(a)/2*d}).join(",")}return p},y.applyStyleToElement=function(p,d,s){var a=this;void 0===s&&(s=!1);var l=p.getDefaultInstance();p.forEach(function(u){var h=p[u],f=d instanceof HTMLElement?a.getHtmlElementStylePropertyName(u):u;if(void 0!==h&&""!==h&&h!==l[u]){switch(u){case"text-anchor":h=a.getTextAnchorValue(h,s);break;case"stroke-dasharray":h=a.getStrokeDasharrayValue(h,parseInt(p["stroke-width"]))}d.style.setProperty(f,h)}else d.style.setProperty(f,"")})},y.generateSvgElementId=function(p){return p+"_"+b.MathUtils.generateGuid()},y.getUrlPathById=function(p){return"url(#"+p+")"},y}();_.RenderUtils=E,_.raiseEvent=function(y,p,d){d(p),p.preventDefault&&y.preventDefault()}},5401:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.InputPosition=void 0;var m=x(6823),b=x(4914),E=function(){function y(p){this.selection=p,this.initialProperties=new m.InputPositionProperties(this.selection),this.defaultProperties=new m.InputPositionProperties(this.selection,this.initialProperties,!0),this.currentProperties=new m.InputPositionProperties(this.selection,this.defaultProperties)}return y.prototype.initialize=function(){this.reset(),this.defaultProperties.reset()},y.prototype.reset=function(){this.currentProperties.reset()},y.prototype.getDefaultConnectorProperties=function(){return this.defaultProperties.getConnectorProperties()},y.prototype.getDefaultConnectorPropertyValue=function(p){return this.defaultProperties.getConnectorPropertyValue(p)},y.prototype.getCurrentConnectorPropertyValue=function(p){return this.currentProperties.getConnectorPropertyValue(p)},y.prototype.setConnectorPropertyValue=function(p,d){this.currentProperties.setConnectorPropertyValue(p,d),this.selection.isEmpty(!0)&&this.defaultProperties.setConnectorPropertyValue(p,d)},y.prototype.setInitialConnectorProperties=function(p){for(var d in this.defaultProperties.reset(),this.currentProperties.reset(),p)Object.prototype.hasOwnProperty.call(p,d)&&this.initialProperties.setConnectorPropertyValue(d,p[d])},y.prototype.getDefaultStyle=function(){return this.defaultProperties.getStyle()},y.prototype.getDefaultStylePropertyValue=function(p){return this.defaultProperties.getStylePropertyValue(p)},y.prototype.getDefaultTextStyle=function(){return this.defaultProperties.getTextStyle()},y.prototype.getDefaultTextStylePropertyValue=function(p){return this.defaultProperties.getTextStylePropertyValue(p)},y.prototype.getCurrentStylePropertyValue=function(p){return this.currentProperties.getStylePropertyValue(p)},y.prototype.getCurrentTextStylePropertyValue=function(p){return this.currentProperties.getTextStylePropertyValue(p)},y.prototype.setStylePropertyValue=function(p,d){this.currentProperties.setStylePropertyValue(p,d),this.selection.isEmpty(!0)&&this.defaultProperties.setStylePropertyValue(p,d)},y.prototype.setTextStylePropertyValue=function(p,d){this.currentProperties.setTextStylePropertyValue(p,d),this.selection.isEmpty(!0)&&this.defaultProperties.setTextStylePropertyValue(p,d)},y.prototype.setInitialStyleProperties=function(p){this.defaultProperties.reset(),this.currentProperties.reset();var d="string"==typeof p?b.Data.cssTextToObject(p):p;for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&this.initialProperties.setStylePropertyValue(s,d[s])},y.prototype.setInitialTextStyleProperties=function(p){this.defaultProperties.reset(),this.currentProperties.reset();var d="string"==typeof p?b.Data.cssTextToObject(p):p;for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&this.initialProperties.setTextStylePropertyValue(s,d[s])},y.prototype.notifySelectionChanged=function(p){this.reset()},y}();_.InputPosition=E},6823:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.InputPositionProperties=void 0;var m=x(4612),b=x(1552),E=function(){function y(p,d,s){this.selection=p,this.baseProperties=d,this.disableMergingStyles=s,this.selection=p}return y.prototype.reset=function(){this.connectorProperties=null,this.style=null,this.textStyle=null},y.prototype.getConnectorProperties=function(){return this.connectorProperties||(this.connectorProperties=this.baseProperties?this.baseProperties.getConnectorProperties().clone():new m.ConnectorProperties,this.updateConnectorProperties(this.connectorProperties)),this.connectorProperties},y.prototype.getConnectorPropertyValue=function(p){return this.getConnectorProperties()[p]},y.prototype.setConnectorPropertyValue=function(p,d){this.getConnectorProperties()[p]=d},y.prototype.getStyle=function(){return this.style||(this.style=this.baseProperties?this.baseProperties.getStyle().clone():new b.Style,this.disableMergingStyles||this.updateStyle(this.style,"style")),this.style},y.prototype.getStylePropertyValue=function(p){return this.getStyle()[p]},y.prototype.setStylePropertyValue=function(p,d){this.getStyle()[p]=d},y.prototype.getTextStyle=function(){return this.textStyle||(this.textStyle=this.baseProperties?this.baseProperties.getTextStyle().clone():new b.TextStyle,this.disableMergingStyles||this.updateStyle(this.textStyle,"styleText")),this.textStyle},y.prototype.getTextStylePropertyValue=function(p){return this.getTextStyle()[p]},y.prototype.setTextStylePropertyValue=function(p,d){this.getTextStyle()[p]=d},y.prototype.updateConnectorProperties=function(p){var d=this,s=this.selection.getSelectedConnectors(!0);p.forEach(function(a){d.updatePropertyValue(p,s,function(l){return l.properties},a)})},y.prototype.updateStyle=function(p,d){var s=this,a=this.selection.getSelectedItems(!0);p.forEach(function(l){s.updatePropertyValue(p,a,function(u){return u[d]},l)})},y.prototype.updatePropertyValue=function(p,d,s,a){var l,u=!1;d.forEach(function(h){var f=s(h)[a];if(void 0===l&&void 0!==f)l=f,u=!0;else if(u&&l!==f)return void(l=void 0)}),u&&(p[a]=l)},y}();_.InputPositionProperties=E},9021:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Selection=void 0;var m=x(8675),b=x(5401),E=x(5503),y=x(7959),p=x(4914),d=function(){function s(a){this.onChanged=new m.EventDispatcher,this.inputPosition=new b.InputPosition(this),this.onChanged.add(this.inputPosition),this.initialize(a)}return s.prototype.initialize=function(a){this.model=a,this.keys=[],this.inputPosition.initialize()},s.prototype.add=function(a){this.keys.indexOf(a)<0&&(this.keys.push(a),this.raiseSelectionChanged())},s.prototype.remove=function(a){this.keys.indexOf(a)>=0&&(this.keys.splice(this.keys.indexOf(a),1),this.raiseSelectionChanged())},s.prototype.clear=function(){this.keys.length>0&&(this.keys=[],this.raiseSelectionChanged())},s.prototype.set=function(a,l){!l&&p.Data.ArrayEqual(a,this.keys)||(this.keys=a,this.raiseSelectionChanged())},s.prototype.getKeys=function(){return this.keys},s.prototype.getKey=function(a){return this.keys[a]},s.prototype.getSelectedItemsInsideContainers=function(a){var l=this,u=a.slice();return a.forEach(function(h){h instanceof E.Shape&&l.getSelectedItemsInsideContainers(l.model.getChildren(h)).forEach(function(f){-1!==u.indexOf(f)||l.hasKey(f.key)||u.push(f)})}),u},s.prototype.getSelectedItemsCore=function(a){var l=this;return this.keys.map(function(u){return l.model.findItem(u)}).filter(function(u){return u&&(a||!u.isLocked)})},s.prototype.getSelectedItems=function(a,l){return l?this.getSelectedItemsInsideContainers(this.getSelectedItemsCore(a)):this.getSelectedItemsCore(a)},s.prototype.getSelectedShapes=function(a,l){var u=this;if(l){var h=this.getSelectedItemsCore(a);return this.getSelectedItemsInsideContainers(h).map(function(f){return f instanceof E.Shape?f:void 0}).filter(function(f){return f})}return this.keys.map(function(f){return u.model.findShape(f)}).filter(function(f){return f&&(a||!f.isLocked)})},s.prototype.getSelectedConnectors=function(a,l){var u=this;if(l){var h=this.keys.map(function(f){return u.model.findItem(f)});return this.getSelectedItemsInsideContainers(h).map(function(f){return f instanceof y.Connector?f:void 0}).filter(function(f){return f&&(a||!f.isLocked)})}return this.keys.map(function(f){return u.model.findConnector(f)}).filter(function(f){return f&&(a||!f.isLocked)})},s.prototype.hasKey=function(a){return this.keys.indexOf(a)>=0},s.prototype.isEmpty=function(a){return!this.getSelectedItems(a).length},s.prototype.selectRect=function(a){var l=[];this.model.iterateItems(function(u){u.intersectedByRect(a)&&l.push(u.key)}),this.set(l)},s.prototype.raiseSelectionChanged=function(){this.onChanged.raise("notifySelectionChanged",this)},s}();_.Selection=d},240:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ConnectorRoutingMode=_.AutoZoomMode=_.DiagramSettings=void 0;var m,b,a,E=x(8675),y=x(6353),p=x(5383),d=x(4867),s=function(){function a(){this.onZoomChanged=new E.EventDispatcher,this.onViewChanged=new E.EventDispatcher,this.onReadOnlyChanged=new E.EventDispatcher,this.onConnectorRoutingModeChanged=new E.EventDispatcher,this._zoomLevel=1,this._zoomLevelWasChanged=!1,this._zoomLevelItems=[.5,.75,1,1.25,1.5,2,3],this._simpleView=!1,this._fullscreen=!1,this._readOnly=!1,this._autoZoom=m.Disabled,this._snapToGrid=!0,this._showGrid=!0,this._contextMenuEnabled=!0,this._gridSize=180,this._gridSizeItems=[90,180,360,720],this._pageSizeItems=[{size:new y.Size(12240,15840),text:"US-Letter ({width} x {height})"},{size:new y.Size(12240,20160),text:"US-Legal ({width} x {height})"},{size:new y.Size(15817,24491),text:"US-Tabloid ({width} x {height})"},{size:new y.Size(47679,67408),text:"A0 ({width} x {height})"},{size:new y.Size(33676,47679),text:"A1 ({width} x {height})"},{size:new y.Size(23811,33676),text:"A2 ({width} x {height})"},{size:new y.Size(16838,23811),text:"A3 ({width} x {height})"},{size:new y.Size(11906,16838),text:"A4 ({width} x {height})"},{size:new y.Size(8391,11906),text:"A5 ({width} x {height})"},{size:new y.Size(5953,8391),text:"A6 ({width} x {height})"},{size:new y.Size(4195,5953),text:"A7 ({width} x {height})"}],this._viewUnits=p.DiagramUnit.In,this._connectorRoutingMode=b.AllShapesOnly,this._reloadInsertedItemRequired=!1,this._useCanvgForExportToImage=!0}return Object.defineProperty(a.prototype,"zoomLevel",{get:function(){return this._zoomLevel},set:function(l){var u=this;(l=a.correctZoomLevel(l))!==this._zoomLevel&&(this._zoomLevel=l,this._zoomLevelWasChanged=!0,this.onZoomChanged.raise1(function(h){return h.notifyZoomChanged(l,u._autoZoom)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zoomLevelWasChanged",{get:function(){return this._zoomLevelWasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"zoomLevelItems",{get:function(){return this._zoomLevelItems},set:function(l){(l=l.map(function(u){return a.correctZoomLevel(u)}))!==this._zoomLevelItems&&(this._zoomLevelItems=l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"autoZoom",{get:function(){return this._autoZoom},set:function(l){var u=this;l!==this._autoZoom&&(this._autoZoom=l,this.onZoomChanged.raise1(function(h){return h.notifyZoomChanged(u._zoomLevel,l)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"simpleView",{get:function(){return this._simpleView},set:function(l){l!==this._simpleView&&(this._simpleView=l,this.notifyViewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"readOnly",{get:function(){return this._readOnly},set:function(l){l!==this._readOnly&&(this._readOnly=l,this.onReadOnlyChanged.raise1(function(u){return u.notifyReadOnlyChanged(l)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(l){this._fullscreen=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"snapToGrid",{get:function(){return this._snapToGrid},set:function(l){this._snapToGrid=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"showGrid",{get:function(){return this._showGrid},set:function(l){var u=this;l!==this._showGrid&&(this._showGrid=l,this.onViewChanged.raise1(function(h){return h.notifyGridChanged(u.showGrid,u.gridSize)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"contextMenuEnabled",{get:function(){return this._contextMenuEnabled},set:function(l){this._contextMenuEnabled=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"gridSize",{get:function(){return this._gridSize},set:function(l){var u=this;l!==this._gridSize&&(this._gridSize=l,this.onViewChanged.raise1(function(h){return h.notifyGridChanged(u.showGrid,u.gridSize)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"gridSizeItems",{get:function(){return this._gridSizeItems},set:function(l){l!==this._gridSizeItems&&(this._gridSizeItems=l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pageSizeItems",{get:function(){return this._pageSizeItems},set:function(l){l!==this._pageSizeItems&&(this._pageSizeItems=l)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"viewUnits",{get:function(){return this._viewUnits},set:function(l){this._viewUnits=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"connectorRoutingMode",{get:function(){return this._connectorRoutingMode},set:function(l){l!==this._connectorRoutingMode&&(this._connectorRoutingMode=l,this.onConnectorRoutingModeChanged.raise1(function(u){return u.notifyConnectorRoutingModeChanged(l)}))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"reloadInsertedItemRequired",{get:function(){return this._reloadInsertedItemRequired},set:function(l){this._reloadInsertedItemRequired=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"useCanvgForExportToImage",{get:function(){return this._useCanvgForExportToImage},set:function(l){this._useCanvgForExportToImage=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shapeMinWidth",{get:function(){return this._shapeMinWidth},set:function(l){this._shapeMinWidth=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shapeMinHeight",{get:function(){return this._shapeMinHeight},set:function(l){this._shapeMinHeight=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shapeMaxWidth",{get:function(){return this._shapeMaxWidth},set:function(l){this._shapeMaxWidth=l},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shapeMaxHeight",{get:function(){return this._shapeMaxHeight},set:function(l){this._shapeMaxHeight=l},enumerable:!1,configurable:!0}),a.prototype.applyShapeSizeSettings=function(l,u){l&&("number"==typeof l.shapeMaxHeight&&(this.shapeMaxHeight=d.ModelUtils.getTwipsValue(u,l.shapeMaxHeight)),"number"==typeof l.shapeMinHeight&&(this.shapeMinHeight=d.ModelUtils.getTwipsValue(u,l.shapeMinHeight)),"number"==typeof l.shapeMaxWidth&&(this.shapeMaxWidth=d.ModelUtils.getTwipsValue(u,l.shapeMaxWidth)),"number"==typeof l.shapeMinWidth&&(this.shapeMinWidth=d.ModelUtils.getTwipsValue(u,l.shapeMinWidth)))},a.prototype.notifyViewChanged=function(){var l=this;this.onViewChanged.raise1(function(u){return u.notifyViewChanged(l._simpleView)})},a.correctZoomLevel=function(l){return Math.min(10,Math.max(l,.01))},a}();_.DiagramSettings=s,(a=m=_.AutoZoomMode||(_.AutoZoomMode={}))[a.Disabled=0]="Disabled",a[a.FitContent=1]="FitContent",a[a.FitToWidth=2]="FitToWidth",function(a){a[a.None=0]="None",a[a.ConnectorShapesOnly=1]="ConnectorShapesOnly",a[a.AllShapesOnly=2]="AllShapesOnly"}(b=_.ConnectorRoutingMode||(_.ConnectorRoutingMode={}))},2230:function(J,_,x){var m,b=this&&this.__extends||(m=function(y,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,s){d.__proto__=s}||function(d,s){for(var a in s)s.hasOwnProperty(a)&&(d[a]=s[a])})(y,p)},function(y,p){function d(){this.constructor=y}m(y,p),y.prototype=null===p?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(_,"__esModule",{value:!0}),_.BarManager=void 0;var E=function(y){function p(d){var s=y.call(this)||this;return s.bars=[],s.control=d,s}return b(p,y),p.prototype.clean=function(){var d=this;this.bars.forEach(function(s){return s.onChanged.remove(d)}),this.bars=[]},p.prototype.registerBar=function(d){this.bars.push(d),d.onChanged.add(this),this.updateBarItemsState(d)},p.prototype.updateItemsState=function(d){if(!this.isUpdateLocked())for(var s=0,a=void 0;a=this.bars[s];s++)this.updateBarItemsState(a,d)},p.prototype.updateBarItemsState=function(d,s){if(!this.isUpdateLocked()){if(this.control.permissionsProvider.beginUpdateUI(),d.isVisible()){var a=void 0;if(s){var l=d.getCommandKeys().reduce(function(f,g){return f[g]=!0,f},{});a=s.filter(function(f){return l[f]})}else a=d.getCommandKeys();for(var u=a.length,h=0;h<u;h++)this.updateBarItem(d,a[h])}this.control.permissionsProvider.endUpdateUI()}},p.prototype.updateBarItem=function(d,s){var a=this.control.commandManager.getCommand(s);if(a){var l=a.getState();if(d.setItemVisible(s,l.visible),l.visible&&(d.setItemEnabled(s,l.enabled),!l.denyUpdateValue)){var u=this.getItemValue(l.value);l.items&&d.setItemSubItems(s,l.items),d.setItemValue(s,u,this.getDefaultItemValue(l.defaultValue))}}},p.prototype.setEnabled=function(d){for(var s=0,a=void 0;a=this.bars[s];s++)a.setEnabled(d)},p.prototype.notifyBarCommandExecuted=function(d,s){this.control.commandManager.getCommand(d).execute(s)||this.updateItemsState([d])},p.prototype.notifyBarUpdateRequested=function(){this.updateItemsState()},p.prototype.notifySelectionChanged=function(d){this.updateItemsState()},p.prototype.onUpdateUnlocked=function(d){},p.prototype.getItemValue=function(d){return d},p.prototype.getDefaultItemValue=function(d){return d},p}(x(1772).BatchUpdatableObject);_.BarManager=E},8675:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.EventUtils=_.HtmlFocusUtils=_.ObjectUtils=_.GeometryUtils=_.Utils=_.EventDispatcher=_.Range=_.LineEquation=void 0,x(7097);var m=x(6353),b=x(8900),E=x(8011),y=x(2400),p=x(5596),d=x(8679),s=x(9716),a=x(1335),l=x(1552),u=x(9279),h=x(3714),f=function(){function k(A,R,M){this.aParam=A,this.bParam=R,this.cParam=M}return k.fromPoints=function(A,R,M){return void 0===M&&(M=1e-5),D.areDuplicatedPoints(A,R,M)?void 0:new k(R.y-A.y,A.x-R.x,R.x*A.y-A.x*R.y)},k.prototype.getPointIntersection=function(A,R){void 0===R&&(R=1e-5);var M=this.aParam,L=this.bParam,H=this.cParam,j=A.aParam,U=A.bParam,K=A.cParam,q=j*L-M*U;if(d.MathUtils.numberCloseTo(q,0,R))return null;if(0===M)return this.createPoint((U*H-K*L)/(L*j),-H/L);var W=(K*M-H*j)/q;return this.createPoint((-L*W-H)/M,W)},k.prototype.containsPoint=function(A,R){return void 0===R&&(R=1e-5),d.MathUtils.numberCloseTo(this.aParam*A.x+this.bParam*A.y+this.cParam,0,R)},k.prototype.createPoint=function(A,R,M){return void 0===M&&(M=1e-5),new b.Point(d.MathUtils.numberCloseTo(A,0,M)?0:A,d.MathUtils.numberCloseTo(R,0,M)?0:R)},k}();_.LineEquation=f;var g=function(){function k(A,R){this.from=A,this.to=void 0!==R?R:A}return Object.defineProperty(k.prototype,"length",{get:function(){return Math.abs(this.to-this.from)},enumerable:!1,configurable:!0}),k.prototype.extend=function(A){this.from=Math.min(A.from,this.from),this.to=Math.max(A.to,this.to)},k.prototype.includes=function(A){return A>=this.from&&A<=this.to},k.fromLength=function(A,R){return new k(A,A+R)},k}();_.Range=g;var O=function(){function k(){this.listeners=[]}return k.prototype.add=function(A){if(!A)throw new Error("Not Implemented");this.hasEventListener(A)||this.listeners.push(A)},k.prototype.remove=function(A){for(var R=0,M=void 0;M=this.listeners[R];R++)if(M===A){this.listeners.splice(R,1);break}},k.prototype.raise=function(A){for(var R=[],M=1;M<arguments.length;M++)R[M-1]=arguments[M];for(var L=0,H=void 0;H=this.listeners[L];L++){var j=H[A];j&&j.apply(H,R)}},k.prototype.raise1=function(A){for(var R=0,M=void 0;M=this.listeners[R];R++)A(M)},k.prototype.hasEventListener=function(A){for(var R=0,M=this.listeners.length;R<M;R++)if(this.listeners[R]===A)return!0;return!1},k}();_.EventDispatcher=O;var I=function(){function k(){}return k.flatten=function(A){return[].concat.apply([],A)},k}();_.Utils=I;var D=function(){function k(){}return k.arePointsOfOrthogonalLine=function(A,R,M){return M?A.y===R.y:A.x===R.x},k.getCommonRectangle=function(A){if(!A.length)return new E.Rectangle(0,0,0,0);var R=Number.MAX_VALUE,M=-Number.MAX_VALUE,L=Number.MAX_VALUE,H=-Number.MAX_VALUE;return A.forEach(function(j){R=Math.min(R,j.x),M=Math.max(M,j.right),L=Math.min(L,j.y),H=Math.max(H,j.bottom)}),new E.Rectangle(R,L,M-R,H-L)},k.findFreeSpace=function(A,R,M,L){var H=[L?L.x:0],j=[L?L.y:0];A.forEach(function(se){H.push(se.x),H.push(se.right),j.push(se.y),j.push(se.bottom)}),H=H.sort(function(se,re){return se-re}).reduce(function(se,re,Q){return H[Q-1]!==re&&se.push(re)&&se||se},[]);for(var U=(j=j.sort(function(se,re){return se-re}).reduce(function(se,re,Q){return j[Q-1]!==re&&se.push(re)&&se||se},[])).map(function(se){return H.map(function(re,Q){return H[Q+1]-re})}),K=function(se,re){for(var Q=y.SearchUtils.binaryIndexOf(H,function(Ce){return Ce-re.x}),G=y.SearchUtils.binaryIndexOf(H,function(Ce){return Ce-re.right}),ie=y.SearchUtils.binaryIndexOf(j,function(Ce){return Ce-re.y}),ae=y.SearchUtils.binaryIndexOf(j,function(Ce){return Ce-re.bottom}),me=ie;me<ae;me++)for(var be=Q;be<G;be++)U[me][be]*=-1},q=0,Y=void 0;Y=A[q];q++)K(0,Y);for(var W=0;W<j.length;W++)for(var z=0;z<H.length-1;z++){var Z=this.checkRect(U,j,H,W,z,R,M);if(Z>0)z=Z;else if(0===Z)return new b.Point(H[z],j[W])}return null},k.checkRect=function(A,R,M,L,H,j,U){for(var K=0,q=0,Y=M.length-2,W=L;W<R.length;W++){K=R[W+1]-R[L];for(var z=H;z<=Y;z++){if(A[W][z]<0)return 0===z?-1:z;if(j.width<=(q=M[z+1]-M[H])||!U&&z===M.length-2&&j.width/2<=q){if(j.height<=K||!U&&W===R.length-2&&j.height/2<=K)return 0;Y=z}}}},k.getArrowPoints=function(A,R,M,L){if(A.x===R.x&&A.y===R.y)return{point1:A.clone(),point2:A.clone(),point3:A.clone()};var H=R.x-A.x,j=R.y-A.y,U=Math.sqrt(Math.pow(H,2)+Math.pow(j,2)),K=H/U,q=j/U,z=A.x+M*K-L*q,Z=A.y+M*q+L*K,se=A.x+M*K,re=A.y+M*q;return{point1:new b.Point(A.x+M*K+L*q,A.y+M*q-L*K),point2:new b.Point(z,Z),point3:new b.Point(se,re)}},k.createSegments=function(A){for(var R=[],M=1;M<A.length;M++)R.push(new a.Segment(A[M-1],A[M]));return R},k.createRectagle=function(A){var R=A.map(function(K){return K.x}),M=A.map(function(K){return K.y}),L=R.reduce(function(K,q){return Math.min(K,q)},Number.MAX_VALUE),H=R.reduce(function(K,q){return Math.max(K,q)},-Number.MAX_VALUE),j=M.reduce(function(K,q){return Math.min(K,q)},Number.MAX_VALUE),U=M.reduce(function(K,q){return Math.max(K,q)},-Number.MAX_VALUE);return new E.Rectangle(L,j,H-L,U-j)},k.createSegmentsFromRectangle=function(A){var R=[],M=new b.Point(A.x,A.y),L=new b.Point(A.right,A.y),H=new b.Point(A.right,A.bottom),j=new b.Point(A.x,A.bottom);return R.push(new a.Segment(M,L)),R.push(new a.Segment(L,H)),R.push(new a.Segment(H,j)),R.push(new a.Segment(j,M)),R},k.areSegmentsCutRectangle=function(A,R){if(!R)return!1;for(var M=k.createSegmentsFromRectangle(R),L=!1,H=!1,j=function(q){if(L&&H)return{value:!0};var Y=A[q];if(Y.isIntersectedByRect(R)){var W=Y.startPoint,z=Y.endPoint,Z=R.containsPoint(W),se=R.containsPoint(z);if(!Z&&!se)return{value:!0};if(Z&&!se){var re=M.filter(function(ae){return ae.containsPoint(W)});return re.length>0&&M.filter(function(ae){return 1===re.length?!ae.containsPoint(re[0].startPoint)&&!ae.containsPoint(re[0].endPoint):ae!==re[0]&&ae!==re[1]}).some(function(ae){return Y.isIntersected(ae)})&&!L&&(L=!0),H||(H=!0),"continue"}if(!Z&&se){L||(L=!0,H&&(H=!1));var Q=M.filter(function(ae){return ae.containsPoint(z)});return Q.length>0&&M.filter(function(ae){return 1===Q.length?!ae.containsPoint(Q[0].startPoint)&&!ae.containsPoint(Q[0].endPoint):ae!==Q[0]&&ae!==Q[1]}).some(function(ae){return Y.isIntersected(ae)})&&!H&&(H=!0),"continue"}var G=M.filter(function(ae){return ae.containsPoint(W)}),ie=M.filter(function(ae){return ae.containsPoint(z)});if(2===G.length&&2===ie.length)return{value:!0};if(1===G.length&&1===ie.length&&G[0]!==ie[0])return{value:!0};H||1!==ie.length||G.length||(H=!0),L||1!==G.length||ie.length||(L=!0,H&&(H=!1))}},U=0;U<A.length;U++){var K=j(U);if("object"==typeof K)return K.value}return L&&H},k.areIntersectedSegments=function(A,R){if(!R)return!1;for(var M,L=0;M=A[L];){for(var H=0,j=void 0;j=R[H];){if(j.isIntersected(M))return!0;H++}L++}return!1},k.isLineIntersected=function(A,R,M,L,H){var j=f.fromPoints(A,R),U=M.startPoint,K=M.endPoint;if(j.containsPoint(U)&&j.containsPoint(K))return!L&&!H;var q=f.fromPoints(U,K).getPointIntersection(j);return!(!q||!M.containsPoint(q)||(L?k.areDuplicatedPoints(U,q):H&&k.areDuplicatedPoints(K,q)))},k.removeUnnecessaryPoints=function(A,R,M,L){void 0===M&&(M=function(H){return void 0!==H}),void 0===L&&(L=1e-5),this.removeUnnecessaryPointsCore(A,R,M,L),this.removeBackwardPoints(A,R,M,L),this.removeUnnecessaryPointsCore(A,R,M,L)},k.removeUnnecessaryRightAnglePoints=function(A,R,M,L){void 0===M&&(M=function(H){return void 0!==H}),void 0===L&&(L=1e-5),this.removeUnnecessaryPointsCore(A,R,M,L),this.removeBackwardPoints(A,R,M,L),this.removeNotRightAnglePoints(A,R,M,L),this.removeUnnecessaryPointsCore(A,R,M,L)},k.removeUnnecessaryPointsCore=function(A,R,M,L){void 0===M&&(M=function(H){return void 0!==H}),void 0===L&&(L=1e-5),this.removeDuplicatedPoints(A,R,M,L),this.removeNotCornersPoints(A,R,M,L)},k.removeNotRightAnglePoints=function(A,R,M,L){void 0===M&&(M=function(q){return void 0!==q}),void 0===L&&(L=1e-5);for(var H,j=0;(H=A[j])&&A.length>2;){var U=this.getNextPoint(A,j,1,M),K=this.getNextPoint(A,j,-1,M);K&&U&&!k.isRightAngleCorner(K,H,U,L)&&R(H,j)||j++}},k.removeDuplicatedPoints=function(A,R,M,L){void 0===M&&(M=function(q){return void 0!==q}),void 0===L&&(L=1e-5);for(var H,j=0;(H=A[j])&&A.length>2;){var U=this.getNextPoint(A,j,1,M);if(U&&k.areDuplicatedPoints(H,U,L)){var K=j===A.length-2?j:j+1;if(R(A[K],K))continue}j++}},k.removeNotCornersPoints=function(A,R,M,L){void 0===M&&(M=function(q){return void 0!==q}),void 0===L&&(L=1e-5);for(var H,j=0;(H=A[j])&&A.length>2;){var U=this.getNextPoint(A,j,1,M),K=this.getNextPoint(A,j,-1,M);K&&U&&!k.isCorner(K,H,U,L)&&R(H,j)||j++}},k.removeBackwardPoints=function(A,R,M,L){void 0===M&&(M=function(q){return void 0!==q}),void 0===L&&(L=1e-5);for(var H,j=0;(H=A[j])&&A.length>2;){var U=this.getNextPoint(A,j,1,M),K=this.getNextPoint(A,j,-1,M);K&&U&&k.isBackwardPoint(K,H,U,L)&&R(H,j)||j++}},k.isRightAngleCorner=function(A,R,M,L){return void 0===L&&(L=1e-5),d.MathUtils.numberCloseTo(k.createAngle(A,R,M),Math.PI/2,L)||d.MathUtils.numberCloseTo(k.createAngle(A,R,M),Math.PI,L)||d.MathUtils.numberCloseTo(k.createAngle(A,R,M),3*Math.PI/2,L)},k.isCorner=function(A,R,M,L){return void 0===L&&(L=1e-5),!d.MathUtils.numberCloseTo(k.createAngle(A,R,M),0,L)},k.areDuplicatedPoints=function(A,R,M){return void 0===M&&(M=1e-5),d.MathUtils.numberCloseTo(A.x,R.x,M)&&d.MathUtils.numberCloseTo(A.y,R.y,M)},k.isBackwardPoint=function(A,R,M,L){return void 0===L&&(L=1e-5),d.MathUtils.numberCloseTo(k.createAngle(A,R,M),Math.PI,L)},k.createAngle=function(A,R,M){var L=s.Vector.fromPoints(R,M),H=s.Vector.fromPoints(A,R),j=L.x,U=L.y,K=H.x,q=H.y,Y=Math.atan2(j*q-K*U,j*K+U*q);return Y<0?2*Math.PI+Y:Y},k.getNextPoint=function(A,R,M,L){for(var H,j=R+M;H=A[j];){if(L(H))return H;j+=M}},k.addSelectedLinesTo=function(A,R,M,L,H,j,U,K,q,Y,W,z,Z,se){void 0===se&&(se=1e-5);var re=R.y-A.y,Q=M.y-R.y,G=A.x-R.x,ie=R.x-M.x,ae=re*ie-Q*G;if(!d.MathUtils.numberCloseTo(ae,0,se)){var me=re*(A.x+L)+G*(A.y+H),be=Q*(R.x+K)+ie*(R.y+q);z((ie*me-G*be)/ae,(re*be-Q*me)/ae);var Ce=re*(A.x+j)+G*(A.y+U),ve=Q*(R.x+Y)+ie*(R.y+W);Z((ie*Ce-G*ve)/ae,(re*ve-Q*Ce)/ae)}},k.getSelectionOffsetPoint=function(A,R,M){return new b.Point((A.y-R.y)/M,(R.x-A.x)/M)},k.getSelectionTextStartEndPoints=function(A,R,M,L,H,j){var U=(R.x-A.x)/M,K=(R.y-A.y)/M,q=H.width*U+H.height*K;switch(j){case l.TextAlignment.Left:return[L,new b.Point(L.x+U*q,L.y+K*q)];case l.TextAlignment.Right:return[new b.Point(L.x-U*q,L.y-K*q),L];default:return[new b.Point(L.x-.5*U*q,L.y-.5*K*q),new b.Point(L.x+.5*U*q,L.y+.5*K*q)]}},k.getPathLength=function(A){var R,M=0;return A.forEach(function(L){void 0!==R&&(M+=p.Metrics.euclideanDistance(L,R)),R=L}),M},k.getPathPointByPosition=function(A,R){if(!A.length)throw new Error("Invalid points");if(0>R||R>1)throw new Error("Invalid relative position");var M=this.getPathLength(A);if(A.length<=2&&0===M||0===R)return[A[0],0];for(var L=M*R,H=0,j=1;j<A.length;j++){var U=p.Metrics.euclideanDistance(A[j],A[j-1]);if(H+U>=L){var K=L-H;return[new b.Point(A[j-1].x+(A[j].x-A[j-1].x)/U*K,A[j-1].y+(A[j].y-A[j-1].y)/U*K),j]}H+=U}return[A[A.length-1],A.length-1]},k.getLineAngle=function(A,R){return Math.atan2(R.y-A.y,R.x-A.x)},k.getTriangleBeginAngle=function(A,R,M){var L=this.getLineAngle(A,R),H=this.getLineAngle(A,M);return Math.abs(H-L)},k.getTriangleEndAngle=function(A,R,M){var L=this.getLineAngle(A,R),H=this.getLineAngle(M,R);return Math.abs(L-H)},k.getPathPointByPoint=function(A,R){if(!A.length)throw new Error("Invalid points");if(1===A.length)return A[0];for(var M,L=Number.MAX_VALUE,H=1;H<A.length;H++){var j=A[H-1],U=A[H];if(R.equals(j)){M=j.clone();break}if(R.equals(U)){M=U.clone();break}var Z,K=this.getTriangleBeginAngle(j,U,R),q=this.getTriangleEndAngle(j,U,R),Y=p.Metrics.euclideanDistance(R,j),W=p.Metrics.euclideanDistance(R,U),z=Y*Math.sin(K);if((Z=Math.PI/2<=K&&K<=3*Math.PI/2?Y:Math.PI/2<=q&&q<=3*Math.PI/2?W:Math.abs(z))<L)if(L=Z,Math.PI/2<=K&&K<=3*Math.PI/2)M=j.clone();else if(Math.PI/2<=q&&q<=3*Math.PI/2)M=U.clone();else{var se=Math.fround||Math.round,re=this.getLineAngle(j,U),Q=se(Math.abs(z*Math.sin(re))),G=se(Math.abs(z*Math.cos(re))),ie=R.y-j.y<se((R.x-j.x)*Math.tan(re));0<=re&&re<=Math.PI/2?(Q*=ie?-1:1,G*=ie?1:-1):Math.PI/2<=re&&re<=Math.PI||0>=re&&re>=-Math.PI/2?(Q*=ie?1:-1,G*=ie?1:-1):-Math.PI/2>=re&&re>=-Math.PI&&(Q*=ie?-1:1,G*=ie?1:-1),M=R.clone().offset(Q,G)}}return M},k.getPathPositionByPoint=function(A,R,M){void 0===M&&(M=100),R=this.getPathPointByPoint(A,R);for(var L=this.getPathLength(A),H=0,j=1;j<A.length;j++){var U=A[j-1],K=A[j],q=p.Metrics.euclideanDistance(K,U),Y=Math.atan((K.y-U.y)/(K.x-U.x)),W=Math.fround||Math.round;if(R.x===K.x&&R.x===U.x||R.y===K.y&&R.y===U.y||W(R.y-U.y)===W((R.x-U.x)*Math.tan(Y)))return 0!==Math.sin(Y)?H+=Math.abs((R.y-U.y)/Math.sin(Y)):H+=Math.abs(R.x-U.x),Math.round(H*M/L)/M;H+=q}return 1},k.arePointsEqual=function(A,R){var M=A.length;if(M!==R.length)return!1;for(var L=0;L<M;L++)if(!A[L].equals(R[L]))return!1;return!0},k.getMaxRectangleEnscribedInEllipse=function(A){var R=A.width*Math.sqrt(2)/2,M=A.height*Math.sqrt(2)/2;return new m.Size(R,M)},k.getEllipseByEnscribedRectangle=function(A){return new m.Size(2*A.width/Math.sqrt(2),2*A.height/Math.sqrt(2))},k}();_.GeometryUtils=D;var C=function(){function k(){}return k.cloneObject=function(A){return A&&Object.assign({},A)},k.compareObjects=function(A,R){return A===R||"object"==typeof A&&"object"==typeof R&&this.isDeepEqual(A,R)},k.isDeepEqual=function(A,R){var M=A?Object.getOwnPropertyNames(A):[],L=R?Object.getOwnPropertyNames(R):[];if(M.length!==L.length)return!1;for(var H=0;H<M.length;H++){var j=M[H];switch(typeof A[j]){case"object":if(!this.isDeepEqual(A[j],R[j]))return!1;break;case"number":if(!(isNaN(A[j])&&isNaN(R[j])||A[j]===R[j]))return!1;break;default:if(A[j]!==R[j])return!1}}return!0},k}();_.ObjectUtils=C;var w=function(){function k(){}return k.focusWithPreventScroll=function(A){try{var R=u.Browser.Safari,M=R&&this.getHtmlScrollPosition();if(R){var L=A.parentElement&&A.parentElement.getBoundingClientRect();if(L){var H=L.left<0?1-L.left:0,j=L.top<0?1-L.top:0,U=window.frameElement&&window.frameElement.getBoundingClientRect();U&&(U.top<0&&-U.top>L.top&&(j=-U.top-L.top+1),U.left<0&&-U.left>L.left&&(H=-U.left-L.left+1)),A.style.setProperty("left",H+"px","important"),A.style.setProperty("top",j+"px","important")}}if(A.focus({preventScroll:!0}),R){var K=this.getHtmlScrollPosition();C.compareObjects(M,K)||this.setHtmlScrollPosition(M),A.style.setProperty("left","-1000px","important"),A.style.setProperty("top","-1000px","important")}}catch{}},k.getHtmlScrollPosition=function(){return{pos:this.getDocumentScrollPosition(window,document),iframePos:window.top!==window&&this.getDocumentScrollPosition(window.top,window.top.document)}},k.getDocumentScrollPosition=function(A,R){return{left:A.pageXOffset||R.documentElement.scrollLeft||R.body.scrollLeft,top:A.pageYOffset||R.documentElement.scrollTop||R.body.scrollTop}},k.setHtmlScrollPosition=function(A){this.setDocumentScrollPosition(document,A.pos),window.top!==window&&A.iframePos&&this.setDocumentScrollPosition(window.top.document,A.iframePos)},k.setDocumentScrollPosition=function(A,R){A.documentElement.scrollTop=R.top,A.documentElement.scrollLeft=R.left,A.body.scrollTop=R.top,A.body.scrollLeft=R.left},k}();_.HtmlFocusUtils=w;var P=function(){function k(){}return k.isLeftButtonPressed=function(A){return h.EvtUtils.isLeftButtonPressed(A)},k.isPointerEvents=function(){return window.PointerEvent},k.isMousePointer=function(A){return this.isPointerEvents()&&(A.pointerType&&"mouse"===A.pointerType||u.Browser.Firefox&&"click"===A.type)},k.isTouchMode=function(){return u.Browser.TouchUI||window.navigator&&window.navigator.maxTouchPoints>0},k.isTouchEvent=function(A){return u.Browser.TouchUI||!k.isMousePointer(A)},k}();_.EventUtils=P},4914:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Data=_.SetAbsoluteY=_.SetAbsoluteX=void 0;var m=x(6907),b=x(2491);function E(d){return!isNaN(parseFloat(d))&&isFinite(d)}function y(d,s,a){return d-function(l,u){var g,O,h=(g=l,(O=document.createElement("DIV")).style.top="0px",O.style.left="0px",O.style.visibility="hidden",O.style.position=m.DomUtils.getCurrentStyle(g).position,O);"static"===h.style.position&&(h.style.position="absolute"),l.parentNode.appendChild(h);var f=u?m.DomUtils.getAbsolutePositionX(h):m.DomUtils.getAbsolutePositionY(h);return l.parentNode.removeChild(h),Math.round(f)}(s,a)}_.SetAbsoluteX=function(d,s){d.style.left=y(s,d,!0)+"px"},_.SetAbsoluteY=function(d,s){d.style.top=y(s,d,!1)+"px"};var p=function(){function d(){}return d.ArrayInsert=function(s,a,l){if(0<=l&&l<s.length){for(var u=s.length;u>l;u--)s[u]=s[u-1];s[l]=a}else s.push(a)},d.ArrayRemove=function(s,a){var l=d.ArrayIndexOf(s,a);l>-1&&d.ArrayRemoveAt(s,l)},d.ArrayRemoveAt=function(s,a){if(a>=0&&a<s.length){for(var l=a;l<s.length-1;l++)s[l]=s[l+1];s.pop()}},d.ArrayClear=function(s){for(;s.length>0;)s.pop()},d.ArrayIndexOf=function(s,a,l){if(l){for(u=0;u<s.length;u++)if(l(s[u],a))return u}else for(var u=0;u<s.length;u++)if(s[u]===a)return u;return-1},d.ArrayContains=function(s,a){return d.ArrayIndexOf(s,a)>=0},d.ArrayEqual=function(s,a){var l=s.length;if(l!==a.length)return!1;for(var u=0;u<l;u++)if(s[u]!==a[u])return!1;return!0},d.ArraySame=function(s,a){return s.length===a.length&&s.every(function(l){return d.ArrayContains(a,l)})},d.ArrayGetIntegerEdgeValues=function(s){var a=d.CollectionToArray(s);return d.ArrayIntegerAscendingSort(a),{start:a[0],end:a[a.length-1]}},d.ArrayIntegerAscendingSort=function(s){d.ArrayIntegerSort(s,!1)},d.ArrayIntegerSort=function(s,a){s.sort(function(l,u){var h=0;return l>u?h=1:l<u&&(h=-1),a&&(h*=-1),h})},d.CollectionsUnionToArray=function(s,a){for(var l=[],u=s.length,h=a.length,f=0;f<u+h;f++)l.push(f<u?s[f]:a[f-u]);return l},d.CollectionToArray=function(s){for(var a=[],l=0;l<s.length;l++)a.push(s[l]);return a},d.CreateHashTableFromArray=function(s){for(var a=[],l=0;l<s.length;l++)a[s[l]]=1;return a},d.CreateIndexHashTableFromArray=function(s){for(var a=[],l=0;l<s.length;l++)a[s[l]]=l;return a},d.ArrayToHash=function(s,a,l){return s instanceof Array?s.reduce(function(u,h,f){var g=a(h,f),O=l(h,f);return u[g]=O,u},{}):{}},d.Sum=function(s,a){return s instanceof Array?s.reduce(function(l,u){var h=a?a(u):u;return E(h)||(h=0),l+h},0):0},d.Min=function(s,a){return d.CalculateArrayMinMax(s,a,!1)},d.Max=function(s,a){return d.CalculateArrayMinMax(s,a,!0)},d.NearestLeftBinarySearchComparer=function(s,a,l){var u=s[a],h=u<l;return h&&a===s.length-1||h&&s[a+1]>=l?0:u<l?-1:1},d.ArrayBinarySearch=function(s,a,l,u,h){l||(l=d.defaultBinarySearchComparer),b.isDefined(u)||(u=0),b.isDefined(h)||(h=s.length-u);for(var f=u+h-1;u<=f;){var g=u+(f-u>>1),O=l(s,g,a);if(0===O)return g;O<0?u=g+1:f=g-1}return-(u+1)},d.ArrayFlatten=function(s){var a=[];return s.forEach(function(l){a=a.concat(l)}),a},d.GetDistinctArray=function(s){for(var a=[],l=0;l<s.length;l++){var u=s[l];-1===d.ArrayIndexOf(a,u)&&a.push(u)}return a},d.ForEach=function(s,a){if(Array.prototype.forEach)Array.prototype.forEach.call(s,a);else for(var l=0,u=s.length;l<u;l++)a(s[l],l,s)},d.MergeHashTables=function(s,a){if(!a||"string"==typeof a)return s;for(var l in s||(s={}),a)l&&!(l in s)&&(s[l]=a[l]);return s},d.Range=function(s,a){return(s=parseInt(s)||0)<0&&(s=0),(a=parseInt(a)||0)<0&&(a=0),Array(s).map(function(l,u){return a+u})},d.CalculateArrayMinMax=function(s,a,l){if(!(s instanceof Array))return 0;var u=l?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY;return s.reduce(function(h,f){var g=a?a(f):f;return E(g)||(g=u),(l?Math.max:Math.min)(g,h)},u)},d.byRange=function(s,a,l){return Math.min(Math.max(s,a),l)},d.defaultBinarySearchComparer=function(s,a,l){var u=s[a];return u===l?0:u<l?-1:1},d.cssTextToObject=function(s){return s?(s=s.replace(/\/\*(.|\s)*?\*\//g,"").replace(/\s+/g," ")).split(";").reduce(function(a,l){if(l){var u=/\s*([^:]+?)\s*:\s*([^;]*)\s*$/.exec(l);if(u){var h=u[1],f=u[2];h&&f&&(a[h.trim()]=f.trim())}return a}return a},{}):{}},d.objectToCssText=function(s){return s?Object.keys(s).reduce(function(a,l){var u=l.trim(),h=s[l];return u&&h&&a.push(u+": "+h.toString().trim()),a},[]).join("; "):""},d}();_.Data=p},8396:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isColorProperty=void 0;var x={stroke:!0,fill:!0};_.isColorProperty=function(m){return x[m]}},3490:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getLineHeight=_.getTextHeight=_.getTextLineSize=_.getOptimalTextRectangle=_.TEXTRECT_RATIO_EPS=_.textToParagraphs=_.textToWords=_.wordsByLines=_.LINE_HEIGHT=void 0;var m=x(8675),b=x(6353),E=x(4914),y=/\s/gm;function p(I,D,C){if(1===D.length)return D;for(var w=C(),P=w.words[" "].width,k=[],A=0,R=-1,M=0;M<D.length;M++){var L=D[M],H=w.words[L].width;-1===R||A+P+H>I?(R=k.push(L)-1,A=H):(A+=P+H,k[R]+=" "+L)}return k}function d(I){return I.split(y).filter(function(D){return D.length})}function s(I){return I.split("\n")}function l(I,D,C){var w=I<1?1/I:I,P=D<1?1/D:D,k=w/P;return(k<1?1/k:k)<=C?0:P>w?1:-1}function u(I,D,C,w){return h(g(I,D,C,!1),w)}function h(I,D){return[E.Data.byRange(I,D.from,D.to),I<=D.to]}function f(I,D){return d(I).reduce(function(C,w,P){var k=D.words[w];return C.width+=k.width,C.height=Math.max(C.height,k.height),P>0&&(C.width+=D.words[" "].width),C},new b.Size(0,0))}function g(I,D,C,w){var P=Array.isArray(I)?I:s(I);return!w||P.length&&(1!==P.length||P[0].length)?P.reduce(function(k,A){return k+p(D,d(A),function(){return C}).length},0)*O(C):O(C)}function O(I){return I.fontSize*_.LINE_HEIGHT}_.LINE_HEIGHT=1.05,_.wordsByLines=p,_.textToWords=d,_.textToParagraphs=s,_.TEXTRECT_RATIO_EPS=1.2,_.getOptimalTextRectangle=function(I,D,C,w,P,k,A,R,M,L){if(void 0===A&&(A=0),void 0===R&&(R=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE),void 0===M&&(M=0),void 0===L&&(L=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE),!I)return new b.Size(E.Data.byRange(P.width,A,R),E.Data.byRange(P.height,M,L));if(A>R||M>L)throw new Error("Min size cannot exceed max size");if(A===R&&M===L)return new b.Size(A,M);var H=w.measureWords(I,D,C),j=s(I),U=Object.keys(H.words).reduce(function(W,z){return Math.max(W,H.words[z].width)},0),K=new m.Range(E.Data.byRange(Math.max(P.width,U),A,R),R),q=new m.Range(E.Data.byRange(P.height,M,L),L);return U<=P.width&&g(j,P.width,H,!1)<=P.height&&K.includes(P.width)&&q.includes(P.height)?P:function(W,z,Z,se,re,Q){for(var G,ie,ae=W.reduce(function(ce,fe){return Math.max(ce,f(fe,z).width)},0),me=new b.Size(0,0),be=new b.Size(0,0),Ce=0,ve=0,ee=0;ee<5;ee++){if(0===ee)be.width=h(ae,se)[0];else{if(!(Math.abs(Ce)>1))break;be.width=h(me.width+Ce,se)[0]}if(G=u(W,be.width,z,re),be.height=G[0],ie=G[1],0===ee&&(ve=(me=be.clone()).width/me.height/Z),0===ee&&!ie)break;var oe=be.width/be.height,te=oe/Z;if(0===ee)Ce=(be.width/te-be.width)/2;else if(ie){if(!l(Z,oe,_.TEXTRECT_RATIO_EPS)){me=be.clone(),ve=te;break}if(!(l(ve,te,1)<0))break;me=be.clone(),ve=te,Ce=(be.width/te-be.width)/2,te<1&&(Ce/=2)}else Ce/=2}return Q&&(me.height=E.Data.byRange(me.width/Z,me.height,re.to)),me}(j,H,P.width/P.height,K,q,k)},_.getTextLineSize=f,_.getTextHeight=g,_.getLineHeight=O},6734:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ViewController=void 0;var m=x(7156),b=Math.log(.05),E=Math.log(3),y=a(1),p=[m.DiagramCommand.ZoomLevel,m.DiagramCommand.ZoomLevelInPercentage,m.DiagramCommand.Zoom100,m.DiagramCommand.Zoom125,m.DiagramCommand.Zoom200,m.DiagramCommand.Zoom25,m.DiagramCommand.Zoom50,m.DiagramCommand.Zoom75],d=[m.DiagramCommand.SwitchAutoZoom,m.DiagramCommand.ToggleAutoZoom,m.DiagramCommand.AutoZoomToContent,m.DiagramCommand.AutoZoomToWidth],s=function(){function l(u,h){this.settings=u,this.bars=h,u.onZoomChanged.add(this),this.autoZoom=u.autoZoom}return l.prototype.initialize=function(u){this.view=u,this.view.onViewChanged.add(this)},l.prototype.scrollTo=function(u,h){this.view&&this.view.setScrollTo(u,h)},l.prototype.scrollBy=function(u){return!this.view||0===u.x&&0===u.y?u:this.view.scrollBy(u)},l.prototype.scrollIntoView=function(u){this.view&&this.view.scrollIntoView(u)},l.prototype.normalize=function(){this.view.tryNormalizePaddings()},l.prototype.getNextStepZoom=function(u){var h=this.getNearestCurrentZoomStep(),g=Math.min(39,Math.max(0,h+(u?1:-1)));return g!==y?Math.exp(b+(E-b)*g/39):1},l.prototype.getNearestCurrentZoomStep=function(){return a(this.getZoom())},l.prototype.getZoom=function(){return this.view?this.view.actualZoom:this.settings.zoomLevel},l.prototype.resetScroll=function(){this.view.adjust({horizontal:!0,vertical:!0})},l.prototype.notifyViewAdjusted=function(u){},l.prototype.notifyActualZoomChanged=function(u){this.bars.updateItemsState(p)},l.prototype.notifyZoomChanged=function(u,h){this.autoZoom!==h&&(this.autoZoom=h,this.bars.updateItemsState(d))},l}();function a(l){var u=Math.log(l);return Math.round(39*(u-b)/(E-b))}_.ViewController=s},3607:(J,_,x)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DiagramModelOperation=_.Diagnostics=_.RenderHelper=_.DiagramLocalizationService=_.NativeConnector=_.NativeShape=_.ShapeType=_.ColorUtils=_.PageOrientation=_.ConnectorPosition=_.ConnectorLineOption=_.ConnectorLineEnding=_.AutoZoomMode=_.Browser=_.UnitConverter=_.EventDispatcher=_.DataLayoutOrientation=_.DataLayoutType=_.ShapeCategories=_.ShapeTypes=_.DiagramUnit=_.default=_.DiagramControl=_.DiagramCommand=_.Point=_.Size=void 0;var m=x(7156);Object.defineProperty(_,"DiagramCommand",{enumerable:!0,get:function(){return m.DiagramCommand}});var b=x(2106);Object.defineProperty(_,"DiagramControl",{enumerable:!0,get:function(){return b.DiagramControl}}),Object.defineProperty(_,"default",{enumerable:!0,get:function(){return b.DiagramControl}});var E=x(6353);Object.defineProperty(_,"Size",{enumerable:!0,get:function(){return E.Size}});var y=x(8900);Object.defineProperty(_,"Point",{enumerable:!0,get:function(){return y.Point}});var p=x(8675);Object.defineProperty(_,"EventDispatcher",{enumerable:!0,get:function(){return p.EventDispatcher}});var d=x(2259);Object.defineProperty(_,"ShapeTypes",{enumerable:!0,get:function(){return d.ShapeTypes}}),Object.defineProperty(_,"ShapeCategories",{enumerable:!0,get:function(){return d.ShapeCategories}}),Object.defineProperty(_,"ShapeType",{enumerable:!0,get:function(){return d.ShapeType}});var s=x(9291);Object.defineProperty(_,"UnitConverter",{enumerable:!0,get:function(){return s.UnitConverter}});var a=x(9279);Object.defineProperty(_,"Browser",{enumerable:!0,get:function(){return a.Browser}});var l=x(240);Object.defineProperty(_,"AutoZoomMode",{enumerable:!0,get:function(){return l.AutoZoomMode}});var u=x(3503);Object.defineProperty(_,"DataLayoutType",{enumerable:!0,get:function(){return u.DataLayoutType}});var h=x(8710);Object.defineProperty(_,"DataLayoutOrientation",{enumerable:!0,get:function(){return h.DataLayoutOrientation}}),x(8721);var f=x(4612);Object.defineProperty(_,"ConnectorLineEnding",{enumerable:!0,get:function(){return f.ConnectorLineEnding}}),Object.defineProperty(_,"ConnectorLineOption",{enumerable:!0,get:function(){return f.ConnectorLineOption}});var g=x(13);Object.defineProperty(_,"ColorUtils",{enumerable:!0,get:function(){return g.ColorUtils}});var O=x(9463);Object.defineProperty(_,"Diagnostics",{enumerable:!0,get:function(){return O.Diagnostics}});var I=x(7185);Object.defineProperty(_,"NativeShape",{enumerable:!0,get:function(){return I.NativeShape}}),Object.defineProperty(_,"NativeConnector",{enumerable:!0,get:function(){return I.NativeConnector}});var D=x(6224);Object.defineProperty(_,"DiagramLocalizationService",{enumerable:!0,get:function(){return D.DiagramLocalizationService}});var C=x(1114);Object.defineProperty(_,"RenderHelper",{enumerable:!0,get:function(){return C.RenderHelper}});var w=x(5383);Object.defineProperty(_,"DiagramUnit",{enumerable:!0,get:function(){return w.DiagramUnit}}),Object.defineProperty(_,"PageOrientation",{enumerable:!0,get:function(){return w.PageOrientation}});var P=x(6879);Object.defineProperty(_,"DiagramModelOperation",{enumerable:!0,get:function(){return P.DiagramModelOperation}});var k=x(7959);Object.defineProperty(_,"ConnectorPosition",{enumerable:!0,get:function(){return k.ConnectorPosition}})},655:(J,_,x)=>{x.r(_),x.d(_,{__assign:()=>E,__asyncDelegator:()=>P,__asyncGenerator:()=>w,__asyncValues:()=>k,__await:()=>C,__awaiter:()=>a,__classPrivateFieldGet:()=>H,__classPrivateFieldSet:()=>j,__createBinding:()=>u,__decorate:()=>p,__exportStar:()=>h,__extends:()=>b,__generator:()=>l,__importDefault:()=>L,__importStar:()=>M,__makeTemplateObject:()=>A,__metadata:()=>s,__param:()=>d,__read:()=>g,__rest:()=>y,__spread:()=>O,__spreadArray:()=>D,__spreadArrays:()=>I,__values:()=>f});var m=function(U,K){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,Y){q.__proto__=Y}||function(q,Y){for(var W in Y)Object.prototype.hasOwnProperty.call(Y,W)&&(q[W]=Y[W])})(U,K)};function b(U,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function q(){this.constructor=U}m(U,K),U.prototype=null===K?Object.create(K):(q.prototype=K.prototype,new q)}var E=function(){return E=Object.assign||function(U){for(var K,q=1,Y=arguments.length;q<Y;q++)for(var W in K=arguments[q])Object.prototype.hasOwnProperty.call(K,W)&&(U[W]=K[W]);return U},E.apply(this,arguments)};function y(U,K){var q={};for(var Y in U)Object.prototype.hasOwnProperty.call(U,Y)&&K.indexOf(Y)<0&&(q[Y]=U[Y]);if(null!=U&&"function"==typeof Object.getOwnPropertySymbols){var W=0;for(Y=Object.getOwnPropertySymbols(U);W<Y.length;W++)K.indexOf(Y[W])<0&&Object.prototype.propertyIsEnumerable.call(U,Y[W])&&(q[Y[W]]=U[Y[W]])}return q}function p(U,K,q,Y){var W,z=arguments.length,Z=z<3?K:null===Y?Y=Object.getOwnPropertyDescriptor(K,q):Y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Z=Reflect.decorate(U,K,q,Y);else for(var se=U.length-1;se>=0;se--)(W=U[se])&&(Z=(z<3?W(Z):z>3?W(K,q,Z):W(K,q))||Z);return z>3&&Z&&Object.defineProperty(K,q,Z),Z}function d(U,K){return function(q,Y){K(q,Y,U)}}function s(U,K){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(U,K)}function a(U,K,q,Y){return new(q||(q=Promise))(function(W,z){function Z(Q){try{re(Y.next(Q))}catch(G){z(G)}}function se(Q){try{re(Y.throw(Q))}catch(G){z(G)}}function re(Q){var G;Q.done?W(Q.value):(G=Q.value,G instanceof q?G:new q(function(ie){ie(G)})).then(Z,se)}re((Y=Y.apply(U,K||[])).next())})}function l(U,K){var q,Y,W,z,Z={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return z={next:se(0),throw:se(1),return:se(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z;function se(re){return function(Q){return function(G){if(q)throw new TypeError("Generator is already executing.");for(;Z;)try{if(q=1,Y&&(W=2&G[0]?Y.return:G[0]?Y.throw||((W=Y.return)&&W.call(Y),0):Y.next)&&!(W=W.call(Y,G[1])).done)return W;switch(Y=0,W&&(G=[2&G[0],W.value]),G[0]){case 0:case 1:W=G;break;case 4:return Z.label++,{value:G[1],done:!1};case 5:Z.label++,Y=G[1],G=[0];continue;case 7:G=Z.ops.pop(),Z.trys.pop();continue;default:if(!((W=(W=Z.trys).length>0&&W[W.length-1])||6!==G[0]&&2!==G[0])){Z=0;continue}if(3===G[0]&&(!W||G[1]>W[0]&&G[1]<W[3])){Z.label=G[1];break}if(6===G[0]&&Z.label<W[1]){Z.label=W[1],W=G;break}if(W&&Z.label<W[2]){Z.label=W[2],Z.ops.push(G);break}W[2]&&Z.ops.pop(),Z.trys.pop();continue}G=K.call(U,Z)}catch(ie){G=[6,ie],Y=0}finally{q=W=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}([re,Q])}}}var u=Object.create?function(U,K,q,Y){void 0===Y&&(Y=q),Object.defineProperty(U,Y,{enumerable:!0,get:function(){return K[q]}})}:function(U,K,q,Y){void 0===Y&&(Y=q),U[Y]=K[q]};function h(U,K){for(var q in U)"default"===q||Object.prototype.hasOwnProperty.call(K,q)||u(K,U,q)}function f(U){var K="function"==typeof Symbol&&Symbol.iterator,q=K&&U[K],Y=0;if(q)return q.call(U);if(U&&"number"==typeof U.length)return{next:function(){return U&&Y>=U.length&&(U=void 0),{value:U&&U[Y++],done:!U}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(U,K){var q="function"==typeof Symbol&&U[Symbol.iterator];if(!q)return U;var Y,W,z=q.call(U),Z=[];try{for(;(void 0===K||K-- >0)&&!(Y=z.next()).done;)Z.push(Y.value)}catch(se){W={error:se}}finally{try{Y&&!Y.done&&(q=z.return)&&q.call(z)}finally{if(W)throw W.error}}return Z}function O(){for(var U=[],K=0;K<arguments.length;K++)U=U.concat(g(arguments[K]));return U}function I(){for(var U=0,K=0,q=arguments.length;K<q;K++)U+=arguments[K].length;var Y=Array(U),W=0;for(K=0;K<q;K++)for(var z=arguments[K],Z=0,se=z.length;Z<se;Z++,W++)Y[W]=z[Z];return Y}function D(U,K,q){if(q||2===arguments.length)for(var Y,W=0,z=K.length;W<z;W++)!Y&&W in K||(Y||(Y=Array.prototype.slice.call(K,0,W)),Y[W]=K[W]);return U.concat(Y||Array.prototype.slice.call(K))}function C(U){return this instanceof C?(this.v=U,this):new C(U)}function w(U,K,q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,W=q.apply(U,K||[]),z=[];return Y={},Z("next"),Z("throw"),Z("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function Z(ie){W[ie]&&(Y[ie]=function(ae){return new Promise(function(me,be){z.push([ie,ae,me,be])>1||se(ie,ae)})})}function se(ie,ae){try{(me=W[ie](ae)).value instanceof C?Promise.resolve(me.value.v).then(re,Q):G(z[0][2],me)}catch(be){G(z[0][3],be)}var me}function re(ie){se("next",ie)}function Q(ie){se("throw",ie)}function G(ie,ae){ie(ae),z.shift(),z.length&&se(z[0][0],z[0][1])}}function P(U){var K,q;return K={},Y("next"),Y("throw",function(W){throw W}),Y("return"),K[Symbol.iterator]=function(){return this},K;function Y(W,z){K[W]=U[W]?function(Z){return(q=!q)?{value:C(U[W](Z)),done:"return"===W}:z?z(Z):Z}:z}}function k(U){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var K,q=U[Symbol.asyncIterator];return q?q.call(U):(U=f(U),K={},Y("next"),Y("throw"),Y("return"),K[Symbol.asyncIterator]=function(){return this},K);function Y(W){K[W]=U[W]&&function(z){return new Promise(function(Z,se){var re,Q,G;re=Z,Q=se,G=(z=U[W](z)).done,Promise.resolve(z.value).then(function(ae){re({value:ae,done:G})},Q)})}}}function A(U,K){return Object.defineProperty?Object.defineProperty(U,"raw",{value:K}):U.raw=K,U}var R=Object.create?function(U,K){Object.defineProperty(U,"default",{enumerable:!0,value:K})}:function(U,K){U.default=K};function M(U){if(U&&U.__esModule)return U;var K={};if(null!=U)for(var q in U)"default"!==q&&Object.prototype.hasOwnProperty.call(U,q)&&u(K,U,q);return R(K,U),K}function L(U){return U&&U.__esModule?U:{default:U}}function H(U,K,q,Y){if("a"===q&&!Y)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof K?U!==K||!Y:!K.has(U))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===q?Y:"a"===q?Y.call(U):Y?Y.value:K.get(U)}function j(U,K,q,Y,W){if("m"===Y)throw new TypeError("Private method is not writable");if("a"===Y&&!W)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof K?U!==K||!W:!K.has(U))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===Y?W.call(U,q):W?W.value=q:K.set(U,q),q}}},Io={};function bi(J){var _=Io[J];if(void 0!==_)return _.exports;var x=Io[J]={exports:{}};return Kl[J].call(x.exports,x,x.exports,bi),x.exports}return bi.d=(J,_)=>{for(var x in _)bi.o(_,x)&&!bi.o(J,x)&&Object.defineProperty(J,x,{enumerable:!0,get:_[x]})},bi.o=(J,_)=>Object.prototype.hasOwnProperty.call(J,_),bi.r=J=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(J,"__esModule",{value:!0})},bi(3607)})(),Gl.exports=Io()}},Gl=>{Gl(Gl.s=642)}]);