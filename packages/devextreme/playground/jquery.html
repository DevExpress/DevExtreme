<!DOCTYPE html>
<html lang="en">
<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript">
        const currentThemeId = localStorage.getItem("currentThemeId") || "light";

        const link = document.createElement("link");
        link.href = `../artifacts/css/dx.${currentThemeId}.css`;
        link.type = "text/css";
        link.rel = "stylesheet";

        document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
    <!-- <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script> -->

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
    <script type="text/javascript" src="./themeSelector.js"></script>
    <script type="text/javascript" src="../../../node_modules/axe-core/axe.min.js"></script>
</head>
<body class="dx-surface">
<div role="main">
    <h1 style="position: fixed; left: 0; top: 0; clip: rect(1px, 1px, 1px, 1px);">Test header</h1>

    <select id="theme-selector" style="display: block;">
    </select>
    <br />

    <div class="dx-viewport demo-container">
        <div class="form">
            <div>
                <div class="label">Catalog:</div>
                <div id="menu"></div>
                <div id="product-details" class="hidden">
                    <img src="" />
                    <div class="name"></div>
                    <div class="price"></div>
                </div>
            </div>
            <hr>
            <img id="image" alt="product" src="https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/7.png" />
            <div id="context-menu"></div>
            <div class="options">
                <div class="caption">Options</div>
                <div class="option">
                    <div>Show First Submenu Mode</div>
                    <div id="show-submenu-mode"></div>
                </div>
                <div class="option">
                    <div>Orientation</div>
                    <div id="orientation"></div>
                </div>
                <div class="option">
                    <div id="mouse-leave"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(() => {
            const dxMenu = $('#menu').dxMenu({
                dataSource: menuData,
                hideSubmenuOnMouseLeave: false,
                displayExpr: 'name',
                onItemRendered(e) {
                    // let el = e.itemElement.closest(".dx-submenu");
                    // let parentElement = el.closest(".dx-menu-item-has-submenu");
                    // // let ul = e.itemElement.closest(".dx-menu-items-container");
                    // if (parentElement.length && e.itemIndex === 0) {
                    //     el.css("position", "fixed")
                    //     el.css('height', 250);
                    //     el.dxScrollView({});
                    //     console.log('dxScrollView', el)
                    // }
                },
                onSubmenuShowing({ submenuContainer, itemData }) {
                    // const baseHeight = 500;
                    //
                    // submenu.getOverlayContent().find('.dx-submenu')
                    //     .css('maxHeight', 250);
                    submenuContainer.css('maxHeight', 250);
                    console.log(itemData);
                },
                onItemClick(data) {
                    const item = data.itemData;
                    if (item.price) {
                        $('#product-details').removeClass('hidden');
                        $('#product-details > img').attr('src', item.icon);
                        $('#product-details > .price').text(`$${item.price}`);
                        $('#product-details > .name').text(item.name);
                    }
                },
            }).dxMenu('instance');

            $('#context-menu').dxContextMenu({
                dataSource: contextMenuItems,
                width: 200,
                target: '#image',
                onItemClick(e) {
                    if (!e.itemData.items) {
                        DevExpress.ui.notify(`The "${e.itemData.text}" item was clicked`, 'success', 1500);
                    }
                },
            });

            const showSubmenuModes = [{
                name: 'onHover',
                delay: { show: 0, hide: 500 },
            }, {
                name: 'onClick',
                delay: { show: 0, hide: 300 },
            }];

            $('#show-submenu-mode').dxSelectBox({
                items: showSubmenuModes,
                value: showSubmenuModes[1],
                displayExpr: 'name',
                onValueChanged(data) {
                    dxMenu.option('showFirstSubmenuMode', data.value);
                },
            });

            $('#orientation').dxSelectBox({
                items: ['horizontal', 'vertical'],
                value: 'horizontal',
                onValueChanged(data) {
                    dxMenu.option('orientation', data.value);
                },
            });

            $('#mouse-leave').dxCheckBox({
                value: false,
                text: 'Hide Submenu on Mouse Leave',
                onValueChanged(data) {
                    dxMenu.option('hideSubmenuOnMouseLeave', data.value);
                },
            });
        });

        const menuData = [
            {
                id: '1',
                name: 'Video Players',
                height: 500,
                items: [
                    {
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        height: 200,
                        items: [{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        },{
                            id: '1_1',
                            name: 'HD Video Player',
                            price: 220,
                            icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                        }]
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    },{
                        id: '1_1',
                        name: 'HD Video Player',
                        price: 220,
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/1.png',
                    }, {
                        id: '1_2',
                        name: 'SuperHD Video Player',
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/2.png',
                        price: 270,
                    }],
            }, {
                id: '2',
                name: 'Televisions',
                height: 200,
                items: [{
                    id: '2_1',
                    name: 'SuperLCD 42',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/7.png',
                    price: 1200,
                }, {
                    id: '2_2',
                    name: 'SuperLED 42',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/5.png',
                    price: 1450,
                }, {
                    id: '2_3',
                    name: 'SuperLED 50',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/4.png',
                    price: 1600,
                }, {
                    id: '2_4',
                    name: 'SuperLCD 55 (Not available)',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/6.png',
                    price: 1350,
                    disabled: true,
                }, {
                    id: '2_5',
                    name: 'SuperLCD 70',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/9.png',
                    price: 4000,
                }],
            }, {
                id: '3',
                name: 'Monitors',
                height: 100,
                items: [{
                    id: '3_1',
                    name: '19"',
                    items: [{
                        id: '3_1_1',
                        name: 'DesktopLCD 19',
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/10.png',
                        price: 160,
                    }],
                }, {
                    id: '3_2',
                    name: '21"',
                    items: [{
                        id: '3_2_1',
                        name: 'DesktopLCD 21',
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/12.png',
                        price: 170,
                    }, {
                        id: '3_2_2',
                        name: 'DesktopLED 21',
                        icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/13.png',
                        price: 175,
                    }],
                }],
            }, {
                id: '4',
                name: 'Projectors',
                height: 100,
                items: [{
                    id: '4_1',
                    name: 'Projector Plus',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/14.png',
                    price: 550,
                }, {
                    id: '4_2',
                    name: 'Projector PlusHD',
                    icon: 'https://js.devexpress.com/Demos/WidgetsGallery/JSDemos/images/products/15.png',
                    price: 750,
                }],
            }];

        const contextMenuItems = [
            {
                text: 'Share',
                items: [
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                    { text: 'Facebook' },
                    { text: 'Twitter' },
                ],
            },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
            { text: 'Download' },
            { text: 'Comment' },
            { text: 'Favorite' },
        ];
    </script>
</div>
</body>
</html>
