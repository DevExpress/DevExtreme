<!DOCTYPE html>
<html lang="en">

<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript">
        const currentThemeId = localStorage.getItem("currentThemeId") || "light";

        const link = document.createElement("link");
        link.href = `../artifacts/css/dx.${currentThemeId}.css`;
        link.type = "text/css";
        link.rel = "stylesheet";

        document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
    <!-- <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script> -->

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
    <script type="text/javascript" src="./themeSelector.js"></script>
    <script type="text/javascript" src="../../../node_modules/axe-core/axe.min.js"></script>

    <style>
        .demo-container .dx-fieldset:first-child {
            width: 500px;
        }

        .custom-color-picker {
            width: 82px;
            padding: 5px;
        }

        .color {
            cursor: pointer;
            font-size: 18px;
        }

        #text {
            line-height: 1.35;
        }

        .text-container {
            padding-inline-start: 12px;
            padding-inline-end: 4px;
            display: flex;
            align-items: flex-start;
            flex-direction: column;
        }

        .button-img-container {
            position: relative;
            height: 32px;
        }

        .button-img {
            width: 32px;
            height: 32px;
            position: relative;
            border-width: 1px;
            border-style: solid;
            border-color: var(--dx-color-border);
            border-radius: 50%;
        }

        .button-img-indicator {
            position: absolute;
            background-color: var(--dx-color-danger);
            top: -1px;
            inset-inline-end: -1px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border-width: 2px;
            border-style: solid;
            border-color: var(--dx-color-main-bg);
            z-index: 1;
        }

        .button-title {
            line-height: 20px;
        }

        .button-row {
            font-size: 12px;
            line-height: 14px;
            opacity: 0.6;
        }

        #custom-template .dx-button {
            height: 46px;
        }

        #custom-template .dx-button.dx-dropdownbutton-action .dx-button-content {
            padding-inline-start: 12px;
            padding-inline-end: 12px;
        }
    </style>
</head>

<body class="dx-surface">
    <div role="main">
        <h1 style="position: fixed; left: 0; top: 0; clip: rect(1px, 1px, 1px, 1px);">Test header</h1>

        <select id="theme-selector" style="display: block;">
        </select>
        <br />

        <div class="dx-viewport">
            <div class="demo-container">
                <div class="dx-fieldset">
                    <div class="dx-fieldset-header">Standalone button</div>
                    <div class="dx-field">
                        <div class="dx-field-label">Text and icon</div>
                        <div class="dx-field-value">
                            <div id="one-section"></div>
                        </div>
                    </div>

                    <div class="dx-field">
                        <div class="dx-field-label">Custom template and actions</div>
                        <div class="dx-field-value">
                            <div id="custom-template"></div>
                        </div>
                    </div>
                </div>

                <div class="dx-fieldset">
                    <div class="dx-fieldset-header">Embedded in a Toolbar</div>
                    <div class="dx-field">
                        <div id="template"></div>
                    </div>
                    <div class="dx-field">
                        <p id="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                            incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
                            exercitation ullamco
                            laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
                            voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
                            cupidatat
                            non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                </div>
            </div>
        </div>
        <script>
            const colors = [null, '#980000', '#ff0000', '#ff9900', '#ffff00', '#00ff00', '#00ffff', '#4a86e8', '#0000ff', '#9900ff', '#ff00ff', '#ff3466'];
            const profileSettings = [
                { id: 1, name: 'Profile', icon: 'user' },
                {
                    id: 4, name: 'Messages', icon: 'email', badge: '5',
                },
                { id: 2, name: 'Friends', icon: 'group' },
                { id: 3, name: 'Exit', icon: 'runner' },
            ];
            const downloads = ['Download Trial For Visual Studio', 'Download Trial For All Platforms', 'Package Managers'];
            const alignments = [
                { id: 1, name: 'Left', icon: 'alignleft' },
                { id: 4, name: 'Right', icon: 'alignright' },
                { id: 2, name: 'Center', icon: 'aligncenter' },
                { id: 3, name: 'Justify', icon: 'alignjustify' },
            ];
            const fontSizes = [
                { size: 10, text: '10px' },
                { size: 12, text: '12px' },
                { size: 14, text: '14px' },
                { size: 16, text: '16px' },
                { size: 18, text: '18px' },
            ];
            const lineHeights = [
                { lineHeight: 1, text: '1' },
                { lineHeight: 1.35, text: '1.35' },
                { lineHeight: 1.5, text: '1.5' },
                { lineHeight: 2, text: '2' },
            ];

            $(() => {
                $('#one-section').dxDropDownButton({
                    // height: 100,
                    text: 'Download Trial',
                    icon: 'save',
                    dropDownOptions: {
                        width: 230,
                    },
                    onItemClick(e) {
                        DevExpress.ui.notify(`Download ${e.itemData}`, 'success', 600);
                    },
                    items: downloads,
                });

                $('#custom-template').dxDropDownButton({
                    items: profileSettings,
                    splitButton: true,
                    onButtonClick(e) {
                        DevExpress.ui.notify(`Go to ${e.element.find('.button-title').text()}'s profile`, 'success', 600);
                    },
                    onItemClick(e) {
                        DevExpress.ui.notify(e.itemData.name, 'success', 600);
                    },
                    displayExpr: 'name',
                    keyExpr: 'id',
                    useSelectMode: false,
                    template(data, element) {
                        const $imageContainer = $('<div>')
                            .addClass('button-img-container').appendTo(element);

                        $('<div>')
                            .addClass('button-img-indicator').appendTo($imageContainer);

                        $('<img>')
                            .addClass('button-img')
                            .attr({
                                src: '../../../../images/employees/51.png',
                                alt: 'employee',
                            }).appendTo($imageContainer);

                        const $textContainer = $('<div>')
                            .addClass('text-container').appendTo(element);

                        $('<div>')
                            .addClass('button-title').text('Olivia Peyton')
                            .appendTo($textContainer);

                        $('<div>')
                            .addClass('button-row').text('IT Manager').appendTo($textContainer);

                        return $(element);
                    },
                });

                $('#template').dxToolbar({
                    items: [
                        {
                            location: 'before',
                            widget: 'dxDropDownButton',
                            options: {
                                displayExpr: 'name',
                                keyExpr: 'id',
                                selectedItemKey: 3,
                                width: 125,
                                stylingMode: 'text',
                                useSelectMode: true,
                                onSelectionChanged(e) {
                                    $('#text').css('text-align', e.item.name.toLowerCase());
                                },
                                items: alignments,
                            },
                        },
                        {
                            location: 'before',
                            widget: 'dxDropDownButton',
                            options: {
                                items: colors,
                                icon: 'square',
                                stylingMode: 'text',
                                dropDownOptions: { width: 'auto' },
                                onInitialized(e) {
                                    dropDownButton = e.component;
                                },
                                dropDownContentTemplate(data, $container) {
                                    const $colorPicker = $('<div>')
                                        .addClass('custom-color-picker')
                                        .appendTo($container);

                                    data.forEach((color) => {
                                        const $button = $('<i>')
                                            .addClass('color dx-icon dx-icon-square')
                                            .on('dxclick', () => {
                                                applyColor($('#text'), color);
                                                applyColor(dropDownButton.$element().find('.dx-dropdownbutton-action .dx-icon').first(), color);
                                                dropDownButton.close();
                                            });

                                        applyColor($button, color);
                                        $colorPicker.append($button);
                                    });
                                },
                            },
                        },
                        {
                            location: 'before',
                            widget: 'dxDropDownButton',
                            options: {
                                stylingMode: 'text',
                                displayExpr: 'text',
                                keyExpr: 'size',
                                useSelectMode: true,
                                items: fontSizes,
                                selectedItemKey: 14,
                                onSelectionChanged(e) {
                                    $('#text').css('font-size', `${e.item.size}px`);
                                },
                                itemTemplate(itemData) {
                                    return $('<div>')
                                        .text(itemData.text)
                                        .css('font-size', `${itemData.size}px`);
                                },
                            },
                        },
                        {
                            location: 'before',
                            widget: 'dxDropDownButton',
                            options: {
                                stylingMode: 'text',
                                icon: 'indent',
                                displayExpr: 'text',
                                keyExpr: 'lineHeight',
                                useSelectMode: true,
                                items: lineHeights,
                                selectedItemKey: 1.35,
                                onSelectionChanged(e) {
                                    $('#text').css('line-height', e.item.lineHeight);
                                },
                            },
                        },
                    ],
                });
            });

            let dropDownButton;
            function applyColor($element, color) {
                if (color) {
                    $element.css('color', color);
                } else {
                    $element.css('color', '');
                }
            }

        </script>
    </div>
</body>

</html>