<!DOCTYPE html>
<html lang="en">

<head>
    <title>DevExtreme jQuery Example</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script type="text/javascript">
        const currentThemeId = localStorage.getItem("currentThemeId") || "light";

        const link = document.createElement("link");
        link.href = `../artifacts/css/dx.${currentThemeId}.css`;
        link.type = "text/css";
        link.rel = "stylesheet";

        document.getElementsByTagName("head")[0].appendChild(link);

    </script>

    <script type="text/javascript" src="../artifacts/js/jquery.js"></script>
    <!-- HtmlEditor -->
    <!-- <script type="text/javascript" src="../artifacts/js/dx-quill.min.js"></script> -->

    <!--<script type="text/javascript" src="../artifacts/js/cldr.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/event.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/supplemental.js"></script>
    <script type="text/javascript" src="../artifacts/js/cldr/unresolved.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/message.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/number.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/currency.js"></script>
    <script type="text/javascript" src="../artifacts/js/globalize/date.js"></script>-->

    <!--
    <script type="text/javascript" src="../artifacts/js/exceljs.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/FileSaver.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jszip.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="../artifacts/js/jspdf.plugin.autotable.min.js"></script>
    -->

    <script type="text/javascript" src="../artifacts/js/dx.all.debug.js" charset="utf-8"></script>
    <script type="text/javascript" src="./themeSelector.js"></script>
    <script type="text/javascript" src="../../../node_modules/axe-core/axe.min.js"></script>
</head>

<body class="dx-surface">
    <div role="main">
        <h1 style="position: fixed; left: 0; top: 0; clip: rect(1px, 1px, 1px, 1px);">Test header</h1>

        <select id="theme-selector" style="display: block;">
        </select>
        <br />
        <div class="demo-container">
            <div id="sales"></div>
            <div class="options">
                <div class="caption">Options</div>
                <div class="option">
                    <span>Apply Changes Mode:</span>
                    <div id="applyChangesMode"></div>
                </div>
            </div>
        </div>
        <script>
            $(() => {
                const salesPivotGrid = $('#sales').dxPivotGrid({
                    allowSortingBySummary: true,
                    allowSorting: true,
                    allowFiltering: true,
                    showBorders: true,
                    height: 470,
                    fieldChooser: {
                        enabled: true,
                        applyChangesMode: 'instantly',
                        allowSearch: true,
                    },
                    searchPanel: {
                        visible: true,
                    },
                    groupPanel: {
                        visible: true,
                    },
                    fieldPanel: {
                        showColumnFields: true,
                        showDataFields: true,
                        showFilterFields: true,
                        showRowFields: true,
                        allowFieldDragging: true,
                        visible: true,
                    },
                    dataSource: {
                        fields: [{
                                dataField: '[Product].[Category]',
                                area: 'row'
                            },
                            {
                                dataField: '[Product].[Subcategory]',
                                area: 'row',
                                headerFilter: {
                                    search: {
                                        enabled: true,
                                    },
                                },
                            },
                            {
                                dataField: '[Ship Date].[Calendar Year]',
                                area: 'column'
                            },
                            {
                                dataField: '[Ship Date].[Month of Year]',
                                area: 'column'
                            },
                            {
                                dataField: '[Measures].[Customer Count]',
                                area: 'data'
                            },
                        ],
                        store: {
                            type: 'xmla',
                            url: 'https://demos.devexpress.com/Services/OLAP/msmdpump.dll',
                            catalog: 'Adventure Works DW Standard Edition',
                            cube: 'Adventure Works',
                        },
                    },
                }).dxPivotGrid('instance');

                $('#applyChangesMode').dxSelectBox({
                    items: ['instantly', 'onDemand'],
                    inputAttr: {
                        'aria-label': 'Apply Changes Mode'
                    },
                    width: 180,
                    value: 'instantly',
                    onValueChanged(data) {
                        salesPivotGrid.option('fieldChooser.applyChangesMode', data.value);
                    },
                });
            });

        </script>
    </div>
</body>

</html>
