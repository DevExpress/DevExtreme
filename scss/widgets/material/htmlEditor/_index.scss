@use "sass:color";
@use "colors" as *;
@use "../colors" as *;
@use "sizes" as *;
@use "../sizes" as *;
@use "../button/sizes" as *;
@use "../textEditor/colors" as *;
@use "../toolbar/sizes" as *;
@use "../common/mixins" as *;
@use "../../base/htmlEditor";

// adduse


.dx-htmleditor {
  border-color: transparent;
  position: relative;

  .dx-htmleditor-toolbar-wrapper:first-child {
    border-bottom: 1px solid $texteditor-border-color;
  }

  &.dx-invalid {
    border: 1px solid $htmleditor-invalid-faded-border-color;

    &.dx-state-focused {
      border-color: $htmleditor-invalid-border-color;
    }
  }

  &.dx-htmleditor-outlined {
    box-shadow: inset 0 0 0 1px $texteditor-border-color;
    border-color: transparent;
    border-radius: $texteditor-input-border-radius;

    &.dx-state-disabled,
    &.dx-state-readonly,
    &.dx-state-readonly.dx-state-hover {
      box-shadow: inset 0 0 0 1px color.change($texteditor-color, $alpha: 0.5);
    }

    &.dx-invalid {
      box-shadow: inset 0 0 0 1px $texteditor-invalid-faded-border-color;
    }

    &.dx-state-hover {
      box-shadow: inset 0 0 0 1px $texteditor-hover-border-color;
    }

    &.dx-state-focused,
    &.dx-state-active {
      box-shadow: inset 0 0 0 2px $texteditor-focused-border-color;
    }
  }

  &.dx-htmleditor-filled {
    background: $texteditor-bg;

    &.dx-state-hover {
      background-color: $texteditor-hover-bg;
      border-bottom: 1px solid $texteditor-hover-border-color;
    }

    &.dx-state-disabled,
    &.dx-state-readonly,
    &.dx-state-readonly.dx-state-hover {
      background-color: color.change($texteditor-bg, $alpha: 0.12);
    }
  }

  &.dx-htmleditor-underlined {
    border-color: transparent;
    border-bottom-color: $texteditor-border-color;

    &.dx-invalid {
      border-bottom-color: $texteditor-invalid-faded-border-color;
    }

    .dx-htmleditor-content {
      padding-left: 0;
    }

    &.dx-rtl {
      .dx-htmleditor-content {
        padding-left: $material-html-editor-horizontal-padding;
        padding-right: 0;
      }
    }

    &.dx-state-hover:not(.dx-state-focused) {
      border-bottom: 2px solid $texteditor-hover-border-color;
    }

    &.dx-state-disabled,
    &.dx-state-readonly,
    &.dx-state-readonly.dx-state-hover {
      border-bottom-style: dotted;
      border-bottom-width: 1px;
    }
  }

  &.dx-htmleditor-filled,
  &.dx-htmleditor-underlined {
    &::before {
      left: 0;
      right: 0;
      bottom: -1px;
      height: 0;
      width: 100%;
      content: '';
      position: absolute;
      z-index: 2;
      transform: scale(0);
    }

    &.dx-state-focused,
    &.dx-state-active {
      &::before {
        border-bottom: 2px solid $texteditor-focused-border-color;
        transform: scale(1);
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.02, 1);
      }
    }
  }
}

.dx-htmleditor-content {
  &.ql-blank::before { // stylelint-disable-line selector-class-pattern
    color: $texteditor-placeholder-color;
  }

  pre {
    color: color.change($base-text-color, $alpha: 0.8);
  }

  blockquote {
    color: color.change($base-text-color, $alpha: 0.8);
    border-left-color: $htmleditor-toolbar-border-color;

    .dx-rtl & {
      border-right-color: $htmleditor-toolbar-border-color;
    }
  }

  .dx-variable {
    & > span {
      background: $htmleditor-variable-bg;
    }
  }

  td {
    border-color: $htmleditor-table-border-color;
  }
}

.dx-htmleditor-toolbar {
  background-color: transparent;

  .dx-format-active:not(.dx-color-format):not(.dx-background-format) {
    background-color: $htmleditor-normal-format-active-bg;

    &.dx-button-success {
      background-color: $htmleditor-success-format-active-bg;
    }

    &.dx-button-default {
      background-color: $htmleditor-default-format-active-bg;
    }

    &.dx-button-danger {
      background-color: $htmleditor-danger-format-active-bg;
    }
  }
}

.dx-htmleditor-toolbar-format {
  &.dx-dropdowneditor.dx-editor-filled {
    background-color: transparent;
  }

  &.dx-color-format,
  &.dx-background-format {
    .dx-button-content {
      padding-bottom: $material-button-vertical-padding - 3px;
    }
  }

  &.dx-size-format {
    width: $material-toolbar-size-editor-width;
  }
}

.dx-htmleditor-toolbar-separator {
  height: 50%;
  border-left-color: $htmleditor-toolbar-border-color;

  .dx-toolbar-multiline & {
    height: $material-toolbar-height / 2;
  }
}

.dx-htmleditor-toolbar-menu-separator {
  border-top-color: $htmleditor-toolbar-border-color;
}

.dx-resize-frame {
  border-color: $htmleditor-resize-frame-border-color;

  .dx-resizable-handle-corner-top-right,
  .dx-resizable-handle-corner-top-left,
  .dx-resizable-handle-corner-bottom-right,
  .dx-resizable-handle-corner-bottom-left {
    background-color: $htmleditor-resize-handle-bg;
  }

  .dx-resizable-handle-top,
  .dx-resizable-handle-left,
  .dx-resizable-handle-right,
  .dx-resizable-handle-bottom {
    &::after {
      background-color: $htmleditor-resize-handle-bg;
    }
  }
}

.dx-mention {
  background-color: $htmleditor-mention-bg;
}

.dx-suggestion-list-wrapper {
  @include dx-dropdownlist-list-appearance();
}
